# [\#3535 Issue](https://github.com/rear/rear/issues/3535) `open`: Is editing disklayout.conf and disktodo.cong enough for excluding entire disks?

#### <img src="https://avatars.githubusercontent.com/u/2930601?v=4" width="50">[remoteweb](https://github.com/remoteweb) opened issue at [2025-11-13 22:06](https://github.com/rear/rear/issues/3535):

### Requesting support or just a question

Want to know if we can safely exclude components by removing them from
generated disklayout and disktodo confs

### Platform

Linux ARM64

### Output

    disklayout.conf sample

    # Format: disk <devname> <size(bytes)> <partition label type>
    disk /dev/nvme0n1 4000787030016 unknown
    # Partitions on /dev/nvme0n1
    # Format: part <device> <partition size(bytes)> <partition start(bytes)> <partition type|name> <flags> /dev/<partition>
    # Disk /dev/nvme1n1
    # Format: disk <devname> <size(bytes)> <partition label type>
    disk /dev/nvme1n1 4000787030016 unknown
    # Partitions on /dev/nvme1n1
    # Format: part <device> <partition size(bytes)> <partition start(bytes)> <partition type|name> <flags> /dev/<partition>
    # Disk /dev/nvme2n1
    # Format: disk <devname> <size(bytes)> <partition label type>
    disk /dev/nvme2n1 4000787030016 unknown
    # Partitions on /dev/nvme2n1
    # Format: part <device> <partition size(bytes)> <partition start(bytes)> <partition type|name> <flags> /dev/<partition>
    # Disk /dev/nvme3n1
    # Format: disk <devname> <size(bytes)> <partition label type>
    disk /dev/nvme3n1 4000787030016 unknown
    # Partitions on /dev/nvme3n1
    # Format: part <device> <partition size(bytes)> <partition start(bytes)> <partition type|name> <flags> /dev/<partition>
    # Disk /dev/nvme4n1
    # Format: disk <devname> <size(bytes)> <partition label type>
    disk /dev/nvme4n1 1024209543168 gpt
    # Partitions on /dev/nvme4n1
    # Format: part <device> <partition size(bytes)> <partition start(bytes)> <partition type|name> <flags> /dev/<partition>
    part /dev/nvme4n1 629145600 1048576 EFI%20System%20Partition boot,esp /dev/nvme4n1p1
    part /dev/nvme4n1 1073741824 630194176 nvme0n1p2 none /dev/nvme4n1p2
    part /dev/nvme4n1 1022505254912 1703936000 nvme0n1p3 lvm /dev/nvme4n1p3
    # Disk /dev/sda
    # Format: disk <devname> <size(bytes)> <partition label type>
    disk /dev/sda 35999342133248 unknown
    # Partitions on /dev/sda
    # Format: part <device> <partition size(bytes)> <partition start(bytes)> <partition type|name> <flags> /dev/<partition>
    # Disk /dev/sdb
    # Format: disk <devname> <size(bytes)> <partition label type>
    disk /dev/sdb 35999342133248 unknown
    # Partitions on /dev/sdb
    # Format: part <device> <partition size(bytes)> <partition start(bytes)> <partition type|name> <flags> /dev/<partition>
    # Disk /dev/sdc
    # Format: disk <devname> <size(bytes)> <partition label type>
    disk /dev/sdc 35999342133248 unknown
    # Partitions on /dev/sdc
    # Format: part <device> <partition size(bytes)> <partition start(bytes)> <partition type|name> <flags> /dev/<partition>
    # Disk /dev/sdd
    # Format: disk <devname> <size(bytes)> <partition label type>
    disk /dev/sdd 23999203508224 unknown
    # Partitions on /dev/sdd
    # Format: part <device> <partition size(bytes)> <partition start(bytes)> <partition type|name> <flags> /dev/<partition>
    # Disk /dev/sde
    # Format: disk <devname> <size(bytes)> <partition label type>
    disk /dev/sde 35999342133248 unknown
    # Partitions on /dev/sde
    # Format: part <device> <partition size(bytes)> <partition start(bytes)> <partition type|name> <flags> /dev/<partition>
    # Format for LVM PVs
    # lvmdev <volume_group> <device> [<uuid>] [<size(bytes)>]
    lvmdev /dev/vgNVMe1 /dev/nvme0n1 FIyifg-aom8-xyly-G27e-7Dzy-JsXT-9eGdVS 4000783007744
    lvmdev /dev/vgNVMe1 /dev/nvme1n1 Mh80HN-X04b-b6uw-ieeY-g3xc-Cb5C-Wy6KxZ 4000783007744
    lvmdev /dev/vgNVMe2 /dev/nvme2n1 4CCV1U-T79V-F8gi-1S0K-TRhc-7ZV3-YJ18AC 4000783007744
    lvmdev /dev/vgNVMe2 /dev/nvme3n1 kSmp4v-nQDe-C6GZ-q3ft-Hphi-RWqc-i4wMbM 4000783007744
    lvmdev /dev/cl /dev/nvme4n1p3 w2xwAr-iGcv-K8Fk-fIfv-dyOO-IrRx-rU1E9H 1022504206336
    lvmdev /dev/vg01 /dev/sda DDjpe7-7NBN-woER-8M9H-obmI-ILTU-AqMQU5 35999337938944
    lvmdev /dev/vg02 /dev/sdb UhlO1f-IV84-4UzE-qY9G-Q308-wfH6-YUJ9md 35999337938944
    lvmdev /dev/vg03 /dev/sdc xBsNtu-4Klt-4YSV-G0p4-YPnB-M8Ng-SfyzWW 35999337938944
    lvmdev /dev/vg04 /dev/sdd Sog74f-Pkcg-0q7s-qhjj-MVha-7WWw-0uKtUc 23999199313920
    lvmdev /dev/vg05 /dev/sde qCHjQd-aW4L-NwrS-Jhtl-6Pr9-823H-46dygZ 35999337938944
    # Format for LVM VGs
    # lvmgrp <volume_group> <extentsize> [<size(extents)>] [<size(bytes)>]
    lvmgrp /dev/vg05 4096 8582911 35155603456
    lvmgrp /dev/vg04 4096 5721855 23436718080
    lvmgrp /dev/vg03 4096 8582911 35155603456
    lvmgrp /dev/vg02 4096 8582911 35155603456
    lvmgrp /dev/vgNVMe2 4096 1907722 7814029312
    lvmgrp /dev/vgNVMe1 4096 1907722 7814029312
    lvmgrp /dev/cl 4096 243784 998539264
    lvmgrp /dev/vg01 4096 8582911 35155603456
    # Format for LVM LVs
    # lvmvol <volume_group> <name> <size(bytes)> <layout> [key:value ...]
    lvmvol /dev/vg02 arisxamaYT 107374182400b thin,sparse thinpool:thinpool2
    lvmvol /dev/cl root 107374182400b linear 
    lvmvol /dev/cl swap 137438953472b linear 
    lvmvol /dev/vgNVMe1 XXXXXX63LOU7 274877906944b thin,sparse thinpool:nvmeThinPool1
    lvmvol /dev/vgNVMe2 XXXXXX9SESFT 274877906944b thin,sparse thinpool:nvmeThinPool2
    lvmvol /dev/vgNVMe1 XXXXXX2LQPB 274877906944b thin,sparse thinpool:nvmeThinPool1
    lvmvol /dev/vgNVMe2 XXXXXX20AIB 274877906944b thin,sparse thinpool:nvmeThinPool2
    lvmvol /dev/vgNVMe1 XXXXXX4OUB7U7 274877906944b thin,sparse thinpool:nvmeThinPool1
    lvmvol /dev/vgNVMe1 XXXXXXIFSB1F 274877906944b thin,sparse thinpool:nvmeThinPool1
    ...



    disktodo.conf look like this

    todo /dev/nvme0n1 disk
    todo /dev/nvme1n1 disk
    todo /dev/nvme2n1 disk
    todo /dev/nvme3n1 disk
    todo /dev/nvme4n1 disk
    todo /dev/nvme4n1p1 part
    todo /dev/nvme4n1p2 part
    todo /dev/nvme4n1p3 part
    todo /dev/sda disk
    todo /dev/sdb disk
    todo /dev/sdc disk
    todo /dev/sdd disk
    todo /dev/sde disk
    todo pv:/dev/nvme0n1 lvmdev
    todo pv:/dev/nvme1n1 lvmdev
    todo pv:/dev/nvme2n1 lvmdev
    todo pv:/dev/nvme3n1 lvmdev
    todo pv:/dev/nvme4n1p3 lvmdev
    todo pv:/dev/sda lvmdev
    todo pv:/dev/sdb lvmdev
    todo pv:/dev/sdc lvmdev
    todo pv:/dev/sdd lvmdev
    todo pv:/dev/sde lvmdev
    todo /dev/vg05 lvmgrp
    todo /dev/vg04 lvmgrp
    todo /dev/vg03 lvmgrp
    todo /dev/vg02 lvmgrp
    todo /dev/vgNVMe2 lvmgrp
    todo /dev/vgNVMe1 lvmgrp
    todo /dev/cl lvmgrp
    todo /dev/vg01 lvmgrp
    todo /dev/mapper/vg02-arisxamaYT lvmvol
    todo /dev/mapper/cl-root lvmvol
    todo /dev/mapper/cl-swap lvmvol
    todo /dev/mapper/vgNVMe1-XXXX63LOU7 lvmvol
    todo /dev/mapper/vgNVMe2-XXXX9SESFT lvmvol
    todo /dev/mapper/vgNVMe1-XXXX2LQPB lvmvol
    ...

### Additional information

Hi guys,

on a production server running RHEL 8.7, we run rear mkbackup (v2.9)
without EXCLUDE\_COMPONENTS configured.

Besides our NVMe OS drive attached via single pci adapter car  
we have 4 NVMe drives that we directly attach via pci adapter card and
use them via LVM.  
And 12 SAS drives that we use via RAID0 configuration per 4 disks with
Megaraid to using them via sda, sdb, sdc that we use via LVM again.

We would like to remove any recreation task that the rear mkbackup had
created for all disks except the OS drive.

Is this ok to do? Do we need to edit anything else to make sure those
drives won't be touched?

------------------------------------------------------------------------

\[Export of Github issue for
[rear/rear](https://github.com/rear/rear).\]
