# [\#3433 Issue](https://github.com/rear/rear/issues/3433) `closed`: Cannot do backup: "Unsupported partition table 'unknown' on /dev/sdb"

**Labels**: `enhancement`, `support / question`, `fixed / solved / done`

#### <img src="https://avatars.githubusercontent.com/u/203995699?v=4" width="50">[u4ea75](https://github.com/u4ea75) opened issue at [2025-03-19 11:48](https://github.com/rear/rear/issues/3433):

### Requesting support or just a question

Cannot exclude disk from backup

### Platform

Linux x64

### Output

    Relax-and-Recover 2.7 / Git
    Running rear mkbackup (PID 54431 date 2025-03-19 12:21:43)
    Command line options: /home/connadmin/rear/usr/sbin/rear -v -d mkbackup
    Using log file: /home/connadmin/rear/var/log/rear/rear-itflowsrv.log
    Using build area: /var/tmp/rear.Px7CbCMVxXNYgrU
    Setting TMPDIR to ReaR's '/var/tmp/rear.Px7CbCMVxXNYgrU/tmp' (was unset when ReaR was launched)
    Running 'init' stage ======================
    Running workflow mkbackup on the normal/original system
    Running 'prep' stage ======================
    Using backup archive '/var/tmp/rear.Px7CbCMVxXNYgrU/outputfs/rear/itflowsrv/20250319.1221/backup.tar.gz'
    No 'console=...' setting for recovery system kernel (none in /proc/cmdline)
    Found EFI system partition /dev/sda1 on /boot/efi type vfat
    Using UEFI Boot Loader for Linux (USING_UEFI_BOOTLOADER=1)
    Secure Boot is disabled, not using Secure Boot shim:
    SecureBoot disabled
    Platform is in Setup Mode
    Using autodetected kernel '/boot/vmlinuz-6.8.0-55-generic' as kernel in the recovery system
    Cannot write protect USB disk of '/dev/disk/by-label/REAR-000' via ID (no ID found)
    File system label of '/dev/disk/by-label/REAR-000' added to WRITE_PROTECTED_FS_LABEL_PATTERNS
    Modified ReaR recovery system area after 'prep' stage (/var/tmp/rear.Px7CbCMVxXNYgrU/rootfs contains regular files)
    Running 'layout/save' stage ======================
    Creating disk layout
    Overwriting existing disk layout file /home/connadmin/rear/var/lib/rear/layout/disklayout.conf
    ERROR: Unsupported partition table 'unknown' on /dev/sdb (must be one of 'msdos' 'gpt' 'gpt_sync_mbr' 'dasd')
    Some latest log messages since the last called script 200_partition_layout.sh:
      2025-03-19 12:21:45.225827786 Saving disks and their partitions
      Error: Can't have a partition outside the disk!
      Error: Can't have a partition outside the disk!
    You may use debugscript mode '-D' for full debug messages with 'set -x' output
    Aborting due to an error, check /home/connadmin/rear/var/log/rear/rear-itflowsrv.log for details
    Exiting rear mkbackup (PID 54431) and its descendant processes ...
    Running exit tasks
    To remove the build area you may use (with caution): rm -Rf --one-file-system /var/tmp/rear.Px7CbCMVxXNYgrU

### Additional information

-   ReaR version ("/usr/sbin/rear -V"):

Relax-and-Recover 2.7 / Git

Ubuntu 24.04.1 LTS

-   ReaR configuration files

<!-- -->

    AUTOEXCLUDE_MULTIPATH=y
    AUTOEXCLUDE_DISKS=y
    EXCLUDE_RECREATE+=( "fs:/dev/sdb")

-   Hardware vendor/product (PC or PowerNV BareMetal or ARM) or VM (KVM
    guest or PowerVM LPAR):  
    Dell PowerEdge R220

-   System architecture (x86 compatible or PPC64/PPC64LE or what exact
    ARM device):  
    x86\_64

-   Firmware (BIOS or UEFI or Open Firmware) and bootloader (GRUB or
    ELILO or Petitboot):  
    Should be a BIOS boot with grub

-   Storage (local disk or SSD) and/or SAN (FC or iSCSI or FCoE) and/or
    multipath (DM or NVMe):  
    two hdd on raid 1

-   Storage layout ("lsblk -ipo
    NAME,KNAME,PKNAME,TRAN,TYPE,FSTYPE,LABEL,SIZE,MOUNTPOINT"):

<!-- -->

    NAME                                  KNAME     PKNAME    TRAN   TYPE FSTYPE      LABEL      SIZE MOUNTPOIN
    /dev/sda                              /dev/sda            sata   disk                      465.8G
    |-/dev/sda1                           /dev/sda1 /dev/sda         part vfat                     1G /boot/efi
    |-/dev/sda2                           /dev/sda2 /dev/sda         part ext4                     2G /boot
    `-/dev/sda3                           /dev/sda3 /dev/sda         part LVM2_member          462.7G
      `-/dev/mapper/ubuntu--vg-ubuntu--lv /dev/dm-0 /dev/sda3        lvm  ext4                   100G /
    /dev/sdb                              /dev/sdb            sata   disk                      465.8G
    `-/dev/sdb1                           /dev/sdb1 /dev/sdb         part                      465.8G
    /dev/sdc                              /dev/sdc            usb    disk                       28.9G
    |-/dev/sdc1                           /dev/sdc1 /dev/sdc         part                          8M
    |-/dev/sdc2                           /dev/sdc2 /dev/sdc         part vfat        REAR-EFI     1G
    `-/dev/sdc3                           /dev/sdc3 /dev/sdc         part ext3        REAR-000  27.9G
    /dev/sr0                              /dev/sr0            sata   rom                        1024M

I'm unable to do backup, this is the output:

    Relax-and-Recover 2.7 / Git
    Running rear mkbackup (PID 54431 date 2025-03-19 12:21:43)
    Command line options: /home/connadmin/rear/usr/sbin/rear -v -d mkbackup
    Using log file: /home/connadmin/rear/var/log/rear/rear-itflowsrv.log
    Using build area: /var/tmp/rear.Px7CbCMVxXNYgrU
    Setting TMPDIR to ReaR's '/var/tmp/rear.Px7CbCMVxXNYgrU/tmp' (was unset when ReaR was launched)
    Running 'init' stage ======================
    Running workflow mkbackup on the normal/original system
    Running 'prep' stage ======================
    Using backup archive '/var/tmp/rear.Px7CbCMVxXNYgrU/outputfs/rear/itflowsrv/20250319.1221/backup.tar.gz'
    No 'console=...' setting for recovery system kernel (none in /proc/cmdline)
    Found EFI system partition /dev/sda1 on /boot/efi type vfat
    Using UEFI Boot Loader for Linux (USING_UEFI_BOOTLOADER=1)
    Secure Boot is disabled, not using Secure Boot shim:
    SecureBoot disabled
    Platform is in Setup Mode
    Using autodetected kernel '/boot/vmlinuz-6.8.0-55-generic' as kernel in the recovery system
    Cannot write protect USB disk of '/dev/disk/by-label/REAR-000' via ID (no ID found)
    File system label of '/dev/disk/by-label/REAR-000' added to WRITE_PROTECTED_FS_LABEL_PATTERNS
    Modified ReaR recovery system area after 'prep' stage (/var/tmp/rear.Px7CbCMVxXNYgrU/rootfs contains regular files)
    Running 'layout/save' stage ======================
    Creating disk layout
    Overwriting existing disk layout file /home/connadmin/rear/var/lib/rear/layout/disklayout.conf
    ERROR: Unsupported partition table 'unknown' on /dev/sdb (must be one of 'msdos' 'gpt' 'gpt_sync_mbr' 'dasd')
    Some latest log messages since the last called script 200_partition_layout.sh:
      2025-03-19 12:21:45.225827786 Saving disks and their partitions
      Error: Can't have a partition outside the disk!
      Error: Can't have a partition outside the disk!
    You may use debugscript mode '-D' for full debug messages with 'set -x' output
    Aborting due to an error, check /home/connadmin/rear/var/log/rear/rear-itflowsrv.log for details
    Exiting rear mkbackup (PID 54431) and its descendant processes ...
    Running exit tasks
    To remove the build area you may use (with caution): rm -Rf --one-file-system /var/tmp/rear.Px7CbCMVxXNYgrU

#### <img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50">[jsmeix](https://github.com/jsmeix) commented at [2025-03-19 13:21](https://github.com/rear/rear/issues/3433#issuecomment-2736620479):

I think I vaguely remember that we recently had  
such kind of issue here at ReaR upstream

    ERROR: Unsupported partition table 'unknown' on ... (must be one of 'msdos' 'gpt' 'gpt_sync_mbr' 'dasd')

...  
googling for `ERROR: Unsupported partition table 'unknown' on`  
found it:  
<https://github.com/rear/rear/issues/2995>  
which is also on Ubuntu 24.04.X LTS  
that one is on Ubuntu 20.04.6 LTS and was  
reproduced with Ubuntu-Server 20.04.2 LTS, cf.  
<https://github.com/rear/rear/issues/2995#issuecomment-1598782245>

#### <img src="https://avatars.githubusercontent.com/u/203995699?v=4" width="50">[u4ea75](https://github.com/u4ea75) commented at [2025-03-19 13:33](https://github.com/rear/rear/issues/3433#issuecomment-2736668666):

I read that posts before write my one but cannot understand what to do
sorry, could u help?

#### <img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50">[gdha](https://github.com/gdha) commented at [2025-03-20 08:56](https://github.com/rear/rear/issues/3433#issuecomment-2739638078):

@jsmeix could PR <https://github.com/rear/rear/pull/3403> be of any help
here?

#### <img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50">[jsmeix](https://github.com/jsmeix) commented at [2025-03-20 09:02](https://github.com/rear/rear/issues/3433#issuecomment-2739653044):

@gdha  
I don't know.  
I did not find time to investigate the details of those issues.

#### <img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50">[jsmeix](https://github.com/jsmeix) commented at [2025-03-20 09:11](https://github.com/rear/rear/issues/3433#issuecomment-2739674503):

@u4ea75

FYI some generic boilerplate info:

In general I recommend to try out our latest GitHub master code  
because the GitHub master code is the only place where we fix things  
and if there are issues it helps when you use exactly the code  
where we could fix things.

See the "QUICK START GUIDE" and "INSTALLATION" parts on  
<https://github.com/rear/rear>

Additionally / alternatively see the section  
"Testing current ReaR upstream GitHub master code" in  
<https://en.opensuse.org/SDB:Disaster_Recovery>  
how you can try out our current ReaR GitHub master code  
without conflicts with your already installed ReaR version.

In general we at ReaR upstream do not support older ReaR versions.  
We at ReaR upstream do not plain reject issues with older ReaR
versions  
(e.g. we may answer easy to solve questions also for older ReaR
versions)  
but we do not spend much time on issues with older ReaR versions
because  
we do not (and cannot) fix issues in released ReaR versions.  
Issues in released ReaR versions are not fixed by us (by ReaR
upstream).  
Issues in released ReaR versions that got fixed in current ReaR
upstream  
GitHub master code might be fixed (if the fix can be backported with  
reasonable effort) by the Linux distributor wherefrom you got ReaR.

In particular regarding Ubuntu / Debian:

I am neither a Ubuntu user nor a Debian user.  
Currently we at ReaR upstream do not have  
an active maintainer for Ubuntu / Debian.  
So ReaR support for Ubuntu / Debian  
can be only as good as voluntary contributors  
who use those Linux distributions contribute  
which is much appreciated!

In particular regarding Ubuntu:  
It seems Canonical is not sufficiently interested in ReaR  
in contrast to Red Hat and SUSE who pay developers  
(like me from SUSE and e.g. @pcahyna and @lzaoral from Red Hat)  
to contribute to upstream ReaR because Red Hat and SUSE  
support ReaR in their enterprise Linux distributions.

#### <img src="https://avatars.githubusercontent.com/u/203995699?v=4" width="50">[u4ea75](https://github.com/u4ea75) commented at [2025-04-14 13:18](https://github.com/rear/rear/issues/3433#issuecomment-2801689421):

Thank u so much for answer and sorry for be late,  
I will valuate to change OS and update my software, best regards

#### <img src="https://avatars.githubusercontent.com/u/203995699?v=4" width="50">[u4ea75](https://github.com/u4ea75) commented at [2025-04-14 15:50](https://github.com/rear/rear/issues/3433#issuecomment-2802158821):

I managed to use latest GitHub master code:

git clone <https://github.com/rear/rear.git> rear2  
cd rear2  
mv rear rear2.github.master  
cd rear2.github.master/  
/rear2.github.master/usr/sbin$ rear -d mkbackup

Still getting same error:

Overwriting existing disk layout file
/var/lib/rear/layout/disklayout.conf  
ERROR: Unsupported partition table 'unknown' (must be one of 'msdos'
'gpt' 'gpt\_sync\_mbr' 'dasd')  
Some latest log messages since the last called script
200\_partition\_layout.sh:  
2025-04-14 15:51:48.439793241 Saving disks and their partitions  
Error: Can't have a partition outside the disk!  
Error: Can't have a partition outside the disk!  
You may use debugscript mode '-D' for full debug messages with 'set -x'
output  
Error exit of rear mkbackup (PID 3159) and its descendant processes

I suppose that the Unknow partition table is the second disk of raid 1
configuration, there’s not a way to exclude that disk from backup
process?  
Best regards

#### <img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50">[jsmeix](https://github.com/jsmeix) commented at [2025-04-15 06:56](https://github.com/rear/rear/issues/3433#issuecomment-2804018271):

    ERROR: Unsupported partition table 'unknown' (must be one of 'msdos' 'gpt' 'gpt_sync_mbr' 'dasd')

is not from our current ReaR upstream GitHub master code.  
In our current ReaR upstream GitHub master code the message is

    Unsupported partition table '$disk_label' on $device (must be one of 'msdos' 'gpt' 'gpt_sync_mbr' 'dasd')

<https://github.com/rear/rear/blob/master/usr/share/rear/layout/save/GNU/Linux/200_partition_layout.sh#L125>

Above in  
<https://github.com/rear/rear/issues/3433#issuecomment-2736620479>  
I referenced a possibly related issue where according to  
<https://github.com/rear/rear/issues/2995#issuecomment-1570082935>  
I think it is currently not possible to exclude that disk.  
A possible root cause was found in  
<https://github.com/rear/rear/issues/2995#issuecomment-1598782245>  
You may verify if the possible root cause there  
is also the root cause on your specific Ubuntu system.

I am not a Ubuntu user so I cannot actually help with issues  
that happen specifically on Ubuntu.

#### <img src="https://avatars.githubusercontent.com/u/203995699?v=4" width="50">[u4ea75](https://github.com/u4ea75) commented at [2025-04-15 07:38](https://github.com/rear/rear/issues/3433#issuecomment-2804117199):

ok first of all I would like to use your ReaR upstream GitHub master
code cause right now I haven't backup working, is there anywhere a guide
to remove old version and use yours?  
Thank u so much for your help, very appreciate

#### <img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50">[jsmeix](https://github.com/jsmeix) commented at [2025-04-15 08:02](https://github.com/rear/rear/issues/3433#issuecomment-2804178089):

@u4ea75  
you do not need to remove an installed ReaR version.  
You only need to follow exactly what I described in  
"Testing current ReaR upstream GitHub master code" in  
<https://en.opensuse.org/SDB:Disaster_Recovery>  
in particular

    Note the relative paths "etc/rear/" and "usr/sbin/". 

#### <img src="https://avatars.githubusercontent.com/u/203995699?v=4" width="50">[u4ea75](https://github.com/u4ea75) commented at [2025-04-15 16:06](https://github.com/rear/rear/issues/3433#issuecomment-2806646300):

sorry to bother u I didn't understand very well  
the meanings for "note the relative paths.."

I've followed instrucion on es.opensuse.org linked page  
but still get same error:

    Relax-and-Recover 2.9 / 2025-01-31
    Running rear mkbackup (PID 53399 date 2025-04-15 17:57:50)
    Command line options: usr/sbin/rear -D mkbackup
    Using log file: /home/connadmin/rear.github.master/var/log/rear/rear-itflowsrv.log
    Using build area: /var/tmp/rear.tiWuq1R6fkIiAKS
    Setting TMPDIR to ReaR's '/var/tmp/rear.tiWuq1R6fkIiAKS/tmp' (was unset when ReaR was launched)
    Sourced files must be owned by one of the TRUSTED_OWNERS: root connadmin
    Sourced files must be below one of the TRUSTED_PATHS: /home/connadmin/rear.github.master/ /usr/ /etc/ /lib/
    Running 'init' stage ======================
    Running workflow mkbackup on the normal/original system
    Running 'prep' stage ======================
    Using backup archive '/var/tmp/rear.tiWuq1R6fkIiAKS/outputfs/rear/itflowsrv/20250415.1757/backup.tar.gz'
    No 'console=...' setting for recovery system kernel (none in /proc/cmdline)
    Found EFI system partition /dev/sda1 on /boot/efi type vfat
    Using UEFI Boot Loader for Linux (USING_UEFI_BOOTLOADER=1)
    Secure Boot is disabled, not using Secure Boot shim:
    SecureBoot disabled
    Platform is in Setup Mode
    Using autodetected kernel '/boot/vmlinuz-6.8.0-57-generic' as kernel in the recovery system
    Cannot write protect USB disk of '/dev/disk/by-label/REAR-000' via ID (no ID found)
    File system label of '/dev/disk/by-label/REAR-000' added to WRITE_PROTECTED_FS_LABEL_PATTERNS
    Modified ReaR recovery system area after 'prep' stage (/var/tmp/rear.tiWuq1R6fkIiAKS/rootfs contains regular files)
    Running 'layout/save' stage ======================
    Creating disk layout
    ERROR: Unsupported partition table 'unknown' on /dev/sdb (must be one of 'msdos' 'gpt' 'gpt_sync_mbr' 'dasd')
    Some latest log messages since the last called script 200_partition_layout.sh:
      2025-04-15 17:57:53.379741572 Entering debugscript mode via 'set -x'.
      2025-04-15 17:57:53.385298864 Trusted sourcing '/home/connadmin/rear.github.master/usr/share/rear/layout/save/GNU/Linux/200_partition_layout.sh'
      2025-04-15 17:57:53.398407753 Saving disks and their partitions
      Error: Can't have a partition outside the disk!
      Error: Can't have a partition outside the disk!
    Aborting due to an error, check /home/connadmin/rear.github.master/var/log/rear/rear-itflowsrv.log for details
    Exiting rear mkbackup (PID 53399) and its descendant processes ...
    Running exit tasks
    To remove the build area you may use (with caution): rm -Rf --one-file-system /var/tmp/rear.tiWuq1R6fkIiAKS
    Terminated

If I'm missing something where I must start to read instructions for
configuration?

This is my local.conf that worked in the past  
before restoring on a raid 1 server

    OUTPUT=USB
    BACKUP=NETFS
    #La riga sotto fa il backup su disco usb chiamato REAR-000
    BACKUP_URL=usb:///dev/disk/by-label/REAR-000
    BACKUP_PROG_EXCLUDE=("${BACKUP_PROG_EXCLUDE[@]}" '/media' '/var/tmp' '/var/crash' '/dev/sdb')
    #BACKUP_URL="nfs://10.10.10.238/volume1/NetBackup/"

#### <img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50">[jsmeix](https://github.com/jsmeix) commented at [2025-04-17 06:50](https://github.com/rear/rear/issues/3433#issuecomment-2811966932):

@u4ea75

    Note the relative paths "etc/rear/" and "usr/sbin/". 

in "Testing current ReaR upstream GitHub master code" in  
<https://en.opensuse.org/SDB:Disaster_Recovery>  
means that what you did

    /rear2.github.master/usr/sbin$ rear -d mkbackup

according to your  
<https://github.com/rear/rear/issues/3433#issuecomment-2802158821>  
is likely not what you should have done which is ensuring  
that you call 'rear' within your '/rear2.github.master'.

Whether or not

    cd /rear2.github.master/usr/sbin
    rear -d mkbackup

actually calls '/rear2.github.master/usr/sbin/rear'  
or another 'rear' depends on whether or not your current  
working directory '.' is in your PATH environment variable  
and if it is in your PATH environment variable then it also  
depends on whether or not your current working directory  
is in PATH before the usual system '\*bin' directories.

For example how it looks on my openSUSE Leap 15.6 system  
where I have ReaR 2.7 installed in the system from RPM package  
and I have current GitHub master code as described in  
"Testing current ReaR upstream GitHub master code" in  
<https://en.opensuse.org/SDB:Disaster_Recovery>

    # echo $PATH
    /sbin:/usr/sbin:/usr/local/sbin:/root/bin:/usr/local/bin:/usr/bin:/bin

    # type -a rear
    rear is /usr/sbin/rear

    # PATH+=':.'

    # echo $PATH
    /sbin:/usr/sbin:/usr/local/sbin:/root/bin:/usr/local/bin:/usr/bin:/bin:.

    # cd rear.github.master/usr/sbin

    # type -a rear
    rear is /usr/sbin/rear
    rear is ./rear

    # rear -V
    Relax-and-Recover 2.7 / 2022-07-13

    # ./rear -V
    Relax-and-Recover 2.9 / 2025-01-31

By the way:  
If at all have '.' at the end of PATH.  
Never have '.' at (or near) the beginning of PATH.  
Having '.' at the beginning of PATH is a security risk because  
then executable files with same name as standard commands  
in whatever current working directory will get executed  
instead of the actual standard commands in system directories  
so be excited about the thrill which file gets executed  
when you call this or that command depending on in which  
working directory you currently are ;-)

#### <img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50">[jsmeix](https://github.com/jsmeix) commented at [2025-04-17 07:34](https://github.com/rear/rear/issues/3433#issuecomment-2812051869):

@u4ea75

your  
<https://github.com/rear/rear/issues/3433#issuecomment-2806646300>

    ERROR: Unsupported partition table 'unknown' on /dev/sdb (must be one of 'msdos' 'gpt' 'gpt_sync_mbr' 'dasd')
    Some latest log messages since the last called script 200_partition_layout.sh:
      2025-04-15 17:57:53.379741572 Entering debugscript mode via 'set -x'.
      2025-04-15 17:57:53.385298864 Trusted sourcing '/home/connadmin/rear.github.master/usr/share/rear/layout/save/GNU/Linux/200_partition_layout.sh'
      2025-04-15 17:57:53.398407753 Saving disks and their partitions
      Error: Can't have a partition outside the disk!
      Error: Can't have a partition outside the disk!

proves that your issue also happens with current GitHub master code.

In your initial  
<https://github.com/rear/rear/issues/3433#issue-2931493278>  
there is

    Storage ...:
    two hdd on raid 1

and 'lsblk' (excerpts)

    NAME        KNAME     PKNAME   TRAN TYPE ...   SIZE MOUNTPOINT
    /dev/sda    /dev/sda           sata disk     465.8G
    |-/dev/sda1 ...                                  1G /boot/efi
    |-/dev/sda2 ...                                  2G /boot
    `-/dev/sda3 ...                              462.7G
    ...
    /dev/sdb    /dev/sdb           sata disk     465.8G
    `-/dev/sdb1 /dev/sdb1 /dev/sdb      part     465.8G

As far as 'lsblk' tells this is not a RAID1  
of /dev/sda and /dev/sdb because /dev/sdb  
is shown in 'lsblk' as completely unused.  
Currently your system seems to be only on /dev/sda.

Perhaps you use some special kind of RAID1?  
At least you do not use traditional Linux kernel RAID1.

For example how a traditional Linux kernel RAID1  
of two disks /dev/sda and /dev/sdb could look like  
see the 'lsblk' output for a "SLES15 SP4 with RAID1 ..." system on  
<https://github.com/rear/rear/wiki/Test-Matrix-ReaR-2.7#sles15-sp4-with-raid1-migrated-to-replacement-systems-with-smaller-and-bigger-disk-size>

    # lsblk -ipo NAME,TYPE,FSTYPE,SIZEAlternativey setup your system anew from scratch
    to

    NAME             TYPE  FSTYPE             SIZE
    /dev/sda         disk  linux_raid_member    9G
    `-/dev/md127     raid1                      9G
      |-/dev/md127p1 part                     102M
      |-/dev/md127p2 part  swap                 1G
      `-/dev/md127p3 part  btrfs              7.5G
    /dev/sdb         disk  linux_raid_member   10G
    `-/dev/md127     raid1                      9G
      |-/dev/md127p1 part                     102M
      |-/dev/md127p2 part  swap                 1G
      `-/dev/md127p3 part  btrfs              7.5G

The two disks /dev/sda (9G) and /dev/sdb (10G)  
are combined into a Linux kernel RAID1 /dev/md127 (9G)  
and on that RAID1 "disk" /dev/md127 the partitions  
/dev/md127p1 and /dev/md127p1 and /dev/md127p1 exist  
which are listed by 'lsblk' indetical below  
both RAID1 member disks /dev/sda and /dev/sdb.

Furthermore the error messages

    Unsupported partition table 'unknown' on /dev/sdb (must be one of 'msdos' 'gpt' 'gpt_sync_mbr' 'dasd')
    ...
    Error: Can't have a partition outside the disk!

tell that your /dev/sdb is wrong set up.

If you like to keep your system as it currently is  
and use ReaR on it so you could recreate it  
in case of a disaster as it currently is,  
then you would need my recent  
<https://github.com/rear/rear/pull/3455>  
(it is not yet merged into GitHub master code)  
so that you could exclude the unused /dev/sdb  
(provided it is really unused in your specific case)  
from the very beginning in ReaR to circumvent  
issues with that problematic disk.

#### <img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50">[jsmeix](https://github.com/jsmeix) commented at [2025-04-17 08:19](https://github.com/rear/rear/issues/3433#issuecomment-2812148919):

@u4ea75

how to use GitHub master code with my recent  
<https://github.com/rear/rear/pull/3455>

If you already have a 'rear.github.master' directory  
move it away via something like

    mv rear.github.master rear.github.master.old

before you do the following:

    git clone https://github.com/rear/rear.git

    mv rear rear.github.master

    cd rear.github.master

    git checkout -b jsmeix-disk-EXCLUDE_COMPONENTS remotes/origin/jsmeix-disk-EXCLUDE_COMPONENTS

    vi etc/rear/local.conf

    usr/sbin/rear -D mkbackup

i.e. 'git clone' the current GitHub master code and then  
'git checkout' my current jsmeix-disk-EXCLUDE\_COMPONENTS  
branch in the current GitHub master code

In that branch you have in usr/share/rear/conf/default.conf  
a description how to exclude a problematic diks  
from the very beginning via EXCLUDE\_COMPONENTS

    # Because EXCLUDE_COMPONENTS excludes any component from the recovery
    # it can be used in exceptional cases to exclude unwanted whole disks from the very beginning,
    # for example to circumvent issues with unneeded problematic disks which cause issues in ReaR
    # as in https://github.com/rear/rear/issues/2995 where parted could not recognize a partition table.
    # To exclude a disk with mounted filesystems their mountpoints must be also specified
    # for example via EXCLUDE_COMPONENTS+=( /dev/sdX fs:/mountpoint1 fs:/mountpoint2 )

Because your /dev/sdb does not have mounted filesystems  
in your case a simple

    EXCLUDE_COMPONENTS+=( /dev/sdb )

should help to exclude your /dev/sdb from the very beginning.

#### <img src="https://avatars.githubusercontent.com/u/203995699?v=4" width="50">[u4ea75](https://github.com/u4ea75) commented at [2025-04-18 07:40](https://github.com/rear/rear/issues/3433#issuecomment-2814837659):

U R the best! It worked! I will try a restore on different hardware
asap, to test, thank so much!

#### <img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50">[jsmeix](https://github.com/jsmeix) commented at [2025-04-23 07:35](https://github.com/rear/rear/issues/3433#issuecomment-2823342182):

@u4ea75

I need you to test again if my  
<https://github.com/rear/rear/pull/3455>  
actually works in your case  
because I found a regression  
<https://github.com/rear/rear/pull/3455#issuecomment-2812436548>  
so I had to completely change the implementation, see  
<https://github.com/rear/rear/pull/3455#issuecomment-2821188937>  
and see  
<https://github.com/rear/rear/pull/3455#issuecomment-2821485204>  
why I cannot test your case on my own.

To test my current  
<https://github.com/rear/rear/pull/3455>  
do the same as I wrote above in  
<https://github.com/rear/rear/issues/3433#issuecomment-2812148919>

    git clone https://github.com/rear/rear.git

    mv rear rear.github.master

    cd rear.github.master

    git checkout -b jsmeix-disk-EXCLUDE_COMPONENTS remotes/origin/jsmeix-disk-EXCLUDE_COMPONENTS

    vi etc/rear/local.conf

    usr/sbin/rear -D mkbackup

When you run "usr/sbin/rear -D mkbackup"  
you should see the same message as in your initial comment  
<https://github.com/rear/rear/issues/3433#issue-2931493278>

    Unsupported partition table 'unknown' on /dev/sdb (must be one of 'msdos' 'gpt' 'gpt_sync_mbr' 'dasd')

but now this is only a debug message to have you informed  
and "rear mkbackup" will no longer error out  
when you have `EXCLUDE_COMPONENTS+=( /dev/sdb )` specified  
instead "rear mkbackup" should finish successfully.

During "rear -D mkbackup" you should additionally see  
debug messages like

    Excluding component /dev/sdb in EXCLUDE_COMPONENTS
    Marking component '/dev/sdb' as done in ...disktodo.conf
    Automatically excluding disk /dev/sdb (not used by any mounted filesystem)
    Component '/dev/sdb' is marked as 'done /dev/sdb' in ...disktodo.conf
    Disabling excluded components in ...disklayout.conf
    Disabling component 'disk /dev/sdb' in ...disklayout.conf

which show how '/dev/sdb' gets  
marked as 'done' in var/lib/rear/layout/disktodo.conf  
and commented out in var/lib/rear/layout/disklayout.conf  
cf. how it looked for me during my my test in  
<https://github.com/rear/rear/pull/3455#issuecomment-2821459892>

See also my description how that is meant to work  
in usr/share/rear/conf/default.conf

    # Because EXCLUDE_COMPONENTS excludes any component from the recovery
    # it can be used in exceptional cases to exclude unwanted whole disks.
    # For example EXCLUDE_COMPONENTS+=( /dev/sdX ) excludes the disk /dev/sdX
    # and via the dependency tracker usually also partitions and filesystems on it
    # provided the diks behaves normally (i.e. the disk and things on it can be recognized properly).
    # To exclude an unneeded problematic disk when the disk or things on it cannot be recognized properly
    # EXCLUDE_COMPONENTS+=( /dev/sdX ) may work to exclude the disk with its partitions and filesystems.
    # To exclude a problematic disk with higher level storage objects on it
    # its matching components may have to be specified separately for example like
    # EXCLUDE_COMPONENTS+=( /dev/sdX fs:/mountpoint pv:/dev/sdXN ) or similar as needed.
    # Verify that all what belongs to /dev/sdX is marked as 'done' in /var/lib/rear/layout/disktodo.conf
    # and that all what belongs to /dev/sdX is commented out in /var/lib/rear/layout/disklayout.conf
    # to ensure there is no recovery information left as 'todo' or not commented out
    # for a disk which should be excluded from the recovery.

#### <img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50">[jsmeix](https://github.com/jsmeix) commented at [2025-04-23 11:39](https://github.com/rear/rear/issues/3433#issuecomment-2824000222):

According to my test in  
<https://github.com/rear/rear/pull/3455#issuecomment-2823978059>  
everything "just works" for me:

With plain `EXCLUDE_COMPONENTS+=( /dev/sdX )`  
a problematic disk which is not properly recognized by 'parted'  
gets excluded plus automatically the partitions on it  
and even also automatically its mounted filesystems.

#### <img src="https://avatars.githubusercontent.com/u/203995699?v=4" width="50">[u4ea75](https://github.com/u4ea75) commented at [2025-04-24 08:37](https://github.com/rear/rear/issues/3433#issuecomment-2826810467):

I've backupped my server with <https://github.com/rear/rear/pull/3455>
one week ago and then restored without problems on different hardware,
next week I will make again a test according to your request, right?

#### <img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50">[jsmeix](https://github.com/jsmeix) commented at [2025-04-24 09:03](https://github.com/rear/rear/issues/3433#issuecomment-2826895348):

@u4ea75  
I would much appreciate it when you test it next week  
on your hardware because it makes a big difference  
when something was not only tested on my test VM  
but when it actually works "out there in the wild"  
for a ReaR user with real hardware.

#### <img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50">[jsmeix](https://github.com/jsmeix) commented at [2025-04-25 11:36](https://github.com/rear/rear/issues/3433#issuecomment-2830174354):

With <https://github.com/rear/rear/pull/3455> merged  
it should now work in current ReaR GitHub master code  
to avoid this issue here with something like

    EXCLUDE_COMPONENTS+=( /dev/sdX )

in etc/rear/local.conf - see the enhanced EXCLUDE\_COMPONENTS  
description in usr/share/rear/conf/default.conf

#### <img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50">[jsmeix](https://github.com/jsmeix) commented at [2025-04-25 11:47](https://github.com/rear/rear/issues/3433#issuecomment-2830201393):

@u4ea75  
because <https://github.com/rear/rear/pull/3455>  
is now merged into current ReaR GitHub master code  
my jsmeix-disk-EXCLUDE\_COMPONENTS branch does no longer exist  
so when you test it next week on your hardware  
you need to use the current ReaR GitHub master code  
as described in  
"Testing current ReaR upstream GitHub master code" in  
<https://en.opensuse.org/SDB:Disaster_Recovery>

    git clone https://github.com/rear/rear.git

    mv rear rear.github.master

    cd rear.github.master

    vi etc/rear/local.conf

    usr/sbin/rear -D mkbackup

(i.e. without 'git checkout ... jsmeix-disk-EXCLUDE\_COMPONENTS')

#### <img src="https://avatars.githubusercontent.com/u/203995699?v=4" width="50">[u4ea75](https://github.com/u4ea75) commented at [2025-05-06 12:21](https://github.com/rear/rear/issues/3433#issuecomment-2854375006):

I Johannes, sorry but I have been out of office for a while, I will make
a test asap, sorry

***@***.\*\*\*

Marco Scurati • Support & Sales

E. ***@***.******@***.***&gt; |
[www.connactionitalia.com](http://www.connactionitalia.com)<http://www.connactionitalia.com/>
| \[signature\_2134779648\]
<https://www.linkedin.com/company/connactionitalia/>

connAction Italia srl  
Via Giovanni da Udine 34, 20156 Milano  
T. +39 02 38093451 | F +39 02 38093435 | E. ***@***.******@***.***&gt;  
Cap. Soc. € 10.000 i.v. | Registro Imprese di Milano – REA MI-2577083 |
P. IVA 11067340965

Da: Johannes Meixner ***@***.***&gt;  
Inviato: venerdì 25 aprile 2025 13:49  
A: rear/rear ***@***.***&gt;  
Cc: Marco Scurati ***@***.***&gt;; Mention ***@***.***&gt;  
Oggetto: Re: \[rear/rear\] Cannot do backup: "Unsupported partition
table 'unknown' on /dev/sdb" (Issue \#3433)

Reopened \#3433<https://github.com/rear/rear/issues/3433>.

—  
Reply to this email directly, view it on
GitHub<https://github.com/rear/rear/issues/3433#event-17405218420>, or
unsubscribe<https://github.com/notifications/unsubscribe-auth/BQULUM63INL57MTRABJMW2L23IOJDAVCNFSM6AAAAABZKTPCGCVHI2DSMVQWIX3LMV45UABCJFZXG5LFIV3GK3TUJZXXI2LGNFRWC5DJN5XDWMJXGQYDKMRRHA2DEMA>.  
You are receiving this because you were mentioned.Message ID:
***@***.******@***.***&gt;&gt;

#### <img src="https://avatars.githubusercontent.com/in/15368?v=4" width="50">[github-actions](https://github.com/apps/github-actions) commented at [2025-07-06 03:14](https://github.com/rear/rear/issues/3433#issuecomment-3040651793):

Stale issue message

------------------------------------------------------------------------

\[Export of Github issue for
[rear/rear](https://github.com/rear/rear).\]
