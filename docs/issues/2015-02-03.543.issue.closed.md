[\#543 Issue](https://github.com/rear/rear/issues/543) `closed`: issue rear recovery with emc networker
=======================================================================================================

**Labels**: `support / question`

#### <img src="https://avatars.githubusercontent.com/u/10756657?v=4" width="50">[yunsr](https://github.com/yunsr) opened issue at [2015-02-03 11:04](https://github.com/rear/rear/issues/543):

take an OS (SLES 11 sp3 ) backup/recovery with rear/NSR (8.1). there are
several san disks.  
in local.conf added option:

    OUTPUT=ISO
    BACKUP=NSR
    ONLY_INCLUDE_VG=( "system" )  <- local VG

(same manipulation with backup on nfs share work fine - restored OS
successfully)

    rear -v mkrescue >
    Relax-and-Recover 1.16.1 / Git
    Using log file: /var/log/rear/rear-linux-g7.log
    Creating disk layout
    Excluding Volume Group sap3
    Excluding Volume Group sap2
    Excluding Volume Group sap1
    Creating root filesystem layout
    EMC Networker will recover these filesystems: /sbin /dev /lib64 /boot /usr /mnt /media /root /lib /nsr /selinux /srv /lost+found /tmp /var /opt /bin /etc /home
    TIP: To login as root via ssh you need to set up /root/.ssh/authorized_keys or SSH_ROOT_PASSWORD in your configuration file
    Copying files and directories
    Copying binaries and libraries
    Copying kernel modules
    Creating initramfs
    Making ISO image
    Wrote ISO image: /var/lib/rear/output/rear-linux-g7.iso (111M)
    Saving result files with NSR (EMC NetWorker)
    If the RETENTION_TIME="Month" is too low please add RETENTION_TIME variable in /etc/rear/local.conf
     pool           retent  name
    ============================
    Default         03/03/15 /var/lib/rear/output/rear-linux-g7.iso

When trying to recover there is issue:

    cat rear-linux-g7.log
    2015-02-03 12:21:26 Relax-and-Recover 1.16.1 / Git
    2015-02-03 12:21:26 Command line options: /bin/rear -v recover
    2015-02-03 12:21:26 Using log file: /var/log/rear/rear-linux-g7.log
    2015-02-03 12:21:26 Including /etc/rear/os.conf
    2015-02-03 12:21:26 Including conf/Linux-i386.conf
    2015-02-03 12:21:26 Including conf/GNU/Linux.conf
    2015-02-03 12:21:26 Including conf/SUSE_LINUX.conf
    2015-02-03 12:21:26 Including /etc/rear/local.conf
    2015-02-03 12:21:26 Including /etc/rear/rescue.conf
    2015-02-03 12:21:26 Using build area '/tmp/rear.jUBZxqgQdcamUJV'
    mkdir: created directory `/tmp/rear.jUBZxqgQdcamUJV/rootfs'
    mkdir: created directory `/tmp/rear.jUBZxqgQdcamUJV/tmp'
    2015-02-03 12:21:26 Running recover workflow
    2015-02-03 12:21:26 Running 'setup' stage
    2015-02-03 12:21:26 Including setup/default/01_pre_recovery_script.sh
    2015-02-03 12:21:26 Finished running 'setup' stage in 0 seconds
    2015-02-03 12:21:26 Running 'verify' stage
    2015-02-03 12:21:26 Including verify/default/02_cciss_scsi_engage.sh
    2015-02-03 12:21:26 Including verify/default/02_translate_url.sh
    2015-02-03 12:21:26 Including verify/default/03_translate_tape.sh
    2015-02-03 12:21:26 Including verify/default/04_validate_variables.sh
    2015-02-03 12:21:26 Including verify/GNU/Linux/05_sane_recovery_check.sh
    2015-02-03 12:21:26 Including verify/GNU/Linux/23_storage_and_network_modules.sh
    find: `/lib/modules/3.0.76-0.11-default/kernel/drivers/xen': No such file or directory
    find: `/lib/modules/3.0.76-0.11-default/extra': No such file or directory
    find: `/lib/modules/3.0.76-0.11-default/weak-updates': No such file or directory
    2015-02-03 12:21:26 Including verify/GNU/Linux/26_recovery_storage_drivers.sh
    find: `/tmp/rear.jUBZxqgQdcamUJV/tmp/dev': No such file or directory
    --- /var/lib/rear/recovery/storage_drivers      2015-02-03 11:52:24.000000000 +0200
    +++ /tmp/rear.jUBZxqgQdcamUJV/tmp/storage_drivers       2015-02-03 12:21:26.292158786 +0200
    @@ -2,13 +2,7 @@
     hpsa
     iscsi_boot_sysfs
     libiscsi
    -linear
     qla2xxx
    -scsi_dh
    -scsi_dh_alua
    -scsi_dh_emc
    -scsi_dh_hp_sw
    -scsi_dh_rdac
     scsi_mod
     scsi_tgt
     scsi_transport_fc
    2015-02-03 12:21:26 NOTICE: Will do driver migration
    2015-02-03 12:21:26 Including verify/NSR/default/40_verify_nsr.sh
    2015-02-03 12:21:26 Skipping ping test
    2015-02-03 12:21:26 EMC NetWorker server NSRSERVER=nw-win
    2015-02-03 12:21:26 Including verify/NSR/default/41_verify_nsr_paths.sh
    2015-02-03 12:21:26 We will recover the following file systems from EMC NetWorker: /sbin /dev /lib64 /boot /usr /mnt /media /root /lib /nsr /selinux /srv /lost+found /tmp /var /opt /bin /etc /home
    2015-02-03 12:21:26 Finished running 'verify' stage in 0 seconds
    2015-02-03 12:21:26 Running 'layout/prepare' stage
    2015-02-03 12:21:26 Including layout/prepare/default/01_prepare_files.sh
    2015-02-03 12:21:26 Including layout/prepare/GNU/Linux/10_include_partition_code.sh
    2015-02-03 12:21:26 Including layout/prepare/GNU/Linux/11_include_lvm_code.sh
    2015-02-03 12:21:26 Including layout/prepare/GNU/Linux/12_include_raid_code.sh
    2015-02-03 12:21:26 Including layout/prepare/GNU/Linux/13_include_filesystem_code.sh
    2015-02-03 12:21:26 Including layout/prepare/GNU/Linux/14_include_swap_code.sh
    2015-02-03 12:21:26 Including layout/prepare/GNU/Linux/15_include_drbd_code.sh
    2015-02-03 12:21:26 Including layout/prepare/GNU/Linux/16_include_luks_code.sh
    2015-02-03 12:21:26 Including layout/prepare/GNU/Linux/17_include_hpraid_code.sh
    2015-02-03 12:21:26 Including layout/prepare/default/20_recreate_hpraid.sh
    2015-02-03 12:21:26 Including layout/prepare/GNU/Linux/21_load_multipath.sh
    2015-02-03 12:21:26 Including layout/prepare/default/25_compare_disks.sh
    2015-02-03 12:21:26 Comparing disks.
    2015-02-03 12:21:26 Looking for sda...
    2015-02-03 12:21:26 Device sda exists.
    2015-02-03 12:21:26 Size of device sda matches.
    2015-02-03 12:21:26 Disk configuration is identical, proceeding with restore.
    2015-02-03 12:21:26 Including layout/prepare/default/30_map_disks.sh
    2015-02-03 12:21:26 Including layout/prepare/default/31_remove_exclusions.sh
    2015-02-03 12:21:26 Including layout/prepare/default/32_apply_mappings.sh
    2015-02-03 12:21:26 Including layout/prepare/default/40_autoresize_disks.sh
    2015-02-03 12:21:26 Including layout/prepare/default/50_confirm_layout.sh
    2015-02-03 12:21:26 Including layout/prepare/default/51_list_dependencies.sh
    2015-02-03 12:21:26 Including layout/prepare/default/52_exclude_components.sh
    2015-02-03 12:21:26 Including layout/prepare/default/54_generate_device_code.sh
    2015-02-03 12:21:26 Including layout/prepare/default/55_finalize_script.sh
    2015-02-03 12:21:26 Including layout/prepare/default/60_show_unprocessed.sh
    2015-02-03 12:21:26 Including layout/prepare/default/61_exclude_from_restore.sh
    2015-02-03 12:21:26 Finished running 'layout/prepare' stage in 0 seconds
    2015-02-03 12:21:26 Running 'layout/recreate' stage
    2015-02-03 12:21:26 Including layout/recreate/default/10_ask_confirmation.sh
    2015-02-03 12:21:26 Including layout/recreate/default/20_run_script.sh
    2015-02-03 12:21:26 Start system layout restoration.
    +++ create_component /dev/sda disk
    +++ local device=/dev/sda
    +++ local type=disk
    +++ local touchfile=disk--dev-sda
    +++ '[' -e /tmp/rear.jUBZxqgQdcamUJV/tmp/touch/disk--dev-sda ']'
    +++ return 0
    +++ Log 'Erasing MBR of disk /dev/sda'
    +++ test 1 -gt 0
    ++++ Stamp
    ++++ date '+%Y-%m-%d %H:%M:%S '
    +++ echo '2015-02-03 12:21:26 Erasing MBR of disk /dev/sda'
    2015-02-03 12:21:26 Erasing MBR of disk /dev/sda
    +++ dd if=/dev/zero of=/dev/sda bs=512 count=1
    1+0 records in
    1+0 records out
    512 bytes (512 B) copied, 0.00019688 s, 2.6 MB/s
    +++ sync
    +++ LogPrint 'Creating partitions for disk /dev/sda (msdos)'
    +++ Log 'Creating partitions for disk /dev/sda (msdos)'
    +++ test 1 -gt 0
    ++++ Stamp
    ++++ date '+%Y-%m-%d %H:%M:%S '
    +++ echo '2015-02-03 12:21:26 Creating partitions for disk /dev/sda (msdos)'
    2015-02-03 12:21:26 Creating partitions for disk /dev/sda (msdos)
    +++ Print 'Creating partitions for disk /dev/sda (msdos)'
    +++ test 1
    +++ echo -e 'Creating partitions for disk /dev/sda (msdos)'
    +++ parted -s /dev/sda mklabel msdos
    +++ sleep 1
    +++ parted -s /dev/sda mkpart '"primary"' 262144B 164626431B
    +++ sleep 1
    +++ parted -s /dev/sda set 1 boot on
    +++ parted -s /dev/sda mkpart '"primary"' 164626432B 146778619903B
    +++ sleep 1
    +++ parted -s /dev/sda set 2 lvm on
    +++ partprobe -s /dev/sda
    /dev/sda: msdos partitions 1 2
    +++ sleep 10
    +++ my_udevtrigger
    +++ has_binary udevadm
    +++ for bin in '$@'
    +++ type udevadm
    +++ return 0
    +++ udevadm trigger
    +++ my_udevsettle
    +++ has_binary udevadm
    +++ for bin in '$@'
    +++ type udevadm
    +++ return 0
    +++ udevadm settle
    +++ component_created /dev/sda disk
    +++ local device=/dev/sda
    +++ local type=disk
    +++ local touchfile=disk--dev-sda
    +++ touch /tmp/rear.jUBZxqgQdcamUJV/tmp/touch/disk--dev-sda
    +++ create_component /dev/sda1 part
    +++ local device=/dev/sda1
    +++ local type=part
    +++ local touchfile=part--dev-sda1
    +++ '[' -e /tmp/rear.jUBZxqgQdcamUJV/tmp/touch/part--dev-sda1 ']'
    +++ return 0
    +++ component_created /dev/sda1 part
    +++ local device=/dev/sda1
    +++ local type=part
    +++ local touchfile=part--dev-sda1
    +++ touch /tmp/rear.jUBZxqgQdcamUJV/tmp/touch/part--dev-sda1
    +++ create_component /dev/sda2 part
    +++ local device=/dev/sda2
    +++ local type=part
    +++ local touchfile=part--dev-sda2
    +++ '[' -e /tmp/rear.jUBZxqgQdcamUJV/tmp/touch/part--dev-sda2 ']'
    +++ return 0
    +++ component_created /dev/sda2 part
    +++ local device=/dev/sda2
    +++ local type=part
    +++ local touchfile=part--dev-sda2
    +++ touch /tmp/rear.jUBZxqgQdcamUJV/tmp/touch/part--dev-sda2
    +++ create_component pv:/dev/sda2 lvmdev
    +++ local device=pv:/dev/sda2
    +++ local type=lvmdev
    +++ local touchfile=lvmdev-pv:-dev-sda2
    +++ '[' -e /tmp/rear.jUBZxqgQdcamUJV/tmp/touch/lvmdev-pv:-dev-sda2 ']'
    +++ return 0
    +++ LogPrint 'Creating LVM PV /dev/sda2'
    +++ Log 'Creating LVM PV /dev/sda2'
    +++ test 1 -gt 0
    ++++ Stamp
    ++++ date '+%Y-%m-%d %H:%M:%S '
    +++ echo '2015-02-03 12:21:40 Creating LVM PV /dev/sda2'
    2015-02-03 12:21:40 Creating LVM PV /dev/sda2
    +++ Print 'Creating LVM PV /dev/sda2'
    +++ test 1
    +++ echo -e 'Creating LVM PV /dev/sda2'
    +++ lvm vgchange -a n system
    +++ lvm pvcreate -ff --yes -v --uuid Y2WjZn-cTVf-qABG-1I3N-poxg-OBE2-xecIcu --restorefile /var/lib/rear/layout/lvm/system.cfg /dev/sda2
        connect() failed on local socket: No such file or directory
        Internal cluster locking initialisation failed.
        WARNING: Falling back to local file-based locking.
        Volume Groups with the clustered attribute will be inaccessible.
      WARNING: Forcing physical volume creation on /dev/sda2 of volume group "system"
        Set up physical volume for "/dev/sda2" with 286355456 available sectors
        Writing physical volume data to disk "/dev/sda2"
      Incorrect metadata area header checksum on /dev/sda2 at offset 4096
        Wiping cache of LVM-capable devices
      Incorrect metadata area header checksum on /dev/sda2 at offset 4096
      get_pv_from_vg_by_id: vg_read_internal failed to read VG system
      Physical volume "/dev/sda2" successfully created
    +++ component_created pv:/dev/sda2 lvmdev
    +++ local device=pv:/dev/sda2
    +++ local type=lvmdev
    +++ local touchfile=lvmdev-pv:-dev-sda2
    +++ touch /tmp/rear.jUBZxqgQdcamUJV/tmp/touch/lvmdev-pv:-dev-sda2
    +++ create_component /dev/system lvmgrp
    +++ local device=/dev/system
    +++ local type=lvmgrp
    +++ local touchfile=lvmgrp--dev-system
    +++ '[' -e /tmp/rear.jUBZxqgQdcamUJV/tmp/touch/lvmgrp--dev-system ']'
    +++ return 0
    +++ LogPrint 'Restoring LVM VG system'
    +++ Log 'Restoring LVM VG system'
    +++ test 1 -gt 0
    ++++ Stamp
    ++++ date '+%Y-%m-%d %H:%M:%S '
    +++ echo '2015-02-03 12:21:40 Restoring LVM VG system'
    2015-02-03 12:21:40 Restoring LVM VG system
    +++ Print 'Restoring LVM VG system'
    +++ test 1
    +++ echo -e 'Restoring LVM VG system'
    +++ '[' -e /dev/system ']'
    +++ rm -rf /dev/system
    +++ lvm vgcfgrestore -f /var/lib/rear/layout/lvm/system.cfg system
      Restored volume group system
    +++ lvm vgchange --available y system
      3 logical volume(s) in volume group "system" now active
    +++ component_created /dev/system lvmgrp
    +++ local device=/dev/system
    +++ local type=lvmgrp
    +++ local touchfile=lvmgrp--dev-system
    +++ touch /tmp/rear.jUBZxqgQdcamUJV/tmp/touch/lvmgrp--dev-system
    +++ create_component /dev/mapper/system-home lvmvol
    +++ local device=/dev/mapper/system-home
    +++ local type=lvmvol
    +++ local touchfile=lvmvol--dev-mapper-system-home
    +++ '[' -e /tmp/rear.jUBZxqgQdcamUJV/tmp/touch/lvmvol--dev-mapper-system-home ']'
    +++ return 0
    +++ component_created /dev/mapper/system-home lvmvol
    +++ local device=/dev/mapper/system-home
    +++ local type=lvmvol
    +++ local touchfile=lvmvol--dev-mapper-system-home
    +++ touch /tmp/rear.jUBZxqgQdcamUJV/tmp/touch/lvmvol--dev-mapper-system-home
    +++ create_component /dev/mapper/system-root lvmvol
    +++ local device=/dev/mapper/system-root
    +++ local type=lvmvol
    +++ local touchfile=lvmvol--dev-mapper-system-root
    +++ '[' -e /tmp/rear.jUBZxqgQdcamUJV/tmp/touch/lvmvol--dev-mapper-system-root ']'
    +++ return 0
    +++ component_created /dev/mapper/system-root lvmvol
    +++ local device=/dev/mapper/system-root
    +++ local type=lvmvol
    +++ local touchfile=lvmvol--dev-mapper-system-root
    +++ touch /tmp/rear.jUBZxqgQdcamUJV/tmp/touch/lvmvol--dev-mapper-system-root
    +++ create_component /dev/mapper/system-swap lvmvol
    +++ local device=/dev/mapper/system-swap
    +++ local type=lvmvol
    +++ local touchfile=lvmvol--dev-mapper-system-swap
    +++ '[' -e /tmp/rear.jUBZxqgQdcamUJV/tmp/touch/lvmvol--dev-mapper-system-swap ']'
    +++ return 0
    +++ component_created /dev/mapper/system-swap lvmvol
    +++ local device=/dev/mapper/system-swap
    +++ local type=lvmvol
    +++ local touchfile=lvmvol--dev-mapper-system-swap
    +++ touch /tmp/rear.jUBZxqgQdcamUJV/tmp/touch/lvmvol--dev-mapper-system-swap
    +++ create_component fs:/ fs
    +++ local device=fs:/
    +++ local type=fs
    +++ local touchfile=fs-fs:-
    +++ '[' -e /tmp/rear.jUBZxqgQdcamUJV/tmp/touch/fs-fs:- ']'
    +++ return 0
    +++ LogPrint 'Creating ext3-filesystem / on /dev/mapper/system-root'
    +++ Log 'Creating ext3-filesystem / on /dev/mapper/system-root'
    +++ test 1 -gt 0
    ++++ Stamp
    ++++ date '+%Y-%m-%d %H:%M:%S '
    +++ echo '2015-02-03 12:21:40 Creating ext3-filesystem / on /dev/mapper/system-root'
    2015-02-03 12:21:40 Creating ext3-filesystem / on /dev/mapper/system-root
    +++ Print 'Creating ext3-filesystem / on /dev/mapper/system-root'
    +++ test 1
    +++ echo -e 'Creating ext3-filesystem / on /dev/mapper/system-root'
    +++ mkfs -t ext3 -b 4096 -i 16384 /dev/mapper/system-root
    mke2fs 1.41.9 (22-Aug-2009)
    Filesystem label=
    OS type: Linux
    Block size=4096 (log=2)
    Fragment size=4096 (log=2)
    655360 inodes, 2621440 blocks
    131072 blocks (5.00%) reserved for the super user
    First data block=0
    Maximum filesystem blocks=2684354560
    80 block groups
    32768 blocks per group, 32768 fragments per group
    8192 inodes per group
    Superblock backups stored on blocks:
            32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632

    Writing inode tables: done
    Creating journal (32768 blocks): done
    Writing superblocks and filesystem accounting information: done

    This filesystem will be automatically checked every 35 mounts or
    180 days, whichever comes first.  Use tune2fs -c or -i to override.
    +++ tune2fs -U de14e46c-48fe-4786-b3d6-af712e671dda /dev/mapper/system-root
    tune2fs 1.41.9 (22-Aug-2009)
    +++ tune2fs -m 5 -c -1 -i 0d /dev/mapper/system-root
    tune2fs 1.41.9 (22-Aug-2009)
    Setting maximal mount count to -1
    Setting interval between checks to 0 seconds
    Setting reserved blocks percentage to 5% (131072 blocks)
    +++ LogPrint 'Mounting filesystem /'
    +++ Log 'Mounting filesystem /'
    +++ test 1 -gt 0
    ++++ Stamp
    ++++ date '+%Y-%m-%d %H:%M:%S '
    +++ echo '2015-02-03 12:21:41 Mounting filesystem /'
    2015-02-03 12:21:41 Mounting filesystem /
    +++ Print 'Mounting filesystem /'
    +++ test 1
    +++ echo -e 'Mounting filesystem /'
    +++ mkdir -p /mnt/local/
    +++ mount -o rw,acl,user_xattr /dev/mapper/system-root /mnt/local/
    +++ component_created fs:/ fs
    +++ local device=fs:/
    +++ local type=fs
    +++ local touchfile=fs-fs:-
    +++ touch /tmp/rear.jUBZxqgQdcamUJV/tmp/touch/fs-fs:-
    +++ create_component fs:/boot fs
    +++ local device=fs:/boot
    +++ local type=fs
    +++ local touchfile=fs-fs:-boot
    +++ '[' -e /tmp/rear.jUBZxqgQdcamUJV/tmp/touch/fs-fs:-boot ']'
    +++ return 0
    +++ LogPrint 'Creating ext3-filesystem /boot on /dev/sda1'
    +++ Log 'Creating ext3-filesystem /boot on /dev/sda1'
    +++ test 1 -gt 0
    ++++ Stamp
    ++++ date '+%Y-%m-%d %H:%M:%S '
    +++ echo '2015-02-03 12:21:42 Creating ext3-filesystem /boot on /dev/sda1'
    2015-02-03 12:21:42 Creating ext3-filesystem /boot on /dev/sda1
    +++ Print 'Creating ext3-filesystem /boot on /dev/sda1'
    +++ test 1
    +++ echo -e 'Creating ext3-filesystem /boot on /dev/sda1'
    +++ mkfs -t ext3 -b 1024 -i 4092 /dev/sda1
    mke2fs 1.41.9 (22-Aug-2009)
    Filesystem label=
    OS type: Linux
    Block size=1024 (log=0)
    Fragment size=1024 (log=0)
    40320 inodes, 160512 blocks
    8025 blocks (5.00%) reserved for the super user
    First data block=1
    Maximum filesystem blocks=67371008
    20 block groups
    8192 blocks per group, 8192 fragments per group
    2016 inodes per group
    Superblock backups stored on blocks:
            8193, 24577, 40961, 57345, 73729

    Writing inode tables: done
    Creating journal (4096 blocks): done
    Writing superblocks and filesystem accounting information: done

    This filesystem will be automatically checked every 37 mounts or
    180 days, whichever comes first.  Use tune2fs -c or -i to override.
    +++ tune2fs -U 5931eb89-3fab-4c2a-840e-98ec7870888d /dev/sda1
    tune2fs 1.41.9 (22-Aug-2009)
    +++ tune2fs -m 4 -c -1 -i 0d /dev/sda1
    tune2fs 1.41.9 (22-Aug-2009)
    Setting maximal mount count to -1
    Setting interval between checks to 0 seconds
    Setting reserved blocks percentage to 4% (6420 blocks)
    +++ LogPrint 'Mounting filesystem /boot'
    +++ Log 'Mounting filesystem /boot'
    +++ test 1 -gt 0
    ++++ Stamp
    ++++ date '+%Y-%m-%d %H:%M:%S '
    +++ echo '2015-02-03 12:21:43 Mounting filesystem /boot'
    2015-02-03 12:21:43 Mounting filesystem /boot
    +++ Print 'Mounting filesystem /boot'
    +++ test 1
    +++ echo -e 'Mounting filesystem /boot'
    +++ mkdir -p /mnt/local/boot
    +++ mount -o rw,acl,user_xattr /dev/sda1 /mnt/local/boot
    +++ component_created fs:/boot fs
    +++ local device=fs:/boot
    +++ local type=fs
    +++ local touchfile=fs-fs:-boot
    +++ touch /tmp/rear.jUBZxqgQdcamUJV/tmp/touch/fs-fs:-boot
    +++ create_component fs:/home fs
    +++ local device=fs:/home
    +++ local type=fs
    +++ local touchfile=fs-fs:-home
    +++ '[' -e /tmp/rear.jUBZxqgQdcamUJV/tmp/touch/fs-fs:-home ']'
    +++ return 0
    +++ LogPrint 'Creating ext3-filesystem /home on /dev/mapper/system-home'
    +++ Log 'Creating ext3-filesystem /home on /dev/mapper/system-home'
    +++ test 1 -gt 0
    ++++ Stamp
    ++++ date '+%Y-%m-%d %H:%M:%S '
    +++ echo '2015-02-03 12:21:43 Creating ext3-filesystem /home on /dev/mapper/system-home'
    2015-02-03 12:21:43 Creating ext3-filesystem /home on /dev/mapper/system-home
    +++ Print 'Creating ext3-filesystem /home on /dev/mapper/system-home'
    +++ test 1
    +++ echo -e 'Creating ext3-filesystem /home on /dev/mapper/system-home'
    +++ mkfs -t ext3 -b 4096 -i 16384 /dev/mapper/system-home
    mke2fs 1.41.9 (22-Aug-2009)
    Filesystem label=
    OS type: Linux
    Block size=4096 (log=2)
    Fragment size=4096 (log=2)
    1638400 inodes, 6553600 blocks
    327680 blocks (5.00%) reserved for the super user
    First data block=0
    Maximum filesystem blocks=4294967296
    200 block groups
    32768 blocks per group, 32768 fragments per group
    8192 inodes per group
    Superblock backups stored on blocks:
            32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208,
            4096000

    Writing inode tables: done
    Creating journal (32768 blocks): done
    Writing superblocks and filesystem accounting information: done

    This filesystem will be automatically checked every 39 mounts or
    180 days, whichever comes first.  Use tune2fs -c or -i to override.
    +++ tune2fs -U cf31e45b-1dff-411b-a5a1-a6613867832a /dev/mapper/system-home
    tune2fs 1.41.9 (22-Aug-2009)
    +++ tune2fs -m 4 -c -1 -i 0d /dev/mapper/system-home
    tune2fs 1.41.9 (22-Aug-2009)
    Setting maximal mount count to -1
    Setting interval between checks to 0 seconds
    Setting reserved blocks percentage to 4% (262144 blocks)
    +++ LogPrint 'Mounting filesystem /home'
    +++ Log 'Mounting filesystem /home'
    +++ test 1 -gt 0
    ++++ Stamp
    ++++ date '+%Y-%m-%d %H:%M:%S '
    +++ echo '2015-02-03 12:21:45 Mounting filesystem /home'
    2015-02-03 12:21:45 Mounting filesystem /home
    +++ Print 'Mounting filesystem /home'
    +++ test 1
    +++ echo -e 'Mounting filesystem /home'
    +++ mkdir -p /mnt/local/home
    +++ mount -o rw,acl,user_xattr /dev/mapper/system-home /mnt/local/home
    +++ component_created fs:/home fs
    +++ local device=fs:/home
    +++ local type=fs
    +++ local touchfile=fs-fs:-home
    +++ touch /tmp/rear.jUBZxqgQdcamUJV/tmp/touch/fs-fs:-home
    +++ create_component swap:/dev/mapper/system-swap swap
    +++ local device=swap:/dev/mapper/system-swap
    +++ local type=swap
    +++ local touchfile=swap-swap:-dev-mapper-system-swap
    +++ '[' -e /tmp/rear.jUBZxqgQdcamUJV/tmp/touch/swap-swap:-dev-mapper-system-swap ']'
    +++ return 0
    +++ LogPrint 'Creating swap on /dev/mapper/system-swap'
    +++ Log 'Creating swap on /dev/mapper/system-swap'
    +++ test 1 -gt 0
    ++++ Stamp
    ++++ date '+%Y-%m-%d %H:%M:%S '
    +++ echo '2015-02-03 12:21:46 Creating swap on /dev/mapper/system-swap'
    2015-02-03 12:21:46 Creating swap on /dev/mapper/system-swap
    +++ Print 'Creating swap on /dev/mapper/system-swap'
    +++ test 1
    +++ echo -e 'Creating swap on /dev/mapper/system-swap'
    +++ mkswap -U 2de6d07a-a744-4129-b766-fc69c3f3aa12 /dev/mapper/system-swap
    mkswap: /dev/mapper/system-swap: warning: don't erase bootbits sectors
            on whole disk. Use -f to force.
    Setting up swapspace version 1, size = 2097148 KiB
    no label, UUID=2de6d07a-a744-4129-b766-fc69c3f3aa12
    +++ component_created swap:/dev/mapper/system-swap swap
    +++ local device=swap:/dev/mapper/system-swap
    +++ local type=swap
    +++ local touchfile=swap-swap:-dev-mapper-system-swap
    +++ touch /tmp/rear.jUBZxqgQdcamUJV/tmp/touch/swap-swap:-dev-mapper-system-swap
    +++ set +x
    2015-02-03 12:21:46 Disk layout created.
    2015-02-03 12:21:46 Including layout/recreate/default/25_verify_mount.sh
    2015-02-03 12:21:46 Finished running 'layout/recreate' stage in 20 seconds
    2015-02-03 12:21:46 Running 'restore' stage
    2015-02-03 12:21:46 Including restore/NSR/default/40_restore_with_nsr.sh
    2015-02-03 12:21:46 Starting nsrwatch on console 8
    2015-02-03 12:21:46 Restore filesystem /sbin /dev /lib64 /boot /usr /mnt /media /root /lib /nsr /selinux /srv /lost+found /tmp /var /opt /bin /etc /home  with recover
    2015-02-03 12:25:21 Including restore/default/90_create_missing_directories.sh
    2015-02-03 12:25:21 Including restore/SUSE_LINUX/91_create_missing_directories.sh
    2015-02-03 12:25:21 Finished running 'restore' stage in 215 seconds
    2015-02-03 12:25:21 Running 'finalize' stage
    2015-02-03 12:25:21 Including finalize/default/01_prepare_checks.sh
    2015-02-03 12:25:21 Including finalize/default/10_populate_dev.sh
    2015-02-03 12:25:21 Including finalize/GNU/Linux/15_migrate_disk_devices_layout.sh
    2015-02-03 12:25:21 Including finalize/GNU/Linux/15_migrate_uuid_tags.sh
    2015-02-03 12:25:21 Including finalize/GNU/Linux/16_rename_diskbyid.sh
    device node not found
    device node not found
    device node not found
    device node not found
    device node not found
    device node not found
    device node not found
    2015-02-03 12:25:21 Including finalize/SUSE_LINUX/i386/17_rebuild_initramfs.sh
    /usr/share/rear/finalize/SUSE_LINUX/i386/17_rebuild_initramfs.sh: line 16: /mnt/local/etc/sysconfig/kernel: No such file or directory
    2015-02-03 12:25:21 ERROR: Could not source '/mnt/local/etc/sysconfig/kernel'
    === Stack trace ===
    Trace 0: /bin/rear:249 main
    Trace 1: /usr/share/rear/lib/recover-workflow.sh:34 WORKFLOW_recover
    Trace 2: /usr/share/rear/lib/framework-functions.sh:81 SourceStage
    Trace 3: /usr/share/rear/lib/framework-functions.sh:42 Source
    Trace 4: /usr/share/rear/finalize/SUSE_LINUX/i386/17_rebuild_initramfs.sh:17 source
    Trace 5: /usr/share/rear/lib/_input-output-functions.sh:132 StopIfError
    Message: Could not source '/mnt/local/etc/sysconfig/kernel'
    ===================
    2015-02-03 12:25:21 Running exit tasks.
    2015-02-03 12:25:21 The following jobs are still active:
    [1]+  2456 Running                 TERM=linux nsrwatch -p 1 -s $(cat $VAR_DIR/recovery/nsr_server ) < /dev/tty8 > /dev/tty8 &
    /usr/share/rear/lib/_input-output-functions.sh: line 58:  2456 Killed                  TERM=linux nsrwatch -p 1 -s $(cat $VAR_DIR/recovery/nsr_server ) < /dev/tty8 > /dev/tty8
    2015-02-03 12:25:22 Finished in 237 seconds
    2015-02-03 12:25:22 Removing build area /tmp/rear.jUBZxqgQdcamUJV
    rmdir: removing directory, `/tmp/rear.jUBZxqgQdcamUJV'
    2015-02-03 12:25:22 End of program reached

#### <img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50">[gdha](https://github.com/gdha) commented at [2015-02-03 14:56](https://github.com/rear/rear/issues/543#issuecomment-72664110):

@yunsr is your DR system is still alive? If yes please show the content
of `/mnt/local/etc/sysconfig` and `/tmp/diskbyid_mappings`. Could you
also check if on your production system the file `/etc/sysconfig/kernel`
exists or not?

#### <img src="https://avatars.githubusercontent.com/u/10756657?v=4" width="50">[yunsr](https://github.com/yunsr) commented at [2015-02-03 15:52](https://github.com/rear/rear/issues/543#issuecomment-72674706):

sorry DR system isn't still alive. i saw that directory in
/mnt/local/etc was absolutly clean. on production system file
/etc/sysconfig/kernel exists.  
nsrwatch on the networker side shows status pending and nothing is done

    /var/lib/rear/recovery # pwd
    /var/lib/rear/recovery
    linux-g7:/var/lib/rear/recovery # cat diskbyid_mappings
    dm-name-sap1-sap1--lv dm-5
    dm-name-sap2-sap--lv2 dm-4
    dm-name-sap3-sap3--lv dm-3
    dm-name-system-home dm-0
    dm-name-system-root dm-1
    dm-name-system-swap dm-2
    dm-uuid-LVM-Ar2hS3JMvbfD1CcOyCNob1CcRsN0xsWUQtuqCewYFfntbmdDt9oU66gRlU4FQLTj dm-3
    dm-uuid-LVM-Ip2N3hEMp4Iuy94WW7w1HdLpE1PyT9wtGG4tG0PJSyeR93RWESG2zhL9eaBHYbxN dm-5
    dm-uuid-LVM-KplB3BBEQPRV1ewIJSQpC0ruUge1Rhg72qHvYI4Rf3NguCyq9ZjsBNZIpwIQiWU4 dm-4
    dm-uuid-LVM-c3I1jdCH241nfjgHv64VdnGASJsv4yJ0Bo3YgjYGq89lF4kxqs7jgRY9zIOrtIKD dm-0
    dm-uuid-LVM-c3I1jdCH241nfjgHv64VdnGASJsv4yJ0sjNyZj1zhWxDPrOf6B9JbFap4aVHqnwP dm-2
    dm-uuid-LVM-c3I1jdCH241nfjgHv64VdnGASJsv4yJ0yUPZXTVwgYCEwsM2A5FKZOzgK4v814RO dm-1
    scsi-360050768028206eb400000000000002b sdb
    scsi-360050768028206eb400000000000002c sdc
    scsi-360050768028206eb400000000000002d sdd
    scsi-360050768028206eb400000000000002e sde
    scsi-360050768028206eb400000000000002f sdf
    scsi-360050768028206eb4000000000000030 sdg
    scsi-360050768028206eb4000000000000031 sdh
    scsi-360050768028206eb4000000000000032 sdi
    scsi-360050768028206eb4000000000000033 sdj
    scsi-360050768028206eb4000000000000034 sdk
    scsi-3600508b1001c0be32d16c7f3c9327040 sda
    scsi-3600508b1001c0be32d16c7f3c9327040-part1 sda1
    scsi-3600508b1001c0be32d16c7f3c9327040-part2 sda2
    usb-HP_iLO_LUN_00_Media_0_000002660A01-0:0 sdl
    usb-HP_iLO_LUN_00_Media_0_000002660A01-0:0-part1 sdl1
    wwn-0x60050768028206eb400000000000002b sdb
    wwn-0x60050768028206eb400000000000002c sdc
    wwn-0x60050768028206eb400000000000002d sdd
    wwn-0x60050768028206eb400000000000002e sde
    wwn-0x60050768028206eb400000000000002f sdf
    wwn-0x60050768028206eb4000000000000030 sdg
    wwn-0x60050768028206eb4000000000000031 sdh
    wwn-0x60050768028206eb4000000000000032 sdi
    wwn-0x60050768028206eb4000000000000033 sdj
    wwn-0x60050768028206eb4000000000000034 sdk
    wwn-0x600508b1001c0be32d16c7f3c9327040 sda
    wwn-0x600508b1001c0be32d16c7f3c9327040-part1 sda1
    wwn-0x600508b1001c0be32d16c7f3c9327040-part2 sda2

#### <img src="https://avatars.githubusercontent.com/u/10756657?v=4" width="50">[yunsr](https://github.com/yunsr) commented at [2015-02-04 08:10](https://github.com/rear/rear/issues/543#issuecomment-72806873):

second attempt:

    linux-g7:~ # /usr/sbin/rear -v mkrescue
    Relax-and-Recover 1.16.1 / Git
    Using log file: /var/log/rear/rear-linux-g7.log
    Creating disk layout
    Excluding Volume Group sap3
    Excluding Volume Group sap2
    Excluding Volume Group sap1
    Creating root filesystem layout
    EMC Networker will recover these filesystems: /etc /root /srv /lib /lib64 /lost+found /sbin /var /opt /tmp /bin /dev /selinux /media /boot /home /oracle /export /nsr /mnt /usr
    TIP: To login as root via ssh you need to set up /root/.ssh/authorized_keys or SSH_ROOT_PASSWORD in your configuration file
    Copying files and directories
    Copying binaries and libraries
    Copying kernel modules
    Creating initramfs
    Making ISO image
    Wrote ISO image: /var/lib/rear/output/rear-linux-g7.iso (111M)
    Saving result files with NSR (EMC NetWorker)
    If the RETENTION_TIME="Month" is too low please add RETENTION_TIME variable in /etc/rear/local.conf
     pool           retent  name
    ============================
    Default         03/03/15 /var/lib/rear/output/rear-linux-g7.iso
    Default         03/04/15 /var/lib/rear/output/rear-linux-g7.iso
    linux-g7:~ # recover
    Current working directory is /root/
    recover> ls
     .ICEauthority          .dbus                  .exrc                  .gnome2                .gstreamer-0.10        .mozilla               .pulse-cookie          .viminfo               Desktop                bin
     .bash_history          .dmrc                  .gconf                 .gnome2_private        .gvfs                  .nautilus              .recently-used.xbel    .xsession-errors       Documents              inst-sys
     .config                .esd_auth              .gconfd                .gnupg                 .kbd                   .pulse                 .skel                  .xsession-errors.old   autoinst.xml
    recover> cd /
    recover> ls
     bin          dev          export       lib          lost+found   mnt          opt          proc         sbin         srv          tmp          var
     boot         etc          home         lib64        media        nsr          oracle       root         selinux      sys          usr
    recover> exit

try to recover and same problem

    cat diskbyid_mappings
    dm-name-sap1-sap1--lv dm-5
    dm-name-sap2-sap--lv2 dm-4
    dm-name-sap3-sap3--lv dm-3
    dm-name-system-home dm-0 dm-name-system-home
    dm-name-system-root dm-1 dm-name-system-root
    dm-name-system-swap dm-2 dm-name-system-swap
    dm-uuid-LVM-Ar2hS3JMvbfD1CcOyCNob1CcRsN0xsWUQtuqCewYFfntbmdDt9oU66gRlU4FQLTj dm-3
    dm-uuid-LVM-Ip2N3hEMp4Iuy94WW7w1HdLpE1PyT9wtGG4tG0PJSyeR93RWESG2zhL9eaBHYbxN dm-5
    dm-uuid-LVM-KplB3BBEQPRV1ewIJSQpC0ruUge1Rhg72qHvYI4Rf3NguCyq9ZjsBNZIpwIQiWU4 dm-4
    dm-uuid-LVM-c3I1jdCH241nfjgHv64VdnGASJsv4yJ0Bo3YgjYGq89lF4kxqs7jgRY9zIOrtIKD dm-0 dm-name-system-home
    dm-uuid-LVM-c3I1jdCH241nfjgHv64VdnGASJsv4yJ0sjNyZj1zhWxDPrOf6B9JbFap4aVHqnwP dm-2 dm-name-system-swap
    dm-uuid-LVM-c3I1jdCH241nfjgHv64VdnGASJsv4yJ0yUPZXTVwgYCEwsM2A5FKZOzgK4v814RO dm-1 dm-name-system-root
    scsi-360050768028206eb400000000000002b sdb usb-HP_iLO_LUN_00_Media_0_000002660A01-0:0
    scsi-360050768028206eb400000000000002c sdc scsi-360050768028206eb400000000000002b
    scsi-360050768028206eb400000000000002d sdd scsi-360050768028206eb400000000000002c
    scsi-360050768028206eb400000000000002e sde scsi-360050768028206eb400000000000002d
    scsi-360050768028206eb400000000000002f sdf scsi-360050768028206eb400000000000002e
    scsi-360050768028206eb4000000000000030 sdg scsi-360050768028206eb400000000000002f
    scsi-360050768028206eb4000000000000031 sdh scsi-360050768028206eb4000000000000030
    scsi-360050768028206eb4000000000000032 sdi scsi-360050768028206eb4000000000000031
    scsi-360050768028206eb4000000000000033 sdj scsi-360050768028206eb4000000000000032
    scsi-360050768028206eb4000000000000034 sdk scsi-360050768028206eb4000000000000033
    scsi-3600508b1001c0be32d16c7f3c9327040 sda scsi-3600508b1001c0be32d16c7f3c9327040
    scsi-3600508b1001c0be32d16c7f3c9327040-part1 sda1 scsi-3600508b1001c0be32d16c7f3c9327040-part1
    scsi-3600508b1001c0be32d16c7f3c9327040-part2 sda2 scsi-3600508b1001c0be32d16c7f3c9327040-part2
    usb-HP_iLO_LUN_00_Media_0_000002660A01-0:0 sdl scsi-360050768028206eb4000000000000034
    usb-HP_iLO_LUN_00_Media_0_000002660A01-0:0-part1 sdl1
    wwn-0x60050768028206eb400000000000002b sdb usb-HP_iLO_LUN_00_Media_0_000002660A01-0:0
    wwn-0x60050768028206eb400000000000002c sdc scsi-360050768028206eb400000000000002b
    wwn-0x60050768028206eb400000000000002d sdd scsi-360050768028206eb400000000000002c
    wwn-0x60050768028206eb400000000000002e sde scsi-360050768028206eb400000000000002d
    wwn-0x60050768028206eb400000000000002f sdf scsi-360050768028206eb400000000000002e
    wwn-0x60050768028206eb4000000000000030 sdg scsi-360050768028206eb400000000000002f
    wwn-0x60050768028206eb4000000000000031 sdh scsi-360050768028206eb4000000000000030
    wwn-0x60050768028206eb4000000000000032 sdi scsi-360050768028206eb4000000000000031
    wwn-0x60050768028206eb4000000000000033 sdj scsi-360050768028206eb4000000000000032
    wwn-0x60050768028206eb4000000000000034 sdk scsi-360050768028206eb4000000000000033
    wwn-0x600508b1001c0be32d16c7f3c9327040 sda scsi-3600508b1001c0be32d16c7f3c9327040
    wwn-0x600508b1001c0be32d16c7f3c9327040-part1 sda1 scsi-3600508b1001c0be32d16c7f3c9327040-part1
    wwn-0x600508b1001c0be32d16c7f3c9327040-part2 sda2 scsi-3600508b1001c0be32d16c7f3c9327040-part2

     cat diskbyid_mappings
    dm-name-sap1-sap1--lv dm-5
    dm-name-sap2-sap--lv2 dm-4
    dm-name-sap3-sap3--lv dm-3
    dm-name-system-home dm-0 dm-name-system-home
    dm-name-system-root dm-1 dm-name-system-root
    dm-name-system-swap dm-2 dm-name-system-swap
    dm-uuid-LVM-Ar2hS3JMvbfD1CcOyCNob1CcRsN0xsWUQtuqCewYFfntbmdDt9oU66gRlU4FQLTj dm-3
    dm-uuid-LVM-Ip2N3hEMp4Iuy94WW7w1HdLpE1PyT9wtGG4tG0PJSyeR93RWESG2zhL9eaBHYbxN dm-5
    dm-uuid-LVM-KplB3BBEQPRV1ewIJSQpC0ruUge1Rhg72qHvYI4Rf3NguCyq9ZjsBNZIpwIQiWU4 dm-4
    dm-uuid-LVM-c3I1jdCH241nfjgHv64VdnGASJsv4yJ0Bo3YgjYGq89lF4kxqs7jgRY9zIOrtIKD dm-0 dm-name-system-home
    dm-uuid-LVM-c3I1jdCH241nfjgHv64VdnGASJsv4yJ0sjNyZj1zhWxDPrOf6B9JbFap4aVHqnwP dm-2 dm-name-system-swap
    dm-uuid-LVM-c3I1jdCH241nfjgHv64VdnGASJsv4yJ0yUPZXTVwgYCEwsM2A5FKZOzgK4v814RO dm-1 dm-name-system-root
    scsi-360050768028206eb400000000000002b sdb usb-HP_iLO_LUN_00_Media_0_000002660A01-0:0
    scsi-360050768028206eb400000000000002c sdc scsi-360050768028206eb400000000000002b
    scsi-360050768028206eb400000000000002d sdd scsi-360050768028206eb400000000000002c
    scsi-360050768028206eb400000000000002e sde scsi-360050768028206eb400000000000002d
    scsi-360050768028206eb400000000000002f sdf scsi-360050768028206eb400000000000002e
    scsi-360050768028206eb4000000000000030 sdg scsi-360050768028206eb400000000000002f
    scsi-360050768028206eb4000000000000031 sdh scsi-360050768028206eb4000000000000030
    scsi-360050768028206eb4000000000000032 sdi scsi-360050768028206eb4000000000000031
    scsi-360050768028206eb4000000000000033 sdj scsi-360050768028206eb4000000000000032
    scsi-360050768028206eb4000000000000034 sdk scsi-360050768028206eb4000000000000033
    scsi-3600508b1001c0be32d16c7f3c9327040 sda scsi-3600508b1001c0be32d16c7f3c9327040
    scsi-3600508b1001c0be32d16c7f3c9327040-part1 sda1 scsi-3600508b1001c0be32d16c7f3c9327040-part1
    scsi-3600508b1001c0be32d16c7f3c9327040-part2 sda2 scsi-3600508b1001c0be32d16c7f3c9327040-part2
    usb-HP_iLO_LUN_00_Media_0_000002660A01-0:0 sdl scsi-360050768028206eb4000000000000034
    usb-HP_iLO_LUN_00_Media_0_000002660A01-0:0-part1 sdl1
    wwn-0x60050768028206eb400000000000002b sdb usb-HP_iLO_LUN_00_Media_0_000002660A01-0:0
    wwn-0x60050768028206eb400000000000002c sdc scsi-360050768028206eb400000000000002b
    wwn-0x60050768028206eb400000000000002d sdd scsi-360050768028206eb400000000000002c
    wwn-0x60050768028206eb400000000000002e sde scsi-360050768028206eb400000000000002d
    wwn-0x60050768028206eb400000000000002f sdf scsi-360050768028206eb400000000000002e
    wwn-0x60050768028206eb4000000000000030 sdg scsi-360050768028206eb400000000000002f
    wwn-0x60050768028206eb4000000000000031 sdh scsi-360050768028206eb4000000000000030
    wwn-0x60050768028206eb4000000000000032 sdi scsi-360050768028206eb4000000000000031
    wwn-0x60050768028206eb4000000000000033 sdj scsi-360050768028206eb4000000000000032
    wwn-0x60050768028206eb4000000000000034 sdk scsi-360050768028206eb4000000000000033
    wwn-0x600508b1001c0be32d16c7f3c9327040 sda scsi-3600508b1001c0be32d16c7f3c9327040
    wwn-0x600508b1001c0be32d16c7f3c9327040-part1 sda1 scsi-3600508b1001c0be32d16c7f3c9327040-part1
    wwn-0x600508b1001c0be32d16c7f3c9327040-part2 sda2 scsi-3600508b1001c0be32d16c7f3c9327040-part2
    [root@nfs-test home]# cat rear-linux-g7.log
    2015-02-04 09:50:02 Relax-and-Recover 1.16.1 / Git
    2015-02-04 09:50:02 Command line options: /bin/rear -v recover
    2015-02-04 09:50:02 Using log file: /var/log/rear/rear-linux-g7.log
    2015-02-04 09:50:02 Including /etc/rear/os.conf
    2015-02-04 09:50:02 Including conf/Linux-i386.conf
    2015-02-04 09:50:02 Including conf/GNU/Linux.conf
    2015-02-04 09:50:02 Including conf/SUSE_LINUX.conf
    2015-02-04 09:50:02 Including /etc/rear/local.conf
    2015-02-04 09:50:02 Including /etc/rear/rescue.conf
    2015-02-04 09:50:02 Using build area '/tmp/rear.mtlsco5utZgyheQ'
    mkdir: created directory `/tmp/rear.mtlsco5utZgyheQ/rootfs'
    mkdir: created directory `/tmp/rear.mtlsco5utZgyheQ/tmp'
    2015-02-04 09:50:02 Running recover workflow
    2015-02-04 09:50:02 Running 'setup' stage
    2015-02-04 09:50:02 Including setup/default/01_pre_recovery_script.sh
    2015-02-04 09:50:02 Finished running 'setup' stage in 0 seconds
    2015-02-04 09:50:02 Running 'verify' stage
    2015-02-04 09:50:02 Including verify/default/02_cciss_scsi_engage.sh
    2015-02-04 09:50:02 Including verify/default/02_translate_url.sh
    2015-02-04 09:50:02 Including verify/default/03_translate_tape.sh
    2015-02-04 09:50:02 Including verify/default/04_validate_variables.sh
    2015-02-04 09:50:02 Including verify/GNU/Linux/05_sane_recovery_check.sh
    2015-02-04 09:50:02 Including verify/GNU/Linux/23_storage_and_network_modules.sh
    find: `/lib/modules/3.0.76-0.11-default/kernel/drivers/xen': No such file or directory
    find: `/lib/modules/3.0.76-0.11-default/extra': No such file or directory
    find: `/lib/modules/3.0.76-0.11-default/weak-updates': No such file or directory
    2015-02-04 09:50:02 Including verify/GNU/Linux/26_recovery_storage_drivers.sh
    find: `/tmp/rear.mtlsco5utZgyheQ/tmp/dev': No such file or directory
    --- /var/lib/rear/recovery/storage_drivers      2015-02-04 09:34:00.000000000 +0200
    +++ /tmp/rear.mtlsco5utZgyheQ/tmp/storage_drivers       2015-02-04 09:50:02.556388964 +0200
    @@ -2,16 +2,11 @@
     hpsa
     iscsi_boot_sysfs
     libiscsi
    -linear
     qla2xxx
    -scsi_dh
    -scsi_dh_alua
    -scsi_dh_emc
    -scsi_dh_hp_sw
    -scsi_dh_rdac
     scsi_mod
     scsi_tgt
     scsi_transport_fc
     scsi_transport_iscsi
     sd_mod
     sg
    +sr_mod
    2015-02-04 09:50:02 NOTICE: Will do driver migration
    2015-02-04 09:50:02 Including verify/NSR/default/40_verify_nsr.sh
    2015-02-04 09:50:02 Skipping ping test
    2015-02-04 09:50:02 EMC NetWorker server NSRSERVER=nw-win
    2015-02-04 09:50:02 Including verify/NSR/default/41_verify_nsr_paths.sh
    2015-02-04 09:50:02 We will recover the following file systems from EMC NetWorker: /etc /root /srv /lib /lib64 /lost+found /sbin /var /opt /tmp /bin /dev /selinux /media /boot /home /oracle /export /nsr /mnt /usr
    2015-02-04 09:50:02 Finished running 'verify' stage in 0 seconds
    2015-02-04 09:50:02 Running 'layout/prepare' stage
    2015-02-04 09:50:02 Including layout/prepare/default/01_prepare_files.sh
    2015-02-04 09:50:02 Including layout/prepare/GNU/Linux/10_include_partition_code.sh
    2015-02-04 09:50:02 Including layout/prepare/GNU/Linux/11_include_lvm_code.sh
    2015-02-04 09:50:02 Including layout/prepare/GNU/Linux/12_include_raid_code.sh
    2015-02-04 09:50:02 Including layout/prepare/GNU/Linux/13_include_filesystem_code.sh
    2015-02-04 09:50:02 Including layout/prepare/GNU/Linux/14_include_swap_code.sh
    2015-02-04 09:50:02 Including layout/prepare/GNU/Linux/15_include_drbd_code.sh
    2015-02-04 09:50:02 Including layout/prepare/GNU/Linux/16_include_luks_code.sh
    2015-02-04 09:50:02 Including layout/prepare/GNU/Linux/17_include_hpraid_code.sh
    2015-02-04 09:50:02 Including layout/prepare/default/20_recreate_hpraid.sh
    2015-02-04 09:50:02 Including layout/prepare/GNU/Linux/21_load_multipath.sh
    2015-02-04 09:50:02 Including layout/prepare/default/25_compare_disks.sh
    2015-02-04 09:50:02 Comparing disks.
    2015-02-04 09:50:02 Looking for sda...
    2015-02-04 09:50:02 Device sda exists.
    2015-02-04 09:50:02 Size of device sda matches.
    2015-02-04 09:50:02 Disk configuration is identical, proceeding with restore.
    2015-02-04 09:50:02 Including layout/prepare/default/30_map_disks.sh
    2015-02-04 09:50:02 Including layout/prepare/default/31_remove_exclusions.sh
    2015-02-04 09:50:02 Including layout/prepare/default/32_apply_mappings.sh
    2015-02-04 09:50:02 Including layout/prepare/default/40_autoresize_disks.sh
    2015-02-04 09:50:02 Including layout/prepare/default/50_confirm_layout.sh
    2015-02-04 09:50:02 Including layout/prepare/default/51_list_dependencies.sh
    2015-02-04 09:50:02 Including layout/prepare/default/52_exclude_components.sh
    2015-02-04 09:50:02 Including layout/prepare/default/54_generate_device_code.sh
    2015-02-04 09:50:03 Including layout/prepare/default/55_finalize_script.sh
    2015-02-04 09:50:03 Including layout/prepare/default/60_show_unprocessed.sh
    2015-02-04 09:50:03 Including layout/prepare/default/61_exclude_from_restore.sh
    2015-02-04 09:50:03 Finished running 'layout/prepare' stage in 1 seconds
    2015-02-04 09:50:03 Running 'layout/recreate' stage
    2015-02-04 09:50:03 Including layout/recreate/default/10_ask_confirmation.sh
    2015-02-04 09:50:03 Including layout/recreate/default/20_run_script.sh
    2015-02-04 09:50:03 Start system layout restoration.
    +++ create_component /dev/sda disk
    +++ local device=/dev/sda
    +++ local type=disk
    +++ local touchfile=disk--dev-sda
    +++ '[' -e /tmp/rear.mtlsco5utZgyheQ/tmp/touch/disk--dev-sda ']'
    +++ return 0
    +++ Log 'Erasing MBR of disk /dev/sda'
    +++ test 1 -gt 0
    ++++ Stamp
    ++++ date '+%Y-%m-%d %H:%M:%S '
    +++ echo '2015-02-04 09:50:03 Erasing MBR of disk /dev/sda'
    2015-02-04 09:50:03 Erasing MBR of disk /dev/sda
    +++ dd if=/dev/zero of=/dev/sda bs=512 count=1
    1+0 records in
    1+0 records out
    512 bytes (512 B) copied, 0.000199323 s, 2.6 MB/s
    +++ sync
    +++ LogPrint 'Creating partitions for disk /dev/sda (msdos)'
    +++ Log 'Creating partitions for disk /dev/sda (msdos)'
    +++ test 1 -gt 0
    ++++ Stamp
    ++++ date '+%Y-%m-%d %H:%M:%S '
    +++ echo '2015-02-04 09:50:03 Creating partitions for disk /dev/sda (msdos)'
    2015-02-04 09:50:03 Creating partitions for disk /dev/sda (msdos)
    +++ Print 'Creating partitions for disk /dev/sda (msdos)'
    +++ test 1
    +++ echo -e 'Creating partitions for disk /dev/sda (msdos)'
    +++ parted -s /dev/sda mklabel msdos
    +++ sleep 1
    +++ parted -s /dev/sda mkpart '"primary"' 262144B 164626431B
    +++ sleep 1
    +++ parted -s /dev/sda set 1 boot on
    +++ parted -s /dev/sda mkpart '"primary"' 164626432B 146778619903B
    +++ sleep 1
    +++ parted -s /dev/sda set 2 lvm on
    +++ partprobe -s /dev/sda
    /dev/sda: msdos partitions 1 2
    +++ sleep 10
    +++ my_udevtrigger
    +++ has_binary udevadm
    +++ for bin in '$@'
    +++ type udevadm
    +++ return 0
    +++ udevadm trigger
    +++ my_udevsettle
    +++ has_binary udevadm
    +++ for bin in '$@'
    +++ type udevadm
    +++ return 0
    +++ udevadm settle
    +++ component_created /dev/sda disk
    +++ local device=/dev/sda
    +++ local type=disk
    +++ local touchfile=disk--dev-sda
    +++ touch /tmp/rear.mtlsco5utZgyheQ/tmp/touch/disk--dev-sda
    +++ create_component /dev/sda1 part
    +++ local device=/dev/sda1
    +++ local type=part
    +++ local touchfile=part--dev-sda1
    +++ '[' -e /tmp/rear.mtlsco5utZgyheQ/tmp/touch/part--dev-sda1 ']'
    +++ return 0
    +++ component_created /dev/sda1 part
    +++ local device=/dev/sda1
    +++ local type=part
    +++ local touchfile=part--dev-sda1
    +++ touch /tmp/rear.mtlsco5utZgyheQ/tmp/touch/part--dev-sda1
    +++ create_component /dev/sda2 part
    +++ local device=/dev/sda2
    +++ local type=part
    +++ local touchfile=part--dev-sda2
    +++ '[' -e /tmp/rear.mtlsco5utZgyheQ/tmp/touch/part--dev-sda2 ']'
    +++ return 0
    +++ component_created /dev/sda2 part
    +++ local device=/dev/sda2
    +++ local type=part
    +++ local touchfile=part--dev-sda2
    +++ touch /tmp/rear.mtlsco5utZgyheQ/tmp/touch/part--dev-sda2
    +++ create_component pv:/dev/sda2 lvmdev
    +++ local device=pv:/dev/sda2
    +++ local type=lvmdev
    +++ local touchfile=lvmdev-pv:-dev-sda2
    +++ '[' -e /tmp/rear.mtlsco5utZgyheQ/tmp/touch/lvmdev-pv:-dev-sda2 ']'
    +++ return 0
    +++ LogPrint 'Creating LVM PV /dev/sda2'
    +++ Log 'Creating LVM PV /dev/sda2'
    +++ test 1 -gt 0
    ++++ Stamp
    ++++ date '+%Y-%m-%d %H:%M:%S '
    +++ echo '2015-02-04 09:50:17 Creating LVM PV /dev/sda2'
    2015-02-04 09:50:17 Creating LVM PV /dev/sda2
    +++ Print 'Creating LVM PV /dev/sda2'
    +++ test 1
    +++ echo -e 'Creating LVM PV /dev/sda2'
    +++ lvm vgchange -a n system
    +++ lvm pvcreate -ff --yes -v --uuid Y2WjZn-cTVf-qABG-1I3N-poxg-OBE2-xecIcu --restorefile /var/lib/rear/layout/lvm/system.cfg /dev/sda2
        connect() failed on local socket: No such file or directory
        Internal cluster locking initialisation failed.
        WARNING: Falling back to local file-based locking.
        Volume Groups with the clustered attribute will be inaccessible.
      WARNING: Forcing physical volume creation on /dev/sda2 of volume group "system"
        Set up physical volume for "/dev/sda2" with 286355456 available sectors
        Writing physical volume data to disk "/dev/sda2"
      Incorrect metadata area header checksum on /dev/sda2 at offset 4096
        Wiping cache of LVM-capable devices
      Incorrect metadata area header checksum on /dev/sda2 at offset 4096
      get_pv_from_vg_by_id: vg_read_internal failed to read VG system
      Physical volume "/dev/sda2" successfully created
    +++ component_created pv:/dev/sda2 lvmdev
    +++ local device=pv:/dev/sda2
    +++ local type=lvmdev
    +++ local touchfile=lvmdev-pv:-dev-sda2
    +++ touch /tmp/rear.mtlsco5utZgyheQ/tmp/touch/lvmdev-pv:-dev-sda2
    +++ create_component /dev/system lvmgrp
    +++ local device=/dev/system
    +++ local type=lvmgrp
    +++ local touchfile=lvmgrp--dev-system
    +++ '[' -e /tmp/rear.mtlsco5utZgyheQ/tmp/touch/lvmgrp--dev-system ']'
    +++ return 0
    +++ LogPrint 'Restoring LVM VG system'
    +++ Log 'Restoring LVM VG system'
    +++ test 1 -gt 0
    ++++ Stamp
    ++++ date '+%Y-%m-%d %H:%M:%S '
    +++ echo '2015-02-04 09:50:17 Restoring LVM VG system'
    2015-02-04 09:50:17 Restoring LVM VG system
    +++ Print 'Restoring LVM VG system'
    +++ test 1
    +++ echo -e 'Restoring LVM VG system'
    +++ '[' -e /dev/system ']'
    +++ rm -rf /dev/system
    +++ lvm vgcfgrestore -f /var/lib/rear/layout/lvm/system.cfg system
      Restored volume group system
    +++ lvm vgchange --available y system
      3 logical volume(s) in volume group "system" now active
    +++ component_created /dev/system lvmgrp
    +++ local device=/dev/system
    +++ local type=lvmgrp
    +++ local touchfile=lvmgrp--dev-system
    +++ touch /tmp/rear.mtlsco5utZgyheQ/tmp/touch/lvmgrp--dev-system
    +++ create_component /dev/mapper/system-home lvmvol
    +++ local device=/dev/mapper/system-home
    +++ local type=lvmvol
    +++ local touchfile=lvmvol--dev-mapper-system-home
    +++ '[' -e /tmp/rear.mtlsco5utZgyheQ/tmp/touch/lvmvol--dev-mapper-system-home ']'
    +++ return 0
    +++ component_created /dev/mapper/system-home lvmvol
    +++ local device=/dev/mapper/system-home
    +++ local type=lvmvol
    +++ local touchfile=lvmvol--dev-mapper-system-home
    +++ touch /tmp/rear.mtlsco5utZgyheQ/tmp/touch/lvmvol--dev-mapper-system-home
    +++ create_component /dev/mapper/system-root lvmvol
    +++ local device=/dev/mapper/system-root
    +++ local type=lvmvol
    +++ local touchfile=lvmvol--dev-mapper-system-root
    +++ '[' -e /tmp/rear.mtlsco5utZgyheQ/tmp/touch/lvmvol--dev-mapper-system-root ']'
    +++ return 0
    +++ component_created /dev/mapper/system-root lvmvol
    +++ local device=/dev/mapper/system-root
    +++ local type=lvmvol
    +++ local touchfile=lvmvol--dev-mapper-system-root
    +++ touch /tmp/rear.mtlsco5utZgyheQ/tmp/touch/lvmvol--dev-mapper-system-root
    +++ create_component /dev/mapper/system-swap lvmvol
    +++ local device=/dev/mapper/system-swap
    +++ local type=lvmvol
    +++ local touchfile=lvmvol--dev-mapper-system-swap
    +++ '[' -e /tmp/rear.mtlsco5utZgyheQ/tmp/touch/lvmvol--dev-mapper-system-swap ']'
    +++ return 0
    +++ component_created /dev/mapper/system-swap lvmvol
    +++ local device=/dev/mapper/system-swap
    +++ local type=lvmvol
    +++ local touchfile=lvmvol--dev-mapper-system-swap
    +++ touch /tmp/rear.mtlsco5utZgyheQ/tmp/touch/lvmvol--dev-mapper-system-swap
    +++ create_component fs:/ fs
    +++ local device=fs:/
    +++ local type=fs
    +++ local touchfile=fs-fs:-
    +++ '[' -e /tmp/rear.mtlsco5utZgyheQ/tmp/touch/fs-fs:- ']'
    +++ return 0
    +++ LogPrint 'Creating ext3-filesystem / on /dev/mapper/system-root'
    +++ Log 'Creating ext3-filesystem / on /dev/mapper/system-root'
    +++ test 1 -gt 0
    ++++ Stamp
    ++++ date '+%Y-%m-%d %H:%M:%S '
    +++ echo '2015-02-04 09:50:17 Creating ext3-filesystem / on /dev/mapper/system-root'
    2015-02-04 09:50:17 Creating ext3-filesystem / on /dev/mapper/system-root
    +++ Print 'Creating ext3-filesystem / on /dev/mapper/system-root'
    +++ test 1
    +++ echo -e 'Creating ext3-filesystem / on /dev/mapper/system-root'
    +++ mkfs -t ext3 -b 4096 -i 16384 /dev/mapper/system-root
    mke2fs 1.41.9 (22-Aug-2009)
    Filesystem label=
    OS type: Linux
    Block size=4096 (log=2)
    Fragment size=4096 (log=2)
    655360 inodes, 2621440 blocks
    131072 blocks (5.00%) reserved for the super user
    First data block=0
    Maximum filesystem blocks=2684354560
    80 block groups
    32768 blocks per group, 32768 fragments per group
    8192 inodes per group
    Superblock backups stored on blocks:
            32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632

    Writing inode tables: done
    Creating journal (32768 blocks): done
    Writing superblocks and filesystem accounting information: done

    This filesystem will be automatically checked every 35 mounts or
    180 days, whichever comes first.  Use tune2fs -c or -i to override.
    +++ tune2fs -U de14e46c-48fe-4786-b3d6-af712e671dda /dev/mapper/system-root
    tune2fs 1.41.9 (22-Aug-2009)
    +++ tune2fs -m 5 -c -1 -i 0d /dev/mapper/system-root
    tune2fs 1.41.9 (22-Aug-2009)
    Setting maximal mount count to -1
    Setting interval between checks to 0 seconds
    Setting reserved blocks percentage to 5% (131072 blocks)
    +++ LogPrint 'Mounting filesystem /'
    +++ Log 'Mounting filesystem /'
    +++ test 1 -gt 0
    ++++ Stamp
    ++++ date '+%Y-%m-%d %H:%M:%S '
    +++ echo '2015-02-04 09:50:18 Mounting filesystem /'
    2015-02-04 09:50:18 Mounting filesystem /
    +++ Print 'Mounting filesystem /'
    +++ test 1
    +++ echo -e 'Mounting filesystem /'
    +++ mkdir -p /mnt/local/
    +++ mount -o rw,acl,user_xattr /dev/mapper/system-root /mnt/local/
    +++ component_created fs:/ fs
    +++ local device=fs:/
    +++ local type=fs
    +++ local touchfile=fs-fs:-
    +++ touch /tmp/rear.mtlsco5utZgyheQ/tmp/touch/fs-fs:-
    +++ create_component fs:/boot fs
    +++ local device=fs:/boot
    +++ local type=fs
    +++ local touchfile=fs-fs:-boot
    +++ '[' -e /tmp/rear.mtlsco5utZgyheQ/tmp/touch/fs-fs:-boot ']'
    +++ return 0
    +++ LogPrint 'Creating ext3-filesystem /boot on /dev/sda1'
    +++ Log 'Creating ext3-filesystem /boot on /dev/sda1'
    +++ test 1 -gt 0
    ++++ Stamp
    ++++ date '+%Y-%m-%d %H:%M:%S '
    +++ echo '2015-02-04 09:50:18 Creating ext3-filesystem /boot on /dev/sda1'
    2015-02-04 09:50:18 Creating ext3-filesystem /boot on /dev/sda1
    +++ Print 'Creating ext3-filesystem /boot on /dev/sda1'
    +++ test 1
    +++ echo -e 'Creating ext3-filesystem /boot on /dev/sda1'
    +++ mkfs -t ext3 -b 1024 -i 4092 /dev/sda1
    mke2fs 1.41.9 (22-Aug-2009)
    Filesystem label=
    OS type: Linux
    Block size=1024 (log=0)
    Fragment size=1024 (log=0)
    40320 inodes, 160512 blocks
    8025 blocks (5.00%) reserved for the super user
    First data block=1
    Maximum filesystem blocks=67371008
    20 block groups
    8192 blocks per group, 8192 fragments per group
    2016 inodes per group
    Superblock backups stored on blocks:
            8193, 24577, 40961, 57345, 73729

    Writing inode tables: done
    Creating journal (4096 blocks): done
    Writing superblocks and filesystem accounting information: done

    This filesystem will be automatically checked every 38 mounts or
    180 days, whichever comes first.  Use tune2fs -c or -i to override.
    +++ tune2fs -U 5931eb89-3fab-4c2a-840e-98ec7870888d /dev/sda1
    tune2fs 1.41.9 (22-Aug-2009)
    +++ tune2fs -m 4 -c -1 -i 0d /dev/sda1
    tune2fs 1.41.9 (22-Aug-2009)
    Setting maximal mount count to -1
    Setting interval between checks to 0 seconds
    Setting reserved blocks percentage to 4% (6420 blocks)
    +++ LogPrint 'Mounting filesystem /boot'
    +++ Log 'Mounting filesystem /boot'
    +++ test 1 -gt 0
    ++++ Stamp
    ++++ date '+%Y-%m-%d %H:%M:%S '
    +++ echo '2015-02-04 09:50:19 Mounting filesystem /boot'
    2015-02-04 09:50:19 Mounting filesystem /boot
    +++ Print 'Mounting filesystem /boot'
    +++ test 1
    +++ echo -e 'Mounting filesystem /boot'
    +++ mkdir -p /mnt/local/boot
    +++ mount -o rw,acl,user_xattr /dev/sda1 /mnt/local/boot
    +++ component_created fs:/boot fs
    +++ local device=fs:/boot
    +++ local type=fs
    +++ local touchfile=fs-fs:-boot
    +++ touch /tmp/rear.mtlsco5utZgyheQ/tmp/touch/fs-fs:-boot
    +++ create_component fs:/home fs
    +++ local device=fs:/home
    +++ local type=fs
    +++ local touchfile=fs-fs:-home
    +++ '[' -e /tmp/rear.mtlsco5utZgyheQ/tmp/touch/fs-fs:-home ']'
    +++ return 0
    +++ LogPrint 'Creating ext3-filesystem /home on /dev/mapper/system-home'
    +++ Log 'Creating ext3-filesystem /home on /dev/mapper/system-home'
    +++ test 1 -gt 0
    ++++ Stamp
    ++++ date '+%Y-%m-%d %H:%M:%S '
    +++ echo '2015-02-04 09:50:19 Creating ext3-filesystem /home on /dev/mapper/system-home'
    2015-02-04 09:50:19 Creating ext3-filesystem /home on /dev/mapper/system-home
    +++ Print 'Creating ext3-filesystem /home on /dev/mapper/system-home'
    +++ test 1
    +++ echo -e 'Creating ext3-filesystem /home on /dev/mapper/system-home'
    +++ mkfs -t ext3 -b 4096 -i 16384 /dev/mapper/system-home
    mke2fs 1.41.9 (22-Aug-2009)
    Filesystem label=
    OS type: Linux
    Block size=4096 (log=2)
    Fragment size=4096 (log=2)
    1638400 inodes, 6553600 blocks
    327680 blocks (5.00%) reserved for the super user
    First data block=0
    Maximum filesystem blocks=4294967296
    200 block groups
    32768 blocks per group, 32768 fragments per group
    8192 inodes per group
    Superblock backups stored on blocks:
            32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208,
            4096000

    Writing inode tables: done
    Creating journal (32768 blocks): done
    Writing superblocks and filesystem accounting information: done

    This filesystem will be automatically checked every 34 mounts or
    180 days, whichever comes first.  Use tune2fs -c or -i to override.
    +++ tune2fs -U cf31e45b-1dff-411b-a5a1-a6613867832a /dev/mapper/system-home
    tune2fs 1.41.9 (22-Aug-2009)
    +++ tune2fs -m 4 -c -1 -i 0d /dev/mapper/system-home
    tune2fs 1.41.9 (22-Aug-2009)
    Setting maximal mount count to -1
    Setting interval between checks to 0 seconds
    Setting reserved blocks percentage to 4% (262144 blocks)
    +++ LogPrint 'Mounting filesystem /home'
    +++ Log 'Mounting filesystem /home'
    +++ test 1 -gt 0
    ++++ Stamp
    ++++ date '+%Y-%m-%d %H:%M:%S '
    +++ echo '2015-02-04 09:50:22 Mounting filesystem /home'
    2015-02-04 09:50:22 Mounting filesystem /home
    +++ Print 'Mounting filesystem /home'
    +++ test 1
    +++ echo -e 'Mounting filesystem /home'
    +++ mkdir -p /mnt/local/home
    +++ mount -o rw,acl,user_xattr /dev/mapper/system-home /mnt/local/home
    +++ component_created fs:/home fs
    +++ local device=fs:/home
    +++ local type=fs
    +++ local touchfile=fs-fs:-home
    +++ touch /tmp/rear.mtlsco5utZgyheQ/tmp/touch/fs-fs:-home
    +++ create_component swap:/dev/mapper/system-swap swap
    +++ local device=swap:/dev/mapper/system-swap
    +++ local type=swap
    +++ local touchfile=swap-swap:-dev-mapper-system-swap
    +++ '[' -e /tmp/rear.mtlsco5utZgyheQ/tmp/touch/swap-swap:-dev-mapper-system-swap ']'
    +++ return 0
    +++ LogPrint 'Creating swap on /dev/mapper/system-swap'
    +++ Log 'Creating swap on /dev/mapper/system-swap'
    +++ test 1 -gt 0
    ++++ Stamp
    ++++ date '+%Y-%m-%d %H:%M:%S '
    +++ echo '2015-02-04 09:50:22 Creating swap on /dev/mapper/system-swap'
    2015-02-04 09:50:22 Creating swap on /dev/mapper/system-swap
    +++ Print 'Creating swap on /dev/mapper/system-swap'
    +++ test 1
    +++ echo -e 'Creating swap on /dev/mapper/system-swap'
    +++ mkswap -U 2de6d07a-a744-4129-b766-fc69c3f3aa12 /dev/mapper/system-swap
    mkswap: /dev/mapper/system-swap: warning: don't erase bootbits sectors
            on whole disk. Use -f to force.
    Setting up swapspace version 1, size = 2097148 KiB
    no label, UUID=2de6d07a-a744-4129-b766-fc69c3f3aa12
    +++ component_created swap:/dev/mapper/system-swap swap
    +++ local device=swap:/dev/mapper/system-swap
    +++ local type=swap
    +++ local touchfile=swap-swap:-dev-mapper-system-swap
    +++ touch /tmp/rear.mtlsco5utZgyheQ/tmp/touch/swap-swap:-dev-mapper-system-swap
    +++ set +x
    2015-02-04 09:50:22 Disk layout created.
    2015-02-04 09:50:22 Including layout/recreate/default/25_verify_mount.sh
    2015-02-04 09:50:22 Finished running 'layout/recreate' stage in 19 seconds
    2015-02-04 09:50:22 Running 'restore' stage
    2015-02-04 09:50:22 Including restore/NSR/default/40_restore_with_nsr.sh
    2015-02-04 09:50:22 Starting nsrwatch on console 8
    2015-02-04 09:50:22 Restore filesystem /etc /root /srv /lib /lib64 /lost+found /sbin /var /opt /tmp /bin /dev /selinux /media /boot /home /oracle /export /nsr /mnt /usr  with recover
    2015-02-04 09:58:19 Including restore/default/90_create_missing_directories.sh
    2015-02-04 09:58:19 Including restore/SUSE_LINUX/91_create_missing_directories.sh
    2015-02-04 09:58:19 Finished running 'restore' stage in 477 seconds
    2015-02-04 09:58:19 Running 'finalize' stage
    2015-02-04 09:58:19 Including finalize/default/01_prepare_checks.sh
    2015-02-04 09:58:19 Including finalize/default/10_populate_dev.sh
    2015-02-04 09:58:19 Including finalize/GNU/Linux/15_migrate_disk_devices_layout.sh
    2015-02-04 09:58:19 Including finalize/GNU/Linux/15_migrate_uuid_tags.sh
    2015-02-04 09:58:19 Including finalize/GNU/Linux/16_rename_diskbyid.sh
    device node not found
    device node not found
    device node not found
    device node not found
    device node not found
    device node not found
    device node not found
    2015-02-04 09:58:19 Including finalize/SUSE_LINUX/i386/17_rebuild_initramfs.sh
    /usr/share/rear/finalize/SUSE_LINUX/i386/17_rebuild_initramfs.sh: line 16: /mnt/local/etc/sysconfig/kernel: No such file or directory
    2015-02-04 09:58:19 ERROR: Could not source '/mnt/local/etc/sysconfig/kernel'
    === Stack trace ===
    Trace 0: /bin/rear:249 main
    Trace 1: /usr/share/rear/lib/recover-workflow.sh:34 WORKFLOW_recover
    Trace 2: /usr/share/rear/lib/framework-functions.sh:81 SourceStage
    Trace 3: /usr/share/rear/lib/framework-functions.sh:42 Source
    Trace 4: /usr/share/rear/finalize/SUSE_LINUX/i386/17_rebuild_initramfs.sh:17 source
    Trace 5: /usr/share/rear/lib/_input-output-functions.sh:132 StopIfError
    Message: Could not source '/mnt/local/etc/sysconfig/kernel'
    ===================
    2015-02-04 09:58:19 Running exit tasks.
    2015-02-04 09:58:19 The following jobs are still active:
    [1]+  2477 Running                 TERM=linux nsrwatch -p 1 -s $(cat $VAR_DIR/recovery/nsr_server ) < /dev/tty8 > /dev/tty8 &
    /usr/share/rear/lib/_input-output-functions.sh: line 58:  2477 Killed                  TERM=linux nsrwatch -p 1 -s $(cat $VAR_DIR/recovery/nsr_server ) < /dev/tty8 > /dev/tty8
    2015-02-04 09:58:20 Finished in 498 seconds
    2015-02-04 09:58:20 Removing build area /tmp/rear.mtlsco5utZgyheQ
    rmdir: removing directory, `/tmp/rear.mtlsco5utZgyheQ'
    2015-02-04 09:58:20 End of program reached

in /mnt/local/ i didn't see /etc directory

networker work fine. i can without problem recover any file or directory
via recovery command

#### <img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50">[gdha](https://github.com/gdha) commented at [2015-02-04 09:57](https://github.com/rear/rear/issues/543#issuecomment-72827971):

@yunsr If you say you can recover any file and I see in the log:

    2015-02-04 09:50:22 Starting nsrwatch on console 8
    2015-02-04 09:50:22 Restore filesystem /etc /root /srv /lib /lib64 /lost+found /sbin /var /opt /tmp /bin /dev /selinux /media /boot /home /oracle /export /nsr /mnt /usr with recover

why is then the directory `/mnt/local/etc` empty?

#### <img src="https://avatars.githubusercontent.com/u/10756657?v=4" width="50">[yunsr](https://github.com/yunsr) commented at [2015-02-04 10:10](https://github.com/rear/rear/issues/543#issuecomment-72829834):

i can recover with networker via networker command `recover` or from nw
server before load from rear rescue

    linux-g7:~ # recover
    Current working directory is /root/
    recover> cd /
    recover> ls
     bin          dev          export       lib          lost+found   mnt          opt          proc         sbin         srv          tmp          var
     boot         etc          home         lib64        media        nsr          oracle       root         selinux      sys          usr
    recover> cd /etc
    recover> add hosts
    1 file(s) marked for recovery
    recover> relocate
    6479:recover: <return> will recover files into their original location
    New destination directory: /tmp
    recover> destination
    recover files into /tmp
    recover> recover
    Recovering 1 file from /etc/ into /tmp
    Volumes needed (all on-line):
            nw_win.007 at sapt4
    Total estimated disk space needed for recover is 4 KB.
    Requesting 1 file(s), this may take a while...
    Recover start time: Wed Feb  4 12:05:14 2015
    Requesting 1 recover session(s) from server.
    ./hosts
    Received 1 file(s) from NSR server `nw-win.esx.local'
    Recover completion time: Wed Feb  4 12:05:15 2015
    recover>

but when i load from rescue ISO....and write `rear -v recover`  
disk layout created  
Restore filesystem /etc /root /srv /lib /lib64 /lost+found
/sbin.....with networker and ...silence....  
from networker server via `nsrwatch` i see browsing session...and that's
all  
networker didn't recover any files ((( i didn't see dir /etc in
/mnt/local  
all logs represented  
any idea?

thanks

#### <img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50">[gdha](https://github.com/gdha) commented at [2015-02-04 15:45](https://github.com/rear/rear/issues/543#issuecomment-72877954):

So if I got it right NW is not fully functional in rear recovery mode,
right?  
We have seen other reports (issues \#411, \#429 and \#387) of NW 8.1
where something got broke. The initial integration was done with NW 8.0.
I suspected in the previous mentioned issues that with NW 8.1 some
additional library needs to be added in the prep phase, but as I have no
NW access myself I cannot help with this.  
What you can do is the following:

-   boot in recovery mode
-   try to recover something from `/etc/` into `/mnt/local/etc` and see
    what happens...

#### <img src="https://avatars.githubusercontent.com/u/10756657?v=4" width="50">[yunsr](https://github.com/yunsr) commented at [2015-02-04 16:10](https://github.com/rear/rear/issues/543#issuecomment-72882892):

yes,NW 8.1 is not fully functional in rear recovery mode.

booted in recovery mode  
directory /etc/ recovered into /mnt/local/etc succesfully via nw command
recover (recover browses the saved file index and recovers selected
files from the NetWorker system)

#### <img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50">[gdha](https://github.com/gdha) commented at [2015-02-04 16:18](https://github.com/rear/rear/issues/543#issuecomment-72884510):

@yunsr Ok, so when you are booted via ISO rear image you can do a
`recover` without any issues, do I get this right? When it fails with
`rear recover` could you check if the `/mnt/local` is still mounted?
Just want to double check this that you are not restoring in `/` of the
RAM image.

#### <img src="https://avatars.githubusercontent.com/u/10756657?v=4" width="50">[yunsr](https://github.com/yunsr) commented at [2015-02-04 16:25](https://github.com/rear/rear/issues/543#issuecomment-72886005):

yes, i can do a recover without any issues. I'll check second question
tomorrow

#### <img src="https://avatars.githubusercontent.com/u/10756657?v=4" width="50">[yunsr](https://github.com/yunsr) commented at [2015-02-05 08:16](https://github.com/rear/rear/issues/543#issuecomment-73009723):

make another attempt - recover via networker 8.1

/usr/sbin/rear -v mkrescue  
Relax-and-Recover 1.16.1 / Git  
Using log file: /var/log/rear/rear-linux-g7.log  
Creating disk layout  
Excluding Volume Group sap3  
Excluding Volume Group sap2  
Excluding Volume Group sap1  
Creating root filesystem layout  
EMC Networker will recover these filesystems: / /boot /home /oracle/sap1
/home/sap2 /export/sap3  
TIP: To login as root via ssh you need to set up
/root/.ssh/authorized\_keys or SSH\_ROOT\_PASSWORD in your configuration
file  
Copying files and directories  
Copying binaries and libraries  
Copying kernel modules  
Creating initramfs  
Making ISO image  
Wrote ISO image: /var/lib/rear/output/rear-linux-g7.iso (111M)  
Saving result files with NSR (EMC NetWorker)  
If the RETENTION\_TIME="1 day" is too low please add RETENTION\_TIME
variable in /etc/rear/local.conf

pool retent name
================

Default 03/04/15 /var/lib/rear/output/rear-linux-g7.iso

try to recover with rescue disk

![1-1](https://cloud.githubusercontent.com/assets/10756657/6056832/2e64a114-ad1f-11e4-8adc-7c88e4a2bcac.png)

didn't watch anything for about 10 min.  
from networker server watched only browsing session  
and then:

![1-2](https://cloud.githubusercontent.com/assets/10756657/6056870/aa5d05c2-ad1f-11e4-84e9-29306001e846.png)

/mnt/local still mounted

![1-3](https://cloud.githubusercontent.com/assets/10756657/6056887/ecbaf51e-ad1f-11e4-8e5e-41260541cd38.png)

tried to recover via nfs share...everything good. recovered succesfully

thanks

#### <img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50">[gdha](https://github.com/gdha) commented at [2015-02-05 08:44](https://github.com/rear/rear/issues/543#issuecomment-73012478):

could you find an error from nsr recover in the logs? Or on the nsr
server?  
There must be a reason for the failure...

On Thu, Feb 5, 2015 at 9:16 AM, yunsr <notifications@github.com> wrote:

> make another attempt - recover via networker 8.1
>
> /usr/sbin/rear -v mkrescue  
> Relax-and-Recover 1.16.1 / Git  
> Using log file: /var/log/rear/rear-linux-g7.log  
> Creating disk layout  
> Excluding Volume Group sap3  
> Excluding Volume Group sap2  
> Excluding Volume Group sap1  
> Creating root filesystem layout  
> EMC Networker will recover these filesystems: / /boot /home
> /oracle/sap1  
> /home/sap2 /export/sap3  
> TIP: To login as root via ssh you need to set up  
> /root/.ssh/authorized\_keys or SSH\_ROOT\_PASSWORD in your
> configuration file  
> Copying files and directories  
> Copying binaries and libraries  
> Copying kernel modules  
> Creating initramfs  
> Making ISO image  
> Wrote ISO image: /var/lib/rear/output/rear-linux-g7.iso (111M)  
> Saving result files with NSR (EMC NetWorker)  
> If the RETENTION\_TIME="1 day" is too low please add RETENTION\_TIME  
> variable in /etc/rear/local.conf  
> pool retent name
>
> Default 03/04/15 /var/lib/rear/output/rear-linux-g7.iso
>
> try to recover with rescue disk
>
> \[image: 1-1\]  
> [https://cloud.githubusercontent.com/assets/10756657/6056832/2e64a114-ad1f-11e4-8adc-7c88e4a2bcac.png](https://cloud.githubusercontent.com/assets/10756657/6056832/2e64a114-ad1f-11e4-8adc-7c88e4a2bcac.png)
>
> didn't watch anything for about 10 min.  
> from networker server watched only browsing session  
> and then:
>
> \[image: 1-2\]  
> [https://cloud.githubusercontent.com/assets/10756657/6056870/aa5d05c2-ad1f-11e4-84e9-29306001e846.png](https://cloud.githubusercontent.com/assets/10756657/6056870/aa5d05c2-ad1f-11e4-84e9-29306001e846.png)
>
> /mnt/local still mounted
>
> \[image: 1-3\]  
> [https://cloud.githubusercontent.com/assets/10756657/6056887/ecbaf51e-ad1f-11e4-8e5e-41260541cd38.png](https://cloud.githubusercontent.com/assets/10756657/6056887/ecbaf51e-ad1f-11e4-8e5e-41260541cd38.png)
>
> tried to recover via nfs share...everything good. recovered
> succesfully
>
> thanks
>
> —  
> Reply to this email directly or view it on GitHub  
> [https://github.com/rear/rear/issues/543\#issuecomment-73009723](https://github.com/rear/rear/issues/543#issuecomment-73009723).

#### <img src="https://avatars.githubusercontent.com/u/10756657?v=4" width="50">[yunsr](https://github.com/yunsr) commented at [2015-02-05 08:58](https://github.com/rear/rear/issues/543#issuecomment-73013926):

no errors  
![1-4](https://cloud.githubusercontent.com/assets/10756657/6057335/e1d826ca-ad25-11e4-84e3-f5ed94628c1a.png)

#### <img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50">[gdha](https://github.com/gdha) commented at [2015-06-26 14:29](https://github.com/rear/rear/issues/543#issuecomment-115708825):

@yunsr Hi - I've reviewed this case and NSR `recover` commands work with
rear rescue image, right?  
Therefore, NSR executables and libraries must be present in the rescue
image as no errors were seen at that time. The recover via NSR through
NSR is nothing more then a recover command of NSR, so I do not see many
difference, except it broke somehow.  
Is there a way to increase the verbosity within NSR so you could see
more stuff in the NSR logs (not rear logs as rear is not responsible for
the restore - except for making sure all NSR related bins are there).  
Or is it too late to make some more tests?

#### <img src="https://avatars.githubusercontent.com/u/10756657?v=4" width="50">[yunsr](https://github.com/yunsr) commented at [2015-06-30 07:21](https://github.com/rear/rear/issues/543#issuecomment-117033839):

Issue has been solved. It seems there were problems with incorrectly
configuring name resolution, nsr is very sensitive to this. thanks for
the help

------------------------------------------------------------------------

\[Export of Github issue for
[rear/rear](https://github.com/rear/rear).\]
