<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#2968 Issue closed: HP ProLiant XL420 Gen10: Recovery stuck at "Loading intial ramdisk" - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#2968 Issue closed: HP ProLiant XL420 Gen10: Recovery stuck at \"Loading intial ramdisk\"";
        var mkdocs_page_input_path = "issues/2023-04-05.2968.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_nas.html">Internal Backup with tar to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/rbme.html">External Backup using RBME</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/restic.html">External Backup using restic</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../development/squash-git-log-commments.html">How to squash git log comments into one line</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#2968 Issue closed: HP ProLiant XL420 Gen10: Recovery stuck at "Loading intial ramdisk"</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="2968_issue_closed_hp_proliant_xl420_gen10_recovery_stuck_at_loading_intial_ramdisk"><a href="https://github.com/rear/rear/issues/2968">#2968 Issue</a> <code>closed</code>: HP ProLiant XL420 Gen10: Recovery stuck at "Loading intial ramdisk"<a class="headerlink" href="#2968_issue_closed_hp_proliant_xl420_gen10_recovery_stuck_at_loading_intial_ramdisk" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>support / question</code>, <code>fixed / solved / done</code></p>
<h4 id="drakkainenn_opened_issue_at_2023-04-05_1028"><img src="https://avatars.githubusercontent.com/u/111309896?v=4" width="50"><a href="https://github.com/drakkainenn">drakkainenn</a> opened issue at <a href="https://github.com/rear/rear/issues/2968">2023-04-05 10:28</a>:<a class="headerlink" href="#drakkainenn_opened_issue_at_2023-04-05_1028" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>ReaR version ("/usr/sbin/rear -V"):<br />
    Relax-and-Recover 2.7-git.0.0.unknown / 2023-03-24</p>
</li>
<li>
<p>OS version ("cat /etc/os-release" or "lsb_release -a" or "cat
    /etc/rear/os.conf"):</p>
</li>
</ul>
<!-- -->

<pre><code>OS_VENDOR=RedHatEnterpriseServer
OS_VERSION=8.4
</code></pre>
<ul>
<li>ReaR configuration files ("cat /etc/rear/site.conf" and/or "cat
    /etc/rear/local.conf"):</li>
</ul>
<!-- -->

<pre><code>cat /etc/rear/site.conf
OUTPUT=ISO
BACKUP=CDM
TIMESYNC=NTP
ONLY_INCLUDE_VG=("vg_system")
GRUB_RESCUE=n
COPY_AS_IS_EXCLUDE=( "${COPY_AS_IS_EXCLUDE[@]}" "/dev/shm" "/dev/.udev" "/var/log/*" "/tmp/*" )

cat /etc/rear/local.conf
</code></pre>
<ul>
<li>
<p>Hardware vendor/product (PC or PowerNV BareMetal or ARM) or VM (KVM
    guest or PowerVM LPAR):<br />
    HP ProLiant XL420 Gen10</p>
</li>
<li>
<p>System architecture (x86 compatible or PPC64/PPC64LE or what exact
    ARM device):<br />
    x86_64</p>
</li>
<li>
<p>Firmware (BIOS or UEFI or Open Firmware) and bootloader (GRUB or
    ELILO or Petitboot):<br />
    UEFI, GRUB2</p>
</li>
<li>
<p>Storage (local disk or SSD) and/or SAN (FC or iSCSI or FCoE) and/or
    multipath (DM or NVMe):<br />
    Local disk</p>
</li>
<li>
<p>Storage layout ("lsblk -ipo
    NAME,KNAME,PKNAME,TRAN,TYPE,FSTYPE,LABEL,SIZE,MOUNTPOINT"):</p>
</li>
</ul>
<!-- -->

<pre><code>NAME                                   KNAME      PKNAME     TRAN TYPE FSTYPE      LABEL   SIZE MOUNTPOINT
/dev/sda                               /dev/sda              sas  disk                    10.9T
/dev/sdb                               /dev/sdb              sas  disk                    10.9T
/dev/sdc                               /dev/sdc              sas  disk                    10.9T
/dev/sdd                               /dev/sdd              sas  disk                    10.9T
/dev/sde                               /dev/sde              sas  disk                    10.9T
/dev/sdf                               /dev/sdf              sas  disk                    10.9T
/dev/sdg                               /dev/sdg              sas  disk                    10.9T
/dev/sdh                               /dev/sdh              sas  disk                    10.9T
/dev/sdi                               /dev/sdi              sas  disk                    10.9T
/dev/sdj                               /dev/sdj              sas  disk                    10.9T
/dev/sdk                               /dev/sdk              sas  disk                    10.9T
/dev/sdl                               /dev/sdl              sas  disk                    10.9T
/dev/sdm                               /dev/sdm              sas  disk                    10.9T
/dev/sdn                               /dev/sdn              sas  disk                    10.9T
/dev/sdo                               /dev/sdo              sas  disk                    10.9T
/dev/sdp                               /dev/sdp              sas  disk                    10.9T
/dev/sdq                               /dev/sdq              sas  disk                    10.9T
/dev/sdr                               /dev/sdr              sas  disk                    10.9T
/dev/sds                               /dev/sds              sas  disk                    10.9T
/dev/sdt                               /dev/sdt              sas  disk                    10.9T
/dev/sdu                               /dev/sdu              sas  disk                    10.9T
/dev/sdv                               /dev/sdv              sas  disk                    10.9T
/dev/sdw                               /dev/sdw              sas  disk                    10.9T
/dev/sdx                               /dev/sdx              sas  disk                    10.9T
/dev/sdy                               /dev/sdy              sas  disk                    10.9T
/dev/sdz                               /dev/sdz              sas  disk                    10.9T
/dev/sdaa                              /dev/sdaa             sas  disk                   447.1G
|-/dev/sdaa1                           /dev/sdaa1 /dev/sdaa       part vfat                512M /boot/efi
|-/dev/sdaa2                           /dev/sdaa2 /dev/sdaa       part xfs                   1G /boot
`-/dev/sdaa3                           /dev/sdaa3 /dev/sdaa       part LVM2_member       445.6G
  |-/dev/mapper/vg_system-lv_root      /dev/dm-0  /dev/sdaa3      lvm  xfs                  20G /
  |-/dev/mapper/vg_system-lv_swap      /dev/dm-1  /dev/sdaa3      lvm  swap                 20G [SWAP]
  |-/dev/mapper/vg_system-lv_tmp       /dev/dm-2  /dev/sdaa3      lvm  xfs                  40G /tmp
  |-/dev/mapper/vg_system-lv_var_log   /dev/dm-3  /dev/sdaa3      lvm  xfs                  10G /var/log
  |-/dev/mapper/vg_system-lv_var_crash /dev/dm-4  /dev/sdaa3      lvm  xfs                  10G /var/crash
  |-/dev/mapper/vg_system-lv_var       /dev/dm-5  /dev/sdaa3      lvm  xfs                  30G /var
  |-/dev/mapper/vg_system-lv_opt       /dev/dm-6  /dev/sdaa3      lvm  xfs                  40G /opt
  `-/dev/mapper/vg_system-lv_home      /dev/dm-7  /dev/sdaa3      lvm  xfs                  10G /home
</code></pre>
<ul>
<li>Description of the issue (ideally so that others can reproduce
    it):<br />
    Recovery stuck at Loading initial ramdisk.<br />
<img alt="rear" src="https://user-images.githubusercontent.com/111309896/230051580-fbbe6f38-3b13-4ac6-8836-5606ed16e879.png" /></li>
</ul>
<p>Using: FIRMWARE_FILES=( 'no' ) also not working.</p>
<ul>
<li>
<p>Workaround, if any:<br />
    No</p>
</li>
<li>
<p>Attachments, as applicable ("rear -D mkrescue/mkbackup/recover"
    debug log files):</p>
</li>
</ul>
<h4 id="jsmeix_commented_at_2023-04-05_1039"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2968#issuecomment-1497276627">2023-04-05 10:39</a>:<a class="headerlink" href="#jsmeix_commented_at_2023-04-05_1039" title="Permanent link">&para;</a></h4>
<p>@drakkainenn</p>
<p>only a guess:</p>
<p>Does it perhaps work for you with</p>
<pre><code>USE_SERIAL_CONSOLE='no'
</code></pre>
<p>in etc/rear/local.conf or in etc/rear/site.conf<br />
provided you do not use a serial console.</p>
<p>If you use a serial console specify the config variables</p>
<pre><code>USE_SERIAL_CONSOLE
SERIAL_CONSOLE_DEVICES
SERIAL_CONSOLE_DEVICES_KERNEL
SERIAL_CONSOLE_DEVICE_SYSLINUX
SERIAL_CONSOLE_DEVICE_GRUB
</code></pre>
<p>according to what you need in your particular case.</p>
<p>All config variables are described in<br />
usr/share/rear/conf/default.conf<br />
e.g. online for ReaR 2.7 at<br />
<a href="https://github.com/rear/rear/blob/rear-2.7/usr/share/rear/conf/default.conf">https://github.com/rear/rear/blob/rear-2.7/usr/share/rear/conf/default.conf</a></p>
<h4 id="drakkainenn_commented_at_2023-04-05_1333"><img src="https://avatars.githubusercontent.com/u/111309896?v=4" width="50"><a href="https://github.com/drakkainenn">drakkainenn</a> commented at <a href="https://github.com/rear/rear/issues/2968#issuecomment-1497495204">2023-04-05 13:33</a>:<a class="headerlink" href="#drakkainenn_commented_at_2023-04-05_1333" title="Permanent link">&para;</a></h4>
<p>Sorry for this question, but how to check if and which console am I
using ?<br />
It this correct ?</p>
<pre><code>USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT
root     tty1     -                13:24    4.00s  0.00s  0.00s -bash
</code></pre>
<p>So is my console tty1?</p>
<p>Moreover i enter "set debug=all" and I can see a long, long, long
loading something.</p>
<p><img alt="rear1" src="https://user-images.githubusercontent.com/111309896/230096025-fdd31158-852c-4644-9dd0-d993d2f88924.png" /></p>
<h4 id="jsmeix_commented_at_2023-04-06_0704"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2968#issuecomment-1498590464">2023-04-06 07:04</a>:<a class="headerlink" href="#jsmeix_commented_at_2023-04-06_0704" title="Permanent link">&para;</a></h4>
<p>I am talking about only the serial console.<br />
By default current ReaR automatically sets up serial console output<br />
by adding certain 'console=...' options to the kernel command line<br />
for booting the ReaR recovery system kernel.<br />
But when you do not have a serial console device connected,<br />
then all output may get falsely redirected to a serial port<br />
where no serial console device is connected<br />
so you may no longer get any output<br />
on your normal (i.e. non-serial) console, see<br />
<a href="https://github.com/rear/rear/issues/2843">https://github.com/rear/rear/issues/2843</a><br />
Usually your normal console is the VGA (video) console,<br />
e.g. for Linux kernel version 5.3 see<br />
<a href="https://www.kernel.org/doc/html/v5.3/admin-guide/serial-console.html">https://www.kernel.org/doc/html/v5.3/admin-guide/serial-console.html</a><br />
In the ReaR recovery system boot menue select<br />
the topmost enty of the form "Recover HOSTNAME" and<br />
press the [Tab] key to see the kernel command line<br />
which you can edit there as you need (e.g. remove or change<br />
possibly wrong 'console=...' kernel command line options), cf.<br />
<a href="https://github.com/rear/rear/issues/2843#issuecomment-1196337765">https://github.com/rear/rear/issues/2843#issuecomment-1196337765</a></p>
<p>With "set debug=all" you enable all GRUB2 debug messages.<br />
I did this only once some longer time ago and with that<br />
GRUB2 never finished for me in practice because it took<br />
way too long when GRUB2 outputs all debug messages.<br />
I waited for almost an hour with the same kind of<br />
endlessly appearing GRUB2 debug messages as in your<br />
<a href="https://user-images.githubusercontent.com/111309896/230096025-fdd31158-852c-4644-9dd0-d993d2f88924.png">https://user-images.githubusercontent.com/111309896/230096025-fdd31158-852c-4644-9dd0-d993d2f88924.png</a><br />
Perhaps it works better to enable only specific GRUB2 debug messages<br />
via <code>set debug=this,that</code> where 'this' and 'that' are specific<br />
GRUB2 tags for only certain debug output that should be enabled.<br />
I am not at all a GRUB2 expert so I can<br />
neither list what possible GRUB2 debug tags exist<br />
nor what GRUB2 debug tags are useful in practice<br />
(quick "googling" for it did not show me something useful).</p>
<h4 id="drakkainenn_commented_at_2023-04-06_0820"><img src="https://avatars.githubusercontent.com/u/111309896?v=4" width="50"><a href="https://github.com/drakkainenn">drakkainenn</a> commented at <a href="https://github.com/rear/rear/issues/2968#issuecomment-1498671482">2023-04-06 08:20</a>:<a class="headerlink" href="#drakkainenn_commented_at_2023-04-06_0820" title="Permanent link">&para;</a></h4>
<p>Thank you for your support.</p>
<p>After 10-20 minuites of waiting I finally have something new:</p>
<p><img alt="rear2" src="https://user-images.githubusercontent.com/111309896/230317847-239e2f15-4336-4bc3-be5b-ede7d15cdc1c.png" /></p>
<p>And that is all. Any idea what is wrong here ?</p>
<h4 id="jsmeix_commented_at_2023-04-06_0935"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2968#issuecomment-1498768473">2023-04-06 09:35</a>:<a class="headerlink" href="#jsmeix_commented_at_2023-04-06_0935" title="Permanent link">&para;</a></h4>
<p>No idea.</p>
<p>In particular not because I<br />
neither have your server hardware<br />
nor do I use your Linux distribution.</p>
<h4 id="drakkainenn_commented_at_2023-04-12_1157"><img src="https://avatars.githubusercontent.com/u/111309896?v=4" width="50"><a href="https://github.com/drakkainenn">drakkainenn</a> commented at <a href="https://github.com/rear/rear/issues/2968#issuecomment-1505142363">2023-04-12 11:57</a>:<a class="headerlink" href="#drakkainenn_commented_at_2023-04-12_1157" title="Permanent link">&para;</a></h4>
<p>Hi.<br />
I wasted week for troubleshooting it, using version 2.5,2.6 and 2.7.<br />
Finally - don't laugh - I was using mkbackup instead of mkrescue
command.<br />
Now I see recovery options.<br />
It failed now at<br />
<img alt="image" src="https://user-images.githubusercontent.com/111309896/231449874-e309d201-ecc8-44ff-8867-4de484bc43c6.png" /></p>
<p>So I need to check it and I will back to you.</p>
<h4 id="drakkainenn_commented_at_2023-04-13_1212"><img src="https://avatars.githubusercontent.com/u/111309896?v=4" width="50"><a href="https://github.com/drakkainenn">drakkainenn</a> commented at <a href="https://github.com/rear/rear/issues/2968#issuecomment-1506858741">2023-04-13 12:12</a>:<a class="headerlink" href="#drakkainenn_commented_at_2023-04-13_1212" title="Permanent link">&para;</a></h4>
<p>2.7 still not working as expected so Im working with 2.6 so far.</p>
<p>I don't know if I should create new issue or someone can check where but
I have problem with FS restore:</p>
<p><img alt="image" src="https://user-images.githubusercontent.com/111309896/231754289-4b474ea6-337a-4a6e-add2-7c6d5fd5e565.png" /></p>
<p>Somehow /var/log can't be recreate. Any idea what is wrong ? /var/crash
is almost the same but without any issue.</p>
<p>//Manually is working fine</p>
<p><img alt="image" src="https://user-images.githubusercontent.com/111309896/231758945-9b27d878-f495-488b-875c-3717c7e1ee27.png" /></p>
<h4 id="jsmeix_commented_at_2023-04-17_1007"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2968#issuecomment-1511061284">2023-04-17 10:07</a>:<a class="headerlink" href="#jsmeix_commented_at_2023-04-17_1007" title="Permanent link">&para;</a></h4>
<p>In ReaR 2.6<br />
layout/prepare/GNU/Linux/110_include_lvm_code.sh<br />
contains</p>
<pre><code>lvm lvcreate $lvopts $vg &lt;&lt;&lt;y
</code></pre>
<p>which only inputs a single 'y' into lvcreate<br />
that causes
<a href="https://github.com/rear/rear/issues/2820">https://github.com/rear/rear/issues/2820</a><br />
cf.
<a href="https://github.com/rear/rear/issues/2820#issuecomment-1153681719">https://github.com/rear/rear/issues/2820#issuecomment-1153681719</a><br />
and
<a href="https://github.com/rear/rear/issues/2820#issuecomment-1161942491">https://github.com/rear/rear/issues/2820#issuecomment-1161942491</a></p>
<p>Therefore in ReaR 2.7<br />
layout/prepare/GNU/Linux/110_include_lvm_code.sh<br />
contains a fix that is backward compatible with old 'lvcreate'<br />
cf.
<a href="https://github.com/rear/rear/issues/2820#issuecomment-1153750220">https://github.com/rear/rear/issues/2820#issuecomment-1153750220</a></p>
<pre><code>... ( yes 2&gt;/dev/null || true ) | lvm lvcreate ...
</code></pre>
<p>to pipe as many 'y' as asked for into "lvm lvcreate"<br />
cf.
<a href="https://github.com/rear/rear/pull/2827">https://github.com/rear/rear/pull/2827</a></p>
<p>The current ReaR upstream master code<br />
it is no longer backward compatible with old 'lvcreate'<br />
and contains now</p>
<pre><code>... lvm lvcreate -y ...
</code></pre>
<p>cf.
<a href="https://github.com/rear/rear/pull/2839">https://github.com/rear/rear/pull/2839</a></p>
<h4 id="drakkainenn_commented_at_2023-04-17_1226"><img src="https://avatars.githubusercontent.com/u/111309896?v=4" width="50"><a href="https://github.com/drakkainenn">drakkainenn</a> commented at <a href="https://github.com/rear/rear/issues/2968#issuecomment-1511244401">2023-04-17 12:26</a>:<a class="headerlink" href="#drakkainenn_commented_at_2023-04-17_1226" title="Permanent link">&para;</a></h4>
<p>2.6 is working fine, I am able to restore system,<br />
Unfortunately due to some issue or I don't know what 2.7 is not working
at all.</p>
<p>2.6:<br />
<img alt="image" src="https://user-images.githubusercontent.com/111309896/232483289-b079b582-1572-4ae3-9ffd-10bd3081f357.png" /></p>
<p>2.7:<br />
<img alt="image" src="https://user-images.githubusercontent.com/111309896/232483399-c48af048-047a-4287-bc22-96836e8458fc.png" /></p>
<p>I don't know what has been changed 2.6 vs 2.7 but I as you can see on
screenshot I cannot boot rear menu.</p>
<h4 id="drakkainenn_commented_at_2023-04-19_1059"><img src="https://avatars.githubusercontent.com/u/111309896?v=4" width="50"><a href="https://github.com/drakkainenn">drakkainenn</a> commented at <a href="https://github.com/rear/rear/issues/2968#issuecomment-1514535513">2023-04-19 10:59</a>:<a class="headerlink" href="#drakkainenn_commented_at_2023-04-19_1059" title="Permanent link">&para;</a></h4>
<p>grub menu 2.6 vs 2.7</p>
<p><img alt="image" src="https://user-images.githubusercontent.com/111309896/233054415-606f0384-dedf-4e19-befc-fdbbdd098615.png" /></p>
<p>Even if I add console=tty0 to 2.7 iso image still not working.</p>
<p>Something changed in 2.7 and I cannot boot rear to recovery menu</p>
<h4 id="jsmeix_commented_at_2023-04-20_0938"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2968#issuecomment-1516025001">2023-04-20 09:38</a>:<a class="headerlink" href="#jsmeix_commented_at_2023-04-20_0938" title="Permanent link">&para;</a></h4>
<p>From what I see in the screenshots in your<br />
<a href="https://github.com/rear/rear/issues/2968#issuecomment-1514535513">https://github.com/rear/rear/issues/2968#issuecomment-1514535513</a><br />
it looks very much like the 'console=...' kernel options issue<br />
that we have since ReaR 2.7 - see<br />
<a href="https://github.com/rear/rear/issues/2843">https://github.com/rear/rear/issues/2843</a></p>
<p>See my above initial comment<br />
<a href="https://github.com/rear/rear/issues/2968#issuecomment-1497276627">https://github.com/rear/rear/issues/2968#issuecomment-1497276627</a><br />
and see the related issue<br />
<a href="https://github.com/rear/rear/issues/2843">https://github.com/rear/rear/issues/2843</a><br />
that I mentioned in my above<br />
<a href="https://github.com/rear/rear/issues/2968#issuecomment-1498590464">https://github.com/rear/rear/issues/2968#issuecomment-1498590464</a><br />
in that issue in particular see<br />
<a href="https://github.com/rear/rear/issues/2843#issuecomment-1196337765">https://github.com/rear/rear/issues/2843#issuecomment-1196337765</a></p>
<p>I.e. if you inserted 'console=tty0' before 'console=ttyS...'<br />
only the kernel startup messages may get shown<br />
but not the ReaR recovery system messages.<br />
So you need to append 'console=tty0' at the end<br />
as the last kernel option to make the kernel command line<br />
look same in ReaR 2.7 as it looks in ReaR 2.6.</p>
<p>When you do not have a serial console it is usually<br />
best to not specify any 'console=...' kernel option,<br />
i.e. when you do not have a serial console it usually<br />
"just works" to rely on the kernel default behaviour.</p>
<p>Did you actually try out how ReaR 2.7 behaves with</p>
<pre><code>USE_SERIAL_CONSOLE='no'
</code></pre>
<p>in etc/rear/local.conf or in etc/rear/site.conf ?</p>
<p>You should try it out on a separated test machine.<br />
The worst thing that I can imagine what could go wrong<br />
is that you will see nothing at all on your screen<br />
when the ReaR recovery system boots and runs.<br />
In this case you would have to shut down the system blindly,<br />
probably you may have to power off the machine without a<br />
clean shutdown which should not matter on a test machine.</p>
<h4 id="drakkainenn_commented_at_2023-04-24_1415"><img src="https://avatars.githubusercontent.com/u/111309896?v=4" width="50"><a href="https://github.com/drakkainenn">drakkainenn</a> commented at <a href="https://github.com/rear/rear/issues/2968#issuecomment-1520243778">2023-04-24 14:15</a>:<a class="headerlink" href="#drakkainenn_commented_at_2023-04-24_1415" title="Permanent link">&para;</a></h4>
<p>Finally I found what what wrong :)</p>
<p>My colleague prepared rpm packages from source files and I had an issue
with this rpm.</p>
<p>Today I just typed "make install" from source and everything is fine!</p>
<p>So something is not correct with make rpm then or our environment which
we used for building rpm package.</p>
<p>Finally:<br />
"make install" -&gt; working. I am able to start recovery process<br />
"make rpm" -&gt; rpm is not working properly. All looks fine but
recovery process is not loading.</p>
<p>Next step:<br />
Check why "make rpm" is creating damaged rpm</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2025 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2023-04-05.2968.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
