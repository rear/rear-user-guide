<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#1492 Issue closed: Unable to determine raw USB device - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#1492 Issue closed: Unable to determine raw USB device";
        var mkdocs_page_input_path = "issues/2017-09-13.1492.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#1492 Issue closed: Unable to determine raw USB device</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="1492_issue_closed_unable_to_determine_raw_usb_device"><a href="https://github.com/rear/rear/issues/1492">#1492 Issue</a> <code>closed</code>: Unable to determine raw USB device<a class="headerlink" href="#1492_issue_closed_unable_to_determine_raw_usb_device" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>support / question</code>, <code>fixed / solved / done</code></p>
<h4 id="loyeyoung_opened_issue_at_2017-09-13_1806"><img src="https://avatars.githubusercontent.com/u/19331993?v=4" width="50"><a href="https://github.com/loyeyoung">loyeyoung</a> opened issue at <a href="https://github.com/rear/rear/issues/1492">2017-09-13 18:06</a>:<a class="headerlink" href="#loyeyoung_opened_issue_at_2017-09-13_1806" title="Permanent link">&para;</a></h4>
<p>BUG in <code>/usr/share/rear/prep/USB/Linux-i386/350_check_usb_disk.sh</code> line
30:<br />
'Unable to determine raw USB device for /dev/dm-8'</p>
<ul>
<li>rear version (/usr/sbin/rear -V):</li>
</ul>
<!-- -->

<pre><code>#==============================================================
Relax-and-Recover 2.2 / 2017-07-20
# dnf info rear
Installed Packages
Name         : rear
Version      : 2.2
Release      : 1.fc26
Arch         : x86_64
Size         : 1.3 M
Source       : rear-2.2-1.fc26.src.rpm
Repo         : @System
From repo    : updates
</code></pre>
<ul>
<li>OS version (cat /etc/rear/os.conf or lsb_release -a):</li>
</ul>
<!-- -->

<pre><code>#==============================================================
# lsb_release -a
LSB Version:    :core-4.1-amd64:core-4.1-noarch:cxx-4.1-amd64:cxx-4.1-noarch:desktop-4.1-amd64:desktop-4.1-noarch:languages-4.1-amd64:languages-4.1-noarch:printing-4.1-amd64:printing-4.1-noarch
Distributor ID: Fedora
Description:    Fedora release 26 (Twenty Six)
Release:    26
Codename:   TwentySix
</code></pre>
<ul>
<li>rear configuration files (cat /etc/rear/site.conf or cat
    /etc/rear/local.conf):</li>
</ul>
<!-- -->

<pre><code>#==============================================================
# for thing in $(ls /etc/rear/*.conf) ; do echo ============== ${thing} ============ ; cat ${thing} ; done
============== /etc/rear/local.conf ============
OUTPUT=USB
TMPDIR=/var/tmp
BACKUP=NETFS
BACKUP_URL=usb:///dev/disk/by-label/REAR-001
BACKUP_MOUNTCMD="mount -L REAR-001"
BACKUP_UMOUNTCMD="umount"
BACKUP_PROG=tar
BACKUP_PROG_ARCHIVE=backup
BACKUP_PROG_COMPRESS_OPTIONS=--use-compress-program="xz -9"
BACKUP_PROG_COMPRESS_SUFFIX=.xz
BACKUP_PROG_CRYPT_ENABLED=0
BACKUP_PROG_CRYPT_KEY=
BACKUP_PROG_CRYPT_OPTIONS=/usr/bin/openssl des3 -salt -k 
BACKUP_PROG_DECRYPT_OPTIONS=/usr/bin/openssl des3 -d -k 
BACKUP_PROG_EXCLUDE=( '/tmp/*' '/dev/shm/*' "$VAR_DIR/output/*" '/var/vm' )
BACKUP_PROG_OPTIONS=--anchored 
BACKUP_PROG_OPTIONS_CREATE_ARCHIVE=
BACKUP_PROG_OPTIONS_RESTORE_ARCHIVE=
BACKUP_PROG_SUFFIX=.tar
BACKUP_PROG_WARN_PARTIAL_TRANSFER=1
============== /etc/rear/os.conf ============
OS_VENDOR=Fedora
OS_VERSION=26
============== /etc/rear/rescue-disk.conf ============
OUTPUT=ISO
OUTPUT_URL=file:///rear/
TMPDIR=/var/tmp
BACKUP=NETFS
BACKUP_URL=usb:///dev/disk/by-label/REAR-001
BACKUP_MOUNTCMD="mount -L REAR-001"
BACKUP_UMOUNTCMD="umount"
BACKUP_PROG=tar
BACKUP_PROG_ARCHIVE=backup
BACKUP_PROG_COMPRESS_OPTIONS=--use-compress-program="xz -9"
BACKUP_PROG_COMPRESS_SUFFIX=.xz
BACKUP_PROG_CRYPT_ENABLED=0
BACKUP_PROG_CRYPT_KEY=
BACKUP_PROG_CRYPT_OPTIONS=/usr/bin/openssl des3 -salt -k 
BACKUP_PROG_DECRYPT_OPTIONS=/usr/bin/openssl des3 -d -k 
BACKUP_PROG_EXCLUDE=( '/tmp/*' '/dev/shm/*' "$VAR_DIR/output/*" '/var/vm' )
BACKUP_PROG_OPTIONS=--anchored 
BACKUP_PROG_OPTIONS_CREATE_ARCHIVE=
BACKUP_PROG_OPTIONS_RESTORE_ARCHIVE=
BACKUP_PROG_SUFFIX=.tar
BACKUP_PROG_WARN_PARTIAL_TRANSFER=1
============= END ====================
</code></pre>
<ul>
<li>
<p>Are you using legacy BIOS or UEFI boot?<br />
<strong>Legacy</strong></p>
</li>
<li>
<p>Brief description of the issue:<br />
<strong>Relax-and-Recover fails when run from either of the following cron
    jobs:</strong></p>
</li>
</ul>
<!-- -->

<pre><code>#==============================================================
# Check for changes in file system and make a rescue disk if necessary
30 1 * * *  /usr/bin/mount /dev/disk/by-label/REAR-000 ; /usr/sbin/rear checklayout || /usr/sbin/rear mkrescue ; /usr/bin/mv -f /var/lib/rear/output/rear-aquinas.iso /mnt/rear/ ; /usr/bin/umount /mnt/rear

# Make a full backup on Sunday during Mass
30 10 * * sun /usr/bin/mount /dev/disk/by-label/REAR-001 ; /usr/bin/rear -v mkbackup ; /usr/sbin/poweroff
</code></pre>
<p><strong>Result: No backup created.</strong><br />
I am including details from daily cronjob (i.e., <code>30 1 * * *</code>).<br />
<strong>Error message is:</strong></p>
<pre><code>#==============================================================
ERROR: 
====================
BUG in /usr/share/rear/prep/USB/Linux-i386/350_check_usb_disk.sh line 30:
'Unable to determine raw USB device for /dev/dm-8'
--------------------
Please report this issue at https://github.com/rear/rear/issues
and include the relevant parts from /var/log/rear/rear-aquinas.log
preferably with full debug information via 'rear -d -D mkrescue'
====================
Aborting due to an error, check /var/log/rear/rear-aquinas.log for details
/usr/bin/bash: line 1: 15939 Terminated              /usr/sbin/rear mkrescue
</code></pre>
<p><strong>Device mapping:</strong><br />
<code>/dev/disk/by-label/REAR-001  -&gt; ../../dm-8</code></p>
<p><strong>Error log at
<a href="url">https://gist.github.com/loyeyoung/da9ec52fdb4fa07622f0ee173d0dcc4a</a>.
It was generated when trying to run cron job from command line, which
had the same result.</strong></p>
<ul>
<li>Work-around, if any:<br />
<strong>Unknown</strong></li>
</ul>
<h4 id="gozora_commented_at_2017-10-15_0842"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1492#issuecomment-336695618">2017-10-15 08:42</a>:<a class="headerlink" href="#gozora_commented_at_2017-10-15_0842" title="Permanent link">&para;</a></h4>
<p>I'm affraid REAR-001 is not a valid label to work with.<br />
<code>rear format</code> workflow, which is mandatory for USB backup, labels disk
REAR-000 which is hardcoded. I guess your problem originates here.</p>
<p>I can see you are trying to use to use ReaR in more advance way then
usual. If you need to use multiple disks for backup, it could be helpful
to check <a href="https://github.com/rear/rear/blob/master/doc/user-guide/11-multiple-backups.adoc#using-multiple-backups-for-relax-and-recover">Using Multiple Backups for
Relax-and-Recover</a></p>
<p>V.</p>
<h4 id="jsmeix_commented_at_2017-10-16_1018"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1492#issuecomment-336844119">2017-10-16 10:18</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-10-16_1018" title="Permanent link">&para;</a></h4>
<p>@gozora<br />
many thanks that you spotted the 'REAR-001'.<br />
I overlooked it and had no idea what went wrong...</p>
<p>@loyeyoung<br />
the 'REAR-000' is hardcoded used at many places in the code, cf.<br />
<a href="https://github.com/rear/rear/issues/1520#issuecomment-333142799">https://github.com/rear/rear/issues/1520#issuecomment-333142799</a></p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2024 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2017-09-13.1492.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
