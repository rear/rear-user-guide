<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>2013 06 28.264.issue.closed - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "2013 06 28.264.issue.closed";
        var mkdocs_page_input_path = "issues/2013-06-28.264.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/rust.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', '366986045', 'auto');
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
      <li>2013 06 28.264.issue.closed</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="264_issue_closed_iso_creation_after_the_backup_archive"><a href="https://github.com/rear/rear/issues/264">#264 Issue</a> <code>closed</code>: ISO Creation after the backup archive ?<a class="headerlink" href="#264_issue_closed_iso_creation_after_the_backup_archive" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code></p>
<h4 id="florent38_opened_issue_at_2013-06-28_1256"><img src="https://avatars.githubusercontent.com/u/2429198?v=4" width="50"><a href="https://github.com/Florent38">Florent38</a> opened issue at <a href="https://github.com/rear/rear/issues/264">2013-06-28 12:56</a>:<a class="headerlink" href="#florent38_opened_issue_at_2013-06-28_1256" title="Permanent link">&para;</a></h4>
<p>Hi,</p>
<p>I'm investigating DVD backup and I think rear architecture is not
suitable for this because the backup archive are made after the ISO. Why
not switch the workflow like this :</p>
<p><code>SourceStage "prep"<br />
SourceStage "layout/save"<br />
SourceStage "rescue"<br />
SourceStage "build"<br />
SourceStage "pack"<br />
SourceStage "backup"<br />
SourceStage "output"</code></p>
<p>instead of :</p>
<p><code>SourceStage "prep"<br />
SourceStage "layout/save"<br />
SourceStage "rescue"<br />
SourceStage "build"<br />
SourceStage "pack"<br />
SourceStage "output"<br />
SourceStage "backup" </code></p>
<h4 id="jhoekx_commented_at_2013-06-28_1327"><img src="https://avatars.githubusercontent.com/u/783473?v=4" width="50"><a href="https://github.com/jhoekx">jhoekx</a> commented at <a href="https://github.com/rear/rear/issues/264#issuecomment-20187794">2013-06-28 13:27</a>:<a class="headerlink" href="#jhoekx_commented_at_2013-06-28_1327" title="Permanent link">&para;</a></h4>
<p>This is necessary because of the OBDR workflow.</p>
<p>You could add a check for that workflow and keep the current stage
ordering for that one. I believe there are quite a few scripts that
depend on the order (but maybe not :-).</p>
<h4 id="dagwieers_commented_at_2013-06-28_2343"><img src="https://avatars.githubusercontent.com/u/388198?u=0732dee3fe5002278cfbf40359ec431bdcf5f06c&v=4" width="50"><a href="https://github.com/dagwieers">dagwieers</a> commented at <a href="https://github.com/rear/rear/issues/264#issuecomment-20220287">2013-06-28 23:43</a>:<a class="headerlink" href="#dagwieers_commented_at_2013-06-28_2343" title="Permanent link">&para;</a></h4>
<p>The OBDR workflow (One-Button-Disaster-Recovery) is a tape-based
recovery image solution. The tape drive emulates a bootable CDROM device
and with a properly devised tape (which consists of an ISO image,
followed by a tar backup) one can restore the complete system with a
single tape using a single-button procedure to make the system boot from
this tape.</p>
<p>That is why we need the ISO on disk (and on tape) before we can write
the backup to tape !</p>
<h4 id="jhoekx_commented_at_2013-06-29_0822"><img src="https://avatars.githubusercontent.com/u/783473?v=4" width="50"><a href="https://github.com/jhoekx">jhoekx</a> commented at <a href="https://github.com/rear/rear/issues/264#issuecomment-20226386">2013-06-29 08:22</a>:<a class="headerlink" href="#jhoekx_commented_at_2013-06-29_0822" title="Permanent link">&para;</a></h4>
<p>Just some more thoughts about DVDs with backup on them since I'm not
convinced that moving the stages is necessary: If you want a complete
backup on DVD, you need to create the backup and need space for that.
Then you need to create the iso, so you need 3 times the space.</p>
<p>A good solution (and the one used by MondoRescue) is to create a small
iso image with the rescue system and then create multiple smaller sized
images. That does not need changing the order.</p>
<h4 id="dagwieers_commented_at_2013-06-29_0827"><img src="https://avatars.githubusercontent.com/u/388198?u=0732dee3fe5002278cfbf40359ec431bdcf5f06c&v=4" width="50"><a href="https://github.com/dagwieers">dagwieers</a> commented at <a href="https://github.com/rear/rear/issues/264#issuecomment-20226438">2013-06-29 08:27</a>:<a class="headerlink" href="#dagwieers_commented_at_2013-06-29_0827" title="Permanent link">&para;</a></h4>
<p>@jhoekx I think it is possible to add <em>pathspec</em> (see manual) to the
command line where you basically say <em>this directory in my ISO image
should be that directory on disk located here</em>. IIRC this avoids the
second copy.</p>
<h4 id="florent38_commented_at_2013-07-01_0858"><img src="https://avatars.githubusercontent.com/u/2429198?v=4" width="50"><a href="https://github.com/Florent38">Florent38</a> commented at <a href="https://github.com/rear/rear/issues/264#issuecomment-20270162">2013-07-01 08:58</a>:<a class="headerlink" href="#florent38_commented_at_2013-07-01_0858" title="Permanent link">&para;</a></h4>
<p>I don't know pathspec option but sounds interesting.<br />
IMO a small ISO with the rescue system and multiple ISO for the backup
is not a good solution (too many CD/DVD).</p>
<p>There is 3 options :</p>
<ol>
<li>minimal ISO + multiple ISO for the backup</li>
<li>Change the stage order (only for ISO and DVD output) and create one
    or multiple ISO</li>
<li>create minimal ISO and the backup archive, then extract the ISO and
    create one or multiple ISO with the bakcup archive. With this
    solution, we don't change the stage order and we can add an option
    like BACKUP_IN_ISO.</li>
</ol>
<p>What do you think about this ?</p>
<h4 id="dagwieers_commented_at_2013-07-01_1028"><img src="https://avatars.githubusercontent.com/u/388198?u=0732dee3fe5002278cfbf40359ec431bdcf5f06c&v=4" width="50"><a href="https://github.com/dagwieers">dagwieers</a> commented at <a href="https://github.com/rear/rear/issues/264#issuecomment-20273965">2013-07-01 10:28</a>:<a class="headerlink" href="#dagwieers_commented_at_2013-07-01_1028" title="Permanent link">&para;</a></h4>
<p>@Florent38 I think option 2 makes the most sense. By default, create the
ISO and then make the backup, except if the backup is needed inside the
ISO. In this case make it part of the creation of the ISO. The downside
of making it part of the ISO as-is, is that it is not compressed, the
advantage of this is that the files are accessible without effort.</p>
<p>BTW <em>pathspec</em> is not an option, these are the arguments to mkisofs;
e.g.</p>
<pre><code>genisoimage [options] [-o filename] backup/etc=/etc backup/usr=/usr backup/var=/var
</code></pre>
<h4 id="schlomo_commented_at_2013-07-01_1102"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/264#issuecomment-20275187">2013-07-01 11:02</a>:<a class="headerlink" href="#schlomo_commented_at_2013-07-01_1102" title="Permanent link">&para;</a></h4>
<p>I would like to better understand the backup-on-DVD scenario: Do we
talk<br />
about creating an ISO image or do we talk about writing to a DVD writer?
In<br />
the latter case I could imagine using multi-session to solve the
problem:<br />
1st session contains the boot ISO and 2nd session the backup data.
While<br />
booting only the 1st session is seen but later when mounting only the
2nd<br />
session counts.</p>
<p>BTW, do we already create Hybrid ISOs which can be dd'ed onto a USB
drive?</p>
<p>Another thought: Most modern DVD writers also handle DVD-RAM which can
be<br />
used as a block device and which might work with the backup-to-USB
code...</p>
<p>On 1 July 2013 12:28, Dag Wieers <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;">&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a> wrote:</p>
<blockquote>
<p>@Florent38
<a href="https://github.com/Florent38">https://github.com/Florent38</a> I think
option 2 makes the most<br />
sense. By default, create the ISO and then make the backup, except if
the<br />
backup is needed inside the ISO. In this case make it part of the
creation<br />
of the ISO. The downside of making it part of the ISO as-is, is that
it is<br />
not compressed, the advantage of this is that the files are
accessible<br />
without effort.</p>
<p>BTW <em>pathspec</em> is not an option, these are the arguments to mkisofs;
e.g.</p>
<p>genisoimage [options] [-o filename] backup/etc=/etc
backup/usr=/usr backup/var=/var</p>
<p>—<br />
Reply to this email directly or view it on
GitHubhttps://github.com/rear/rear/issues/264#issuecomment-20273965<br />
.</p>
</blockquote>
<h4 id="florent38_commented_at_2013-07-02_0737"><img src="https://avatars.githubusercontent.com/u/2429198?v=4" width="50"><a href="https://github.com/Florent38">Florent38</a> commented at <a href="https://github.com/rear/rear/issues/264#issuecomment-20330986">2013-07-02 07:37</a>:<a class="headerlink" href="#florent38_commented_at_2013-07-02_0737" title="Permanent link">&para;</a></h4>
<p>@dagwieers I'm agree with you for the option 2 but after the message of
@schlomo, i think we can do better ;)</p>
<p>@schlomo We talk about writing to a CD/DVD. IMO, the use of
multi-session CD/DVD is a good solution to solve the problem, we don't
have to change the stage order just burn the first ISO, and create/burn
next ISOs (and split the backup if necessary)</p>
<h4 id="schlomo_commented_at_2013-07-02_0803"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/264#issuecomment-20332057">2013-07-02 08:03</a>:<a class="headerlink" href="#schlomo_commented_at_2013-07-02_0803" title="Permanent link">&para;</a></h4>
<p>@Florent38 thanks. I would find that a cool way, though I would advice
some tests with your hardware. What I wrote is based on tests I did some
10 years ago...</p>
<p>Do you think that the OUTPUT=ISO should also support writing to a device
instead of an ISO image? Or should we create a new OUTPUT=DVD that maybe
includes some stuff from OUTPUT=ISO?</p>
<h4 id="schlomo_commented_at_2013-07-02_804"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/264#issuecomment-20332096">2013-07-02 08:03</a>:<a class="headerlink" href="#schlomo_commented_at_2013-07-02_804" title="Permanent link">&para;</a></h4>
<p>What I mean is that I could imagine that the use case "backup data on
disc" would be only supported when writing to the disc directly and not
to an ISO image... (Though I don't know if one could test that in a VM)</p>
<h4 id="schlomo_commented_at_2013-07-02_0805"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/264#issuecomment-20332128">2013-07-02 08:05</a>:<a class="headerlink" href="#schlomo_commented_at_2013-07-02_0805" title="Permanent link">&para;</a></h4>
<p><a href="https://www.virtualbox.org/ticket/3266">https://www.virtualbox.org/ticket/3266</a>
was the only thing I could find in a quick search. IIRC there are some
virtual DVD recorder solutions for Windows...</p>
<h4 id="florent38_commented_at_2013-07-02_0816"><img src="https://avatars.githubusercontent.com/u/2429198?v=4" width="50"><a href="https://github.com/Florent38">Florent38</a> commented at <a href="https://github.com/rear/rear/issues/264#issuecomment-20332546">2013-07-02 08:16</a>:<a class="headerlink" href="#florent38_commented_at_2013-07-02_0816" title="Permanent link">&para;</a></h4>
<p>We should create a new output (like OUTPUT=DVD) to be more consistent
with other ReaR output like USB.<br />
I can test multi-session CD/DVD on physical server.</p>
<h4 id="florent38_commented_at_2013-07-03_0905"><img src="https://avatars.githubusercontent.com/u/2429198?v=4" width="50"><a href="https://github.com/Florent38">Florent38</a> commented at <a href="https://github.com/rear/rear/issues/264#issuecomment-20403581">2013-07-03 09:05</a>:<a class="headerlink" href="#florent38_commented_at_2013-07-03_0905" title="Permanent link">&para;</a></h4>
<p>After a meeting with our manager, it was decided that only the backup
into the ISO is needed. The user have to burn ISO himself. So i think an
option like BACKUP_IN_ISO is a good way to implement this.</p>
<p>Algo :</p>
<pre><code>SourceStage "prep"
SourceStage "layout/save"
SourceStage "rescue"
SourceStage "build"
SourceStage "pack"
if [[ "$OUTPUT" = "ISO" &amp;&amp; "BACKUP_IN_ISO" =~ ^[yY1] ]]; then 
    SourceStage "backup"
    SourceStage "output"
else
    SourceStage "output"
    SourceStage "backup"
fi
</code></pre>
<p>What do you think about this ?</p>
<h4 id="schlomo_commented_at_2013-07-03_1017"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/264#issuecomment-20406698">2013-07-03 10:17</a>:<a class="headerlink" href="#schlomo_commented_at_2013-07-03_1017" title="Permanent link">&para;</a></h4>
<p>Why not try to <em>append</em> the backup file(s) with
<code>growisofs -M rear.iso &lt;further genisoimage options&gt;</code> (Assuming that
multisession booting works)? That way we could keep the stage order and
now bother with script dependency troubles.</p>
<p>Sadly the genisoimage -stream-media-size and -stream-file-name options
don't work with multisession, otherwise this would be even simpler and
cooler. And this also does not allow to add more files next to the tar
archive...</p>
<h4 id="dagwieers_commented_at_2013-07-03_1034"><img src="https://avatars.githubusercontent.com/u/388198?u=0732dee3fe5002278cfbf40359ec431bdcf5f06c&v=4" width="50"><a href="https://github.com/dagwieers">dagwieers</a> commented at <a href="https://github.com/rear/rear/issues/264#issuecomment-20407346">2013-07-03 10:34</a>:<a class="headerlink" href="#dagwieers_commented_at_2013-07-03_1034" title="Permanent link">&para;</a></h4>
<p>@Florent38 What I would do is use something like
BACKUP_URL="iso://path/to/backup" rather than have a new variable
BACKUP_IN_ISO. The reason is that introducing new options that might
be mutual exclusive with other options is hard to overcome and can lead
to strange bugreports. Whereas BACKUP_URL can only be set once.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2022 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2013-06-28.264.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
