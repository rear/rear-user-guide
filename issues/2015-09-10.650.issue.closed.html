<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#650 Issue closed: SELinux: missing /.autorelabel in RHEL 7.1 - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#650 Issue closed: SELinux: missing /.autorelabel in RHEL 7.1";
        var mkdocs_page_input_path = "issues/2015-09-10.650.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_nas.html">Internal Backup with tar to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../scenarios/netfs_rsync.md">Internal Backup with rsync to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/rbme.html">External Backup using RBME</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/restic.html">External Backup using restic</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../development/squash-git-log-commments.html">How to squash git log comments into one line</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#650 Issue closed: SELinux: missing /.autorelabel in RHEL 7.1</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="650_issue_closed_selinux_missing_autorelabel_in_rhel_71"><a href="https://github.com/rear/rear/issues/650">#650 Issue</a> <code>closed</code>: SELinux: missing /.autorelabel in RHEL 7.1<a class="headerlink" href="#650_issue_closed_selinux_missing_autorelabel_in_rhel_71" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>bug</code>, <code>fixed / solved / done</code></p>
<h4 id="v1p3r0u5_opened_issue_at_2015-09-10_1340"><img src="https://avatars.githubusercontent.com/u/14215019?u=b7117bec583a11146fc69cb113567b1d5ee02f8b&v=4" width="50"><a href="https://github.com/v1p3r0u5">v1p3r0u5</a> opened issue at <a href="https://github.com/rear/rear/issues/650">2015-09-10 13:40</a>:<a class="headerlink" href="#v1p3r0u5_opened_issue_at_2015-09-10_1340" title="Permanent link">&para;</a></h4>
<h5 id="information">Information:<a class="headerlink" href="#information" title="Permanent link">&para;</a></h5>
<p>Rear-Version: 1.17.2<br />
OS: RHEL 7.1 latest<br />
SELinux: targeted/enforcing<br />
Backup-System: TSM</p>
<h5 id="problem">Problem:<a class="headerlink" href="#problem" title="Permanent link">&para;</a></h5>
<p>Login after restore is not possible. Error: /bin/bash =&gt; Permission
denied.<br />
It seems, that no /.autorelabel will be created after restore-process.
If I afterwards create the file by myself (rd.break), everything is
working fine. Same problem exists also when I use
BCKUP_SELINUX_DISABLE=0 in site.conf.</p>
<h5 id="output_of_sealert">Output of sealert:<a class="headerlink" href="#output_of_sealert" title="Permanent link">&para;</a></h5>
<pre><code># sealert -a /var/log/audit/audit.log
Additional Information:
Source Context                system_u:system_r:kernel_t:s0
Target Context                unconfined_u:unconfined_r:unconfined_t:s0
Target Objects                Unknown [ process ]
Source                        sshd
Source Path                   /usr/sbin/sshd
Port                          &lt;Unknown&gt;
Host                          &lt;Unknown&gt;
Source RPM Packages           openssh-server-6.6.1p1-12.el7_1.x86_64
Target RPM Packages           
Policy RPM                    selinux-policy-3.13.1-23.el7_1.13.noarch
Selinux Enabled               True
Policy Type                   targeted
Enforcing Mode                Enforcing
Host Name                     xyz.ch
Platform                      Linux xyz.ch
                              3.10.0-229.11.1.el7.x86_64 #1 SMP Wed Jul 22
                              12:06:11 EDT 2015 x86_64 x86_64
Alert Count                   1
First Seen                    2015-09-10 10:48:18 CEST
Last Seen                     2015-09-10 10:48:18 CEST
Local ID                      2c253544-4278-4cb6-b222-5d10b61d155d

Raw Audit Messages
type=AVC msg=audit(1441874898.668:134): avc:  denied  { dyntransition } for  pid=1963 comm="sshd" scontext=system_u:system_r:kernel_t:s0 tcontext=unconfined_u:unconfined_r:unconfined_t:s0 tclass=process


type=SYSCALL msg=audit(1441874898.668:134): arch=x86_64 syscall=write success=no exit=EACCES a0=6 a1=7f8b22a956e0 a2=2a a3=666e6f636e753a72 items=0 ppid=1775 pid=1963 auid=7536 uid=7536 gid=100 euid=7536 suid=7536 fsuid=7536 egid=100 sgid=100 fsgid=100 tty=(none) ses=1 comm=sshd exe=/usr/sbin/sshd subj=system_u:system_r:kernel_t:s0 key=(null)

Hash: sshd,kernel_t,unconfined_t,process,dyntransition
</code></pre>
<h5 id="custom_siteconf">Custom site.conf:<a class="headerlink" href="#custom_siteconf" title="Permanent link">&para;</a></h5>
<pre><code># cat /etc/rear/site.conf 
OUTPUT=ISO
BACKUP=TSM
GRUB_RESCUE=n
KERNEL_CMDLINE="net.ifnames=0 biosdevname=0"
TMPDIR="/var/tmp/"
export TMPDIR
TSM_RESULT_FILE_PATH=/var/tmp/rear/output
</code></pre>
<h5 id="logfiles">Logfiles<a class="headerlink" href="#logfiles" title="Permanent link">&para;</a></h5>
<p>No Results when I'm greping for selinux</p>
<pre><code># grep -i selinux /root/rear-2015-09-10T08:47:06+0000.log

---
# grep -i selinux /var/log/rear/rear-xyz.log
2015-09-10 11:03:50 Adding required /lib64/libselinux.so.1 to LIBS
</code></pre>
<h5 id="workaround">Workaround:<a class="headerlink" href="#workaround" title="Permanent link">&para;</a></h5>
<ul>
<li>Edit Kernel Params while booting (add rd.break)</li>
<li>Remount: /sysroot =&gt; # mount -o remount,rw /sysroot</li>
<li>Chroot to /sysroot =&gt; # chroot /sysroot</li>
<li>Add selinux-file =&gt; # touch /.autorelabel</li>
<li>Restart Server</li>
</ul>
<p>Thanks for having a look at it üëç</p>
<p>Ralf</p>
<h4 id="bhaubeck_commented_at_2015-09-10_1519"><img src="https://avatars.githubusercontent.com/u/13778269?v=4" width="50"><a href="https://github.com/bhaubeck">bhaubeck</a> commented at <a href="https://github.com/rear/rear/issues/650#issuecomment-139277359">2015-09-10 15:19</a>:<a class="headerlink" href="#bhaubeck_commented_at_2015-09-10_1519" title="Permanent link">&para;</a></h4>
<p>hey ralf,</p>
<p>nice to read you here.</p>
<p>maybe you hit the same issue as me some days ago?</p>
<p>see the mail below (or search for the thread "not booting further than
initrd after successful restore")</p>
<p>solution:<br />
it was just /run missing.</p>
<p>ben</p>
<p>-------- Forwarded Message --------<br />
Return-Path: <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#98;&#104;&#97;&#117;&#98;&#101;&#99;&#107;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;">&#98;&#104;&#97;&#117;&#98;&#101;&#99;&#107;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</a><br />
Received: from [172.29.2.245](p5B30D216.dip0.t-ipconnect.de.
[91.48.210.22]) by smtp.gmail.com with ESMTPSA id
c7sm82977wjb.19.2015.08.12.14.09.16 for
<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#114;&#101;&#97;&#114;&#45;&#117;&#115;&#101;&#114;&#115;&#64;&#108;&#105;&#115;&#116;&#115;&#46;&#114;&#101;&#108;&#97;&#120;&#45;&#97;&#110;&#100;&#45;&#114;&#101;&#99;&#111;&#118;&#101;&#114;&#46;&#111;&#114;&#103;">&#114;&#101;&#97;&#114;&#45;&#117;&#115;&#101;&#114;&#115;&#64;&#108;&#105;&#115;&#116;&#115;&#46;&#114;&#101;&#108;&#97;&#120;&#45;&#97;&#110;&#100;&#45;&#114;&#101;&#99;&#111;&#118;&#101;&#114;&#46;&#111;&#114;&#103;</a> (version=TLSv1.2
cipher=ECDHE-RSA-AES128-GCM-SHA256 bits=128/128); Wed, 12 Aug 2015
14:09:17 -0700 (PDT)<br />
Subject: Re: [rear-users] not booting further than initrd after
successful restore<br />
To: <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#114;&#101;&#97;&#114;&#45;&#117;&#115;&#101;&#114;&#115;&#64;&#108;&#105;&#115;&#116;&#115;&#46;&#114;&#101;&#108;&#97;&#120;&#45;&#97;&#110;&#100;&#45;&#114;&#101;&#99;&#111;&#118;&#101;&#114;&#46;&#111;&#114;&#103;">&#114;&#101;&#97;&#114;&#45;&#117;&#115;&#101;&#114;&#115;&#64;&#108;&#105;&#115;&#116;&#115;&#46;&#114;&#101;&#108;&#97;&#120;&#45;&#97;&#110;&#100;&#45;&#114;&#101;&#99;&#111;&#118;&#101;&#114;&#46;&#111;&#114;&#103;</a><br />
References: <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#53;&#53;&#67;&#66;&#50;&#66;&#53;&#52;&#46;&#54;&#48;&#54;&#48;&#57;&#48;&#56;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;">&#53;&#53;&#67;&#66;&#50;&#66;&#53;&#52;&#46;&#54;&#48;&#54;&#48;&#57;&#48;&#56;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</a> <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#53;&#53;&#67;&#66;&#52;&#50;&#57;&#48;&#46;&#50;&#48;&#56;&#48;&#50;&#48;&#48;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;">&#53;&#53;&#67;&#66;&#52;&#50;&#57;&#48;&#46;&#50;&#48;&#56;&#48;&#50;&#48;&#48;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</a>
<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#52;&#102;&#57;&#57;&#100;&#48;&#100;&#99;&#102;&#57;&#97;&#101;&#48;&#97;&#56;&#50;&#57;&#48;&#52;&#97;&#97;&#97;&#56;&#55;&#97;&#54;&#50;&#54;&#101;&#56;&#102;&#56;&#64;&#105;&#116;&#51;&#46;&#98;&#101;">&#52;&#102;&#57;&#57;&#100;&#48;&#100;&#99;&#102;&#57;&#97;&#101;&#48;&#97;&#56;&#50;&#57;&#48;&#52;&#97;&#97;&#97;&#56;&#55;&#97;&#54;&#50;&#54;&#101;&#56;&#102;&#56;&#64;&#105;&#116;&#51;&#46;&#98;&#101;</a> <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#53;&#53;&#67;&#66;&#52;&#54;&#65;&#55;&#46;&#52;&#48;&#57;&#48;&#50;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;">&#53;&#53;&#67;&#66;&#52;&#54;&#65;&#55;&#46;&#52;&#48;&#57;&#48;&#50;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</a><br />
From: Benjamin Haubeck <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#98;&#104;&#97;&#117;&#98;&#101;&#99;&#107;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;">&#98;&#104;&#97;&#117;&#98;&#101;&#99;&#107;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</a><br />
Openpgp: id=E7E3A909494F7E28FADFC4400B162E663DF07A8A<br />
Message-ID: <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#53;&#53;&#67;&#66;&#66;&#53;&#70;&#50;&#46;&#49;&#48;&#55;&#48;&#52;&#48;&#51;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;">&#53;&#53;&#67;&#66;&#66;&#53;&#70;&#50;&#46;&#49;&#48;&#55;&#48;&#52;&#48;&#51;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</a><br />
Date: Wed, 12 Aug 2015 23:09:06 +0200<br />
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101
Thunderbird/38.1.0<br />
MIME-Version: 1.0<br />
In-Reply-To: <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#53;&#53;&#67;&#66;&#52;&#54;&#65;&#55;&#46;&#52;&#48;&#57;&#48;&#50;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;">&#53;&#53;&#67;&#66;&#52;&#54;&#65;&#55;&#46;&#52;&#48;&#57;&#48;&#50;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</a><br />
Content-Type: text/plain; charset=utf-8<br />
Content-Transfer-Encoding: 7bit</p>
<p>thx for your support.<br />
i solved it now and it has nothing to do with relax and recover:</p>
<p>/run was missing in the backup and was causing this strange effects.</p>
<p>for some reason i still do not know, the TSM backup seems to exclude<br />
not /run/* but /run at all...<br />
and for some reason the rescue boot of the RHEL - CD is fixing a<br />
missing /run silently, the installed version does not.</p>
<p>thx for your fast reactions and sorry for this kind of "false alarm".</p>
<p>kind regards,</p>
<p>ben</p>
<p>On 10.09.2015 15:40, Ralf Germann wrote:</p>
<blockquote>
<pre><code>      Information:
</code></pre>
<p>Rear-Version: 1.17.2<br />
OS: RHEL 7.1 latest<br />
SELinux: targeted/enforcing<br />
Backup-System: TSM</p>
<pre><code>      Problem:
</code></pre>
<p>Login after restore is not possible. Error: /bin/bash =&gt; Permission
denied.<br />
It seems, that no /.autorelabel will be created after restore-process.
If I afterwards create the file by myself (rd.break), everything is
working fine. Same problem exists also when I use
BCKUP_SELINUX_DISABLE=0 in site.conf.</p>
<pre><code>      Output of sealert:
</code></pre>
<p>|# sealert -a /var/log/audit/audit.log Additional Information: Source
Context system_u:system_r:kernel_t:s0 Target Context
unconfined_u:unconfined_r:unconfined_t:s0 Target Objects Unknown [
process ] Source sshd Source Path /usr/sbin/sshd Port <Unknown> Host
<Unknown> Source RPM Packages openssh-server-6.6.1p1-12.el7_1.x86_64
Target RPM Packages Policy RPM
selinux-policy-3.13.1-23.el7_1.13.noarch Selinux Enabled True Policy
Type targeted Enforcing Mode Enforcing Host Name xyz.ch Platform Linux
xyz.ch 3.10.0-229.11.1.el7.x86_64 #1 SMP Wed Jul 22 12:06:11 EDT
2015 x86_64 x86_64 Alert Count 1 First Seen 2015-09-10 10:48:18 CEST
Last Seen 2015-09-10 10:48:18 CEST Local ID
2c253544-4278-4cb6-b222-5d10b61d155d Raw Audit Messages type=AVC
msg=audit(1441874898.668:134): avc: denied { dyntransition } for
pid=1963 comm="sshd" scontext=system_u:system_r:kernel_t:s0
tcontext=unconfined_u:unconfined_r:unconfined_t:s0 tclass=process
type=SYSCALL msg=audit(1441874898.668:134): arch=x86_64<br />
syscall=write success=no exit=EACCES a0=6 a1=7f8b22a956e0 a2=2a
a3=666e6f636e753a72 items=0 ppid=1775 pid=1963 auid=7536 uid=7536
gid=100 euid=7536 suid=7536 fsuid=7536 egid=100 sgid=100 fsgid=100
tty=(none) ses=1 comm=sshd exe=/usr/sbin/sshd
subj=system_u:system_r:kernel_t:s0 key=(null) Hash:
sshd,kernel_t,unconfined_t,process,dyntransition |</p>
<pre><code>      Custom site.conf:
</code></pre>
<p>|# cat /etc/rear/site.conf OUTPUT=ISO BACKUP=TSM GRUB_RESCUE=n
KERNEL_CMDLINE="net.ifnames=0 biosdevname=0" TMPDIR="/var/tmp/"
export TMPDIR TSM_RESULT_FILE_PATH=/var/tmp/rear/output |</p>
<pre><code>      Logfiles
</code></pre>
<p>No Results when I'm greping for selinux</p>
<p>|# grep -i selinux /root/rear-2015-09-10T08:47:06+0000.log --- #
grep -i selinux /var/log/rear/rear-xyz.log 2015-09-10 11:03:50 Adding
required /lib64/libselinux.so.1 to LIBS |</p>
<pre><code>      Workaround:
</code></pre>
<ul>
<li>Edit Kernel Params while booting (add rd.break)</li>
<li>Remount: /sysroot =&gt; # mount -o remount,rw /sysroot</li>
<li>Chroot to /sysroot =&gt; # chroot /sysroot</li>
<li>Add selinux-file =&gt; # touch /.autorelabel</li>
<li>Restart Server</li>
</ul>
<p>Thanks for having a look at it üëç</p>
<p>Ralf</p>
<p>‚Äî<br />
Reply to this email directly or view it on GitHub
<a href="https://github.com/rear/rear/issues/650">https://github.com/rear/rear/issues/650</a>.</p>
</blockquote>
<p>Benjamin Haubeck<br />
Key-Fingerprint: E7E3 A909 494F 7E28 FADF C440 0B16 2E66 3DF0 7A8A</p>
<h4 id="v1p3r0u5_commented_at_2015-09-10_1822"><img src="https://avatars.githubusercontent.com/u/14215019?u=b7117bec583a11146fc69cb113567b1d5ee02f8b&v=4" width="50"><a href="https://github.com/v1p3r0u5">v1p3r0u5</a> commented at <a href="https://github.com/rear/rear/issues/650#issuecomment-139334626">2015-09-10 18:22</a>:<a class="headerlink" href="#v1p3r0u5_commented_at_2015-09-10_1822" title="Permanent link">&para;</a></h4>
<p>Hi Ben,</p>
<p>thx for your answer. Unfortunately this is not the solution. The issue
with /run was solved with version 1.17.2. The boot process does
complete, but login is not possible unless you relabel the whole system
with help of /.autorelabel. Of course only when selinux is enforcing.
;-)</p>
<p>Cheers, Ralf</p>
<h4 id="gdha_commented_at_2015-09-11_1526"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/650#issuecomment-139575486">2015-09-11 15:26</a>:<a class="headerlink" href="#gdha_commented_at_2015-09-11_1526" title="Permanent link">&para;</a></h4>
<p>@rg-fine It could be that with the <code>BACKUP=TSM</code> that there is no script
present that forces a SELinux relabel after the restore. Well, most
likely as you reported the issue, and when I check with<br />
<code>grep -r autorelabel /usr/share/rear</code> I cannot find a method which
foresees this for TSM (or any other external backup program with
exceptions of RSYNC, RBME and DUPLICITY).</p>
<p>What you could do to test it out (a more generic fix) is the following:</p>
<pre><code>mv /usr/share/rear/restore/DUPLICITY/default/50_selinux_autorelabel.sh /usr/share/rear/restore/default/
</code></pre>
<p>This way it will always being executed with any backup method. Please
return feedback ;-)</p>
<h4 id="v1p3r0u5_commented_at_2015-09-15_0722"><img src="https://avatars.githubusercontent.com/u/14215019?u=b7117bec583a11146fc69cb113567b1d5ee02f8b&v=4" width="50"><a href="https://github.com/v1p3r0u5">v1p3r0u5</a> commented at <a href="https://github.com/rear/rear/issues/650#issuecomment-140303141">2015-09-15 07:22</a>:<a class="headerlink" href="#v1p3r0u5_commented_at_2015-09-15_0722" title="Permanent link">&para;</a></h4>
<p>@gdha Thank you very much for the answer. I could test your
recommendation. For me it worked like a charm to move the autorelabel
script :-)</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2025 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2015-09-10.650.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
