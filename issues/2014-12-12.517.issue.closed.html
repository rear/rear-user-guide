<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#517 Issue closed: ReaR never gets to the backup step on systems with large numbers of disks - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#517 Issue closed: ReaR never gets to the backup step on systems with large numbers of disks";
        var mkdocs_page_input_path = "issues/2014-12-12.517.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#517 Issue closed: ReaR never gets to the backup step on systems with large numbers of disks</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="517_issue_closed_rear_never_gets_to_the_backup_step_on_systems_with_large_numbers_of_disks"><a href="https://github.com/rear/rear/issues/517">#517 Issue</a> <code>closed</code>: ReaR never gets to the backup step on systems with large numbers of disks<a class="headerlink" href="#517_issue_closed_rear_never_gets_to_the_backup_step_on_systems_with_large_numbers_of_disks" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>support / question</code></p>
<h4 id="bjverzal_opened_issue_at_2014-12-12_1839"><img src="https://avatars.githubusercontent.com/u/9324378?v=4" width="50"><a href="https://github.com/bjverzal">bjverzal</a> opened issue at <a href="https://github.com/rear/rear/issues/517">2014-12-12 18:39</a>:<a class="headerlink" href="#bjverzal_opened_issue_at_2014-12-12_1839" title="Permanent link">&para;</a></h4>
<p>In our GPFS Analytical environment, the ReaR goes through the setup
steps but never starts the actual backup because it takes so long to
query all of the disk on the system</p>
<p>(root@myserver) /root # wc -l /proc/partitions<br />
2458 /proc/partitions</p>
<h4 id="schlomo_commented_at_2014-12-13_2202"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/517#issuecomment-66893320">2014-12-13 22:02</a>:<a class="headerlink" href="#schlomo_commented_at_2014-12-13_2202" title="Permanent link">&para;</a></h4>
<p>Wow, I have never seen so many block devices!</p>
<p>Can you please provide a log and your configuration?</p>
<p>Also, does the same happen with <code>rear mkrescue</code> too?</p>
<h4 id="bjverzal_commented_at_2014-12-14_0202"><img src="https://avatars.githubusercontent.com/u/9324378?v=4" width="50"><a href="https://github.com/bjverzal">bjverzal</a> commented at <a href="https://github.com/rear/rear/issues/517#issuecomment-66899662">2014-12-14 02:02</a>:<a class="headerlink" href="#bjverzal_commented_at_2014-12-14_0202" title="Permanent link">&para;</a></h4>
<p>We've not tried rear mkrescue. I'll respond to the mail with an
attachment because I cannot paste a zip file here.</p>
<h4 id="bjverzal_commented_at_2014-12-14_0205"><img src="https://avatars.githubusercontent.com/u/9324378?v=4" width="50"><a href="https://github.com/bjverzal">bjverzal</a> commented at <a href="https://github.com/rear/rear/issues/517#issuecomment-66899704">2014-12-14 02:05</a>:<a class="headerlink" href="#bjverzal_commented_at_2014-12-14_0205" title="Permanent link">&para;</a></h4>
<p>I've update the Git thread. Here is the attachment with the requested<br />
information in it. I have included:</p>
<p>lshw<br />
multipath -ll<br />
/etc/redhat-release<br />
rear.log</p>
<p>On Sat, Dec 13, 2014 at 4:02 PM, Schlomo Schapiro
<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;">&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a><br />
wrote:</p>
<blockquote>
<p>Wow, I have never seen so many block devices!</p>
<p>Can you please provide a log and your configuration?</p>
<p>Also, does the same happen with rear mkrescue too?</p>
<p>—<br />
Reply to this email directly or view it on GitHub<br />
<a href="https://github.com/rear/rear/issues/517#issuecomment-66893320">https://github.com/rear/rear/issues/517#issuecomment-66893320</a>.</p>
</blockquote>
<h4 id="schlomo_commented_at_2014-12-14_0902"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/517#issuecomment-66907032">2014-12-14 09:02</a>:<a class="headerlink" href="#schlomo_commented_at_2014-12-14_0902" title="Permanent link">&para;</a></h4>
<p>Attachments don't work. Please use
<a href="https://gist.github.com">https://gist.github.com</a> for your logs and
also add your ReaR configuration (there or here).</p>
<h4 id="bjverzal_commented_at_2014-12-14_1709"><img src="https://avatars.githubusercontent.com/u/9324378?v=4" width="50"><a href="https://github.com/bjverzal">bjverzal</a> commented at <a href="https://github.com/rear/rear/issues/517#issuecomment-66920017">2014-12-14 17:09</a>:<a class="headerlink" href="#bjverzal_commented_at_2014-12-14_1709" title="Permanent link">&para;</a></h4>
<p><a href="https://gist.github.com/1ac2bf0072c5d85f6d10.git">https://gist.github.com/1ac2bf0072c5d85f6d10.git</a></p>
<p>I have there, the following:</p>
<p>/etc/redhat-release<br />
lshw<br />
multipath -ll<br />
rear.log</p>
<p>Thanks!</p>
<p>On Sun, Dec 14, 2014 at 3:02 AM, Schlomo Schapiro
<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;">&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a><br />
wrote:</p>
<blockquote>
<p>Attachments don't work. Please use
<a href="https://gist.github.com">https://gist.github.com</a> for your logs<br />
and also add your ReaR configuration (there or here).</p>
<p>—<br />
Reply to this email directly or view it on GitHub<br />
<a href="https://github.com/rear/rear/issues/517#issuecomment-66907032">https://github.com/rear/rear/issues/517#issuecomment-66907032</a>.</p>
</blockquote>
<h4 id="bjverzal_commented_at_2014-12-14_1712"><img src="https://avatars.githubusercontent.com/u/9324378?v=4" width="50"><a href="https://github.com/bjverzal">bjverzal</a> commented at <a href="https://github.com/rear/rear/issues/517#issuecomment-66920124">2014-12-14 17:12</a>:<a class="headerlink" href="#bjverzal_commented_at_2014-12-14_1712" title="Permanent link">&para;</a></h4>
<p>As to the configuration:</p>
<p>NFS v4 to an AIX server. I think we are on Version 15 of ReaR. The<br />
configs are standard across all 1600 of our servers. Only these two
with<br />
the large number of disks are failing.</p>
<p>On Sun, Dec 14, 2014 at 3:02 AM, Schlomo Schapiro
<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;">&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a><br />
wrote:</p>
<blockquote>
<p>Attachments don't work. Please use
<a href="https://gist.github.com">https://gist.github.com</a> for your logs<br />
and also add your ReaR configuration (there or here).</p>
<p>—<br />
Reply to this email directly or view it on GitHub<br />
<a href="https://github.com/rear/rear/issues/517#issuecomment-66907032">https://github.com/rear/rear/issues/517#issuecomment-66907032</a>.</p>
</blockquote>
<h4 id="gdha_commented_at_2014-12-16_1122"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/517#issuecomment-67145473">2014-12-16 11:22</a>:<a class="headerlink" href="#gdha_commented_at_2014-12-16_1122" title="Permanent link">&para;</a></h4>
<p>@bjverzal the link to the gist stays blank with me?</p>
<h4 id="gigawatts_commented_at_2014-12-16_1531"><img src="https://avatars.githubusercontent.com/u/1954516?v=4" width="50"><a href="https://github.com/gigawatts">gigawatts</a> commented at <a href="https://github.com/rear/rear/issues/517#issuecomment-67176919">2014-12-16 15:31</a>:<a class="headerlink" href="#gigawatts_commented_at_2014-12-16_1531" title="Permanent link">&para;</a></h4>
<p>@gdha I am a co-worker of @bjverzal, if you knock the .git off the end
of his gist, you can see the 4 files. The raw's of each are as follows:</p>
<p><a href="https://gist.githubusercontent.com/bjverzal/1ac2bf0072c5d85f6d10/raw/redhat-release">https://gist.githubusercontent.com/bjverzal/1ac2bf0072c5d85f6d10/raw/redhat-release</a><br />
<a href="https://gist.githubusercontent.com/bjverzal/1ac2bf0072c5d85f6d10/raw/rear.log">https://gist.githubusercontent.com/bjverzal/1ac2bf0072c5d85f6d10/raw/rear.log</a><br />
<a href="https://gist.githubusercontent.com/bjverzal/1ac2bf0072c5d85f6d10/raw/multipath.out">https://gist.githubusercontent.com/bjverzal/1ac2bf0072c5d85f6d10/raw/multipath.out</a><br />
<a href="https://gist.githubusercontent.com/bjverzal/1ac2bf0072c5d85f6d10/raw/lshw.out">https://gist.githubusercontent.com/bjverzal/1ac2bf0072c5d85f6d10/raw/lshw.out</a></p>
<h4 id="gigawatts_commented_at_2014-12-16_1915"><img src="https://avatars.githubusercontent.com/u/1954516?v=4" width="50"><a href="https://github.com/gigawatts">gigawatts</a> commented at <a href="https://github.com/rear/rear/issues/517#issuecomment-67214701">2014-12-16 19:15</a>:<a class="headerlink" href="#gigawatts_commented_at_2014-12-16_1915" title="Permanent link">&para;</a></h4>
<p>If there is a quick hack I can implement that ONLY scans the partition
structure of sda, for example, instead of all disks, that is all I
really need to get these couple servers backed up properly. Then we can
try for a "real" solution later.</p>
<h4 id="gdha_commented_at_2014-12-17_0825"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/517#issuecomment-67290656">2014-12-17 08:25</a>:<a class="headerlink" href="#gdha_commented_at_2014-12-17_0825" title="Permanent link">&para;</a></h4>
<p>A quick hack could be to put in script
<code>/usr/share/rear/layout/save/GNU/Linux/28_multipath_layout.sh</code> the
following lines in front of the other code:</p>
<pre><code>if [[ "$AUTOEXCLUDE_MULTIPATH" =~ ^[yY1] ]] ; then
    return
fi
</code></pre>
<h4 id="gigawatts_commented_at_2014-12-17_1932"><img src="https://avatars.githubusercontent.com/u/1954516?v=4" width="50"><a href="https://github.com/gigawatts">gigawatts</a> commented at <a href="https://github.com/rear/rear/issues/517#issuecomment-67378998">2014-12-17 19:32</a>:<a class="headerlink" href="#gigawatts_commented_at_2014-12-17_1932" title="Permanent link">&para;</a></h4>
<p>I assume we should also then set AUTOEXCLUDE_MULTIPATH = 1 in our
local.conf, to activate this skip?</p>
<p>Edit: Never mind. I tried adding the if statement you provided without
defining that variable anywhere, and it seems to have worked! I will be
adding this hack to all my systems currently experiencing this issue.</p>
<p>Thank you very very much @gdha !</p>
<h4 id="schlomo_commented_at_2014-12-17_2126"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/517#issuecomment-67397341">2014-12-17 21:26</a>:<a class="headerlink" href="#schlomo_commented_at_2014-12-17_2126" title="Permanent link">&para;</a></h4>
<p>It seems to be enabled by default:</p>
<pre><code>$ grep -r AUTOEXCLUDE_MULTIPATH .
./usr/share/rear/lib/layout-functions.sh:    if [[ -n "$res" || "$AUTOEXCLUDE_MULTIPATH" =~ ^[yY1] ]]; then
./usr/share/rear/conf/default.conf:AUTOEXCLUDE_MULTIPATH=y
./usr/share/rear/layout/save/default/32_autoexclude.sh:if [[ "$AUTOEXCLUDE_MULTIPATH" =~ ^[yY1] ]] ; then
./doc/user-guide/06-layout-configuration.txt:A similar mechanism exists for multipath disks. The +AUTOEXCLUDE_MULTIPATH=y+
</code></pre>
<p>Maybe the check was just missing from <code>28_multipath_layout.sh</code></p>
<h4 id="gdha_commented_at_2015-02-03_0924"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/517#issuecomment-72618649">2015-02-03 09:24</a>:<a class="headerlink" href="#gdha_commented_at_2015-02-03_0924" title="Permanent link">&para;</a></h4>
<p>no the check was not there on purpose as we like to have our multipath
config in our layout and what later it will be commented anyway. It is
always nice to see what was originally configured on your system (handy
in DR mode to see what was on the production system).<br />
However, in rare cases there are just too many devices. I would not
modify this script.<br />
Just gonna close this issue.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2025 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2014-12-12.517.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
