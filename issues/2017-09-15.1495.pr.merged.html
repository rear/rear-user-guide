<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#1495 PR merged: Add automatically some important kernel parameters to KERNEL_CMDLINE - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#1495 PR merged: Add automatically some important kernel parameters to KERNEL_CMDLINE";
        var mkdocs_page_input_path = "issues/2017-09-15.1495.pr.merged.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#1495 PR merged: Add automatically some important kernel parameters to KERNEL_CMDLINE</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="1495_pr_merged_add_automatically_some_important_kernel_parameters_to_kernel_cmdline"><a href="https://github.com/rear/rear/pull/1495">#1495 PR</a> <code>merged</code>: Add automatically some important kernel parameters to KERNEL_CMDLINE<a class="headerlink" href="#1495_pr_merged_add_automatically_some_important_kernel_parameters_to_kernel_cmdline" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>fixed / solved / done</code></p>
<h4 id="schabrolles_opened_issue_at_2017-09-15_1145"><img src="https://avatars.githubusercontent.com/u/19491077?u=0021b16ab426902cbe676f6831f41607bbe4d441&v=4" width="50"><a href="https://github.com/schabrolles">schabrolles</a> opened issue at <a href="https://github.com/rear/rear/pull/1495">2017-09-15 11:45</a>:<a class="headerlink" href="#schabrolles_opened_issue_at_2017-09-15_1145" title="Permanent link">&para;</a></h4>
<p>I propose to check the current kernel parameters used (in
<code>/proc/cmdline</code>) to detect some important parameter we should use when
booting in rescue mode (means add them in KERNEL_CMDLINE variable).</p>
<p>Based on the discussion with @gdha in #1400, I started to detect
<code>net.ifnames</code> or <code>biosdevname</code> parameter in order to preserve interface
naming between rescue mode and real system after migration.</p>
<h4 id="schabrolles_commented_at_2017-09-15_1502"><img src="https://avatars.githubusercontent.com/u/19491077?u=0021b16ab426902cbe676f6831f41607bbe4d441&v=4" width="50"><a href="https://github.com/schabrolles">schabrolles</a> commented at <a href="https://github.com/rear/rear/pull/1495#issuecomment-329808489">2017-09-15 15:02</a>:<a class="headerlink" href="#schabrolles_commented_at_2017-09-15_1502" title="Permanent link">&para;</a></h4>
<p>@gdha It was my thought.... I was starting this scipt by considering
KERNEL_CMDLINE was an array ... but it was not ;-) May be @jsmeix or
@schlomo could tell us why it is a variable and not an array.</p>
<p>@jsmeix, I've just made some adjustments (using a Array
CHECK_KERNEL_PARAMETER in default.conf). Does it fit your expectation
? (not sure I understand what you mean by <em>"implement it via<br />
generically working code"</em>)</p>
<h4 id="jsmeix_commented_at_2017-09-18_0851"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1495#issuecomment-330161395">2017-09-18 08:51</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-09-18_0851" title="Permanent link">&para;</a></h4>
<p>FWIW:<br />
Bash arrays are in the end only needed when the elements<br />
could be strings (i.e. consist of several words) so that</p>
<pre>
# strings=( first 'second thing' last )

# for string in "${strings[@]}" ; do echo "'$string'" ; done
'first'
'second thing'
'last'
</pre>

<p>works.<br />
When things are only words, a simple string is sufficient<br />
because then simple</p>
<pre>
# words=" first second   third "

# for word in $words ; do echo "'$word'" ; done
'first'
'second'
'third'
</pre>

<p>already works.<br />
Careful note quoting versus non-quoting!</p>
<h4 id="schabrolles_commented_at_2017-09-18_1345"><img src="https://avatars.githubusercontent.com/u/19491077?u=0021b16ab426902cbe676f6831f41607bbe4d441&v=4" width="50"><a href="https://github.com/schabrolles">schabrolles</a> commented at <a href="https://github.com/rear/rear/pull/1495#issuecomment-330225921">2017-09-18 13:45</a>:<a class="headerlink" href="#schabrolles_commented_at_2017-09-18_1345" title="Permanent link">&para;</a></h4>
<p>@jsmeix variable name changed. (and tested an ubuntu with net.ifnames)</p>
<p>I'm waiting for last feedback/approval from @gdha and @schlomo before
merging this one.</p>
<h4 id="schlomo_commented_at_2017-09-18_1522"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/pull/1495#issuecomment-330258348">2017-09-18 15:22</a>:<a class="headerlink" href="#schlomo_commented_at_2017-09-18_1522" title="Permanent link">&para;</a></h4>
<p>Looks good to me. Did you check it with kernel options that are bare
words without a <code>=</code>? Like <code>gpt</code>?</p>
<h4 id="schabrolles_commented_at_2017-09-18_1533"><img src="https://avatars.githubusercontent.com/u/19491077?u=0021b16ab426902cbe676f6831f41607bbe4d441&v=4" width="50"><a href="https://github.com/schabrolles">schabrolles</a> commented at <a href="https://github.com/rear/rear/pull/1495#issuecomment-330261701">2017-09-18 15:33</a>:<a class="headerlink" href="#schabrolles_commented_at_2017-09-18_1533" title="Permanent link">&para;</a></h4>
<p>@gdha, Yes I have some system (in PowerVM) where even if you put
<code>net.ifnames=0</code>, the inet are name with biosdevname. But it is a first
step ... (some other modification will come).<br />
Without this one, you could face the following problem:</p>
<ol>
<li>During a migration of a system that have "net.ifnames=0" (source
    machine) interface is named "eth0"</li>
<li>Migrate to a new system... So boot on the ReaR rescue media,
    interface could be named "enpos1" if running ubuntu.... So ReaR
    start the network migration and rename interfaces from eth0 to
    enpos1 (ubuntu is not using udev rules file by default).</li>
<li>After migration, reboot the the "Real OS" .... but this one will
    restart with "net.ifnames=0" ... so network won't be setup correctly
    ... :(</li>
</ol>
<p>That's why we need to copy this option into the rescue image.</p>
<h4 id="schabrolles_commented_at_2017-09-18_1545"><img src="https://avatars.githubusercontent.com/u/19491077?u=0021b16ab426902cbe676f6831f41607bbe4d441&v=4" width="50"><a href="https://github.com/schabrolles">schabrolles</a> commented at <a href="https://github.com/rear/rear/pull/1495#issuecomment-330265055">2017-09-18 15:45</a>:<a class="headerlink" href="#schabrolles_commented_at_2017-09-18_1545" title="Permanent link">&para;</a></h4>
<p>@schlomo, Yes it also works with parameters without <code>=</code> like <code>quiet</code>
(just tested)</p>
<h4 id="schlomo_commented_at_2017-09-18_1548"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/pull/1495#issuecomment-330266175">2017-09-18 15:48</a>:<a class="headerlink" href="#schlomo_commented_at_2017-09-18_1548" title="Permanent link">&para;</a></h4>
<p>Thanks, go ahead and merge.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2023 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2017-09-15.1495.pr.merged.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
