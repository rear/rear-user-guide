<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#1395 Issue closed: Remove '&gt;/dev/null' where it makes sense to get all info in the log - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#1395 Issue closed: Remove \u0027\u0026gt;/dev/null\u0027 where it makes sense to get all info in the log";
        var mkdocs_page_input_path = "issues/2017-06-27.1395.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_nas.html">Internal Backup with tar to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_rsync.html">Internal Backup with rsync to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/rsync.html">External Backup using BACKUP=RSYNC method</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/rbme.html">External Backup using RBME</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/restic.html">External Backup using restic</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/duplicity.html">External Backup using duplicity</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../development/squash-git-log-commments.html">How to squash git log comments into one line</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#1395 Issue closed: Remove '&gt;/dev/null' where it makes sense to get all info in the log</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="1395_issue_closed_remove_devnull_where_it_makes_sense_to_get_all_info_in_the_log"><a href="https://github.com/rear/rear/issues/1395">#1395 Issue</a> <code>closed</code>: Remove '&gt;/dev/null' where it makes sense to get all info in the log<a class="headerlink" href="#1395_issue_closed_remove_devnull_where_it_makes_sense_to_get_all_info_in_the_log" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>cleanup</code>, <code>fixed / solved / done</code></p>
<h4 id="jsmeix_opened_issue_at_2017-06-27_1004"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> opened issue at <a href="https://github.com/rear/rear/issues/1395">2017-06-27 10:04</a>:<a class="headerlink" href="#jsmeix_opened_issue_at_2017-06-27_1004" title="Permanent link">&para;</a></h4>
<p>There are very many places in the ReaR code where<br />
output is suppressed via redirection to /dev/null.</p>
<p>Herebey I ask for comments what to do when<br />
stdout and/or stderr is redirected to /dev/null.</p>
<p>My personal opinion is that<br />
in general ReaR should<br />
suppress success output via stdout<br />
but keep failure output via stderr in the log.</p>
<p>Details:</p>
<p>What to do when stderr is redirected to /dev/null:</p>
<p>In<br />
<a href="https://github.com/rear/rear/pull/1359#pullrequestreview-37827146">https://github.com/rear/rear/pull/1359#pullrequestreview-37827146</a><br />
@schlomo wrote</p>
<pre>
Why hide STDERR here? It might contain useful infos
that should appear in the log.
</pre>

<p>Accordingly<br />
in general stderr should be in the log.</p>
<p>Exceptional cases are where tools blabber non-useful stuff<br />
via stderr for example 'cp $verbose' in 400_copy_modules.sh<br />
and in 420_copy_firmware_files.sh</p>
<p>What to do when stdout is redirected to /dev/null:</p>
<p>My personal opinion is that<br />
in general stdout should not be in the log<br />
so that in general stdout should be redirected to /dev/null.</p>
<p>A special case is properly fixing the old<br />
deprecated usage of '&gt;&amp;8':</p>
<p>In
<a href="https://github.com/rear/rear/issues/887#issue-161207988">https://github.com/rear/rear/issues/887#issue-161207988</a><br />
@gdha wrote</p>
<pre>
We are not using the progress-bar code for years
anymore (the >&8 redirection), so the question was
asked, why not get rid of it and capture the code
in the logging (or not)?
</pre>

<p>Via<br />
<a href="https://github.com/rear/rear/pull/1391/commits/4f4efb37db4c4ee7d1b05f247101c1680e1f8c31">https://github.com/rear/rear/pull/1391/commits/4f4efb37db4c4ee7d1b05f247101c1680e1f8c31</a><br />
I replaced all old deprecated usage of '&gt;&amp;8' with '&gt;/dev/null'<br />
to keep the current behaviour (i.e. suppress all the output)<br />
both for stderr like</p>
<pre>
- ... 2>&8
+ ... 2>/dev/null
</pre>

<p>and in most cases also for stdout like</p>
<pre>
- ... >&8
+ ... >/dev/null

- ... 1>&8
+ ... 1>/dev/null

- ... >&8 2>&1
+ ... >/dev/null 2>&1
</pre>

<h4 id="jsmeix_commented_at_2017-06-28_0825"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1395#issuecomment-311592122">2017-06-28 08:25</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-06-28_0825" title="Permanent link">&para;</a></h4>
<p>After sleeping over it I think now that</p>
<pre>
in general stdout should not be in the log
so that in general stdout should be redirected to /dev/null
</pre>

<p>is not the right way because<br />
it contradicts
<a href="https://github.com/rear/rear/issues/885">https://github.com/rear/rear/issues/885</a><br />
where we intend to have stdout in the log.</p>
<p>Meanwhile I think regarding what to do with stdout:</p>
<p>In general stdout should not appear on the user's terminal<br />
so that in general stdout should be redirected.</p>
<p>When usr/sbin/rear is run in verbose mode<br />
stdout should be redirected to the log file.</p>
<p>When usr/sbin/rear is not run in verbose mode<br />
stdout should be redirected to /dev/null.</p>
<p>I think this could be implemented in usr/sbin/rear like</p>
<pre>
# Redirect STDOUT and STDERR.
# Redirect STDERR to the log file because error messages should be always in the log.
# To be more on the safe side append to the log file '>>' instead of plain writing to it '>'
# because when a program (bash in this case) is plain writing to the log file it can overwrite
# output of a possibly simultaneously running process that likes to append to the log file
# (e.g. when a background process runs that also uses the ReaR log file for logging):
exec 2>>"$RUNTIME_LOGFILE"
# In verbose mode stdout is redirected to the log file
# otherwise stdout is redirected to /dev/null
# cf. https://github.com/rear/rear/issues/1395
if test "$VERBOSE" ; then
    # Make stdout the same what stderr already is (i.e. the log file)
    # This keeps strict ordering of stdout and stderr outputs in the log file
    # because now both stdout and stderr use one same file descriptor:
    exec 1>&2
else
    # In general stdout should not appear on the user's terminal
    # so that stdout is redirected to /dev/null when not in verbose mode:
    exec 1>/dev/null
fi
</pre>

<p>which seems to work o.k. for me during a very first test.</p>
<p>With that basically all those stdout redirections in the scipts<br />
can be removed (which greatly cleans up the code in the scipts).</p>
<p>For completeness here what is already done with stderr:</p>
<p>In general stderr should not appear on the user's terminal<br />
so that in general stderr should be redirected.</p>
<p>Error messages should be always in the log so that<br />
stderr is always redirected to the log file.</p>
<p>Exceptions are useless stderr messages (like verbose warnings)<br />
that can be redirected to /dev/null where needed in the scripts.</p>
<h4 id="schlomo_commented_at_2017-06-28_1435"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/1395#issuecomment-311678896">2017-06-28 14:35</a>:<a class="headerlink" href="#schlomo_commented_at_2017-06-28_1435" title="Permanent link">&para;</a></h4>
<p>IMHO ReaR should not willingly destroy information. So for me
<code>&gt;/dev/null</code> is not an option. If we don't want to show it to the user
then it must go to the logfile. If we want to show it to the user then
having it in the logfile too would be really nice.</p>
<h4 id="jsmeix_commented_at_2017-06-29_0939"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1395#issuecomment-311916095">2017-06-29 09:39</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-06-29_0939" title="Permanent link">&para;</a></h4>
<p>@schlomo<br />
I agree with you.</p>
<p>Personally I don't mind if a log file gets big.<br />
Personally I prefer a verbose log over a concise log.<br />
Personally I prefer to always have full information in the log.<br />
When something fails I want to have a complete log right now<br />
without the need to reproduce the failure with some special<br />
option settings to get a complete log.</p>
<p>I made my proposal in<br />
<a href="https://github.com/rear/rear/issues/1395#issuecomment-311592122">https://github.com/rear/rear/issues/1395#issuecomment-311592122</a><br />
to have STDOUT in the log only in case of verbose mode<br />
because I (falsely) assumed that by default for ReaR<br />
a concise log is preferred over a complete log.</p>
<p>With<br />
<a href="https://github.com/rear/rear/issues/1395#issuecomment-311678896">https://github.com/rear/rear/issues/1395#issuecomment-311678896</a><br />
things get simple and straightforward so that now<br />
(if I understand it correctly) our intent is:</p>
<p>In general stdout should not appear on the user's terminal<br />
so that in general stdout should be redirected to the log<br />
(this is what we already have in current GitHub master code).</p>
<p>Furthermore because ReaR should not destroy information<br />
basically all current '&gt;/dev/null' in the code should be dropped<br />
so that in general all stdout (and all stderr) appears in the log.</p>
<p>Exceptions are really useless stdout messages and<br />
really useless or falsely scaring stderr messages<br />
that can be redirected to /dev/null as needed in the scripts.</p>
<p>Regarding possibly useless stdout messages:</p>
<p>Perhaps things like 'pushd ... &gt;/dev/null' and 'popd &gt;/dev/null'<br />
might be valid examples where stdout could be suppressed<br />
(currently all 'pushd' and 'popd' suppress stdout except<br />
in my restore/ZYPPER/default/940_generate_fstab.sh).</p>
<p>But on the other hand I do not see anything wrong<br />
if 'pushd' and 'popd' stdout appears in the log<br />
(cf. above "I prefer to have full information in the log").</p>
<p>I assume all 'pushd' and 'popd' suppress stdout<br />
because before
<a href="https://github.com/rear/rear/pull/1391">https://github.com/rear/rear/pull/1391</a><br />
the 'pushd' and 'popd' stdout appeared on the users terminal<br />
where it is meaningless so that it was simply suppressed<br />
(instead of redirecting it to stderr to get it into the log<br />
as in restore/ZYPPER/default/940_generate_fstab.sh).</p>
<h4 id="jsmeix_commented_at_2017-06-29_0948"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1395#issuecomment-311918073">2017-06-29 09:48</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-06-29_0948" title="Permanent link">&para;</a></h4>
<p>I will be investigating about a usable way how to call a command<br />
that shows its stdout (and/or its stderr) to the user<br />
and have both of them in the log file too.<br />
But that will be something for the future.<br />
For now I am trying to get ReaR running correctly<br />
when both stdout and stderr are redirected into the log, cf.<br />
<a href="https://github.com/rear/rear/issues/1398#issuecomment-311886920">https://github.com/rear/rear/issues/1398#issuecomment-311886920</a></p>
<h4 id="jsmeix_commented_at_2017-08-25_1117"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1395#issuecomment-324890884">2017-08-25 11:17</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-08-25_1117" title="Permanent link">&para;</a></h4>
<p>Regarding the previous<br />
<a href="https://github.com/rear/rear/issues/1395#issuecomment-311918073">https://github.com/rear/rear/issues/1395#issuecomment-311918073</a><br />
see also<br />
<a href="https://github.com/rear/rear/pull/1449#issuecomment-324836426">https://github.com/rear/rear/pull/1449#issuecomment-324836426</a></p>
<h4 id="jsmeix_commented_at_2019-10-11_1411"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1395#issuecomment-541080950">2019-10-11 14:11</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-10-11_1411" title="Permanent link">&para;</a></h4>
<p>For an example where a particular script was fixed see<br />
<a href="https://github.com/rear/rear/commit/af14e15db75bacd554d53dd1041d7852ceb8d9b9">https://github.com/rear/rear/commit/af14e15db75bacd554d53dd1041d7852ceb8d9b9</a></p>
<h4 id="jsmeix_commented_at_2019-10-11_1416"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1395#issuecomment-541083321">2019-10-11 14:16</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-10-11_1416" title="Permanent link">&para;</a></h4>
<p>If time permits I would like to do<br />
some general cleanup for ReaR 2.6. in all scripts<br />
and remove '2&gt;/dev/null' where it makes sense<br />
and replace '&amp;&gt;/dev/null' by '1&gt;/dev/null' where it makes sense<br />
or also remove '&amp;&gt;/dev/null' where that seems to be better<br />
BUT<br />
see
<a href="https://github.com/rear/rear/issues/799#issuecomment-531247109">https://github.com/rear/rear/issues/799#issuecomment-531247109</a></p>
<h4 id="jsmeix_commented_at_2019-10-18_1200"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1395#issuecomment-543701839">2019-10-18 12:00</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-10-18_1200" title="Permanent link">&para;</a></h4>
<p>With
<a href="https://github.com/rear/rear/pull/2252">https://github.com/rear/rear/pull/2252</a>
merged<br />
I hope this issue is sufficiently fixed.</p>
<p>But I cannot test all those affected code parts,<br />
in particulart not the changes for TSM and NBU in<br />
verify/TSM/default/390_request_point_in_time_restore_parameters.sh<br />
and<br />
verify/NBU/default/390_request_point_in_time_restore_parameters.sh</p>
<p>Please report if there are regressions so that I can fix them,<br />
ideally each one as a new and separated GitHub issue.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2026 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2017-06-27.1395.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
