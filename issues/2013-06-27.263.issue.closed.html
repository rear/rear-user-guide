<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#263 Issue closed: RHEL4 Disk layout problems - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#263 Issue closed: RHEL4 Disk layout problems";
        var mkdocs_page_input_path = "issues/2013-06-27.263.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_nas.html">Internal Backup with tar to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../scenarios/netfs_rsync.md">Internal Backup with rsync to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/rbme.html">External Backup using RBME</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/restic.html">External Backup using restic</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../development/squash-git-log-commments.html">How to squash git log comments into one line</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#263 Issue closed: RHEL4 Disk layout problems</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="263_issue_closed_rhel4_disk_layout_problems"><a href="https://github.com/rear/rear/issues/263">#263 Issue</a> <code>closed</code>: RHEL4 Disk layout problems<a class="headerlink" href="#263_issue_closed_rhel4_disk_layout_problems" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>bug</code></p>
<h4 id="lpouellet_opened_issue_at_2013-06-27_2007"><img src="https://avatars.githubusercontent.com/u/4854910?v=4" width="50"><a href="https://github.com/lpouellet">lpouellet</a> opened issue at <a href="https://github.com/rear/rear/issues/263">2013-06-27 20:07</a>:<a class="headerlink" href="#lpouellet_opened_issue_at_2013-06-27_2007" title="Permanent link">&para;</a></h4>
<p>Hi<br />
First post,new user, be gentle ;)<br />
First I have to express myself... Rear is the best thing since sliced
bread.</p>
<p>Ok now to serious things.</p>
<p>Source server is running : Red Hat Enterprise Linux ES release 4 (Nahant
Update 9)<br />
Restoring on a proliant dl380 G4</p>
<p>I hit 2 problems during restore:</p>
<ol>
<li>Error: Expecting a partition number.</li>
</ol>
<p>Comes from <code>+++ parted -s /dev/cciss/c0d0 set /dev/cciss/c0d0p3 on</code><br />
why does the "set" is passed a partion instead of only its id?<br />
Temporary fix was to comment out the set.<br />
This happens for all paritions to be created</p>
<ol>
<li>Error: Can't create any more partitions.</li>
</ol>
<!-- -->

<pre><code>+++ echo -e 'Creating partitions for disk /dev/cciss/c0d0 (msdos)'
+++ parted -s /dev/cciss/c0d0 mklabel msdos
+++ parted -s /dev/cciss/c0d0 mkpart primary 0 509
+++ parted -s /dev/cciss/c0d0 mkpart primary 509 100716
+++ parted -s /dev/cciss/c0d0 mkpart primary 100716 220165
+++ parted -s /dev/cciss/c0d0 mkpart primary 220165 220165
+++ parted -s /dev/cciss/c0d0 mkpart logical 220165 264263
</code></pre>
<p>problem was fixed by replacing<br />
<code>+++ parted -s /dev/cciss/c0d0 mkpart primary 220165 220165</code><br />
by<br />
<code>+++ parted -s /dev/cciss/c0d0 mkpart extended 220165 264263</code></p>
<p>After fixing these issues the Disk layout completes and restore starts.</p>
<p>Any advice for a permanent fix?</p>
<h4 id="lpouellet_commented_at_2013-06-27_2037"><img src="https://avatars.githubusercontent.com/u/4854910?v=4" width="50"><a href="https://github.com/lpouellet">lpouellet</a> commented at <a href="https://github.com/rear/rear/issues/263#issuecomment-20153228">2013-06-27 20:37</a>:<a class="headerlink" href="#lpouellet_commented_at_2013-06-27_2037" title="Permanent link">&para;</a></h4>
<p>Running 1.13 , same issue with 1.14</p>
<h4 id="jhoekx_commented_at_2013-06-28_1333"><img src="https://avatars.githubusercontent.com/u/783473?v=4" width="50"><a href="https://github.com/jhoekx">jhoekx</a> commented at <a href="https://github.com/rear/rear/issues/263#issuecomment-20188225">2013-06-28 13:33</a>:<a class="headerlink" href="#jhoekx_commented_at_2013-06-28_1333" title="Permanent link">&para;</a></h4>
<p>Could you post disklayout.conf?</p>
<h4 id="lpouellet_commented_at_2013-06-28_1336"><img src="https://avatars.githubusercontent.com/u/4854910?v=4" width="50"><a href="https://github.com/lpouellet">lpouellet</a> commented at <a href="https://github.com/rear/rear/issues/263#issuecomment-20188344">2013-06-28 13:36</a>:<a class="headerlink" href="#lpouellet_commented_at_2013-06-28_1336" title="Permanent link">&para;</a></h4>
<pre><code>[root@mtl-mon02d ~]# sfdisk -l

Disk /dev/cciss/c0d0: 35132 cylinders, 255 heads, 32 sectors/track
Warning: extended partition does not start at a cylinder boundary.
DOS and Linux will interpret the contents differently.
Warning: The partition table looks like it was made
  for C/H/S=*/255/63 (instead of 35132/255/32).
For this listing I'll assume that geometry.
Units = cylinders of 8225280 bytes, blocks of 1024 bytes, counting from 0

   Device Boot Start     End   #cyls    #blocks   Id  System
/dev/cciss/c0d0p1   *      0+     64      65-    522081   83  Linux
/dev/cciss/c0d0p2         65    6438    6374   51199155   83  Linux
/dev/cciss/c0d0p3       6439   14036    7598   61030935   83  Linux
/dev/cciss/c0d0p4      14037   17843    3807   30579727+   5  Extended
/dev/cciss/c0d0p5      14037+  16841    2805-  22531131   83  Linux
/dev/cciss/c0d0p6      16842+  17582     741-   5952051   83  Linux
/dev/cciss/c0d0p7      17583+  17843     261-   2096451   82  Linux swap

Disk /dev/cciss/c0d1: 70265 cylinders, 255 heads, 32 sectors/track
Units = cylinders of 4177920 bytes, blocks of 1024 bytes, counting from 0

   Device Boot Start     End   #cyls    #blocks   Id  System
/dev/cciss/c0d1p1          0+   9804    9805-  40004384   83  Linux
/dev/cciss/c0d1p2       9805   14707    4903   20004240   83  Linux
/dev/cciss/c0d1p3      14708   22061    7354   30004320   83  Linux
/dev/cciss/c0d1p4      22062   70264   48203  196668240    5  Extended
/dev/cciss/c0d1p5      22062+  22541     480-   1958384   82  Linux swap
[root@mtl-mon02d ~]#
</code></pre>
<p>Disklayout.conf</p>
<pre><code>[root@mtl-mon02d ~]# cat /var/lib/rear/layout/disklayout.conf 
disk /dev/cciss/c0d0 146778685440 msdos
part /dev/cciss/c0d0 534610944 32256 primary boot /dev/cciss/c0d0p1
part /dev/cciss/c0d0 52427934720 534643200 primary none /dev/cciss/c0d0p2
part /dev/cciss/c0d0 62495677440 52962577920 primary  /dev/cciss/c0d0p3
part /dev/cciss/c0d0 1024 115458255360 primary  /dev/cciss/c0d0p4
part /dev/cciss/c0d0 23071878144 115458287616 logical  /dev/cciss/c0d0p5
part /dev/cciss/c0d0 6094900224 138530198016 logical  /dev/cciss/c0d0p6
part /dev/cciss/c0d0 2146765824 144625130496 logical  /dev/cciss/c0d0p7
disk /dev/cciss/c0d1 293564211200 msdos
part /dev/cciss/c0d1 40964489216 16384 primary none /dev/cciss/c0d1p1
part /dev/cciss/c0d1 20484341760 40964505600 primary  /dev/cciss/c0d1p2
part /dev/cciss/c0d1 30724423680 61448847360 primary  /dev/cciss/c0d1p3
part /dev/cciss/c0d1 1024 92173271040 primary  /dev/cciss/c0d1p4
part /dev/cciss/c0d1 2005385216 92173287424 logical  /dev/cciss/c0d1p5
   # disk /dev/hda 4294965248 
fs /dev/cciss/c0d0p2 / ext3 uuid=32d48876-172e-4a2d-8a08-a1689f124622 label=/1 blocksize=4096 reserved_blocks=4% max_mounts=-1 check_interval=0d options=rw
fs /dev/cciss/c0d0p1 /boot ext3 uuid=4a5fb3aa-157b-45e1-b9b0-a99ebefc12c5 label=/boot blocksize=1024 reserved_blocks=5% max_mounts=-1 check_interval=0d options=rw
fs /dev/cciss/c0d0p6 /opt/wily ext3 uuid=aa47a3fa-23df-4b40-836d-9dc521041708 label=/opt/wily1 blocksize=4096 reserved_blocks=4% max_mounts=-1 check_interval=0d options=rw
fs /dev/cciss/c0d0p5 /tmp ext3 uuid=d43f10e8-e2c6-4c18-b985-add8b95901a1 label=/tmp1 blocksize=4096 reserved_blocks=4% max_mounts=-1 check_interval=0d options=rw
fs /dev/cciss/c0d0p3 /var ext3 uuid=eb8abd2f-7611-4f04-98a5-60108a79e0a6 label=/var1 blocksize=4096 reserved_blocks=4% max_mounts=-1 check_interval=0d options=rw
fs /dev/cciss/c0d1p3 /opt/wiki ext3 uuid=70655892-51bf-46cd-b50b-71f95f19c413 label=/opt/wiki blocksize=4096 reserved_blocks=5% max_mounts=23 check_interval=180d options=rw
fs /dev/cciss/c0d1p1 /home ext3 uuid=570f2476-70c1-462a-8017-2fbdd218b230 label=/home blocksize=4096 reserved_blocks=4% max_mounts=20 check_interval=180d options=rw
fs /dev/cciss/c0d1p2 /opt/wily/data ext3 uuid=4fd958cc-36a2-468f-95bc-b7784628a211 label= blocksize=4096 reserved_blocks=5% max_mounts=26 check_interval=180d options=rw
swap /dev/cciss/c0d1p5 uuid= label=
swap /dev/cciss/c0d0p7 uuid= label=
logicaldrive /dev/cciss/c0d0 1|A|1 raid=1 drives=2I:1:1,2I:1:2, spares=1I:1:6, sectors=32 stripesize=128
logicaldrive /dev/cciss/c0d1 1|B|2 raid=5 drives=1I:1:5,2I:1:3,2I:1:4, spares=1I:1:6, sectors=32 stripesize=128
smartarray 1
</code></pre>
<h4 id="dagwieers_commented_at_2013-06-28_2308"><img src="https://avatars.githubusercontent.com/u/388198?u=0732dee3fe5002278cfbf40359ec431bdcf5f06c&v=4" width="50"><a href="https://github.com/dagwieers">dagwieers</a> commented at <a href="https://github.com/rear/rear/issues/263#issuecomment-20219354">2013-06-28 23:08</a>:<a class="headerlink" href="#dagwieers_commented_at_2013-06-28_2308" title="Permanent link">&para;</a></h4>
<p>@lpouellet I improved the code for your first problem. We now moved the
logic to get the partition number from the partition name to a separate
function. And we also trap when for some reason we don't get an integer.</p>
<p>Now to test this on RHEL4, it would be nice if you could send the output
of:</p>
<pre><code>source usr/share/rear/lib/_input-output-functions.sh
source usr/share/rear/lib/layout-functions.sh
get_partition_number /dev/cciss/c0d0p3
</code></pre>
<p>It should return 3 :-)</p>
<h4 id="dagwieers_commented_at_2013-06-28_2319"><img src="https://avatars.githubusercontent.com/u/388198?u=0732dee3fe5002278cfbf40359ec431bdcf5f06c&v=4" width="50"><a href="https://github.com/dagwieers">dagwieers</a> commented at <a href="https://github.com/rear/rear/issues/263#issuecomment-20219652">2013-06-28 23:19</a>:<a class="headerlink" href="#dagwieers_commented_at_2013-06-28_2319" title="Permanent link">&para;</a></h4>
<p>@lpouellet BTW We don't understand how the current or previous
implementation can return /dev/cciss/c0d0p3 for the partition number.
There should be no universe where
<code>echo "/dev/cciss/c0d0p3" | grep -o -E "[0-9]+$"</code> returns more than an
integer.</p>
<h4 id="lpouellet_commented_at_2013-07-03_2038"><img src="https://avatars.githubusercontent.com/u/4854910?v=4" width="50"><a href="https://github.com/lpouellet">lpouellet</a> commented at <a href="https://github.com/rear/rear/issues/263#issuecomment-20443496">2013-07-03 20:38</a>:<a class="headerlink" href="#lpouellet_commented_at_2013-07-03_2038" title="Permanent link">&para;</a></h4>
<p>@dagwieers RHEL4 test results.</p>
<p>[root@mtl-mon02d rear-master]# cat /etc/redhat-release<br />
Red Hat Enterprise Linux ES release 4 (Nahant Update 9)</p>
<p>[root@mtl-mon02d rear-master]# get_partition_number
/dev/cciss/c0d0p3<br />
3<br />
[root@mtl-mon02d rear-master]# get_partition_number
/dev/cciss/c0d0p4<br />
4<br />
[root@mtl-mon02d rear-master]# get_partition_number
/dev/cciss/c0d0p6<br />
6<br />
[root@mtl-mon02d rear-master]# get_partition_number
/dev/cciss/c0d0p9<br />
9<br />
[root@mtl-mon02d rear-master]# get_partition_number
/dev/cciss/c0d0p23<br />
3<br />
[root@mtl-mon02d rear-master]# get_partition_number
/dev/cciss/c0d0p238<br />
8<br />
[root@mtl-mon02d rear-master]# get_partition_number
/dev/cciss/c0d0p999<br />
9<br />
[root@mtl-mon02d rear-master]# get_partition_number
/dev/cciss/c0d0p0<br />
2013-07-03 16:37:12 ERROR: BUG BUG BUG! Partition number '0' of
partition /dev/cciss/c0d0p0 is not a valid number.<br />
......</p>
<p>Aborting due to an error, check for details<br />
0</p>
<h4 id="dagwieers_commented_at_2013-07-03_2106"><img src="https://avatars.githubusercontent.com/u/388198?u=0732dee3fe5002278cfbf40359ec431bdcf5f06c&v=4" width="50"><a href="https://github.com/dagwieers">dagwieers</a> commented at <a href="https://github.com/rear/rear/issues/263#issuecomment-20445107">2013-07-03 21:06</a>:<a class="headerlink" href="#dagwieers_commented_at_2013-07-03_2106" title="Permanent link">&para;</a></h4>
<p>Yup, that's the expected behavior. We only support up to 9 partitions as
the code indicates. @jhoekx said this was a limitation in
Relax-and-Recover in other places anyway. I don't mind to improve the
code (and in the above case it's not that hard) however, in other cases
(see examples in code) it is impossible to know for sure how many digits
at the end represent the partition number. So we ended up not accepting
anything other than 1 to 9.</p>
<p>BTW /dev/cciss/c0d0p0 is not a valid partition number ! Partition
numbers start from 1, e.g. /dev/sda1 !</p>
<h4 id="gdha_commented_at_2013-07-04_0538"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/263#issuecomment-20459875">2013-07-04 05:38</a>:<a class="headerlink" href="#gdha_commented_at_2013-07-04_0538" title="Permanent link">&para;</a></h4>
<p>@dagwieers @jhoekx If 9 partitions is hard limitation by rear then we
better clearly state this in our documentation. Is there any reason why
we don't go beyond the number 9 except for the fact we don't like 2
digit numbers?</p>
<h4 id="dagwieers_commented_at_2013-07-04_0732"><img src="https://avatars.githubusercontent.com/u/388198?u=0732dee3fe5002278cfbf40359ec431bdcf5f06c&v=4" width="50"><a href="https://github.com/dagwieers">dagwieers</a> commented at <a href="https://github.com/rear/rear/issues/263#issuecomment-20462931">2013-07-04 07:32</a>:<a class="headerlink" href="#dagwieers_commented_at_2013-07-04_0732" title="Permanent link">&para;</a></h4>
<p>@gdha There's no dislike for 2 digit numbers, fact is that you cannot
create a function that correctly get partition numbers for all cases.
(There is no sane way to get the partition number for cases like:
/dev/mapper/36001438005deb05d0000e00005c400001) Where exactly the other
limitation of 9 partitions is, I don't know. (That said, I never
encountered a system with more than 9 partitions these days since the
general availability of LVM, usually there are only 1 or 2)</p>
<p>BTW Like I mentioned in #183, to me the above partition is <em>not</em> a
valid partition name according to the kernel, it should have been
/dev/mapper/36001438005deb05d0000e00005c40000p1 according to the rules.
I don't know where that name comes from.</p>
<h4 id="jhoekx_commented_at_2013-07-04_0749"><img src="https://avatars.githubusercontent.com/u/783473?v=4" width="50"><a href="https://github.com/jhoekx">jhoekx</a> commented at <a href="https://github.com/rear/rear/issues/263#issuecomment-20463505">2013-07-04 07:49</a>:<a class="headerlink" href="#jhoekx_commented_at_2013-07-04_0749" title="Permanent link">&para;</a></h4>
<p>The whole partitioning stuff is not nicely written anyway (and I say
this having written it myself - twice). My decision to read the parted
output was not good for old systems. One day I should add a code branch
that uses sfdisk when the 'machine readable' parted output is not
available. There are various problems all around, but I think the
limitation is actually at most 8 partitions because of how extended
partitions work.</p>
<h4 id="gdha_commented_at_2013-07-04_0821"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/263#issuecomment-20464763">2013-07-04 08:21</a>:<a class="headerlink" href="#gdha_commented_at_2013-07-04_0821" title="Permanent link">&para;</a></h4>
<p>@jhoekx The GPT standard allows maximum of 128 partitions per disk<br />
@dagwieers #183 - the code generated was not correct so I wouldn't
bother too much with what was original written (by me)</p>
<h4 id="jhoekx_commented_at_2013-07-04_0830"><img src="https://avatars.githubusercontent.com/u/783473?v=4" width="50"><a href="https://github.com/jhoekx">jhoekx</a> commented at <a href="https://github.com/rear/rear/issues/263#issuecomment-20465129">2013-07-04 08:30</a>:<a class="headerlink" href="#jhoekx_commented_at_2013-07-04_0830" title="Permanent link">&para;</a></h4>
<p>What I meant is the actual limitation <em>inside ReaR</em> is 8 partitions.</p>
<h4 id="dagwieers_commented_at_2013-07-04_2250"><img src="https://avatars.githubusercontent.com/u/388198?u=0732dee3fe5002278cfbf40359ec431bdcf5f06c&v=4" width="50"><a href="https://github.com/dagwieers">dagwieers</a> commented at <a href="https://github.com/rear/rear/issues/263#issuecomment-20495669">2013-07-04 22:50</a>:<a class="headerlink" href="#dagwieers_commented_at_2013-07-04_2250" title="Permanent link">&para;</a></h4>
<p>@gdha Can you tell me what system has a partition named
<strong>/dev/mapper/36001438005deb05d0000e00005c400001</strong> instead of
<strong>/dev/mapper/36001438005deb05d0000e00005c40000p1</strong> ? Because I don't
think it is a correct name for a partition... It would be easy if the
example is wrong.</p>
<h4 id="gdha_commented_at_2013-07-05_0623"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/263#issuecomment-20502874">2013-07-05 06:23</a>:<a class="headerlink" href="#gdha_commented_at_2013-07-05_0623" title="Permanent link">&para;</a></h4>
<p>@dagwieers I've checked my old notes and the <code>disklayout</code> file was
beginning with:</p>
<pre><code>disk /dev/mapper/36001438005deb05d0000e00005c40000 299959511040 gpt
part /dev/mapper/36001438005deb05d0000e00005c40000 1069254144 32256 primary boot /dev/mapper/36001438005deb05d0000e00005c40000_part1
part /dev/mapper/36001438005deb05d0000e00005c40000 321053293056 1069286400 primary lvm /dev/mapper/36001438005deb05d0000e00005c40000_part2
</code></pre>
<p>As I previously mentioned the code which produces the <code>diskrestore.sh</code>
script contained a bug and the interpretation was incorrect somehow.
However, I'm not sure it has been fixed as I couldn't test it anymore
since then...</p>
<h4 id="dagwieers_commented_at_2013-07-05_0700"><img src="https://avatars.githubusercontent.com/u/388198?u=0732dee3fe5002278cfbf40359ec431bdcf5f06c&v=4" width="50"><a href="https://github.com/dagwieers">dagwieers</a> commented at <a href="https://github.com/rear/rear/issues/263#issuecomment-20503760">2013-07-05 07:00</a>:<a class="headerlink" href="#dagwieers_commented_at_2013-07-05_0700" title="Permanent link">&para;</a></h4>
<p>@gdha Where did the device name
<strong>/dev/mapper/36001438005deb05d0000e00005c400001</strong> come from ? Is that
device real or not.</p>
<h4 id="gdha_commented_at_2013-07-05_0714"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/263#issuecomment-20504158">2013-07-05 07:14</a>:<a class="headerlink" href="#gdha_commented_at_2013-07-05_0714" title="Permanent link">&para;</a></h4>
<p>@dagwieers it was not a real device. It was the result of our code base
not fully understanding devices that only contains numbers</p>
<h4 id="dagwieers_commented_at_2013-07-05_0740"><img src="https://avatars.githubusercontent.com/u/388198?u=0732dee3fe5002278cfbf40359ec431bdcf5f06c&v=4" width="50"><a href="https://github.com/dagwieers">dagwieers</a> commented at <a href="https://github.com/rear/rear/issues/263#issuecomment-20504923">2013-07-05 07:40</a>:<a class="headerlink" href="#dagwieers_commented_at_2013-07-05_0740" title="Permanent link">&para;</a></h4>
<p>@gdha Perfect :-) A fix is on the way...</p>
<h4 id="gdha_commented_at_2013-07-11_0700"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/263#issuecomment-20793695">2013-07-11 07:00</a>:<a class="headerlink" href="#gdha_commented_at_2013-07-11_0700" title="Permanent link">&para;</a></h4>
<p>@lpouellet has your issue been resolved by the fix of Dag? Please
confirm.</p>
<h4 id="dagwieers_commented_at_2013-07-11_2325"><img src="https://avatars.githubusercontent.com/u/388198?u=0732dee3fe5002278cfbf40359ec431bdcf5f06c&v=4" width="50"><a href="https://github.com/dagwieers">dagwieers</a> commented at <a href="https://github.com/rear/rear/issues/263#issuecomment-20849657">2013-07-11 23:25</a>:<a class="headerlink" href="#dagwieers_commented_at_2013-07-11_2325" title="Permanent link">&para;</a></h4>
<p>@gdha There are two issues in this report and we didn't tackle the
second one. I looked at it, but it seems much more complicated than I
had hoped it to be :-/ The problem seems to be tuned for the expertise
of @jhoekx ;-)</p>
<h4 id="gdha_commented_at_2013-08-09_1026"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/263#issuecomment-22386618">2013-08-09 10:26</a>:<a class="headerlink" href="#gdha_commented_at_2013-08-09_1026" title="Permanent link">&para;</a></h4>
<p>@jhoekx Do you have some spare cycles in the near future to have a look
at issue 2?</p>
<h4 id="jhoekx_commented_at_2013-08-09_1040"><img src="https://avatars.githubusercontent.com/u/783473?v=4" width="50"><a href="https://github.com/jhoekx">jhoekx</a> commented at <a href="https://github.com/rear/rear/issues/263#issuecomment-22387072">2013-08-09 10:40</a>:<a class="headerlink" href="#jhoekx_commented_at_2013-08-09_1040" title="Permanent link">&para;</a></h4>
<p>It's strange that we're not detecting it as an extended partition.</p>
<p>We'd need a <code>rear -D savelayout</code> logfile to know more.</p>
<h4 id="gdha_commented_at_2013-09-03_1114"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/263#issuecomment-23704681">2013-09-03 11:14</a>:<a class="headerlink" href="#gdha_commented_at_2013-09-03_1114" title="Permanent link">&para;</a></h4>
<p>@lpouellet Can you send us the debug logfile as requested by @jhoekx ?</p>
<h4 id="gdha_commented_at_2013-10-02_1145"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/263#issuecomment-25532217">2013-10-02 11:45</a>:<a class="headerlink" href="#gdha_commented_at_2013-10-02_1145" title="Permanent link">&para;</a></h4>
<p>@lpouellet is it Ok we close this issue? When we don't have a response
within a month I'll close it automatically.</p>
<h4 id="markusroth_commented_at_2013-10-28_0703"><img src="https://avatars.githubusercontent.com/u/5772956?v=4" width="50"><a href="https://github.com/MarkusRoth">MarkusRoth</a> commented at <a href="https://github.com/rear/rear/issues/263#issuecomment-27192476">2013-10-28 07:03</a>:<a class="headerlink" href="#markusroth_commented_at_2013-10-28_0703" title="Permanent link">&para;</a></h4>
<p>@gdha Here is the output of rear -D savelayout of the RHEL system.<br />
<a href="https://gist.github.com/MarkusRoth/7192428">https://gist.github.com/MarkusRoth/7192428</a></p>
<h4 id="gdha_commented_at_2013-10-28_0757"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/263#issuecomment-27194215">2013-10-28 07:57</a>:<a class="headerlink" href="#gdha_commented_at_2013-10-28_0757" title="Permanent link">&para;</a></h4>
<p>@MarkusRoth Think output of <code>rear -D savelayout</code> is missing</p>
<h4 id="markusroth_commented_at_2013-10-28_0802"><img src="https://avatars.githubusercontent.com/u/5772956?v=4" width="50"><a href="https://github.com/MarkusRoth">MarkusRoth</a> commented at <a href="https://github.com/rear/rear/issues/263#issuecomment-27194382">2013-10-28 08:02</a>:<a class="headerlink" href="#markusroth_commented_at_2013-10-28_0802" title="Permanent link">&para;</a></h4>
<p>Can't you access the link to the gist?</p>
<p><a href="https://gist.github.com/MarkusRoth/7192428">https://gist.github.com/MarkusRoth/7192428</a></p>
<h4 id="gdha_commented_at_2013-10-28_0806"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/263#issuecomment-27194541">2013-10-28 08:06</a>:<a class="headerlink" href="#gdha_commented_at_2013-10-28_0806" title="Permanent link">&para;</a></h4>
<p>Yes, I can and I see the content of:</p>
<blockquote>
<ol>
<li>Disklayout.conf</li>
<li>df-txt</li>
<li>diskdeps.conf</li>
<li>disktodo.conf</li>
</ol>
</blockquote>
<p><em>However, I'm missing the debug output <code>rear -D savelayout</code></em></p>
<p>On Mon, Oct 28, 2013 at 9:02 AM, MarkusRoth
<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;&#119;&#114;&#111;&#116;&#101;">&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;&#119;&#114;&#111;&#116;&#101;</a>:</p>
<blockquote>
<p>Can't you access the link to the gist?</p>
<p><a href="https://gist.github.com/MarkusRoth/7192428">https://gist.github.com/MarkusRoth/7192428</a></p>
<p>—<br />
Reply to this email directly or view it on
GitHubhttps://github.com/rear/rear/issues/263#issuecomment-27194382<br />
.</p>
</blockquote>
<h4 id="markusroth_commented_at_2013-10-28_0820"><img src="https://avatars.githubusercontent.com/u/5772956?v=4" width="50"><a href="https://github.com/MarkusRoth">MarkusRoth</a> commented at <a href="https://github.com/rear/rear/issues/263#issuecomment-27195156">2013-10-28 08:20</a>:<a class="headerlink" href="#markusroth_commented_at_2013-10-28_0820" title="Permanent link">&para;</a></h4>
<p>Sorry, I've actually forgotten the debug output :-(</p>
<p>Now it is attached in gist.</p>
<hr />
<p>Von: gdha [<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;">&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a>]<br />
Gesendet: Montag, 28. Oktober 2013 09:06<br />
An: rear/rear<br />
Cc: Roth, Markus<br />
Betreff: Re: [rear] RHEL4 Disk layout problems (#263)</p>
<p>Yes, I can and I see the content of:</p>
<blockquote>
<ol>
<li>Disklayout.conf</li>
<li>df-txt</li>
<li>diskdeps.conf</li>
<li>disktodo.conf</li>
</ol>
</blockquote>
<p><em>However, I'm missing the debug output <code>rear -D savelayout</code></em></p>
<p>On Mon, Oct 28, 2013 at 9:02 AM, MarkusRoth
<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;&#119;&#114;&#111;&#116;&#101;">&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;&#119;&#114;&#111;&#116;&#101;</a>:</p>
<blockquote>
<p>Can't you access the link to the gist?</p>
<p><a href="https://gist.github.com/MarkusRoth/7192428">https://gist.github.com/MarkusRoth/7192428</a></p>
<p>—<br />
Reply to this email directly or view it on
GitHubhttps://github.com/rear/rear/issues/263#issuecomment-27194382<br />
.</p>
</blockquote>
<p>—<br />
Reply to this email directly or view it on
GitHubhttps://github.com/rear/rear/issues/263#issuecomment-27194541.</p>
<h4 id="gdha_commented_at_2013-11-25_0918"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/263#issuecomment-29186877">2013-11-25 09:18</a>:<a class="headerlink" href="#gdha_commented_at_2013-11-25_0918" title="Permanent link">&para;</a></h4>
<p>@lpouellet I'll close this ticket as it is duplicate one (see issue
#319)</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2025 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2013-06-27.263.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
