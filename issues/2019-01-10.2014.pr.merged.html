<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#2014 PR merged: Improve rear dump output to clearly distinguish array elements - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#2014 PR merged: Improve rear dump output to clearly distinguish array elements";
        var mkdocs_page_input_path = "issues/2019-01-10.2014.pr.merged.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#2014 PR merged: Improve rear dump output to clearly distinguish array elements</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="2014_pr_merged_improve_rear_dump_output_to_clearly_distinguish_array_elements"><a href="https://github.com/rear/rear/pull/2014">#2014 PR</a> <code>merged</code>: Improve rear dump output to clearly distinguish array elements<a class="headerlink" href="#2014_pr_merged_improve_rear_dump_output_to_clearly_distinguish_array_elements" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>fixed / solved / done</code></p>
<h4 id="jsmeix_opened_issue_at_2019-01-10_1613"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> opened issue at <a href="https://github.com/rear/rear/pull/2014">2019-01-10 16:13</a>:<a class="headerlink" href="#jsmeix_opened_issue_at_2019-01-10_1613" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>Type: <strong>Minor Bug Fix</strong> <strong>Enhancement</strong></p>
</li>
<li>
<p>Impact: <strong>Low</strong></p>
</li>
<li>
<p>Reference to related issue (URL):<br />
<a href="https://github.com/rear/rear/pull/2011#issuecomment-453085678">https://github.com/rear/rear/pull/2011#issuecomment-453085678</a></p>
</li>
<li>
<p>How was this pull request tested?<br />
    By me on my openSUSE Leap 15.0 system.</p>
</li>
<li>
<p>Brief description of the changes in this pull request:</p>
</li>
</ul>
<p>Now <code>rear dump</code> shows array variable elements separated by <code>'</code>
characters as</p>
<pre><code>    ARRAY_VARIABLE_NAME = 'first element' 'second element'
</code></pre>
<p>for example with <code>BACKUP_RSYNC_OPTIONS=( this that 'something else' )</code><br />
(excerpts):</p>
<pre><code># usr/sbin/rear dump
...
    BACKUP_RSYNC_OPTIONS = 'this' 'that' 'something else' 
...
    BACKUP_PROG_EXCLUDE = '/tmp/*' '/dev/shm/*' '/root/rear.github.master/var/lib/rear/output/*' '/nfs/*' '/tmp/rear.Prkdrs6sR9pybOv'
</code></pre>
<p>Before it would have been e.g.</p>
<pre><code>    BACKUP_RSYNC_OPTIONS = this that something else
</code></pre>
<p>where it is not clear that actually <code>something else</code> is one array
element.</p>
<p>I also cleaned up the indentation in lib/dump-workflow.sh to N*4
spaces.</p>
<h4 id="schlomo_commented_at_2019-01-10_1643"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/pull/2014#issuecomment-453165177">2019-01-10 16:43</a>:<a class="headerlink" href="#schlomo_commented_at_2019-01-10_1643" title="Permanent link">&para;</a></h4>
<p>Good idea, maybe we should also show which variable is an array and
which isn't? Maybe produce output similar to that of <code>declare -x</code>? IMHO
would be good if the output could be posted back into the configuration.</p>
<p>Idempotency between dump output and configuration input, in a way.</p>
<p>Great work!</p>
<h4 id="jsmeix_commented_at_2019-01-11_1230"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/2014#issuecomment-453502485">2019-01-11 12:30</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-01-11_1230" title="Permanent link">&para;</a></h4>
<p>@schlomo<br />
thank you for having a look.</p>
<p>I was also thinking about using <code>declare</code><br />
but I was thinking about using <code>declare -p</code><br />
to generate the output e.g. somehow as in</p>
<pre><code># STRING="string of words"

# export ARRAY=( '' this ' ' that 'something else' )

# declare -p STRING ARRAY
declare -- STRING="string of words"
declare -ax ARRAY=([0]="" [1]="this" [2]=" " [3]="that" [4]="something else")
</code></pre>
<p>This way <code>rear dump</code> could output</p>
<pre><code>    STRING="string of words"
    ARRAY=([0]="" [1]="this" [2]=" " [3]="that" [4]="something else")
</code></pre>
<p>that can be sourced to set STRING and ARRAY<br />
but it is less readable compared to the current output via this pull
request</p>
<pre><code>    STRING = 'string of words'
     ARRAY = '' 'this' ' ' 'that' 'something else'
</code></pre>
<p>If <code>rear dump</code> would output the <code>declate -p</code> output as is like</p>
<pre><code>    declare -- STRING="string of words"
    declare -ax ARRAY=([0]="" [1]="this" [2]=" " [3]="that" [4]="something else")
</code></pre>
<p>the output becomes even harder to read for humans<br />
but this could be sourced to set STRING and ARRAY<br />
exactly as it was before (i.e. ARRAY gets even exported).</p>
<p>Hopefully I can continue next week (as time permits)...</p>
<h4 id="schlomo_commented_at_2019-01-11_1233"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/pull/2014#issuecomment-453503218">2019-01-11 12:33</a>:<a class="headerlink" href="#schlomo_commented_at_2019-01-11_1233" title="Permanent link">&para;</a></h4>
<p>Yes, I meant <code>-p</code> indeed. How about this:</p>
<pre><code># declare -p BASH_VERSINFO BASH_VERSION NASTY| sed -e 's/^declare -[[:alpha:]-]* //' -e 's/\([( ]\)\[[[:digit:]]\+\]=/\1/g'
BASH_VERSINFO=("4" "4" "19" "1" "release" "x86_64-pc-linux-gnu")
BASH_VERSION="4.4.19(1)-release"
NASTY=("/foo/bar*" "\\twith backslash and 'quotes'\"")
</code></pre>
<p>Personally I wouldn't mind the more bashy output format</p>
<h4 id="jsmeix_commented_at_2019-01-11_1234"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/2014#issuecomment-453503453">2019-01-11 12:34</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-01-11_1234" title="Permanent link">&para;</a></h4>
<p>@schlomo<br />
what do you mean with "copy-paste compatible with the configuration
files"?</p>
<p>I guess first and foremost no artificual spaces around the <code>=</code><br />
and in case of arrays enclosing it within <code>( ... )</code> as in</p>
<pre><code>    STRING='string of words'
     ARRAY=( '' 'this' ' ' 'that' 'something else' )
</code></pre>
<p>Something else?</p>
<p>I was always wondering why there are the artificual spaces around <code>=</code><br />
which make it impossible to copy&amp;paste lines as variable assignent.</p>
<h4 id="schlomo_commented_at_2019-01-11_1255"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/pull/2014#issuecomment-453508471">2019-01-11 12:55</a>:<a class="headerlink" href="#schlomo_commented_at_2019-01-11_1255" title="Permanent link">&para;</a></h4>
<p>I mean that if we now change the output of <code>rear dump</code> to be more
precise then we should also gain the ability to paste the output of
<code>rear dump</code> into the configuration. That means that the output must look
like the output of <code>declare -p</code>, more or less.</p>
<p>Previously, <code>rear dump</code> was meant to be easy to read at the cost of
being less precise. For human consumption IMHO the precise details of
the arrays is not so crucial, on most cases it is obvious.</p>
<p>If we start to be precise then we can also enjoy the ability to
copy-paste the output.</p>
<p>Just my opinion, what do you think @rear/contributors ?</p>
<h4 id="jsmeix_commented_at_2019-01-11_1259"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/2014#issuecomment-453509407">2019-01-11 12:59</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-01-11_1259" title="Permanent link">&para;</a></h4>
<p>The</p>
<pre><code>declare -p VARIABLE | sed -e 's/^declare -[[:alpha:]-]* //' -e 's/\([( ]\)\[[[:digit:]]\+\]=/\1/g'
</code></pre>
<p>is not fully fail safe.</p>
<p>Deliberately evil self-implicating array element content breaks it:</p>
<pre><code># ARRAY=( foo 'declare -ax ARRAY=([0]="foo" [1]="bar")' bar )

# for e in "${ARRAY[@]}" ; do echo "'$e'" ; done
'foo'
'declare -ax ARRAY=([0]="foo" [1]="bar")'
'bar'

# declare -p ARRAY
declare -ax ARRAY=([0]="foo" [1]="declare -ax ARRAY=([0]=\"foo\" [1]=\"bar\")" [2]="bar")

# declare -p ARRAY | sed -e 's/^declare -[[:alpha:]-]* //' -e 's/\([( ]\)\[[[:digit:]]\+\]=/\1/g'
ARRAY=("foo" "declare -ax ARRAY=(\"foo\" \"bar\")" "bar")

# ARRAY=("foo" "declare -ax ARRAY=(\"foo\" \"bar\")" "bar")

# for e in "${ARRAY[@]}" ; do echo "'$e'" ; done
'foo'
'declare -ax ARRAY=("foo" "bar")'
'bar'

# declare -ax ARRAY=([0]="foo" [1]="declare -ax ARRAY=([0]=\"foo\" [1]=\"bar\")" [2]="bar")

# for e in "${ARRAY[@]}" ; do echo "'$e'" ; done
'foo'
'declare -ax ARRAY=([0]="foo" [1]="bar")'
'bar'
</code></pre>
<p>So plain <code>declare -p ARRAY</code> output seems to work fail safe in any case<br />
while readability improvements via <code>sed</code> fall apart in special cases.</p>
<h4 id="jsmeix_commented_at_2019-01-11_1303"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/2014#issuecomment-453510373">2019-01-11 13:03</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-01-11_1303" title="Permanent link">&para;</a></h4>
<p>In my opinion be precise is more important for ReaR's use-case<br />
than to make things look nicer (at the expense of subtle errors)<br />
because ReaR is meant for experienced admins who should<br />
be able to also understand the plain <code>declare -p</code> output.</p>
<h4 id="jsmeix_commented_at_2019-01-11_1312"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/2014#issuecomment-453512595">2019-01-11 13:12</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-01-11_1312" title="Permanent link">&para;</a></h4>
<p>The current output via this pull request falls apart for</p>
<pre><code>BACKUP_RSYNC_NASTY=( "/foo/bar*" "\\twith backslash and 'quotes'\"" )
</code></pre>
<p>that is shown in the <code>rear dup</code> output as</p>
<pre><code>    BACKUP_RSYNC_NASTY = '/foo/bar*' '        with backslash and 'quotes'"'
</code></pre>
<p>in particular the <code>\t</code> got somehow evaluated...</p>
<h4 id="schlomo_commented_at_2019-01-11_1320"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/pull/2014#issuecomment-453514528">2019-01-11 13:20</a>:<a class="headerlink" href="#schlomo_commented_at_2019-01-11_1320" title="Permanent link">&para;</a></h4>
<p>Probably because of the <code>echo -e</code> in
<a href="https://github.com/rear/rear/blob/bf3c3cc4adee1851846a9876f83e8c8ffb4f3df8/usr/share/rear/lib/_input-output-functions.sh#L249">https://github.com/rear/rear/blob/bf3c3cc4adee1851846a9876f83e8c8ffb4f3df8/usr/share/rear/lib/_input-output-functions.sh#L249</a></p>
<p>Probably <code>LogPrint</code> is the wrong function for this sort of output. Maybe
we need to add a new <strong>Raw</strong>LogPrint function or support passing in
command line options to the existing functions.</p>
<h4 id="jsmeix_commented_at_2019-01-11_1338"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/2014#issuecomment-453519023">2019-01-11 13:38</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-01-11_1338" title="Permanent link">&para;</a></h4>
<p>The only places where <code>\</code> are used in <code>*Print</code> functions<br />
seem to be (just a quick <code>find&amp;grep</code>, no deeper analysis):</p>
<pre><code># find usr/sbin/rear usr/share/rear | xargs grep -oh 'Print "[^"]*"' 2&gt;/dev/null | grep '\\' | sort -u
Print "Creating $disk_image_size_MiB MiB raw disk image \"
Print "Decrypting backup archive with key defined in variable \$BACKUP_PROG_CRYPT_KEY"
Print "Encrypting backup archive with key defined in variable \$BACKUP_PROG_CRYPT_KEY"
Print "If the NSR_RETENTION_TIME=\"
Print "Using PBA image file \"
Print "Using local PBA image file \"
</code></pre>
<p>so that <code>echo -e</code> is perhaps not really needed in practice?</p>
<h4 id="schlomo_commented_at_2019-01-11_1351"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/pull/2014#issuecomment-453522834">2019-01-11 13:51</a>:<a class="headerlink" href="#schlomo_commented_at_2019-01-11_1351" title="Permanent link">&para;</a></h4>
<p>The cases you found seem to protect <code>$</code> or <code>"</code> from being interpreted. I
checked with <code>git grep 'Print.*\\t'</code> (and the same for <code>\n</code>) and also
couldn't find anything.</p>
<p>It is worth trying to remove the <code>-e</code> from the <code>Print</code> function. Since
the <code>Log</code> function does <strong>not</strong> have the <code>-e</code> option that might actually
be a functional improvement as it makes sure that console and log output
are the same.</p>
<h4 id="schlomo_commented_at_2019-01-14_1240"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/pull/2014#issuecomment-453991671">2019-01-14 12:40</a>:<a class="headerlink" href="#schlomo_commented_at_2019-01-14_1240" title="Permanent link">&para;</a></h4>
<p>Can you please post a <code>rear dump</code> example output here? Thanks</p>
<h4 id="jsmeix_commented_at_2019-01-14_1240"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/2014#issuecomment-453991736">2019-01-14 12:40</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-01-14_1240" title="Permanent link">&para;</a></h4>
<p>To be able to return back to a less incompatible change<br />
I implement copy-and-paste compatible output in steps<br />
so that I could easily go back to a particular git commit.</p>
<p>My latest commit<br />
<a href="https://github.com/rear/rear/pull/2014/commits/fa6b9e6c21d9e0a81a10aa3335feb55cc1a62b66">https://github.com/rear/rear/pull/2014/commits/fa6b9e6c21d9e0a81a10aa3335feb55cc1a62b66</a><br />
implements copy-and-paste compatible output<br />
not yet by using the <code>declare -p</code> output but more as it was before<br />
but now with arrays shown as arrays e.g. as in</p>
<pre><code>Backup with NETFS:
              NETFS_KEEP_OLD_BACKUP_COPY=''
                            NETFS_PREFIX='g243'
              NETFS_RESTORE_CAPABILITIES=( 'No'  )
                   BACKUP_DUPLICITY_NAME='rear-backup'
                  BACKUP_INTEGRITY_CHECK=''
                         BACKUP_MOUNTCMD=''
                     BACKUP_ONLY_EXCLUDE='no'
                     BACKUP_ONLY_INCLUDE='no'
                          BACKUP_OPTIONS='nfsvers=3,nolock'
      BACKUP_RESTORE_MOVE_AWAY_DIRECTORY='/root/rear.github.master/var/lib/rear/moved_away_after_backup_restore/'
          BACKUP_RESTORE_MOVE_AWAY_FILES=( '/boot/grub/grubenv' '/boot/grub2/grubenv'  )
                      BACKUP_RSYNC_ARRAY=( 'foo' 'declare -ax ARRAY=([0]="foo" [1]="bar")' 'bar'  )
                      BACKUP_RSYNC_NASTY=( '/foo/bar*' '        with backslash and 'quotes'"'  )
                    BACKUP_RSYNC_OPTIONS=( '' 'this' ' ' 'that' 'something else'  )
                     BACKUP_RSYNC_STRING='string of words'
                  BACKUP_SELINUX_DISABLE='1'
                             BACKUP_TYPE=''
                        BACKUP_UMOUNTCMD=''
                              BACKUP_URL='nfs://10.160.67.243/nfs'
</code></pre>
<p>which is still not yet right for</p>
<pre><code>BACKUP_RSYNC_NASTY=( "/foo/bar*" "\\twith backslash and 'quotes'\"" )


#### &lt;img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"&gt;[schlomo](https://github.com/schlomo) commented at [2019-01-14 12:48](https://github.com/rear/rear/pull/2014#issuecomment-453993548):

@jsmeix this looks really nice! Please note that the output of `BACKUP_RSYNC_NASTY` is actually wrong, the nested quotes are not handles properly. I think that making the regex not greedy in my `sed` suggestion will solve the example you gave above. I'd caution against re-implementing the functionality of `declare -p` and hope that we can find a way to utilize it.

#### &lt;img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&amp;v=4" width="50"&gt;[jsmeix](https://github.com/jsmeix) commented at [2019-01-14 12:54](https://github.com/rear/rear/pull/2014#issuecomment-453995151):

My next step towards using the `declare -p` output as is
is commit
https://github.com/rear/rear/pull/2014/commits/a9e954a45c4aaae640569a3996d29d30ac63f50e
which removes the `-e` option from the `echo` commands
in lib/_input-output-functions.sh to output unchanged values
which is an any case needed to show variable values as is
(independent of what the `dump` workflow does), think about
user messages that show whatever variable values to the user
where the variable values should not be somehow interpreted.

#### &lt;img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&amp;v=4" width="50"&gt;[jsmeix](https://github.com/jsmeix) commented at [2019-01-14 12:56](https://github.com/rear/rear/pull/2014#issuecomment-453995628):

Now I will implement showing the `declare -p` output as is
in the `dump` workflow, the commit will happen probably tomorrow...

#### &lt;img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"&gt;[schlomo](https://github.com/schlomo) commented at [2019-01-14 12:59](https://github.com/rear/rear/pull/2014#issuecomment-453996364):

I looked again at your example and at the `sed` line. It actually works "as designed" and I would consider the individual assignment of array elements an unnecessary feature.

We do not have any configuration feature that relies on specific array indices and I would veto any such feature as this would be way above our average user's experience.

You can decide. I'll go along with using the `declare -p` output as-is and with beautifying it via this `sed` snippet while knowing that it handles only "plain" arrays.

#### &lt;img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&amp;v=4" width="50"&gt;[jsmeix](https://github.com/jsmeix) commented at [2019-01-15 13:41](https://github.com/rear/rear/pull/2014#issuecomment-454395650):

With my commit
https://github.com/rear/rear/pull/2014/commits/d97c6f8ea2c05085e20555adfcea5a45e4dc1fc1
the dump workflow shows the `declare -p`
output which gets beautified/simplified unless in debug mode
so that it is possible (via debug mode) to get correct output
even in special cases where the beautified output gets wrong:
</code></pre>
<h1 id="grep_backup_rsync_options_etcrearlocalconf">grep BACKUP_RSYNC_OPTIONS etc/rear/local.conf<a class="headerlink" href="#grep_backup_rsync_options_etcrearlocalconf" title="Permanent link">&para;</a></h1>
<p>BACKUP_RSYNC_OPTIONS=( '' this ' ' that 'something else' "don't use
brackets '[...]' as in [123]='foo' (it fails)" 'end' )</p>
<h1 id="usrsbinrear_dump_grep_backup_rsync_options">usr/sbin/rear dump | grep BACKUP_RSYNC_OPTIONS<a class="headerlink" href="#usrsbinrear_dump_grep_backup_rsync_options" title="Permanent link">&para;</a></h1>
<p>BACKUP_RSYNC_OPTIONS=("" "this" " " "that" "something else" "don't use
brackets '[...]' as in 'foo' (it fails)" "end")</p>
<h1 id="usrsbinrear_-d_dump_grep_backup_rsync_options">usr/sbin/rear -d dump | grep BACKUP_RSYNC_OPTIONS<a class="headerlink" href="#usrsbinrear_-d_dump_grep_backup_rsync_options" title="Permanent link">&para;</a></h1>
<p>declare -a BACKUP_RSYNC_OPTIONS=([0]="" [1]="this" [2]=" "
[3]="that" [4]="something else" [5]="don't use brackets '[...]'
as in [123]='foo' (it fails)" [6]="end")</p>
<pre><code>Furthermore I made the output so that it can be directly sourced
(unless in verbose mode)
</code></pre>
<h1 id="source_usrsbinrear_dump_echo_ok_echo_fail">source &lt;( usr/sbin/rear dump ) &amp;&amp; echo OK || echo FAIL<a class="headerlink" href="#source_usrsbinrear_dump_echo_ok_echo_fail" title="Permanent link">&para;</a></h1>
<p>OK</p>
<h1 id="source_usrsbinrear_-v_dump_echo_ok_echo_fail">source &lt;( usr/sbin/rear -v dump ) &amp;&amp; echo OK || echo FAIL<a class="headerlink" href="#source_usrsbinrear_-v_dump_echo_ok_echo_fail" title="Permanent link">&para;</a></h1>
<p>If 'Relax-and-Recover' is not a typo you can use command-not-found to
lookup the package that contains it, like this:<br />
cnf Relax-and-Recover<br />
-bash: /dev/fd/63: line 2: syntax error near unexpected token
<code>(' -bash: /dev/fd/63: line 2:</code>Running rear dump (PID 18114)'<br />
FAIL</p>
<pre><code>Because debug mode implies verbose mode it is not possible to get
correct output even in special cases where the beautified output gets wrong
that can be directly sourced.

Here how full output looks like
in normal mode
</code></pre>
<h1 id="usrsbinrear_dump">usr/sbin/rear dump<a class="headerlink" href="#usrsbinrear_dump" title="Permanent link">&para;</a></h1>
<h1 id="begin_dumping_out_configuration_and_system_information">Begin dumping out configuration and system information:<a class="headerlink" href="#begin_dumping_out_configuration_and_system_information" title="Permanent link">&para;</a></h1>
<h1 id="this_is_a_linux-x86_64_system_compatible_with_linux-i386">This is a 'Linux-x86_64' system, compatible with 'Linux-i386'.<a class="headerlink" href="#this_is_a_linux-x86_64_system_compatible_with_linux-i386" title="Permanent link">&para;</a></h1>
<h1 id="configuration_tree">Configuration tree:<a class="headerlink" href="#configuration_tree" title="Permanent link">&para;</a></h1>
<h1 id="linux-i386conf_ok">Linux-i386.conf : OK<a class="headerlink" href="#linux-i386conf_ok" title="Permanent link">&para;</a></h1>
<h1 id="gnulinuxconf_ok">GNU/Linux.conf : OK<a class="headerlink" href="#gnulinuxconf_ok" title="Permanent link">&para;</a></h1>
<h1 id="suseconf_missingempty">SUSE.conf : missing/empty<a class="headerlink" href="#suseconf_missingempty" title="Permanent link">&para;</a></h1>
<h1 id="susei386conf_missingempty">SUSE/i386.conf : missing/empty<a class="headerlink" href="#susei386conf_missingempty" title="Permanent link">&para;</a></h1>
<h1 id="suse15conf_missingempty">SUSE/15.conf : missing/empty<a class="headerlink" href="#suse15conf_missingempty" title="Permanent link">&para;</a></h1>
<h1 id="suse15i386conf_missingempty">SUSE/15/i386.conf : missing/empty<a class="headerlink" href="#suse15i386conf_missingempty" title="Permanent link">&para;</a></h1>
<h1 id="suse_linuxconf_ok">SUSE_LINUX.conf : OK<a class="headerlink" href="#suse_linuxconf_ok" title="Permanent link">&para;</a></h1>
<h1 id="suse_linuxi386conf_missingempty">SUSE_LINUX/i386.conf : missing/empty<a class="headerlink" href="#suse_linuxi386conf_missingempty" title="Permanent link">&para;</a></h1>
<h1 id="suse_linux150conf_missingempty">SUSE_LINUX/15.0.conf : missing/empty<a class="headerlink" href="#suse_linux150conf_missingempty" title="Permanent link">&para;</a></h1>
<h1 id="suse_linux150i386conf_missingempty">SUSE_LINUX/15.0/i386.conf : missing/empty<a class="headerlink" href="#suse_linux150i386conf_missingempty" title="Permanent link">&para;</a></h1>
<h1 id="siteconf_missingempty">site.conf : missing/empty<a class="headerlink" href="#siteconf_missingempty" title="Permanent link">&para;</a></h1>
<h1 id="localconf_ok">local.conf : OK<a class="headerlink" href="#localconf_ok" title="Permanent link">&para;</a></h1>
<h1 id="system_definition">System definition:<a class="headerlink" href="#system_definition" title="Permanent link">&para;</a></h1>
<p>ARCH="Linux-i386"<br />
OS="GNU/Linux"<br />
OS_MASTER_VENDOR="SUSE"<br />
OS_MASTER_VERSION="15"<br />
OS_MASTER_VENDOR_ARCH="SUSE/i386"<br />
OS_MASTER_VENDOR_VERSION="SUSE/15"<br />
OS_MASTER_VENDOR_VERSION_ARCH="SUSE/15/i386"<br />
OS_VENDOR="SUSE_LINUX"<br />
OS_VERSION="15.0"<br />
OS_VENDOR_ARCH="SUSE_LINUX/i386"<br />
OS_VENDOR_VERSION="SUSE_LINUX/15.0"<br />
OS_VENDOR_VERSION_ARCH="SUSE_LINUX/15.0/i386"</p>
<h1 id="backup_with_netfs">Backup with NETFS:<a class="headerlink" href="#backup_with_netfs" title="Permanent link">&para;</a></h1>
<p>NETFS_KEEP_OLD_BACKUP_COPY=""<br />
NETFS_PREFIX="g243"<br />
NETFS_RESTORE_CAPABILITIES=("No")<br />
BACKUP_DUPLICITY_NAME="rear-backup"<br />
BACKUP_INTEGRITY_CHECK=""<br />
BACKUP_MOUNTCMD=""<br />
BACKUP_ONLY_EXCLUDE="no"<br />
BACKUP_ONLY_INCLUDE="no"<br />
BACKUP_OPTIONS="nfsvers=3,nolock"<br />
BACKUP_RESTORE_MOVE_AWAY_DIRECTORY="/root/rear.github.master/var/lib/rear/moved_away_after_backup_restore/"<br />
BACKUP_RESTORE_MOVE_AWAY_FILES=("/boot/grub/grubenv"
"/boot/grub2/grubenv")<br />
BACKUP_RSYNC_ARRAY=("foo" "declare -ax ARRAY=("foo" "bar")" "bar")<br />
BACKUP_RSYNC_NASTY=("/foo/bar*" "\twith backslash and 'quotes'"")<br />
BACKUP_RSYNC_OPTIONS=("" "this" " " "that" "something else" "don't use
brackets '[...]' as in 'foo' (it fails)" "end")<br />
BACKUP_RSYNC_STRING="string of words"<br />
BACKUP_SELINUX_DISABLE="1"<br />
BACKUP_TYPE=""<br />
BACKUP_UMOUNTCMD=""<br />
BACKUP_URL="nfs://10.160.67.243/nfs"</p>
<h1 id="backup_program_is_tar">Backup program is 'tar':<a class="headerlink" href="#backup_program_is_tar" title="Permanent link">&para;</a></h1>
<p>BACKUP_PROG_ARCHIVE="backup"<br />
BACKUP_PROG_COMPRESS_OPTIONS=("--gzip")<br />
BACKUP_PROG_COMPRESS_SUFFIX=".gz"<br />
BACKUP_PROG_CRYPT_ENABLED="0"<br />
BACKUP_PROG_CRYPT_KEY=""<br />
BACKUP_PROG_CRYPT_OPTIONS="/usr/bin/openssl des3 -salt -k "<br />
BACKUP_PROG_DECRYPT_OPTIONS="/usr/bin/openssl des3 -d -k "<br />
BACKUP_PROG_EXCLUDE=("/tmp/<em>" "/dev/shm/</em>"
"/root/rear.github.master/var/lib/rear/output/<em>" "/nfs/</em>"
"/tmp/rear.f53sTaI6BEwwgWQ")<br />
BACKUP_PROG_OPTIONS=("--anchored")<br />
BACKUP_PROG_OPTIONS_CREATE_ARCHIVE=""<br />
BACKUP_PROG_OPTIONS_RESTORE_ARCHIVE=""<br />
BACKUP_PROG_SUFFIX=".tar"<br />
BACKUP_PROG_WARN_PARTIAL_TRANSFER="1"</p>
<h1 id="output_to_iso">Output to ISO:<a class="headerlink" href="#output_to_iso" title="Permanent link">&para;</a></h1>
<p>ISO_DEFAULT="boothd"<br />
ISO_DIR="/root/rear.github.master/var/lib/rear/output"<br />
ISO_ISOLINUX_BIN=""<br />
ISO_MAX_SIZE=""<br />
ISO_MKISOFS_BIN="/usr/bin/xorrisofs"<br />
ISO_MKISOFS_OPTS=""<br />
ISO_PREFIX="rear-g243"<br />
ISO_RECOVER_MODE=""<br />
ISO_VOLID="RELAXRECOVER"<br />
OUTPUT_MOUNTCMD=""<br />
OUTPUT_OPTIONS=""<br />
OUTPUT_PREFIX="g243"<br />
OUTPUT_PREFIX_PXE=""<br />
OUTPUT_UMOUNTCMD=""<br />
OUTPUT_URL=""</p>
<h1 id="validation_status">Validation status:<a class="headerlink" href="#validation_status" title="Permanent link">&para;</a></h1>
<h1 id="your_system_is_not_yet_validated_please_carefully_check_all_functions">Your system is not yet validated. Please carefully check all functions<a class="headerlink" href="#your_system_is_not_yet_validated_please_carefully_check_all_functions" title="Permanent link">&para;</a></h1>
<h1 id="and_create_a_validation_record_with_rear_validate_this_will_help_others">and create a validation record with 'rear validate'. This will help others<a class="headerlink" href="#and_create_a_validation_record_with_rear_validate_this_will_help_others" title="Permanent link">&para;</a></h1>
<h1 id="to_know_about_the_validation_status_of_relax-and-recover_on_this_system">to know about the validation status of Relax-and-Recover on this system.<a class="headerlink" href="#to_know_about_the_validation_status_of_relax-and-recover_on_this_system" title="Permanent link">&para;</a></h1>
<h1 id="end_of_dump_configuration_and_system_information">End of dump configuration and system information.<a class="headerlink" href="#end_of_dump_configuration_and_system_information" title="Permanent link">&para;</a></h1>
<pre><code>versus in verbose mode (excerpts - the actual dump part is same)
</code></pre>
<h1 id="usrsbinrear_-v_dump">usr/sbin/rear -v dump<a class="headerlink" href="#usrsbinrear_-v_dump" title="Permanent link">&para;</a></h1>
<p>Relax-and-Recover 2.4 / Git<br />
Running rear dump (PID 20481)<br />
Using log file:
/root/rear.github.master/var/log/rear/rear-g243.log.lockless</p>
<h1 id="begin_dumping_out_configuration_and_system_information_1">Begin dumping out configuration and system information:<a class="headerlink" href="#begin_dumping_out_configuration_and_system_information_1" title="Permanent link">&para;</a></h1>
<p>...</p>
<h1 id="end_of_dump_configuration_and_system_information_1">End of dump configuration and system information.<a class="headerlink" href="#end_of_dump_configuration_and_system_information_1" title="Permanent link">&para;</a></h1>
<p>Saving /root/rear.github.master/var/log/rear/rear-g243.log.lockless as
/root/rear.github.master/var/log/rear/rear-g243.log<br />
Exiting rear dump (PID 20481) and its descendant processes<br />
Running exit tasks<br />
You should also rm -Rf /tmp/rear.1bjD6VOVgttrN7O</p>
<pre><code>versus in normal mode when it is validated (excerpts)
</code></pre>
<h1 id="usrsbinrear_dump_1">usr/sbin/rear dump<a class="headerlink" href="#usrsbinrear_dump_1" title="Permanent link">&para;</a></h1>
<h1 id="begin_dumping_out_configuration_and_system_information_2">Begin dumping out configuration and system information:<a class="headerlink" href="#begin_dumping_out_configuration_and_system_information_2" title="Permanent link">&para;</a></h1>
<p>...</p>
<h1 id="validation_status_1">Validation status:<a class="headerlink" href="#validation_status_1" title="Permanent link">&para;</a></h1>
<h1 id="your_system_is_validated_with_the_following_details">Your system is validated with the following details:<a class="headerlink" href="#your_system_is_validated_with_the_following_details" title="Permanent link">&para;</a></h1>
<h1 id="version_relax-and-recover_24_git">Version: Relax-and-Recover 2.4 / Git<a class="headerlink" href="#version_relax-and-recover_24_git" title="Permanent link">&para;</a></h1>
<h1 id="validation_suse_linux150i386">Validation: SUSE_LINUX/15.0/i386<a class="headerlink" href="#validation_suse_linux150i386" title="Permanent link">&para;</a></h1>
<h1 id="submitted_johannes_meixner_amp106amp115amp109amp101amp105amp120amp64amp115amp117amp115amp101amp46amp100amp101_suse_germany">Submitted: Johannes Meixner <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#106;&#115;&#109;&#101;&#105;&#120;&#64;&#115;&#117;&#115;&#101;&#46;&#100;&#101;">&#106;&#115;&#109;&#101;&#105;&#120;&#64;&#115;&#117;&#115;&#101;&#46;&#100;&#101;</a>, SUSE, Germany<a class="headerlink" href="#submitted_johannes_meixner_amp106amp115amp109amp101amp105amp120amp64amp115amp117amp115amp101amp46amp100amp101_suse_germany" title="Permanent link">&para;</a></h1>
<h1 id="date_2019-01-15">Date: 2019-01-15<a class="headerlink" href="#date_2019-01-15" title="Permanent link">&para;</a></h1>
<h1 id="features_netfs_iso">Features: NETFS, ISO<a class="headerlink" href="#features_netfs_iso" title="Permanent link">&para;</a></h1>
<h1 id="comment_works_out-of-the-box_flawless_with_all_features">Comment: Works out-of-the-box flawless with all features"<a class="headerlink" href="#comment_works_out-of-the-box_flawless_with_all_features" title="Permanent link">&para;</a></h1>
<h1 id="end_of_dump_configuration_and_system_information_2">End of dump configuration and system information.<a class="headerlink" href="#end_of_dump_configuration_and_system_information_2" title="Permanent link">&para;</a></h1>
<pre><code>#### &lt;img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&amp;v=4" width="50"&gt;[jsmeix](https://github.com/jsmeix) commented at [2019-01-15 13:59](https://github.com/rear/rear/pull/2014#issuecomment-454401141):

With the fixed one remaining Print call that must be LogUserOutput
in normal mode when it is validated (excerpt)
</code></pre>
<h1 id="validation_status_2">Validation status:<a class="headerlink" href="#validation_status_2" title="Permanent link">&para;</a></h1>
<h1 id="rootreargithubmasterusrsharerearlibvalidatedsuse_linux150i386txt_ok">/root/rear.github.master/usr/share/rear/lib/validated/SUSE_LINUX/15.0/i386.txt : OK<a class="headerlink" href="#rootreargithubmasterusrsharerearlibvalidatedsuse_linux150i386txt_ok" title="Permanent link">&para;</a></h1>
<h1 id="your_system_is_validated_with_the_following_details_1">Your system is validated with the following details:<a class="headerlink" href="#your_system_is_validated_with_the_following_details_1" title="Permanent link">&para;</a></h1>
<h1 id="version_relax-and-recover_24_git_1">Version: Relax-and-Recover 2.4 / Git<a class="headerlink" href="#version_relax-and-recover_24_git_1" title="Permanent link">&para;</a></h1>
<h1 id="validation_suse_linux150i386_1">Validation: SUSE_LINUX/15.0/i386<a class="headerlink" href="#validation_suse_linux150i386_1" title="Permanent link">&para;</a></h1>
<h1 id="submitted_johannes_meixner_amp106amp115amp109amp101amp105amp120amp64amp115amp117amp115amp101amp46amp100amp101_suse_germany_1">Submitted: Johannes Meixner <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#106;&#115;&#109;&#101;&#105;&#120;&#64;&#115;&#117;&#115;&#101;&#46;&#100;&#101;">&#106;&#115;&#109;&#101;&#105;&#120;&#64;&#115;&#117;&#115;&#101;&#46;&#100;&#101;</a>, SUSE, Germany<a class="headerlink" href="#submitted_johannes_meixner_amp106amp115amp109amp101amp105amp120amp64amp115amp117amp115amp101amp46amp100amp101_suse_germany_1" title="Permanent link">&para;</a></h1>
<h1 id="date_2019-01-15_1">Date: 2019-01-15<a class="headerlink" href="#date_2019-01-15_1" title="Permanent link">&para;</a></h1>
<h1 id="features_netfs_iso_1">Features: NETFS, ISO<a class="headerlink" href="#features_netfs_iso_1" title="Permanent link">&para;</a></h1>
<h1 id="comment_works_out-of-the-box_flawless_with_all_features_1">Comment: Works out-of-the-box flawless with all features"<a class="headerlink" href="#comment_works_out-of-the-box_flawless_with_all_features_1" title="Permanent link">&para;</a></h1>
<pre><code>versus in normal mode when it is not validated (excerpt)
</code></pre>
<h1 id="validation_status_3">Validation status:<a class="headerlink" href="#validation_status_3" title="Permanent link">&para;</a></h1>
<h1 id="rootreargithubmasterusrsharerearlibvalidatedsuse_linux150i386txt_missingempty">/root/rear.github.master/usr/share/rear/lib/validated/SUSE_LINUX/15.0/i386.txt : missing/empty<a class="headerlink" href="#rootreargithubmasterusrsharerearlibvalidatedsuse_linux150i386txt_missingempty" title="Permanent link">&para;</a></h1>
<h1 id="your_system_is_not_yet_validated_please_carefully_check_all_functions_1">Your system is not yet validated. Please carefully check all functions<a class="headerlink" href="#your_system_is_not_yet_validated_please_carefully_check_all_functions_1" title="Permanent link">&para;</a></h1>
<h1 id="and_create_a_validation_record_with_rear_validate_this_will_help_others_1">and create a validation record with 'rear validate'. This will help others<a class="headerlink" href="#and_create_a_validation_record_with_rear_validate_this_will_help_others_1" title="Permanent link">&para;</a></h1>
<h1 id="to_know_about_the_validation_status_of_relax-and-recover_on_this_system_1">to know about the validation status of Relax-and-Recover on this system.<a class="headerlink" href="#to_know_about_the_validation_status_of_relax-and-recover_on_this_system_1" title="Permanent link">&para;</a></h1>
<pre><code>#### &lt;img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&amp;v=4" width="50"&gt;[jsmeix](https://github.com/jsmeix) commented at [2019-01-15 14:33](https://github.com/rear/rear/pull/2014#issuecomment-454412179):

@schlomo 
does it now look o.k. for you or should I change something?
Your requested changes in
https://github.com/rear/rear/pull/2014#pullrequestreview-191635881
`improve the output to be copy-paste compatible`
should be now implemented - and even more because
now in normal mode the output can be directly sourced.

@gdha 
is the new and changed output format also o.k. for you?

#### &lt;img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&amp;v=4" width="50"&gt;[jsmeix](https://github.com/jsmeix) commented at [2019-01-16 10:04](https://github.com/rear/rear/pull/2014#issuecomment-454722111):

I found a simple way how to source `rear -d dump` output directly:
</code></pre>
<h1 id="source_usrsbinrear_-d_dump_grep_echo_ok_echo_fail">source &lt;( usr/sbin/rear -d dump | grep '=' ) &amp;&amp; echo OK || echo FAIL<a class="headerlink" href="#source_usrsbinrear_-d_dump_grep_echo_ok_echo_fail" title="Permanent link">&para;</a></h1>
<p>OK</p>
<pre><code>This way even problematic cases work, cf.
https://github.com/rear/rear/pull/2014#issuecomment-454395650
</code></pre>
<h1 id="for_e_in_backup_rsync_options_do_echo_e_done">for e in "${BACKUP_RSYNC_OPTIONS[@]}" ; do echo "'$e'" ; done<a class="headerlink" href="#for_e_in_backup_rsync_options_do_echo_e_done" title="Permanent link">&para;</a></h1>
<p>''<br />
'this'<br />
' '<br />
'that'<br />
'something else'<br />
'don't use brackets '[...]' as in [123]='foo' (it fails)'<br />
'end'</p>
<pre><code>Also readonly variables have the expected effect:
</code></pre>
<h1 id="usrsbinrear_-d_dump_grep_backup_restore_move_away_directory">usr/sbin/rear -d dump | grep BACKUP_RESTORE_MOVE_AWAY_DIRECTORY<a class="headerlink" href="#usrsbinrear_-d_dump_grep_backup_restore_move_away_directory" title="Permanent link">&para;</a></h1>
<p>declare -r
BACKUP_RESTORE_MOVE_AWAY_DIRECTORY="/root/rear.github.master/var/lib/rear/moved_away_after_backup_restore/"</p>
<h1 id="source_usrsbinrear_-d_dump_grep_echo_ok_echo_fail_1">source &lt;( usr/sbin/rear -d dump | grep '=' ) &amp;&amp; echo OK || echo FAIL<a class="headerlink" href="#source_usrsbinrear_-d_dump_grep_echo_ok_echo_fail_1" title="Permanent link">&para;</a></h1>
<p>-bash: declare: BACKUP_RESTORE_MOVE_AWAY_DIRECTORY: readonly
variable<br />
OK</p>
<pre><code>i.e. the second run to source `rear -d dump` output will not overwrite
the already declared readonly variable from the first run.

#### &lt;img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&amp;v=4" width="50"&gt;[jsmeix](https://github.com/jsmeix) commented at [2019-01-16 10:23](https://github.com/rear/rear/pull/2014#issuecomment-454727891):

@schlomo 
thank you for your helpful comments and in particular
for your `sed` command so that we can show by default
the `declare -p` output in a more user friendly form.

I think the current implementation is a good balance
between being precise and being user friendly.


-------------------------------------------------------------------------------



[Export of Github issue for [rear/rear](https://github.com/rear/rear).]
</code></pre>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2024 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2019-01-10.2014.pr.merged.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
