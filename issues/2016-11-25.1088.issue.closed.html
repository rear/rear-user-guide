<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#1088 Issue closed: Support for "Multiple Backup Methods" - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#1088 Issue closed: Support for \"Multiple Backup Methods\"";
        var mkdocs_page_input_path = "issues/2016-11-25.1088.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#1088 Issue closed: Support for "Multiple Backup Methods"</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="1088_issue_closed_support_for_multiple_backup_methods"><a href="https://github.com/rear/rear/issues/1088">#1088 Issue</a> <code>closed</code>: Support for "Multiple Backup Methods"<a class="headerlink" href="#1088_issue_closed_support_for_multiple_backup_methods" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>fixed / solved / done</code></p>
<h4 id="jsmeix_opened_issue_at_2016-11-25_1530"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> opened issue at <a href="https://github.com/rear/rear/issues/1088">2016-11-25 15:30</a>:<a class="headerlink" href="#jsmeix_opened_issue_at_2016-11-25_1530" title="Permanent link">&para;</a></h4>
<p>Implement support for "Multiple Backup Methods".</p>
<p>Cf.<br />
<a href="https://github.com/rear/rear/issues/769#issuecomment-183310560">https://github.com/rear/rear/issues/769#issuecomment-183310560</a><br />
and<br />
<a href="https://github.com/rear/rear/issues/1078#issuecomment-262458799">https://github.com/rear/rear/issues/1078#issuecomment-262458799</a><br />
and<br />
<a href="https://github.com/rear/rear/issues/1078#issuecomment-262921898">https://github.com/rear/rear/issues/1078#issuecomment-262921898</a><br />
and<br />
<a href="https://github.com/rear/rear/issues/1085#issuecomment-262977318">https://github.com/rear/rear/issues/1085#issuecomment-262977318</a></p>
<h4 id="jsmeix_commented_at_2016-11-25_1540"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-262981954">2016-11-25 15:40</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-11-25_1540" title="Permanent link">&para;</a></h4>
<p>Only a totally untested idea off the top of my head<br />
how to get support for "Multiple Backup Methods"<br />
implemented as some kind of pure add-on so that<br />
all the existing code for single backup method<br />
could still work as before (i.e. I really want to avoid<br />
to do major changes in existing code):</p>
<p>The idea is based on the assumption that<br />
a "rear mkbackup" run can be splitted into<br />
a "rear mkrescue" run plus a "rear mkbackuponly" run<br />
and that the result is still the same.</p>
<p>If that is true (or can be made true with reasonable effort)<br />
support for "Multiple Backup Methods" could be simply<br />
an initial "rear mkrescue" run plus a sequence of<br />
subseqent "rear mkbackuponly BACKUP_METHOD" runs<br />
where the BACKUP_METHOD option specifies what<br />
backup method has to be run.</p>
<p>The configuration values for "Multiple Backup Methods" could<br />
then be simply additional /etc/rear/BACKUP_METHOD.conf files<br />
that are read for each "rear mkbackuponly BACKUP_METHOD" run<br />
after the usual config files were read so that the values in a<br />
/etc/rear/BACKUP_METHOD.conf file overwrite values regarding<br />
the backup in a global config file like /etc/rear/local.conf.</p>
<p>This way support for "Multiple Different Backup Methods" should<br />
be possible but I even can imagine that it is hopefully not too<br />
hard to also support "Multiple Same Backup Methods" in an<br />
analogous way.</p>
<p>But all that depends on whether or not "rear mkbackup"<br />
can be replaced by "rear mkrescue" plus "rear mkbackuponly".</p>
<h4 id="gozora_commented_at_2016-11-25_1548"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-262983662">2016-11-25 15:48</a>:<a class="headerlink" href="#gozora_commented_at_2016-11-25_1548" title="Permanent link">&para;</a></h4>
<p>Reading <code>rear --help</code> I've found option <em>-c DIR</em>.<br />
If I got your idea right, same would be archived with having multiple
of:</p>
<pre><code>rear -c /etc/rear/BACKUP_METHOD1 mkbackup
rear -c /etc/rear/BACKUP_METHOD2 mkbackup
rear -c /etc/rear/BACKUP_METHOD3 mkbackup
</code></pre>
<p>in crontab, or?</p>
<h4 id="jsmeix_commented_at_2016-11-25_1921"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-263013427">2016-11-25 19:21</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-11-25_1921" title="Permanent link">&para;</a></h4>
<p>Wih "-c DIR" one gets an "alternative config directory; instead of
/etc/rear"<br />
which should also work but then one needs to manually maintain
multiple<br />
whole local.conf files in each of the alternative config dirs.</p>
<p>My proposal means that all can use one same base /etc/rear/local.conf<br />
but on top of that an additional /etc/rear/FOO.conf is sourced so that<br />
the values in FOO.conf could overwrite (if needed) values in local.conf.</p>
<p>Basically I mean a different command line option, something like</p>
<pre>
  -a file
    additionally source file after the usual config files had been sourced
    but before any script is sourced
</pre>

<h4 id="jsmeix_commented_at_2016-11-25_1928"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-263014073">2016-11-25 19:28</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-11-25_1928" title="Permanent link">&para;</a></h4>
<p>By the way:</p>
<p>Another possible advantage of "Multiple Backup Methods"<br />
when it can be done as described above is that then<br />
multiple backups could run in parallel, i.e. basically like</p>
<pre>
rear mkrescue ; rear -a backup1 mkbackuponly & rear -a backup2 mkbackuponly & ...
</pre>

<p>For example think about a multiple-core machine<br />
with tons of main memory and several disks<br />
e.g. sda for the system and sdb for /home and sdc for a database<br />
where multiple independent backups could run in parallel.</p>
<h4 id="jsmeix_commented_at_2016-11-25_1931"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-263014283">2016-11-25 19:31</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-11-25_1931" title="Permanent link">&para;</a></h4>
<p>Of course multiple backups require<br />
the counterpart for the restore, cf.<br />
<a href="https://github.com/rear/rear/issues/987">https://github.com/rear/rear/issues/987</a></p>
<h4 id="gozora_commented_at_2016-11-25_1938"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-263014963">2016-11-25 19:38</a>:<a class="headerlink" href="#gozora_commented_at_2016-11-25_1938" title="Permanent link">&para;</a></h4>
<p>I got your idea now. Despite I dont like idea of overriding config files
(can be quite messy), it is a good start.</p>
<h4 id="gozora_commented_at_2016-11-25_1942"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-263015300">2016-11-25 19:42</a>:<a class="headerlink" href="#gozora_commented_at_2016-11-25_1942" title="Permanent link">&para;</a></h4>
<blockquote>
<p>For example think about a multiple-core machine with tons of main
memory and several disks</p>
</blockquote>
<p>Sounds like HANA :-)</p>
<h4 id="jsmeix_commented_at_2016-11-25_1952"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-263016163">2016-11-25 19:52</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-11-25_1952" title="Permanent link">&para;</a></h4>
<p>I need overriding config files because of backward compatibility<br />
and to keep the code simple (there is no support for arrays<br />
of arrays in bash and even if that was supported, I would<br />
try to avoid it because it would be a nightmare for the user<br />
to specify such config structures correctly).</p>
<p>With overriding values by a subsequent config file<br />
one can have e.g. in /etc/rear/backup1</p>
<pre>
BACKUP=NETFS
BACKUP_URL=nfs://server1/systembackup
</pre>

<p>and in /etc/rear/backup2</p>
<pre>
BACKUP=NETFS
BACKUP_URL=nfs://server2/homebackup
</pre>

<p>and in /etc/rear/backup3</p>
<pre>
BACKUP=NETFS
BACKUP_URL=nfs://server3/databasebackup
</pre>

<p>and - if my above assumptions are right - then</p>
<pre>
rear mkrescue ; rear -a backup1 mkbackuponly & rear -a backup2 mkbackuponly & rear -a backup3 mkbackuponly
</pre>

<p>should (hopefully) "just do the right thing".</p>
<p>Simply put:<br />
"Multiple Backup Methods" could be "Backups on Steroids" ;-)</p>
<p>Seriously:<br />
If "Multiple Parallel Backups and Restores"<br />
would be possible, it could be a major boost for ReaR.<br />
ReaR is know to be fast but then it could be made<br />
baically theoretically unlimited fast - in practice<br />
only limited by what the hardware can do.</p>
<h4 id="jsmeix_commented_at_2016-11-25_2000"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-263016895">2016-11-25 20:00</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-11-25_2000" title="Permanent link">&para;</a></h4>
<p>The possible advantages are so compelling<br />
that I will try to get it implemented for ReaR 2.0<br />
at least in an initially basically working way<br />
(or I learn it is not possible with reasonable effort).</p>
<h4 id="gozora_commented_at_2016-11-25_2005"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-263017367">2016-11-25 20:05</a>:<a class="headerlink" href="#gozora_commented_at_2016-11-25_2005" title="Permanent link">&para;</a></h4>
<p>Definetely! Then we can have NTFS with Windows deployment in ReaR 3.0
:-).</p>
<h4 id="jsmeix_commented_at_2016-11-25_2023"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-263018861">2016-11-25 20:23</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-11-25_2023" title="Permanent link">&para;</a></h4>
<p>Of course you meant<br />
"Parallel Deployments of Multiple Systems"<br />
...<br />
hmmmm...<br />
...<br />
perhaps not a real bad idea.<br />
Think about hundreds of virtual machines on one host.<br />
Way cool to restore all the virtual disk images in parallel...</p>
<h4 id="gozora_commented_at_2016-11-25_2027"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-263019178">2016-11-25 20:27</a>:<a class="headerlink" href="#gozora_commented_at_2016-11-25_2027" title="Permanent link">&para;</a></h4>
<p>I have a feeling that this brainstorming is going too far :-)!</p>
<h4 id="jsmeix_commented_at_2016-11-25_2030"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-263019472">2016-11-25 20:30</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-11-25_2030" title="Permanent link">&para;</a></h4>
<p>Not at this time and not with my second beer!<br />
;-)</p>
<h4 id="gozora_commented_at_2016-11-25_2032"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-263019595">2016-11-25 20:32</a>:<a class="headerlink" href="#gozora_commented_at_2016-11-25_2032" title="Permanent link">&para;</a></h4>
<p>Cheers from Slovakian pub! :-)</p>
<h4 id="jsmeix_commented_at_2016-11-25_2033"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-263019707">2016-11-25 20:33</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-11-25_2033" title="Permanent link">&para;</a></h4>
<p>Cheers!</p>
<h4 id="jsmeix_commented_at_2016-11-28_1253"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-263264024">2016-11-28 12:53</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-11-28_1253" title="Permanent link">&para;</a></h4>
<p>In
<a href="https://github.com/rear/rear/pull/1090">https://github.com/rear/rear/pull/1090</a><br />
I use the new option '-C' to source additional<br />
config files because according to<br />
<a href="https://github.com/rear/rear/issues/1088#issuecomment-263013427">https://github.com/rear/rear/issues/1088#issuecomment-263013427</a><br />
those additional files are sourced after the usual config files<br />
had been sourced but before any script is sourced which<br />
means those files behave as additional config files so that<br />
the option name '-C' matches better the main purpose<br />
(regardless that in ReaR any file is a bash script).</p>
<h4 id="didacog_commented_at_2016-11-29_1415"><img src="https://avatars.githubusercontent.com/u/5380209?u=163f1571e6b9c9c7df94e2c6ca152b0a7406b52d&v=4" width="50"><a href="https://github.com/didacog">didacog</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-263580681">2016-11-29 14:15</a>:<a class="headerlink" href="#didacog_commented_at_2016-11-29_1415" title="Permanent link">&para;</a></h4>
<p>Hi,</p>
<p>Sorry but I'm quite confused last days viewing lots of messages about
add multiple backup methods, NTFS,... to ReaR.</p>
<p>In a previous discussion #769 we were talking about moving out external
backup methods from ReaR to maintain stability and use a separate
package to provide those external backup methods, and now seems a 180ยบ
turn.</p>
<p>Those thoughts are gone? because seems adding more and more extra stuff
to ReaR instead of moving out from main package, what was discussed
previously.</p>
<p>I just want to clarify my thoughts :P</p>
<p>Regards,</p>
<h4 id="jsmeix_commented_at_2016-11-29_1559"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-263611272">2016-11-29 15:59</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-11-29_1559" title="Permanent link">&para;</a></h4>
<p>@didacog<br />
extracting the backup functionality from ReaR<br />
into a separate open source project is a different<br />
(strictly speaking unrelated) issue, cf. in particular<br />
<a href="https://github.com/rear/rear/issues/769#issuecomment-183331359">https://github.com/rear/rear/issues/769#issuecomment-183331359</a></p>
<p>As long as extracting the backup functionality is not decided<br />
the scripts that provide the backup functionality stay in ReaR.<br />
I assume for ReaR 2.0 it will not be extracted because<br />
we do not have a clear and stable interface between<br />
ReaR and the backup software, cf.<br />
<a href="https://github.com/rear/rear/issues/769#issuecomment-183370695">https://github.com/rear/rear/issues/769#issuecomment-183370695</a></p>
<p>Currently I am implementing support for multiple backups<br />
in ReaR and right now I did my very initial simple first<br />
succesful recovery with two backups using the same<br />
backup method (NETFS and 'tar').</p>
<p>As expected there are several unexpected things<br />
but up to now I could solve all of them reletively easily<br />
so that currently it looks really promising.</p>
<h4 id="jsmeix_commented_at_2016-11-29_1709"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-263633271">2016-11-29 17:09</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-11-29_1709" title="Permanent link">&para;</a></h4>
<p>For a very basic and initial way how recovery with two backups<br />
using same backup method (NETFS and 'tar') worked for me, see<br />
<a href="https://github.com/rear/rear/pull/1091#issuecomment-263621714">https://github.com/rear/rear/pull/1091#issuecomment-263621714</a></p>
<p>For initial usage with different backup methods<br />
one needs to get all the binaries and other needed files<br />
of all used backup methods into the recovery system<br />
during the initial "rear mkbackup/mkrescue" run.<br />
I think for now one can do that maually via<br />
REQUIRED_PROGS and COPY_AS_IS<br />
in /etc/rear/local.conf - later this should happen<br />
somehow automatically...</p>
<h4 id="jsmeix_commented_at_2016-11-30_1205"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-263857875">2016-11-30 12:05</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-11-30_1205" title="Permanent link">&para;</a></h4>
<p>With<br />
<a href="https://github.com/rear/rear/pull/1091">https://github.com/rear/rear/pull/1091</a><br />
together with<br />
<a href="https://github.com/rear/rear/pull/1090">https://github.com/rear/rear/pull/1090</a><br />
there is now a first initial (and actually usable) implementation<br />
for multiple backups of same backup type.</p>
<p>E.g. several 'tar' backups via NETFS<br />
which is currently the only kind that I have used.</p>
<p>See<br />
<a href="https://github.com/rear/rear/pull/1091#issuecomment-263621714">https://github.com/rear/rear/pull/1091#issuecomment-263621714</a><br />
for an example how one could do it.</p>
<h4 id="jsmeix_commented_at_2016-11-30_1225"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-263861320">2016-11-30 12:25</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-11-30_1225" title="Permanent link">&para;</a></h4>
<p>@gozora<br />
I count on you to try it out with two different backup methods like<br />
a 'tar' backup via NETFS for the basic system plus an additional<br />
backup via BACKUP=BORG e.g. for things like /home/*</p>
<p>In particular I would be interested regarding what I wrote above in<br />
<a href="https://github.com/rear/rear/issues/1088#issuecomment-263633271">https://github.com/rear/rear/issues/1088#issuecomment-263633271</a></p>
<pre>
For initial usage with different backup methods
one needs to get all the binaries and other needed files
of all used backup methods into the recovery system
during the initial "rear mkbackup/mkrescue" run.
I think for now one can do that maually via
REQUIRED_PROGS and COPY_AS_IS
in /etc/rear/local.conf - later this should happen
somehow automatically...
</pre>

<p>For Borg I would assume that something like</p>
<pre>
REQUIRED_PROGS=( "${REQUIRED_PROGS[@]}" borg locale )
</pre>

<p>is needed in the config file that is used while<br />
"rear mkbackup" or "rear mkrescue" is run to get all<br />
what Borg needs for restore into the recovery system.</p>
<h4 id="gozora_commented_at_2016-11-30_1237"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-263863506">2016-11-30 12:37</a>:<a class="headerlink" href="#gozora_commented_at_2016-11-30_1237" title="Permanent link">&para;</a></h4>
<p>Hello @jsmeix,</p>
<p>I'll definitely going to test it! (not sure if I can make it today ...)</p>
<p>Copy of base progs needed for Borg is done in
<em>usr/share/rear/prep/BORG/default/200_prep_borg.sh</em></p>
<pre><code>PROGS=( "${PROGS[@]}" "${PROGS_BORG[@]}" borg locale )
</code></pre>
<p>So to my understanding not explicit action is necessary.</p>
<h4 id="jsmeix_commented_at_2016-11-30_1344"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-263876395">2016-11-30 13:44</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-11-30_1344" title="Permanent link">&para;</a></h4>
<p>I know about prep/BORG/default/200_prep_borg.sh<br />
(this is wherefrom I made my REQUIRED_PROGS proposal)<br />
but I think you misunderstand because you cannot have<br />
both BACKUP=NETFS and BACKUP=BORG in the<br />
config file that is used for "mkbackup/mkrescue"<br />
(i.e. when the recovery system ISO gets created).</p>
<p>E.g. for a 'tar' backup via NETFS for the basic system plus<br />
an additional backup via BACKUP=BORG e.g. for /home/*<br />
you would use BACKUP=NETFS and all what the<br />
'tar' backup via NETFS needs in one config file<br />
that is used for "mkbackup/mkrescue"<br />
(i.e. when the recovery system ISO gets created)<br />
and you would use BACKUP=BORG and all what the<br />
Borg backup needs in another config file<br />
that is used for "mkbackuponly"<br />
(i.e. when only the additional backup gets created), cf. in<br />
<a href="https://github.com/rear/rear/pull/1091#issuecomment-263621714">https://github.com/rear/rear/pull/1091#issuecomment-263621714</a><br />
my local.conf plus base.conf versus rest.conf and how I used them</p>
<pre>
rear -C base -d -D mkbackup
rear -C rest -d -D mkbackuponly
...
rear -C base -d -D recover
rear -C rest -d -D restoreonly
</pre>

<p>In your case I think you need in base.conf (whatever you call it)</p>
<pre>
REQUIRED_PROGS=( "${REQUIRED_PROGS[@]}" borg locale )
</pre>

<p>to get all what Borg needs for restore into the recovery system.</p>
<h4 id="gozora_commented_at_2016-11-30_1349"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-263877605">2016-11-30 13:49</a>:<a class="headerlink" href="#gozora_commented_at_2016-11-30_1349" title="Permanent link">&para;</a></h4>
<p>Of course I've misunderstood, it is my trademark :-)!<br />
Now its crystal clear, thanks @jsmeix!</p>
<h4 id="jsmeix_commented_at_2016-11-30_1431"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-263887450">2016-11-30 14:31</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-11-30_1431" title="Permanent link">&para;</a></h4>
<p>FYI:</p>
<p>My next step is to automate the rear calls as in</p>
<pre>
rear -C base -d -D mkbackup
rear -C rest -d -D mkbackuponly
...
rear -C base -d -D recover
rear -C rest -d -D restoreonly
</pre>

<p>with a new config array variable in local.conf like</p>
<pre>
MULTIPLE_BACKUPS=( base rest )
</pre>

<p>so that one single call of</p>
<pre>
rear -d -D mkbackup
</pre>

<p>actually runs the equivalent of</p>
<pre>
rear -C base -d -D mkbackup && rear -C rest -d -D mkbackuponly
</pre>

<p>and one single call of</p>
<pre>
rear -d -D recover
</pre>

<p>actually runs the equivalent of</p>
<pre>
rear -C base -d -D recover && rear -C rest -d -D restoreonly
</pre>

<p>My private top secret future plan:<br />
Something like</p>
<pre>
MULTIPLE_BACKUPS=( first second& third& )
</pre>

<p>should run first</p>
<pre>
rear C first mkbackup
</pre>

<p>and afterwards the two mkbackuponly in parallel like</p>
<pre>
rear -C second mkbackuponly &
rear -C third mkbackuponly &
</pre>

<p>and analogous behaviour for "rear recover".<br />
I.e. backup and restore on speed ;-)</p>
<h4 id="gozora_commented_at_2016-11-30_1441"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-263889783">2016-11-30 14:41</a>:<a class="headerlink" href="#gozora_commented_at_2016-11-30_1441" title="Permanent link">&para;</a></h4>
<p>@jsmeix This is the stage where Micro$oft uses <em>Advanced</em> button :-).<br />
So maybe we should consider documentation section with title <em>Advanced
ReaR options</em> ...</p>
<h4 id="jsmeix_commented_at_2016-11-30_1501"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-263894804">2016-11-30 15:01</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-11-30_1501" title="Permanent link">&para;</a></h4>
<p>I will do proper documentation when<br />
multiple backups work sufficiently well<br />
and when there are no serious regressions,<br />
i.e. when it can be considered to be somewhat stable<br />
so that it is unlikely that I need to do incompatible changes<br />
how multiple backups work.</p>
<p>Currently there is intentionally nothing documented<br />
so that nothing is officially announced for the users<br />
and we can freely change as we like how multiple<br />
backups work until it works sufficiently o.k. for us.</p>
<p>I am playing around with the current implementation<br />
and I had already some interesting "effects" - i.e. I am<br />
learning how it actually behaves in practice - which is<br />
probably helpful to write usable documentation ;-)</p>
<h4 id="jsmeix_commented_at_2016-11-30_1540"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-263905911">2016-11-30 15:40</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-11-30_1540" title="Permanent link">&para;</a></h4>
<p>My very first experiments with manually running<br />
two "rear mkbackupoly" and two "rear restoreonly"<br />
in parallel worked in principle.<br />
I did only this changes:<br />
In usr/sbin/rear I added a test<br />
for REAR_ALLOW_RUNNING_IN_PARALLEL</p>
<pre>
# LOCKLESS_WORKFLOWS can run simultaneously with another instance by using a LOGFILE.lockless:
if IsInArray "$WORKFLOW" "${LOCKLESS_WORKFLOWS[@]}" ; then
    LOGFILE="$LOGFILE.lockless"
else
  if ! test "$REAR_ALLOW_RUNNING_IN_PARALLEL" ; then
    # When this currently running instance is not one of the LOCKLESS_WORKFLOWS
    # then it cannot run simultaneously with another instance
    # in this case pidof is needed to test what running instances there are:
    if ! has_binary pidof ; then
        echo "ERROR: Required program 'pidof' missing, please check your PATH" >&2
        exit 1
    fi
    # For unknown reasons '-o %PPID' does not work for pidof at least in SLES11
    # so that a manual test is done to find out if another pid != $$ is running:
    for pid in $( pidof -x "$SCRIPT_FILE" ) ; do
        if test "$pid" != $$ ; then
            echo "ERROR: $PROGRAM is already running, not starting again" >&2
            exit 1
        fi
    done
  fi
fi
</pre>

<p>and in usr/share/rear/conf/default.conf<br />
I added current PID ($$) to the LOGFILE name</p>
<pre>
LOGFILE="$LOG_DIR/rear-$HOSTNAME-$$.log"
</pre>

<p>and then it works</p>
<pre>
# usr/sbin/rear -C base -d -D mkbackup
# export REAR_ALLOW_RUNNING_IN_PARALLEL="yes"
# usr/sbin/rear -C rootbackup -d -D mkbackuponly &
# usr/sbin/rear -C homebackup -d -D mkbackuponly &
</pre>

<p>But it seems not to make a real difference because<br />
on a virtual machine with even 2 CPUs and 2 GiB memory<br />
each two backup and restore 'tar' processes seem to run<br />
not simultaneously but one after the other :-(</p>
<h4 id="gozora_commented_at_2016-11-30_2202"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-264009984">2016-11-30 22:02</a>:<a class="headerlink" href="#gozora_commented_at_2016-11-30_2202" title="Permanent link">&para;</a></h4>
<p>Just finished "Multi-backup" backup/restore with NETFS + BORG, with
overall result: SUCCESS!</p>
<p>Must admit that configuration was a bit tricky, but as sysadmin I really
want to scarify my comfort for this.<br />
When talking about "tricky" part, all I have on my mind is that you must
know what configuration option to put in which config (as discussed in
<a href="https://github.com/rear/rear/issues/1088#issuecomment-263861320">https://github.com/rear/rear/issues/1088#issuecomment-263861320</a>
), but I believe that this will get better over time.</p>
<p>In my humble opinion, this feature adds another, very useful dimension
to ReaR possibilities.</p>
<p>Good job @jsmeix !</p>
<p>If there is someone curious, here are sample configs I've used for NETFS
+ BORG backup/restore:</p>
<pre><code>root@mate:/etc/rear# cat base_os.conf
OUTPUT=ISO
OUTPUT_URL=nfs://beta.virtual.sk/mnt/rear/iso
GRUB_RESCUE=n
REQUIRED_PROGS=( "${REQUIRED_PROGS[@]}" borg locale )
COPY_AS_IS=( "${COPY_AS_IS[@]}" "/root/borg_keys" )

BACKUP=NETFS
BACKUP_URL=nfs://beta.virtual.sk/mnt/rear
BACKUP_PROG_EXCLUDE=( ${BACKUP_PROG_EXCLUDE[@]} '/media/*' '/home' )

root@mate:/etc/rear# cat home.conf 
MANUAL_INCLUDE=YES
BACKUP_PROG_INCLUDE=( '/home' )

### Borg stuff ###
BACKUP=BORG
BORGBACKUP_HOST="beta.virtual.sk"
BORGBACKUP_USERNAME="root"
BORGBACKUP_REPO="/mnt/rear/borg/${HOSTNAME}"
BORGBACKUP_PRUNE_HOURLY=5
BORGBACKUP_PRUNE_WEEKLY=2
BORGBACKUP_COMPRESSION="zlib,9"

## Borg repository encryption
BORGBACKUP_ENC_TYPE="keyfile"
export BORG_KEYS_DIR="/root/borg_keys"
export BORG_PASSPHRASE="S3cr37_P455w0rD"

## Borg behavior
export BORG_RELOCATED_REPO_ACCESS_IS_OK="yes"
export BORG_UNKNOWN_UNENCRYPTED_REPO_ACCESS_IS_OK="yes"
export BORG_REMOTE_PATH="/usr/local/bin/borg"
</code></pre>
<p>Then for backup:</p>
<pre><code>root@mate:/# rear -C base_os mkbackup
root@mate:/# rear -C home mkbackuponly
</code></pre>
<p>And restore:</p>
<pre><code>RESCUE mate:~ # rear -C base_os recover
RESCUE mate:~ # rear -C home restoreonly
</code></pre>
<h4 id="gdha_commented_at_2016-12-01_0730"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-264098352">2016-12-01 07:30</a>:<a class="headerlink" href="#gdha_commented_at_2016-12-01_0730" title="Permanent link">&para;</a></h4>
<p>@gozora @jsmeix indeed an excellent job done by you both! Now that you
have the experience in configuration why not write it down on our
relax-and-recover web pages? The web pages are also in GitHub so that
would be easy to extend, if you wish of course. Otherwise, it will be a
dead functionality if nobody knows about it (or when it is too complex
to get it right).</p>
<h4 id="gozora_commented_at_2016-12-01_0906"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-264118658">2016-12-01 09:06</a>:<a class="headerlink" href="#gozora_commented_at_2016-12-01_0906" title="Permanent link">&para;</a></h4>
<p>I didn't do anything all kudos goes to @jsmeix.<br />
I of course I can help with documentation, but I guess @jsmeix wants to
wait with this step (see
<a href="https://github.com/rear/rear/issues/1088#issuecomment-263894804">https://github.com/rear/rear/issues/1088#issuecomment-263894804</a>)</p>
<h4 id="gdha_commented_at_2016-12-01_0919"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-264121307">2016-12-01 09:19</a>:<a class="headerlink" href="#gdha_commented_at_2016-12-01_0919" title="Permanent link">&para;</a></h4>
<p>@gozora @jsmeix from experience I know the longer you wait to write
something down the more difficult it becomes as we tend to forget
details (at least with me but that could be the age of course)</p>
<h4 id="jsmeix_commented_at_2016-12-01_0919"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-264121357">2016-12-01 09:19</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-12-01_0919" title="Permanent link">&para;</a></h4>
<p>@gozora<br />
many thanks for your testing<br />
and your enlightening feedback.</p>
<p>In particular I learned that MANUAL_INCLUDE=YES<br />
works when used with "mkbackuponly" because in this case<br />
it does not matter that MANUAL_INCLUDE=YES<br />
disables all entries in disklayout.conf (at least for me it does)<br />
so that one cannot (at least I cannot) use MANUAL_INCLUDE=YES<br />
with "mkbackup" (or "mkrescue"), cf.<br />
<a href="https://github.com/rear/rear/issues/1019#issuecomment-251348729">https://github.com/rear/rear/issues/1019#issuecomment-251348729</a></p>
<p>Therefore I invented BACKUP_ONLY_INCLUDE<br />
so that I do not have to use MANUAL_INCLUDE=YES<br />
and - by the way - I invented also its logical counterpart<br />
BACKUP_ONLY_EXCLUDE which could be useful to get things<br />
in the backup that are not intended to be restored (i.e. have<br />
the content of EXCLUDE_MOUNTPOINTS in the backup)<br />
because I think in general a backup should be complete<br />
(i.e. basically it should contain all regular files - except tmp
files)<br />
regardless what exactly is actually needed to be restored,<br />
see also BACKUP_RESTORE_MOVE_AWAY_FILES<br />
in default.conf.</p>
<h4 id="jsmeix_commented_at_2016-12-01_0925"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-264122547">2016-12-01 09:25</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-12-01_0925" title="Permanent link">&para;</a></h4>
<p>@gdha<br />
don't worry regarding documentation<br />
but also don't hurry ;-)</p>
<p>I will properly document multiple backups.</p>
<p>I think as long as I am actively working on it I will not<br />
forget details.</p>
<p>But as long as multiple backups is under development<br />
I do intentionally not document it as I described in<br />
<a href="https://github.com/rear/rear/issues/1088#issuecomment-263894804">https://github.com/rear/rear/issues/1088#issuecomment-263894804</a></p>
<p>Multiple backups will be documented in time<br />
before the ReaR 1-20 release.</p>
<h4 id="jsmeix_commented_at_2016-12-01_1015"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-264133408">2016-12-01 10:15</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-12-01_1015" title="Permanent link">&para;</a></h4>
<p>@gozora<br />
I think for Borg you could use BACKUP_ONLY_INCLUDE="yes"<br />
instead of MANUAL_INCLUDE=YES, see<br />
<a href="https://github.com/rear/rear/issues/1019#issuecomment-264132715">https://github.com/rear/rear/issues/1019#issuecomment-264132715</a></p>
<h4 id="jsmeix_commented_at_2016-12-01_1110"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-264144467">2016-12-01 11:10</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-12-01_1110" title="Permanent link">&para;</a></h4>
<p>@gdha<br />
regarding "dead functionality if nobody knows about it":<br />
If multiple backups work sufficiently well in practice<br />
we should at least tell about it at FOSDEM 2017<br />
perhaps even present it (I can do that ;-)</p>
<h4 id="gozora_commented_at_2016-12-01_1128"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-264148001">2016-12-01 11:28</a>:<a class="headerlink" href="#gozora_commented_at_2016-12-01_1128" title="Permanent link">&para;</a></h4>
<p>@jsmeix</p>
<blockquote>
<p>I think for Borg you could use BACKUP_ONLY_INCLUDE="yes"<br />
instead of MANUAL_INCLUDE=YES</p>
</blockquote>
<p>Will test today evening.</p>
<h4 id="jsmeix_commented_at_2016-12-01_1328"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-264173077">2016-12-01 13:28</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-12-01_1328" title="Permanent link">&para;</a></h4>
<p>I have even more good news today:</p>
<p>Regarding<br />
<a href="https://github.com/rear/rear/issues/1088#issuecomment-263905911">https://github.com/rear/rear/issues/1088#issuecomment-263905911</a></p>
<pre>
... manually running two "rear mkbackupoly" ... in parallel ...
... seems not to make a real difference ...
... 'tar' processes seem to run not simultaneously ...
</pre>

<p>I only misinterpreted ReaR's output messages<br />
which is the result of ReaR's current logging that is<br />
not prepared for multiple simultaneous rear runs<br />
together with mixing up progress subsystem messages<br />
that is also not prepared for multiple simultaneous rear runs.</p>
<p>Actually things do run well in parallel.</p>
<p>With some quick-and-dirty experimantal logging enhancements<br />
and progress subsystem changes (mainly showing messages<br />
with a leading PID and let the progress subsystem output each<br />
message on a separated line which effectively disables the intent<br />
of the progress subsystem, cf. lib/progresssubsystem.nosh)<br />
one can nicely see how things "just work" even in parallel:</p>
<pre>
# usr/sbin/rear -C rootbackup -d -D mkbackuponly & usr/sbin/rear -C homebackup -d -D mkbackuponly & wait ; echo done
[1] 23905
[2] 23906
23906 Relax-and-Recover 1.19 / Git
23905 Relax-and-Recover 1.19 / Git
23906 Using log file: /root/rear/var/log/rear/rear-d25-23906.log
23905 Using log file: /root/rear/var/log/rear/rear-d25-23905.log
23906 Sourcing additional configuration file '/root/rear/etc/rear/homebackup.conf'
23905 Sourcing additional configuration file '/root/rear/etc/rear/rootbackup.conf'
23906 Using backup archive 'backup-homebackup.tar.gz'
23905 Using backup archive 'backup-rootbackup.tar.gz'
23906 Creating disk layout
23905 Creating disk layout
23906 Creating tar archive '/tmp/rear.jFUrPHh4h8TQYdv/outputfs/d25/backup-homebackup.tar.gz'
23906 ProgressStart: Preparing archive operation
23905 Creating tar archive '/tmp/rear.6zpcz6nQp1GR5nC/outputfs/d25/backup-rootbackup.tar.gz'
23905 ProgressStart: Preparing archive operation
23906 ProgressInfo: Archived 22 MiB [avg 11648 KiB/sec] 
23905 ProgressInfo: Archived 9 MiB [avg 4816 KiB/sec] 
23906 ProgressInfo: Archived 35 MiB [avg 12021 KiB/sec] 
23905 ProgressInfo: Archived 16 MiB [avg 4328 KiB/sec] 
...
23906 ProgressInfo: Archived 154 MiB [avg 12199 KiB/sec] 
23905 ProgressInfo: Archived 145 MiB [avg 10648 KiB/sec] 
23906 ProgressStop:  OK
23905 ProgressInfo: Archived 166 MiB [avg 11356 KiB/sec] 
23906 Archived 154 MiB in 15 seconds [avg 10572 KiB/sec]
23905 ProgressInfo: Archived 190 MiB [avg 12190 KiB/sec] 
23906 Saving /root/rear/var/log/rear/rear-d25-23906.log as /root/rear/var/log/rear/rear-d25-mkbackuponly-homebackup.log
23905 ProgressInfo: Archived 222 MiB [avg 13406 KiB/sec] 
23905 ProgressInfo: Archived 253 MiB [avg 13680 KiB/sec] 
23905 ProgressInfo: Archived 284 MiB [avg 14550 KiB/sec] 
23905 ProgressInfo: Archived 314 MiB [avg 15340 KiB/sec] 
23905 ProgressStop:  OK
23905 Archived 314 MiB in 22 seconds [avg 14642 KiB/sec]
23905 Saving /root/rear/var/log/rear/rear-d25-23905.log as /root/rear/var/log/rear/rear-d25-mkbackuponly-rootbackup.log
[1]-  Done  usr/sbin/rear -C rootbackup -d -D mkbackuponly
[2]+  Done  usr/sbin/rear -C homebackup -d -D mkbackuponly
done
</pre>

<h4 id="jsmeix_commented_at_2016-12-01_1345"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-264176438">2016-12-01 13:45</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-12-01_1345" title="Permanent link">&para;</a></h4>
<p>And for "restoreonly" in parallel the only thing<br />
that gets in the way is when<br />
usr/share/rear/restore/default/995_remount_sync.sh<br />
is executed by the first "restoreonly" process<br />
because remounting 'sync' makes it unusable slow<br />
for the still running other 'tar' restore process.<br />
Quick and dirty disabling<br />
usr/share/rear/restore/default/995_remount_sync.sh<br />
makes running two "restoreonly" in parallel "just work".</p>
<h4 id="jsmeix_commented_at_2016-12-01_1646"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-264225872">2016-12-01 16:46</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-12-01_1646" title="Permanent link">&para;</a></h4>
<p>@gozora<br />
for the fun of it:<br />
I run those parallel things now on a virtual machine<br />
with 4 CPUs and 4GB main memory... :-)</p>
<h4 id="gozora_commented_at_2016-12-01_1649"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-264226591">2016-12-01 16:49</a>:<a class="headerlink" href="#gozora_commented_at_2016-12-01_1649" title="Permanent link">&para;</a></h4>
<p>:-)<br />
I was just thinking; what is the fastest DR solution in world?</p>
<h4 id="jsmeix_commented_at_2016-12-01_1654"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-264228023">2016-12-01 16:54</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-12-01_1654" title="Permanent link">&para;</a></h4>
<p>I don't know what it is now<br />
but I have a dim feeling what it will be in the future ;-)</p>
<p>FYI:<br />
One cannot run "recover" in parallel with "restoreonly"<br />
because first the basic system with all the mountpoints<br />
below /mnt/local must be there.<br />
Afterwards one can run multiple "restoreonly" in parallel.</p>
<p>Tomorrow I will test with bigger additional backups<br />
to get some time data how much running multiple<br />
"restoreonly" in parallel actually makes it faster<br />
(on sufficiently powerful hardware).</p>
<h4 id="gozora_commented_at_2016-12-01_1733"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-264238705">2016-12-01 17:33</a>:<a class="headerlink" href="#gozora_commented_at_2016-12-01_1733" title="Permanent link">&para;</a></h4>
<p>Hello @jsmeix</p>
<blockquote>
<p>I think for Borg you could use BACKUP_ONLY_INCLUDE="yes"<br />
instead of MANUAL_INCLUDE=YES, see</p>
</blockquote>
<p>I've adapted my config:</p>
<pre><code>root@mate:~# diff /etc/rear/home.conf.old /etc/rear/home.conf
1c1
&lt; MANUAL_INCLUDE=YES
---
&gt; BACKUP_ONLY_INCLUDE=YES
</code></pre>
<p>And I can confirm that <em>BACKUP_ONLY_INCLUDE</em> works perfectly fine with
Borg.</p>
<h4 id="didacog_commented_at_2016-12-01_1804"><img src="https://avatars.githubusercontent.com/u/5380209?u=163f1571e6b9c9c7df94e2c6ca152b0a7406b52d&v=4" width="50"><a href="https://github.com/didacog">didacog</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-264247008">2016-12-01 18:04</a>:<a class="headerlink" href="#didacog_commented_at_2016-12-01_1804" title="Permanent link">&para;</a></h4>
<p>@jsmeix<br />
for sure, extracting the backup functionality is not decided yet. Maybe
never becomes it that way, but as we started that discussion, could be
possible and well, seems that those are features could break backwards
compatibility and could make things harder to "extract backup
functionality" if will happen in some future.<br />
Just were some thoughts about my impressions on those features appearing
last days in relation with #769. Nothing else.</p>
<p>Regards,</p>
<h4 id="jsmeix_commented_at_2016-12-02_0842"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-264402498">2016-12-02 08:42</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-12-02_0842" title="Permanent link">&para;</a></h4>
<p>@didacog<br />
if "extracting the backup functionality" ever happens<br />
my current understanding what that means is basically<br />
a simple move of the scripts that implement the actual<br />
backup and restore into a separated project but I would<br />
insist on that the underlying framework that ReaR can<br />
call external tools for backup and restore must be kept<br />
in ReaR and what I implemented in<br />
<a href="https://github.com/rear/rear/pull/1090">https://github.com/rear/rear/pull/1090</a><br />
and<br />
<a href="https://github.com/rear/rear/pull/1091">https://github.com/rear/rear/pull/1091</a><br />
are primarily enhancements of that framework.<br />
The only real backup scripts that I enhanced<br />
was to make NETFS 'tar' support the new<br />
BACKUP_ONLY_INCLUDE and<br />
BACKUP_ONLY_EXCLUDE<br />
flags.</p>
<p>@didacog<br />
what I would like to see from you is that you test the<br />
current multiple backup implementation in ReaR<br />
with your preferred backup method and that you enhance<br />
your preferred backup method as needed to work well for<br />
multiple backups.<br />
In particular it must be possible that the user can specify<br />
exactly what he wants to have in the backup and what not<br />
for your backup method (e.g. via support for things like
BACKUP_ONLY_INCLUDE and BACKUP_ONLY_EXCLUDE<br />
or something similar as appropriate for your backup method).</p>
<h4 id="jsmeix_commented_at_2016-12-02_0846"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-264403106">2016-12-02 08:46</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-12-02_0846" title="Permanent link">&para;</a></h4>
<p>@gozora<br />
the above results (Borgs works perfectly fine with multiple backups)<br />
indicate that you implemented support for Borg perfectly fine!</p>
<h4 id="didacog_commented_at_2016-12-02_1025"><img src="https://avatars.githubusercontent.com/u/5380209?u=163f1571e6b9c9c7df94e2c6ca152b0a7406b52d&v=4" width="50"><a href="https://github.com/didacog">didacog</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-264422383">2016-12-02 10:25</a>:<a class="headerlink" href="#didacog_commented_at_2016-12-02_1025" title="Permanent link">&para;</a></h4>
<p>@jsmeix<br />
Of course we will test multiple backup as fast as we can have time after
completing DRLM roadmap for 2.1.0 version.</p>
<p>I may have some thoughts about using it, but well, maybe could be better
to talk about this after testing and knowing better how it works. maybe
at FOSDEM'17 we'll have time to talk about it. ;)</p>
<p>Please do not misunderstand me when I talk about my doubts on new
features, the idea was just to clarify my thoughts, nothing else.<br />
Writing is harder to tint the words than talking about them face to
face. :P</p>
<p>Regards,</p>
<h4 id="jsmeix_commented_at_2016-12-02_1304"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-264449623">2016-12-02 13:04</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-12-02_1304" title="Permanent link">&para;</a></h4>
<p>@didacog<br />
I look forward to seeing you at FOSDEM 2017 and<br />
I do appreciate your thoughts and your doubts<br />
because if all just blindly applaud "hooray" for<br />
anything I do, I would do very lot of nonsense.</p>
<h4 id="jsmeix_commented_at_2016-12-02_1325"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-264453259">2016-12-02 13:25</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-12-02_1325" title="Permanent link">&para;</a></h4>
<p>Regarding<br />
<a href="https://github.com/rear/rear/issues/1088#issuecomment-264228023">https://github.com/rear/rear/issues/1088#issuecomment-264228023</a><br />
"get some time data how much running multiple restoreonly<br />
in parallel actually makes it faster":</p>
<p>On my virtual machine with 4 CPUs and 4GB main memory:</p>
<pre>
RESCUE d25:~ # date +%s ; rear -C rootbackup -d -D restoreonly & rear -C homebackup -d -D restoreonly & wait ; date +%s
1480684655
...
1480684660

RESCUE d25:~ # date +%s ; rear -C rootbackup -d -D restoreonly ; rear -C homebackup -d -D restoreonly ; date +%s
1480684671
...
1480684680
</pre>

<p>5 seconds (1480684660-1480684655) for parallel<br />
versus<br />
9 seconds (1480684680-1480684671) for sequential<br />
with small backups<br />
156M backup-homebackup.tar.gz and<br />
316M backup-rootbackup.tar.gz</p>
<h4 id="jsmeix_commented_at_2016-12-02_1326"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-264453373">2016-12-02 13:26</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-12-02_1326" title="Permanent link">&para;</a></h4>
<p>Typo correction:<br />
5 seconds (1480684660-1480684655) for parallel<br />
versus<br />
9 seconds (1480684680-1480684671) for sequential</p>
<h4 id="jsmeix_commented_at_2016-12-02_1416"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-264463210">2016-12-02 14:16</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-12-02_1416" title="Permanent link">&para;</a></h4>
<p>On a virtual machine with 1 CPUs and 1GB main memory<br />
with bigger backups 1 GB urandom.data in /root/ and in /home/</p>
<pre>
# cat /dev/urandom | head -c 1G >/home/urandom.data
# cat /dev/urandom | head -c 1G >/root/urandom.data

# ls -lh /root/urandom.data /home/urandom.data
-rw-r--r-- 1 root root 1.0G Dec  2 14:51 /home/urandom.data
-rw-r--r-- 1 root root 1.0G Dec  2 14:29 /root/urandom.data
</pre>

<p>that result<br />
1.2G backup-homebackup.tar.gz<br />
and<br />
1.4G backup-rootbackup.tar.gz<br />
(how evil from me to torture 'tar' with random data ;-)</p>
<p>My timing results for two sequential mkbackuponly<br />
versus running them in parallel:</p>
<pre>
# date +%s ; usr/sbin/rear -C rootbackup -d -D mkbackuponly ; usr/sbin/rear -C homebackup -d -D mkbackuponly ; date +%s
1480687026
...
1480687139

# date +%s ; usr/sbin/rear -C rootbackup -d -D mkbackuponly & usr/sbin/rear -C homebackup -d -D mkbackuponly & wait ; date +%s
1480687162
...
1480687265
</pre>

<p>113 seconds for two sequential mkbackuponly<br />
versus<br />
103 seconds for two mkbackuponly in parallel</p>
<p>This is an unexpected good result because during<br />
single mkbackuponly run my "virt-manager" shows<br />
permanent 100% CPU usage when only one 'tar' runs<br />
so that I would not have expected any speed gain<br />
when running two of them in parallel.<br />
But even on that weak machine running in parallel<br />
gets the whole job done about 10% faster!</p>
<p>FYI:<br />
I did run those tests several times to be safe against<br />
random results - i.e. I can reproduce my timing results.<br />
I have even worse examples: 115 seconds for sequential<br />
versus 101 seconds for parallel.</p>
<h4 id="jsmeix_commented_at_2016-12-02_1430"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-264466154">2016-12-02 14:30</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-12-02_1430" title="Permanent link">&para;</a></h4>
<p>Now restore of that on my virtual machine<br />
with 4 CPUs and 4GB main memory:</p>
<pre>
RESCUE d25:~ # date +%s ; rear -C rootbackup -d -D restoreonly ; rear -C homebackup -d -D restoreonly ; date +%s
1480688682
...
1480688712

RESCUE d25:~ # date +%s ; rear -C rootbackup -d -D restoreonly & rear -C homebackup -d -D restoreonly & wait ; date +%s
1480688726
...
1480688746
</pre>

<p>30 seconds (1480688712-1480688682) for sequential<br />
versus<br />
20 seconds (1480688746-1480688726) for parallel.</p>
<p>On that machine my "virt-manager" shows<br />
about 40% CPU usage when only one 'tar' runs versus<br />
about 80% CPU usage when two 'tar' run in parallel.</p>
<h4 id="jsmeix_commented_at_2016-12-02_1544"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-264484529">2016-12-02 15:44</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-12-02_1544" title="Permanent link">&para;</a></h4>
<p>Now backup of that on that virtual machine<br />
with 4 CPUs and 4GB main memory:</p>
<pre>
# date +%s ; usr/sbin/rear -C rootbackup -d -D mkbackuponly ; usr/sbin/rear -C homebackup -d -D mkbackuponly ; date +%s
1480690968
...
1480691073

# date +%s ; usr/sbin/rear -C rootbackup -d -D mkbackuponly & usr/sbin/rear -C homebackup -d -D mkbackuponly & wait ; date +%s
1480691760
...
1480691822
</pre>

<p>105 seconds (1480691073-1480690968) for sequential<br />
versus<br />
62 seconds (1480691822-1480691760) for parallel<br />
with<br />
about 40% CPU usage for sequential<br />
about 80% CPU usage for parallel.</p>
<h4 id="jsmeix_commented_at_2016-12-05_1131"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-264831535">2016-12-05 11:31</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-12-05_1131" title="Permanent link">&para;</a></h4>
<p>With
<a href="https://github.com/rear/rear/issues/1096">https://github.com/rear/rear/issues/1096</a><br />
fixed by
<a href="https://github.com/rear/rear/pull/1101">https://github.com/rear/rear/pull/1101</a><br />
the last missing step for<br />
"Multiple simultaneous backups and/or restores"<br />
is
<a href="https://github.com/rear/rear/issues/1102">https://github.com/rear/rear/issues/1102</a></p>
<p>For ReaR 2.0 I like to have manual setup of<br />
"Multiple simultaneous backups and/or restores"<br />
implemented and documented so that<br />
experienced users can use it.</p>
<p>Any kind of "nice to use simple automatisms"<br />
would come later - if at all - based on helpful user feedback<br />
(e.g. "I need it all simply just work" is no helpful feedback ;-)</p>
<h4 id="jsmeix_commented_at_2016-12-05_1349"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-264858391">2016-12-05 13:49</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-12-05_1349" title="Permanent link">&para;</a></h4>
<p>With
<a href="https://github.com/rear/rear/issues/1102">https://github.com/rear/rear/issues/1102</a><br />
fixed by
<a href="https://github.com/rear/rear/pull/1103">https://github.com/rear/rear/pull/1103</a><br />
"Multiple simultaneous backups and/or restores"<br />
work well for me.</p>
<p>Example:</p>
<pre>
# grep -v '^#' etc/rear/local.conf
OUTPUT=ISO
SSH_ROOT_PASSWORD="rear"
USE_DHCLIENT="yes"
KEEP_BUILD_DIR=""
this_file_name=$( basename ${BASH_SOURCE[0]} )
LOGFILE="$LOG_DIR/rear-$HOSTNAME-$WORKFLOW-${this_file_name%.*}.log"

# grep -v '^#' etc/rear/base.conf

this_file_name=$( basename ${BASH_SOURCE[0]} )
LOGFILE="$LOG_DIR/rear-$HOSTNAME-$WORKFLOW-${this_file_name%.*}.log"
BACKUP_PROG_EXCLUDE=( /root/* /home/* )
BACKUP_PROG_ARCHIVE="backup-${this_file_name%.*}"
BACKUP=NETFS
BACKUP_OPTIONS="nfsvers=3,nolock"
BACKUP_URL=nfs://10.160.4.244/nfs

# grep -v '^#' etc/rear/rootbackup.conf 

MESSAGE_PREFIX="PID$$: "
PROGRESS_MODE="plain"
PROGRESS_WAIT_SECONDS="3"
this_file_name=$( basename ${BASH_SOURCE[0]} )
LOGFILE="$LOG_DIR/rear-$HOSTNAME-$WORKFLOW-${this_file_name%.*}.log"
BACKUP_ONLY_INCLUDE="yes"
BACKUP_PROG_INCLUDE=( /root/* )
BACKUP_PROG_ARCHIVE="backup-${this_file_name%.*}"
BACKUP=NETFS
BACKUP_OPTIONS="nfsvers=3,nolock"
BACKUP_URL=nfs://10.160.4.244/nfs

# grep -v '^#' etc/rear/homebackup.conf 

MESSAGE_PREFIX="PID$$: "
PROGRESS_MODE="plain"
PROGRESS_WAIT_SECONDS="2"
this_file_name=$( basename ${BASH_SOURCE[0]} )
LOGFILE="$LOG_DIR/rear-$HOSTNAME-$WORKFLOW-${this_file_name%.*}.log"
BACKUP_ONLY_INCLUDE="yes"
BACKUP_PROG_INCLUDE=( /home/* )
BACKUP_PROG_ARCHIVE="backup-${this_file_name%.*}"
BACKUP=NETFS
BACKUP_OPTIONS="nfsvers=3,nolock"
BACKUP_URL=nfs://10.160.4.244/nfs

# usr/sbin/rear -C base -d -D mkbackup

# usr/sbin/rear -C rootbackup -d -D mkbackuponly & usr/sbin/rear -C homebackup -d -D mkbackuponly & wait ; echo done

Recovery:

RESCUE f79:~ # rear -C base -d -D recover

RESCUE f79:~ # rear -C rootbackup -d -D restoreonly & rear -C homebackup -d -D restoreonly & wait ; echo done
</pre>

<h4 id="jsmeix_commented_at_2016-12-05_1353"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-264859167">2016-12-05 13:53</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-12-05_1353" title="Permanent link">&para;</a></h4>
<p>The final step from my current point of view is<br />
<a href="https://github.com/rear/rear/issues/1104">https://github.com/rear/rear/issues/1104</a></p>
<h4 id="jsmeix_commented_at_2016-12-07_1114"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-265421331">2016-12-07 11:14</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-12-07_1114" title="Permanent link">&para;</a></h4>
<p>After the final step<br />
<a href="https://github.com/rear/rear/issues/1104">https://github.com/rear/rear/issues/1104</a><br />
is merged, there is one more "very final" step:<br />
<a href="https://github.com/rear/rear/issues/1110">https://github.com/rear/rear/issues/1110</a></p>
<h4 id="jsmeix_commented_at_2016-12-07_1328"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-265446779">2016-12-07 13:28</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-12-07_1328" title="Permanent link">&para;</a></h4>
<p>@gozora<br />
I have a request:</p>
<p>In my current documentation for multiple backups<br />
<a href="https://github.com/rear/rear/blob/master/doc/user-guide/11-multiple-backups.adoc">https://github.com/rear/rear/blob/master/doc/user-guide/11-multiple-backups.adoc</a><br />
I describe in particular<br />
"Relax-and-Recover Setup for Different Backup Methods"<br />
using NETFS/'tar' and Borg which is based on your above<br />
<a href="https://github.com/rear/rear/issues/1088#issuecomment-264009984">https://github.com/rear/rear/issues/1088#issuecomment-264009984</a></p>
<p>To be on the safe side I would very much appreciate it<br />
if you could test if it actually works what I describe there.</p>
<p>Optionally - if possible - even together with<br />
"Running Multiple Backups and Restores in Parallel"</p>
<h4 id="gozora_commented_at_2016-12-07_1335"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-265448364">2016-12-07 13:35</a>:<a class="headerlink" href="#gozora_commented_at_2016-12-07_1335" title="Permanent link">&para;</a></h4>
<p>@jsmeix<br />
Sure, will try that later today ...</p>
<h4 id="gozora_commented_at_2016-12-07_1708"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-265507663">2016-12-07 17:08</a>:<a class="headerlink" href="#gozora_commented_at_2016-12-07_1708" title="Permanent link">&para;</a></h4>
<p>@jsmeix<br />
Remarks from my quick tests:</p>
<ul>
<li><code>BORGBACKUP_ARCHIVE_PREFIX="backup-${this_file_name%.*}"</code> can be
    used only if it expands to alphanumeric values only, hence config
    filenames like backup_home.conf will not be accepted.</li>
<li>if ReaR fails it reports: "Aborting due to an error, check
    /var/log/rear/rear-mate.log", this looks to be wrong since e.g.
    "rear-mate.1084.log" was in use.</li>
</ul>
<p>Unfortunately I don't have more time for tests today :-(. I'll try to
continue tomorrow.</p>
<p>V.</p>
<h4 id="jsmeix_commented_at_2016-12-08_1547"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-265772949">2016-12-08 15:47</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-12-08_1547" title="Permanent link">&para;</a></h4>
<p>With<br />
<a href="https://github.com/rear/rear/pull/1115">https://github.com/rear/rear/pull/1115</a><br />
merged, now when rear errors out<br />
it shows the right logfile name.</p>
<h4 id="jsmeix_commented_at_2016-12-08_1623"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-265783045">2016-12-08 16:23</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-12-08_1623" title="Permanent link">&para;</a></h4>
<p>With<br />
<a href="https://github.com/rear/rear/commit/e5cbf1f46cded901ec1df505f28cf6b24562efa3">https://github.com/rear/rear/commit/e5cbf1f46cded901ec1df505f28cf6b24562efa3</a><br />
I use in doc/user-guide/11-multiple-backups.adoc simple</p>
<pre>
BORGBACKUP_ARCHIVE_PREFIX="rear"
</pre>

<p>to avoid the first item in the list in the above<br />
<a href="https://github.com/rear/rear/issues/1088#issuecomment-265507663">https://github.com/rear/rear/issues/1088#issuecomment-265507663</a></p>
<h4 id="gozora_commented_at_2016-12-08_1626"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-265784051">2016-12-08 16:26</a>:<a class="headerlink" href="#gozora_commented_at_2016-12-08_1626" title="Permanent link">&para;</a></h4>
<p>@jsmeix actually you can remove it all.<br />
<code>BORGBACKUP_ARCHIVE_PREFIX="rear"</code> is defined in <em>default.conf</em></p>
<h4 id="jsmeix_commented_at_2016-12-08_1642"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-265788556">2016-12-08 16:42</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-12-08_1642" title="Permanent link">&para;</a></h4>
<p>Guess wherefrom I got that value ;-)</p>
<p>I like to mention BORGBACKUP_ARCHIVE_PREFIX<br />
because it matches the BACKUP_PROG_ARCHIVE<br />
that I use for NETFS/tar because for multiple NETFS/tar<br />
backups one must explicitly specify different<br />
BACKUP_PROG_ARCHIVE values in the<br />
different config files.</p>
<p>I assume when one does multiple Borg backups<br />
it is also required to explicitly specify different<br />
BORGBACKUP_ARCHIVE_PREFIX values<br />
in the different config files?</p>
<p>Perhaps you could try out if multiple Borg backups work?</p>
<h4 id="gozora_commented_at_2016-12-08_1701"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-265793842">2016-12-08 17:01</a>:<a class="headerlink" href="#gozora_commented_at_2016-12-08_1701" title="Permanent link">&para;</a></h4>
<p>As far as I remember Borg does not support multiple writes to single
archive. (It was not even possible to mount archive while backup was
running).<br />
I could however try writing to two separate archives ... In any case
BORGBACKUP_ARCHIVE_PREFIX can be omitted (I think ;-) )</p>
<h4 id="gozora_commented_at_2016-12-08_1746"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-265805547">2016-12-08 17:46</a>:<a class="headerlink" href="#gozora_commented_at_2016-12-08_1746" title="Permanent link">&para;</a></h4>
<p>Hello @jsmeix<br />
One other remark regarding docu. There is a slight problem with:</p>
<pre><code>rear -C basic_system mkbackup
rear -C home_backup mkbackuponly
</code></pre>
<p>The thing is, that if you run <code>rear -C basic_system mkbackup</code> for the
very first time <em>/borg/keys</em> will be empty. (as Borg creates encryption
keys during repository initialization). This means that ReaR
rescue/recover system will have not encryption keys available.<br />
This can be corrected by successive executing of
<code>rear -C basic_system mkrescue</code> or running
<code>rear -C home_backup mkbackuponly</code> before
<code>rear -C basic_system mkbackup</code></p>
<p>So I'd correct docu as follows:</p>
<ul>
<li>Option 1</li>
</ul>
<!-- -->

<pre><code>rear -C home_backup mkbackuponly
rear -C basic_system mkbackup
</code></pre>
<ul>
<li>Option 2</li>
</ul>
<!-- -->

<pre><code>rear -C basic_system mkbackup
rear -C home_backup mkbackuponly
rear -C basic_system mkrescue
</code></pre>
<p>V.</p>
<h4 id="jsmeix_commented_at_2016-12-12_1116"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-266403163">2016-12-12 11:16</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-12-12_1116" title="Permanent link">&para;</a></h4>
<p>@gozora<br />
many thanks for your valuable feedback!<br />
I fixed the issue in your<br />
<a href="https://github.com/rear/rear/issues/1088#issuecomment-265805547">https://github.com/rear/rear/issues/1088#issuecomment-265805547</a><br />
via
<a href="https://github.com/rear/rear/pull/1118">https://github.com/rear/rear/pull/1118</a></p>
<h4 id="gozora_commented_at_2016-12-12_1125"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-266404883">2016-12-12 11:25</a>:<a class="headerlink" href="#gozora_commented_at_2016-12-12_1125" title="Permanent link">&para;</a></h4>
<p>Hello @jsmeix ,</p>
<p>Maybe one more similar to:</p>
<blockquote>
<p>if ReaR fails it reports: "Aborting due to an error, check
/var/log/rear/rear-mate.log", this looks to be wrong since e.g.
"rear-mate.1084.log" was in use.</p>
</blockquote>
<p>Once I was booted in ReaR restore/recover media, and run
<code>rear -C base_or recover</code> and encounter failure, I had that menu with
choices displayed (sorry I don't know how it is called and how it looks
;-), but I'm sure you will know what I'm talking about)</p>
<pre><code>rear failed to recover 
1) edit something
2) edit that thing
3) ....
4) show log /var/log/rear/...
5) Abort
...
</code></pre>
<p>Once I choose <strong>4</strong> I got error <em>/var/log/rear/...</em> does not exist ...</p>
<p>If you can't locate where could be the problem I can try to reproduce
today evening ...</p>
<p>V.</p>
<h4 id="jsmeix_commented_at_2016-12-12_1253"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-266424156">2016-12-12 12:53</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-12-12_1253" title="Permanent link">&para;</a></h4>
<p>I found "View Relax-and-Recover log" in<br />
usr/share/rear/layout/prepare/default/200_recreate_hpraid.sh<br />
and<br />
usr/share/rear/layout/recreate/default/200_run_script.sh</p>
<h4 id="gozora_commented_at_2016-12-12_1257"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-266424793">2016-12-12 12:57</a>:<a class="headerlink" href="#gozora_commented_at_2016-12-12_1257" title="Permanent link">&para;</a></h4>
<p>I think it is <a href="https://github.com/rear/rear/blob/master/usr/share/rear/layout/recreate/default/200_run_script.sh#L31">this
one</a>
which is failing.</p>
<h4 id="jsmeix_commented_at_2016-12-12_1305"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-266426400">2016-12-12 13:05</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-12-12_1305" title="Permanent link">&para;</a></h4>
<p>Yes - one of many such cases.</p>
<p>The whole logging in ReaR is currently an overcomplicated mess.<br />
At some later time I will clean that up.</p>
<p>But for the next ReaR 2.0 I will try to deal with the current mess.</p>
<p>I think I need to replace bacically everywhere<br />
$LOGFILE by $REAR_LOGFILE</p>
<p>$REAR_LOGFILE is the one that is used while rear runs<br />
while $LOGFILE can be specified different by the user<br />
to be used as final name for the log file.</p>
<p>I think I will rename the meaningless REAR_LOGFILE<br />
(what a surprise: that thingy belongs to ReaR! ;-)<br />
to RUNTIME_LOGFILE to make its name tell<br />
what it actually is.</p>
<h4 id="jsmeix_commented_at_2016-12-12_1311"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-266427428">2016-12-12 13:11</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-12-12_1311" title="Permanent link">&para;</a></h4>
<p>I submitted<br />
<a href="https://github.com/rear/rear/issues/1119">https://github.com/rear/rear/issues/1119</a><br />
to fix that.</p>
<h4 id="jsmeix_commented_at_2016-12-13_1333"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-266739406">2016-12-13 13:33</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-12-13_1333" title="Permanent link">&para;</a></h4>
<p>I have not yet tested it but I have the dim feeling that<br />
currently multiple backups will horribly fail with<br />
BACKUP_TYPE=incremental or BACKUP_TYPE=differential<br />
because those use hardcoded fixed backup archive names,<br />
cf. prep/NETFS/default/070_set_backup_archive.sh</p>
<h4 id="jsmeix_commented_at_2016-12-13_1351"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-266743218">2016-12-13 13:51</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-12-13_1351" title="Permanent link">&para;</a></h4>
<p><a href="https://github.com/rear/rear/commit/032203812ce85fed8f8745a902824811662163b7">https://github.com/rear/rear/commit/032203812ce85fed8f8745a902824811662163b7</a><br />
documents that multiple backups are in general not supported for<br />
BACKUP_TYPE=incremental or BACKUP_TYPE=differential</p>
<p>I think one can use incremental or differential backups<br />
for one single part of the multiple backups (e.g. for the<br />
backup of the basic system) but what will fail is<br />
using multiple incremental or differential backups.</p>
<h4 id="jsmeix_commented_at_2016-12-13_1601"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-266778521">2016-12-13 16:01</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-12-13_1601" title="Permanent link">&para;</a></h4>
<p>Regarding<br />
<a href="https://github.com/rear/rear/issues/1088#issuecomment-266404883">https://github.com/rear/rear/issues/1088#issuecomment-266404883</a><br />
where "rear recover" fails with some kind of menue that contains<br />
"View Relax-and-Recover log":<br />
I have tested it with current GitHub master code<br />
and now it works for me.</p>
<p>For the fun of it:<br />
My main testing problem was to make "rear recover" fail in the<br />
right way so that I get that "View Relax-and-Recover log".<br />
I.e. for me "rear recover" works too good ;-)</p>
<h4 id="gozora_commented_at_2016-12-13_1618"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-266783542">2016-12-13 16:18</a>:<a class="headerlink" href="#gozora_commented_at_2016-12-13_1618" title="Permanent link">&para;</a></h4>
<p>Thanks, I'll check that during my next restore failure.<br />
For me it is not that hard to make ReaR fail during restore :-)</p>
<h4 id="jsmeix_commented_at_2016-12-15_1538"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-267358500">2016-12-15 15:38</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-12-15_1538" title="Permanent link">&para;</a></h4>
<p>With
<a href="https://github.com/rear/rear/issues/1116">https://github.com/rear/rear/issues/1116</a><br />
fixed by
<a href="https://github.com/rear/rear/pull/1129">https://github.com/rear/rear/pull/1129</a><br />
there are currently no issues left regarding multiple backups<br />
according to how currently multiple backups is documented<br />
to work in doc/user-guide/11-multiple-backups.adoc<br />
so that I close this issue now because<br />
from my current point of view multiple backups<br />
should now work sufficiently to be released in ReaR 2.0.</p>
<p>For further issues with multiple backups<br />
please report them as separated GitHub issues.</p>
<p>@gozora<br />
again many thanks for all your valuable help and work!</p>
<h4 id="jsmeix_commented_at_2016-12-15_1610"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1088#issuecomment-267367432">2016-12-15 16:10</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-12-15_1610" title="Permanent link">&para;</a></h4>
<p>Regarding<br />
<a href="https://github.com/rear/rear/issues/1088#issuecomment-263887450">https://github.com/rear/rear/issues/1088#issuecomment-263887450</a><br />
I submitted<br />
<a href="https://github.com/rear/rear/issues/1131">https://github.com/rear/rear/issues/1131</a></p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2024 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2016-11-25.1088.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
