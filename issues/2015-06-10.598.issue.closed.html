<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#598 Issue closed: checklayout.conf/disklayout.conf sets wrong blocksize=swap, grep -oi in subshell does not return valid values - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#598 Issue closed: checklayout.conf/disklayout.conf sets wrong blocksize=swap, grep -oi in subshell does not return valid values";
        var mkdocs_page_input_path = "issues/2015-06-10.598.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../development/squash-git-log-commments.html">How to squash git log comments into one line</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#598 Issue closed: checklayout.conf/disklayout.conf sets wrong blocksize=swap, grep -oi in subshell does not return valid values</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="598_issue_closed_checklayoutconfdisklayoutconf_sets_wrong_blocksizeswap_grep_-oi_in_subshell_does_not_return_valid_values"><a href="https://github.com/rear/rear/issues/598">#598 Issue</a> <code>closed</code>: checklayout.conf/disklayout.conf sets wrong blocksize=swap, grep -oi in subshell does not return valid values<a class="headerlink" href="#598_issue_closed_checklayoutconfdisklayoutconf_sets_wrong_blocksizeswap_grep_-oi_in_subshell_does_not_return_valid_values" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>bug</code>, <code>fixed / solved / done</code></p>
<h4 id="abbbi_opened_issue_at_2015-06-10_1045"><img src="https://avatars.githubusercontent.com/u/3919561?u=473291dd3dbd58fd0af45714935992a3d416aa6e&v=4" width="50"><a href="https://github.com/abbbi">abbbi</a> opened issue at <a href="https://github.com/rear/rear/issues/598">2015-06-10 10:45</a>:<a class="headerlink" href="#abbbi_opened_issue_at_2015-06-10_1045" title="Permanent link">&para;</a></h4>
<p>hi,</p>
<p>the following situation: the created disklayout.conf misses newlines so
recovery fails, version<br />
is 1.17.0 on sles11 sp1</p>
<p>the created file looks like this:</p>
<pre>
#disk /dev/sda 144955146240 gpt
#part /dev/sda 205615104 17408 primary none /dev/sda1
#part /dev/sda 144749496832 205632512 primary lvm /dev/sda2
disk /dev/sdb 290984034304 
lvmdev /dev/oracle /dev/sdb Ds6R3n-AUZ6-RzTn-7z7s-P8YK-Jexe-vtBlTc 568328192
#lvmdev /dev/system /dev/sda2 DW97hv-Aylg-eOKa-vup2-xUkX-7tOE-hy1Q7b 282713861
lvmgrp /dev/oracle 4096 69375 284160000
#lvmgrp /dev/system 4096 34510 141352960
lvmvol /dev/oracle disppl 25600 209715200 
lvmvol /dev/oracle orabackup 12800 104857600 
lvmvol /dev/oracle cos 5120 41943040 
#lvmvol /dev/system home 1024 8388608 
#lvmvol /dev/system opt 2560 20971520 
#lvmvol /dev/system root 1024 8388608 
#lvmvol /dev/system swap 5120 41943040 
#lvmvol /dev/system tmp 512 4194304 
#lvmvol /dev/system var 512 4194304 
# Filesystems (only ext2,ext3,ext4,vfat,xfs,reiserfs,btrfs are supported).
# Format: fs &lt;device&gt; &lt;mountpoint&gt; &lt;fstype&gt; [uuid=&lt;uuid&gt;] [label=&lt;label&gt;] [&lt;attributes&gt;]
fs /dev/mapper/oracle-cos /oracle/COS ext3 uuid=fe070599-2e4c-4242-a357-755ba182e787 label= blocksize=swap /dev/mapper/system-swap uuid=845d7b2f-a09d-4566-8ce6-814c913db056 label=
</pre>

<p>note the blocksize=swap option which does not make any sense, this is
the point where<br />
the recovery fails.</p>
<p>Im currently investigating this and i really have no idea what is going
wrong. First of all i can<br />
see the following error from the checklayout logfile, which i think is
the cause of the problem:</p>
<pre>
2015-06-10 12:34:48.385146993 Saving filesystem layout (using the traditional mount command).
/var/opt/sesam/var/lib/rear/usr/share/rear/layout/save/GNU/Linux/23_filesystem_layout.sh: line 104: reserved_blocks * 100 / nr_blocks : division by 0 (error token is " ")
</pre>

<p>i have set -x in the appropriate section in 12_filesystem_layout.sh
and it looks like this:</p>
<pre>
2015-06-10 12:34:48.385146993 Saving filesystem layout (using the traditional mount command).
++ tunefs=tune2fs
++ '[' ext3 = ext4 ']'
++ echo -n 'DEVICE: /dev/mapper/oracle-cos'
+++ tune2fs -l /dev/mapper/oracle-cos
+++ tr -d '[:blank:]'
+++ grep -i UUID:
+++ cut -d : -f 2
++ uuid=fe070599-2e4c-4242-a357-755ba182e787
++ echo -n ' uuid=fe070599-2e4c-4242-a357-755ba182e787'
+++ e2label /dev/mapper/oracle-cos
++ label=
++ echo -n ' label='
+++ tune2fs -l /dev/mapper/oracle-cos
+++ tr -d '[:blank:]'
+++ grep -oi 'Blocksize:[0-9]*'
+++ cut -d : -f 2
++ blocksize=
++ echo -n ' blocksize='
+++ tune2fs -l /dev/mapper/oracle-cos
+++ tr -d '[:blank:]'
+++ grep -iv reserved
+++ grep -oi 'Blockcount:[0-9]*'
+++ cut -d : -f 2
++ nr_blocks=
+++ tune2fs -l /dev/mapper/oracle-cos
+++ tr -d '[:blank:]'
+++ grep -oi 'Reservedblockcount:[0-9]*'
+++ cut -d : -f 2
++ reserved_blocks=
</pre>

<p>as you can see it fails to read any info besides the UUID of the device!
It however works nicely<br />
on the command line:</p>
<pre>
 # echo $( tune2fs -l /dev/oracle/cos |  tr -d '[:blank:]' | grep -iv reserved | grep -oi 'Blockcount:[0-9]*' | cut -d ':' -f 2 )
5242880
 # echo $( tune2fs -l /dev/oracle/cos | tr -d '[:blank:]' | grep -oi 'Blocksize:[0-9]*' | cut -d ':' -f 2 )
4096
</pre>

<p>any idea how it can be that it fails to read the appropriate values if
the commands are executed<br />
from REAR? If i add a static tune2fs command within this section i dont
get back any value from the command. /bin/sh points to bash, rear uses
bash aswell. There is only one tune2fs within<br />
the path. fail to see where the problem could be.</p>
<h4 id="abbbi_commented_at_2015-06-10_1135"><img src="https://avatars.githubusercontent.com/u/3919561?u=473291dd3dbd58fd0af45714935992a3d416aa6e&v=4" width="50"><a href="https://github.com/abbbi">abbbi</a> commented at <a href="https://github.com/rear/rear/issues/598#issuecomment-110711456">2015-06-10 11:35</a>:<a class="headerlink" href="#abbbi_commented_at_2015-06-10_1135" title="Permanent link">&para;</a></h4>
<p>hi,</p>
<p>ok this i very weird, after changing:</p>
<p>blocksize=$( $tunefs -l $device | tr -d '[:blank:]' | grep -oi
'Blocksize:[0-9]*' | cut -d ':' -f 2
)�������������������������������������������������������������������������������������������������������</p>
<p>to</p>
<p>blocksize=$( $tunefs -l $device | tr -d '[:blank:]' | grep -i
'Blocksize:[0-9]*' | cut -d ':' -f 2
)�������������������������������������������������������������������������������������������������������</p>
<p>it can succesfully get the blocksize and the other values:</p>
<p>+++ tune2fs -l /dev/mapper/oracle-cos<br />
+++ tr -d '[:blank:]'<br />
+++ grep -i 'Blocksize:[0-9]<em>'<br />
+++ cut -d : -f 2<br />
++ blocksize=4096<br />
++ echo -n ' blocksize=4096'<br />
+++ tune2fs -l /dev/mapper/oracle-cos<br />
+++ tr -d '[:blank:]'<br />
+++ grep -iv reserved<br />
+++ grep -i 'Blockcount:[0-9]</em>'<br />
+++ cut -d : -f 2<br />
++ nr_blocks=5242880<br />
+++ tune2fs -l /dev/mapper/oracle-cos<br />
+++ tr -d '[:blank:]'<br />
+++ grep -i 'Reservedblockcount:[0-9]<em>'<br />
+++ cut -d : -f 2<br />
++ reserved_blocks=262144<br />
++ reserved_percentage=5<br />
++ echo -n ' reserved_blocks=5%'<br />
+++ tune2fs -l /dev/mapper/oracle-cos<br />
+++ tr -d '[:blank:]'<br />
+++ grep -i 'Maximummountcount:[0-9]</em>'<br />
+++ cut -d : -f 2<br />
++ max_mounts=-1<br />
++ echo -n ' max_mounts=-1'<br />
+++ tune2fs -l /dev/mapper/oracle-cos<br />
+++ tr -d '[:blank:]'<br />
+++ grep -oi 'Checkinterval:[0-9]*'<br />
+++ cut -d : -f 2<br />
++ check_interval=<br />
++ let check_interval=/86400<br />
/var/opt/sesam/var/lib/rear/usr/share/rear/layout/save/GNU/Linux/23_filesystem_layout.sh:
line 111: let: check_interval=/86400: syntax error: operand expected
(error token is "/86400")<br />
����������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������</p>
<p>i stumbled about the followig comment regarding this:</p>
<pre><code>            # FIXME: I (jsmeix@suse.de) have no idea what the reason for the following is:
            # On Fedora | grep -oi 'Maximummountcount:[0-9]*' | does not work but | grep -i 'Maximummountcount:[0-9]*' | works.
            # If someone knows the reason replace this comment with a description of the actual root cause.
</code></pre>
<p>seems to be of the same nature ..</p>
<h4 id="abbbi_commented_at_2015-06-10_1140"><img src="https://avatars.githubusercontent.com/u/3919561?u=473291dd3dbd58fd0af45714935992a3d416aa6e&v=4" width="50"><a href="https://github.com/abbbi">abbbi</a> commented at <a href="https://github.com/rear/rear/issues/598#issuecomment-110712769">2015-06-10 11:40</a>:<a class="headerlink" href="#abbbi_commented_at_2015-06-10_1140" title="Permanent link">&para;</a></h4>
<p>The other problem is with checkinterval wich contains not only a
integer:</p>
<p>nosudb01:/var/opt/sesam/var/lib/rear/usr/sbin # tune2fs -l
/dev/oracle/cos | tr -d '[:blank:]' | grep -i
'Checkinterval:[0-9]*' | cut -d ':' -f 2<br />
0(<none>)<br />
����������������������������������������������������������������������������������������������������������������������������������������������������������������<br />
this makes it bail out a few lines later:</p>
<p>++ let 'check_interval=0(<none>)/86400'<br />
/var/opt/sesam/var/lib/rear/usr/share/rear/layout/save/GNU/Linux/23_filesystem_layout.sh:
line 111: let: check_interval=0(<none>)/86400: syntax error in
expression (error token is "(<none>)/86400")<br />
++ echo -n ' check_interval=0d'<br />
�����������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������</p>
<h4 id="jsmeix_commented_at_2015-06-10_1233"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/598#issuecomment-110732270">2015-06-10 12:33</a>:<a class="headerlink" href="#jsmeix_commented_at_2015-06-10_1233" title="Permanent link">&para;</a></h4>
<p>Again an issue with that tunefs output parsing code.</p>
<p>I think the whole tune2fs output parsing code in
23_filesystem_layout.sh is fragile and should be reworked to be more
fail-safe. But currently I have no good idea how to actually improve it.</p>
<p>@abbbi<br />
please run the commands</p>
<pre>
tune2fs -l /dev/mapper/oracle-cos
tune2fs -l /dev/mapper/oracle-cos | tr '&lt;&gt;' ']['
tune2fs -l /dev/mapper/oracle-cos | tr '&lt;&gt;' '][' | od -a
</pre>

<p>on your original system and paste their exact output here so that I
could get a better understanding what exactly your particular tune2fs
output is.</p>
<h4 id="jsmeix_commented_at_2015-06-10_1302"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/598#issuecomment-110742791">2015-06-10 13:02</a>:<a class="headerlink" href="#jsmeix_commented_at_2015-06-10_1302" title="Permanent link">&para;</a></h4>
<p>@schlomo @gdha</p>
<p>it seems 23_filesystem_layout.sh proceeds regardless of errors in some
of its commands and that results a broken disklayout.conf file.</p>
<p>I have a bad feeling with that error-ignoring behaviour.</p>
<p>I think all scripts that are run during "rear mkbackup" should by
default exit in case of any error (i.e. "set -e" and "set -o pipefail")
to avoid that what "rear mkbackup" produces could be silently wrong.</p>
<p>In contrast for scripts that are run during "rear recover" it might be a
better default to ignore errors - but personally I even would prefer to
also exit by default in case of errors for "rear recover".</p>
<p>A rear command line option should be added to specify the rear
error-exit behaviour so that the admin could enfore on his own risk that
rear proceeds regardless of errors.</p>
<h4 id="abbbi_commented_at_2015-06-10_1343"><img src="https://avatars.githubusercontent.com/u/3919561?u=473291dd3dbd58fd0af45714935992a3d416aa6e&v=4" width="50"><a href="https://github.com/abbbi">abbbi</a> commented at <a href="https://github.com/rear/rear/issues/598#issuecomment-110758663">2015-06-10 13:43</a>:<a class="headerlink" href="#abbbi_commented_at_2015-06-10_1343" title="Permanent link">&para;</a></h4>
<p>hi,</p>
<p>it looks like the system in question has two grep versions, one</p>
<p>/bin/grep<br />
/usr/bin/grep</p>
<p>probably this is cause of the issue, will wait for customer to
respond.<br />
I have attached the output of your requested commands here:</p>
<p><a href="http://download.sep.de/.sep/out.txt">http://download.sep.de/.sep/out.txt</a></p>
<h4 id="jsmeix_commented_at_2015-06-10_1347"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/598#issuecomment-110760303">2015-06-10 13:47</a>:<a class="headerlink" href="#jsmeix_commented_at_2015-06-10_1347" title="Permanent link">&para;</a></h4>
<p>No - I think it is the other way round:</p>
<p>23_filesystem_layout.sh exits when one of the tune2fs suff fails e.g.
at</p>
<pre>
reserved_percentage=$(( reserved_blocks * 100 / nr_blocks ))
</pre>

<p>with</p>
<pre>
/var/opt/sesam/var/lib/rear/usr/share/rear/layout/save/GNU/Linux/23_filesystem_layout.sh: line 104: reserved_blocks * 100 / nr_blocks : division by 0 (error token is " ")
</pre>

<p>The last thing that was written to disklayout.conf before is from</p>
<pre>
echo -n " blocksize=$blocksize"
</pre>

<p>When 23_filesystem_layout.sh exits as described here it causes that
the final</p>
<pre>
# Finish the current filesystem layout line with a newline character:
echo
</pre>

<p>is not run so that the newline is missing i.e. disklayout.conf looks now</p>
<pre>
...
fs /dev/mapper/oracle-cos /oracle/COS ext3 uuid=fe070599-2e4c-4242-a357-755ba182e787 label= blocksize=
</pre>

<p>without a newline after "blocksize="</p>
<p>Afterwards 24_swaps_layout.sh is run and that appends to
disklayout.conf</p>
<pre>
swap /dev/mapper/system-swap uuid=845d7b2f-a09d-4566-8ce6-814c913db056 label=
</pre>

<p>which results in the end</p>
<pre>
fs /dev/mapper/oracle-cos /oracle/COS ext3 uuid=fe070599-2e4c-4242-a357-755ba182e787 label= blocksize=swap /dev/mapper/system-swap uuid=845d7b2f-a09d-4566-8ce6-814c913db056 label=
</pre>

<p>Therefore - from my current point of view - the question is:</p>
<p>When 23_filesystem_layout.sh exits as described above, why does then
rear proceed with 24_swaps_laxout.sh ?</p>
<h4 id="jsmeix_commented_at_2015-06-11_0948"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/598#issuecomment-111070026">2015-06-11 09:48</a>:<a class="headerlink" href="#jsmeix_commented_at_2015-06-11_0948" title="Permanent link">&para;</a></h4>
<p>The content from
<a href="http://download.sep.de/.sep/out.txt">http://download.sep.de/.sep/out.txt</a>
plus added commands:</p>
<pre>
# tune2fs -l /dev/mapper/oracle-cos
tune2fs 1.41.9 (22-Aug-2009)
Filesystem volume name:   &lt;none&gt;
Last mounted on:          &lt;not available&gt;
Filesystem UUID:          fe070599-2e4c-4242-a357-755ba182e787
Filesystem magic number:  0xEF53
Filesystem revision #:    1 (dynamic)
Filesystem features:      has_journal ext_attr resize_inode dir_index filetype needs_recovery sparse_super large_file
Filesystem flags:         signed_directory_hash 
Default mount options:    (none)
Filesystem state:         clean
Errors behavior:          Continue
Filesystem OS type:       Linux
Inode count:              1310720
Block count:              5242880
Reserved block count:     262144
Free blocks:              2991817
Free inodes:              1310693
First block:              0
Block size:               4096
Fragment size:            4096
Reserved GDT blocks:      1022
Blocks per group:         32768
Fragments per group:      32768
Inodes per group:         8192
Inode blocks per group:   512
Filesystem created:       Thu Jul  7 15:53:17 2011
Last mount time:          Thu Apr 23 14:26:58 2015
Last write time:          Thu Apr 23 14:26:58 2015
Mount count:              18
Maximum mount count:      -1
Last checked:             Thu Jul  7 15:53:17 2011
Check interval:           0 (&lt;none&gt;)
Reserved blocks uid:      0 (user root)
Reserved blocks gid:      0 (group root)
First inode:              11
Inode size:               256
Required extra isize:     28
Desired extra isize:      28
Journal inode:            8
Default directory hash:   half_md4
Directory Hash Seed:      6eb517c2-7af4-4131-82eb-fbe21d9a930c
Journal backup:           inode blocks
# tune2fs -l /dev/mapper/oracle-cos | tr '&lt;&gt;' ']['
tune2fs 1.41.9 (22-Aug-2009)
Filesystem volume name:   ]none[
Last mounted on:          ]not available[
Filesystem UUID:          fe070599-2e4c-4242-a357-755ba182e787
Filesystem magic number:  0xEF53
Filesystem revision #:    1 (dynamic)
Filesystem features:      has_journal ext_attr resize_inode dir_index filetype needs_recovery sparse_super large_file
Filesystem flags:         signed_directory_hash 
Default mount options:    (none)
Filesystem state:         clean
Errors behavior:          Continue
Filesystem OS type:       Linux
Inode count:              1310720
Block count:              5242880
Reserved block count:     262144
Free blocks:              2991817
Free inodes:              1310693
First block:              0
Block size:               4096
Fragment size:            4096
Reserved GDT blocks:      1022
Blocks per group:         32768
Fragments per group:      32768
Inodes per group:         8192
Inode blocks per group:   512
Filesystem created:       Thu Jul  7 15:53:17 2011
Last mount time:          Thu Apr 23 14:26:58 2015
Last write time:          Thu Apr 23 14:26:58 2015
Mount count:              18
Maximum mount count:      -1
Last checked:             Thu Jul  7 15:53:17 2011
Check interval:           0 (]none[)
Reserved blocks uid:      0 (user root)
Reserved blocks gid:      0 (group root)
First inode:              11
Inode size:               256
Required extra isize:     28
Desired extra isize:      28
Journal inode:            8
Default directory hash:   half_md4
Directory Hash Seed:      6eb517c2-7af4-4131-82eb-fbe21d9a930c
Journal backup:           inode blocks
# tune2fs -l /dev/mapper/oracle-cos | tr '&lt;&gt;' '][' | od -a
0000000   t   u   n   e   2   f   s  sp   1   .   4   1   .   9  sp   (
0000020   2   2   -   A   u   g   -   2   0   0   9   )  nl   F   i   l
0000040   e   s   y   s   t   e   m  sp   v   o   l   u   m   e  sp   n
0000060   a   m   e   :  sp  sp  sp   ]   n   o   n   e   [  nl   L   a
0000100   s   t  sp   m   o   u   n   t   e   d  sp   o   n   :  sp  sp
0000120  sp  sp  sp  sp  sp  sp  sp  sp   ]   n   o   t  sp   a   v   a
0000140   i   l   a   b   l   e   [  nl   F   i   l   e   s   y   s   t
0000160   e   m  sp   U   U   I   D   :  sp  sp  sp  sp  sp  sp  sp  sp
0000200  sp  sp   f   e   0   7   0   5   9   9   -   2   e   4   c   -
0000220   4   2   4   2   -   a   3   5   7   -   7   5   5   b   a   1
0000240   8   2   e   7   8   7  nl   F   i   l   e   s   y   s   t   e
0000260   m  sp   m   a   g   i   c  sp   n   u   m   b   e   r   :  sp
0000300  sp   0   x   E   F   5   3  nl   F   i   l   e   s   y   s   t
0000320   e   m  sp   r   e   v   i   s   i   o   n  sp   #   :  sp  sp
0000340  sp  sp   1  sp   (   d   y   n   a   m   i   c   )  nl   F   i
0000360   l   e   s   y   s   t   e   m  sp   f   e   a   t   u   r   e
0000400   s   :  sp  sp  sp  sp  sp  sp   h   a   s   _   j   o   u   r
0000420   n   a   l  sp   e   x   t   _   a   t   t   r  sp   r   e   s
0000440   i   z   e   _   i   n   o   d   e  sp   d   i   r   _   i   n
0000460   d   e   x  sp   f   i   l   e   t   y   p   e  sp   n   e   e
0000500   d   s   _   r   e   c   o   v   e   r   y  sp   s   p   a   r
0000520   s   e   _   s   u   p   e   r  sp   l   a   r   g   e   _   f
0000540   i   l   e  nl   F   i   l   e   s   y   s   t   e   m  sp   f
0000560   l   a   g   s   :  sp  sp  sp  sp  sp  sp  sp  sp  sp   s   i
0000600   g   n   e   d   _   d   i   r   e   c   t   o   r   y   _   h
0000620   a   s   h  sp  nl   D   e   f   a   u   l   t  sp   m   o   u
0000640   n   t  sp   o   p   t   i   o   n   s   :  sp  sp  sp  sp   (
0000660   n   o   n   e   )  nl   F   i   l   e   s   y   s   t   e   m
0000700  sp   s   t   a   t   e   :  sp  sp  sp  sp  sp  sp  sp  sp  sp
0000720   c   l   e   a   n  nl   E   r   r   o   r   s  sp   b   e   h
0000740   a   v   i   o   r   :  sp  sp  sp  sp  sp  sp  sp  sp  sp  sp
0000760   C   o   n   t   i   n   u   e  nl   F   i   l   e   s   y   s
0001000   t   e   m  sp   O   S  sp   t   y   p   e   :  sp  sp  sp  sp
0001020  sp  sp  sp   L   i   n   u   x  nl   I   n   o   d   e  sp   c
0001040   o   u   n   t   :  sp  sp  sp  sp  sp  sp  sp  sp  sp  sp  sp
0001060  sp  sp  sp   1   3   1   0   7   2   0  nl   B   l   o   c   k
0001100  sp   c   o   u   n   t   :  sp  sp  sp  sp  sp  sp  sp  sp  sp
0001120  sp  sp  sp  sp  sp   5   2   4   2   8   8   0  nl   R   e   s
0001140   e   r   v   e   d  sp   b   l   o   c   k  sp   c   o   u   n
0001160   t   :  sp  sp  sp  sp  sp   2   6   2   1   4   4  nl   F   r
0001200   e   e  sp   b   l   o   c   k   s   :  sp  sp  sp  sp  sp  sp
0001220  sp  sp  sp  sp  sp  sp  sp  sp   2   9   9   1   8   1   7  nl
0001240   F   r   e   e  sp   i   n   o   d   e   s   :  sp  sp  sp  sp
0001260  sp  sp  sp  sp  sp  sp  sp  sp  sp  sp   1   3   1   0   6   9
0001300   3  nl   F   i   r   s   t  sp   b   l   o   c   k   :  sp  sp
0001320  sp  sp  sp  sp  sp  sp  sp  sp  sp  sp  sp  sp   0  nl   B   l
0001340   o   c   k  sp   s   i   z   e   :  sp  sp  sp  sp  sp  sp  sp
0001360  sp  sp  sp  sp  sp  sp  sp  sp   4   0   9   6  nl   F   r   a
0001400   g   m   e   n   t  sp   s   i   z   e   :  sp  sp  sp  sp  sp
0001420  sp  sp  sp  sp  sp  sp  sp   4   0   9   6  nl   R   e   s   e
0001440   r   v   e   d  sp   G   D   T  sp   b   l   o   c   k   s   :
0001460  sp  sp  sp  sp  sp  sp   1   0   2   2  nl   B   l   o   c   k
0001500   s  sp   p   e   r  sp   g   r   o   u   p   :  sp  sp  sp  sp
0001520  sp  sp  sp  sp  sp   3   2   7   6   8  nl   F   r   a   g   m
0001540   e   n   t   s  sp   p   e   r  sp   g   r   o   u   p   :  sp
0001560  sp  sp  sp  sp  sp   3   2   7   6   8  nl   I   n   o   d   e
0001600   s  sp   p   e   r  sp   g   r   o   u   p   :  sp  sp  sp  sp
0001620  sp  sp  sp  sp  sp   8   1   9   2  nl   I   n   o   d   e  sp
0001640   b   l   o   c   k   s  sp   p   e   r  sp   g   r   o   u   p
0001660   :  sp  sp  sp   5   1   2  nl   F   i   l   e   s   y   s   t
0001700   e   m  sp   c   r   e   a   t   e   d   :  sp  sp  sp  sp  sp
0001720  sp  sp   T   h   u  sp   J   u   l  sp  sp   7  sp   1   5   :
0001740   5   3   :   1   7  sp   2   0   1   1  nl   L   a   s   t  sp
0001760   m   o   u   n   t  sp   t   i   m   e   :  sp  sp  sp  sp  sp
0002000  sp  sp  sp  sp  sp   T   h   u  sp   A   p   r  sp   2   3  sp
0002020   1   4   :   2   6   :   5   8  sp   2   0   1   5  nl   L   a
0002040   s   t  sp   w   r   i   t   e  sp   t   i   m   e   :  sp  sp
0002060  sp  sp  sp  sp  sp  sp  sp  sp   T   h   u  sp   A   p   r  sp
0002100   2   3  sp   1   4   :   2   6   :   5   8  sp   2   0   1   5
0002120  nl   M   o   u   n   t  sp   c   o   u   n   t   :  sp  sp  sp
0002140  sp  sp  sp  sp  sp  sp  sp  sp  sp  sp  sp   1   8  nl   M   a
0002160   x   i   m   u   m  sp   m   o   u   n   t  sp   c   o   u   n
0002200   t   :  sp  sp  sp  sp  sp  sp   -   1  nl   L   a   s   t  sp
0002220   c   h   e   c   k   e   d   :  sp  sp  sp  sp  sp  sp  sp  sp
0002240  sp  sp  sp  sp  sp   T   h   u  sp   J   u   l  sp  sp   7  sp
0002260   1   5   :   5   3   :   1   7  sp   2   0   1   1  nl   C   h
0002300   e   c   k  sp   i   n   t   e   r   v   a   l   :  sp  sp  sp
0002320  sp  sp  sp  sp  sp  sp  sp  sp   0  sp   (   ]   n   o   n   e
0002340   [   )  nl   R   e   s   e   r   v   e   d  sp   b   l   o   c
0002360   k   s  sp   u   i   d   :  sp  sp  sp  sp  sp  sp   0  sp   (
0002400   u   s   e   r  sp   r   o   o   t   )  nl   R   e   s   e   r
0002420   v   e   d  sp   b   l   o   c   k   s  sp   g   i   d   :  sp
0002440  sp  sp  sp  sp  sp   0  sp   (   g   r   o   u   p  sp   r   o
0002460   o   t   )  nl   F   i   r   s   t  sp   i   n   o   d   e   :
0002500  sp  sp  sp  sp  sp  sp  sp  sp  sp  sp  sp  sp  sp  sp   1   1
0002520  nl   I   n   o   d   e  sp   s   i   z   e   :  ht  sp  sp  sp
0002540  sp  sp  sp  sp  sp  sp  sp   2   5   6  nl   R   e   q   u   i
0002560   r   e   d  sp   e   x   t   r   a  sp   i   s   i   z   e   :
0002600  sp  sp  sp  sp  sp   2   8  nl   D   e   s   i   r   e   d  sp
0002620   e   x   t   r   a  sp   i   s   i   z   e   :  sp  sp  sp  sp
0002640  sp  sp   2   8  nl   J   o   u   r   n   a   l  sp   i   n   o
0002660   d   e   :  sp  sp  sp  sp  sp  sp  sp  sp  sp  sp  sp  sp   8
0002700  nl   D   e   f   a   u   l   t  sp   d   i   r   e   c   t   o
0002720   r   y  sp   h   a   s   h   :  sp  sp  sp   h   a   l   f   _
0002740   m   d   4  nl   D   i   r   e   c   t   o   r   y  sp   H   a
0002760   s   h  sp   S   e   e   d   :  sp  sp  sp  sp  sp  sp   6   e
0003000   b   5   1   7   c   2   -   7   a   f   4   -   4   1   3   1
0003020   -   8   2   e   b   -   f   b   e   2   1   d   9   a   9   3
0003040   0   c  nl   J   o   u   r   n   a   l  sp   b   a   c   k   u
0003060   p   :  sp  sp  sp  sp  sp  sp  sp  sp  sp  sp  sp   i   n   o
0003100   d   e  sp   b   l   o   c   k   s  nl
0003112
</pre>

<p>Note that the "Filesystem flags: signed_directory_hash " entry ends
with a trailing space character.</p>
<h4 id="gdha_commented_at_2015-06-11_1452"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/598#issuecomment-111160924">2015-06-11 14:52</a>:<a class="headerlink" href="#gdha_commented_at_2015-06-11_1452" title="Permanent link">&para;</a></h4>
<p>@abbbi are the 2 grep executables the same?</p>
<h4 id="abbbi_commented_at_2015-06-11_1512"><img src="https://avatars.githubusercontent.com/u/3919561?u=473291dd3dbd58fd0af45714935992a3d416aa6e&v=4" width="50"><a href="https://github.com/abbbi">abbbi</a> commented at <a href="https://github.com/rear/rear/issues/598#issuecomment-111168402">2015-06-11 15:12</a>:<a class="headerlink" href="#abbbi_commented_at_2015-06-11_1512" title="Permanent link">&para;</a></h4>
<p>hi,<br />
yes, its been only a symlink.</p>
<h4 id="gdha_commented_at_2015-06-12_1038"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/598#issuecomment-111444124">2015-06-12 10:38</a>:<a class="headerlink" href="#gdha_commented_at_2015-06-12_1038" title="Permanent link">&para;</a></h4>
<p>@abbbi @jsmeix I've updated/sanitized the
/usr/share/rear/layout/save/GNU/Linux/23_filesystem_layout.sh script.
Your feedback is more then welcome.</p>
<h4 id="gdha_commented_at_2015-06-30_1029"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/598#issuecomment-117117289">2015-06-30 10:29</a>:<a class="headerlink" href="#gdha_commented_at_2015-06-30_1029" title="Permanent link">&para;</a></h4>
<p>move the milestone, however, it should be fixed in the meantime. Lacking
good feedback to close the issue.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2025 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2015-06-10.598.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
