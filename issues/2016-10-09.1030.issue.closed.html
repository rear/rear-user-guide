<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#1030 Issue closed: add support for Borg Backup - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#1030 Issue closed: add support for Borg Backup";
        var mkdocs_page_input_path = "issues/2016-10-09.1030.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#1030 Issue closed: add support for Borg Backup</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="1030_issue_closed_add_support_for_borg_backup"><a href="https://github.com/rear/rear/issues/1030">#1030 Issue</a> <code>closed</code>: add support for Borg Backup<a class="headerlink" href="#1030_issue_closed_add_support_for_borg_backup" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>waiting for info</code>, <code>fixed / solved / done</code></p>
<h4 id="phirestalker_opened_issue_at_2016-10-09_0229"><img src="https://avatars.githubusercontent.com/u/7477095?v=4" width="50"><a href="https://github.com/phirestalker">phirestalker</a> opened issue at <a href="https://github.com/rear/rear/issues/1030">2016-10-09 02:29</a>:<a class="headerlink" href="#phirestalker_opened_issue_at_2016-10-09_0229" title="Permanent link">&para;</a></h4>
<p>Borg Backup here:
<a href="https://borgbackup.readthedocs.io/en/stable/index.html">https://borgbackup.readthedocs.io/en/stable/index.html</a></p>
<p>This backup solution uses data deduplication which is good for people
backing up disk images or other large files. Plus it seems to be simple
and file based and not disk image based, so would be a great fit as rear
would bring bare metal restore capability to a space saving backup
solution.</p>
<h4 id="schlomo_commented_at_2016-10-09_1212"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/1030#issuecomment-252483048">2016-10-09 12:12</a>:<a class="headerlink" href="#schlomo_commented_at_2016-10-09_1212" title="Permanent link">&para;</a></h4>
<p>Interesting software, would you consider to provide a pull request?</p>
<p>I added an issue to borg to keep track of this:
<a href="https://github.com/borgbackup/borg/issues/1702">https://github.com/borgbackup/borg/issues/1702</a></p>
<h4 id="gozora_commented_at_2016-10-09_1838"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1030#issuecomment-252503930">2016-10-09 18:38</a>:<a class="headerlink" href="#gozora_commented_at_2016-10-09_1838" title="Permanent link">&para;</a></h4>
<p>Really a nice tool!<br />
If you guys are can't find anyone to implement it, I'll gladly do my
best and integrate Borg into ReaR.</p>
<h4 id="phirestalker_commented_at_2016-10-09_1944"><img src="https://avatars.githubusercontent.com/u/7477095?v=4" width="50"><a href="https://github.com/phirestalker">phirestalker</a> commented at <a href="https://github.com/rear/rear/issues/1030#issuecomment-252507848">2016-10-09 19:44</a>:<a class="headerlink" href="#phirestalker_commented_at_2016-10-09_1944" title="Permanent link">&para;</a></h4>
<p>​What do you mean pull request?​</p>
<p>On Sun, Oct 9, 2016 at 11:38 AM, Vladimir Gozora
<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;">&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a><br />
wrote:</p>
<blockquote>
<p>Really a nice tool!<br />
If you guys are can't find anyone to implement it, I'll gladly do my
best<br />
and integrate Borg into ReaR.</p>
<p>—<br />
You are receiving this because you authored the thread.<br />
Reply to this email directly, view it on GitHub<br />
<a href="https://github.com/rear/rear/issues/1030#issuecomment-252503930">https://github.com/rear/rear/issues/1030#issuecomment-252503930</a>,
or mute<br />
the thread<br />
<a href="https://github.com/notifications/unsubscribe-auth/AHIXZ5c48c_vZCZ4k-mHgwGBS-VR-qOaks5qyTSNgaJpZM4KR4eN">https://github.com/notifications/unsubscribe-auth/AHIXZ5c48c_vZCZ4k-mHgwGBS-VR-qOaks5qyTSNgaJpZM4KR4eN</a><br />
.</p>
</blockquote>
<h4 id="schlomo_commented_at_2016-10-09_2038"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/1030#issuecomment-252511080">2016-10-09 20:38</a>:<a class="headerlink" href="#schlomo_commented_at_2016-10-09_2038" title="Permanent link">&para;</a></h4>
<p>@phirestalker see
<a href="https://help.github.com/categories/collaborating-with-issues-and-pull-requests/">https://help.github.com/categories/collaborating-with-issues-and-pull-requests/</a></p>
<h4 id="gozora_commented_at_2016-10-10_1242"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1030#issuecomment-252607701">2016-10-10 12:42</a>:<a class="headerlink" href="#gozora_commented_at_2016-10-10_1242" title="Permanent link">&para;</a></h4>
<p>Small first success (still far from being perfect though) :-)<br />
Backup/restore using Borg done ...</p>
<pre><code>...
2016-10-10 14:27:36 Disk layout created.
2016-10-10 14:27:36 Including layout/recreate/default/25_verify_mount.sh
2016-10-10 14:27:36 Finished running 'layout/recreate' stage in 5 seconds
2016-10-10 14:27:36 Running 'restore' stage
2016-10-10 14:27:36 Including restore/BORG/default/10_restore_borg.sh
++ export LANG=en_US.UTF-8
++ LANG=en_US.UTF-8
++ export LC_ALL=en_US.UTF-8
++ LC_ALL=en_US.UTF-8
++ borg extract root@node2:/mnt/rear/node1::rear_1
++ locale
++ set +x
2016-10-10 14:30:57 Including restore/default/50_selinux_autorelabel.sh
2016-10-10 14:30:57 Created /.autorelabel file : after reboot SELinux will relab
el all files
...
</code></pre>
<p>I'll publish code today or tomorrow on my Github page for more
discussion ...</p>
<p>V.</p>
<h4 id="gozora_commented_at_2016-10-11_1817"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1030#issuecomment-252999929">2016-10-11 18:17</a>:<a class="headerlink" href="#gozora_commented_at_2016-10-11_1817" title="Permanent link">&para;</a></h4>
<p>Hello all,</p>
<p>I have first sample of Borg implementation ready on my <a href="https://github.com/gozora/rear/tree/rear_borg">Github
page</a>. Code is not yet
ready for pull request, as I need to solve couple of things first. Any
comments and testing are (as always) more than welcome.</p>
<p>Couple of notes if you decide to test:</p>
<ol>
<li><a href="https://borgbackup.readthedocs.io/en/stable/installation.html">Borg installation
    manual</a>
    recommends to install Borg to <em>/usr/local/bin</em>.<br />
    I however, had some hard times with this location. (not sure what
    was the reason, but I guess that ssh client have some hard coded
    paths, which don't cover <em>/usr/local/bin</em>), so either install Borg
    to /usr/sbin; /usr/bin; /bin; /sbin or create symlink to these
    locations.</li>
<li>Before using ReaR with Borg, setup ssh keys for user that will be
    running backup. In other words, issuing following command must work
    without any password prompts or remote host identity confirmation.<br />
<code>ssh &lt;borg_user&gt;@&lt;borg_server&gt;</code></li>
<li>I did test ONLY for client/server scenario over ssh (backup was
    running from client to remote server over SSH). No manual mounting
    of remote filesystems or anything else was tested yet.</li>
<li>Borg seems to be sensitive to locales setup. I did just quick and
    dirty configuration of locales on my test system (SLES11 SP3 :-)),
    So if you see error during recovery that LANG should be set to
    certain value, try to setup your locales correctly (can be a bit
    hard though). I've managed to succeed with en_US.UTF-8 ...</li>
<li>For now, use this code for testing purposes only!!!</li>
</ol>
<p>And just bit of stats:<br />
I've managed to save 3 backup of base OS (without Xorg stuff) in
~1.5GB<br />
Output statistics made after 3rd backup can be found
<a href="https://gist.github.com/gozora/08cf21776ca2479fe86d4d60ccd7bfa2">here</a>.</p>
<p>I'll continue to work on this topic and keep you posted ...</p>
<p>V.</p>
<h4 id="jsmeix_commented_at_2016-10-12_0732"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1030#issuecomment-253140250">2016-10-12 07:32</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-10-12_0732" title="Permanent link">&para;</a></h4>
<p>@gozora<br />
regarding "Borg seems to be sensitive to locales setup":</p>
<p>In<br />
<a href="https://github.com/rear/rear/compare/master...gozora:rear_borg?diff=unified&amp;name=rear_borg">https://github.com/rear/rear/compare/master...gozora:rear_borg?diff=unified&amp;name=rear_borg</a><br />
I noticed in your usr/share/rear/conf/default.conf</p>
<pre>
# Investigate propper locales setup in ReaR recovery media
COPY_AS_IS_BORG=( /usr/lib/locale/en_US.utf8 /usr/share/locale/en_US )
</pre>

<p>Side note: Typo: Not "ReaR recovery media"<br />
(cf.
<a href="https://github.com/rear/rear/issues/1008">https://github.com/rear/rear/issues/1008</a>
and
<a href="https://github.com/rear/rear/issues/1033">https://github.com/rear/rear/issues/1033</a>)<br />
but either "rear rescue/recovery system" or even<br />
better "Relax-and-Recover rescue/recovery system".</p>
<p>I know about issues with locale when doing ssh<br />
from a remote host onto a rear recovery system.</p>
<p>Basically the locale that you use on the remote host wherefrom<br />
you do things like "ssh <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#114;&#111;&#111;&#116;&#64;&#114;&#101;&#97;&#114;&#46;&#114;&#101;&#99;&#111;&#118;&#101;&#114;&#121;&#46;&#115;&#121;&#115;&#116;&#101;&#109;">&#114;&#111;&#111;&#116;&#64;&#114;&#101;&#97;&#114;&#46;&#114;&#101;&#99;&#111;&#118;&#101;&#114;&#121;&#46;&#115;&#121;&#115;&#116;&#101;&#109;</a>"<br />
is also used for the comands that you run afterwards (via ssh)<br />
on the rear recovery system.</p>
<p>But on the rear recovery system there is no localization support.<br />
The only locale that works on the rear recovery system is<br />
plain 'POSIX' (or 'C'), cf. /usr/sbin/rear</p>
<pre>
# Make sure that we use only English:
export LC_CTYPE=C LC_ALL=C LANG=C
</pre>

<p>(I don't know the reason behind why also LC_CTYPE=C is set<br />
because - as far as I know and as far as I experienced - only<br />
"export LC_ALL=C LANG=C" should be sufficient.)</p>
<p>Accordingly the solution for working from remote on a<br />
rear recovery system is to set the POSIX/C locale via</p>
<pre>
export LC_ALL=POSIX LANG=POSIX
</pre>

<p>either on the remote system before "ssh <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#114;&#111;&#111;&#116;&#64;&#114;&#101;&#97;&#114;&#46;&#114;&#101;&#99;&#111;&#118;&#101;&#114;&#121;&#46;&#115;&#121;&#115;&#116;&#101;&#109;">&#114;&#111;&#111;&#116;&#64;&#114;&#101;&#97;&#114;&#46;&#114;&#101;&#99;&#111;&#118;&#101;&#114;&#121;&#46;&#115;&#121;&#115;&#116;&#101;&#109;</a>"<br />
or in the rear recovery system before running any other command.<br />
To be on the safe side I would suggest to set the POSIX/C locale<br />
on the remote system before "ssh <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#114;&#111;&#111;&#116;&#64;&#114;&#101;&#97;&#114;&#46;&#114;&#101;&#99;&#111;&#118;&#101;&#114;&#121;&#46;&#115;&#121;&#115;&#116;&#101;&#109;">&#114;&#111;&#111;&#116;&#64;&#114;&#101;&#97;&#114;&#46;&#114;&#101;&#99;&#111;&#118;&#101;&#114;&#121;&#46;&#115;&#121;&#115;&#116;&#101;&#109;</a>"<br />
to ensure also the bash and all what profile/bashrc initially runs<br />
on the rear recovery system is run in the POSIX/C locale.</p>
<p>For the fun of it:<br />
Running commands in a non-POSIX locale on a system where<br />
only POSIX is supported can result arbitrarily nasty issues.<br />
For example very basic commands may badly abort<br />
with a locale-related error from glibc.<br />
Obviously local related issues are (nowadays?) sufficiently<br />
severe to just abort programs ;-)</p>
<h4 id="gozora_commented_at_2016-10-12_0835"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1030#issuecomment-253152579">2016-10-12 08:35</a>:<a class="headerlink" href="#gozora_commented_at_2016-10-12_0835" title="Permanent link">&para;</a></h4>
<p>Hello @jsmeix,</p>
<p>Thanks for you inputs. I'll correct that misspelling and will try to use
new agreed style for naming things.<br />
That locale thing with Borg would be tricky. I guess that Borg requires
use of same locales for recovery as was used for backup.<br />
The problem I'v encounter is described here:
<a href="https://github.com/borgbackup/borg/issues/382">https://github.com/borgbackup/borg/issues/382</a><br />
So far I was only able to successfully restore, if my locales were set
to <em>en_US.UTF-8</em> in my Relax-and-Recover rescue/recovery system.<br />
I'll do some more experiments on this topic for sure ..</p>
<h4 id="jsmeix_commented_at_2016-10-12_1027"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1030#issuecomment-253176639">2016-10-12 10:27</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-10-12_1027" title="Permanent link">&para;</a></h4>
<p>In general when a software fails in POSIX/C locale<br />
it is usually a bug in that software (an exception<br />
might be things like an editor that is specifically<br />
intended to be only used for e.g. UTF-8 files).</p>
<p>In particular system tools like backup/restore software<br />
must not fails in POSIX/C locale.</p>
<p>No backup/restore software should depend<br />
on localization support.</p>
<p>In particular no backup/restore software should depend<br />
on localization support for UTF-8 - regardless how much<br />
UTF-8 is "usually used nowadays", it must not fail if it is<br />
run in plain traditional POSIX/C locale.</p>
<h4 id="gozora_commented_at_2016-10-12_1032"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1030#issuecomment-253177682">2016-10-12 10:32</a>:<a class="headerlink" href="#gozora_commented_at_2016-10-12_1032" title="Permanent link">&para;</a></h4>
<p>100% agree, give me some time to gather some more data on this
localization issue. Once I've learned a bit more about this topic, I'll
ask Borg guys about their point of view.</p>
<h4 id="jsmeix_commented_at_2016-10-12_1038"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1030#issuecomment-253178800">2016-10-12 10:38</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-10-12_1038" title="Permanent link">&para;</a></h4>
<p>From what I read in
<a href="https://github.com/borgbackup/borg/issues/382">https://github.com/borgbackup/borg/issues/382</a></p>
<pre>
File system encoding is "ascii", extracting
non-ascii filenames will not be supported
</pre>

<p>it seems - at least on first glance - that perhaps<br />
Borg deals wrongly with filenames, cf.<br />
"Non-ASCII characters in file names"<br />
in
<a href="https://en.opensuse.org/SDB:Plain_Text_versus_Locale">https://en.opensuse.org/SDB:Plain_Text_versus_Locale</a><br />
that reads in particular:</p>
<pre>
For the operating system a filename is a
plain sequence of bytes without any additional
information what characters are meant by
this sequence of bytes
</pre>

<p>Accordingly I think that backup/restore software should<br />
not treat filenames as text in whatever encoding<br />
but as plain sequences of bytes.</p>
<p>In particular it would be plain wrong when a backup/restore software<br />
would store a filename as text in the encoding that matches the<br />
locale when the backup was run and restore it under a filename<br />
as text in the encoding that matches the locale when the restore<br />
is run.</p>
<p>If backup/restore software would work this way (but I never<br />
tested how e.g. 'tar' behaves under different locales)<br />
then one could get a filename /tmp/binär on the disk<br />
in ISO-8859-15 encoding restored under a filename in<br />
UTF-8 encoding which results a different file name, cf.<br />
"Non-ASCII characters in file names"<br />
in
<a href="https://en.opensuse.org/SDB:Plain_Text_versus_Locale">https://en.opensuse.org/SDB:Plain_Text_versus_Locale</a></p>
<h4 id="gozora_commented_at_2016-10-12_1116"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1030#issuecomment-253185980">2016-10-12 11:16</a>:<a class="headerlink" href="#gozora_commented_at_2016-10-12_1116" title="Permanent link">&para;</a></h4>
<p>Let's ask Borg guys:
<a href="https://github.com/borgbackup/borg/issues/1702#issuecomment-253185826">https://github.com/borgbackup/borg/issues/1702#issuecomment-253185826</a></p>
<h4 id="jsmeix_commented_at_2016-10-12_1126"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1030#issuecomment-253187877">2016-10-12 11:26</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-10-12_1126" title="Permanent link">&para;</a></h4>
<p>Puuhhh! (that is my native German - in English it is "Phew!")</p>
<p>Good old traditional 'tar' works for any filenames:</p>
<p>According to what I described in<br />
"Non-ASCII characters in file names"<br />
in
<a href="https://en.opensuse.org/SDB:Plain_Text_versus_Locale">https://en.opensuse.org/SDB:Plain_Text_versus_Locale</a><br />
I created /tmp/tartest with two<br />
subdirs /tmp/tartest/iso885915 and /tmp/tartest/utf8</p>
<p>In /tmp/tartest/iso885915 I did in the en_GB.iso885915 locale<br />
echo binär &gt;binär</p>
<p>In /tmp/tartest/utf8 I did in the en_GB.utf8 locale<br />
echo binär &gt;binär</p>
<p>I got this:</p>
<pre>
$ ls /tmp/tartest/utf8 | od -c
0000000   b   i   n 303 244   r  \n
0000007
$ cat /tmp/tartest/utf8/* | od -c
0000000   b   i   n 303 244   r  \n
0000007
$ ls /tmp/tartest/iso885915 | od -c
0000000   b   i   n 344   r  \n
0000006
$ cat /tmp/tartest/iso885915/* | od -c
0000000   b   i   n 344   r  \n
0000006
</pre>

<p>Now I created a tar archive under POSIX/C locale:</p>
<pre>
$ pushd /tmp/tartest
$ tar -cf testy.tar *
$ popd
</pre>

<p>Let's see what filenames tar has stored:</p>
<pre>
$ tar -tf /tmp/tartest/testy.tar 
iso885915/
iso885915/bin\344r
utf8/
utf8/bin\303\244r
</pre>

<p>Now I restore it under POSIX/C locale:</p>
<pre>
$ mkdir /tmp/restore
$ pushd /tmp/restore
$ tar -xf /tmp/tartest/testy.tar
$popd
</pre>

<p>Let's see what tar has restored:</p>
<pre>
$ ls /tmp/restore/utf8 | od -c
0000000   b   i   n 303 244   r  \n
0000007
$ cat /tmp/restore/utf8/* | od -c
0000000   b   i   n 303 244   r  \n
0000007
$ ls /tmp/restore/iso885915 | od -c
0000000   b   i   n 344   r  \n
0000006
$ cat /tmp/restore/iso885915/* | od -c
0000000   b   i   n 344   r  \n
0000006
</pre>

<p>Summary:</p>
<p>Good old traditional 'tar' works for any filenames<br />
and for any file content.</p>
<h4 id="jsmeix_commented_at_2016-10-12_1218"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1030#issuecomment-253197887">2016-10-12 12:18</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-10-12_1218" title="Permanent link">&para;</a></h4>
<p>@gozora<br />
could you test that the above also works with Borg?<br />
I.e. that after restore you got the two files again<br />
with same bytes in their file names as it was before, i.e.<br />
one file with this (hexadecimal) bytes for its name</p>
<pre>
62 69 6e c3 a4 72
</pre>

<p>( 'binär' in utf8 encoding)<br />
and one file with that (hexadecimal) bytes for its name</p>
<pre>
62 69 6e e4 72
</pre>

<p>( 'binär' in iso885915 encoding)</p>
<h4 id="gozora_commented_at_2016-10-12_1304"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1030#issuecomment-253207422">2016-10-12 13:04</a>:<a class="headerlink" href="#gozora_commented_at_2016-10-12_1304" title="Permanent link">&para;</a></h4>
<p>@jsmeix will do ...</p>
<h4 id="gozora_commented_at_2016-10-12_1626"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1030#issuecomment-253264187">2016-10-12 16:26</a>:<a class="headerlink" href="#gozora_commented_at_2016-10-12_1626" title="Permanent link">&para;</a></h4>
<p>Hello @jsmeix,</p>
<p>I've try to reproduce your test with help of Borg best I could (hope I
did it right, all this encoding stuff don't feel so natural and smooth
to me :-( ).</p>
<p>Here are the results:</p>
<p><strong>Test environment</strong></p>
<pre><code>alfa:(/)(root)# ls /tmp/borgtest/utf8 | od -c
0000000   b   i   n 303 244   r  \n
0000007
alfa:(/)(root)# cat /tmp/borgtest/utf8/* | od -c
0000000   b   i   n 303 244   r  \n
0000007
alfa:(/)(root)# ls /tmp/borgtest/iso885915 | od -c
0000000   b   i   n 344   r  \n
0000006
alfa:(/)(root)# cat /tmp/borgtest/iso885915/* | od -c
0000000   b   i   n 344   r  \n
0000006
</code></pre>
<p><strong>initialize Borg repository, make backup and list of backup content</strong></p>
<pre><code>alfa:(/)(root)# borg init -e none root@beta.lan12.sk:/mnt/rear/borg/enc_test 
alfa:(/)(root)# borg create --stats --compression zlib,9 root@beta.lan12.sk:/mnt/rear/borg/enc_test::first /tmp/borgtest

alfa:(/)(root)# borg list root@beta.lan12.sk:/mnt/rear/borg/enc_test::first
drwxr-xr-x root   root          0 Wed, 2016-10-12 17:24:31 tmp/borgtest
drwxr-xr-x root   root          0 Wed, 2016-10-12 17:58:40 tmp/borgtest/iso885915
-rw-r--r-- root   root          6 Wed, 2016-10-12 17:58:40 tmp/borgtest/iso885915/bin?r
drwxr-xr-x root   root          0 Wed, 2016-10-12 17:57:59 tmp/borgtest/utf8
-rw-r--r-- root   root          7 Wed, 2016-10-12 17:57:59 tmp/borgtest/utf8/binär
</code></pre>
<p><strong>Restore and compare with original data</strong></p>
<pre><code>alfa:(/)(root)# cd /tmp/restore/
alfa:(/tmp/restore)(root)# borg extract root@beta.lan12.sk:/mnt/rear/borg/enc_test::first

alfa:(/tmp/restore)(root)# ls tmp/borgtest/utf8 | od -c                                                        
0000000   b   i   n 303 244   r  \n
0000007
alfa:(/tmp/restore)(root)# cat tmp/borgtest/utf8/* | od -c
0000000   b   i   n 303 244   r  \n
0000007
alfa:(/tmp/restore)(root)# ls tmp/borgtest/iso885915 | od -c 
0000000   b   i   n 344   r  \n
0000006
alfa:(/tmp/restore)(root)# cat tmp/borgtest/iso885915/* | od -c
0000000   b   i   n 344   r  \n
0000006

alfa:(/tmp/borgtest)(root)# find . -type f -exec hexdump -C {} \;
00000000  62 69 6e e4 72 0a                                 |bin.r.|
00000006
00000000  62 69 6e c3 a4 72 0a                              |bin..r.|
00000007

alfa:(/tmp/restore/tmp/borgtest)(root)# find . -type f -exec hexdump -C {} \;
00000000  62 69 6e e4 72 0a                                 |bin.r.|
00000006
00000000  62 69 6e c3 a4 72 0a                              |bin..r.|
00000007

alfa:(/)(root)# diff -r /tmp/borgtest /tmp/restore/tmp/borgtest; echo $?
0
</code></pre>
<p>If I've understood your test intentions correctly, Borg handles
different encodings fine.</p>
<p>V.</p>
<h4 id="jsmeix_commented_at_2016-10-13_1412"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1030#issuecomment-253524700">2016-10-13 14:12</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-10-13_1412" title="Permanent link">&para;</a></h4>
<p>@gozora<br />
yes, it seems Borg backup and restore work correctly.</p>
<p>You have<br />
one file named 'binär' in utf8 encoding<br />
with content 'binär' in utf8 encoding<br />
(62 69 6e c3 a4 72 in hex values) and<br />
another file named 'binär' in iso885915 encoding<br />
with content 'binär' in iso885915 encoding<br />
(62 69 6e e4 72 in hex values)<br />
and after backup and restore you get exactly<br />
the same (no byte has changed - neither<br />
in the file names nor in the contents).</p>
<p>In particular it seems (hopefully) Borg does not try to<br />
"handle encodings" for file names (or even file contents)<br />
for its actual backup and restore operations.</p>
<p>For the actual backup and restore operations any<br />
backup and restore software must backup file names<br />
(and file contents) as plain sequences of bytes and<br />
restore them as exactly the same plain sequences of bytes.</p>
<p>It would be a different task if a software provides<br />
some kind of "migration" feature where file names<br />
(and perhaps also file contents) could be re-encoded<br />
provided the user explicitly wants that.<br />
But then the user must specify both the source encoding<br />
and the target encoding to get predictable results because<br />
in general it is not possible to autodetect which encoding<br />
is meant for the bytes in a file name or the content bytes<br />
in a so called "plain text" file, cf.<br />
<a href="https://en.opensuse.org/SDB:Plain_Text_versus_Locale">https://en.opensuse.org/SDB:Plain_Text_versus_Locale</a></p>
<h4 id="gozora_commented_at_2016-10-13_1459"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1030#issuecomment-253538961">2016-10-13 14:59</a>:<a class="headerlink" href="#gozora_commented_at_2016-10-13_1459" title="Permanent link">&para;</a></h4>
<p>@jsmeix so far I did several backup/restores with Borg as backend and
did not observed any anomalies so far. I was browsing Borg issues today,
and it looks that Borg guys are really taking close attention to data
integrity and testing, so I think that Borg will not be a weak point
here.</p>
<p>For that locale issue, I don't have anything new in
<a href="https://github.com/borgbackup/borg/issues/1702">https://github.com/borgbackup/borg/issues/1702</a>,
so I've decided to go for plan B and made some improvements in
<a href="https://github.com/gozora/rear/commit/c7dc42da35cd1f106829fcc882369265efc3c722">code</a>.<br />
A quick summary of commit:</p>
<ol>
<li>Create rear own locales on running system with <code>localedef</code> during
    prep phase, and add them to Relax-and-Recover rescue/recovery
    system.</li>
<li>Set <em>LC_ALL=rear.UTF-8</em> but only for duration of <code>borg restore</code>.</li>
</ol>
<p>I think that this should have no impact on remaining ReaR flows ...</p>
<p>V.</p>
<h4 id="jsmeix_commented_at_2016-10-14_0723"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1030#issuecomment-253728108">2016-10-14 07:23</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-10-14_0723" title="Permanent link">&para;</a></h4>
<p>@gozora<br />
as far as I understand<br />
<a href="https://github.com/gozora/rear/commit/c7dc42da35cd1f106829fcc882369265efc3c722">https://github.com/gozora/rear/commit/c7dc42da35cd1f106829fcc882369265efc3c722</a><br />
I like your 'plan B' very much because<br />
it is in perfect compliance<br />
with "Dirty hacks welcome" in<br />
<a href="https://github.com/rear/rear/wiki/Coding-Style">https://github.com/rear/rear/wiki/Coding-Style</a><br />
and<br />
it is a nice initial step how we might add UTF-8 locale<br />
support in general to the rear recovery system:<br />
<a href="https://github.com/rear/rear/issues/1035">https://github.com/rear/rear/issues/1035</a></p>
<p>@gozora<br />
as always I appreciate your continuous valuable<br />
contributions to Relax-and-Recover very much!</p>
<h4 id="gozora_commented_at_2016-10-14_0746"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1030#issuecomment-253732122">2016-10-14 07:46</a>:<a class="headerlink" href="#gozora_commented_at_2016-10-14_0746" title="Permanent link">&para;</a></h4>
<p>@jsmeix<br />
As always, you are welcome, it is fun working on ReaR.</p>
<p>At the time I was reading
<a href="https://github.com/rear/rear/wiki/Coding-Style">Coding-Style</a>, I've
skipped "Dirty hacks welcome" section thinking that I'd never attempt to
do something like that, and here we are :-). Life is strange
sometimes...</p>
<p>I'm planning to do some tests with other distributions over weekend and
if all goes fine, create "official" pull request starting of next week.
Hopefully there will be more volunteers for testing once the code is in
main tree.</p>
<h4 id="jsmeix_commented_at_2016-10-14_0820"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1030#issuecomment-253738325">2016-10-14 08:20</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-10-14_0820" title="Permanent link">&para;</a></h4>
<p>When you do your "official pull request" please mention<br />
on what systems it has worked for you (and if you know<br />
about systems where it fails). This would increase<br />
the probability that I can "just blindly accept it"<br />
to almost 100% ;-)</p>
<h4 id="gozora_commented_at_2016-10-14_0825"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1030#issuecomment-253739373">2016-10-14 08:25</a>:<a class="headerlink" href="#gozora_commented_at_2016-10-14_0825" title="Permanent link">&para;</a></h4>
<p>sure thing ...</p>
<h4 id="jsmeix_commented_at_2016-10-18_1208"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1030#issuecomment-254488229">2016-10-18 12:08</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-10-18_1208" title="Permanent link">&para;</a></h4>
<p>With<br />
<a href="https://github.com/rear/rear/pull/1037">https://github.com/rear/rear/pull/1037</a><br />
merged, there is now initial support for BorgBackup<br />
in Relax-and-Recover.</p>
<p>@gozora<br />
many thanks for your (always) valuable contributions<br />
to Relax-and-Recover!</p>
<p>@phirestalker<br />
please provide feedback here how it works for you.<br />
You can still add comments regardless that<br />
this issue is closed.</p>
<p>If there are issues with current support for BorgBackup<br />
in Relax-and-Recover please submit new separated<br />
GitHub issues for each separated issue.</p>
<h4 id="gozora_commented_at_2016-10-18_1217"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1030#issuecomment-254490046">2016-10-18 12:17</a>:<a class="headerlink" href="#gozora_commented_at_2016-10-18_1217" title="Permanent link">&para;</a></h4>
<p>@jsmeix no problem!</p>
<h4 id="phirestalker_commented_at_2017-01-02_1743"><img src="https://avatars.githubusercontent.com/u/7477095?v=4" width="50"><a href="https://github.com/phirestalker">phirestalker</a> commented at <a href="https://github.com/rear/rear/issues/1030#issuecomment-270001121">2017-01-02 17:43</a>:<a class="headerlink" href="#phirestalker_commented_at_2017-01-02_1743" title="Permanent link">&para;</a></h4>
<p>been preoccupied with other stuff. I noticed there were 2 more commits
related to borg. I wanted to know if there is somewhere I can find how
to configure rear for borg and also if I have to do the initial setup of
a repository in borg first.</p>
<h4 id="gozora_commented_at_2017-01-02_1747"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1030#issuecomment-270001572">2017-01-02 17:47</a>:<a class="headerlink" href="#gozora_commented_at_2017-01-02_1747" title="Permanent link">&para;</a></h4>
<p>You can read some basics
<a href="https://github.com/rear/rear/blob/master/doc/user-guide/04-scenarios.adoc#bootable-iso-with-borg">here</a>.<br />
No, if all goes fine you don't need to do repository initialization.</p>
<h4 id="phirestalker_commented_at_2017-01-02_2356"><img src="https://avatars.githubusercontent.com/u/7477095?v=4" width="50"><a href="https://github.com/phirestalker">phirestalker</a> commented at <a href="https://github.com/rear/rear/issues/1030#issuecomment-270034284">2017-01-02 23:56</a>:<a class="headerlink" href="#phirestalker_commented_at_2017-01-02_2356" title="Permanent link">&para;</a></h4>
<p>I have borg and rear on the same machine, do I still need to mess with
ssh? If not which variables can I leave out?</p>
<h4 id="phirestalker_commented_at_2017-01-03_0351"><img src="https://avatars.githubusercontent.com/u/7477095?v=4" width="50"><a href="https://github.com/phirestalker">phirestalker</a> commented at <a href="https://github.com/rear/rear/issues/1030#issuecomment-270048403">2017-01-03 03:51</a>:<a class="headerlink" href="#phirestalker_commented_at_2017-01-03_0351" title="Permanent link">&para;</a></h4>
<p>ok I read the make backup script for borg. It looks like I can fix it
with a few checks for blank user and host variables. According to the
borg documentation if you just use a path with no user and host it will
use the local system.</p>
<h4 id="jsmeix_commented_at_2017-01-03_0756"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1030#issuecomment-270064888">2017-01-03 07:56</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-01-03_0756" title="Permanent link">&para;</a></h4>
<p>@phirestalker<br />
you wrote that you have "borg and rear on the same machine".<br />
Does this mean the Borg backup is stored on that machine?<br />
If yes, I wonder how the backup could be restored after a<br />
disaster happened on that machine?<br />
I am not a Borg user but as far as I understand<br />
<a href="https://borgbackup.readthedocs.io/en/stable/quickstart.html">https://borgbackup.readthedocs.io/en/stable/quickstart.html</a><br />
"using SSH ... is fastest and easiest" to get the Borg backup<br />
safe on another host.</p>
<h4 id="gozora_commented_at_2017-01-03_0953"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1030#issuecomment-270080078">2017-01-03 09:53</a>:<a class="headerlink" href="#gozora_commented_at_2017-01-03_0953" title="Permanent link">&para;</a></h4>
<p>@phirestalker,<br />
Implementation for Borg was written for one simple scenario: Client -
Server over ssh.<br />
As you've already mentioned, it should not be a big problem to adapt the
code not to use ssh.</p>
<p>I'd be however interested in your setup. Currently I can imagine 2 kind
of configurations:</p>
<ol>
<li>You have Borg repository on your internal disk, which is not a good
    idea</li>
<li>You have Borg repository mounted using some external filesystem
    (NFS, Samba, CIFS ..), in such case you will also need to adapt
    REQUIRED_PROGS with binaries that will actually mount your external
    filesystem in ReaR rescue/recovery system.</li>
</ol>
<p>V.</p>
<h4 id="phirestalker_commented_at_2017-01-03_1533"><img src="https://avatars.githubusercontent.com/u/7477095?v=4" width="50"><a href="https://github.com/phirestalker">phirestalker</a> commented at <a href="https://github.com/rear/rear/issues/1030#issuecomment-270141016">2017-01-03 15:33</a>:<a class="headerlink" href="#phirestalker_commented_at_2017-01-03_1533" title="Permanent link">&para;</a></h4>
<p>I have a SMB share mounted for the backup. Could you point me to where
to<br />
modify REQUIRED_PROGS?</p>
<p>On Tue, Jan 3, 2017 at 2:53 AM, Vladimir Gozora
<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;">&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a><br />
wrote:</p>
<blockquote>
<p>@phirestalker
<a href="https://github.com/phirestalker">https://github.com/phirestalker</a>,<br />
Implementation for Borg was written for one simple scenario: Client
-<br />
Server over ssh.<br />
As you've already mentioned, it should not be a big problem to adapt
the<br />
code not to use ssh.</p>
<p>I'd be however interested in your setup. Currently I can imagine 2
kind of<br />
configurations:</p>
<ol>
<li>You have Borg repository on your internal disk, which is not a
    good<br />
    idea</li>
<li>You have Borg repository mounted using some external filesystem<br />
    (NFS, Samba, CIFS ..), in such case you will also need to adapt<br />
    REQUIRED_PROGS with binaries that will actually mount your
    external<br />
    filesystem in ReaR rescue/recovery system.</li>
</ol>
<p>V.</p>
<p>—<br />
You are receiving this because you were mentioned.<br />
Reply to this email directly, view it on GitHub<br />
<a href="https://github.com/rear/rear/issues/1030#issuecomment-270080078">https://github.com/rear/rear/issues/1030#issuecomment-270080078</a>,
or mute<br />
the thread<br />
<a href="https://github.com/notifications/unsubscribe-auth/AHIXZ_3tpkwKDnn0_4afwS9zBqlLrGgZks5rOhqKgaJpZM4KR4eN">https://github.com/notifications/unsubscribe-auth/AHIXZ_3tpkwKDnn0_4afwS9zBqlLrGgZks5rOhqKgaJpZM4KR4eN</a><br />
.</p>
</blockquote>
<h4 id="gozora_commented_at_2017-01-03_1713"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1030#issuecomment-270167182">2017-01-03 17:13</a>:<a class="headerlink" href="#gozora_commented_at_2017-01-03_1713" title="Permanent link">&para;</a></h4>
<p>In your <em>local.conf | site.conf</em> ....</p>
<p>Something like:</p>
<pre><code>REQUIRED_PROGS=( $REQUIRED_PROGS smbmount )
</code></pre>
<h4 id="leader32_commented_at_2017-11-02_1102"><img src="https://avatars.githubusercontent.com/u/11519236?v=4" width="50"><a href="https://github.com/leader32">leader32</a> commented at <a href="https://github.com/rear/rear/issues/1030#issuecomment-341387438">2017-11-02 11:02</a>:<a class="headerlink" href="#leader32_commented_at_2017-11-02_1102" title="Permanent link">&para;</a></h4>
<p>Trying to recover using ReaR bootable ISO image.<br />
Recover fails with error:<br />
<code>ERROR: Could not list Borg archive</code><br />
I think there is no python binaries with required libraries for borg</p>
<p>Probably need to include python support to the rear livecd</p>
<h4 id="gozora_commented_at_2017-11-02_1125"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1030#issuecomment-341392627">2017-11-02 11:25</a>:<a class="headerlink" href="#gozora_commented_at_2017-11-02_1125" title="Permanent link">&para;</a></h4>
<p>@leader32 if you are having trouble with ReaR, please open new issue and
include all relevant details that might help us find out what is
wrong...</p>
<p>V.</p>
<h4 id="leader32_commented_at_2017-11-02_1219"><img src="https://avatars.githubusercontent.com/u/11519236?v=4" width="50"><a href="https://github.com/leader32">leader32</a> commented at <a href="https://github.com/rear/rear/issues/1030#issuecomment-341404033">2017-11-02 12:19</a>:<a class="headerlink" href="#leader32_commented_at_2017-11-02_1219" title="Permanent link">&para;</a></h4>
<p>@gozora I decided to write here, because this error is relevant to borg</p>
<p>Using COPY_AS_IS_BORG as a workaround:</p>
<pre><code>COPY_AS_IS_BORG=( '/usr/lib64/python3.4*' '/usr/bin/python3*' '/usr/bin/pyvenv*' '/usr/lib/python3.4*' '/usr/lib64/libpython3*' )
</code></pre>
<p>List of files consolidated from <code>rpm -qa | egrep 'borg|python34'</code>
command, maybe there is no need <code>pyenv</code> binary, but now it works fine
for me, and <code>rear recover</code> command suceed.</p>
<h4 id="gozora_commented_at_2017-11-22_1716"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1030#issuecomment-346416944">2017-11-22 17:16</a>:<a class="headerlink" href="#gozora_commented_at_2017-11-22_1716" title="Permanent link">&para;</a></h4>
<p>Hello @leader32,</p>
<blockquote>
<p>Trying to recover using ReaR bootable ISO image.<br />
Recover fails with error:<br />
ERROR: Could not list Borg archive<br />
I think there is no python binaries with required libraries for borg</p>
<p>Probably need to include python support to the rear livecd</p>
</blockquote>
<p>Yesterday I've find out why I did not encounter this problem when
writing support for Borg.<br />
The thing is, that I've used <a href="https://github.com/borgbackup/borg/releases">Borg binaries generated with
pyinstaller</a> which seems to
contain all the libs needed for Borg run.</p>
<p>V.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2023 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2016-10-09.1030.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
