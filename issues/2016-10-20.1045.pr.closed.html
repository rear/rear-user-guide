<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>2016 10 20.1045.pr.closed - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "2016 10 20.1045.pr.closed";
        var mkdocs_page_input_path = "issues/2016-10-20.1045.pr.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/rust.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', '366986045', 'auto');
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
      <li>2016 10 20.1045.pr.closed</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="1045_pr_closed_borg_as_back_end_now_accepts_options_for_repository_encryption"><a href="https://github.com/rear/rear/pull/1045">#1045 PR</a> <code>closed</code>: Borg as back end, now accepts options for repository encryption.<a class="headerlink" href="#1045_pr_closed_borg_as_back_end_now_accepts_options_for_repository_encryption" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>fixed / solved / done</code></p>
<h4 id="gozora_opened_issue_at_2016-10-20_1939"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> opened issue at <a href="https://github.com/rear/rear/pull/1045">2016-10-20 19:39</a>:<a class="headerlink" href="#gozora_opened_issue_at_2016-10-20_1939" title="Permanent link">&para;</a></h4>
<ul>
<li>borg as back end, now accepts options for repository encryption.</li>
<li>prune now only affects archives with BORGBACKUP_ARCHIVE_PREFIX</li>
</ul>
<h4 id="gozora_commented_at_2016-10-20_2004"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/pull/1045#issuecomment-255212839">2016-10-20 20:04</a>:<a class="headerlink" href="#gozora_commented_at_2016-10-20_2004" title="Permanent link">&para;</a></h4>
<p>Hello all,<br />
This patch adds possibility for remote Borg repository encryption.<br />
I have however some mixed feelings about it.<br />
The thing on my mind is that we agreed in #1037 that we will mirror
Borg defaults. (e.g. "none" compression will be used by default). Borg
however uses encrypted repositories by default, which adds some
additional complexity (manual repository initialization and entering
pass-phrase for every repository operation like purging, listing,
backing up). I've found couple of ways how to avoid all this (they are
described
<a href="https://github.com/gozora/rear/blob/securing_borg/doc/user-guide/04-scenarios.adoc#bootable-iso-with-borg">here</a>),
but like I said, mixed feelings...</p>
<p>In my opinion bare metal restore is quite complex task, where lot of
things can go wrong, and I really don't like adding more burden to quite
stressed admin as they already have on their shoulders when dealing with
restores (maybe because I'm one of them ;-) ). One such things could
possibly be encrypted backups.</p>
<p>For this reason I'd like to ask for you opinion, if we could set
<strong>none</strong> encryption as a default for ReaR and let users to enable
encryption only if they really need to and possibly know what they are
doing.<br />
.<br />
Thanks!</p>
<p>V.</p>
<h4 id="jsmeix_commented_at_2016-10-21_0852"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1045#issuecomment-255328858">2016-10-21 08:52</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-10-21_0852" title="Permanent link">&para;</a></h4>
<p>I think we can set none encryption as a default for ReaR<br />
because also for 'tar' there is no encryption and I assume<br />
also for most other backup methods there is no encryption<br />
so that I assume ReaR users would expect no encryption<br />
by default.</p>
<p>Furthermore I think a basic idea behind ReaR is that the<br />
actual recovery is as simple as possible, cf.<br />
"A note on the meaning of 'Relax' in 'Relax-and-Recover'" in<br />
<a href="https://en.opensuse.org/SDB:Disaster_Recovery">https://en.opensuse.org/SDB:Disaster_Recovery</a><br />
(excerpts):</p>
<pre>
... after an experienced admin had set it up ...
...
When now a real disaster happens, even a
relatively unexperienced person can do the
recovery on the replacement hardware
(boot the rear recovery system, log in  as root,
 run "rear recover", and finally reboot). 
</pre>

<p>@gozora<br />
currently this branch has conflicts that must be resolved:<br />
Conflicting files: usr/share/rear/conf/default.conf</p>
<p>If you resolve the conflict, I would "just merge" it.</p>
<h4 id="gozora_commented_at_2016-10-21_1049"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/pull/1045#issuecomment-255351545">2016-10-21 10:49</a>:<a class="headerlink" href="#gozora_commented_at_2016-10-21_1049" title="Permanent link">&para;</a></h4>
<p>Jey, my first conflict, let me see :-)</p>
<h4 id="gozora_commented_at_2016-10-21_1052"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/pull/1045#issuecomment-255352110">2016-10-21 10:52</a>:<a class="headerlink" href="#gozora_commented_at_2016-10-21_1052" title="Permanent link">&para;</a></h4>
<p>Ok, looks like I've payed attention during my Git classes :-), conflict
resolved.<br />
I'll update defaults for encryption later today.</p>
<p>Thanks for now!</p>
<h4 id="jsmeix_commented_at_2016-10-21_1146"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1045#issuecomment-255360375">2016-10-21 11:46</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-10-21_1146" title="Permanent link">&para;</a></h4>
<p>@gozora<br />
strange, when I click in this issue in the GitHub<br />
web-fontend on "Files changed" I still see in<br />
usr/share/rear/backup/BORG/default/50_make_backup.sh<br />
and in<br />
usr/share/rear/conf/default.conf<br />
your changes from
<a href="https://github.com/rear/rear/pull/1044">https://github.com/rear/rear/pull/1044</a><br />
that are already merged into rear master<br />
so that I wonder if it has now really no conflicts?</p>
<h4 id="gozora_commented_at_2016-10-21_1204"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/pull/1045#issuecomment-255363066">2016-10-21 12:04</a>:<a class="headerlink" href="#gozora_commented_at_2016-10-21_1204" title="Permanent link">&para;</a></h4>
<p>Well, this conflict was rather strange. The conflict looked something
like this:</p>
<pre><code>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
=======
+BORGBACKUP_COMPRESSION=""
 +# Borg encryption type
 +# Types: none, keyfile, repokey
 +# none: encryption is disabled (least trouble with setup, least security)
 +# keyfile: passphrase and having-the-key (stored on client in /$HOME/.config/borg/keys/)
 +# repokey: passphrase-only (stored on server BORGBACKUP_REPO/config)
 +# Default: repokey
 +BORGBACKUP_ENC_TYPE=""
&gt;&gt;&gt;&gt;&gt;&gt;&gt; &lt;hash&gt;
</code></pre>
<p>So to my understanding no conflict at all. I just removed
<code>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</code>, <code>=======</code> and <code>&gt;&gt;&gt;&gt;&gt;&gt;&gt; &lt;hash&gt;</code><br />
<code>git add .</code><br />
<code>git commit</code></p>
<p>and that is it ...</p>
<p>Maybe you've saw behavior like this already?</p>
<h4 id="gozora_commented_at_2016-10-21_1208"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/pull/1045#issuecomment-255363569">2016-10-21 12:08</a>:<a class="headerlink" href="#gozora_commented_at_2016-10-21_1208" title="Permanent link">&para;</a></h4>
<p>@jsmeix let's try to close this pull request and open new one,<br />
What do you say?</p>
<h4 id="gozora_commented_at_2016-10-21_1217"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/pull/1045#issuecomment-255364894">2016-10-21 12:17</a>:<a class="headerlink" href="#gozora_commented_at_2016-10-21_1217" title="Permanent link">&para;</a></h4>
<p>@jsmeix FYI, by just clicking "new pull request",
<em>usr/share/rear/backup/BORG/default/50_make_backup.sh</em> is not between
changed files any more.<br />
So new, pull request might solve this ...</p>
<h4 id="jsmeix_commented_at_2016-10-21_1246"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1045#issuecomment-255369275">2016-10-21 12:46</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-10-21_1246" title="Permanent link">&para;</a></h4>
<p>@gozora<br />
feel free to do it as it is best for you.<br />
I think you can close this request yourself if you like<br />
(I assume the one who creates it can also close it<br />
but I cannot know how GitHub behaves for you).</p>
<h4 id="gozora_commented_at_2016-10-21_1300"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/pull/1045#issuecomment-255371008">2016-10-21 13:00</a>:<a class="headerlink" href="#gozora_commented_at_2016-10-21_1300" title="Permanent link">&para;</a></h4>
<p>#1046 was opened instead.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2022 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2016-10-20.1045.pr.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
