<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#426 Issue closed: Ubuntu + Duply - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#426 Issue closed: Ubuntu + Duply";
        var mkdocs_page_input_path = "issues/2014-06-15.426.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_nas.html">Internal Backup with tar to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_rsync.html">Internal Backup with rsync to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/rsync.html">External Backup using BACKUP=RSYNC method</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/rbme.html">External Backup using RBME</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/restic.html">External Backup using restic</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/duplicity.html">External Backup using duplicity</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../development/squash-git-log-commments.html">How to squash git log comments into one line</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#426 Issue closed: Ubuntu + Duply</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="426_issue_closed_ubuntu_duply"><a href="https://github.com/rear/rear/issues/426">#426 Issue</a> <code>closed</code>: Ubuntu + Duply<a class="headerlink" href="#426_issue_closed_ubuntu_duply" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>support / question</code></p>
<h4 id="tyl0re_opened_issue_at_2014-06-15_1117"><img src="https://avatars.githubusercontent.com/u/1512325?v=4" width="50"><a href="https://github.com/tyl0re">tyl0re</a> opened issue at <a href="https://github.com/rear/rear/issues/426">2014-06-15 11:17</a>:<a class="headerlink" href="#tyl0re_opened_issue_at_2014-06-15_1117" title="Permanent link">&para;</a></h4>
<p>Does not work in Ubuntu 12.04.4 LTS:</p>
<p>It gets better when changing in:</p>
<ol>
<li><code>/usr/share/rear/build/DUPLICITY/default/60_create_python_symlink.sh</code><br />
<code>python2|python3)</code><br />
    to<br />
<code>python2|python3|python2.7)</code></li>
</ol>
<p>Now some Missing Files Appears:<br />
in<br />
<code>/usr/share/rear/prep/DUPLICITY/default/05_prep_duplicity.sh</code><br />
Must be added:</p>
<p>For duply:<br />
in <code>COPY_AS_IS</code><br />
<code>/usr/bin/env</code></p>
<p>for duplicity:<br />
<code>/usr/include/python2.7/pyconfig.h</code><br />
<code>/etc/apt</code><br />
<code>/usr/bin/dpkg</code><br />
<code>/var/crash</code> (I think Can be left only needed before all Librarys have
been added)</p>
<p>in LIBS</p>
<pre><code>/lib/x86_64-linux-gnu/libexpat.so.1
/usr/lib/x86_64-linux-gnu/libapt-pkg.so.4.12
/usr/lib/x86_64-linux-gnu/libstdc++.so.6
/usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.16
</code></pre>
<p>(when adding the <code>libstdc++</code> the Boot menu disappeared<br />
and the Message</p>
<pre><code>EDD: Error 0c00 reading sector 59099
menu.c32: not a COM32R image
</code></pre>
<p>Appears, but Booting with typing rear still works</p>
<p>Now it appears:<br />
<code>ImportError: No module named duplicity</code></p>
<p>Now i'm a little bit lost what is missing now</p>
<h4 id="gdha_commented_at_2014-06-16_0930"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/426#issuecomment-46158048">2014-06-16 09:30</a>:<a class="headerlink" href="#gdha_commented_at_2014-06-16_0930" title="Permanent link">&para;</a></h4>
<p>The LIBS should be auto detected (try not to add these by hand if
possible). The libstdc++ library might be used by syslinux (menu.c32)?</p>
<pre><code>$ find /usr/lib -name "libstdc++*"
/usr/lib/gcc/x86_64-redhat-linux/4.8.2/32/libstdc++.a
/usr/lib/gcc/x86_64-redhat-linux/4.8.2/32/libstdc++.so
/usr/lib/gcc/x86_64-redhat-linux/4.8.2/libstdc++.so
</code></pre>
<h4 id="schlomo_commented_at_2014-06-16_1023"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/426#issuecomment-46162529">2014-06-16 10:23</a>:<a class="headerlink" href="#schlomo_commented_at_2014-06-16_1023" title="Permanent link">&para;</a></h4>
<p>Though IIRC our auto detect code works only for compiled stuff, not
for<br />
Perl / Python modules.</p>
<p>On 16 June 2014 11:30, gdha <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;">&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a> wrote:</p>
<blockquote>
<p>The LIBS should be auto detected (try not to add these by hand if<br />
possible). The libstdc++ library might be used by syslinux (menu.c32)?</p>
<p>$ find /usr/lib -name "libstdc++*"<br />
/usr/lib/gcc/x86_64-redhat-linux/4.8.2/32/libstdc++.a<br />
/usr/lib/gcc/x86_64-redhat-linux/4.8.2/32/libstdc++.so<br />
/usr/lib/gcc/x86_64-redhat-linux/4.8.2/libstdc++.so</p>
<p>—<br />
Reply to this email directly or view it on GitHub<br />
<a href="https://github.com/rear/rear/issues/426#issuecomment-46158048">https://github.com/rear/rear/issues/426#issuecomment-46158048</a>.</p>
</blockquote>
<h4 id="tyl0re_commented_at_2014-06-16_1032"><img src="https://avatars.githubusercontent.com/u/1512325?v=4" width="50"><a href="https://github.com/tyl0re">tyl0re</a> commented at <a href="https://github.com/rear/rear/issues/426#issuecomment-46163187">2014-06-16 10:32</a>:<a class="headerlink" href="#tyl0re_commented_at_2014-06-16_1032" title="Permanent link">&para;</a></h4>
<p>I could create a test server and a rear bootet "test-server"r to check
maybe its faster when someone could have a look? (if you want, to verify
if its a bug)</p>
<h4 id="gdha_commented_at_2014-06-16_1347"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/426#issuecomment-46179766">2014-06-16 13:47</a>:<a class="headerlink" href="#gdha_commented_at_2014-06-16_1347" title="Permanent link">&para;</a></h4>
<p>still not sure where you got the requirements of libstdc++* from? For
the rest you got the analysis right.</p>
<h4 id="tyl0re_commented_at_2014-06-16_1451"><img src="https://avatars.githubusercontent.com/u/1512325?v=4" width="50"><a href="https://github.com/tyl0re">tyl0re</a> commented at <a href="https://github.com/rear/rear/issues/426#issuecomment-46188250">2014-06-16 14:51</a>:<a class="headerlink" href="#tyl0re_commented_at_2014-06-16_1451" title="Permanent link">&para;</a></h4>
<p>I have added the Library one by one. and at one time threre was the
message of the missing libstdc++ when starting duplicity</p>
<h4 id="gdha_commented_at_2014-07-30_1445"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/426#issuecomment-50624419">2014-07-30 14:45</a>:<a class="headerlink" href="#gdha_commented_at_2014-07-30_1445" title="Permanent link">&para;</a></h4>
<p>Just to be complete:<br />
<code>./usr/share/rear/prep/DUPLICITY/default/05_prep_duplicity.sh:/usr/include/python2.7/pyconfig.h</code>
was already added into the script (but forgot to link with this issue)</p>
<p>And, if I'm not mistaken, the link of python should also be corrected in
<code>./usr/share/rear/build/DUPLICITY/default/60_create_python_symlink.sh</code></p>
<h4 id="gdha_commented_at_2014-08-22_1431"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/426#issuecomment-53067325">2014-08-22 14:31</a>:<a class="headerlink" href="#gdha_commented_at_2014-08-22_1431" title="Permanent link">&para;</a></h4>
<p>@tyl0re @mavit If you find some time could you verify if the behavior is
better in rear-1.16.1-git201408201003?</p>
<h4 id="tyl0re_commented_at_2014-08-30_1606"><img src="https://avatars.githubusercontent.com/u/1512325?v=4" width="50"><a href="https://github.com/tyl0re">tyl0re</a> commented at <a href="https://github.com/rear/rear/issues/426#issuecomment-53962602">2014-08-30 16:06</a>:<a class="headerlink" href="#tyl0re_commented_at_2014-08-30_1606" title="Permanent link">&para;</a></h4>
<p>Zitat von gdha <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;">&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a>:</p>
<blockquote>
<p>@tyl0re[1] @mavit[2] If you find some time could you verify if
the<br />
behavior is better in rear-1.16.1-git201408201003?</p>
<p>—<br />
Reply to this email directly or view it on GitHub[3].</p>
</blockquote>
<p>Hi, Sorry i was on holliday, now i get that libexpat.so.1 is missing</p>
<h2 id="links">Links:<a class="headerlink" href="#links" title="Permanent link">&para;</a></h2>
<p>[1] <a href="https://github.com/tyl0re">https://github.com/tyl0re</a><br />
[2] <a href="https://github.com/mavit">https://github.com/mavit</a><br />
[3]
<a href="https://github.com/rear/rear/issues/426#issuecomment-53067325">https://github.com/rear/rear/issues/426#issuecomment-53067325</a></p>
<h4 id="gdha_commented_at_2014-09-01_1424"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/426#issuecomment-54065472">2014-09-01 14:24</a>:<a class="headerlink" href="#gdha_commented_at_2014-09-01_1424" title="Permanent link">&para;</a></h4>
<p>@tyl0re In my case it seems to find it (on f20):</p>
<pre><code>2014-09-01 10:34:09 Adding required /lib64/libexpat.so.1 to LIBS
2014-09-01 10:34:09 Adding required /lib64/libexpat.so.1.6.0 to LIBS
</code></pre>
<h4 id="tyl0re_commented_at_2014-09-01_1457"><img src="https://avatars.githubusercontent.com/u/1512325?v=4" width="50"><a href="https://github.com/tyl0re">tyl0re</a> commented at <a href="https://github.com/rear/rear/issues/426#issuecomment-54068343">2014-09-01 14:57</a>:<a class="headerlink" href="#tyl0re_commented_at_2014-09-01_1457" title="Permanent link">&para;</a></h4>
<p>Do you mean on the cd or on the Host?<br />
On the Host it is:<br />
root@mail:/home/lore# ls -al /lib/x86_64-linux-gnu/libexpat.so.1<br />
lrwxrwxrwx 1 root root 17 Aug 9 2012
/lib/x86_64-linux-gnu/libexpat.so.1 -&gt; libexpat.so.1.5.2</p>
<h4 id="tyl0re_commented_at_2014-09-03_2029"><img src="https://avatars.githubusercontent.com/u/1512325?v=4" width="50"><a href="https://github.com/tyl0re">tyl0re</a> commented at <a href="https://github.com/rear/rear/issues/426#issuecomment-54360621">2014-09-03 20:29</a>:<a class="headerlink" href="#tyl0re_commented_at_2014-09-03_2029" title="Permanent link">&para;</a></h4>
<p>From the <code>/var/log/rear/rear-server.log</code> from building:</p>
<pre><code>cp: cannot stat `/lib/libexpat.so.1': No such file or directory
`/lib/libgssglue.so.1.0.0' -&gt; `/tmp/rear.Czhc93WWLZQO6b4/rootfs/lib/libgssglue.so.1.0.0'
</code></pre>
<p>On The Server:</p>
<pre><code>rear# locate libexpat.so.1
/lib/x86_64-linux-gnu/libexpat.so.1
/lib/x86_64-linux-gnu/libexpat.so.1.5.2
</code></pre>
<p>I have a suggestion mayby to get all Library rights,mayby it solves
problems when using other Method like webdav,ftp,.....</p>
<p><code>strace  -f -e open duply $DUPLY_PROFILE status 2&gt;&amp;1 1&gt;/dev/null|egrep "lib.+.so.*" |cut -d \" -f 2 &gt; /tmp/lib_list</code></p>
<p>The Lib list is:<br />
<a href="http://pastebin.com/CEsWY1f0">http://pastebin.com/CEsWY1f0</a></p>
<h4 id="gdha_commented_at_2014-09-04_0840"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/426#issuecomment-54432461">2014-09-04 08:40</a>:<a class="headerlink" href="#gdha_commented_at_2014-09-04_0840" title="Permanent link">&para;</a></h4>
<p>thank you for the tip (not bad at all - perhaps should add this to our
developers guide [which does not yet exist]:) :</p>
<pre><code>$ sort -u /tmp/lib_list | while read a ; do
&gt; echo ${a%/*}
&gt; done | sort -u
/lib/x86_64-linux-gnu
urllibmodule.so
/usr/lib
/usr/lib/pymodules/python2.7
/usr/lib/python2.7
/usr/lib/python2.7/dist-packages
/usr/lib/python2.7/email
/usr/lib/python2.7/email/mime
/usr/lib/python2.7/encodings
/usr/lib/python2.7/lib-dynload
/usr/lib/python2.7/lib-tk
/usr/lib/python2.7/logging
/usr/lib/python2.7/plat-linux2
/usr/lib/python2.7/xml
/usr/lib/python2.7/xml/dom
/usr/lib/python2.7/xml/parsers
/usr/local/bin
/usr/local/lib/python2.7/dist-packages
/usr/local/lib/python2.7/dist-packages/duplicity
/usr/local/lib/python2.7/dist-packages/duplicity/backends
</code></pre>
<p>On my fedora box it looks like:</p>
<pre><code>[gdha@fedora20 rear]$ sort -u /tmp/lib_list | while read a ; do
&gt; echo ${a%/*}
&gt; done | sort -u
/lib64
/usr/bin
/usr/lib64/python2.7
/usr/lib64/python2.7/encodings
/usr/lib64/python2.7/lib-dynload
/usr/lib64/python2.7/logging
/usr/lib64/python2.7/plat-linux2
/usr/lib64/python2.7/site-packages
/usr/lib64/python2.7/site-packages/duplicity
/usr/lib64/python2.7/site-packages/duplicity/backends
/usr/lib64/python2.7/site-packages/gtk-2.0
/usr/lib64/python27.zip
/usr/lib/python2.7/site-packages
</code></pre>
<h4 id="tyl0re_commented_at_2014-09-04_1156"><img src="https://avatars.githubusercontent.com/u/1512325?v=4" width="50"><a href="https://github.com/tyl0re">tyl0re</a> commented at <a href="https://github.com/rear/rear/issues/426#issuecomment-54460869">2014-09-04 11:56</a>:<a class="headerlink" href="#tyl0re_commented_at_2014-09-04_1156" title="Permanent link">&para;</a></h4>
<p>O.k Try 2:</p>
<p>FILES=<code>strace -Ff -e open duply $DUPLY_PROFILE status 2&gt;&amp;1 1&gt;/dev/null|grep -v '= -1'|grep -i open|grep -v "open resumed" |cut -d \" -f 2|sort -u</code></p>
<p>for name in $FILES; do<br />
if [ -f $name ] || [ -L $name ]; then<br />
DATEI=<code>readlink  -f $name</code><br />
LIB=<code>file $DATEI|grep "shared object"|cut -d \: -f 1</code><br />
if [ "x$LIB" != "x" ]; then<br />
echo $LIB<br />
fi<br />
fi<br />
done</p>
<p>Files= (And then the ' is missing in the comment),seems to be cut out<br />
Output on my System:<br />
/lib/x86_64-linux-gnu/libacl.so.1.1.0<br />
/lib/x86_64-linux-gnu/libattr.so.1.1.0<br />
/lib/x86_64-linux-gnu/libbz2.so.1.0.4<br />
/lib/x86_64-linux-gnu/libcrypto.so.1.0.0<br />
/lib/x86_64-linux-gnu/libc-2.15.so<br />
/lib/x86_64-linux-gnu/libdl-2.15.so<br />
/lib/x86_64-linux-gnu/libexpat.so.1.5.2<br />
/lib/x86_64-linux-gnu/libgcc_s.so.1<br />
/lib/x86_64-linux-gnu/libm-2.15.so<br />
/lib/x86_64-linux-gnu/libnsl-2.15.so<br />
/lib/x86_64-linux-gnu/libnss_compat-2.15.so<br />
/lib/x86_64-linux-gnu/libnss_dns-2.15.so<br />
/lib/x86_64-linux-gnu/libnss_files-2.15.so<br />
/lib/x86_64-linux-gnu/libnss_nis-2.15.so<br />
/lib/x86_64-linux-gnu/libpthread-2.15.so<br />
/lib/x86_64-linux-gnu/libreadline.so.6.2<br />
/lib/x86_64-linux-gnu/libresolv-2.15.so<br />
/lib/x86_64-linux-gnu/librt-2.15.so<br />
/lib/x86_64-linux-gnu/libselinux.so.1<br />
/lib/x86_64-linux-gnu/libssl.so.1.0.0<br />
/lib/x86_64-linux-gnu/libtinfo.so.5.9<br />
/lib/x86_64-linux-gnu/libusb-0.1.so.4.4.4<br />
/lib/x86_64-linux-gnu/libutil-2.15.so<br />
/lib/x86_64-linux-gnu/libz.so.1.2.3.4<br />
/usr/lib/librsync.so.1.0.2<br />
/usr/lib/libsigsegv.so.2.0.2<br />
/usr/lib/python2.7/lib-dynload/datetime.so<br />
/usr/lib/python2.7/lib-dynload/_heapq.so<br />
/usr/lib/python2.7/lib-dynload/_io.so<br />
/usr/lib/python2.7/lib-dynload/pyexpat.so<br />
/usr/lib/python2.7/lib-dynload/resource.so<br />
/usr/lib/python2.7/lib-dynload/termios.so<br />
/usr/local/lib/python2.7/dist-packages/duplicity/_librsync.so</p>
<h4 id="tyl0re_commented_at_2014-09-04_1159"><img src="https://avatars.githubusercontent.com/u/1512325?v=4" width="50"><a href="https://github.com/tyl0re">tyl0re</a> commented at <a href="https://github.com/rear/rear/issues/426#issuecomment-54461305">2014-09-04 11:59</a>:<a class="headerlink" href="#tyl0re_commented_at_2014-09-04_1159" title="Permanent link">&para;</a></h4>
<p>This would do it if you need the phyiscal files, when the names of the
links are needed:<br />
#!/bin/bash<br />
FILES=<code>strace -Ff -e open duply mail status 2&gt;&amp;1 1&gt;/dev/null|grep -v '= -1'|grep -i open|grep -v "open resumed" |cut -d \" -f 2|sort -u</code></p>
<p>for name in $FILES; do<br />
if [ -f $name ] || [ -L $name ]; then<br />
DATEI=<code>readlink  -f $name</code><br />
LIB=<code>file $DATEI|grep "shared object"|cut -d \: -f 1</code><br />
if [ "x$LIB" != "x" ]; then<br />
echo $name<br />
fi<br />
fi<br />
done</p>
<p>Would do it</p>
<p>Files= (And then the ' is missing in the comment),seems to be cut out</p>
<h4 id="reiner030_commented_at_2014-09-30_1405"><img src="https://avatars.githubusercontent.com/u/29528?v=4" width="50"><a href="https://github.com/Reiner030">Reiner030</a> commented at <a href="https://github.com/rear/rear/issues/426#issuecomment-57318524">2014-09-30 14:05</a>:<a class="headerlink" href="#reiner030_commented_at_2014-09-30_1405" title="Permanent link">&para;</a></h4>
<p>Hello,</p>
<p>i have found some equal problem on/with:</p>
<pre><code># lsb_release -d
Description:    Debian GNU/Linux 7.6 (wheezy)
# rear -V
Relax-and-Recover 1.16.1 / Git
# duplicity -V
duplicity 0.6.18
# duply -V
  duply version 1.8.0
  (http://duply.net)

  Using installed duplicity version 0.6.18, python 2.7.3, gpg 1.4.12 (Home: ~/.gnupg), awk 'GNU Awk 4.0.1', bash '4.2.37(1)-release (x86_64-pc-linux-gnu)'.
</code></pre>
<p>(duply/duplicity from wheezy backports)</p>
<p>Backup is done fine but restore hung with:</p>
<ul>
<li>"duply missing - Executable &amp; available in path ? (duply)"<br />
    =&gt; /usr/bin/env is missing</li>
<li>"duplicity version check failed (please report, this is a bug)"<br />
    "Using installed duplicity version (not found), /bin/duply: line 98:
    python: command not found, gpg 1.4.12 (home: /.gnupg), awk "GNU Awk
    4.0.1<code>, bash</code>4.2.3781)-release (x86_64-pc-linux-gnu)'."<br />
    ".... import keys..." ==&gt; python is missing</li>
<li>"Temporary file space '/tmp/' from free space is smaller (501 MB)<br />
    than one duplicity volume (1024MB).<br />
    Hint: Free space or change TEMP_DIR setting.<br />
    =&gt; perhaps VOLSIZE can be also extracted and used in ISO / tmp
    image building ?</li>
</ul>
<!-- -->

<pre><code># aptitude show duplicity |grep -e Package -e Depends -e Recommend -e Suggests
Package: duplicity
Depends: libc6 (&gt;= 2.2.5), librsync1 (&gt;= 0.9.6), python (&gt;= 2.7), python (&lt;
Recommends: rsync, python-paramiko
Suggests: python-boto, ncftp, python-pexpect (&gt;= 2.3-1), python-cloudfiles,
</code></pre>
<p>but better install then please all backends ...<br />
I have installed / tested them for our servers (running in different
locations with different backup backends) with following packages:</p>
<ul>
<li>duply</li>
<li>duplicity</li>
<li>python-boto</li>
<li>ncftp</li>
<li>python-pexpect</li>
<li>python-cloudfiles</li>
<li>lftp</li>
<li>python-gdata</li>
<li>tahoe-lafs</li>
<li>python-paramiko</li>
<li>python-gobject-2</li>
</ul>
<p>( last two packaes have no references in Ubuntu/Debian yet:<br />
<a href="http://www.rfc3092.net/2013/09/missing-modules-for-paramiko-and-gio-in-duplicity-foo/">http://www.rfc3092.net/2013/09/missing-modules-for-paramiko-and-gio-in-duplicity-foo/</a>
)</p>
<pre><code># grep python-cloud /var/log/apt/history.log
Install: python-setuptools:amd64 (0.6.24-1, automatic), python-twisted-mail:amd64 (12.0.0-1, automatic), python-twisted-bin:amd64 (12.0.0-1, automatic), python-foolscap:amd64 (0.6.4-1, automatic), python-openssl:amd64 (0.13-2+deb7u1, automatic), tahoe-lafs:amd64 (1.9.2-1), python-twisted-lore:amd64 (12.0.0-1, automatic), libcrypto++9:amd64 (5.6.1-6, automatic), python-twisted-news:amd64 (12.0.0-1, automatic), python-nevow:amd64 (0.10.0-4, automatic), python-mock:amd64 (0.8.0-3, automatic), ncftp:amd64 (3.2.5-1.1), python-zope.interface:amd64 (3.6.1-3, automatic), python-twisted-conch:amd64 (12.0.0-1, automatic), python-twisted-words:amd64 (12.0.0-1, automatic), python-twisted-web:amd64 (12.0.0-1, automatic), python-twisted:amd64 (12.0.0-1, automatic), duplicity:amd64 (0.6.18-3), python-pycryptopp:amd64 (0.5.29-1, automatic), python-cloudfiles:amd64 (1.7.9.2-1), duply:amd64 (1.5.5.5-1), python-boto:amd64 (2.3.0-1), python-twisted-core:amd64 (12.0.0-1, automatic), python-simplejson:amd64 (2.5.2-1, automatic), python-gnupginterface:amd64 (0.3.2-9.1, automatic), python-twisted-names:amd64 (12.0.0-1, automatic), python-twisted-runner:amd64 (12.0.0-1, automatic), python-pexpect:amd64 (2.4-1), python-gdata:amd64 (2.0.17+dfsg-1), python-pkg-resources:amd64 (0.6.24-1, automatic), python-zfec:amd64 (1.4.5-2, automatic), librsync1:amd64 (0.9.7-9, automatic), python-crypto:amd64 (2.6-4+deb7u3, automatic), python-pyasn1:amd64 (0.1.3-1, automatic), python-paramiko:amd64 (1.7.7.1-3.1), python-gobject-2:amd64 (2.28.6-10)
</code></pre>
<p>Volume Size (is set):</p>
<pre><code># set the size of backup chunks to VOLSIZE MB instead of the default 25MB.
# VOLSIZE must be number of MB's to set the volume size to.
VOLSIZE=1024
DUPL_PARAMS="$DUPL_PARAMS --volsize $VOLSIZE "
</code></pre>
<p>Bests</p>
<p>Reiner</p>
<h4 id="reiner030_commented_at_2014-10-02_1230"><img src="https://avatars.githubusercontent.com/u/29528?v=4" width="50"><a href="https://github.com/Reiner030">Reiner030</a> commented at <a href="https://github.com/rear/rear/issues/426#issuecomment-57622552">2014-10-02 12:30</a>:<a class="headerlink" href="#reiner030_commented_at_2014-10-02_1230" title="Permanent link">&para;</a></h4>
<p>Hi,<br />
the tempdir problem was because I forgot to give my test-VM more
RAM/same as the origin instance.<br />
I found out how easy it is to create a debian package from this repo ...
thx ;)</p>
<p>With actual snapshot of 1st October and enough RAM I got still following
missing files/error (same later for RESTORE):</p>
<pre><code>Using profile '/etc/duply/rear-test'.
Using installed duplicity version (not found), python 2.7.3, gpg 1.4.12 (Home: ~/.gnupg), awk 'GNU Awk 4.0.1', bash '4.2.37(1)-release (x86_64-pc-linux-gnu)'.

--- Start running command STATUS at 11:45:54.879 ---
ERROR:root:code for hash md5 was not found.
Traceback (most recent call last):
  File "/usr/lib/python2.7/hashlib.py", line 139, in &lt;module&gt;
    globals()[__func_name] = __get_hash(__func_name)
  File "/usr/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type md5
ERROR:root:code for hash sha1 was not found.
Traceback (most recent call last):
  File "/usr/lib/python2.7/hashlib.py", line 139, in &lt;module&gt;
    globals()[__func_name] = __get_hash(__func_name)
  File "/usr/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type sha1
ERROR:root:code for hash sha224 was not found.
Traceback (most recent call last):
  File "/usr/lib/python2.7/hashlib.py", line 139, in &lt;module&gt;
    globals()[__func_name] = __get_hash(__func_name)
  File "/usr/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type sha224
ERROR:root:code for hash sha256 was not found.
Traceback (most recent call last):
  File "/usr/lib/python2.7/hashlib.py", line 139, in &lt;module&gt;
    globals()[__func_name] = __get_hash(__func_name)
  File "/usr/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type sha256
ERROR:root:code for hash sha384 was not found.
Traceback (most recent call last):
  File "/usr/lib/python2.7/hashlib.py", line 139, in &lt;module&gt;
    globals()[__func_name] = __get_hash(__func_name)
  File "/usr/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type sha384
ERROR:root:code for hash sha512 was not found.
Traceback (most recent call last):
  File "/usr/lib/python2.7/hashlib.py", line 139, in &lt;module&gt;
    globals()[__func_name] = __get_hash(__func_name)
  File "/usr/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type sha512
Traceback (most recent call last):
  File "/sbin/duplicity", line 45, in &lt;module&gt;
    from duplicity import collections
  File "/usr/lib/python2.7/dist-packages/duplicity/collections.py", line 29, in &lt;module&gt;
    from duplicity import path
  File "/usr/lib/python2.7/dist-packages/duplicity/path.py", line 34, in &lt;module&gt;
    from duplicity import gpg
  File "/usr/lib/python2.7/dist-packages/duplicity/gpg.py", line 36, in &lt;module&gt;
    from sha import new as sha1
  File "/usr/lib/python2.7/sha.py", line 10, in &lt;module&gt;
    from hashlib import sha1 as sha
ImportError: cannot import name sha1
11:45:54.989 Task 'STATUS' failed with exit code '1'.
</code></pre>
<p>could have something to do with this (i have not nuch experiense with
python yet)</p>
<pre><code># grep import /usr/lib/python2.7/hashlib.py
    &gt;&gt;&gt; import hashlib
            import _sha
            import _md5
            import _sha256
            import _sha512
    import _hashlib
        import logging
# grep -rl -e sha256 -e sha512 -e md5 /usr/lib/python2.7/  | grep lib-dynload
/usr/lib/python2.7/lib-dynload/_hashlib.so
</code></pre>
<p>... but this file is already installed... there must be some other
file(s) for the hashes...</p>
<h4 id="tyl0re_commented_at_2014-10-11_1323"><img src="https://avatars.githubusercontent.com/u/1512325?v=4" width="50"><a href="https://github.com/tyl0re">tyl0re</a> commented at <a href="https://github.com/rear/rear/issues/426#issuecomment-58749394">2014-10-11 13:23</a>:<a class="headerlink" href="#tyl0re_commented_at_2014-10-11_1323" title="Permanent link">&para;</a></h4>
<p>Hi made an Patch that works for me,<br />
It Uses Strace and File to to find out which Librarys are used<br />
and then add it<br />
<a href="https://github.com/tyl0re/rear/blob/master/usr/share/rear/prep/DUPLICITY/default/25_find_all_libs.sh">https://github.com/tyl0re/rear/blob/master/usr/share/rear/prep/DUPLICITY/default/25_find_all_libs.sh</a></p>
<p>Mayby Reiner030 can verify if its working for him<br />
just put the FIle in<br />
/usr/share/rear/prep/DUPLICITY/default/25_find_all_libs.sh<br />
and try it again.</p>
<h4 id="reiner030_commented_at_2014-10-13_1339"><img src="https://avatars.githubusercontent.com/u/29528?v=4" width="50"><a href="https://github.com/Reiner030">Reiner030</a> commented at <a href="https://github.com/rear/rear/issues/426#issuecomment-58893037">2014-10-13 13:39</a>:<a class="headerlink" href="#reiner030_commented_at_2014-10-13_1339" title="Permanent link">&para;</a></h4>
<p>mmh, wasn't helping:</p>
<p>Build process:</p>
<pre><code>...
2014-10-13 12:44:35 Including prep/GNU/Linux/24_include_multipath_tools.sh
2014-10-13 12:44:35 Including prep/DUPLICITY/default/25_find_all_libs.sh
2014-10-13 12:44:35 Including prep/GNU/Linux/28_include_systemd.sh
...
</code></pre>
<p>=&gt; package need new package requirement: "strace" and perhaps also
"coreutils" and "file" but I think that they are always installed in
Debian/Ubuntu.</p>
<p>Restore process with new ISO image::</p>
<pre><code>2014-10-13 12:36:34 Including verify/DUPLICITY/default/25_check_duply_profile.sh
Start duply v1.8.0, time is 2014-10-13 12:36:34.

INFO:

duplicity version check failed (please report, this is a bug)

Using profile '/etc/duply/rear-test'.
Using installed duplicity version (not found), python 2.7.3, gpg 1.4.12 (Home: ~/.gnupg), awk 'GNU Awk 4.0.1', bash '4.2.37(1)-release (x86_64-pc-linux-gnu)'.
...
--- Start running command STATUS at 12:36:34.798 ---
ERROR:root:code for hash md5 was not found.
Traceback (most recent call last):
  File "/usr/lib/python2.7/hashlib.py", line 139, in &lt;module&gt;
    globals()[__func_name] = __get_hash(__func_name)
  File "/usr/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type md5
ERROR:root:code for hash sha1 was not found.
Traceback (most recent call last):
  File "/usr/lib/python2.7/hashlib.py", line 139, in &lt;module&gt;
    globals()[__func_name] = __get_hash(__func_name)
  File "/usr/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type sha1
ERROR:root:code for hash sha224 was not found.
Traceback (most recent call last):
  File "/usr/lib/python2.7/hashlib.py", line 139, in &lt;module&gt;
    globals()[__func_name] = __get_hash(__func_name)
  File "/usr/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type sha224
ERROR:root:code for hash sha256 was not found.
Traceback (most recent call last):
  File "/usr/lib/python2.7/hashlib.py", line 139, in &lt;module&gt;
    globals()[__func_name] = __get_hash(__func_name)
  File "/usr/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type sha256
ERROR:root:code for hash sha384 was not found.
Traceback (most recent call last):
  File "/usr/lib/python2.7/hashlib.py", line 139, in &lt;module&gt;
    globals()[__func_name] = __get_hash(__func_name)
  File "/usr/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type sha384
ERROR:root:code for hash sha512 was not found.
Traceback (most recent call last):
  File "/usr/lib/python2.7/hashlib.py", line 139, in &lt;module&gt;
    globals()[__func_name] = __get_hash(__func_name)
  File "/usr/lib/python2.7/hashlib.py", line 91, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type sha512
Traceback (most recent call last):
  File "/sbin/duplicity", line 45, in &lt;module&gt;
    from duplicity import collections
  File "/usr/lib/python2.7/dist-packages/duplicity/collections.py", line 29, in &lt;module&gt;
    from duplicity import path
  File "/usr/lib/python2.7/dist-packages/duplicity/path.py", line 34, in &lt;module&gt;
    from duplicity import gpg
  File "/usr/lib/python2.7/dist-packages/duplicity/gpg.py", line 36, in &lt;module&gt;
    from sha import new as sha1
  File "/usr/lib/python2.7/sha.py", line 10, in &lt;module&gt;
    from hashlib import sha1 as sha
ImportError: cannot import name sha1
12:36:34.920 Task 'STATUS' failed with exit code '1'.
</code></pre>
<p>Manually run I got:</p>
<pre><code># strace -Ff -e open duply rear-test status 2&gt;&amp;1 1&gt;/dev/null|grep -v '= -1'|grep -i open|grep -v "open resumed" |cut -d \" -f 2 |sort -u | grep -i -e md5 -e sha -e hash
/usr/lib/python2.7/dist-packages/Crypto/Hash/hashalgo.py
/usr/lib/python2.7/dist-packages/Crypto/Hash/hashalgo.pyc
/usr/lib/python2.7/dist-packages/Crypto/Hash/HMAC.py
/usr/lib/python2.7/dist-packages/Crypto/Hash/HMAC.pyc
/usr/lib/python2.7/dist-packages/Crypto/Hash/__init__.py
/usr/lib/python2.7/dist-packages/Crypto/Hash/__init__.pyc
/usr/lib/python2.7/dist-packages/Crypto/Hash/MD5.py
/usr/lib/python2.7/dist-packages/Crypto/Hash/MD5.pyc
/usr/lib/python2.7/dist-packages/Crypto/Hash/SHA256.py
/usr/lib/python2.7/dist-packages/Crypto/Hash/SHA256.pyc
/usr/lib/python2.7/dist-packages/Crypto/Hash/SHA.py
/usr/lib/python2.7/dist-packages/Crypto/Hash/SHA.pyc
/usr/lib/python2.7/dist-packages/Crypto/Random/Fortuna/SHAd256.py
/usr/lib/python2.7/dist-packages/Crypto/Random/Fortuna/SHAd256.pyc
/usr/lib/python2.7/hashlib.py
/usr/lib/python2.7/hashlib.pyc
/usr/lib/python2.7/lib-dynload/_hashlib.so
/usr/share/locale/en/LC_MESSAGES/coreutils.mo
/usr/share/locale/en_US/LC_MESSAGES/coreutils.mo
/usr/share/locale/en_US.utf8/LC_MESSAGES/coreutils.mo
/usr/share/locale/locale.alias
</code></pre>
<p>but backup/restore host have same content there...</p>
<p>Perhaps this is more a backend problem. I let install all (didn't take
much space and later I need not take care when using one of he
backends). Here I use/need the ssh backend:</p>
<pre><code>Import of duplicity.backends.cloudfilesbackend Succeeded
Import of duplicity.backends.webdavbackend Succeeded
Import of duplicity.backends.ftpbackend Succeeded
Import of duplicity.backends.botobackend Succeeded
Import of duplicity.backends.rsyncbackend Succeeded
Import of duplicity.backends.tahoebackend Succeeded
Import of duplicity.backends.sshbackend Succeeded
Import of duplicity.backends.ftpsbackend Succeeded
Import of duplicity.backends.hsibackend Succeeded
Import of duplicity.backends.localbackend Succeeded
Import of duplicity.backends.imapbackend Succeeded
Import of duplicity.backends.u1backend Succeeded
Import of duplicity.backends.giobackend Succeeded
Import of duplicity.backends.gdocsbackend Succeeded
ssh: Connected (version 2.0, client OpenSSH_5.5p1)
ssh: Authentication (publickey) successful!
ssh: Secsh channel 1 opened.
ssh: [chan 1] Opened sftp connection (server version 3)
Main action: collection-status
</code></pre>
<p>... yes ... seems so .. =&gt; next comment ;)</p>
<h4 id="reiner030_commented_at_2014-10-13_1406"><img src="https://avatars.githubusercontent.com/u/29528?v=4" width="50"><a href="https://github.com/Reiner030">Reiner030</a> commented at <a href="https://github.com/rear/rear/issues/426#issuecomment-58896668">2014-10-13 14:06</a>:<a class="headerlink" href="#reiner030_commented_at_2014-10-13_1406" title="Permanent link">&para;</a></h4>
<p>a little to fast... but I think I have found the problem...</p>
<p>if I call</p>
<pre><code># python /usr/lib/python2.7/sha.py
</code></pre>
<p>on backup host it works fine but on restore host it throws above error
messages.</p>
<p>=&gt; here the diff of my duplicity call:</p>
<pre><code># diff libs_backup.txt libs_restore.txt
1a2
&gt; /etc/localtime
10d10
&lt; /usr/lib/locale/locale-archive
14a15,18
&gt; /usr/lib/python2.7/atexit.py
&gt; /usr/lib/python2.7/atexit.pyc
&gt; /usr/lib/python2.7/bisect.py
&gt; /usr/lib/python2.7/bisect.pyc
16a21,22
&gt; /usr/lib/python2.7/collections.py
&gt; /usr/lib/python2.7/collections.pyc
26a33,34
&gt; /usr/lib/python2.7/encodings/ascii.py
&gt; /usr/lib/python2.7/encodings/ascii.pyc
29,30d36
&lt; /usr/lib/python2.7/encodings/utf_8.py
&lt; /usr/lib/python2.7/encodings/utf_8.pyc
34a41,44
&gt; /usr/lib/python2.7/heapq.py
&gt; /usr/lib/python2.7/heapq.pyc
&gt; /usr/lib/python2.7/keyword.py
&gt; /usr/lib/python2.7/keyword.pyc
37a48,49
&gt; /usr/lib/python2.7/logging/__init__.py
&gt; /usr/lib/python2.7/logging/__init__.pyc
62a75,76
&gt; /usr/lib/python2.7/threading.py
&gt; /usr/lib/python2.7/threading.pyc
70a85,86
&gt; /usr/lib/python2.7/weakref.py
&gt; /usr/lib/python2.7/weakref.pyc
73,75d88
&lt; /usr/lib/x86_64-linux-gnu/libcrypto.so.1.0.0
&lt; /usr/lib/x86_64-linux-gnu/libssl.so.1.0.0
&lt; /usr/local/lib/python2.7/dist-packages
</code></pre>
<p>=&gt; minimum this seems the cause?<br />
/usr/lib/x86_64-linux-gnu/libcrypto.so.1.0.0<br />
/usr/lib/x86_64-linux-gnu/libssl.so.1.0.0</p>
<p>=&gt; yes... new failure message:</p>
<pre><code>Traceback (most recent call last):
  File "/bin/duplicity", line 45, in &lt;module&gt;
    from duplicity import collections
  File "/usr/lib/python2.7/dist-packages/duplicity/collections.py", line 29, in &lt;module&gt;
    from duplicity import path
  File "/usr/lib/python2.7/dist-packages/duplicity/path.py", line 36, in &lt;module&gt;
    from duplicity import librsync
  File "/usr/lib/python2.7/dist-packages/duplicity/librsync.py", line 29, in &lt;module&gt;
    import _librsync
ImportError: librsync.so.1: cannot open shared object file: No such file or directory
</code></pre>
<p>=&gt; /usr/lib/x86_64-linux-gnu/librsync.so.1.0.2</p>
<p>... and creating symlinks for these 3 libs with *.so and *.so.1</p>
<p>=&gt; works then ;)</p>
<pre><code>Start duply v1.8.0, time is 2014-10-13 14:22:27.
Using profile '/etc/duply/rear-test'.
Using installed duplicity version 0.6.18, python 2.7.3, gpg 1.4.12 (Home: ~/.gnupg), awk 'GNU Awk 4.0.1', bash '4.2.37(1)-release (x86_64-pc-linux-gnu)'.
...
Cleanup - Delete '/tmp/duply.3054.1413210147_*'(OK)

--- Start running command RESTORE at 14:22:28.042 ---
Using archive dir: /var/cache/duplicity/duply_rear-test
Using backup name: duply_rear-test
Import of duplicity.backends.gdocsbackend Succeeded
Import of duplicity.backends.giobackend Failed: libgobject-2.0.so.0: cannot open shared object file: No such file or directory
Import of duplicity.backends.u1backend Succeeded
...
</code></pre>
<p>(the complained lib is in an not used backend... )</p>
<h4 id="tyl0re_commented_at_2014-10-13_1839"><img src="https://avatars.githubusercontent.com/u/1512325?v=4" width="50"><a href="https://github.com/tyl0re">tyl0re</a> commented at <a href="https://github.com/rear/rear/issues/426#issuecomment-58935669">2014-10-13 18:39</a>:<a class="headerlink" href="#tyl0re_commented_at_2014-10-13_1839" title="Permanent link">&para;</a></h4>
<p>Hi Seems Git add Link + Libarys..<br />
I changed it to add the link to $Library instead of die library. So Rear
add both Links and librarys<br />
Can you Test it again? (the new Version)</p>
<h4 id="reiner030_commented_at_2014-10-13_2226"><img src="https://avatars.githubusercontent.com/u/29528?v=4" width="50"><a href="https://github.com/Reiner030">Reiner030</a> commented at <a href="https://github.com/rear/rear/issues/426#issuecomment-58964107">2014-10-13 22:26</a>:<a class="headerlink" href="#reiner030_commented_at_2014-10-13_2226" title="Permanent link">&para;</a></h4>
<p>mmh, sadly there is now something other missing...<br />
When I tried it with your script I got now a backend error:</p>
<pre><code>Start duply v1.8.0, time is 2014-10-13 20:59:44.
Using profile '/etc/duply/rear-test'.
Using installed duplicity version 0.6.18, python 2.7.3, gpg 1.4.12 (Home: ~/.gnupg), awk 'GNU Awk 4.0.1', bash '4.2.37(1)-release (x86_64-pc-linux-gnu)'.
Encryption public key 'ECBEFE03' not found.
[...]
--- Start running command STATUS at 20:59:45.027 ---
Using archive dir: /var/cache/duplicity/duply_rear-test
Using backup name: duply_rear-test
Import of duplicity.backends.gdocsbackend Succeeded
Import of duplicity.backends.giobackend Succeeded
Import of duplicity.backends.u1backend Succeeded
Import of duplicity.backends.imapbackend Succeeded
Import of duplicity.backends.localbackend Succeeded
Import of duplicity.backends.hsibackend Succeeded
Import of duplicity.backends.ftpsbackend Succeeded
Import of duplicity.backends.sshbackend Succeeded
Import of duplicity.backends.tahoebackend Succeeded
Import of duplicity.backends.rsyncbackend Succeeded
Import of duplicity.backends.botobackend Succeeded
Import of duplicity.backends.ftpbackend Succeeded
Import of duplicity.backends.webdavbackend Succeeded
Import of duplicity.backends.cloudfilesbackend Succeeded
ssh: Connected (version 2.0, client OpenSSH_5.5p1)
Using temporary directory /tmp/duplicity-csYsQ0-tempdir
Backend error detail: Traceback (most recent call last):
  File "/sbin/duplicity", line 1404, in &lt;module&gt;
    with_tempdir(main)
  File "/sbin/duplicity", line 1397, in with_tempdir
    fn()
  File "/sbin/duplicity", line 1248, in main
    action = commandline.ProcessCommandLine(sys.argv[1:])
  File "/usr/lib/python2.7/dist-packages/duplicity/commandline.py", line 999, in ProcessCommandLine
    globals.backend = backend.get_backend(args[0])
  File "/usr/lib/python2.7/dist-packages/duplicity/backend.py", line 158, in get_backend
    return _backends[pu.scheme](pu)
  File "/usr/lib/python2.7/dist-packages/duplicity/backends/sshbackend.py", line 140, in __init__
    raise BackendException("ssh connection to %s:%d failed: %s" % (parsed_url.hostname,portnumber,e))
BackendException: ssh connection to 192.168.10.41:22 failed: Unknown server 192.168.10.41

BackendException: ssh connection to 192.168.10.41:22 failed: Unknown server 192.168.10.41
20:59:45.455 Task 'STATUS' failed with exit code '23'.
</code></pre>
<p>I checked dns resolution / ssh connect and they are working normal. (ssh
192.168.10.41) so it must be a missing.library problem of the new ssh
backend of duplicity now...<br />
I check tomorrow strace (downgraded to last version to verify that it
still works with manual copying of</p>
<pre><code>/usr/lib/x86_64-linux-gnu/libcrypto.so.1.0.0
/usr/lib/x86_64-linux-gnu/libssl.so.1.0.0
/usr/lib/x86_64-linux-gnu/librsync.so.1*
</code></pre>
<h4 id="tyl0re_commented_at_2014-10-14_0603"><img src="https://avatars.githubusercontent.com/u/1512325?v=4" width="50"><a href="https://github.com/tyl0re">tyl0re</a> commented at <a href="https://github.com/rear/rear/issues/426#issuecomment-58994165">2014-10-14 06:03</a>:<a class="headerlink" href="#tyl0re_commented_at_2014-10-14_0603" title="Permanent link">&para;</a></h4>
<p>The Old Version has had an bug i misswrote straces instead strace , so
it havent done anythingsince check for binaries hasnt worked.</p>
<p>I think a Library is now added using, somthing that wasnt used before,
where somthing is missing</p>
<p>Mayby some Python Modules are missing. I Added now all Script Strace
finds, mayby you can try it again.</p>
<p>If its not working<br />
Does "duply rear-test status" work?</p>
<p>What does<br />
strace -Ff -e open duply rear-test status|grep -v '= -1'|grep -i
open|grep -v "open resumed"<br />
Shows on your machine you want to restore?</p>
<h4 id="reiner030_commented_at_2014-10-14_1644"><img src="https://avatars.githubusercontent.com/u/29528?v=4" width="50"><a href="https://github.com/Reiner030">Reiner030</a> commented at <a href="https://github.com/rear/rear/issues/426#issuecomment-59076884">2014-10-14 16:44</a>:<a class="headerlink" href="#reiner030_commented_at_2014-10-14_1644" title="Permanent link">&para;</a></h4>
<p>sorry, with last modification from today the script already stuck when
initialzing network:</p>
<pre><code>...
Running 62-routing.sh...
* * * Rescue System is ready * * *
/sbin/rear: line 131:/usr/share/rear/conf/default.conf: No such file or Directory
/sbin/rear: line 138: has_binary: command not found
ERROR: Required program 'pidof' missing, please check your PATH
</code></pre>
<p>I added 2&gt;&amp;1 redirection ;)</p>
<p>First with non-working version:</p>
<pre><code># strace -Ff -e open duply rear-test status 2&gt;&amp;1 |grep -v '= -1'|grep -i open|grep -v "open resumed" &gt; strace.out
</code></pre>
<p><a href="https://gist.github.com/Reiner030/2e5c54994b54e11d22a2#file-strace-output-rear-duply-test">https://gist.github.com/Reiner030/2e5c54994b54e11d22a2#file-strace-output-rear-duply-test</a></p>
<p>Here the deduplicated file listing of failed openings:<br />
<a href="https://gist.github.com/Reiner030/2e5c54994b54e11d22a2#file-gistfile1-txt">https://gist.github.com/Reiner030/2e5c54994b54e11d22a2#file-gistfile1-txt</a></p>
<p>Then I copied these files manually to restore system (ready for all
backends):</p>
<pre><code># scp /usr/lib/x86_64-linux-gnu/{libcrypto.so.1.0.0,libssl.so.1.0.0,librsync.so.1*,libgobject-2.0.so.0*,libgthread-2.0.so.0,libffi.so.5,libgio-2.0.so.0,libgmodule-2.0.so.0}* /usr/lib/libpyglib-2.0-python2.7.so.0* 192.168.10.216:/usr/lib/x86_64-linux-gnu/
</code></pre>
<p>and here duply status works fine.<br />
Sorted unique output gave more then double of files:</p>
<pre><code>RESCUE rear-test:~ # sed -e 's/^.*open("\([^"]*\)".*/\1/' strace.out | sort -u | wc -l
217
RESCUE rear-test:~ # sed -e 's/^.*open("\([^"]*\)".*/\1/' strace-working.out | sort -u | wc -l
503
</code></pre>
<p><a href="https://gist.github.com/Reiner030/05ddefb1a5e5502536ea">https://gist.github.com/Reiner030/05ddefb1a5e5502536ea</a></p>
<p>And following file types:</p>
<pre><code># sed -e 's/^.*open("\([^"]*\)".*/\1/' strace-working.out | xargs file | sed -e "s/.*: *//" -e "s/\`.*'//" | sort | uniq -c 
/etc/magic, 4: Warning: using regular magic file `/usr/share/misc/magic'
      3 ' (No such file or directory)
    239 ASCII text
      5 ASCII text, with very long lines
      4 ISO-8859 text
     53 cannot open  (No such file or directory)
     60 character special
    592 data
      5 directory
     41 empty
      2 sticky directory
    462 symbolic link to
</code></pre>
<p>=&gt; there is no filetype "script" mentioned... because there is no
"#!/usr/bin/python" in first line ...<br />
only ASCII text ...<br />
But on origin host its "C source, ASCII text" / "C++ source, ASCII
text":</p>
<pre><code># strace -Ff -e open duply zzz-puppet-optimus status 2&gt;&amp;1 |grep -v '= -1'|grep -i open|grep -v "open resumed" | sed -e 's/^.*open("\([^"]*\)".*/\1/' | xargs file | sed -e "s/.*: *//" -e "s/\`.*'//" | sort | uniq -c
     30 ASCII text
      5 ASCII text, with very long lines
      3 a /usr/bin/env bash script, ASCII text executable
     29 cannot open  (No such file or directory)
     56 character special
      4 C source, ASCII text
     10 C++ source, ASCII text
    158 data
     12 directory
      2 ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, BuildID[sha1]=0x086c854394888000ac3a2de5452f442db5e83ac5, stripped
      5 ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, BuildID[sha1]=0x18b180f9d8f80887185dc3b54caf44541eaa39b9, stripped
      4 ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, BuildID[sha1]=0x2eb5da4d615f5d47c1e41ee093e49269a007b196, stripped
      2 ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, BuildID[sha1]=0x40af5432efd1777fe16c160143782765a19e3038, stripped
      2 ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, BuildID[sha1]=0x49545971b62531aa2029267ebb86fdb6e5e39eb9, stripped
      2 ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, BuildID[sha1]=0x518025bf8956ab32da0ec4a3f640142fb399c5dd, stripped
      2 ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, BuildID[sha1]=0x65d0d64da20cd3170575f6b6a1a8815aeca7737f, stripped
      4 ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, BuildID[sha1]=0x6c202a7ac89bfdf39da30ecd37df34576caa086d, stripped
      2 ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, BuildID[sha1]=0x71c10e114e06436e3e50505e78a2976768abb6c2, stripped
      4 ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, BuildID[sha1]=0x9055c19c826f2b79ce2abb2da8b96cf67507aa9f, stripped
      2 ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, BuildID[sha1]=0x9413df9bed16b368c276019fed1fe1247042a4e8, stripped
      4 ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, BuildID[sha1]=0x9bd7b6a8658c422f451d0c7dcaa51d29b2ed404a, stripped
      4 ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, BuildID[sha1]=0xabc2e4de6529d462a0d2565ddf51810088afb6da, stripped
      2 ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, BuildID[sha1]=0xb272d3a368a705aee38630dba8ec4bc54ffa7774, stripped
      2 ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, BuildID[sha1]=0xba7ef8fb0542ba4c1b33beef905d0dffdf68b293, stripped
      4 ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, BuildID[sha1]=0xc65cb89065ae412c11a36e57145f205631fd049b, stripped
      2 ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, BuildID[sha1]=0xc81c9169d680b7c1d350329845ffcb7d32ca5fae, stripped
      8 ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, BuildID[sha1]=0xcf2570488221e59ef684033986dd971dc2476737, stripped
      2 ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, BuildID[sha1]=0xd1bf89062b0106793f300596b32c0bcfffd018be, stripped
      2 ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, BuildID[sha1]=0xd6ef69ffdafa45dd4aed4fab13a91e7148e6b90b, stripped
      4 ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, BuildID[sha1]=0xd8ff7e88c133aebce82d00594d7c6a225a2980ac, stripped
      4 ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, BuildID[sha1]=0xee4b6b3f778ee8ab58739c57733e09b17c61f64f, stripped
     37 empty
     15 GPG key public ring
      5 GPG key trust database version 3
      3 ' (No such file or directory)
     75 PDP-11 separate I&amp;D executable not stripped
      1 PEM RSA private key
    365 python 2.7 byte-compiled
    188 Python script, ASCII text executable
      4 Python script, ISO-8859 text executable
      4 setgid directory
      2 sticky directory
    495 symbolic link to 
     18 timezone data, version 2, 1 gmt time flag, 1 std time flag, no leap seconds, no transition times, 1 abbreviation char
</code></pre>
<h4 id="tyl0re_commented_at_2014-10-14_1848"><img src="https://avatars.githubusercontent.com/u/1512325?v=4" width="50"><a href="https://github.com/tyl0re">tyl0re</a> commented at <a href="https://github.com/rear/rear/issues/426#issuecomment-59096124">2014-10-14 18:48</a>:<a class="headerlink" href="#tyl0re_commented_at_2014-10-14_1848" title="Permanent link">&para;</a></h4>
<p>You forgot the readlink<br />
cat strace.out|grep -v '= -1'|grep -i open|grep -v "open resumed" | sed
-e 's/^.<em>open("([^"]</em>)".<em>/\1/' | xargs -n 1 readlink -f |sort
-u|xargs file | sed -e "s/.</em>: <em>//" -e "s/`.</em>'//" | sort | uniq -c<br />
Should show you the right Type of the files</p>
<p>Can you do the strace for the Original System ?<br />
May by something is missing except Library</p>
<p>What does "file /usr/lib/python2.7/textwrap.py" say?</p>
<h4 id="reiner030_commented_at_2014-10-14_1931"><img src="https://avatars.githubusercontent.com/u/29528?v=4" width="50"><a href="https://github.com/Reiner030">Reiner030</a> commented at <a href="https://github.com/rear/rear/issues/426#issuecomment-59102516">2014-10-14 19:31</a>:<a class="headerlink" href="#reiner030_commented_at_2014-10-14_1931" title="Permanent link">&para;</a></h4>
<p>ok, I used only copy&amp;paste from</p>
<blockquote>
<p>What does<br />
strace -Ff -e open duply rear-test status|grep -v '= -1'|grep -i
open|grep -v "open resumed"<br />
Shows on your machine you want to restore?</p>
</blockquote>
<p>here from origin system:</p>
<pre><code># strace -Ff -e open duply rear-test status 2&gt;&amp;1 |grep -v '= -1'|grep -i open|grep -v "open resumed" | sed -e 's/^.*open("\([^"]*\)".*/\1/' | xargs -n 1 readlink -f |sort -u | xargs file  -e elf | sed -e "s/.*: *//" -e "s/\`.*'//" | sort | uniq -c | sort -n
      1 a /usr/bin/env bash script, ASCII text executable
      1 C source, ASCII text
      1 GPG key public ring
      1 GPG key trust database version 3
      1 ' (No such file or directory)
      1 PDP-11 separate I&amp;D executable not stripped
      1 PEM RSA private key
      1 POSIX shell script, ASCII text executable
      1 setgid directory
      1 sticky directory
      1 timezone data, version 2, 1 gmt time flag, 1 std time flag, no leap seconds, no transition times, 1 abbreviation char
      1 UTF-8 Unicode text
      2 ASCII text, with very long lines
      2 Python script, ISO-8859 text executable
      3 character special
      4 data
      4 directory
      4 empty
     16 ASCII text
     20 C++ source, ASCII text
     51 ELF 64-bit LSB shared object, x86-64, version 1 (SYSV)
     56 cannot open  (No such file or directory)
    170 Python script, ASCII text executable
    198 python 2.7 byte-compiled
</code></pre>
<p>ah and:</p>
<pre><code># file /usr/lib/python2.7/textwrap.py
/usr/lib/python2.7/textwrap.py: Python script, ASCII text executable
</code></pre>
<h4 id="tyl0re_commented_at_2014-10-14_2120"><img src="https://avatars.githubusercontent.com/u/1512325?v=4" width="50"><a href="https://github.com/tyl0re">tyl0re</a> commented at <a href="https://github.com/rear/rear/issues/426#issuecomment-59118530">2014-10-14 21:20</a>:<a class="headerlink" href="#tyl0re_commented_at_2014-10-14_2120" title="Permanent link">&para;</a></h4>
<p>Found another Error,.... Its the first time using arrays in shell
scripts.....<br />
Can you try again.<br />
Sorry i cant try it on my System it works....</p>
<h4 id="reiner030_commented_at_2014-10-16_1801"><img src="https://avatars.githubusercontent.com/u/29528?v=4" width="50"><a href="https://github.com/Reiner030">Reiner030</a> commented at <a href="https://github.com/rear/rear/issues/426#issuecomment-59403263">2014-10-16 18:01</a>:<a class="headerlink" href="#reiner030_commented_at_2014-10-16_1801" title="Permanent link">&para;</a></h4>
<p>Hi,<br />
no problem... I have only the disadvantage that i must every time
manually run VMware Sphere Client to start VMs and get into the boot
menu ...</p>
<p>=&gt; I have taken a longer step and created with Virtualbox and Vagrant
a nice testing setup with a found ready-to-use image for it. The
config/scripts I have prepared so that they are basically usable for
multiple platforms/backend for testing.<br />
<a href="https://gist.github.com/Reiner030/4b602289320f3c2ed4e7">https://gist.github.com/Reiner030/4b602289320f3c2ed4e7</a><br />
Perhaps it make sense to offer/put it in a better way into the
repository for testing purposes ?</p>
<p>You need</p>
<ul>
<li>VirtualBox (<a href="http://www.virtualbox.org">www.virtualbox.org</a>)</li>
<li>Vagrant (<a href="http://www.vagrantup.com">www.vagrantup.com</a>)</li>
<li>your ssh pubkey line</li>
<li>one duply ssh backend private ssh key</li>
<li>one "remote" ssh server which let login duply for backing up.</li>
</ul>
<p>My Test VM created</p>
<ul>
<li>70 MB ISO image and</li>
<li>1,2 GB Backup file (because of much needed packages caused by doc
    generation in<br />
    your repository =&gt; setup with $ADD_PACKAGES in script)</li>
</ul>
<p>The installer process have some more problems because of missing
Virtualbox drivers<br />
(=&gt; perhaps another task) but the duply error message is the same as
on my system:</p>
<blockquote>
<p>BackendException: ssh connection to 192.168.10.41:22 failed: Unknown
server 192.168.10.41</p>
</blockquote>
<ul>
<li>1st machine is "backup" which setup duply, rear and made the rear
    backup.</li>
<li>2nd machine "recover" starts with gui mode on so that you can
    manually test the behavior.<br />
    Sadly there seems no option to not provisioning the recover instance
    except calling vagrant directly by
    <code>vagrant up recover --no-provision</code></li>
</ul>
<p>Comments howto provision again and login into VMs within ssh are inside
the script/Vagrantfile.</p>
<p>In the begin of script the git repository and debian mirror and duply
backends modifications can be setup. If the test vm is of interest there
could be added further rear backends, too.</p>
<h4 id="reiner030_commented_at_2014-10-16_1821"><img src="https://avatars.githubusercontent.com/u/29528?v=4" width="50"><a href="https://github.com/Reiner030">Reiner030</a> commented at <a href="https://github.com/rear/rear/issues/426#issuecomment-59406357">2014-10-16 18:21</a>:<a class="headerlink" href="#reiner030_commented_at_2014-10-16_1821" title="Permanent link">&para;</a></h4>
<p>ah, forgotten because for Duply/Duplicity with ssh backend not needed:<br />
Duply has a fetch/restore problem with AWS... which are fixed in newer
versions:<br />
<a href="https://packages.debian.org/jessie/duply">https://packages.debian.org/jessie/duply</a><br />
<a href="https://packages.debian.org/wheezy-backports/duplicity">https://packages.debian.org/wheezy-backports/duplicity</a></p>
<p>In my problematic testsystem I had already installed duply (1.8.0-1)
with "default Wheezy" duplicity.<br />
But the Test VM with duply (1.5.5.5-1) has same problems.</p>
<h4 id="reiner030_commented_at_2014-10-16_1909"><img src="https://avatars.githubusercontent.com/u/29528?v=4" width="50"><a href="https://github.com/Reiner030">Reiner030</a> commented at <a href="https://github.com/rear/rear/issues/426#issuecomment-59413694">2014-10-16 19:09</a>:<a class="headerlink" href="#reiner030_commented_at_2014-10-16_1909" title="Permanent link">&para;</a></h4>
<p>When testing rear/rear.git I found the solution for the "Unknown server"
error...<br />
=&gt; /root/.ssh/known_hosts was not setup / here: not copied to ISO
image ?</p>
<h4 id="gdha_commented_at_2014-10-16_1939"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/426#issuecomment-59418027">2014-10-16 19:39</a>:<a class="headerlink" href="#gdha_commented_at_2014-10-16_1939" title="Permanent link">&para;</a></h4>
<p>interesting way of automating testing. Why don't you write an article
about<br />
it and we will be honoured to link to it from our rear pages.<br />
Gratien</p>
<p>On Thu, Oct 16, 2014 at 9:09 PM, Reiner <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;">&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a>
wrote:</p>
<blockquote>
<p>When testing rear/rear.git I found the solution for the "Unknown
server"<br />
error...<br />
=&gt; /root/.ssh/known_hosts was not setup / here: not copied to ISO
image ?</p>
<p>—<br />
Reply to this email directly or view it on GitHub<br />
<a href="https://github.com/rear/rear/issues/426#issuecomment-59413694">https://github.com/rear/rear/issues/426#issuecomment-59413694</a>.</p>
</blockquote>
<h4 id="reiner030_commented_at_2014-10-16_2105"><img src="https://avatars.githubusercontent.com/u/29528?v=4" width="50"><a href="https://github.com/Reiner030">Reiner030</a> commented at <a href="https://github.com/rear/rear/issues/426#issuecomment-59430548">2014-10-16 21:05</a>:<a class="headerlink" href="#reiner030_commented_at_2014-10-16_2105" title="Permanent link">&para;</a></h4>
<p>Our PHP developer uses this way of local dev stage website testing
(former with puppet and now with salt). The nice thing is that you can
use testing parallel - you need only different folders for each
repository/branch you want to test.</p>
<p>The above error message "Unknown server" is also in the main repository;
so I made a manual workaround for it ... and works now fine... Thanks.
;)</p>
<p>(except the grub/initramfs problem of
<a href="https://github.com/rear/rear/issues/473">https://github.com/rear/rear/issues/473</a>)</p>
<h4 id="tyl0re_commented_at_2014-10-17_0819"><img src="https://avatars.githubusercontent.com/u/1512325?v=4" width="50"><a href="https://github.com/tyl0re">tyl0re</a> commented at <a href="https://github.com/rear/rear/issues/426#issuecomment-59481252">2014-10-17 08:19</a>:<a class="headerlink" href="#tyl0re_commented_at_2014-10-17_0819" title="Permanent link">&para;</a></h4>
<p>Do you have used the newst Version of my script ?, Sould i make a pull
request (When it was working)?</p>
<p>Mayby sou should try<br />
CLONE_USERS=( root)<br />
in the config</p>
<h4 id="gdha_commented_at_2014-10-17_0841"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/426#issuecomment-59484079">2014-10-17 08:41</a>:<a class="headerlink" href="#gdha_commented_at_2014-10-17_0841" title="Permanent link">&para;</a></h4>
<p>I think if you would add in script
<code>./prep/DUPLICITY/default/05_prep_duplicity.sh</code> under <code>COPY_AS_IS</code> the
<code>/root/.ssh</code> that would have all the required keys (maybe to much)?</p>
<h4 id="tyl0re_commented_at_2014-10-17_0910"><img src="https://avatars.githubusercontent.com/u/1512325?v=4" width="50"><a href="https://github.com/tyl0re">tyl0re</a> commented at <a href="https://github.com/rear/rear/issues/426#issuecomment-59487053">2014-10-17 09:10</a>:<a class="headerlink" href="#tyl0re_commented_at_2014-10-17_0910" title="Permanent link">&para;</a></h4>
<p>it could be to much in some siuations. I Use http Upload for the iso. So
the keys would be tranferes unencrypted then,since they are also in
/root/.ssh . Its no Problem for me, but i think there could be an issue
for someone</p>
<h4 id="reiner030_commented_at_2014-10-17_2132"><img src="https://avatars.githubusercontent.com/u/29528?v=4" width="50"><a href="https://github.com/Reiner030">Reiner030</a> commented at <a href="https://github.com/rear/rear/issues/426#issuecomment-59579414">2014-10-17 21:32</a>:<a class="headerlink" href="#reiner030_commented_at_2014-10-17_2132" title="Permanent link">&para;</a></h4>
<p>@tyl0re yes I checked out your repository for my checks, so it works now
nice and can be committed.</p>
<p>@tyl0re / @gdha The user/ssh keys I need for provisioning the restore VM
is the vagrant user.<br />
I would try testing the CLONE_USERS=(vagrant) then for this setup.</p>
<p>But my provisioning script still needs external private duply key/public
ssh line for user/known_hosts for duply because without these files I
can't create the backup itself in the testing machine ;)</p>
<h4 id="reiner030_commented_at_2014-10-20_2319"><img src="https://avatars.githubusercontent.com/u/29528?v=4" width="50"><a href="https://github.com/Reiner030">Reiner030</a> commented at <a href="https://github.com/rear/rear/issues/426#issuecomment-59855885">2014-10-20 23:19</a>:<a class="headerlink" href="#reiner030_commented_at_2014-10-20_2319" title="Permanent link">&para;</a></h4>
<p>ok, with merge this task is completed - thanks (I think only @tyl0re can
close this issue).<br />
I would open another issue for the possible Virtualbox / Vagrant
integration.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2025 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2014-06-15.426.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
