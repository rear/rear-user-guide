<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#1786 Issue closed: SUSE 12.2 ReaR recovery stuck at system layout restoration - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#1786 Issue closed: SUSE 12.2 ReaR recovery stuck at system layout restoration";
        var mkdocs_page_input_path = "issues/2018-04-27.1786.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#1786 Issue closed: SUSE 12.2 ReaR recovery stuck at system layout restoration</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="1786_issue_closed_suse_122_rear_recovery_stuck_at_system_layout_restoration"><a href="https://github.com/rear/rear/issues/1786">#1786 Issue</a> <code>closed</code>: SUSE 12.2 ReaR recovery stuck at system layout restoration<a class="headerlink" href="#1786_issue_closed_suse_122_rear_recovery_stuck_at_system_layout_restoration" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>support / question</code>, <code>won't fix / can't fix / obsolete</code></p>
<h4 id="manums1983_opened_issue_at_2018-04-27_0629"><img src="https://avatars.githubusercontent.com/u/38777867?v=4" width="50"><a href="https://github.com/manums1983">manums1983</a> opened issue at <a href="https://github.com/rear/rear/issues/1786">2018-04-27 06:29</a>:<a class="headerlink" href="#manums1983_opened_issue_at_2018-04-27_0629" title="Permanent link">&para;</a></h4>
<h4 id="relax-and-recover_rear_issue_template">Relax-and-Recover (ReaR) Issue Template<a class="headerlink" href="#relax-and-recover_rear_issue_template" title="Permanent link">&para;</a></h4>
<p>SUSE 12.2 ReaR recovery stuck at system layout restoration<br />
Fill in the following items before submitting a new issue<br />
(quick response is not guaranteed with free support):</p>
<ul>
<li>ReaR version ("/usr/sbin/rear -V"): 2.31</li>
<li>OS version ("cat /etc/rear/os.conf" or "lsb_release -a" or "cat
    /etc/os-release"):<br />
    SUSE 12.2 (SP2) SAP Server</li>
<li>ReaR configuration files ("cat /etc/rear/site.conf" or "cat
    /etc/rear/local.conf"):<br />
    System is not booting up to get local.conf file</li>
<li>System architecture (x86 compatible or POWER and/or what kind of
    virtual machine):<br />
    Inte 64 bit</li>
<li>Are you using BIOS or UEFI or another way to boot?<br />
    UEFI</li>
<li>Brief description of the issue:<br />
    The resrore is stuck at "system layout restoration"</li>
<li>Work-around, if any:</li>
</ul>
<h4 id="gozora_commented_at_2018-04-27_0639"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1786#issuecomment-384879411">2018-04-27 06:39</a>:<a class="headerlink" href="#gozora_commented_at_2018-04-27_0639" title="Permanent link">&para;</a></h4>
<p>@manums1983 I'm afraid that from such vague problem description, none
will be actually able to help you.<br />
I'm suspecting that you are doing <code>rear recover</code>.<br />
Can you relaunch with <code>rear -d -D recover</code> and provide us with log files
from <em>/var/log/rear</em> ?</p>
<p>Thanks</p>
<p>V.</p>
<h4 id="manums1983_commented_at_2018-04-27_0646"><img src="https://avatars.githubusercontent.com/u/38777867?v=4" width="50"><a href="https://github.com/manums1983">manums1983</a> commented at <a href="https://github.com/rear/rear/issues/1786#issuecomment-384880791">2018-04-27 06:46</a>:<a class="headerlink" href="#manums1983_commented_at_2018-04-27_0646" title="Permanent link">&para;</a></h4>
<p>Hi Vladimir,<br />
Thank you for your response, ok I will do the recovery using the command
“rear -d -D recover” . Now I am able to login to the server. Please find
the details requested below. I am using a file based backup to local
mount point “/mnt/backup”. I noticed this /mnt/backup is mounted in a
btrfs file system. Now I deleted the volume and recreated with ext4 file
system. Running the backup again now after this I will do a restore
again.</p>
<p>################local.conf
#################################################</p>
<h1 id="begin_example_setup_for_sle12-sp2_with_default_btrfs_subvolumes">Begin example setup for SLE12-SP2 with default btrfs subvolumes.<a class="headerlink" href="#begin_example_setup_for_sle12-sp2_with_default_btrfs_subvolumes" title="Permanent link">&para;</a></h1>
<h1 id="since_sle12-sp1_what_is_mounted_at_is_a_btrfs_snapshot_subvolume">Since SLE12-SP1 what is mounted at '/' is a btrfs snapshot subvolume<a class="headerlink" href="#since_sle12-sp1_what_is_mounted_at_is_a_btrfs_snapshot_subvolume" title="Permanent link">&para;</a></h1>
<h1 id="see_httpsgithubcomrearrearissues556">see <a href="https://github.com/rear/rear/issues/556">https://github.com/rear/rear/issues/556</a><a class="headerlink" href="#see_httpsgithubcomrearrearissues556" title="Permanent link">&para;</a></h1>
<h1 id="and_since_sle12-sp2_btrfs_quota_via_snapper_setup-quota_is_needed">and since SLE12-SP2 btrfs quota via "snapper setup-quota" is needed<a class="headerlink" href="#and_since_sle12-sp2_btrfs_quota_via_snapper_setup-quota_is_needed" title="Permanent link">&para;</a></h1>
<h1 id="see_httpsgithubcomrearrearissues999">see <a href="https://github.com/rear/rear/issues/999">https://github.com/rear/rear/issues/999</a><a class="headerlink" href="#see_httpsgithubcomrearrearissues999" title="Permanent link">&para;</a></h1>
<h1 id="you_must_adapt_yournfsserverippathtoyourrearbackup_at_backup_url">You must adapt "your.NFS.server.IP/path/to/your/rear/backup" at BACKUP_URL.<a class="headerlink" href="#you_must_adapt_yournfsserverippathtoyourrearbackup_at_backup_url" title="Permanent link">&para;</a></h1>
<h1 id="you_must_decide_whether_or_not_you_want_to_have_home_in_the_backup">You must decide whether or not you want to have /home/* in the backup.<a class="headerlink" href="#you_must_decide_whether_or_not_you_want_to_have_home_in_the_backup" title="Permanent link">&para;</a></h1>
<h1 id="it_depends_on_the_size_of_your_harddisk_whether_or_not_home_is_by_default">It depends on the size of your harddisk whether or not /home is by default<a class="headerlink" href="#it_depends_on_the_size_of_your_harddisk_whether_or_not_home_is_by_default" title="Permanent link">&para;</a></h1>
<h1 id="a_btrfs_subvolume_or_a_separated_xfs_filesystem_on_a_separated_partition">a btrfs subvolume or a separated xfs filesystem on a separated partition.<a class="headerlink" href="#a_btrfs_subvolume_or_a_separated_xfs_filesystem_on_a_separated_partition" title="Permanent link">&para;</a></h1>
<h1 id="you_may_activate_ssh_root_password_and_adapt_the_password_on_the_rear_recovery_system">You may activate SSH_ROOT_PASSWORD and adapt the "password_on_the_rear_recovery_system".<a class="headerlink" href="#you_may_activate_ssh_root_password_and_adapt_the_password_on_the_rear_recovery_system" title="Permanent link">&para;</a></h1>
<h1 id="for_basic_information_see_the_sle12-sp2_manuals">For basic information see the SLE12-SP2 manuals.<a class="headerlink" href="#for_basic_information_see_the_sle12-sp2_manuals" title="Permanent link">&para;</a></h1>
<h1 id="also_see_the_support_database_article_sdbdisaster_recovery">Also see the support database article "SDB:Disaster Recovery"<a class="headerlink" href="#also_see_the_support_database_article_sdbdisaster_recovery" title="Permanent link">&para;</a></h1>
<h1 id="at_httpenopensuseorgsdbdisaster_recovery">at <a href="http://en.opensuse.org/SDB:Disaster_Recovery">http://en.opensuse.org/SDB:Disaster_Recovery</a><a class="headerlink" href="#at_httpenopensuseorgsdbdisaster_recovery" title="Permanent link">&para;</a></h1>
<h1 id="in_particular_note">In particular note:<a class="headerlink" href="#in_particular_note" title="Permanent link">&para;</a></h1>
<h1 id="there_is_no_such_thing_as_a_disaster_recovery_solution_that_just_works">There is no such thing as a disaster recovery solution that "just works".<a class="headerlink" href="#there_is_no_such_thing_as_a_disaster_recovery_solution_that_just_works" title="Permanent link">&para;</a></h1>
<h1 id="regarding_btrfs_snapshots">Regarding btrfs snapshots:<a class="headerlink" href="#regarding_btrfs_snapshots" title="Permanent link">&para;</a></h1>
<h1 id="recovery_of_btrfs_snapshot_subvolumes_is_not_possible">Recovery of btrfs snapshot subvolumes is not possible.<a class="headerlink" href="#recovery_of_btrfs_snapshot_subvolumes_is_not_possible" title="Permanent link">&para;</a></h1>
<h1 id="only_recovery_of_normal_btrfs_subvolumes_is_possible">Only recovery of "normal" btrfs subvolumes is possible.<a class="headerlink" href="#only_recovery_of_normal_btrfs_subvolumes_is_possible" title="Permanent link">&para;</a></h1>
<h1 id="on_sle12-sp1_and_sp2_the_only_exception_is_the_btrfs_snapshot_subvolume">On SLE12-SP1 and SP2 the only exception is the btrfs snapshot subvolume<a class="headerlink" href="#on_sle12-sp1_and_sp2_the_only_exception_is_the_btrfs_snapshot_subvolume" title="Permanent link">&para;</a></h1>
<h1 id="that_is_mounted_at_but_that_one_is_not_recreated_but_instead">that is mounted at '/' but that one is not recreated but instead<a class="headerlink" href="#that_is_mounted_at_but_that_one_is_not_recreated_but_instead" title="Permanent link">&para;</a></h1>
<h1 id="it_is_created_anew_from_scratch_during_the_recovery_installation_with_the">it is created anew from scratch during the recovery installation with the<a class="headerlink" href="#it_is_created_anew_from_scratch_during_the_recovery_installation_with_the" title="Permanent link">&para;</a></h1>
<h1 id="default_first_btrfs_snapper_snapshot_subvolume_path_snapshots1snapshot">default first btrfs snapper snapshot subvolume path "@/.snapshots/1/snapshot"<a class="headerlink" href="#default_first_btrfs_snapper_snapshot_subvolume_path_snapshots1snapshot" title="Permanent link">&para;</a></h1>
<h1 id="by_the_suse_tool_installation-helper_--step_1_cf_below">by the SUSE tool "installation-helper --step 1" (cf. below).<a class="headerlink" href="#by_the_suse_tool_installation-helper_--step_1_cf_below" title="Permanent link">&para;</a></h1>
<h1 id="other_snapshots_like_snapshots234snapshot_are_not_recreated">Other snapshots like "@/.snapshots/234/snapshot" are not recreated.<a class="headerlink" href="#other_snapshots_like_snapshots234snapshot_are_not_recreated" title="Permanent link">&para;</a></h1>
<h1 id="create_rear_recovery_system_as_iso_image">Create rear recovery system as ISO image:<a class="headerlink" href="#create_rear_recovery_system_as_iso_image" title="Permanent link">&para;</a></h1>
<p>OUTPUT=ISO</p>
<h1 id="store_the_backup_file_via_nfs_on_a_nfs_server">Store the backup file via NFS on a NFS server:<a class="headerlink" href="#store_the_backup_file_via_nfs_on_a_nfs_server" title="Permanent link">&para;</a></h1>
<p>BACKUP=NETFS</p>
<h1 id="backup_options_variable_contains_the_nfs_mount_options_and">BACKUP_OPTIONS variable contains the NFS mount options and<a class="headerlink" href="#backup_options_variable_contains_the_nfs_mount_options_and" title="Permanent link">&para;</a></h1>
<h1 id="with_mount_-o_nolock_no_rpcstatd_plus_rpcbind_are_needed">with 'mount -o nolock' no rpc.statd (plus rpcbind) are needed:<a class="headerlink" href="#with_mount_-o_nolock_no_rpcstatd_plus_rpcbind_are_needed" title="Permanent link">&para;</a></h1>
<p>BACKUP_OPTIONS="nfsvers=3,nolock"</p>
<h1 id="if_the_nfs_server_is_not_an_ip_address_but_a_hostname">If the NFS server is not an IP address but a hostname,<a class="headerlink" href="#if_the_nfs_server_is_not_an_ip_address_but_a_hostname" title="Permanent link">&para;</a></h1>
<h1 id="dns_must_work_in_the_rear_recovery_system_when_the_backup_is_restored">DNS must work in the rear recovery system when the backup is restored.<a class="headerlink" href="#dns_must_work_in_the_rear_recovery_system_when_the_backup_is_restored" title="Permanent link">&para;</a></h1>
<p>BACKUP_URL=file:///mnt/backup</p>
<h1 id="keep_an_older_copy_of_the_backup_in_a_hostnameold_directory">Keep an older copy of the backup in a HOSTNAME.old directory<a class="headerlink" href="#keep_an_older_copy_of_the_backup_in_a_hostnameold_directory" title="Permanent link">&para;</a></h1>
<h1 id="provided_there_is_no_lockfile_in_the_hostname_directory">provided there is no '.lockfile' in the HOSTNAME directory:<a class="headerlink" href="#provided_there_is_no_lockfile_in_the_hostname_directory" title="Permanent link">&para;</a></h1>
<p>NETFS_KEEP_OLD_BACKUP_COPY=10</p>
<h1 id="have_all_modules_of_the_original_system_in_the_recovery_system_with_the">Have all modules of the original system in the recovery system with the<a class="headerlink" href="#have_all_modules_of_the_original_system_in_the_recovery_system_with_the" title="Permanent link">&para;</a></h1>
<h1 id="same_module_loading_ordering_as_in_the_original_system_by_using_the_output_of">same module loading ordering as in the original system by using the output of<a class="headerlink" href="#same_module_loading_ordering_as_in_the_original_system_by_using_the_output_of" title="Permanent link">&para;</a></h1>
<h1 id="lsmod_tail_-n_2_cut_-d_-f_1_tac_tr_-s_space">lsmod | tail -n +2 | cut -d ' ' -f 1 | tac | tr -s '[:space:]' ' '<a class="headerlink" href="#lsmod_tail_-n_2_cut_-d_-f_1_tac_tr_-s_space" title="Permanent link">&para;</a></h1>
<h1 id="as_value_for_modules_load_cf_httpsgithubcomrearrearissues626">as value for MODULES_LOAD (cf. <a href="https://github.com/rear/rear/issues/626">https://github.com/rear/rear/issues/626</a>):<a class="headerlink" href="#as_value_for_modules_load_cf_httpsgithubcomrearrearissues626" title="Permanent link">&para;</a></h1>
<p>#MODULES_LOAD=( )</p>
<h1 id="on_sle12-sp1_and_sp2_with_default_btrfs_subvolumes_what_is_mounted_at_is_a_btrfs_snapshot_subvolume">On SLE12-SP1 and SP2 with default btrfs subvolumes what is mounted at '/' is a btrfs snapshot subvolume<a class="headerlink" href="#on_sle12-sp1_and_sp2_with_default_btrfs_subvolumes_what_is_mounted_at_is_a_btrfs_snapshot_subvolume" title="Permanent link">&para;</a></h1>
<h1 id="that_is_controlled_by_snapper_so_that_snapper_is_needed_in_the_recovery_system">that is controlled by snapper so that snapper is needed in the recovery system.<a class="headerlink" href="#that_is_controlled_by_snapper_so_that_snapper_is_needed_in_the_recovery_system" title="Permanent link">&para;</a></h1>
<h1 id="in_sle12-sp1_and_sp2_some_btrfs_subvolume_directories_varlibpgsql_varliblibvirtimages_varlibmariadb">In SLE12-SP1 and SP2 some btrfs subvolume directories (/var/lib/pgsql /var/lib/libvirt/images /var/lib/mariadb)<a class="headerlink" href="#in_sle12-sp1_and_sp2_some_btrfs_subvolume_directories_varlibpgsql_varliblibvirtimages_varlibmariadb" title="Permanent link">&para;</a></h1>
<h1 id="have_the_no_copy_on_write_c_file_attribute_set_so_that_chattr_is_required_in_the_recovery_system">have the "no copy on write (C)" file attribute set so that chattr is required in the recovery system<a class="headerlink" href="#have_the_no_copy_on_write_c_file_attribute_set_so_that_chattr_is_required_in_the_recovery_system" title="Permanent link">&para;</a></h1>
<h1 id="and_accordingly_also_lsattr_is_useful_to_have_in_the_recovery_system_but_not_strictly_required">and accordingly also lsattr is useful to have in the recovery system (but not strictly required):<a class="headerlink" href="#and_accordingly_also_lsattr_is_useful_to_have_in_the_recovery_system_but_not_strictly_required" title="Permanent link">&para;</a></h1>
<p>REQUIRED_PROGS=( "${REQUIRED_PROGS[@]}" snapper chattr lsattr )</p>
<h1 id="snapper_setup_by_the_recovery_system_uses_usrlibsnapperinstallation-helper">Snapper setup by the recovery system uses /usr/lib/snapper/installation-helper<a class="headerlink" href="#snapper_setup_by_the_recovery_system_uses_usrlibsnapperinstallation-helper" title="Permanent link">&para;</a></h1>
<h1 id="that_is_linked_to_all_libraries_where_snapper_is_linked_to">that is linked to all libraries where snapper is linked to<a class="headerlink" href="#that_is_linked_to_all_libraries_where_snapper_is_linked_to" title="Permanent link">&para;</a></h1>
<h1 id="except_libdbus_that_is_only_needed_by_snapper">(except libdbus that is only needed by snapper).<a class="headerlink" href="#except_libdbus_that_is_only_needed_by_snapper" title="Permanent link">&para;</a></h1>
<h1 id="installation-helper_--step_1_creates_a_snapper_config_based_on_etcsnapperconfig-templatesdefault">"installation-helper --step 1" creates a snapper config based on /etc/snapper/config-templates/default<a class="headerlink" href="#installation-helper_--step_1_creates_a_snapper_config_based_on_etcsnapperconfig-templatesdefault" title="Permanent link">&para;</a></h1>
<p>COPY_AS_IS=( "${COPY_AS_IS[@]}"
/usr/lib/snapper/installation-helper
/etc/snapper/config-templates/default )</p>
<h1 id="files_in_btrfs_subvolumes_are_excluded_by_tar_--one-file-system">Files in btrfs subvolumes are excluded by 'tar --one-file-system'<a class="headerlink" href="#files_in_btrfs_subvolumes_are_excluded_by_tar_--one-file-system" title="Permanent link">&para;</a></h1>
<h1 id="so_that_such_files_must_be_explicitly_included_to_be_in_the_backup">so that such files must be explicitly included to be in the backup.<a class="headerlink" href="#so_that_such_files_must_be_explicitly_included_to_be_in_the_backup" title="Permanent link">&para;</a></h1>
<h1 id="files_in_the_following_sle12-sp2_default_btrfs_subvolumes_are">Files in the following SLE12-SP2 default btrfs subvolumes are<a class="headerlink" href="#files_in_the_following_sle12-sp2_default_btrfs_subvolumes_are" title="Permanent link">&para;</a></h1>
<h1 id="in_the_below_example_not_included_to_be_in_the_backup">in the below example not included to be in the backup<a class="headerlink" href="#in_the_below_example_not_included_to_be_in_the_backup" title="Permanent link">&para;</a></h1>
<h1 id="snapshots_varcrash">/.snapshots /var/crash<a class="headerlink" href="#snapshots_varcrash" title="Permanent link">&para;</a></h1>
<p>BACKUP_PROG_EXCLUDE=( "${BACKUP_PROG_EXCLUDE[@]}" "/media/backup"
"/var/crash" "/export/archive" "/home/oracle" "/oracle" "/home/oraprd"
"/export/Doc" "/usr/sap/hostctrl" "/sapmnt/PRD" "/usr/sap/SMD"
"/usr/sap/tmp" "/usr/sap/PRD" "/sapmnt/PRD/exe" "/oracle/stage"
"/oracle/PRD" "/oracle/client" "/oracle/oraprd" "/oracle/PRD/12102"
"/oracle/PRD/origlogA" "/oracle/PRD/mirrlogA" "/oracle/PRD/mirrlogB"
"/oracle/PRD/origlogB" "/oracle/PRD/sapreorg" "/oracle/PRD/sapdata3"
"/oracle/PRD/oraarch" "/oracle/PRD/sapdata4" "/oracle/PRD/sapdata6"
"/oracle/PRD/sapdata2" "/oracle/PRD/sapdata1" "/oracle/PRD/sapdata5"
"/mnt/backup" )<br />
EXCLUDE_RECREATE=( "${EXCLUDE_RECREATE[@]}" "fs:/media/backup"
"fs:/var/crash" "fs:/export/archive" "fs:/home/oracle" "fs:/oracle"
"fs:/home/oraprd" "fs:/export/Doc" "fs:/usr/sap/hostctrl"
"fs:/sapmnt/PRD" "fs:/usr/sap/SMD" "fs:/usr/sap/tmp" "fs:/usr/sap/PRD"
"fs:/sapmnt/PRD/exe" "fs:/oracle/stage" "fs:/oracle/PRD"
"fs:/oracle/client" "fs:/oracle/oraprd" "fs:/oracle/PRD/12102"
"fs:/oracle/PRD/origlogA" "fs:/oracle/PRD/mirrlogA"
"fs:/oracle/PRD/mirrlogB" "fs:/oracle/PRD/origlogB"
"fs:/oracle/PRD/sapreorg" "fs:/oracle/PRD/sapdata3"
"fs:/oracle/PRD/oraarch" "fs:/oracle/PRD/sapdata4"
"fs:/oracle/PRD/sapdata6" "fs:/oracle/PRD/sapdata2"
"fs:/oracle/PRD/sapdata1" "fs:/oracle/PRD/sapdata5" "fs:/mnt/backup" )</p>
<h1 id="but_files_in_home_are_included_to_be_in_the_backup">but files in /home are included to be in the backup.<a class="headerlink" href="#but_files_in_home_are_included_to_be_in_the_backup" title="Permanent link">&para;</a></h1>
<h1 id="you_may_use_a_command_like">You may use a command like<a class="headerlink" href="#you_may_use_a_command_like" title="Permanent link">&para;</a></h1>
<h1 id="findmnt_-n_-r_-o_target_-t_btrfs_grep_-v_egrep_-v_snapshotscrash">findmnt -n -r -o TARGET -t btrfs | grep -v '^/$' | egrep -v 'snapshots|crash'<a class="headerlink" href="#findmnt_-n_-r_-o_target_-t_btrfs_grep_-v_egrep_-v_snapshotscrash" title="Permanent link">&para;</a></h1>
<h1 id="to_generate_the_values">to generate the values:<a class="headerlink" href="#to_generate_the_values" title="Permanent link">&para;</a></h1>
<p>BACKUP_PROG_INCLUDE=( /var/cache /var/lib/mailman /var/tmp
/var/lib/pgsql /usr/local /opt /var/lib/libvirt/images
/boot/grub2/i386-pc /var/opt /srv /boot/grub2/x86_64-efi
/var/lib/mariadb /var/spool /var/lib/mysql /tmp /home /var/log
/var/lib/named /var/lib/machines )</p>
<h1 id="the_following_post_recovery_script_implements_during_rear_recover">The following POST_RECOVERY_SCRIPT implements during "rear recover"<a class="headerlink" href="#the_following_post_recovery_script_implements_during_rear_recover" title="Permanent link">&para;</a></h1>
<h1 id="btrfs_quota_setup_for_snapper_if_that_is_used_in_the_original_system">btrfs quota setup for snapper if that is used in the original system:<a class="headerlink" href="#btrfs_quota_setup_for_snapper_if_that_is_used_in_the_original_system" title="Permanent link">&para;</a></h1>
<p>POST_RECOVERY_SCRIPT=( 'if snapper --no-dbus -r $TARGET_FS_ROOT
get-config | grep -q "^QGROUP.*[0-9]/[0-9]" ; then snapper
--no-dbus -r $TARGET_FS_ROOT set-config QGROUP= ; snapper --no-dbus -r
$TARGET_FS_ROOT setup-quota &amp;&amp; echo snapper setup-quota done || echo
snapper setup-quota failed ; else echo snapper setup-quota not used ;
fi' )</p>
<h1 id="this_option_defines_a_root_password_to_allow_ssh_connection">This option defines a root password to allow SSH connection<a class="headerlink" href="#this_option_defines_a_root_password_to_allow_ssh_connection" title="Permanent link">&para;</a></h1>
<h1 id="whithout_a_publicprivate_key_pair">whithout a public/private key pair<a class="headerlink" href="#whithout_a_publicprivate_key_pair" title="Permanent link">&para;</a></h1>
<p>#SSH_ROOT_PASSWORD="password_on_the_rear_recovery_system"</p>
<h1 id="let_the_rear_recovery_system_run_dhclient_to_get_an_ip_address">Let the rear recovery system run dhclient to get an IP address<a class="headerlink" href="#let_the_rear_recovery_system_run_dhclient_to_get_an_ip_address" title="Permanent link">&para;</a></h1>
<h1 id="instead_of_using_the_same_ip_address_as_the_original_system">instead of using the same IP address as the original system:<a class="headerlink" href="#instead_of_using_the_same_ip_address_as_the_original_system" title="Permanent link">&para;</a></h1>
<p>#USE_DHCLIENT="yes"</p>
<h1 id="end_example_setup_for_sle12-sp2_with_default_btrfs_subvolumes">End example setup for SLE12-SP2 with default btrfs subvolumes.<a class="headerlink" href="#end_example_setup_for_sle12-sp2_with_default_btrfs_subvolumes" title="Permanent link">&para;</a></h1>
<p>#########################################################################<br />
NAME="SLES"<br />
VERSION="12-SP2"<br />
VERSION_ID="12.2"<br />
PRETTY_NAME="SUSE Linux Enterprise Server 12 SP2"<br />
ID="sles"<br />
ANSI_COLOR="0;32"<br />
CPE_NAME="cpe:/o:suse:sles:12:sp2"</p>
<p>###################################################<br />
Linux GESPRD1 4.4.103-92.56-default #1 SMP Wed Dec 27 16:24:31 UTC 2017
(2fd2155) x86_64 x86_64 x86_64 GNU/Linux</p>
<p>#######################################################<br />
Relax-and-Recover 2.3-git.0.dd982eb.unknown / 2018-04-16<br />
#################################################</p>
<p>Thanks &amp; Regards<br />
Manu MS<br />
Technology Consultant<br />
HPE Pointnext<br />
Mobile: +6591747535<br />
Email :
<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#109;&#97;&#110;&#117;&#46;&#109;&#115;&#64;&#104;&#112;&#101;&#46;&#99;&#111;&#109;">&#109;&#97;&#110;&#117;&#46;&#109;&#115;&#64;&#104;&#112;&#101;&#46;&#99;&#111;&#109;</a><a href="mailto:manu.ms@hpe.com">mailto:manu.ms@hpe.com</a></p>
<p>From: Vladimir Gozora [mailto:<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;">&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a>]<br />
Sent: Friday, April 27, 2018 2:40 PM<br />
To: rear/rear <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#114;&#101;&#97;&#114;&#64;&#110;&#111;&#114;&#101;&#112;&#108;&#121;&#46;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;">&#114;&#101;&#97;&#114;&#64;&#110;&#111;&#114;&#101;&#112;&#108;&#121;&#46;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a><br />
Cc: MOHANAN SATHYKUMARI, MANU <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#109;&#97;&#110;&#117;&#46;&#109;&#111;&#104;&#97;&#110;&#97;&#110;&#45;&#115;&#97;&#116;&#104;&#121;&#107;&#117;&#109;&#97;&#114;&#105;&#64;&#104;&#112;&#101;&#46;&#99;&#111;&#109;">&#109;&#97;&#110;&#117;&#46;&#109;&#111;&#104;&#97;&#110;&#97;&#110;&#45;&#115;&#97;&#116;&#104;&#121;&#107;&#117;&#109;&#97;&#114;&#105;&#64;&#104;&#112;&#101;&#46;&#99;&#111;&#109;</a>;
Mention <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#109;&#101;&#110;&#116;&#105;&#111;&#110;&#64;&#110;&#111;&#114;&#101;&#112;&#108;&#121;&#46;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;">&#109;&#101;&#110;&#116;&#105;&#111;&#110;&#64;&#110;&#111;&#114;&#101;&#112;&#108;&#121;&#46;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a><br />
Subject: Re: [rear/rear] SUSE 12.2 ReaR recovery stuck at system
layout restoration (#1786)</p>
<p>@manums1983<a href="https://github.com/manums1983">https://github.com/manums1983</a>
I'm afraid that from such vague problem description, none will be
actually able to help you.<br />
I'm suspecting that you are doing rear recover.<br />
Can you relaunch with rear -d -D recover and provide us with log files
from /var/log/rear ?</p>
<p>Thanks</p>
<p>V.</p>
<p>—<br />
You are receiving this because you were mentioned.<br />
Reply to this email directly, view it on
GitHub<a href="https://github.com/rear/rear/issues/1786#issuecomment-384879411">https://github.com/rear/rear/issues/1786#issuecomment-384879411</a>,
or mute the
thread<a href="https://github.com/notifications/unsubscribe-auth/Ak-0Cy7gPNKA1CrLSYA4ajGr7wbFQjftks5tsr0tgaJpZM4Tp12D">https://github.com/notifications/unsubscribe-auth/Ak-0Cy7gPNKA1CrLSYA4ajGr7wbFQjftks5tsr0tgaJpZM4Tp12D</a>.</p>
<h4 id="gozora_commented_at_2018-04-27_0713"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1786#issuecomment-384885977">2018-04-27 07:13</a>:<a class="headerlink" href="#gozora_commented_at_2018-04-27_0713" title="Permanent link">&para;</a></h4>
<p>My humble recommendation would be "Do not use backup to local filesystem
(file://) until you are 100% sure what you are doing and what the
implications are". Try to go with <em>nfs://</em> or <em>smb://</em> for the start.</p>
<p>V.</p>
<h4 id="manums1983_commented_at_2018-04-27_0801"><img src="https://avatars.githubusercontent.com/u/38777867?v=4" width="50"><a href="https://github.com/manums1983">manums1983</a> commented at <a href="https://github.com/rear/rear/issues/1786#issuecomment-384896323">2018-04-27 08:01</a>:<a class="headerlink" href="#manums1983_commented_at_2018-04-27_0801" title="Permanent link">&para;</a></h4>
<p>HI Vladimir,<br />
Thank for the information about the file based backup implications. We
have tested SUSE 12.2 on another server using file based backup and
restore it works fine which is on hardware HPE GEN9 DL380. Since we do
not have an NFS server we need to use file based backup and recovery.</p>
<p>Current hardware is HPE GEN9 DL 580, it is a SAP server. Started the
restore with command “rear -d -D recover” still it is stuck at “Start
System Layout Restoration” I have attached some screenshots and backup
logs. Please let know what would be causing this issue.</p>
<p>How to stop the restore. It is in hung state.</p>
<p>Thanks &amp; Regards<br />
Manu MS<br />
From: Vladimir Gozora [mailto:<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;">&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a>]<br />
Sent: Friday, April 27, 2018 3:13 PM<br />
To: rear/rear <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#114;&#101;&#97;&#114;&#64;&#110;&#111;&#114;&#101;&#112;&#108;&#121;&#46;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;">&#114;&#101;&#97;&#114;&#64;&#110;&#111;&#114;&#101;&#112;&#108;&#121;&#46;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a><br />
Cc: MOHANAN SATHYKUMARI, MANU <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#109;&#97;&#110;&#117;&#46;&#109;&#111;&#104;&#97;&#110;&#97;&#110;&#45;&#115;&#97;&#116;&#104;&#121;&#107;&#117;&#109;&#97;&#114;&#105;&#64;&#104;&#112;&#101;&#46;&#99;&#111;&#109;">&#109;&#97;&#110;&#117;&#46;&#109;&#111;&#104;&#97;&#110;&#97;&#110;&#45;&#115;&#97;&#116;&#104;&#121;&#107;&#117;&#109;&#97;&#114;&#105;&#64;&#104;&#112;&#101;&#46;&#99;&#111;&#109;</a>;
Mention <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#109;&#101;&#110;&#116;&#105;&#111;&#110;&#64;&#110;&#111;&#114;&#101;&#112;&#108;&#121;&#46;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;">&#109;&#101;&#110;&#116;&#105;&#111;&#110;&#64;&#110;&#111;&#114;&#101;&#112;&#108;&#121;&#46;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a><br />
Subject: Re: [rear/rear] SUSE 12.2 ReaR recovery stuck at system
layout restoration (#1786)</p>
<p>My humble recommendation would be "Do not use backup to local filesystem
(file://<a href="file:///\">file:///\\</a>) until you are 100% sure what you are
doing and what the implications are". Try to go with nfs:// or smb://
for the start.</p>
<p>V.</p>
<p>—<br />
You are receiving this because you were mentioned.<br />
Reply to this email directly, view it on
GitHub<a href="https://github.com/rear/rear/issues/1786#issuecomment-384885977">https://github.com/rear/rear/issues/1786#issuecomment-384885977</a>,
or mute the
thread<a href="https://github.com/notifications/unsubscribe-auth/Ak-0CwALFVE43y4jkbg49KH5Ye03wpNHks5tssUKgaJpZM4Tp12D">https://github.com/notifications/unsubscribe-auth/Ak-0CwALFVE43y4jkbg49KH5Ye03wpNHks5tssUKgaJpZM4Tp12D</a>.</p>
<h4 id="manums1983_commented_at_2018-04-27_0807"><img src="https://avatars.githubusercontent.com/u/38777867?v=4" width="50"><a href="https://github.com/manums1983">manums1983</a> commented at <a href="https://github.com/rear/rear/issues/1786#issuecomment-384897565">2018-04-27 08:07</a>:<a class="headerlink" href="#manums1983_commented_at_2018-04-27_0807" title="Permanent link">&para;</a></h4>
<p><a href="https://github.com/rear/rear/files/1954287/rear.case.log.docx">rear case log
.docx</a><br />
Can copy the log form iLO so attached the screenshots.</p>
<h4 id="manums1983_commented_at_2018-04-27_0854"><img src="https://avatars.githubusercontent.com/u/38777867?v=4" width="50"><a href="https://github.com/manums1983">manums1983</a> commented at <a href="https://github.com/rear/rear/issues/1786#issuecomment-384909027">2018-04-27 08:54</a>:<a class="headerlink" href="#manums1983_commented_at_2018-04-27_0854" title="Permanent link">&para;</a></h4>
<p>I just noticed the /tmp directory got full. /tmp is only 10 GB. Is there
a way i can point rear log to a different directory?</p>
<h4 id="jsmeix_commented_at_2018-04-27_0855"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1786#issuecomment-384909383">2018-04-27 08:55</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-04-27_0855" title="Permanent link">&para;</a></h4>
<p>@manums1983<br />
ReaR is not something where you can "just simply make settings"<br />
what might look to you as if it works. For example<br />
NETFS_KEEP_OLD_BACKUP_COPY=10<br />
does not work this way.<br />
When you use ReaR you need to carefully read the documentation<br />
in particular read default.conf for each config variable and often<br />
you may even have a look at the scripts to really understand<br />
what a particular setting actually does.<br />
In general see<br />
<a href="https://en.opensuse.org/SDB:Disaster_Recovery">https://en.opensuse.org/SDB:Disaster_Recovery</a></p>
<p>I will not even try to read any kind of "proprietary" file format like
doc or docx<br />
(even if it is possible with huge deskop applications like
LibreOffice).<br />
Please provide ReaR's plain text debug log file completely as is.<br />
Usually screenshots won't help because plain error messages<br />
won't tell us the root cause.<br />
Only the ReaR debug log file may tell the root cause.</p>
<p>FYI:<br />
Your TMPDIR issue is explained in default.conf.</p>
<h4 id="jsmeix_commented_at_2018-04-27_0919"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1786#issuecomment-384915337">2018-04-27 09:19</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-04-27_0919" title="Permanent link">&para;</a></h4>
<p>@manums1983</p>
<p>FYI:<br />
For me with a SLES12-SP3 default system (with its default btrfs
structure)<br />
on a QEMU/KVM virtual machine with two virtual harddisks<br />
a 20 GiB sda for the system plus a 2 GiB sdb for the backup<br />
the following /etc/rear/local.conf works:</p>
<pre>
OUTPUT=ISO
BACKUP=NETFS
BACKUP_OPTIONS="nfsvers=3,nolock"
BACKUP_URL=file:///mnt/sdb1
OUTPUT_URL=nfs://10.160.4.244/nfs
REQUIRED_PROGS=( "${REQUIRED_PROGS[@]}" snapper chattr lsattr )
COPY_AS_IS=( "${COPY_AS_IS[@]}" /usr/lib/snapper/installation-helper /etc/snapper/config-templates/default )
BACKUP_PROG_INCLUDE=( /srv /var/lib/mailman /tmp /var/lib/libvirt/images /var/opt /var/log /boot/grub2/i386-pc /var/lib/mysql /var/tmp /opt /boot/grub2/x86_64-efi /var/spool /var/lib/pgsql /var/lib/mariadb /usr/local /home /var/lib/machines /var/lib/named /var/cache )
POST_RECOVERY_SCRIPT=( 'if snapper --no-dbus -r $TARGET_FS_ROOT get-config | grep -q "^QGROUP.*[0-9]/[0-9]" ; then snapper --no-dbus -r $TARGET_FS_ROOT set-config QGROUP= ; snapper --no-dbus -r $TARGET_FS_ROOT setup-quota && echo snapper setup-quota done || echo snapper setup-quota failed ; else echo snapper setup-quota not used ; fi' )
SSH_ROOT_PASSWORD="rear"
USE_DHCLIENT="yes"
</pre>

<p>but one must know what <code>BACKUP_URL=file:///mnt/sdb1</code> means:</p>
<p>On the original system I did the preparation steps</p>
<pre>
# parted -s /dev/sdb mklabel msdos

# parted -s /dev/sdb unit MiB mkpart primary 1 2047

# mkfs.ext4 /dev/sdb1

# parted -s /dev/sdb unit MiB print
Model: ATA QEMU HARDDISK (scsi)
Disk /dev/sdb: 2048MiB
Sector size (logical/physical): 512B/512B
Partition Table: msdos
Disk Flags: 
Number  Start    End      Size     Type     File system  Flags
 1      1.00MiB  2047MiB  2046MiB  primary  ext4         type=83

# mkdir /mnt/sdb1

# mount /dev/sdb1 /mnt/sdb1
</pre>

<p>and after "rear -D mkbackup" I got</p>
<pre>
# find /mnt/sdb1

/mnt/sdb1
/mnt/sdb1/lost+found
/mnt/sdb1/f121
/mnt/sdb1/f121/backup.log
/mnt/sdb1/f121/backup.tar.gz
</pre>

<p>and on my NFS server (<code>OUTPUT_URL=nfs://10.160.4.244/nfs</code>) I got</p>
<pre>
nfs-server:/nfs # ls -lhrt /nfs/f121

total 85M
-rw------- 1 nobody nogroup  80M Apr 27 10:40 rear-f121.iso
-rw------- 1 nobody nogroup  261 Apr 27 10:40 VERSION
-rw------- 1 nobody nogroup  202 Apr 27 10:40 README
-rw------- 1 nobody nogroup 5.2M Apr 27 10:40 rear-f121.log
</pre>

<p>For the recovery I set up a second virtual machine<br />
with a new 20 GiB sda for the system<br />
and the existing 2 GiB sdb from the original system with the backup<br />
and a virtual CD-ROM where I have the rear-f121.iso to boot<br />
the ReaR recovery system on the second virtual machine.</p>
<p>In the running ReaR recovery system on the second virtual machine<br />
I did the preparation steps to make the backup on its sdb accessible:</p>
<pre>
# mkdir /mnt/sdb1

# mount /dev/sdb1 /mnt/sdb1
</pre>

<p>and then I run "rear -D recover" which then "just works" for me.</p>
<p>But personally I find using <code>BACKUP_URL=file:///...</code> too complicated<br />
from my point of view - but I don't know your particular use-case.</p>
<p>Personally I would perfer OUTPUT=USB to get the backup together<br />
with the ReaR recovery system on a bootable disk medium.</p>
<p>I think - with probability one
(<a href="https://en.wikipedia.org/wiki/Almost_surely">https://en.wikipedia.org/wiki/Almost_surely</a>)
- this issue<br />
is a ReaR configuration issue or a "how to use ReaR" issue.</p>
<h4 id="jsmeix_commented_at_2018-04-27_0959"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1786#issuecomment-384925341">2018-04-27 09:59</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-04-27_0959" title="Permanent link">&para;</a></h4>
<p>Bad typo correction in<br />
<a href="https://github.com/rear/rear/issues/1786#issuecomment-384915337">https://github.com/rear/rear/issues/1786#issuecomment-384915337</a><br />
wrong before
<code>and then I run "rear -D mkbackup" which then "just works" for me.</code><br />
now corrected
<code>and then I run "rear -D recover" which then "just works" for me.</code></p>
<h4 id="manums1983_commented_at_2018-04-27_1004"><img src="https://avatars.githubusercontent.com/u/38777867?v=4" width="50"><a href="https://github.com/manums1983">manums1983</a> commented at <a href="https://github.com/rear/rear/issues/1786#issuecomment-384926423">2018-04-27 10:04</a>:<a class="headerlink" href="#manums1983_commented_at_2018-04-27_1004" title="Permanent link">&para;</a></h4>
<p>Hi Valdimir<br />
I am collecting the restore log file will update you shortly.</p>
<p>Below showing the backup logs<br />
##########################################Backup
Successful ###########################<br />
GESPRD1:/mnt/backup # rear -d -D mkbackup<br />
Relax-and-Recover 2.3-git.0.dd982eb.unknown / 2018-04-16<br />
Using log file: /var/log/rear/rear-GESPRD1.log<br />
Using backup archive '/mnt/backup/GESPRD1/backup.tar.gz'<br />
Using UEFI Boot Loader for Linux (USING_UEFI_BOOTLOADER=1)<br />
Creating disk layout<br />
Excluding component fs:/media/backup<br />
Excluding component fs:/var/crash<br />
Excluding component fs:/export/archive<br />
Excluding component fs:/home/oracle<br />
Excluding component fs:/oracle<br />
Excluding component fs:/home/oraprd<br />
Excluding component fs:/export/Doc<br />
Excluding component fs:/usr/sap/hostctrl<br />
Excluding component fs:/sapmnt/PRD<br />
Excluding component fs:/usr/sap/SMD<br />
Excluding component fs:/usr/sap/tmp<br />
Excluding component fs:/usr/sap/PRD<br />
Excluding component fs:/sapmnt/PRD/exe<br />
Excluding component fs:/oracle/stage<br />
Excluding component fs:/oracle/PRD<br />
Excluding component fs:/oracle/client<br />
Excluding component fs:/oracle/oraprd<br />
Excluding component fs:/oracle/PRD/12102<br />
Excluding component fs:/oracle/PRD/origlogA<br />
Excluding component fs:/oracle/PRD/mirrlogA<br />
Excluding component fs:/oracle/PRD/mirrlogB<br />
Excluding component fs:/oracle/PRD/origlogB<br />
Excluding component fs:/oracle/PRD/sapreorg<br />
Excluding component fs:/oracle/PRD/sapdata3<br />
Excluding component fs:/oracle/PRD/oraarch<br />
Excluding component fs:/oracle/PRD/sapdata4<br />
Excluding component fs:/oracle/PRD/sapdata6<br />
Excluding component fs:/oracle/PRD/sapdata2<br />
Excluding component fs:/oracle/PRD/sapdata1<br />
Excluding component fs:/oracle/PRD/sapdata5<br />
Excluding component fs:/mnt/backup<br />
Using sysconfig bootloader 'grub2-efi'<br />
Creating root filesystem layout<br />
Handling network interface 'bond0'<br />
bond0 is a bond<br />
bond0 has lower interface eth0<br />
eth0 is a physical device<br />
bond0 has lower interface eth1<br />
eth1 is a physical device<br />
bond0 has lower interface eth2<br />
eth2 is a physical device<br />
bond0 has lower interface eth3<br />
eth3 is a physical device<br />
Handled network interface 'bond0'<br />
Trying to find what to use as UEFI bootloader...<br />
Trying to find a 'well known file' to be used as UEFI bootloader...<br />
Using '/boot/efi/EFI/sles/grubx64.efi' as UEFI bootloader file<br />
Copying logfile /var/log/rear/rear-GESPRD1.log into initramfs as
'/tmp/rear-GESPRD1-partial-2018-04-27T14:40:31+08:00.log'<br />
Copying files and directories<br />
Copying binaries and libraries<br />
Copying kernel modules<br />
Copying all files in /lib*/firmware/<br />
Creating recovery/rescue system initramfs/initrd initrd.cgz with gzip
default compression<br />
Created initrd.cgz with gzip default compression (207576391 bytes) in 76
seconds<br />
Making ISO image<br />
Wrote ISO image: /var/lib/rear/output/rear-GESPRD1.iso (242M)<br />
Copying resulting files to file location<br />
Saving /var/log/rear/rear-GESPRD1.log as rear-GESPRD1.log to file
location<br />
Creating tar archive '/mnt/backup/GESPRD1/backup.tar.gz'<br />
Archived 12648 MiB [avg 6759 KiB/sec] OK<br />
Archived 12648 MiB in 1917 seconds [avg 6756 KiB/sec]<br />
Exiting rear mkbackup (PID 9207) and its descendant processes<br />
Running exit tasks<br />
You should also rm -Rf /tmp/rear.u7WHb4sgvsPoLPy</p>
<p>Thanks &amp; Regards</p>
<p>Manu MS</p>
<h4 id="manums1983_commented_at_2018-04-27_1008"><img src="https://avatars.githubusercontent.com/u/38777867?v=4" width="50"><a href="https://github.com/manums1983">manums1983</a> commented at <a href="https://github.com/rear/rear/issues/1786#issuecomment-384927316">2018-04-27 10:08</a>:<a class="headerlink" href="#manums1983_commented_at_2018-04-27_1008" title="Permanent link">&para;</a></h4>
<p>In the /mnt/backup/GESPRD1 will have all gzip file and ISO file. I will
copy ISO to my local laptop and attach this ISO to iLO console and boot
from rear ISO.</p>
<p>GESPRD1:/mnt/backup/GESPRD1 # ls -l<br />
total 13242768<br />
-rw------- 1 root root 202 Apr 27 14:42 README<br />
-rw------- 1 root root 293 Apr 27 14:42 VERSION<br />
-rw------- 1 root root 26890796 Apr 27 15:14 backup.log<br />
-rw------- 1 root root 13263365582 Apr 27 15:14 backup.tar.gz<br />
-rw------- 1 root root 253259776 Apr 27 14:42 rear-GESPRD1.iso<br />
-rw------- 1 root root 17055276 Apr 27 14:42 rear-GESPRD1.log</p>
<h4 id="manums1983_commented_at_2018-04-27_1010"><img src="https://avatars.githubusercontent.com/u/38777867?v=4" width="50"><a href="https://github.com/manums1983">manums1983</a> commented at <a href="https://github.com/rear/rear/issues/1786#issuecomment-384927862">2018-04-27 10:10</a>:<a class="headerlink" href="#manums1983_commented_at_2018-04-27_1010" title="Permanent link">&para;</a></h4>
<p>Please find the logs attached.<br />
<a href="https://github.com/rear/rear/files/1954666/rear-logs.zip">rear-logs.zip</a>.</p>
<h4 id="gozora_commented_at_2018-04-27_1424"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1786#issuecomment-384985728">2018-04-27 14:24</a>:<a class="headerlink" href="#gozora_commented_at_2018-04-27_1424" title="Permanent link">&para;</a></h4>
<p>Hello @manums1983<br />
As @jsmeix pointed your in his
<a href="https://github.com/rear/rear/issues/1786#issuecomment-384915337">https://github.com/rear/rear/issues/1786#issuecomment-384915337</a>
and added reasoning to my brief "no no no, don't do it"
<a href="https://github.com/rear/rear/issues/1786#issuecomment-384885977">https://github.com/rear/rear/issues/1786#issuecomment-384885977</a>,
what is happening to your <code>rear recover</code> is following.</p>
<ol>
<li>
<p>Either your <em>/mnt/backup</em> contains mounted some remote filesystem or
    external device, in such case you should use appropriate protocol
    (nfs://, smb://, usb://) instead of file://</p>
</li>
<li>
<p>Or you store backup on your local filesystem which is part of your
    OS FS structure. This is simply not a good idea and you should use
    remote storage that is not directly related to OS your are backing
    up.</p>
</li>
</ol>
<p>V.</p>
<h4 id="gozora_commented_at_2018-04-27_1444"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1786#issuecomment-384991779">2018-04-27 14:44</a>:<a class="headerlink" href="#gozora_commented_at_2018-04-27_1444" title="Permanent link">&para;</a></h4>
<p>As I've read your <em>disklayout.conf</em> I've noticed that point 2. of my
<a href="https://github.com/rear/rear/issues/1786#issuecomment-384985728">https://github.com/rear/rear/issues/1786#issuecomment-384985728</a>
is true.</p>
<p>Your <em>/mnt/backup</em> is located on <em>/dev/sdb1</em> which is SmarArray logical
volume spread across single disk. If this is a <strong>test server</strong> all you
have to do before starting <code>rear recover</code> is to mount your <em>/mnt/backup</em>
directory and maybe comment out following line from
<em>/var/lib/rear/disklayout.conf</em></p>
<pre><code>logicaldrive /dev/sdb 0|A|1 raid=0 drives=1I:1:3, spares= sectors=32 stripesize=256
</code></pre>
<p>it is just a guess, but ReaR might try to re-create your SmartArray
configuration with this line active, which is not something you want.</p>
<p>If this is however <strong>production server</strong>, you should reconsider your
bare metal disaster recovery strategy, because storing backups locally
on SmartArray without any redundancy will really not help you in case of
disaster.</p>
<p>V.</p>
<h4 id="jsmeix_commented_at_2018-04-27_1453"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1786#issuecomment-384994506">2018-04-27 14:53</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-04-27_1453" title="Permanent link">&para;</a></h4>
<p>@gozora<br />
as far as I see by quick googling 'SmartArray' is HP specific hardware<br />
so that I added the "special hardware" label to this issue<br />
(remove it if if I am wrong).</p>
<h4 id="gozora_commented_at_2018-04-27_1458"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1786#issuecomment-384996154">2018-04-27 14:58</a>:<a class="headerlink" href="#gozora_commented_at_2018-04-27_1458" title="Permanent link">&para;</a></h4>
<p>@jsmeix yes, you are right with one tiny correction, it is HPE nowadays
:-), this is however not the crux of the problem, but rather (as you
already stated)</p>
<blockquote>
<p>I think - with probability one
(<a href="https://en.wikipedia.org/wiki/Almost_surely">https://en.wikipedia.org/wiki/Almost_surely</a>)
- this issue<br />
is a ReaR configuration issue or a "how to use ReaR" issue.</p>
</blockquote>
<p>So I personally would avoid using "special hardware" label ...</p>
<p>V.</p>
<h4 id="manums1983_commented_at_2018-04-27_1504"><img src="https://avatars.githubusercontent.com/u/38777867?v=4" width="50"><a href="https://github.com/manums1983">manums1983</a> commented at <a href="https://github.com/rear/rear/issues/1786#issuecomment-384997864">2018-04-27 15:04</a>:<a class="headerlink" href="#manums1983_commented_at_2018-04-27_1504" title="Permanent link">&para;</a></h4>
<p>Hardware Specs:</p>
<p>HPE iLO4 "Smart Array P830i".</p>
<p>Hard disk Configuration : RAID1 Array (2x600 GB) (/dev/sda) ---&gt; This
is local disk where OS is installed.<br />
RAID-0 (1x600 GB) ---&gt; This is also local disk is where the ReaR
backup is pointed /mnt/backup. This is GPT, Primary with EXT 4 partition
(/dev/sdb1).</p>
<p>All other disk are 3PAR multipath disks. All 3PAR disks exclude from the
backup and recreation.</p>
<h4 id="jsmeix_commented_at_2018-04-27_1512"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1786#issuecomment-385000448">2018-04-27 15:12</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-04-27_1512" title="Permanent link">&para;</a></h4>
<p>I don't know about Smart Array but assume there is real hardware RAID
here and<br />
not a <code>B110i software RAID solution based on the Smart Array firmware</code>
as in<br />
<a href="https://support.hpe.com/hpsc/doc/public/display?docId=emr_na-c00687518">https://support.hpe.com/hpsc/doc/public/display?docId=emr_na-c00687518</a><br />
so that it is basically the same disk layout as in my<br />
<a href="https://github.com/rear/rear/issues/1786#issuecomment-384915337">https://github.com/rear/rear/issues/1786#issuecomment-384915337</a><br />
"sda for the system ... sdb for the backup"</p>
<p>@manums1983<br />
when your backup is on <code>local disk</code> sdb<br />
I wonder how you access it from a replacement server?<br />
But I may misunderstand things because I don't know about Smart Array.</p>
<h4 id="gozora_commented_at_2018-04-27_1517"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1786#issuecomment-385002157">2018-04-27 15:17</a>:<a class="headerlink" href="#gozora_commented_at_2018-04-27_1517" title="Permanent link">&para;</a></h4>
<p>@jsmeix</p>
<blockquote>
<p>I don't know about Smart Array but assume there is real hardware RAID
here and<br />
not a B110i software RAID solution based on the Smart Array firmware
as in ...</p>
</blockquote>
<p>Correct ;-)</p>
<h4 id="gozora_commented_at_2018-04-27_1521"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1786#issuecomment-385003277">2018-04-27 15:21</a>:<a class="headerlink" href="#gozora_commented_at_2018-04-27_1521" title="Permanent link">&para;</a></h4>
<p>@jsmeix</p>
<blockquote>
<p>I wonder how you access it from a replacement server?</p>
</blockquote>
<p>I'm afraid that there is no replacement server, SmartArray disks are
presented to system as any other disk <em>/dev/sda</em>, <em>/dev/sdb</em> ... So I
guess that strategy here is just to boot ReaR recovery system and
restore content of <em>/dev/sda</em> from <em>/dev/sdb</em></p>
<p>V.</p>
<h4 id="manums1983_commented_at_2018-04-27_1531"><img src="https://avatars.githubusercontent.com/u/38777867?v=4" width="50"><a href="https://github.com/manums1983">manums1983</a> commented at <a href="https://github.com/rear/rear/issues/1786#issuecomment-385006320">2018-04-27 15:31</a>:<a class="headerlink" href="#manums1983_commented_at_2018-04-27_1531" title="Permanent link">&para;</a></h4>
<p>This is purely a hardware RAID array controller. Not software based.
This is a production SAP server in DR site. Highly critical to make any
kind of changes,<br />
Just wondering why this is not working because the same method of backup
and restore successfully done on Hardware GEN 9 DL 380 box with OS SUSE
12.2 no issues faced, but this server do not have any 3PAR LUNs, the
server have local disks sda (system) and sdb (backup).</p>
<p>Here the difference is DL 580 with OS SUSE 12.2 with lots of 3PAR Luns.
Noticed the restore getting stuck at "Start System Layout Restoration" ,
do we have any issue with multi-path.</p>
<p>I wonder how you access it from a replacement server? ---&gt; OS is
running on RAID1 (sda) if it corrupted after patching or any other
reasons can restore the (sda) from the backup (sdb). Boot from ReaR ISO
, in rescue mode mount /dev/sab1 /mnt/backup and start recovery.</p>
<h4 id="manums1983_commented_at_2018-04-27_1534"><img src="https://avatars.githubusercontent.com/u/38777867?v=4" width="50"><a href="https://github.com/manums1983">manums1983</a> commented at <a href="https://github.com/rear/rear/issues/1786#issuecomment-385007262">2018-04-27 15:34</a>:<a class="headerlink" href="#manums1983_commented_at_2018-04-27_1534" title="Permanent link">&para;</a></h4>
<p>correction:<br />
mount /dev/sdb1 /mnt/backup and start recovery.</p>
<h4 id="gozora_commented_at_2018-04-27_1537"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1786#issuecomment-385008099">2018-04-27 15:37</a>:<a class="headerlink" href="#gozora_commented_at_2018-04-27_1537" title="Permanent link">&para;</a></h4>
<p>@manums1983 if you think you are heaving problem with multipath and you
are doing recovery solely on local disks, just try to unload
<em>dm-multipath and friends</em> kernel modules + whatever FC (lpfc, bnx,
qlaxxx) driver you are using prior <code>rear recover</code>.<br />
This should let you only with local disks visible to ReaR recovery
system, so there shall be no interference ...</p>
<p>V.</p>
<h4 id="manums1983_commented_at_2018-04-27_1600"><img src="https://avatars.githubusercontent.com/u/38777867?v=4" width="50"><a href="https://github.com/manums1983">manums1983</a> commented at <a href="https://github.com/rear/rear/issues/1786#issuecomment-385015643">2018-04-27 16:00</a>:<a class="headerlink" href="#manums1983_commented_at_2018-04-27_1600" title="Permanent link">&para;</a></h4>
<p>@gozora,<br />
could you pls help on this how to unload multipath disks kernel modules
. This is production server i am afraid some mistake may happen by doing
so.</p>
<h4 id="gozora_commented_at_2018-04-27_1727"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1786#issuecomment-385039028">2018-04-27 17:27</a>:<a class="headerlink" href="#gozora_commented_at_2018-04-27_1727" title="Permanent link">&para;</a></h4>
<p>@manums1983 if this is an critical / production server and downtime
would mean any kind of SLA breach you should either escalate this task
to higher support level or ask some more experienced colleague for
help.<br />
Community around ReaR can help you with ReaR related problems but I
guess that no one will give you step by step guidance through every
single step that can go wrong during OS recovery ...</p>
<p>V.</p>
<h4 id="manums1983_commented_at_2018-04-28_0303"><img src="https://avatars.githubusercontent.com/u/38777867?v=4" width="50"><a href="https://github.com/manums1983">manums1983</a> commented at <a href="https://github.com/rear/rear/issues/1786#issuecomment-385135204">2018-04-28 03:03</a>:<a class="headerlink" href="#manums1983_commented_at_2018-04-28_0303" title="Permanent link">&para;</a></h4>
<p>Hi gozora,<br />
ReaR can very well handle the external disks (multipath) during backup
and recovery. May you help to find obstacle for the ReaR recovery to
hang at disk layout restoration phase. Is there any issues with local
disk configuration or any ReaR configuration problem.<br />
We are using Data Protector in the environment i hope ReaR can
integrated with DP, but do not know this is a good method. Currently
Data Protector will do the backup of /mnt/backup as flat file backup as
second copy.</p>
<h4 id="gozora_commented_at_2018-04-28_0824"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1786#issuecomment-385152446">2018-04-28 08:24</a>:<a class="headerlink" href="#gozora_commented_at_2018-04-28_0824" title="Permanent link">&para;</a></h4>
<p>One of the options would be to run recovery with debug options
<code>rear -d -D recover</code> and check logs in <em>/var/log/rear</em> .</p>
<p>V.</p>
<h4 id="manums1983_commented_at_2018-04-28_0830"><img src="https://avatars.githubusercontent.com/u/38777867?v=4" width="50"><a href="https://github.com/manums1983">manums1983</a> commented at <a href="https://github.com/rear/rear/issues/1786#issuecomment-385152811">2018-04-28 08:30</a>:<a class="headerlink" href="#manums1983_commented_at_2018-04-28_0830" title="Permanent link">&para;</a></h4>
<p>sure i will share you the log on Monday.</p>
<h4 id="manums1983_commented_at_2018-04-30_0531"><img src="https://avatars.githubusercontent.com/u/38777867?v=4" width="50"><a href="https://github.com/manums1983">manums1983</a> commented at <a href="https://github.com/rear/rear/issues/1786#issuecomment-385316207">2018-04-30 05:31</a>:<a class="headerlink" href="#manums1983_commented_at_2018-04-30_0531" title="Permanent link">&para;</a></h4>
<p>Hi Gozora,<br />
Please find the logs in /var/log/rear/ and layouts. The recovery hung in
the very begining.</p>
<p>I like to try backup to USB. Below configuration is ok to boot form USB
and do recovery. pls let know.<br />
rear format /dev/sdX<br />
OUTPUT=USB<br />
BACKUP=NETFS<br />
BACKUP_URL="usb:///dev/disk/by-label/REAR-000"<br />
<a href="https://github.com/rear/rear/files/1959613/rear-GESPRD1.log">rear-GESPRD1.log</a></p>
<h4 id="manums1983_commented_at_2018-04-30_0618"><img src="https://avatars.githubusercontent.com/u/38777867?v=4" width="50"><a href="https://github.com/manums1983">manums1983</a> commented at <a href="https://github.com/rear/rear/issues/1786#issuecomment-385320276">2018-04-30 06:18</a>:<a class="headerlink" href="#manums1983_commented_at_2018-04-30_0618" title="Permanent link">&para;</a></h4>
<p>I try backup to USB. But getting following error in writing logs.<br />
<a href="https://github.com/rear/rear/files/1959697/rear-GESPRD1.log">rear-GESPRD1.log</a></p>
<p>Trying to find what to use as UEFI bootloader...<br />
Trying to find a 'well known file' to be used as UEFI bootloader...<br />
Using '/boot/efi/EFI/sles/grubx64.efi' as UEFI bootloader file<br />
Copying logfile /var/log/rear/rear-GESPRD1.log into initramfs as
'/tmp/rear-GESPRD1-partial-2018-04-30T14:13:23+08:00.log'<br />
Copying files and directories<br />
Copying binaries and libraries<br />
Copying kernel modules<br />
Copying all files in /lib*/firmware/<br />
Creating recovery/rescue system initramfs/initrd initrd.cgz with gzip
default compression<br />
Created initrd.cgz with gzip default compression (208486998 bytes) in 75
seconds<br />
ERROR: Could not copy /mnt/backup/rear.YnLVHYO5VGq69u4/tmp/initrd.cgz to
/tmp/rear-efi.yJHGT//EFI/BOOT/initrd.cgz<br />
Aborting due to an error, check /var/log/rear/rear-GESPRD1.log for
details<br />
Exiting rear mkbackup (PID 84124) and its descendant processes<br />
Running exit tasks<br />
Terminated</p>
<h4 id="manums1983_commented_at_2018-04-30_0645"><img src="https://avatars.githubusercontent.com/u/38777867?v=4" width="50"><a href="https://github.com/manums1983">manums1983</a> commented at <a href="https://github.com/rear/rear/issues/1786#issuecomment-385323050">2018-04-30 06:45</a>:<a class="headerlink" href="#manums1983_commented_at_2018-04-30_0645" title="Permanent link">&para;</a></h4>
<p>Noticed that the /dev/sdaq1 is getting full and it is failing.<br />
/dev/sdaq1 200M 200M 0 100% /tmp/rear-efi.exLw5</p>
<h4 id="manums1983_commented_at_2018-04-30_0944"><img src="https://avatars.githubusercontent.com/u/38777867?v=4" width="50"><a href="https://github.com/manums1983">manums1983</a> commented at <a href="https://github.com/rear/rear/issues/1786#issuecomment-385353458">2018-04-30 09:44</a>:<a class="headerlink" href="#manums1983_commented_at_2018-04-30_0944" title="Permanent link">&para;</a></h4>
<p>Hi Gozora,<br />
I did backup as file based and USB. Both having the same issue. They are
getting hung at "Disk Layout Restoration".<br />
As you have requested i have attached the logs. could pls have a look
on.<br />
<a href="https://github.com/rear/rear/files/1960108/rear-GESPRD1.log">rear-GESPRD1.log</a></p>
<p>###############Logs################################</p>
<p>++ StopIfError 'You must specify either BACKUP_URL or BACKUP_MOUNTCMD
and BACKUP_UMOUNTCMD !'<br />
++ StopIfError 'Could not mkdir
'''/mnt/backup/rear.QIWPMl9uTLsWAr5/outputfs''''<br />
++ StopIfError 'Mount command '''mount -v -o rw,noatime
/dev/disk/by-label/REAR-000 /mnt/backup/rear.QIWPMl9uTLsWAr5/outputfs'''
failed.'<br />
++ StopIfError 'Could not find file '''mbr.bin'''. Syslinux version 3.08
or newer is required, 4.x prefered!'<br />
++ StopIfError 'Unmounting
'''/mnt/backup/rear.QIWPMl9uTLsWAr5/outputfs''' failed.'<br />
+++ StopIfError 'Partition number '''1''' of partition sda1 is not a
valid number.'<br />
+++ StopIfError 'Partition sda1 is numbered '''1'''. More than 128
partitions is not supported.'<br />
+++ StopIfError 'Partition number '''2''' of partition sda2 is not a
valid number.'<br />
+++ StopIfError 'Partition sda2 is numbered '''2'''. More than 128
partitions is not supported.'<br />
+++ StopIfError 'Partition number '''3''' of partition sda3 is not a
valid number.'<br />
+++ StopIfError 'Partition sda3 is numbered '''3'''. More than 128
partitions is not supported.'<br />
+++ StopIfError 'Partition number '''4''' of partition sda4 is not a
valid number.'<br />
+++ StopIfError 'Partition sda4 is numbered '''4'''. More than 128
partitions is not supported.'<br />
+++ StopIfError 'Partition number '''5''' of partition sda5 is not a
valid number.'<br />
+++ StopIfError 'Partition sda5 is numbered '''5'''. More than 128
partitions is not supported.'<br />
+++ StopIfError 'Partition number '''6''' of partition sda6 is not a
valid number.'<br />
+++ StopIfError 'Partition sda6 is numbered '''6'''. More than 128
partitions is not supported.'<br />
+++ StopIfError 'Partition number '''7''' of partition sda7 is not a
valid number.'<br />
+++ StopIfError 'Partition sda7 is numbered '''7'''. More than 128
partitions is not supported.'<br />
+++ StopIfError 'Partition number '''8''' of partition sda8 is not a
valid number.'<br />
+++ StopIfError 'Partition sda8 is numbered '''8'''. More than 128
partitions is not supported.'<br />
+++ StopIfError 'Partition number '''1''' of partition sdaq1 is not a
valid number.'<br />
+++ StopIfError 'Partition sdaq1 is numbered '''1'''. More than 128
partitions is not supported.'<br />
+++ StopIfError 'Partition number '''2''' of partition sdaq2 is not a
valid number.'<br />
+++ StopIfError 'Partition sdaq2 is numbered '''2'''. More than 128
partitions is not supported.'<br />
+++ StopIfError 'Partition number '''1''' of partition sdb1 is not a
valid number.'<br />
+++ StopIfError 'Partition sdb1 is numbered '''1'''. More than 128
partitions is not supported.'<br />
++ StopIfError 'Failed to save XFS options of
/dev/mapper/360002ac000000000000000230001e534-part1'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Failed to save XFS options of /dev/sda4'<br />
++ StopIfError 'Failed to save XFS options of /dev/sda5'<br />
++ StopIfError 'Failed to save XFS options of /dev/sda6'<br />
++ StopIfError 'Failed to save XFS options of /dev/sda7'<br />
++ StopIfError 'Failed to save XFS options of /dev/sda8'<br />
++ StopIfError 'Divide by zero detected'<br />
++ StopIfError 'Divide by zero detected'<br />
++ LogIfError 'Did not find sysfs name for device
360002ac0000000000000002c0001e534 (/sys/block/dm-7)'<br />
++ LogIfError 'Failed to get size of dm-7 with get_disk_size'<br />
+++ StopIfError 'Partition number '''1''' of partition
360002ac0000000000000002c0001e534-part1 is not a valid number.'<br />
+++ StopIfError 'Partition 360002ac0000000000000002c0001e534-part1 is
numbered '''1'''. More than 128 partitions is not supported.'<br />
+++ StopIfError 'Partition number '''1''' of partition
360002ac0000000000000002c0001e534-part1 is not a valid number.'<br />
+++ StopIfError 'Partition 360002ac0000000000000002c0001e534-part1 is
numbered '''1'''. More than 128 partitions is not supported.'<br />
++ LogIfError 'Did not find sysfs name for device
360002ac000000000000000260001e534 (/sys/block/dm-3)'<br />
++ LogIfError 'Failed to get size of dm-3 with get_disk_size'<br />
+++ StopIfError 'Partition number '''1''' of partition
360002ac000000000000000260001e534-part1 is not a valid number.'<br />
+++ StopIfError 'Partition 360002ac000000000000000260001e534-part1 is
numbered '''1'''. More than 128 partitions is not supported.'<br />
+++ StopIfError 'Partition number '''1''' of partition
360002ac000000000000000260001e534-part1 is not a valid number.'<br />
+++ StopIfError 'Partition 360002ac000000000000000260001e534-part1 is
numbered '''1'''. More than 128 partitions is not supported.'<br />
++ LogIfError 'Did not find sysfs name for device
360002ac0000000000000002a0001e534 (/sys/block/dm-9)'<br />
++ LogIfError 'Failed to get size of dm-9 with get_disk_size'<br />
+++ StopIfError 'Partition number '''1''' of partition
360002ac0000000000000002a0001e534-part1 is not a valid number.'<br />
+++ StopIfError 'Partition 360002ac0000000000000002a0001e534-part1 is
numbered '''1'''. More than 128 partitions is not supported.'<br />
+++ StopIfError 'Partition number '''1''' of partition
360002ac0000000000000002a0001e534-part1 is not a valid number.'<br />
+++ StopIfError 'Partition 360002ac0000000000000002a0001e534-part1 is
numbered '''1'''. More than 128 partitions is not supported.'<br />
++ LogIfError 'Did not find sysfs name for device
360002ac000000000000000240001e534 (/sys/block/dm-1)'<br />
++ LogIfError 'Failed to get size of dm-1 with get_disk_size'<br />
+++ StopIfError 'Partition number '''1''' of partition
360002ac000000000000000240001e534-part1 is not a valid number.'<br />
+++ StopIfError 'Partition 360002ac000000000000000240001e534-part1 is
numbered '''1'''. More than 128 partitions is not supported.'<br />
+++ StopIfError 'Partition number '''1''' of partition
360002ac000000000000000240001e534-part1 is not a valid number.'<br />
+++ StopIfError 'Partition 360002ac000000000000000240001e534-part1 is
numbered '''1'''. More than 128 partitions is not supported.'<br />
++ LogIfError 'Did not find sysfs name for device
360002ac0000000000000002d0001e534 (/sys/block/dm-8)'<br />
++ LogIfError 'Failed to get size of dm-8 with get_disk_size'<br />
+++ StopIfError 'Partition number '''1''' of partition
360002ac0000000000000002d0001e534-part1 is not a valid number.'<br />
+++ StopIfError 'Partition 360002ac0000000000000002d0001e534-part1 is
numbered '''1'''. More than 128 partitions is not supported.'<br />
+++ StopIfError 'Partition number '''1''' of partition
360002ac0000000000000002d0001e534-part1 is not a valid number.'<br />
+++ StopIfError 'Partition 360002ac0000000000000002d0001e534-part1 is
numbered '''1'''. More than 128 partitions is not supported.'<br />
++ LogIfError 'Did not find sysfs name for device
360002ac000000000000000270001e534 (/sys/block/dm-4)'<br />
++ LogIfError 'Failed to get size of dm-4 with get_disk_size'<br />
+++ StopIfError 'Partition number '''1''' of partition
360002ac000000000000000270001e534-part1 is not a valid number.'<br />
+++ StopIfError 'Partition 360002ac000000000000000270001e534-part1 is
numbered '''1'''. More than 128 partitions is not supported.'<br />
+++ StopIfError 'Partition number '''1''' of partition
360002ac000000000000000270001e534-part1 is not a valid number.'<br />
+++ StopIfError 'Partition 360002ac000000000000000270001e534-part1 is
numbered '''1'''. More than 128 partitions is not supported.'<br />
++ LogIfError 'Did not find sysfs name for device
360002ac0000000000000002b0001e534 (/sys/block/dm-6)'<br />
++ LogIfError 'Failed to get size of dm-6 with get_disk_size'<br />
+++ StopIfError 'Partition number '''1''' of partition
360002ac0000000000000002b0001e534-part1 is not a valid number.'<br />
+++ StopIfError 'Partition 360002ac0000000000000002b0001e534-part1 is
numbered '''1'''. More than 128 partitions is not supported.'<br />
+++ StopIfError 'Partition number '''1''' of partition
360002ac0000000000000002b0001e534-part1 is not a valid number.'<br />
+++ StopIfError 'Partition 360002ac0000000000000002b0001e534-part1 is
numbered '''1'''. More than 128 partitions is not supported.'<br />
++ LogIfError 'Did not find sysfs name for device
360002ac000000000000000250001e534 (/sys/block/dm-2)'<br />
++ LogIfError 'Failed to get size of dm-2 with get_disk_size'<br />
+++ StopIfError 'Partition number '''1''' of partition
360002ac000000000000000250001e534-part1 is not a valid number.'<br />
+++ StopIfError 'Partition 360002ac000000000000000250001e534-part1 is
numbered '''1'''. More than 128 partitions is not supported.'<br />
+++ StopIfError 'Partition number '''1''' of partition
360002ac000000000000000250001e534-part1 is not a valid number.'<br />
+++ StopIfError 'Partition 360002ac000000000000000250001e534-part1 is
numbered '''1'''. More than 128 partitions is not supported.'<br />
++ LogIfError 'Did not find sysfs name for device
360002ac000000000000000230001e534 (/sys/block/dm-0)'<br />
++ LogIfError 'Failed to get size of dm-0 with get_disk_size'<br />
+++ StopIfError 'Partition number '''1''' of partition
360002ac000000000000000230001e534-part1 is not a valid number.'<br />
+++ StopIfError 'Partition 360002ac000000000000000230001e534-part1 is
numbered '''1'''. More than 128 partitions is not supported.'<br />
+++ StopIfError 'Partition number '''1''' of partition
360002ac000000000000000230001e534-part1 is not a valid number.'<br />
+++ StopIfError 'Partition 360002ac000000000000000230001e534-part1 is
numbered '''1'''. More than 128 partitions is not supported.'<br />
++ LogIfError 'Did not find sysfs name for device
360002ac000000000000000280001e534 (/sys/block/dm-5)'<br />
++ LogIfError 'Failed to get size of dm-5 with get_disk_size'<br />
+++ StopIfError 'Partition number '''1''' of partition
360002ac000000000000000280001e534-part1 is not a valid number.'<br />
+++ StopIfError 'Partition 360002ac000000000000000280001e534-part1 is
numbered '''1'''. More than 128 partitions is not supported.'<br />
+++ StopIfError 'Partition number '''1''' of partition
360002ac000000000000000280001e534-part1 is not a valid number.'<br />
+++ StopIfError 'Partition 360002ac000000000000000280001e534-part1 is
numbered '''1'''. More than 128 partitions is not supported.'<br />
++ StopIfError 'Could not find a suitable kernel. Maybe you have to set
KERNEL_FILE [/boot/vmlinuz-4.4.103-92.56-default] ?'<br />
++ StopIfError 'Failed to create mount point /tmp/rear-efi.MQ5RB'<br />
++ StopIfError 'Failed to mount EFI partition
/dev/disk/by-label/REAR-EFI to /tmp/rear-efi.MQ5RB'<br />
++ StopIfError 'Failed to create /tmp/rear-efi.MQ5RB//EFI/BOOT'<br />
++ StopIfError 'Could not copy EFI bootloader to
/tmp/rear-efi.MQ5RB//EFI/BOOT/BOOTX64.efi'<br />
++ StopIfError 'Could not copy /boot/vmlinuz-4.4.103-92.56-default to
/tmp/rear-efi.MQ5RB//EFI/BOOT/kernel'<br />
++ StopIfError 'Could not copy
/mnt/backup/rear.QIWPMl9uTLsWAr5/tmp/initrd.cgz to
/tmp/rear-efi.MQ5RB//EFI/BOOT/initrd.cgz'<br />
++ StopIfError 'Failed to create BOOTX64.efi'<br />
++ LogIfError 'Could not remove temporary directory /tmp/rear-efi.MQ5RB,
please check manually'<br />
++ StopIfError 'Could not mkdir
'''/mnt/backup/rear.QIWPMl9uTLsWAr5/outputfs''''<br />
++ StopIfError 'Mount command '''mount -v -o rw,noatime
/dev/disk/by-label/REAR-000 /mnt/backup/rear.QIWPMl9uTLsWAr5/outputfs'''
failed.'<br />
++ StopIfError 'Could not mkdir
/mnt/backup/rear.QIWPMl9uTLsWAr5/tmp/boot'<br />
++ StopIfError 'Could not mkdir
'''/mnt/backup/rear.QIWPMl9uTLsWAr5/outputfs/GESPRD1''''<br />
++ StopIfError 'Could not create
'''/mnt/backup/rear.QIWPMl9uTLsWAr5/outputfs/GESPRD1/.lockfile''''<br />
++ StopIfError 'Could not find a working syslinux path.'<br />
++ StopIfError 'Could not create USB ReaR dir
[/mnt/backup/rear.QIWPMl9uTLsWAr5/outputfs/rear/GESPRD1/20180430.1537]
!'<br />
++ StopIfError 'Could not create USB syslinux dir
[/mnt/backup/rear.QIWPMl9uTLsWAr5/outputfs/boot/syslinux] !'<br />
++ StopIfError 'Could not create
/mnt/backup/rear.QIWPMl9uTLsWAr5/outputfs/rear/GESPRD1/20180430.1537/kernel'<br />
++ StopIfError 'Could not create
/mnt/backup/rear.QIWPMl9uTLsWAr5/outputfs/rear/GESPRD1/20180430.1537/initrd.cgz'<br />
++ StopIfError 'Could not copy /var/log/rear/rear-GESPRD1.log to
/mnt/backup/rear.QIWPMl9uTLsWAr5/outputfs/rear/GESPRD1/20180430.1537/rear-GESPRD1.log'<br />
++ BugIfError 'RAW_USB_DEVICE and REAL_USB_DEVICE should be already
set'<br />
++ StopIfError 'Problem with extlinux -i
/mnt/backup/rear.QIWPMl9uTLsWAr5/outputfs/boot/syslinux'<br />
++ StopIfError 'Problem with writing the mbr.bin to '''/dev/sdaq''''<br />
++ StopIfError 'Could not copy
'''/usr/share/rear/conf/templates/RESULT_usage_USB.txt''''<br />
++ StopIfError 'Unmounting
'''/mnt/backup/rear.QIWPMl9uTLsWAr5/outputfs''' failed.'<br />
++ StopIfError 'Could not mkdir
'''/mnt/backup/rear.QIWPMl9uTLsWAr5/outputfs''''<br />
++ StopIfError 'Mount command '''mount -v -o rw,noatime
/dev/disk/by-label/REAR-000 /mnt/backup/rear.QIWPMl9uTLsWAr5/outputfs'''
failed.'<br />
++ StopIfError 'Could not remove
'''/mnt/backup/rear.QIWPMl9uTLsWAr5/outputfs/rear/GESPRD1/20180430.1537.old''''<br />
++ StopIfError 'Could not move
'''/mnt/backup/rear.QIWPMl9uTLsWAr5/outputfs/rear/GESPRD1/20180430.1537''''<br />
++ StopIfError 'Could not mkdir
'''/mnt/backup/rear.QIWPMl9uTLsWAr5/outputfs/rear/GESPRD1/20180430.1537''''<br />
++ StopIfError 'Could not create
'''/mnt/backup/rear.QIWPMl9uTLsWAr5/outputfs/rear/GESPRD1/20180430.1537/.lockfile''''<br />
++ StopIfError 'Unmounting
'''/mnt/backup/rear.QIWPMl9uTLsWAr5/outputfs''' failed.'<br />
GESPRD1:/var/log/rear # ls<br />
rear-GESPRD1.log rear-GESPRD1.log.old<br />
GESPRD1:/var/log/rear # cat rear-GESPRD1.log.old | grep "Error"<br />
GESPRD1:/var/log/rear # ls -l<br />
total 17600<br />
-rw-r----- 1 root root 18013129 Apr 30 16:35 rear-GESPRD1.log<br />
-rw-r----- 1 root root 4455 Apr 30 15:37 rear-GESPRD1.log.old<br />
GESPRD1:/var/log/rear # ls -l<br />
total 17600<br />
-rw-r----- 1 root root 18013129 Apr 30 16:35 rear-GESPRD1.log<br />
-rw-r----- 1 root root 4455 Apr 30 15:37 rear-GESPRD1.log.old<br />
GESPRD1:/var/log/rear # ls -l<br />
total 17600<br />
-rw-r----- 1 root root 18013129 Apr 30 16:35 rear-GESPRD1.log<br />
-rw-r----- 1 root root 4455 Apr 30 15:37 rear-GESPRD1.log.old</p>
<h4 id="gozora_commented_at_2018-04-30_1031"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1786#issuecomment-385362179">2018-04-30 10:31</a>:<a class="headerlink" href="#gozora_commented_at_2018-04-30_1031" title="Permanent link">&para;</a></h4>
<p>Again, if you are heaving trouble during restore phase, please provide
log files created by <code>rear -d -D recover</code></p>
<p>V.</p>
<h4 id="manums1983_commented_at_2018-04-30_1034"><img src="https://avatars.githubusercontent.com/u/38777867?v=4" width="50"><a href="https://github.com/manums1983">manums1983</a> commented at <a href="https://github.com/rear/rear/issues/1786#issuecomment-385362700">2018-04-30 10:34</a>:<a class="headerlink" href="#manums1983_commented_at_2018-04-30_1034" title="Permanent link">&para;</a></h4>
<p>Hi Gozora,<br />
i was doing it from iLO console i could not copy it from there. i
believe i copied the "rear -d -D recover" logs. i copied it form
location /var/log/rear/.<br />
Ok let me try once more.</p>
<h4 id="manums1983_commented_at_2018-04-30_1037"><img src="https://avatars.githubusercontent.com/u/38777867?v=4" width="50"><a href="https://github.com/manums1983">manums1983</a> commented at <a href="https://github.com/rear/rear/issues/1786#issuecomment-385363131">2018-04-30 10:37</a>:<a class="headerlink" href="#manums1983_commented_at_2018-04-30_1037" title="Permanent link">&para;</a></h4>
<p>I tried it copy the /var/log/rear/gesprd*** to a local drive. but the
server is getting hung. Not responding to any abort commands.<br />
I have a screen shot can i attach?</p>
<h4 id="manums1983_commented_at_2018-04-30_1117"><img src="https://avatars.githubusercontent.com/u/38777867?v=4" width="50"><a href="https://github.com/manums1983">manums1983</a> commented at <a href="https://github.com/rear/rear/issues/1786#issuecomment-385370213">2018-04-30 11:17</a>:<a class="headerlink" href="#manums1983_commented_at_2018-04-30_1117" title="Permanent link">&para;</a></h4>
<p>I have attached restore -d -D recover error screenshot. i could not copy
any logs to local directory because the whole server is hung. Really
appreciate if you can see something form the screenshots.<br />
<a href="https://github.com/rear/rear/files/1960322/restore_error_log_screenshot.docx">restore_error_log_screenshot.docx</a></p>
<h4 id="gozora_commented_at_2018-04-30_1444"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1786#issuecomment-385420306">2018-04-30 14:44</a>:<a class="headerlink" href="#gozora_commented_at_2018-04-30_1444" title="Permanent link">&para;</a></h4>
<p>I don't really believe that screenshot is enough ...<br />
Are you aware that there is sshd running inside ReaR recovery system ?</p>
<p>V.</p>
<h4 id="manums1983_commented_at_2018-05-01_0459"><img src="https://avatars.githubusercontent.com/u/38777867?v=4" width="50"><a href="https://github.com/manums1983">manums1983</a> commented at <a href="https://github.com/rear/rear/issues/1786#issuecomment-385599720">2018-05-01 04:59</a>:<a class="headerlink" href="#manums1983_commented_at_2018-05-01_0459" title="Permanent link">&para;</a></h4>
<p>Hi gozora,<br />
I tried ssh to the server via putty from my laptop but it was failing.<br />
Let me tell you the other thing i noticed while it was booting from
rescue disk is that it was failing at script
"40-start-udev-or-load-modules.sh". Below is the error message it was
captured from screen<br />
############Rescue disk Boot error on
screen#############<br />
Running 40-start-udev-or-load-modules.sh...<br />
insmod /lib/modules/4.4.103-92..56-default/weak-update/updates/lpfc.ko
lpfc_devloss_tmo=14 ipfc_lun_queue_depth=16
lpfc_discovery_threads=32<br />
grep: write error.<br />
########################################################<br />
I understand without proper recovery log it is very difficult to analyse
the problem. But situation i have is once i hit "rear -d -D recover" the
server fully getting hung and only response to iLO reboot option which
making no way to collect the logs. Also on screen i was not able to see
any real time logs.<br />
Please let know the above log making any sense relate to any know issue,
because i observed in another recent case it seem as a bug.<br />
<a href="https://github.com/rear/rear/issues/1207">https://github.com/rear/rear/issues/1207</a></p>
<h4 id="gozora_commented_at_2018-05-01_0729"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1786#issuecomment-385616262">2018-05-01 07:29</a>:<a class="headerlink" href="#gozora_commented_at_2018-05-01_0729" title="Permanent link">&para;</a></h4>
<p>@manums1983 I'm sorry, but without proper logs I can't help you.</p>
<p>V.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2024 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2018-04-27.1786.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
