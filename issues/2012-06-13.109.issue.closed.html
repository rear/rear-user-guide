<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#109 Issue closed: PPC support is broken - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#109 Issue closed: PPC support is broken";
        var mkdocs_page_input_path = "issues/2012-06-13.109.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#109 Issue closed: PPC support is broken</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="109_issue_closed_ppc_support_is_broken"><a href="https://github.com/rear/rear/issues/109">#109 Issue</a> <code>closed</code>: PPC support is broken<a class="headerlink" href="#109_issue_closed_ppc_support_is_broken" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>bug</code></p>
<h4 id="kolb_opened_issue_at_2012-06-13_0910"><img src="https://avatars.githubusercontent.com/u/1829768?v=4" width="50"><a href="https://github.com/kolb">kolb</a> opened issue at <a href="https://github.com/rear/rear/issues/109">2012-06-13 09:10</a>:<a class="headerlink" href="#kolb_opened_issue_at_2012-06-13_0910" title="Permanent link">&para;</a></h4>
<p>The ppc code is broken. There are two problems:</p>
<ol>
<li>In /usr/share/rear/pack/Linux-ppc64/30_copy_kernel.sh the copy
    command is commented out (last line).</li>
<li>The RPM spec file list syslinux as a requisite. There is no syslinux
    package for the ppc platform. The yaboot package is used instead. I
    suggest somethink like this:<br />
    %ifarch ppc,ppc64<br />
    Requires: yaboot<br />
    %else<br />
    Requires: syslinux &gt;= 4.00<br />
    %endif</li>
</ol>
<h4 id="dagwieers_commented_at_2012-06-13_0926"><img src="https://avatars.githubusercontent.com/u/388198?u=0732dee3fe5002278cfbf40359ec431bdcf5f06c&v=4" width="50"><a href="https://github.com/dagwieers">dagwieers</a> commented at <a href="https://github.com/rear/rear/issues/109#issuecomment-6296530">2012-06-13 09:26</a>:<a class="headerlink" href="#dagwieers_commented_at_2012-06-13_0926" title="Permanent link">&para;</a></h4>
<p>What version have you tested ? The master branch at this time reverted
to a very simple SPEC file, which we intend to improve to support other
distributions and also PPC... For testing Rear on PPC we might need your
help as we don't have any test equipment.</p>
<h4 id="dagwieers_commented_at_2012-06-13_927"><img src="https://avatars.githubusercontent.com/u/388198?u=0732dee3fe5002278cfbf40359ec431bdcf5f06c&v=4" width="50"><a href="https://github.com/dagwieers">dagwieers</a> commented at <a href="https://github.com/rear/rear/issues/109#issuecomment-6296535">2012-06-13 09:26</a>:<a class="headerlink" href="#dagwieers_commented_at_2012-06-13_927" title="Permanent link">&para;</a></h4>
<p>And depending on the timeframe, we might make the next v1.14 release,
with your help.</p>
<h4 id="gdha_commented_at_2012-06-13_0940"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/109#issuecomment-6296786">2012-06-13 09:40</a>:<a class="headerlink" href="#gdha_commented_at_2012-06-13_0940" title="Permanent link">&para;</a></h4>
<p>I would prefer to see in the rear.spec file:</p>
<p>%ifarch %ix86 x86_64<br />
Requires: syslinux<br />
%endif<br />
%ifarch ppc ppc64<br />
Requires: yaboot<br />
%endif</p>
<h4 id="dagwieers_commented_at_2012-06-13_1018"><img src="https://avatars.githubusercontent.com/u/388198?u=0732dee3fe5002278cfbf40359ec431bdcf5f06c&v=4" width="50"><a href="https://github.com/dagwieers">dagwieers</a> commented at <a href="https://github.com/rear/rear/issues/109#issuecomment-6297440">2012-06-13 10:18</a>:<a class="headerlink" href="#dagwieers_commented_at_2012-06-13_1018" title="Permanent link">&para;</a></h4>
<p>Yes, I have added it already. I was planning to merge some bits with the
previous version it just did not happen yet.</p>
<h4 id="kolb_commented_at_2012-06-14_0827"><img src="https://avatars.githubusercontent.com/u/1829768?v=4" width="50"><a href="https://github.com/kolb">kolb</a> commented at <a href="https://github.com/rear/rear/issues/109#issuecomment-6322902">2012-06-14 08:27</a>:<a class="headerlink" href="#kolb_commented_at_2012-06-14_0827" title="Permanent link">&para;</a></h4>
<p>I made a rescue CD, but it failed to boot:<br />
The problem is in
/usr/share/rear/output/ISO/Linux-ppc64/30_create_yaboot.sh<br />
The yaboot binary should be copied to /ppc/chrp directory. Instead it is
copied to the file chrp in directory ppc. I modified the mkdir line in
the file:<br />
mkdir -p $v $TMP_DIR/ppc/chrp &gt;&amp;2</p>
<p>Now it creates the chrp directory and the yaboot file is copied into it.</p>
<p>The boot was successful, but the recovery system failed to start:<br />
[ 3.070199] systemd[1]: No hostname configured.<br />
[ 3.070270] systemd[1]: Initializing machine ID from random
generator.<br />
[ 3.150799] systemd[1]: Failed to load default target: No such file
or directory<br />
[ 3.150815] systemd[1]: Trying to load rescue target...<br />
[ 3.150840] systemd[1]: Failed to load rescue target: No such file
or directory</p>
<p>I'am using Fedora16 to test. Any idea what to check to make it work?</p>
<h4 id="jhoekx_commented_at_2012-06-14_0907"><img src="https://avatars.githubusercontent.com/u/783473?v=4" width="50"><a href="https://github.com/jhoekx">jhoekx</a> commented at <a href="https://github.com/rear/rear/issues/109#issuecomment-6323489">2012-06-14 09:07</a>:<a class="headerlink" href="#jhoekx_commented_at_2012-06-14_0907" title="Permanent link">&para;</a></h4>
<p>It looks like a systemd problem.</p>
<p>You can learn more about it by adding <code>systemd.log_level=debug</code> to the
kernel command line (press tab in syslinux).<br />
We probably forget to copy some directories on ppc...</p>
<h4 id="kolb_commented_at_2012-06-14_1424"><img src="https://avatars.githubusercontent.com/u/1829768?v=4" width="50"><a href="https://github.com/kolb">kolb</a> commented at <a href="https://github.com/rear/rear/issues/109#issuecomment-6329426">2012-06-14 14:24</a>:<a class="headerlink" href="#kolb_commented_at_2012-06-14_1424" title="Permanent link">&para;</a></h4>
<p>I've found out that the /lib/systemd/system/default.target link points
to rear-1.13.0/multi-user.target, but there is no rear-1.13.0 directory
(there is no rear* directory). Can you tell me which script should
create this directory and its contents?</p>
<h4 id="jhoekx_commented_at_2012-06-14_1553"><img src="https://avatars.githubusercontent.com/u/783473?v=4" width="50"><a href="https://github.com/jhoekx">jhoekx</a> commented at <a href="https://github.com/rear/rear/issues/109#issuecomment-6332584">2012-06-14 15:53</a>:<a class="headerlink" href="#jhoekx_commented_at_2012-06-14_1553" title="Permanent link">&para;</a></h4>
<p>Good catch. That's tar in our makefile adding rear-1.13.0 also to
targets of symlinks.</p>
<p>Those files are in <code>usr/share/rear/skel/default/lib/systemd/system</code>.</p>
<h4 id="dagwieers_commented_at_2012-06-14_1809"><img src="https://avatars.githubusercontent.com/u/388198?u=0732dee3fe5002278cfbf40359ec431bdcf5f06c&v=4" width="50"><a href="https://github.com/dagwieers">dagwieers</a> commented at <a href="https://github.com/rear/rear/issues/109#issuecomment-6336224">2012-06-14 18:09</a>:<a class="headerlink" href="#dagwieers_commented_at_2012-06-14_1809" title="Permanent link">&para;</a></h4>
<p>So do we go back to using pax ? ;-)</p>
<p><a href="http://dag.wieers.com/blog/pax-substitution-and-relative-symbolic-links">http://dag.wieers.com/blog/pax-substitution-and-relative-symbolic-links</a></p>
<h4 id="jhoekx_commented_at_2012-06-14_1948"><img src="https://avatars.githubusercontent.com/u/783473?v=4" width="50"><a href="https://github.com/jhoekx">jhoekx</a> commented at <a href="https://github.com/rear/rear/issues/109#issuecomment-6338697">2012-06-14 19:48</a>:<a class="headerlink" href="#jhoekx_commented_at_2012-06-14_1948" title="Permanent link">&para;</a></h4>
<p>No, we read the tar
<a href="http://www.gnu.org/software/tar/manual/html_section/transform.html">manual</a>
:-).</p>
<p>This problem should be fixed by 25f49cca00d86bc285b92c01e43206a3da49ec87
(and it is in my testing).</p>
<h4 id="dagwieers_commented_at_2012-06-14_1952"><img src="https://avatars.githubusercontent.com/u/388198?u=0732dee3fe5002278cfbf40359ec431bdcf5f06c&v=4" width="50"><a href="https://github.com/dagwieers">dagwieers</a> commented at <a href="https://github.com/rear/rear/issues/109#issuecomment-6338807">2012-06-14 19:52</a>:<a class="headerlink" href="#dagwieers_commented_at_2012-06-14_1952" title="Permanent link">&para;</a></h4>
<p>Perfect ! :-D</p>
<h4 id="kolb_commented_at_2012-06-15_0840"><img src="https://avatars.githubusercontent.com/u/1829768?v=4" width="50"><a href="https://github.com/kolb">kolb</a> commented at <a href="https://github.com/rear/rear/issues/109#issuecomment-6351912">2012-06-15 08:40</a>:<a class="headerlink" href="#kolb_commented_at_2012-06-15_0840" title="Permanent link">&para;</a></h4>
<p>I ran another test with the new version:</p>
<p>The copy command in /usr/share/rear/pack/Linux-ppc64/30_copy_kernel.sh
is still commanted out, so the kernel image were missing. Please fix it!</p>
<p>After correcting that I was able to boot the rescue image.<br />
The recovery however failed with some TSM error. I will open a new issue
about that.</p>
<h4 id="jhoekx_commented_at_2012-06-15_1022"><img src="https://avatars.githubusercontent.com/u/783473?v=4" width="50"><a href="https://github.com/jhoekx">jhoekx</a> commented at <a href="https://github.com/rear/rear/issues/109#issuecomment-6353518">2012-06-15 10:22</a>:<a class="headerlink" href="#jhoekx_commented_at_2012-06-15_1022" title="Permanent link">&para;</a></h4>
<p>For x86, the copy kernel line is also commented out. We copy the kernel
in output/ISO/Linux-i386/80_create_isofs.sh. We'll make it mirror that
by copying it in output/ISO/Linux-ppc64/80_create_isofs.sh.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2024 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2012-06-13.109.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
