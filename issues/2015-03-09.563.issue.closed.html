<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#563 Issue closed: Confirming ReaR backup completed successfully - check return codes or syslog output - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#563 Issue closed: Confirming ReaR backup completed successfully - check return codes or syslog output";
        var mkdocs_page_input_path = "issues/2015-03-09.563.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#563 Issue closed: Confirming ReaR backup completed successfully - check return codes or syslog output</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="563_issue_closed_confirming_rear_backup_completed_successfully_-_check_return_codes_or_syslog_output"><a href="https://github.com/rear/rear/issues/563">#563 Issue</a> <code>closed</code>: Confirming ReaR backup completed successfully - check return codes or syslog output<a class="headerlink" href="#563_issue_closed_confirming_rear_backup_completed_successfully_-_check_return_codes_or_syslog_output" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>support / question</code></p>
<h4 id="bbeaver_opened_issue_at_2015-03-09_1847"><img src="https://avatars.githubusercontent.com/u/7350825?u=2ec61633eda874b17db7b1eb383363444e6064d6&v=4" width="50"><a href="https://github.com/bbeaver">bbeaver</a> opened issue at <a href="https://github.com/rear/rear/issues/563">2015-03-09 18:47</a>:<a class="headerlink" href="#bbeaver_opened_issue_at_2015-03-09_1847" title="Permanent link">&para;</a></h4>
<p>Is there a simple way to confirm a "rear -v mkbackup" ran to completion
without errors, when scripted to run automatically using cron? For
example, if the "rear -v mkbackup" command is placed within a shell
wrapper, is it sufficient to check the return value, (echo $?),
immediately after the script finishes? We'll be running nightly with
cron, and I would like to script such that I receive an email only if
there are problems, or, a syslog event is triggered in the event of a
problem. Thanks</p>
<h4 id="schlomo_commented_at_2015-03-09_2154"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/563#issuecomment-77951611">2015-03-09 21:54</a>:<a class="headerlink" href="#schlomo_commented_at_2015-03-09_2154" title="Permanent link">&para;</a></h4>
<p>Simply run <code>read mkbackup</code>. It will remain silent unless there is
something to say. The return code should indicate success or failure.</p>
<h4 id="bbeaver_commented_at_2015-03-09_2353"><img src="https://avatars.githubusercontent.com/u/7350825?u=2ec61633eda874b17db7b1eb383363444e6064d6&v=4" width="50"><a href="https://github.com/bbeaver">bbeaver</a> commented at <a href="https://github.com/rear/rear/issues/563#issuecomment-77969692">2015-03-09 23:53</a>:<a class="headerlink" href="#bbeaver_commented_at_2015-03-09_2353" title="Permanent link">&para;</a></h4>
<p>Run "read mkbackup"? Do you mean, "rear mkbackup", without the "-v"
verbose option? And when "rear mkbackup" completes, check the return
value, (echo $?), for success status? Assume return of zero is success
and non-zero means there were problems, correct? Thanks</p>
<h4 id="jsmeix_commented_at_2015-03-10_0829"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/563#issuecomment-78012720">2015-03-10 08:29</a>:<a class="headerlink" href="#jsmeix_commented_at_2015-03-10_0829" title="Permanent link">&para;</a></h4>
<p>@bbeaver</p>
<p>What exactly do you mean with<br />
"confirm a 'rear -v mkbackup' ran to completion without errors"?</p>
<p>E.g. to confirm that the backup of the files is complete without errors
one would have to restore it to another place and then inspect if the
restored stuff is complete without errors.</p>
<p>E.g. to confirm that the generated rear recovery system is complete
without errors one would have to boot and run it on another machine and
let it do its job there which means one would have to do a real "rear
recover" and after that verify that the recovered system is complete
without errors.</p>
<p>Or do you only mean that no program/script that was run by 'rear -v
mkbackup' resulted a non-zero exit code?</p>
<h4 id="gdha_commented_at_2015-03-10_0925"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/563#issuecomment-78019829">2015-03-10 09:25</a>:<a class="headerlink" href="#gdha_commented_at_2015-03-10_0925" title="Permanent link">&para;</a></h4>
<p>Since rear-1.16.x rear writes a return code message via syslogd to
<code>var/log/messages</code>, e.g.<br />
<code>Mar 10 10:22:20 &lt;my_hostname&gt; rear[20947]: DONE: rc=0</code></p>
<h4 id="bbeaver_commented_at_2015-03-10_1220"><img src="https://avatars.githubusercontent.com/u/7350825?u=2ec61633eda874b17db7b1eb383363444e6064d6&v=4" width="50"><a href="https://github.com/bbeaver">bbeaver</a> commented at <a href="https://github.com/rear/rear/issues/563#issuecomment-78042663">2015-03-10 12:20</a>:<a class="headerlink" href="#bbeaver_commented_at_2015-03-10_1220" title="Permanent link">&para;</a></h4>
<p>@jsmeix: we are wanting to run rear backups each night via cron
unattended, which means I need to know by either an email or syslog
event if there were problems. I can either script for this by validating
a return code, or look for a syslog event.</p>
<p>@gdha:<br />
Perfect - that's what I was looking for. Will syslog also be written
with any problems? What local.conf variables need to be setup to support
the writing of syslog events?</p>
<p>Thanks</p>
<h4 id="schlomo_commented_at_2015-03-10_1246"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/563#issuecomment-78045989">2015-03-10 12:46</a>:<a class="headerlink" href="#schlomo_commented_at_2015-03-10_1246" title="Permanent link">&para;</a></h4>
<p>ATM the only thing that is logged to syslog are errors and a warning /<br />
success result codes.</p>
<p>I think that it would be not difficult to add support for logging<br />
everything to syslog instead of our own log file.</p>
<p>On 10 March 2015 at 13:20, bbeaver <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;">&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a> wrote:</p>
<blockquote>
<p>Perfect - that's what I was looking for. Will syslog also be written
with<br />
any problems? What local.conf variables need to be setup to support
writing<br />
syslog events? Thanks</p>
<p>—<br />
Reply to this email directly or view it on GitHub<br />
<a href="https://github.com/rear/rear/issues/563#issuecomment-78042663">https://github.com/rear/rear/issues/563#issuecomment-78042663</a>.</p>
</blockquote>
<h4 id="bbeaver_commented_at_2015-03-10_1341"><img src="https://avatars.githubusercontent.com/u/7350825?u=2ec61633eda874b17db7b1eb383363444e6064d6&v=4" width="50"><a href="https://github.com/bbeaver">bbeaver</a> commented at <a href="https://github.com/rear/rear/issues/563#issuecomment-78054344">2015-03-10 13:41</a>:<a class="headerlink" href="#bbeaver_commented_at_2015-03-10_1341" title="Permanent link">&para;</a></h4>
<p>Leaving details in the ReaR log file is fine. The objective here is to
be notified if there are any issues with a regularly scheduled nightly
run of "rear -v mkbackup". Sysadmins will need to receive an email, or a
syslog event if there are problems, and once this is received they can
look at the ReaR log file details as to what failed. Thinking something
like this below:</p>
<p>rear mkbackup<br />
rc=$?<br />
if [ -n "${rc}" ]<br />
then<br />
send an email indicating rear failed, or logger to syslog<br />
fi</p>
<h4 id="gdha_commented_at_2015-03-10_1411"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/563#issuecomment-78060356">2015-03-10 14:11</a>:<a class="headerlink" href="#gdha_commented_at_2015-03-10_1411" title="Permanent link">&para;</a></h4>
<p>if you grep the syslog with the keyword <em>rear</em> you would find all issues
if any or it went fine <em>DONE: rc=0</em></p>
<h4 id="gdha_commented_at_2015-03-25_1919"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/563#issuecomment-86179990">2015-03-25 19:19</a>:<a class="headerlink" href="#gdha_commented_at_2015-03-25_1919" title="Permanent link">&para;</a></h4>
<p>This issue is related to the discussion held in #564</p>
<h4 id="gdha_commented_at_2015-05-13_1646"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/563#issuecomment-101741733">2015-05-13 16:46</a>:<a class="headerlink" href="#gdha_commented_at_2015-05-13_1646" title="Permanent link">&para;</a></h4>
<p>@bbeaver Doe you need some more info or are you good? Otherwise, close
the issue.<br />
thanks.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2024 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2015-03-09.563.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
