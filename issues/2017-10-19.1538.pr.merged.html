<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#1538 PR merged: Only support OpenSSH 3.1 and later for SSH setup - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#1538 PR merged: Only support OpenSSH 3.1 and later for SSH setup";
        var mkdocs_page_input_path = "issues/2017-10-19.1538.pr.merged.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_nas.html">Internal Backup with tar to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_rsync.html">Internal Backup with rsync to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/rsync.html">External Backup using BACKUP=RSYNC method</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/rbme.html">External Backup using RBME</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/restic.html">External Backup using restic</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/duplicity.html">External Backup using duplicity</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../development/squash-git-log-commments.html">How to squash git log comments into one line</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#1538 PR merged: Only support OpenSSH 3.1 and later for SSH setup</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="1538_pr_merged_only_support_openssh_31_and_later_for_ssh_setup"><a href="https://github.com/rear/rear/pull/1538">#1538 PR</a> <code>merged</code>: Only support OpenSSH 3.1 and later for SSH setup<a class="headerlink" href="#1538_pr_merged_only_support_openssh_31_and_later_for_ssh_setup" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>bug</code>, <code>documentation</code>, <code>cleanup</code>,
<code>fixed / solved / done</code></p>
<h4 id="jsmeix_opened_issue_at_2017-10-19_1055"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> opened issue at <a href="https://github.com/rear/rear/pull/1538">2017-10-19 10:55</a>:<a class="headerlink" href="#jsmeix_opened_issue_at_2017-10-19_1055" title="Permanent link">&para;</a></h4>
<p>This intends to implement what is described in<br />
<a href="https://github.com/rear/rear/pull/1530#issuecomment-337526810">https://github.com/rear/rear/pull/1530#issuecomment-337526810</a><br />
and subsequent comments.</p>
<p>This removes "out-of-the-box" support in ReaR for<br />
other secure shell software like CentrifySSH<br />
cf.
<a href="https://github.com/rear/rear/issues/836">https://github.com/rear/rear/issues/836</a><br />
but it does not make OpenSSH mandatory for ReaR<br />
so that the initial problem in<br />
<a href="https://github.com/rear/rear/issues/836">https://github.com/rear/rear/issues/836</a><br />
should not re-appear.</p>
<p>In default.conf it is now described how to set up ReaR<br />
with a secure shell software other than OpenSSH &gt;= 3.1<br />
basically via</p>
<pre>
SSH_FILES='no'
COPY_AS_IS=( "${COPY_AS_IS[@]}" my secure shell software files )
REQUIRED_PROGS=( "${REQUIRED_PROGS[@]}" my secure shell programs )
</pre>

<p>Currently I have not yet tested it.</p>
<h4 id="jsmeix_commented_at_2017-10-19_1114"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1538#issuecomment-337876796">2017-10-19 11:14</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-10-19_1114" title="Permanent link">&para;</a></h4>
<p>FWIW:</p>
<p>At least I cannot maintain code in ReaR that supports<br />
non OpenSSH &gt;= 3.1 like "third-party" secure shell software<br />
so that I would appreciate it to clean up and simplify<br />
SSH support in ReaR to only support OpenSSH &gt;= 3.1.</p>
<h4 id="jsmeix_commented_at_2017-10-19_1149"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1538#issuecomment-337883867">2017-10-19 11:49</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-10-19_1149" title="Permanent link">&para;</a></h4>
<p>The original issue in
<a href="https://github.com/rear/rear/issues/836">https://github.com/rear/rear/issues/836</a><br />
is back because in rescue/default/500_ssh.sh</p>
<pre>
grep -h 'sftp' /etc/sshd_co[n]fig /etc/ssh/sshd_co[n]fig /etc/openssh/sshd_co[n]fig
</pre>

<p>hangs up if none of the files exists because plain</p>
<pre>
grep -h 'sftp'
</pre>

<p>endlessly waits for input on stdin.</p>
<h4 id="jsmeix_commented_at_2017-10-19_1249"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1538#issuecomment-337897086">2017-10-19 12:49</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-10-19_1249" title="Permanent link">&para;</a></h4>
<p>@OliverO2<br />
now I have in rescue/default/500_ssh.sh</p>
<pre>
local files_for_grep=( /etc/sshd_co[n]fig /etc/ssh/sshd_co[n]fig /etc/openssh/sshd_co[n]fig )
...
... grep -h 'sftp' ${files_for_grep[*]} 2>/dev/null
</pre>

<p>I wonder if /etc/sshd_config or /etc/openssh/sshd_config<br />
can actually happen when ReaR only supports<br />
OpenSSH &gt;= 3.1 with its default directories.</p>
<p>On my SLES10, SLES11, and SLES12 systems<br />
I have only /etc/ssh/sshd_config.</p>
<p>According to the</p>
<pre>
git log -p --follow usr/share/rear/rescue/default/500_ssh.sh
</pre>

<p>output</p>
<pre>
grep sftp /etc/sshd_co[n]fig /etc/ssh/sshd_co[n]fig
</pre>

<p>is there since the beginning and was enhanced to</p>
<pre>
grep sftp /etc/sshd_co[n]fig /etc/ssh/sshd_co[n]fig /etc/openssh/sshd_co[n]fig
</pre>

<p>via<br />
<a href="https://github.com/rear/rear/commit/d5f32d391aa0909c40d55a9c37a545f5c99d5b37">https://github.com/rear/rear/commit/d5f32d391aa0909c40d55a9c37a545f5c99d5b37</a><br />
unfortunately - as often - with a comment that only<br />
tells about the WHAT but not about the WHY.</p>
<p>I could also see directly in the code WHAT was changed<br />
so that a comment that tells about WHAT is useful<br />
but not strictly required.</p>
<p>In contrast leaving out the WHY could be a reason<br />
to assume there is no longer a reason behind so that<br />
we might clean up (i.e. remove) such inexplicable stuff?</p>
<p>At least for me it seems it may have become obsolete<br />
nowadays bacause I have only /etc/ssh/sshd_config.</p>
<p>Cf.<br />
<a href="https://github.com/rear/rear/pull/1530#issuecomment-337493807">https://github.com/rear/rear/pull/1530#issuecomment-337493807</a></p>
<h4 id="olivero2_commented_at_2017-10-19_1315"><img src="https://avatars.githubusercontent.com/u/4660803?v=4" width="50"><a href="https://github.com/OliverO2">OliverO2</a> commented at <a href="https://github.com/rear/rear/pull/1538#issuecomment-337904240">2017-10-19 13:15</a>:<a class="headerlink" href="#olivero2_commented_at_2017-10-19_1315" title="Permanent link">&para;</a></h4>
<p>Not really: Having <code>/etc/sshd_config</code> or <code>/etc/openssh/sshd_config</code> with
OpenSSH &gt;= 3.1 would be a deviation from the original distribution
layout. In theory, of course this could be done, but why would a package
maintainer want to do this?</p>
<p>I'd treat the above directories as obsolete and safe to remove after all
these years.</p>
<p>I think it also makes sense to remove the previously existing sketchy
support for Centrify SSH files, as (if I am correct) Centrify SSH
binaries are not copied to rescue media. Otherwise ReaR would run the
risk of exposing an additional set of Centrify-specific secrets by
accident, though Centrify SSH would be unusable on a rescue system
anyway.</p>
<h4 id="jsmeix_commented_at_2017-10-19_1346"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1538#issuecomment-337912579">2017-10-19 13:46</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-10-19_1346" title="Permanent link">&para;</a></h4>
<p>Hooray!<br />
I will remove them from the code.</p>
<h4 id="jsmeix_commented_at_2017-10-19_1414"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1538#issuecomment-337921396">2017-10-19 14:14</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-10-19_1414" title="Permanent link">&para;</a></h4>
<p>There is no longer any 'centrify' (ignore case) in the code<br />
or in a documentation file.</p>
<p>Since<br />
<a href="https://github.com/rear/rear/pull/1538/commits/67130817ef40ae26f86aef4a6543a2ba34a4e590">https://github.com/rear/rear/pull/1538/commits/67130817ef40ae26f86aef4a6543a2ba34a4e590</a><br />
there is no longer 'openssh' in the code except in comments<br />
and in doc/user-guide/02-getting-started.adoc as</p>
<pre>
The most basic requirement for Relax-and-Recover is having bash,
and ubiquitous Linux tools like:
...
 - ssh (openssh-clients)
</pre>

<h4 id="jsmeix_commented_at_2017-10-19_1416"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1538#issuecomment-337921855">2017-10-19 14:16</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-10-19_1416" title="Permanent link">&para;</a></h4>
<p>Things work still well for me so that I will "just merge" this one<br />
so that also others test it in the GitHub master code because<br />
in case of issues I need issue reports soon to be able to fix<br />
things before the ReaR 2.3 release.</p>
<h4 id="jsmeix_commented_at_2017-10-19_1432"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1538#issuecomment-337926783">2017-10-19 14:32</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-10-19_1432" title="Permanent link">&para;</a></h4>
<p>With this pull request merged there is now<br />
only support for OpenSSH 3.1 and later with its default directory<br />
/etc/ssh/ for keys and config files and its default sshd config file<br />
/etc/ssh/sshd_config for the SSH setup of the recovery system.<br />
I removed support for non-standard directories<br />
like /etc/openssh or non-standard sshd config files<br />
like /etc/sshd_config or /etc/openssh/sshd_config.<br />
I documented in the SSH_* section in default.conf<br />
how to manually set up ReaR with a secure shell<br />
software other than OpenSSH &gt;= 3.1.<br />
I removed the incomplete support for CentrifySSH<br />
but did not make OpenSSH mandatory for ReaR<br />
so that the initial problem in<br />
<a href="https://github.com/rear/rear/issues/836">https://github.com/rear/rear/issues/836</a><br />
does not re-appear (in particular not with SSH_FILES='no').</p>
<h4 id="olivero2_commented_at_2017-10-19_2156"><img src="https://avatars.githubusercontent.com/u/4660803?v=4" width="50"><a href="https://github.com/OliverO2">OliverO2</a> commented at <a href="https://github.com/rear/rear/pull/1538#issuecomment-338049422">2017-10-19 21:56</a>:<a class="headerlink" href="#olivero2_commented_at_2017-10-19_2156" title="Permanent link">&para;</a></h4>
<p>@jsmeix<br />
I have looked at all the individual commits since my last review of
<a href="https://github.com/rear/rear/pull/1530">https://github.com/rear/rear/pull/1530</a>.
Also looks good to me.</p>
<p>I have also tested the very latest master commit on Ubuntu 16.04 LTS
with the default configuration plus <code>SSH_ROOT_PASSWORD</code>. Everything was
working fine.</p>
<p>Thank you for lots of hard work, looks pretty complete now! Hope there
will be some other test results coming in from people running ReaR on
other supported platforms.</p>
<h4 id="jsmeix_commented_at_2017-10-20_1007"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1538#issuecomment-338164716">2017-10-20 10:07</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-10-20_1007" title="Permanent link">&para;</a></h4>
<p>Via<br />
<a href="https://github.com/rear/rear/commit/5985fec78c74f099085f7eca30e60160a022dc44">https://github.com/rear/rear/commit/5985fec78c74f099085f7eca30e60160a022dc44</a><br />
I simplified the comments in the SSH_ section a bit<br />
to avoid overcomplicated wording as mentioned in<br />
<a href="https://github.com/rear/rear/pull/1538#discussion_r145833720">https://github.com/rear/rear/pull/1538#discussion_r145833720</a></p>
<h4 id="jsmeix_commented_at_2017-10-20_1015"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1538#issuecomment-338166566">2017-10-20 10:15</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-10-20_1015" title="Permanent link">&para;</a></h4>
<p>@OliverO2<br />
many thanks for your careful review and continuous testing<br />
and even more thanks for your helpful comments that<br />
I needed so much to be able to implement things<br />
where I am not at all an expert.</p>
<p>You really helped a lot to make ReaR both more secure<br />
and even better usable at the same time because now<br />
the SSH config is much more user-friendly:</p>
<p>Unexperienced users just need to set</p>
<pre>
SSH_ROOT_PASSWORD="rear"
</pre>

<p>to get remote access to the recovery system<br />
(via a fallback RSA key that is generated during recovery system
startup)<br />
and<br />
experienced admins can now specify in detail<br />
what exactly they want regarding SSH.</p>
<h4 id="olivero2_commented_at_2017-10-23_2309"><img src="https://avatars.githubusercontent.com/u/4660803?v=4" width="50"><a href="https://github.com/OliverO2">OliverO2</a> commented at <a href="https://github.com/rear/rear/pull/1538#issuecomment-338822611">2017-10-23 23:09</a>:<a class="headerlink" href="#olivero2_commented_at_2017-10-23_2309" title="Permanent link">&para;</a></h4>
<p>@jsmeix<br />
Tonight - with some time to let all the details settle - I have again
looked at the final result of all SSH changes and it still makes sense
to me. The code covers all the important use cases and allows further
customization via standard ReaR mechanisms.</p>
<p>It is my impression that the options are pretty simple to use, although
the current documentation in <code>default.conf</code> suggests otherwise as it
contains more than 100 lines. So I've tried to extract my understanding
of how configuration alternatives are meant to be used:</p>
<h4 id="ssh_configuration">SSH configuration<a class="headerlink" href="#ssh_configuration" title="Permanent link">&para;</a></h4>
<ul>
<li>This configuration only affects the rescue system. A system restored
    by ReaR will receive its SSH configuration entirely from its backup.</li>
<li>ReaR by default supports OpenSSH versions &gt;= 3.1 and SSH files at
    standard locations.</li>
<li>For a rescue medium free of secrets, just use the default
    configuration:<ul>
<li>You can access the rescue system's root account via SSH via
    public/private key if that was permitted on the original system
    (via <code>authorized_keys</code>).</li>
<li>Accessing other systems from the rescue system via SSH would
    require entering a password (as there are no private keys on the
    rescue medium).</li>
</ul>
</li>
<li>To support added functionality on the running rescue system is
    possible at the price of having the rescue medium contain secrets:<ul>
<li>To access the rescue system with a password, set
    <code>SSH_ROOT_PASSWORD</code>.</li>
<li>To access other systems via root's passphrase-protected SSH
    private keys present on the original system, set <code>SSH_FILES=y</code>.</li>
<li>To access other systems via root's protected and unprotected SSH
    private keys present on the original system, set <code>SSH_FILES=y</code>
    and <code>SSH_UNPROTECTED_PRIVATE_KEYS=y</code>.</li>
</ul>
</li>
<li>For special needs, you have these options:<ul>
<li>You can specify the SSH configuration files individually by
    setting <code>SSH_FILES</code> to an array, whose elements are the file
    paths. Elements of this array receive special key protection if
    configured.</li>
<li>You can use <code>COPY_AS_IS</code> to copy more files (without special
    treatment).</li>
<li>You can use <code>COPY_AS_IS_EXCLUDE</code> to exclude any SSH file from
    being copied.</li>
</ul>
</li>
</ul>
<p>Is that correct and sufficiently complete or did I miss something
important?</p>
<p>Maybe the documentation could be streamlined a bit. Hopefully some
reasoning that led to the current functionality could be left out. And
standard ReaR functionality, such as using REQUIRED_PROGS and LIBS to
possibly add support for other SSH versions, could also be left out
here. If you think that some details are important, maybe these should
go into some kind of migration guide or into the release notes.</p>
<h4 id="jsmeix_commented_at_2017-10-24_1026"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1538#issuecomment-338945768">2017-10-24 10:26</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-10-24_1026" title="Permanent link">&para;</a></h4>
<p>@OliverO2<br />
many thanks for your review!</p>
<p>Via
<a href="https://github.com/rear/rear/pull/1543">https://github.com/rear/rear/pull/1543</a><br />
I simplified the documentation in default.conf according to your<br />
<a href="https://github.com/rear/rear/pull/1538#issuecomment-338822611">https://github.com/rear/rear/pull/1538#issuecomment-338822611</a></p>
<h4 id="jsmeix_commented_at_2017-10-24_1431"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1538#issuecomment-339010618">2017-10-24 14:31</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-10-24_1431" title="Permanent link">&para;</a></h4>
<p>Via<br />
<a href="https://github.com/rear/rear/commit/9d2e91c15e6ce0ab897cefd09201f7f64b740f11">https://github.com/rear/rear/commit/9d2e91c15e6ce0ab897cefd09201f7f64b740f11</a><br />
I had to re-add what to do when a different secure shell software<br />
is used (other than OpenSSH versions &gt;= 3.1)<br />
plus<br />
the explicit info that with SSH_FILES='no' there is no sshd<br />
in the rescue/recovery system (as requested by @gdha )</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2026 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2017-10-19.1538.pr.merged.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
