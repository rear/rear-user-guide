<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#1570 PR merged: Add support for Bridge Interfaces - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#1570 PR merged: Add support for Bridge Interfaces";
        var mkdocs_page_input_path = "issues/2017-11-08.1570.pr.merged.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_nas.html">Internal Backup with tar to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_rsync.html">Internal Backup with rsync to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/rsync.html">External Backup using BACKUP=RSYNC method</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/rbme.html">External Backup using RBME</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/restic.html">External Backup using restic</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/duplicity.html">External Backup using duplicity</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../development/squash-git-log-commments.html">How to squash git log comments into one line</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#1570 PR merged: Add support for Bridge Interfaces</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="1570_pr_merged_add_support_for_bridge_interfaces"><a href="https://github.com/rear/rear/pull/1570">#1570 PR</a> <code>merged</code>: Add support for Bridge Interfaces<a class="headerlink" href="#1570_pr_merged_add_support_for_bridge_interfaces" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>fixed / solved / done</code></p>
<h4 id="rmetrich_opened_issue_at_2017-11-08_1423"><img src="https://avatars.githubusercontent.com/u/1163635?u=36b5e32e1dd55f1ce77cad431a5683fce40a7934&v=4" width="50"><a href="https://github.com/rmetrich">rmetrich</a> opened issue at <a href="https://github.com/rear/rear/pull/1570">2017-11-08 14:23</a>:<a class="headerlink" href="#rmetrich_opened_issue_at_2017-11-08_1423" title="Permanent link">&para;</a></h4>
<p>This is a respin of the previous PR I closed because it was suboptimal
regarding bridges on virtual interfaces (such as libvirt bridges used
with KVM).</p>
<pre><code>Add support for Bridge Interfaces

Bridge interfaces are widely used. This patch enables configurations as
shown below:
1. Bridge over simple Ethernet
2. Bridge over Bond
3. Bridge over Vlan interface

Usually, virtual interfaces are skipped, but for Bridges to work, we
consider Bridges as physical interfaces, because the Bridge interface
holds the IP address, not the physical interface attached to the Bridge.
</code></pre>
<p>Commit 0c0ee4a032c1b44135a07e28e89c3da01dde99d5 is identical to the one
that has been approved.<br />
Commit ff22996de6ea7035eec4e829053b1ad80a9f390d fixes the support of
bridge when using Simplified bonding.<br />
Commit 0958e2aa7a02552e299dd1169c99066e225874c1 limits the bridge
interfaces to the ones linked to physical interfaces somehow (purely
virtual bridges are useless when recovering).</p>
<h4 id="jsmeix_commented_at_2017-11-08_1537"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1570#issuecomment-342855322">2017-11-08 15:37</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-11-08_1537" title="Permanent link">&para;</a></h4>
<p>I set same assignees and reviewers here<br />
as in
<a href="https://github.com/rear/rear/pull/1553">https://github.com/rear/rear/pull/1553</a></p>
<h4 id="jsmeix_commented_at_2017-11-17_0854"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1570#issuecomment-345182914">2017-11-17 08:54</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-11-17_0854" title="Permanent link">&para;</a></h4>
<p>@gdha<br />
could you have a look at the code and if it looks o.k.<br />
we could merge it to have it in ReaR 2.3.</p>
<h4 id="gdha_commented_at_2017-11-17_0907"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/pull/1570#issuecomment-345185772">2017-11-17 09:07</a>:<a class="headerlink" href="#gdha_commented_at_2017-11-17_0907" title="Permanent link">&para;</a></h4>
<p>@rmetrich @jsmeix Is this pull request still relevant in the sense of PR
<a href="https://github.com/rear/rear/pull/1574">https://github.com/rear/rear/pull/1574</a>?</p>
<h4 id="rmetrich_commented_at_2017-11-17_0916"><img src="https://avatars.githubusercontent.com/u/1163635?u=36b5e32e1dd55f1ce77cad431a5683fce40a7934&v=4" width="50"><a href="https://github.com/rmetrich">rmetrich</a> commented at <a href="https://github.com/rear/rear/pull/1570#issuecomment-345188064">2017-11-17 09:16</a>:<a class="headerlink" href="#rmetrich_commented_at_2017-11-17_0916" title="Permanent link">&para;</a></h4>
<p>@gdha yes, please integrate in rear2.3, PR #1574 will be rear2.4 and we
already hit such issues</p>
<h4 id="rmetrich_commented_at_2017-11-28_1541"><img src="https://avatars.githubusercontent.com/u/1163635?u=36b5e32e1dd55f1ce77cad431a5683fce40a7934&v=4" width="50"><a href="https://github.com/rmetrich">rmetrich</a> commented at <a href="https://github.com/rear/rear/pull/1570#issuecomment-347563713">2017-11-28 15:41</a>:<a class="headerlink" href="#rmetrich_commented_at_2017-11-28_1541" title="Permanent link">&para;</a></h4>
<p>Hello @gozora @gdha<br />
I'd like to inform you that the code <strong>doesn't</strong> work on RHEL6, because
it makes use of "ip" commands not understood, such as "ip link add name
XXX <strong>master</strong> YYY".<br />
This is due to @gozora making me remove Commit
<a href="https://github.com/rear/rear/pull/1553/commits/d675166f3ca92f525d916abfc25dbcd1d7126fe5">https://github.com/rear/rear/pull/1553/commits/d675166f3ca92f525d916abfc25dbcd1d7126fe5</a>
;-)<br />
(use of brctl).<br />
I'll hence reintroduce brctl for older "ip" releases.</p>
<p>QUESTION: Should I submit a new PR or can I reuse this one?</p>
<h4 id="jsmeix_commented_at_2017-11-29_0840"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1570#issuecomment-347790094">2017-11-29 08:40</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-11-29_0840" title="Permanent link">&para;</a></h4>
<p>@rmetrich<br />
I never tried to re-use an already merged pull request<br />
therefore I would recommend to be on the safe side and<br />
do a subsequent change for an already merged pull request<br />
via a new separated pull request.</p>
<p>Regarding<br />
<a href="https://github.com/rear/rear/pull/1553#issuecomment-340003156">https://github.com/rear/rear/pull/1553#issuecomment-340003156</a><br />
and<br />
<a href="https://github.com/rear/rear/commit/d675166f3ca92f525d916abfc25dbcd1d7126fe5">https://github.com/rear/rear/commit/d675166f3ca92f525d916abfc25dbcd1d7126fe5</a></p>
<pre>
if CONDITION ; then
    REQUIRED_PROGS=( "${REQUIRED_PROGS[@]}" "brctl" )
fi
</pre>

<p>I agree with @gozora that we should aviod to force users<br />
to install 'brctl' if that is not really mandatory.</p>
<p>For example on my SLES11 system I have 'brctl' by default<br />
but on my SLES12 system I do no longer have 'brctl' by default<br />
(I assume because nowadays 'ip' should be preferred).</p>
<p>Accordingly - if possible - the code in ReaR should at runtime<br />
decide if 'brctl' should be called or the 'ip' command.</p>
<p>For example a more conservative approach<br />
via a simple testing if 'brctl' is executable like</p>
<pre>
# Use 'brctl' if executable (even if also 'ip' is executable)
# because 'brctl' should work backward compatible
# cf. https://github.com/rear/rear/pull/1570
if has_binary brctl ; then
    brctl ...
else
    ip ...
fi
</pre>

<p>Or an approach that perfers the modern way and only<br />
falls back to the old way if the modern way fails like</p>
<pre>
# First try 'ip' because 'ip' is the future-proof way
# and fall back to 'brctl' if 'ip' failed
# cf. https://github.com/rear/rear/pull/1570
ip ... || brctl ... || BugError "Neither 'ip' nor 'brctl' worked"
</pre>

<p>cf. "Dirty hacks welcome" at<br />
<a href="https://github.com/rear/rear/wiki/Coding-Style">https://github.com/rear/rear/wiki/Coding-Style</a></p>
<p>Additionally you should get 'brctl' into the recovery system<br />
in a non-mandatory way (i.e. only if 'brctl' is installed on the<br />
original system) via:</p>
<pre>
# Have 'brctl' in the recovery system (if available)
# because 'brctl' is needed on older systems where
# things like "ip link add name XXX master YYY" are
# not supported, cf. https://github.com/rear/rear/pull/1570
if CONDITION ; then
    PROGS=( "${PROGS[@]}" "brctl" )
fi
</pre>

<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2026 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2017-11-08.1570.pr.merged.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
