<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#762 Issue closed: Rear not backin up all the partitions - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#762 Issue closed: Rear not backin up all the partitions";
        var mkdocs_page_input_path = "issues/2016-02-04.762.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#762 Issue closed: Rear not backin up all the partitions</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="762_issue_closed_rear_not_backin_up_all_the_partitions"><a href="https://github.com/rear/rear/issues/762">#762 Issue</a> <code>closed</code>: Rear not backin up all the partitions<a class="headerlink" href="#762_issue_closed_rear_not_backin_up_all_the_partitions" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>support / question</code></p>
<h4 id="suaveyosi_opened_issue_at_2016-02-04_1548"><img src="https://avatars.githubusercontent.com/u/17067631?v=4" width="50"><a href="https://github.com/suaveyosi">suaveyosi</a> opened issue at <a href="https://github.com/rear/rear/issues/762">2016-02-04 15:48</a>:<a class="headerlink" href="#suaveyosi_opened_issue_at_2016-02-04_1548" title="Permanent link">&para;</a></h4>
<p>Hello,</p>
<p>first of all thank you for your work, this is just what I was looking
for. I am testing rear at a machine, changing its configuration and
playing with rear options to perform backup &amp; recovery.</p>
<p>So far it works as expected , but there has been an issue with one of my
test.<br />
My environment is Red Hat Enterprise Linux Server release 7.1 (Maipo)<br />
Linux hlrhvmkstest01 3.10.0-229.7.2.el7.x86_64</p>
<p>Here is my config file, I make backup of my machine over a different
machine called hlrhvmksitx01:<br />
OUTPUT=ISO<br />
BACKUP=NETFS<br />
BACKUP_URL="nfs://hlrhvmksitx01/rear_isos"<br />
GRUB_RESCUE=1<br />
GRUB_RESCUE_PASSWORD="..password properly encrypted...."</p>
<p>I have two disks at my machine /dev/sda and /dev/sdb.<br />
/dev/sda is parted, sda1 contains grub and /boot and sda2 contains vg00
and all the FS with the OS.<br />
/dev/sdb is parted in three. /dev/sdb1, /dev/sdb2 and /dev/sdb3, each of
them contains a FS and is mounted on /test1 /test2 and /test3
respectively.</p>
<p>If I perform rear backup and rear recover over all of them it works fine
as expected. Lets assume that we are not interested in /dev/sdb3 so I
add this line at config file:<br />
<em>EXCLUDE_RECREATE=( "${EXCLUDE_RECREATE[@]}" "/dev/sdb3" )</em></p>
<p>I execute rear mkbackup and as result the disklayout.conf file contains
the following lines commented:<br />
**_#part /dev/sdb 268435456 1048576 primary none /dev/sdb1</p>
<h1 id="part_devsdb_268435456_269484032_primary_none_devsdb2">part /dev/sdb 268435456 269484032 primary none /dev/sdb2<a class="headerlink" href="#part_devsdb_268435456_269484032_primary_none_devsdb2" title="Permanent link">&para;</a></h1>
<h1 id="part_devsdb_535822336_537919488_primary_none_devsdb3">part /dev/sdb 535822336 537919488 primary none /dev/sdb3<a class="headerlink" href="#part_devsdb_535822336_537919488_primary_none_devsdb3" title="Permanent link">&para;</a></h1>
<p>....<br />
_fs /dev/sdb1 /test1 ext4 uuid=9b044fc7-bc28-4d2d-9fb8-8d1a615cda68
label= blocksize=1024 reserved_blocks=3% max_mounts=-1
check_interval=0d bytes_per_inode=4096
default_mount_options=user_xattr,acl
options=rw,relatime,data=ordered<br />
fs /dev/sdb2 /test2 ext4 uuid=1eb92ec5-56b4-46ea-85bf-2d2f0f056b15
label= blocksize=1024 reserved_blocks=3% max_mounts=-1
check_interval=0d bytes_per_inode=4096
default_mount_options=user_xattr,acl options=rw,relatime,data=ordered</p>
<h1 id="fs_devsdb3_test3_ext4_uuid85b25f10-d14b-45fb-b2b8-a449449d2028_label_blocksize1024_reserved_blocks3_max_mounts-1_check_interval0d_bytes_per_inode4088_default_mount_optionsuser_xattracl_options_rwrelatimedataordered_">fs /dev/sdb3 /test3 ext4 uuid=85b25f10-d14b-45fb-b2b8-a449449d2028 label= blocksize=1024 reserved_blocks=3% max_mounts=-1 check_interval=0d bytes_per_inode=4088 default__mount_options=user_xattr,acl options_=rw,relatime,data=ordered__**<a class="headerlink" href="#fs_devsdb3_test3_ext4_uuid85b25f10-d14b-45fb-b2b8-a449449d2028_label_blocksize1024_reserved_blocks3_max_mounts-1_check_interval0d_bytes_per_inode4088_default_mount_optionsuser_xattracl_options_rwrelatimedataordered_" title="Permanent link">&para;</a></h1>
<p>I think that there is some kind of mistake, I am telling at the config
file that I am not interested only in /dev/sdb3, but as consequence all
the partitions are automatically marked as not necessaries, despite its
FS keep uncomented. Obviously, when I try to make "rear recover" after
that I am getting the following errors:</p>
<p>_**"No code has been generated to restore device fs:/test1 (fs).<br />
Please add code to /var/lib/rear/layout/diskrestore.sh to manually
install it or choose abort.</p>
<ol>
<li>Continue</li>
<li>Abort "**_</li>
</ol>
<p>If I choose to continue, all the information at /dev/sdb is erased.</p>
<p>I have performed other test where I manually excluded an lvol and it
worked fine, the problem seems to be only with physical partitions of
the same disk.</p>
<p>Thanks in advance! Regards.</p>
<h4 id="gdha_commented_at_2016-02-04_1600"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/762#issuecomment-179916129">2016-02-04 16:00</a>:<a class="headerlink" href="#gdha_commented_at_2016-02-04_1600" title="Permanent link">&para;</a></h4>
<p>The usage is more in the trend of:</p>
<pre><code>./examples/SLE12-SP1-btrfs-example.conf:# matching entries in EXCLUDE_RECREATE like "fs:/tmp" would result
./examples/SLE12-SP1-btrfs-example.conf:EXCLUDE_RECREATE=( "${EXCLUDE_RECREATE[@]}" 'fs:/var/tmp' 'fs:/srv' 'fs:/var/lib/pgsql' 'fs:/var/spool' 'fs:/var/lib/libvirt/images' 'fs:/var/opt' 'fs:/tmp' 'fs:/.snapshots' 'fs:/var/lib/named' 'fs:/var/log' 'fs:/boot/grub2/i386' 'fs:/var/lib/mariadb' 'fs:/home' 'fs:/var/crash' 'fs:/var/lib/mailman' 'fs:/opt' 'fs:/usr/local' 'fs:/boot/grub2/x86_64' )
</code></pre>
<p>Excluding a partition is IMHO not coded in rear.</p>
<h4 id="suaveyosi_commented_at_2016-02-04_1719"><img src="https://avatars.githubusercontent.com/u/17067631?v=4" width="50"><a href="https://github.com/suaveyosi">suaveyosi</a> commented at <a href="https://github.com/rear/rear/issues/762#issuecomment-179954245">2016-02-04 17:19</a>:<a class="headerlink" href="#suaveyosi_commented_at_2016-02-04_1719" title="Permanent link">&para;</a></h4>
<p>Thank you for the quick response. I have tested and it worked as
expected, my problem is now solved!</p>
<p>Excuse me because I am pretty novice at Github (I have just registered
myself) I have a different question, but I'm not sure if I should ask it
here or in a different post.</p>
<p>My question is, I am saving my backup files in a different server over
NFS, but, if at my server the grub becomes corrupted, I have no way to
access to rear in order to perform the restore, which will also fix my
Grub. What would be the simplest way to accomplish that (access rear
even tough the grub is corrupted to perform recover task)?</p>
<p>Thanks again!</p>
<h4 id="jsmeix_commented_at_2016-02-05_0912"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/762#issuecomment-180262175">2016-02-05 09:12</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-02-05_0912" title="Permanent link">&para;</a></h4>
<p>@suaveyosi<br />
in general for separated issues create separated issues at GitHub.</p>
<p>To recover any system regardless what got corrupted or broken, you boot
the rear recovery system (i.e. the rear ISO image) either on the same
hardware if the hardware is still o.k. or on new compatible replacement
hardware if the hardware got damaged.</p>
<p>Basically rear recovery is a re-installation from scratch.</p>
<p>For some background information you may have a look at<br />
<a href="https://en.opensuse.org/SDB:Disaster_Recovery">https://en.opensuse.org/SDB:Disaster_Recovery</a></p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2025 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2016-02-04.762.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
