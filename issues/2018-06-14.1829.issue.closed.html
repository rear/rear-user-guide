<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#1829 Issue closed: 'rear recover' fails when migrating on Debian 9.4 from KVM to XEN VM and vice versa - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#1829 Issue closed: \u0027rear recover\u0027 fails when migrating on Debian 9.4 from KVM to XEN VM and vice versa";
        var mkdocs_page_input_path = "issues/2018-06-14.1829.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#1829 Issue closed: 'rear recover' fails when migrating on Debian 9.4 from KVM to XEN VM and vice versa</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="1829_issue_closed_rear_recover_fails_when_migrating_on_debian_94_from_kvm_to_xen_vm_and_vice_versa"><a href="https://github.com/rear/rear/issues/1829">#1829 Issue</a> <code>closed</code>: 'rear recover' fails when migrating on Debian 9.4 from KVM to XEN VM and vice versa<a class="headerlink" href="#1829_issue_closed_rear_recover_fails_when_migrating_on_debian_94_from_kvm_to_xen_vm_and_vice_versa" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>support / question</code>, <code>fixed / solved / done</code></p>
<h4 id="ledj_opened_issue_at_2018-06-14_0827"><img src="https://avatars.githubusercontent.com/u/1801017?u=f171dca4e76feee27d53ddf429713a9642ac40e0&v=4" width="50"><a href="https://github.com/ledj">ledj</a> opened issue at <a href="https://github.com/rear/rear/issues/1829">2018-06-14 08:27</a>:<a class="headerlink" href="#ledj_opened_issue_at_2018-06-14_0827" title="Permanent link">&para;</a></h4>
<p>rear recover discovers Debian 64 bit as 32 bit<br />
rear recover doesn't install bootloader</p>
<p><a href="https://github.com/rear/rear/files/2101440/rear-debian.log">rear-debian.log</a></p>
<h4 id="jsmeix_commented_at_2018-06-14_0903"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1829#issuecomment-397224844">2018-06-14 09:03</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-06-14_0903" title="Permanent link">&para;</a></h4>
<p>@ledj<br />
provide the very basic information as plain text as requested in<br />
<a href="https://github.com/rear/rear/blob/master/.github/ISSUE_TEMPLATE.md">https://github.com/rear/rear/blob/master/.github/ISSUE_TEMPLATE.md</a><br />
I won't reverse-engineer the very basic information out of a debug log
file.</p>
<h4 id="jsmeix_commented_at_2018-06-14_1315"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1829#issuecomment-397291995">2018-06-14 13:15</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-06-14_1315" title="Permanent link">&para;</a></h4>
<p>@ledj<br />
in your rear-debian.log I notice (excerpts):</p>
<pre>
+ source /usr/share/rear/finalize/Linux-i386/620_install_grub2.sh
...
2018-06-14 07:55:15.608787265 Installing GRUB2 boot loader
/dev/xvda3'
/dev/xvda3 ]]
Installing for i386-pc platform.
grub-install: warning: cannot open directory `/usr/share/locale': No such file or directory.
grub-install: warning: this GPT partition label contains no BIOS Boot Partition; embedding won't be possible.
grub-install: warning: Embedding is not possible.  GRUB can only be installed in this setup by using blocklists.  However, blocklists are UNRELIABLE and their use is discouraged..
grub-install: error: will not proceed with blocklists.
</pre>

<p>I guess <code>grub-install</code> is right and you need to adapt the partitioning<br />
on the original system to something that <code>grub-install</code> supports.</p>
<p>Or do you perhaps not use GRUB2 (which is used as fallback by ReaR) as
bootloader?<br />
In this case see the BOOTLOADER variable in default.conf.</p>
<h4 id="ledj_commented_at_2018-06-14_1937"><img src="https://avatars.githubusercontent.com/u/1801017?u=f171dca4e76feee27d53ddf429713a9642ac40e0&v=4" width="50"><a href="https://github.com/ledj">ledj</a> commented at <a href="https://github.com/rear/rear/issues/1829#issuecomment-397413890">2018-06-14 19:37</a>:<a class="headerlink" href="#ledj_commented_at_2018-06-14_1937" title="Permanent link">&para;</a></h4>
<p>@jsmeix Ok sorry for not reporting correctly. Was told to supply the
log, and thought this was enough.</p>
<h4 id="jsmeix_commented_at_2018-06-15_0809"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1829#issuecomment-397547068">2018-06-15 08:09</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-06-15_0809" title="Permanent link">&para;</a></h4>
<p>@ledj<br />
I could extract most (but not all) of the basic information from the
log<br />
but that is tedious work (not really helpful with free support ;-)<br />
so that the more easy you could make it for us to correctly imagine<br />
what goes on on your particular system (for example I am not a Debian
user)<br />
the better things could work out in the end.</p>
<p>In this case I would like to know in particular what the partitioning<br />
of your original system of the (main) system disk is.<br />
I.e. what is the (full) output of the command</p>
<pre>
# parted -s /dev/sda unit MiB print
</pre>

<p>where you may have to replace <code>/dev/sda</code> by the actual device node<br />
of your (main) system disk (probably <code>/dev/xvda</code>).</p>
<p>FYI:</p>
<p>In your rear-debian.log I noticed right now (excerpts):</p>
<pre>
Relax-and-Recover 2.3 / 2017-12-20
...
Partition rear-noname on /dev/xvda: size reduced to fit on disk.
...
End changed from 107374190592 to 107374165504.
</pre>

<p>which indicates that on your replacement "hardware"<br />
(in your case probably a replacement virtual machine)<br />
you use a replacement (virtual) disk with different size.</p>
<p>Recreation on a bit different hardware is actually a migration.</p>
<p>In case of migration with ReaR I would really recommend<br />
to use our current ReaR upstream GitHub master code.</p>
<p>To use our current ReaR upstream GitHub master code<br />
do the following:</p>
<p>Basically "git clone" it into a separated directory and then<br />
configure and run ReaR from within that directory like:</p>
<pre>
# git clone https://github.com/rear/rear.git

# mv rear rear.github.master

# cd rear.github.master

# vi etc/rear/local.conf

# usr/sbin/rear -D mkbackup
</pre>

<p>Note the relative paths "etc/rear/" and "usr/sbin/".</p>
<p>For ReaR's so called "migration mode" I intentionally made major
changes<br />
to the partition resizing code in current ReaR upstream GitHub master
code<br />
to avoid really bad automated resizing results that had happened before,
see<br />
<a href="https://github.com/rear/rear/issues/1731">https://github.com/rear/rear/issues/1731</a><br />
<a href="https://github.com/rear/rear/pull/1733">https://github.com/rear/rear/pull/1733</a><br />
<a href="https://github.com/rear/rear/issues/102">https://github.com/rear/rear/issues/102</a></p>
<p>For a summary of that changes see the ReaR 2.4 release notes<br />
<a href="https://github.com/rear/rear.github.com/blob/master/documentation/release-notes-2-4.md">https://github.com/rear/rear.github.com/blob/master/documentation/release-notes-2-4.md</a><br />
therein read the section</p>
<pre>
Version 2.4 (June 2018)
...
New features, bigger enhancements, and possibly backward incompatible changes:

Major rework and changed default behaviour how ReaR behaves
in migration mode when partitions can or must be resized
to fit on replacement disks with different size.
...
</pre>

<p>see also<br />
<a href="https://github.com/rear/rear/issues/1822#issuecomment-396492635">https://github.com/rear/rear/issues/1822#issuecomment-396492635</a><br />
and regarding <code>size reduced to fit on disk</code> see in particular<br />
<a href="https://github.com/rear/rear/pull/1733#issuecomment-367680598">https://github.com/rear/rear/pull/1733#issuecomment-367680598</a></p>
<p>That <code>End changed from 107374190592 to 107374165504</code> here<br />
looks like another "fine" example how ReaR before<br />
<a href="https://github.com/rear/rear/commit/6414936ba30d6c13020eee8313e93a4e29debc54">https://github.com/rear/rear/commit/6414936ba30d6c13020eee8313e93a4e29debc54</a><br />
badly changes partitioning alingment because<br />
107374190592 = 13107201 * 512 * 16 (i.e. originally aligned to a 8 KiB
unit)<br />
while in contrast<br />
107374165504 = 209715167 * 512 (i.e. re-aligned by ReaR to only a 512 B
unit)</p>
<h4 id="ledj_commented_at_2018-06-15_1235"><img src="https://avatars.githubusercontent.com/u/1801017?u=f171dca4e76feee27d53ddf429713a9642ac40e0&v=4" width="50"><a href="https://github.com/ledj">ledj</a> commented at <a href="https://github.com/rear/rear/issues/1829#issuecomment-397606846">2018-06-15 12:35</a>:<a class="headerlink" href="#ledj_commented_at_2018-06-15_1235" title="Permanent link">&para;</a></h4>
<p>@jsmeix</p>
<p>Super thanks! And generally and in this case, I'm trying to find a way
to convert from a KVM based (Proxmox) VM to a XenServer (xcp-ng.org) VM
(back and forth actually as we use both). And you are correct, even
though the disk is set to the same size on original and the migrated,
sizes seem to differ slightly as noticed by rear.</p>
<p>Output of "parted -s /dev/sda unit MiB print" on original system is:</p>
<pre>
root@debian:~# parted -s /dev/sda unit MiB print
Model: QEMU QEMU HARDDISK (scsi)
Disk /dev/sda: 102400MiB
Sector size (logical/physical): 512B/512B
Partition Table: gpt
Disk Flags:

Number  Start    End        Size       File system     Name  Flags
 1      1,00MiB  954MiB     953MiB     ext2
 2      954MiB   1908MiB    954MiB     linux-swap(v1)
 3      1908MiB  102399MiB  100491MiB                        lvm
</pre>

<h4 id="jsmeix_commented_at_2018-06-15_1333"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1829#issuecomment-397621311">2018-06-15 13:33</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-06-15_1333" title="Permanent link">&para;</a></h4>
<p>@ledj<br />
for comparison what I have on one of my<br />
GPT partitioned systems with BIOS booting<br />
(it is a SLES15 default partitioning):</p>
<pre>
# parted -s /dev/sda unit MiB print
Model: ATA QEMU HARDDISK (scsi)
Disk /dev/sda: 20480MiB
Sector size (logical/physical): 512B/512B
Partition Table: gpt
Disk Flags: pmbr_boot

Number  Start     End       Size      File system     Name  Flags
 1      1.00MiB   9.00MiB   8.00MiB                         bios_grub
 2      9.00MiB   12906MiB  12897MiB  btrfs                 legacy_boot
 4      12906MiB  18431MiB  5525MiB   xfs
 3      18431MiB  20480MiB  2049MiB   linux-swap(v1)        swap
</pre>

<p>There is a 8 MiB <code>bios_grub</code> partition that is there for GRUB2<br />
so that GRUB2 can put its second stages there, cf.<br />
<a href="https://en.wikipedia.org/wiki/BIOS_boot_partition">https://en.wikipedia.org/wiki/BIOS_boot_partition</a></p>
<p>I think without such a BIOS boot partition you may run into<br />
booting problems out of a sudden at an arbitrary later time.<br />
Probably for some time it may work when GRUB2 "blindly"<br />
squeezes its second stages somehow somewhere into the<br />
hopefully empty "somewhat (depending on the GPT size) less than 1 MiB"
gap<br />
at the beginning of your disk i.e. after the GPT (where exactly does a
GPT end?)<br />
and before the first partition starts - but as GRUB2 reports</p>
<pre>
... this GPT partition label contains no BIOS Boot Partition; embedding won't be possible.
Embedding is not possible. GRUB can only be installed in this setup by using blocklists.
However, blocklists are UNRELIABLE and their use is discouraged.
grub-install: error: will not proceed with blocklists.
</pre>

<p>I still think the actual solution is to have such a BIOS boot partition.</p>
<p>In general migrating a system onto different hardware<br />
does not "just work", cf. "Inappropriate expectations" at<br />
<a href="https://en.opensuse.org/SDB:Disaster_Recovery">https://en.opensuse.org/SDB:Disaster_Recovery</a></p>
<p>In sufficiently simple cases it may "just work" but in general<br />
do not expect too much built-in intelligence from a program<br />
(written in plain bash which is not a programming language<br />
that is primarily meant for artificial intelligence ;-)<br />
that would do the annoying legwork for you.</p>
<p>For an example you may have a look at the<br />
"P2V HP microserver to VmWare" issue<br />
<a href="https://github.com/rear/rear/issues/943">https://github.com/rear/rear/issues/943</a></p>
<p>But migrating a system onto same hardware only with changed<br />
partition sizes should be more or less straightforward.</p>
<p>In this case it should be sufficient to edit disklayout.conf<br />
before you run "rear recover".</p>
<p>When you migrate with ReaR you could manually modify<br />
the disklayout.conf file and insert such a BIOS boot partition<br />
to get one on the replacement hardware when there is none<br />
on the original system.</p>
<p>For an example how a disklayout.conf file with a BIOS boot partition<br />
looks on my above system (excerpts, only <code>disk</code> <code>part</code> <code>fs</code> and <code>swap</code>
entries,<br />
i.e. leaving out all those btrfs related stuff that should not matter
here):</p>
<pre>
# Disk /dev/sda
# Format: disk <devname> <size(bytes)> <partition label type>
disk /dev/sda 21474836480 gpt
# Partitions on /dev/sda
# Format: part <device> <partition size(bytes)> <partition start(bytes)> <partition type|name> <flags> /dev/<partition>
part /dev/sda 8388608 1048576 rear-noname bios_grub /dev/sda1
part /dev/sda 13523484672 9437184 rear-noname legacy_boot /dev/sda2
part /dev/sda 2148515328 19326304256 rear-noname swap /dev/sda3
part /dev/sda 5793382400 13532921856 rear-noname none /dev/sda4
# Filesystems (only ext2,ext3,ext4,vfat,xfs,reiserfs,btrfs are supported).
# Format: fs <device> <mountpoint> <fstype> [uuid=<uuid>] [label=<label>] [<attributes>]
fs /dev/sda2 / btrfs uuid=f075b5ff-ba88-41db-ae32-feb4a639bdcd label= options=rw,relatime,space_cache,subvolid=267,subvol=/@/.snapshots/1/snapshot
fs /dev/sda4 /home xfs uuid=30f2e6fb-89cf-4c9b-a5a3-6e22d7e472a8 label=  options=rw,relatime,attr2,inode64,noquota
...
# Swap partitions or swap files
# Format: swap <filename> uuid=<uuid> label=<label>
swap /dev/sda3 uuid=b8a9d726-1d5b-42e7-b0d7-e8ba30ed57d0 label=
</pre>

<p>When you migrate with ReaR you would need to manually modify<br />
the disklayout.conf file in the already running ReaR recovery system<br />
e.g. before you run <code>rear recover</code> or while <code>rear recover</code> is running<br />
via the dialog that asks for confirmation of the disklayout.conf file.</p>
<p>It could be laborious and unhandy to manually edit<br />
disklayout.conf within the ReaR recovery system<br />
in particular you need to provide the values as byte values.</p>
<p>In this case have a look at RECOVERY_UPDATE_URL<br />
in usr/share/rear/conf/default.conf</p>
<p>For an example how RECOVERY_UPDATE_URL works see<br />
<a href="https://github.com/rear/rear/issues/943#issuecomment-236547810">https://github.com/rear/rear/issues/943#issuecomment-236547810</a></p>
<p>When you use the ReaR master code as 'git clone/checkout' see<br />
<a href="https://github.com/rear/rear/issues/943#issuecomment-237544630">https://github.com/rear/rear/issues/943#issuecomment-237544630</a><br />
what is special about the disklayout.conf file location<br />
in the ReaR recovery system that you must consider<br />
to make RECOVERY_UPDATE_URL work.</p>
<h4 id="jsmeix_commented_at_2018-06-15_1338"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1829#issuecomment-397622925">2018-06-15 13:38</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-06-15_1338" title="Permanent link">&para;</a></h4>
<p>@ledj<br />
as a dirty hack you could of course modify ReaR's<br />
usr/share/rear/finalize/Linux-i386/620_install_grub2.sh<br />
script as you like.<br />
Perhaps there is a <code>grub-install</code> command line option for your<br />
used GRUB2 to enforce it to be installed by using blocklists.<br />
My <code>grub-install</code> man page shows a <code>--force</code> command line option<br />
but I don't know if that helps in this case.</p>
<h4 id="jsmeix_commented_at_2018-06-15_1345"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1829#issuecomment-397624738">2018-06-15 13:45</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-06-15_1345" title="Permanent link">&para;</a></h4>
<p>@ledj<br />
a note regarding migrating to a "XenServer (xcp-ng.org) VM":<br />
I don't know about XEN (I only use KVM) but perhaps<br />
the section "Paravirtualization" in<br />
<a href="https://en.opensuse.org/SDB:Disaster_Recovery">https://en.opensuse.org/SDB:Disaster_Recovery</a><br />
could be of interest for you.</p>
<h4 id="jsmeix_commented_at_2018-06-15_1421"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1829#issuecomment-397636459">2018-06-15 14:21</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-06-15_1421" title="Permanent link">&para;</a></h4>
<p>@ledj<br />
a note regarding migrating from "this hardware" to "that hardware" and
vice versa<br />
where "this hardware" and "that hardware" have "basically same" disk
size:</p>
<p>In general I would recommend to leave some reasonable amount<br />
of unused disk space at the end of the disk where "reasonable amount"<br />
is the maximum expected variation of the "basically same" disk sizes.</p>
<p>In other words:<br />
I would recommend to use the disk only up to the minimum<br />
of the various slightly different available disk space values<br />
of the various disks of "basically same" size that you have.</p>
<p>Reason:<br />
This way - provided you use our current ReaR upstream GitHub master code
- you<br />
could re-create your system on each of your disks of "basically same"
size with<br />
byte-by-byte identical partitioning - provided you specify the right
vaules for<br />
AUTORESIZE_PARTITIONS<br />
AUTORESIZE_EXCLUDE_PARTITIONS<br />
AUTOSHRINK_DISK_SIZE_LIMIT_PERCENTAGE<br />
AUTOINCREASE_DISK_SIZE_THRESHOLD_PERCENTAGE<br />
as appropriate for your particular set of disks of "basically same"
size.</p>
<h4 id="jsmeix_commented_at_2018-06-15_1449"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1829#issuecomment-397645930">2018-06-15 14:49</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-06-15_1449" title="Permanent link">&para;</a></h4>
<p>Right now I made RECOVERY_UPDATE_URL hopefully easier to use via<br />
<a href="https://github.com/rear/rear/commit/803db236edd4f081bfd580b6177579e43752544a">https://github.com/rear/rear/commit/803db236edd4f081bfd580b6177579e43752544a</a></p>
<p>The idea is that one can no longer specify it only in
etc/rear/local.conf<br />
(where one may have to manually edit that file in the recovery
system).<br />
Now it should also work to individually specify it as needed via
something like</p>
<pre>
export RECOVERY_UPDATE_URL="http://my_internal_server/host123_rear_config.tgz"
</pre>

<p>directly before one calls "rear recover", cf.<br />
<a href="https://github.com/rear/rear/issues/1595#issuecomment-354804481">https://github.com/rear/rear/issues/1595#issuecomment-354804481</a></p>
<p>A precondition for specifying it this way is that it is not also
specified<br />
in etc/rear/local.conf because that would overwrite the <code>export</code>
setting.</p>
<h4 id="jsmeix_commented_at_2018-07-18_1007"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1829#issuecomment-405880793">2018-07-18 10:07</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-07-18_1007" title="Permanent link">&para;</a></h4>
<p>Because there are no further comments<br />
I assume this isssue is sufficiently answered<br />
so that I can close it hereby.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2024 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2018-06-14.1829.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
