<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#251 Issue closed: ERROR: FindStorageDrivers called but STORAGE_DRIVERS is empty - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#251 Issue closed: ERROR: FindStorageDrivers called but STORAGE_DRIVERS is empty";
        var mkdocs_page_input_path = "issues/2013-06-18.251.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_nas.html">Internal Backup with tar to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_rsync.html">Internal Backup with rsync to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/rsync.html">External Backup using BACKUP=RSYNC method</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/rbme.html">External Backup using RBME</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/restic.html">External Backup using restic</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/duplicity.html">External Backup using duplicity</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../development/squash-git-log-commments.html">How to squash git log comments into one line</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#251 Issue closed: ERROR: FindStorageDrivers called but STORAGE_DRIVERS is empty</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="251_issue_closed_error_findstoragedrivers_called_but_storage_drivers_is_empty"><a href="https://github.com/rear/rear/issues/251">#251 Issue</a> <code>closed</code>: ERROR: FindStorageDrivers called but STORAGE_DRIVERS is empty<a class="headerlink" href="#251_issue_closed_error_findstoragedrivers_called_but_storage_drivers_is_empty" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code></p>
<h4 id="gdha_opened_issue_at_2013-06-18_1359"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> opened issue at <a href="https://github.com/rear/rear/issues/251">2013-06-18 13:59</a>:<a class="headerlink" href="#gdha_opened_issue_at_2013-06-18_1359" title="Permanent link">&para;</a></h4>
<pre><code>#-&gt; rear -v mkrescue
Relax-and-Recover 1.14-git201306171045 / 2013-06-17
Using log file: /var/log/rear/rear-witsbebelnx02.log
Creating disk layout
Creating root filesystem layout
ERROR: FindStorageDrivers called but STORAGE_DRIVERS is empty
Aborting due to an error, check /var/log/rear/rear-witsbebelnx02.log for details
Terminated
</code></pre>
<p>Going deeper via the logs:</p>
<pre><code>2013-06-18 15:10:17 Including rescue/GNU/Linux/23_storage_and_network_modules.sh
find: `/lib/modules/3.0.13-0.27-default/kernel/drivers': No such file or directory
find: `/lib/modules/3.0.13-0.27-default/kernel/drivers': No such file or directory
find: `/lib/modules/3.0.13-0.27-default/kernel/drivers': No such file or directory
find: `/lib/modules/3.0.13-0.27-default/kernel/drivers': No such file or directory
find: `/lib/modules/3.0.13-0.27-default/kernel/drivers': No such file or directory
find: `/lib/modules/3.0.13-0.27-default/kernel/drivers': No such file or directory
find: `/lib/modules/3.0.13-0.27-default/kernel/drivers': No such file or directory
find: `/lib/modules/3.0.13-0.27-default/kernel/drivers/usb': No such file or directory
find: `/lib/modules/3.0.13-0.27-default/kernel/drivers': No such file or directory
find: `/lib/modules/3.0.13-0.27-default/kernel': No such file or directory
find: `/lib/modules/3.0.13-0.27-default/kernel/drivers': No such file or directory
find: `/lib/modules/3.0.13-0.27-default/kernel/drivers': No such file or directory
find: `/lib/modules/3.0.13-0.27-default/extra': No such file or directory
find: `/lib/modules/3.0.13-0.27-default/weak-updates': No such file or directory
...
2013-06-18 15:10:17 ERROR: FindStorageDrivers called but STORAGE_DRIVERS is empty
=== Stack trace ===
Trace 0: /usr/sbin/rear:249 main
Trace 1: /usr/share/rear/lib/mkrescue-workflow.sh:35 WORKFLOW_mkrescue
Trace 2: /usr/share/rear/lib/framework-functions.sh:79 SourceStage
Trace 3: /usr/share/rear/lib/framework-functions.sh:40 Source
Trace 4: /usr/share/rear/rescue/GNU/Linux/26_storage_drivers.sh:4 source
Trace 5: /usr/share/rear/lib/linux-functions.sh:106 FindStorageDrivers
Trace 6: /usr/share/rear/lib/_input-output-functions.sh:131 StopIfError
Message: FindStorageDrivers called but STORAGE_DRIVERS is empty
===================
</code></pre>
<p>Ok, why nothing was found?</p>
<pre><code>#-&gt; uname -r
3.0.13-0.27-default
#-&gt; more /boot/grub/menu.lst
# Modified by YaST2. Last modification on Mon Jun 17 13:57:38 CEST 2013
default 0
timeout 8
##YaST - generic_mbr
gfxmenu (hd0,0)/message
##YaST - activate

###Don't change this comment - YaST2 identifier: Original name: linux###
title SUSE Linux Enterprise Desktop 11 SP2 - 3.0.74-0.6.10
    root (hd0,0)
    kernel /vmlinuz-3.0.74-0.6.10-default root=/dev/vg00/lv00 splash=silent  showopts multipath=off crashkernel=256M
    initrd /initrd-3.0.74-0.6.10-default
</code></pre>
<p>The system was upgraded, but not yet rebooted - evidence run <code>zypper ps</code>
on SLES.</p>
<h4 id="dagwieers_commented_at_2013-06-18_1717"><img src="https://avatars.githubusercontent.com/u/388198?u=0732dee3fe5002278cfbf40359ec431bdcf5f06c&v=4" width="50"><a href="https://github.com/dagwieers">dagwieers</a> commented at <a href="https://github.com/rear/rear/issues/251#issuecomment-19626175">2013-06-18 17:17</a>:<a class="headerlink" href="#dagwieers_commented_at_2013-06-18_1717" title="Permanent link">&para;</a></h4>
<p>The reason for this is that Relax-and-Recover is using the currently
running kernel as the basis for its rescue image. As a result if the
running kernel is no longer installed, there are no drivers found. So we
basically assume that the running kernel is still installed.</p>
<p>We could improve this, however if the logic depends on the bootloader
(to find the 'upcoming' kernel to use) it might get very complex very
quickly :-/ So the logic should only chime in when it is determined that
the current kernel is no longer installed.</p>
<p>A simply workaround in your case would be to execute
<code>rear -v -r 3.0.74-0.6.10-default mkrescue</code>.</p>
<p>PS Maybe I should look at how kdump is handling this (might be possible
it doesn't handle the case either though).</p>
<h4 id="gdha_commented_at_2013-06-19_0650"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/251#issuecomment-19665933">2013-06-19 06:50</a>:<a class="headerlink" href="#gdha_commented_at_2013-06-19_0650" title="Permanent link">&para;</a></h4>
<p>I do prefer that users reboot after installing a new kernel - good
practice anyway - no need we improve rear for this. The possible error
is documented now in GitHub :-)</p>
<h4 id="dagwieers_commented_at_2013-06-19_0807"><img src="https://avatars.githubusercontent.com/u/388198?u=0732dee3fe5002278cfbf40359ec431bdcf5f06c&v=4" width="50"><a href="https://github.com/dagwieers">dagwieers</a> commented at <a href="https://github.com/rear/rear/issues/251#issuecomment-19668637">2013-06-19 08:07</a>:<a class="headerlink" href="#dagwieers_commented_at_2013-06-19_0807" title="Permanent link">&para;</a></h4>
<p>I agree it is better that the kernel used for Relax-and-Recover is the
one that is running (or at least one that booted once before). However
if it is possible that the current kernel is no longer installed, and
Relax-and-Recover bails out because of this, I would prefer the second
best option: search for another kernel.</p>
<p>If we object to using a kernel that may never have been booted once, we
should at least detect this case and provide with a more specific error
IMO. Especially if people use "rear mkrescue" from cron, it would be
more convenient to indicate that <strong>"the currently running kernel is no
longer installed on this system"</strong>.</p>
<p>I would prefer a specific error in prep over adapting the current
error-message to hint, because:</p>
<ol>
<li>an empty STORAGE_DRIVERS could be related to something else (a bug
    ?)</li>
<li>even if the kernel is not installed, STORAGE_DRIVERS could be
    non-empty (e.g. out-of-tree driver)</li>
</ol>
<p>The main question is, what's the best way to determine that the running
kernel is not installed ? Should we test for a set of directories that
should always be there (all of them):</p>
<ul>
<li>/lib/modules/$(uname -r)/kernel/crypto/</li>
<li>/lib/modules/$(uname -r)/kernel/drivers/usb/</li>
<li>/lib/modules/$(uname -r)/kernel/lib/</li>
<li>/lib/modules/$(uname -r)/kernel/modules.dep</li>
</ul>
<p>Or is there something more appropriate/safe ?</p>
<p>BTW I like to involve @jhoekx, he's got a good (cross-distro) taste for
things like this as well ;-)</p>
<h4 id="jhoekx_commented_at_2013-06-19_1200"><img src="https://avatars.githubusercontent.com/u/783473?v=4" width="50"><a href="https://github.com/jhoekx">jhoekx</a> commented at <a href="https://github.com/rear/rear/issues/251#issuecomment-19679223">2013-06-19 12:00</a>:<a class="headerlink" href="#jhoekx_commented_at_2013-06-19_1200" title="Permanent link">&para;</a></h4>
<p>:-)</p>
<p>Do we need to check subdirectories? Is /lib/modules/$(uname -r)/kernel
not<br />
sufficient?</p>
<p>On 19 June 2013 10:07, Dag Wieers <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;">&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a> wrote:</p>
<blockquote>
<p>I agree it is better that the kernel used for Relax-and-Recover is the
one<br />
that is running (or at least one that booted once before). However if
it is<br />
possible that the current kernel is no longer installed, and<br />
Relax-and-Recover bails out because of this, I would prefer the second
best<br />
option: search for another kernel.</p>
<p>If we object to using a kernel that may never have been booted once,
we<br />
should at least detect this case and provide with a more specific
error<br />
IMO. Especially if people use "rear mkrescue" from cron, it would be
more<br />
convenient to indicate that <em>"the currently running kernel is no
longer<br />
installed on this system"</em>.</p>
<p>I would prefer a specific error in prep over adapting the current<br />
error-message to hint, because:</p>
<ol>
<li>an empty STORAGE_DRIVERS could be related to something else (a
    bug<br />
    ?)</li>
<li>even if the kernel is not installed, STORAGE_DRIVERS could be<br />
    non-empty (e.g. out-of-tree driver)</li>
</ol>
<p>The main question is, what's the best way to determine that the
running<br />
kernel is not installed ? Should we test for a set of directories
that<br />
should always be there (all of them):</p>
<ul>
<li>/lib/modules/$(uname -r)/kernel/crypto/</li>
<li>/lib/modules/$(uname -r)/kernel/drivers/usb/</li>
<li>/lib/modules/$(uname -r)/kernel/lib/</li>
<li>/lib/modules/$(uname -r)/kernel/modules.dep</li>
</ul>
<p>Or is there something more appropriate/safe ?</p>
<p>BTW I like to involve @jhoekx
<a href="https://github.com/jhoekx">https://github.com/jhoekx</a>, he's got a<br />
good (cross-distro) taste for things like this as well ;-)</p>
<p>—<br />
Reply to this email directly or view it on
GitHubhttps://github.com/rear/rear/issues/251#issuecomment-19668637<br />
.</p>
</blockquote>
<h4 id="schlomo_commented_at_2013-06-19_1204"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/251#issuecomment-19679400">2013-06-19 12:04</a>:<a class="headerlink" href="#schlomo_commented_at_2013-06-19_1204" title="Permanent link">&para;</a></h4>
<blockquote>
<ol>
<li>an empty STORAGE_DRIVERS could be related to something else (a
    bug<br />
    ?)</li>
<li>even if the kernel is not installed, STORAGE_DRIVERS could be<br />
    non-empty (e.g. out-of-tree driver)</li>
</ol>
<p>​A static kernel will also yield an empty STORAGE_DRIVERS.</p>
</blockquote>
<p>From a package deployment perspective (everything installed is there<br />
because we want to use it) I could imagine that we should automatically
set<br />
-r <kernel version> not to the current kernel but to the greatest
*installed</p>
<ul>
<li>kernel. If that happens to be the running kernel then nothing
    changed, if<br />
    there is a difference then we use a kernel that at least has all
    files<br />
    available and that would have been used after the next reboot
    anyway.​</li>
</ul>
<h4 id="dagwieers_commented_at_2013-06-19_1817"><img src="https://avatars.githubusercontent.com/u/388198?u=0732dee3fe5002278cfbf40359ec431bdcf5f06c&v=4" width="50"><a href="https://github.com/dagwieers">dagwieers</a> commented at <a href="https://github.com/rear/rear/issues/251#issuecomment-19702974">2013-06-19 18:17</a>:<a class="headerlink" href="#dagwieers_commented_at_2013-06-19_1817" title="Permanent link">&para;</a></h4>
<p>@jhoekx I deliberately do not check for <em>/lib/modules/$(uname
-r)/kernel</em>, because if you have <em>any</em> file added (e.g. mvfs.ko or
anything out-of-tree, maybe vmware-tools or an hp-driver) the parent
directories will still be around, STORAGE_DRIVERS will not be empty,
most likely it will bail out the moment it doesn't find the kernel. But
since the name of the kernel is also not standardized...</p>
<h4 id="dagwieers_commented_at_2013-06-19_1821"><img src="https://avatars.githubusercontent.com/u/388198?u=0732dee3fe5002278cfbf40359ec431bdcf5f06c&v=4" width="50"><a href="https://github.com/dagwieers">dagwieers</a> commented at <a href="https://github.com/rear/rear/issues/251#issuecomment-19703229">2013-06-19 18:21</a>:<a class="headerlink" href="#dagwieers_commented_at_2013-06-19_1821" title="Permanent link">&para;</a></h4>
<p>@schlomo We don't wan't to automatically pick up the latest installed
kernel since it may not properly boot. Sure, the intention is to use it,
but we don't want to be confronted with an unbootable DR image if the
new kernel trashed the filesystem when it gets booted into the first
time. It is safer to use the current kernel, if it exists. As soon as
the server is rebooted (successfully) <code>checklayout</code> may notice it and
recreate the image.</p>
<h4 id="schlomo_commented_at_2013-06-19_1838"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/251#issuecomment-19704500">2013-06-19 18:38</a>:<a class="headerlink" href="#schlomo_commented_at_2013-06-19_1838" title="Permanent link">&para;</a></h4>
<p>@dagwieers so why not take the latest_installed-1 kernel if the
current<br />
kernel is not available? Wouldn't that be better than failing the rear
run?</p>
<p>On 19 June 2013 20:21, Dag Wieers <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;">&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a> wrote:</p>
<blockquote>
<p>@schlomo <a href="https://github.com/schlomo">https://github.com/schlomo</a> We
don't wan't to automatically<br />
pick up the latest installed kernel since it may not properly boot.
Sure,<br />
the intention is to use it, but we don't want to be confronted with
an<br />
unbootable DR image if the new kernel trashed the filesystem when it
gets<br />
booted into the first time. It is safer to use the current kernel, if
it<br />
exists. As soon as the server is rebooted (successfully) checklayout
may<br />
notice it and recreate the image.</p>
<p>—<br />
Reply to this email directly or view it on
GitHubhttps://github.com/rear/rear/issues/251#issuecomment-19703229<br />
.</p>
</blockquote>
<h4 id="dagwieers_commented_at_2013-06-19_1852"><img src="https://avatars.githubusercontent.com/u/388198?u=0732dee3fe5002278cfbf40359ec431bdcf5f06c&v=4" width="50"><a href="https://github.com/dagwieers">dagwieers</a> commented at <a href="https://github.com/rear/rear/issues/251#issuecomment-19705574">2013-06-19 18:52</a>:<a class="headerlink" href="#dagwieers_commented_at_2013-06-19_1852" title="Permanent link">&para;</a></h4>
<p>@schlomo Apart from the difficulty to determine what the
latest_installed-1 kernel is, if you have had 2 new kernels installed,
but did not reboot neither yet, you are still booting a kernel that may
not boot as part of the DR. Maybe you got 2 kernels because the previous
update had a known defect.</p>
<p>So if the current kernel is not available, my preference would be to
stick with whatever kernel/image we had before by failing (likely the
last succesful run was the current kernel/ramdisk), rather than to
deliver something suboptimal. So I would simply add a check and escalate
this to the user so cron mails it, or it's obvious from the output on
screen.</p>
<p>BTW The reporter's example shows a single new kernel on the system, so
there wouldn't even be a latest_installed-1 kernel ;-)</p>
<h4 id="dagwieers_commented_at_2013-06-19_1856"><img src="https://avatars.githubusercontent.com/u/388198?u=0732dee3fe5002278cfbf40359ec431bdcf5f06c&v=4" width="50"><a href="https://github.com/dagwieers">dagwieers</a> commented at <a href="https://github.com/rear/rear/issues/251#issuecomment-19705872">2013-06-19 18:56</a>:<a class="headerlink" href="#dagwieers_commented_at_2013-06-19_1856" title="Permanent link">&para;</a></h4>
<p>PS Yes, I am flip-flopping ;-) So I agree with Gratien now ! (Let this
be proof that even I can change my mind...)</p>
<h4 id="schlomo_commented_at_2013-06-19_1930"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/251#issuecomment-19708351">2013-06-19 19:30</a>:<a class="headerlink" href="#schlomo_commented_at_2013-06-19_1930" title="Permanent link">&para;</a></h4>
<p>Fine with me. Better error messages are always good.</p>
<p>On 19 June 2013 20:56, Dag Wieers <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;">&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a> wrote:</p>
<blockquote>
<p>PS Yes, I am flip-flopping ;-) So I agree with Gratien now ! (Let this
be<br />
proof that even I can change my mind...)</p>
<p>—<br />
Reply to this email directly or view it on
GitHubhttps://github.com/rear/rear/issues/251#issuecomment-19705872<br />
.</p>
</blockquote>
<h4 id="gdha_commented_at_2013-08-02_0804"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/251#issuecomment-21991825">2013-08-02 08:04</a>:<a class="headerlink" href="#gdha_commented_at_2013-08-02_0804" title="Permanent link">&para;</a></h4>
<p>@rear/owners add a sentence in the release-notes about this (reminder to
myself)</p>
<h4 id="gdha_commented_at_2013-10-02_1443"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/251#issuecomment-25544248">2013-10-02 14:43</a>:<a class="headerlink" href="#gdha_commented_at_2013-10-02_1443" title="Permanent link">&para;</a></h4>
<p>made a note in documentation/release-notes-1-16.md</p>
<h4 id="teissler_commented_at_2013-11-16_2258"><img src="https://avatars.githubusercontent.com/u/283996?u=02b6cffb15028c756d145d3fd1f5839ce4bdb76a&v=4" width="50"><a href="https://github.com/teissler">teissler</a> commented at <a href="https://github.com/rear/rear/issues/251#issuecomment-28637931">2013-11-16 22:58</a>:<a class="headerlink" href="#teissler_commented_at_2013-11-16_2258" title="Permanent link">&para;</a></h4>
<p>I got the error message because i have a kernel compiled without block
modules.<br />
I think it should be detected if the kernel is build with storage
modules or fixed builtin.</p>
<h4 id="schlomo_commented_at_2013-11-18_0953"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/251#issuecomment-28685725">2013-11-18 09:53</a>:<a class="headerlink" href="#schlomo_commented_at_2013-11-18_0953" title="Permanent link">&para;</a></h4>
<p>Can you suggest some modinfo calls to find out if that is the case?
Are<br />
there some modules which are representative of that case?</p>
<p>Also, how could we handle the case where only some drivers are built
into<br />
the kernel and others not?</p>
<p>On 16 November 2013 23:58, morlix <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;">&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a> wrote:</p>
<blockquote>
<p>I got the error message because i have a kernel compiled without
block<br />
modules.<br />
I think it should be detected if the kernel is build with storage
modules<br />
or fixed builtin.</p>
<p>—<br />
Reply to this email directly or view it on
GitHubhttps://github.com/rear/rear/issues/251#issuecomment-28637931<br />
.</p>
</blockquote>
<h4 id="teissler_commented_at_2013-11-18_1928"><img src="https://avatars.githubusercontent.com/u/283996?u=02b6cffb15028c756d145d3fd1f5839ce4bdb76a&v=4" width="50"><a href="https://github.com/teissler">teissler</a> commented at <a href="https://github.com/rear/rear/issues/251#issuecomment-28729425">2013-11-18 19:28</a>:<a class="headerlink" href="#teissler_commented_at_2013-11-18_1928" title="Permanent link">&para;</a></h4>
<p>As this issue is closed i opened a new one:
<a href="https://github.com/rear/rear/issues/331">https://github.com/rear/rear/issues/331</a></p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2026 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2013-06-18.251.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
