<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#2303 PR merged: Enhanced recovery system BIOS boot default settings for USB and ISO (related to issue 2276 - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#2303 PR merged: Enhanced recovery system BIOS boot default settings for USB and ISO (related to issue 2276";
        var mkdocs_page_input_path = "issues/2019-12-19.2303.pr.merged.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
      <li class="breadcrumb-item active">#2303 PR merged: Enhanced recovery system BIOS boot default settings for USB and ISO (related to issue 2276</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="2303_pr_merged_enhanced_recovery_system_bios_boot_default_settings_for_usb_and_iso_related_to_issue_2276"><a href="https://github.com/rear/rear/pull/2303">#2303 PR</a> <code>merged</code>: Enhanced recovery system BIOS boot default settings for USB and ISO (related to issue 2276<a class="headerlink" href="#2303_pr_merged_enhanced_recovery_system_bios_boot_default_settings_for_usb_and_iso_related_to_issue_2276" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>documentation</code>, <code>fixed / solved / done</code></p>
<h4 id="jsmeix_opened_issue_at_2019-12-19_1625"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> opened issue at <a href="https://github.com/rear/rear/pull/2303">2019-12-19 16:25</a>:<a class="headerlink" href="#jsmeix_opened_issue_at_2019-12-19_1625" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>Type: <strong>Enhancement</strong></p>
</li>
<li>
<p>Impact: <strong>Low</strong></p>
</li>
<li>
<p>Reference to related issue (URL):<br />
<a href="https://github.com/rear/rear/issues/2276#issuecomment-554316041">https://github.com/rear/rear/issues/2276#issuecomment-554316041</a></p>
</li>
<li>
<p>How was this pull request tested?<br />
    Currently I had only tested the USB case.<br />
    I need to test the ISO case.</p>
</li>
<li>
<p>Brief description of the changes in this pull request:</p>
</li>
</ul>
<p>For <code>OUTPUT=ISO</code> the user can now explicitly specify<br />
what to boot by default when booting the ISO on BIOS systems via<br />
<code>ISO_DEFAULT="boothd0"</code> to boot from the first disk and<br />
<code>ISO_DEFAULT="boothd1"</code> to boot from the second disk.</p>
<p>For <code>OUTPUT=USB</code> the user can now explicitly specify<br />
what to boot by default when booting the disk on BIOS systems via<br />
<code>USB_BIOS_BOOT_DEFAULT="boothd0"</code> to boot from the first disk.<br />
The default <code>USB_BIOS_BOOT_DEFAULT=""</code> boots the second disk.</p>
<p>Those things are now (hopefully correctly) explained in default.conf</p>
<p>Additionally usr/share/rear/conf/templates/rear.help<br />
is now plain ASCII according to "Character encoding" in<br />
<a href="https://github.com/rear/rear/wiki/Coding-Style">https://github.com/rear/rear/wiki/Coding-Style</a><br />
to avoid that this text may show unexpected when the<br />
SYSLINUX boot stuff is shown to the user on whatever<br />
possibly unusual remote console or on whatever special<br />
system management user interface (I had some personal<br />
"interesting user experience" with some Java based tingy ;-)</p>
<h4 id="jsmeix_commented_at_2019-12-19_1629"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/2303#issuecomment-567562302">2019-12-19 16:29</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-12-19_1629" title="Permanent link">&para;</a></h4>
<p>@rear/contributors<br />
when there are no objections<br />
I would like to merge it tomorrow afternoon.</p>
<h4 id="pcahyna_commented_at_2019-12-19_1742"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/pull/2303#issuecomment-567590215">2019-12-19 17:42</a>:<a class="headerlink" href="#pcahyna_commented_at_2019-12-19_1742" title="Permanent link">&para;</a></h4>
<p>@jsmeix this functionality is useful (cc @chlupnoha who will probably
make use of it), but shouldn't it be an opportunity to unify those
settings? Why to have one option for USB disks, another for CD images,
when both do essentially the same thing? Even why to distinguish BIOS
and UEFI? I propose just <code>BOOT_DEFAULT</code> to cover all supported cases
(<code>ISO_DEFAULT</code> would remain for compatibility of course.) Similar
comment applies to <code>ISO_RECOVER_MODE</code>, which does not seem to be really
ISO specific, but of course this can be left for later.</p>
<h4 id="jsmeix_commented_at_2019-12-20_0848"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/2303#issuecomment-567844321">2019-12-20 08:48</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-12-20_0848" title="Permanent link">&para;</a></h4>
<p>@pcahyna<br />
on the one hand I fully agree with you in general<br />
BUT<br />
on the other hand because I am not at all an expert in this area<br />
(the more I do with booting the more I know how little I know)<br />
I must change the currently working things in careful little steps.<br />
There are so many subtle interdependencies in ReaR that<br />
I cannot imagine what may break when I change something.<br />
My little step by little step way is my attempt to get a bit better<br />
understanding how things actually work in ReaR while I am doing<br />
those little steps so that I can a little bit better avoid
regressions.<br />
If I understood all ReaR code I would...<br />
(cf.
<a href="https://github.com/rear/rear/pull/2286#issuecomment-558624424">https://github.com/rear/rear/pull/2286#issuecomment-558624424</a>)</p>
<p>Regarding why to distinguish BIOS and UEFI?</p>
<p>My personal answer from my (non booting expert) point of view is:<br />
We distinguish BIOS and UEFI for ReaR config variables because<br />
the current ReaR code is completely separated for BIOS and UEFI.</p>
<p>For example I wonder if <code>BOOT_DEFAULT="boothd1"</code> would make sense<br />
for UEFI - is <code>boothd1</code> a value that can be actually used also for UEFI?</p>
<p>Perhaps someting more generic like <code>BOOT_DEFAULT="first_disk"</code> (or
<code>disk1</code>)<br />
could make sense both for BIOS and UEFI - but I don't know if that is
true.</p>
<p>Is "boot disk enumeration" a really meaningful concept for UEFI?</p>
<p>For example on my openSUSE Leap 15.0 system I get</p>
<pre><code># efibootmgr -v
BootCurrent: 0000
Timeout: 2 seconds
BootOrder: 0000,0016,0017,0014,001A,0012,0013,0015,0010
Boot0000* opensuse-secureboot   HD(1,GPT,841a03d5-4e52-4634-b21a-43935c88f5af,0x800,0xfa000)/File(\EFI\opensuse\shim.efi)
Boot0010  Diskette Drive        BBS(Floppy,Diskette Drive,0x0)..BO
Boot0012* SAMSUNG SSD SM951 M.2 256G    BBS(HD,P0: SAMSUNG SSD SM951 M.2 256G,0x0)..BO
Boot0013* USB Storage Device    BBS(USB,USB Storage Device,0x0)..BO
Boot0014* CD/DVD/CD-RW Drive    BBS(CDROM,P0: PLDS DVD+/-RW DH-16AES    ,0x0)..BO
Boot0015* Onboard NIC   BBS(Network,IBA GE Slot 00C8 v1550,0x0)..BO
Boot0016* Onboard NIC(IPV4)     PciRoot(0x0)/Pci(0x19,0x0)/MAC(64006a64c006,0)/IPv4(0.0.0.0:0&lt;-&gt;0.0.0.0:0,0,0)..BO
Boot0017* Onboard NIC(IPV6)     PciRoot(0x0)/Pci(0x19,0x0)/MAC(64006a64c006,0)/IPv6([::]:&lt;-&gt;[::]:,0,0)..BO
Boot001A* WDC WD10EZEX-75M2NA0          BBS(HD,P0: WDC WD10EZEX-75M2NA0      ,0x0)..BO
</code></pre>
<p>So the <code>BootNNNN</code> values have some kind of enumeration<br />
but that enumeration does not look as if it matches what<br />
the BIOS boot disk enumeration is.</p>
<p>I think when one has UEFI firmware with legacy BIOS support<br />
one can specify the boot device ordering for UEFI differently<br />
and separated from the boot device ordering for legacy BIOS.</p>
<p>Also in my above example the <code>BootOrder</code> list is different<br />
compared to the "natural" ordering of the <code>BootNNNN</code> values<br />
(according to the <code>NNNN</code> suffix).</p>
<p>Regarding <code>ISO_RECOVER_MODE</code>:</p>
<p>I noticed that special config variable "by accident" while I was<br />
enhancing the description about <code>ISO_DEFAULT</code> in default.conf<br />
and I was also wondering why <code>ISO_RECOVER_MODE</code><br />
is specific for <code>OUTPUT=ISO</code> and not a generic thingy.</p>
<p>Also here my personal assumtion is that the reason behind is<br />
that the code for <code>ISO_RECOVER_MODE</code> is separated from<br />
the other cases - or in other words:</p>
<p>A generic functionality to provide predefined ReaR recovery system<br />
boot menue entries for some "common recovery system boot cases"<br />
is not yet implemented in ReaR.</p>
<p>What is implemented in ReaR is only a single separated special case<br />
to boot the recovery system with one predefined kernel command line<br />
option in case of <code>OUTPUT=ISO</code> so the matching config variable<br />
was correctly named to be ISO specific.</p>
<p>The current generic way for such things is that the user must<br />
manually add non-standard kernel command line options.<br />
(By the way: Is that also possible in case of UEFI?)</p>
<p>Finally:</p>
<p>At least some of the above is again the same old consequence<br />
of how the <code>OUTPUT=USB</code> stuff was implemeted in ReaR:</p>
<p>The whole USB stuff is basically some kind of "add-on hack"<br />
for a special use case that is not well integrated<br />
with how the rest of ReaR works.</p>
<p>Cf.<br />
<a href="https://github.com/rear/rear/issues/2171">https://github.com/rear/rear/issues/2171</a><br />
therein <code>A side note:</code> in<br />
<a href="https://github.com/rear/rear/issues/2171#issuecomment-509143476">https://github.com/rear/rear/issues/2171#issuecomment-509143476</a><br />
and<br />
<a href="https://github.com/rear/rear/issues/1166#issuecomment-272868388">https://github.com/rear/rear/issues/1166#issuecomment-272868388</a><br />
and issues like<br />
<a href="https://github.com/rear/rear/issues/1164">https://github.com/rear/rear/issues/1164</a><br />
and probably some more...</p>
<h4 id="jsmeix_commented_at_2019-12-20_0901"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/2303#issuecomment-567848133">2019-12-20 09:01</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-12-20_0901" title="Permanent link">&para;</a></h4>
<p>@chlupnoha<br />
could you explain your ReaR use case so that I could get<br />
a better understanding what our users do with ReaR?</p>
<h4 id="jsmeix_commented_at_2019-12-20_1104"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/2303#issuecomment-567887300">2019-12-20 11:04</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-12-20_1104" title="Permanent link">&para;</a></h4>
<p>Now it is after-noon...</p>
<h4 id="jsmeix_commented_at_2019-12-20_1325"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/2303#issuecomment-567923532">2019-12-20 13:25</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-12-20_1325" title="Permanent link">&para;</a></h4>
<p>I had also tested the ISO case and it worked for me.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2023 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2019-12-19.2303.pr.merged.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
