<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#1044 PR merged: BORGBACKUP_COMPRESSION now handles Borg compression defaults correctly - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#1044 PR merged: BORGBACKUP_COMPRESSION now handles Borg compression defaults correctly";
        var mkdocs_page_input_path = "issues/2016-10-20.1044.pr.merged.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_nas.html">Internal Backup with tar to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_rsync.html">Internal Backup with rsync to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/rsync.html">Internal Backup using BACKUP=RSYNC method</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/rbme.html">External Backup using RBME</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/restic.html">External Backup using restic</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../development/squash-git-log-commments.html">How to squash git log comments into one line</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#1044 PR merged: BORGBACKUP_COMPRESSION now handles Borg compression defaults correctly</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="1044_pr_merged_borgbackup_compression_now_handles_borg_compression_defaults_correctly"><a href="https://github.com/rear/rear/pull/1044">#1044 PR</a> <code>merged</code>: BORGBACKUP_COMPRESSION now handles Borg compression defaults correctly<a class="headerlink" href="#1044_pr_merged_borgbackup_compression_now_handles_borg_compression_defaults_correctly" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>fixed / solved / done</code>, <code>minor bug</code></p>
<h4 id="gozora_opened_issue_at_2016-10-20_1355"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> opened issue at <a href="https://github.com/rear/rear/pull/1044">2016-10-20 13:55</a>:<a class="headerlink" href="#gozora_opened_issue_at_2016-10-20_1355" title="Permanent link">&para;</a></h4>
<p>Improvements in default compression handling discusses in #1041</p>
<h4 id="jsmeix_commented_at_2016-10-21_0842"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1044#issuecomment-255326771">2016-10-21 08:42</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-10-21_0842" title="Permanent link">&para;</a></h4>
<p>Now it behaves perfectly - as far as I can see.</p>
<h4 id="jsmeix_commented_at_2016-10-21_0901"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1044#issuecomment-255330788">2016-10-21 09:01</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-10-21_0901" title="Permanent link">&para;</a></h4>
<p>@gozora<br />
a general comment regarding specific variables<br />
for specific backup program option settings:</p>
<p>I think you could completely remove<br />
BORGBACKUP_COMPRESSION<br />
and support instead two generic<br />
BORGBACKUP_CREATE_OPTIONS=()<br />
BORGBACKUP_EXTRACT_OPTIONS=()<br />
where the user can specify any options he wants<br />
for "borg create" and "borg extract".</p>
<p>This way you would be automatically future-proof and<br />
avoid an possibly endless sequence of user requests<br />
to support this and that and those further specific Borg<br />
backup program option settings.</p>
<h4 id="gozora_commented_at_2016-10-21_1105"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/pull/1044#issuecomment-255354232">2016-10-21 11:05</a>:<a class="headerlink" href="#gozora_commented_at_2016-10-21_1105" title="Permanent link">&para;</a></h4>
<p>@jsmeix actually I was thinking about such setup, but decided to go
different way. Thinking of it now, it really could be easier.<br />
I'll check that, thanks!</p>
<h4 id="jsmeix_commented_at_2016-10-21_1206"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1044#issuecomment-255363357">2016-10-21 12:06</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-10-21_1206" title="Permanent link">&para;</a></h4>
<p>@gozora<br />
FYI regarding how to use and implement multiple<br />
program options settings via an array variable<br />
you may have a look at<br />
<a href="https://github.com/rear/rear/pull/912">https://github.com/rear/rear/pull/912</a></p>
<p>I think I vaguely remember that quoting with " as in</p>
<pre>
COMMAND ... "${BACKUP_PROG_COMPRESS_OPTIONS[@]}" ...
</pre>

<p>could be crucial, cf.<br />
<a href="http://stackoverflow.com/questions/3348443/a-confusion-about-array-versus-array-in-the-context-of-a-bash-comple">http://stackoverflow.com/questions/3348443/a-confusion-about-array-versus-array-in-the-context-of-a-bash-comple</a></p>
<h4 id="gozora_commented_at_2016-10-21_1223"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/pull/1044#issuecomment-255365880">2016-10-21 12:23</a>:<a class="headerlink" href="#gozora_commented_at_2016-10-21_1223" title="Permanent link">&para;</a></h4>
<p>@jsmeix thanks for hint!</p>
<h4 id="gozora_commented_at_2016-10-23_1347"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/pull/1044#issuecomment-255589592">2016-10-23 13:47</a>:<a class="headerlink" href="#gozora_commented_at_2016-10-23_1347" title="Permanent link">&para;</a></h4>
<p>@jsmeix</p>
<blockquote>
<p>I think you could completely remove<br />
BORGBACKUP_COMPRESSION<br />
and support instead two generic<br />
BORGBACKUP_CREATE_OPTIONS=()<br />
BORGBACKUP_EXTRACT_OPTIONS=()<br />
where the user can specify any options he wants<br />
for "borg create" and "borg extract".</p>
</blockquote>
<p>Now I maybe know why I've abandoned this idea.</p>
<p>It would require to add 5 different variables for each type of Borg
operations (init, create, prune, list, extract). The code I've wrote
relies on some options in use (I did not tested what would happen if
some options are omitted).<br />
As an example let's have a look on <code>borg create</code> and <code>borg prune</code>.<br />
I've used variable <em>BORGBACKUP_ARCHIVE_PREFIX</em> to define archives that
have been created by ReaR. So every time you run <code>rear mkbackup</code>,
archive with name <code>BORGBACKUP_ARCHIVE_PREFIX_&lt;incremented_archive_id&gt;</code>
is created in Borg repository. User can add arbitrary new archives to
this repository (and do restore from then with <code>rear recover</code>), but with
such naming convention we will know which archives has been created
using ReaR. This property is used e.g. during <code>borg prune</code> (which cleans
repository according user defined settings) to avoid removing of user
created archives. (ReaR will prune only archives with prefix
<code>BORGBACKUP_ARCHIVE_PREFIX_</code>).<br />
To cut the story short, from my point of view, current code is more
straight forward to configure, easier to maintain and easier to look for
a bugs ...<br />
Let us just wait for first users to report some issues and flat down the
code after we have some feedback from actual <s>testing</s> use.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2025 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2016-10-20.1044.pr.merged.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
