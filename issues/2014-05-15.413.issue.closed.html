<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#413 Issue closed: LVM Snapshots supported? - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#413 Issue closed: LVM Snapshots supported?";
        var mkdocs_page_input_path = "issues/2014-05-15.413.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#413 Issue closed: LVM Snapshots supported?</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="413_issue_closed_lvm_snapshots_supported"><a href="https://github.com/rear/rear/issues/413">#413 Issue</a> <code>closed</code>: LVM Snapshots supported?<a class="headerlink" href="#413_issue_closed_lvm_snapshots_supported" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>discuss / RFC</code>, <code>support / question</code>, <code>needs sponsorship</code></p>
<h4 id="x4_opened_issue_at_2014-05-15_1229"><img src="https://avatars.githubusercontent.com/u/84343?u=cb373130838078c27404bef3208db9cde5afd48d&v=4" width="50"><a href="https://github.com/X4">X4</a> opened issue at <a href="https://github.com/rear/rear/issues/413">2014-05-15 12:29</a>:<a class="headerlink" href="#x4_opened_issue_at_2014-05-15_1229" title="Permanent link">&para;</a></h4>
<p>Hi,</p>
<p>this project really looks very exciting! I'm having an LVM setup. Are
LVM snapshots supported?</p>
<h4 id="jhoekx_commented_at_2014-05-15_1404"><img src="https://avatars.githubusercontent.com/u/783473?v=4" width="50"><a href="https://github.com/jhoekx">jhoekx</a> commented at <a href="https://github.com/rear/rear/issues/413#issuecomment-43213151">2014-05-15 14:04</a>:<a class="headerlink" href="#jhoekx_commented_at_2014-05-15_1404" title="Permanent link">&para;</a></h4>
<p>They are currently not supported.</p>
<p>How would you envision support? I don't really know what I would do with
them in a DR case. How would you expect a file level backup to restore
your snapshot? Can you provide a scenario?</p>
<h4 id="x4_commented_at_2014-05-20_0154"><img src="https://avatars.githubusercontent.com/u/84343?u=cb373130838078c27404bef3208db9cde5afd48d&v=4" width="50"><a href="https://github.com/X4">X4</a> commented at <a href="https://github.com/rear/rear/issues/413#issuecomment-43578881">2014-05-20 01:54</a>:<a class="headerlink" href="#x4_commented_at_2014-05-20_0154" title="Permanent link">&para;</a></h4>
<p>Scenario:<br />
LVM-Snapshots were made by a rear cronjob and synced with a storage.<br />
System is messed up.<br />
I can now choose the time that I want to go backwards to, thanks to the
snapshots (if there was a good backup-scheme provided by a rear-cronjob
or systemd-service)</p>
<h4 id="schlomo_commented_at_2014-05-20_0637"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/413#issuecomment-43591011">2014-05-20 06:37</a>:<a class="headerlink" href="#schlomo_commented_at_2014-05-20_0637" title="Permanent link">&para;</a></h4>
<p>So you want to use LVM snapshots to create a consistent (in time)
backup?<br />
How much space do you have on your backup NAS share? How should the
backups<br />
be made?</p>
<p>On 20 May 2014 03:54, Ferhat <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;">&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a> wrote:</p>
<blockquote>
<p>Scenario:<br />
LVM-Snapshots were made by a rear cronjob and synced with a storage.<br />
System is messed up.<br />
I can now choose the time that I want to go backwards to, thanks to
the<br />
snapshots.</p>
<p>—<br />
Reply to this email directly or view it on
GitHubhttps://github.com/rear/rear/issues/413#issuecomment-43578881<br />
.</p>
</blockquote>
<h4 id="x4_commented_at_2014-05-21_0051"><img src="https://avatars.githubusercontent.com/u/84343?u=cb373130838078c27404bef3208db9cde5afd48d&v=4" width="50"><a href="https://github.com/X4">X4</a> commented at <a href="https://github.com/rear/rear/issues/413#issuecomment-43701216">2014-05-21 00:51</a>:<a class="headerlink" href="#x4_commented_at_2014-05-21_0051" title="Permanent link">&para;</a></h4>
<p>About 500GB on the NAS. LVM-Snapshots don't consume a lot of space,
because they're updating node-pointers for the hard-links
<a href="https://wiki.archlinux.org/index.php/LVM#Snapshots">[1]</a>. I think
deduplication and probably also incrementing using deltas is not
available for LVM snapshots. But if we use a simple incremental
backup-scheme that branches out if a threshold is reached, then there
won't space much wasted and you can retrieve files that are much older,
than what you'd have with Tower of Hanoi or FIFO.</p>
<p>I think most users would only care for their <em>/home</em> directory, so do I.
But rear makes it really easy to also recover the system. My <em>/home</em> is
182GB with 6,7GB available and / is only 42GB with 14GB available.</p>
<p>There are projects like <a href="http://opendedup.org/">http://opendedup.org/</a>
(which I've not used yet) for those who suffer from a lot of duplicates
(enterprises mainly).</p>
<h4 id="gdha_commented_at_2014-12-24_1330"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/413#issuecomment-68052332">2014-12-24 13:30</a>:<a class="headerlink" href="#gdha_commented_at_2014-12-24_1330" title="Permanent link">&para;</a></h4>
<p>@X4 I really do not see how we could make this work in rear? Rear is a
bare-metal DR solution and you are mainly talking about restoring using
LVM snapshots.</p>
<h4 id="bbeaver_commented_at_2014-12-29_1900"><img src="https://avatars.githubusercontent.com/u/7350825?u=2ec61633eda874b17db7b1eb383363444e6064d6&v=4" width="50"><a href="https://github.com/bbeaver">bbeaver</a> commented at <a href="https://github.com/rear/rear/issues/413#issuecomment-68286399">2014-12-29 19:00</a>:<a class="headerlink" href="#bbeaver_commented_at_2014-12-29_1900" title="Permanent link">&para;</a></h4>
<p>There is another open source product named mylvmbackup, that basically
will quiesce mysql databases and then snap the LVM filesystem mysql
resides on. I'm looking into incorporating mylvmbackup with ReaR. But
not for the purpose of being able to choose from multiple snapshots
during a restore, for the purpose of quiescing my LVM filesystems before
ReaR comes along and backs them up.</p>
<h4 id="gdha_commented_at_2014-12-29_1927"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/413#issuecomment-68293320">2014-12-29 19:27</a>:<a class="headerlink" href="#gdha_commented_at_2014-12-29_1927" title="Permanent link">&para;</a></h4>
<p>@bbeaver interesting
<a href="http://www.lenzg.net/mylvmbackup/">http://www.lenzg.net/mylvmbackup/</a>
link indeed. Looking forward to the pull request...</p>
<h4 id="bbeaver_commented_at_2014-12-30_1311"><img src="https://avatars.githubusercontent.com/u/7350825?u=2ec61633eda874b17db7b1eb383363444e6064d6&v=4" width="50"><a href="https://github.com/bbeaver">bbeaver</a> commented at <a href="https://github.com/rear/rear/issues/413#issuecomment-68355117">2014-12-30 13:11</a>:<a class="headerlink" href="#bbeaver_commented_at_2014-12-30_1311" title="Permanent link">&para;</a></h4>
<p>Sure thing, happy to contribute if I can get this done. The goal would
be to integrate LVM snapshots into ReaR such that ReaR picks up a time
consistent, quiesced LVM filesystem as part of it's backup. Here are my
initial thoughts - first scenario is, ReaR is setup to do tar backups to
a central NFS server. ReaR gets kicked off, and before the tar system
backup is initiated, mylvmbackup or some form of mylvmbackup is called.
mylvmbackup will quiesce the LVM volume and it wants a path for writing
it's tarfile. This path would be the NFS target used by ReaR.
mylvmbackup does the LVM snap, temporarily mounts the snapped
filesystem, writes out it's tarfile, removes the LVM snapshot, and turns
over control back to ReaR. ReaR is configured to exclude the LVM
filesystem already picked up by mylvmbackup. The restore procedures
would need to be modified as well. During a ReaR restore, ReaR would
need to know how to extract the mylvmbackup tar file to an alternate
directory, (making use of tar options such as -C /target/directory
--strip-components=1). A bonus would be for mylvmbackup to also make use
of the (tar --newer) option as ReaR does such that it can take advantage
of the incremental option. Welcome thoughts on this - thanks, Brian</p>
<h4 id="gdha_commented_at_2015-08-07_0916"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/413#issuecomment-128649751">2015-08-07 09:16</a>:<a class="headerlink" href="#gdha_commented_at_2015-08-07_0916" title="Permanent link">&para;</a></h4>
<p>@bbeaver Stumbled over this issue - what shall we do with it?</p>
<h4 id="x4_commented_at_2015-08-21_0055"><img src="https://avatars.githubusercontent.com/u/84343?u=cb373130838078c27404bef3208db9cde5afd48d&v=4" width="50"><a href="https://github.com/X4">X4</a> commented at <a href="https://github.com/rear/rear/issues/413#issuecomment-133232673">2015-08-21 00:55</a>:<a class="headerlink" href="#x4_commented_at_2015-08-21_0055" title="Permanent link">&para;</a></h4>
<p>I think the most usable solution for @gdha and @bbeaver would be in
adding Pre/Post and Event based conditions to ReaR. ReaR could then run
custom programs and run/pause/skip based on the return code provided.</p>
<p>Example: Shutdown computer on complete. Or send email on failure/success
&amp;&amp; shutdown computer.</p>
<h4 id="schlomo_commented_at_2015-08-21_0847"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/413#issuecomment-133334182">2015-08-21 08:47</a>:<a class="headerlink" href="#schlomo_commented_at_2015-08-21_0847" title="Permanent link">&para;</a></h4>
<p>ReaR already allows dropping Bash scripts into <code>/usr/share/rear/*</code>to
extend the different stages as needed. I would hope that this is enough,
or do you need something different?</p>
<p>You could easily create a <code>rear-mylvmbackup</code> package that adds some
files to the ReaR script collection so that those added scripts will be
called as part of the regular ReaR execution. Thereby providing the glue
between ReaR and mylvmbackup.</p>
<p>This holds true for almost any other extension as well. Of course we are
also happy to accept mylvmbackup support as a pull request, if somebody
wants to contribute it to ReaR.</p>
<h4 id="x4_commented_at_2015-08-22_2030"><img src="https://avatars.githubusercontent.com/u/84343?u=cb373130838078c27404bef3208db9cde5afd48d&v=4" width="50"><a href="https://github.com/X4">X4</a> commented at <a href="https://github.com/rear/rear/issues/413#issuecomment-133751839">2015-08-22 20:30</a>:<a class="headerlink" href="#x4_commented_at_2015-08-22_2030" title="Permanent link">&para;</a></h4>
<p>Thank you @shlomo 👍 I'm already perfectly fine with what ReaR provides,
I was just curious back then if LVM was supported.</p>
<h4 id="devil0000_commented_at_2020-12-21_1401"><img src="https://avatars.githubusercontent.com/u/3344302?v=4" width="50"><a href="https://github.com/DEvil0000">DEvil0000</a> commented at <a href="https://github.com/rear/rear/issues/413#issuecomment-748988419">2020-12-21 14:01</a>:<a class="headerlink" href="#devil0000_commented_at_2020-12-21_1401" title="Permanent link">&para;</a></h4>
<p>Just come accress this ticket since I am looking for the same feature.<br />
using LVM snapshot feature (optinally per LVM volume) while doing the
backup is a great thing to create consistent or kind of in sync
backups.<br />
Looks like this is still open - correct?</p>
<h4 id="gdha_commented_at_2021-01-25_1327"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/413#issuecomment-766815481">2021-01-25 13:27</a>:<a class="headerlink" href="#gdha_commented_at_2021-01-25_1327" title="Permanent link">&para;</a></h4>
<p>@DEvil0000 Yes - the feauture is still open. I've added the label "needs
sponsorship" - if you are capable of providing such feature you are most
welcome ;-)</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2024 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2014-05-15.413.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
