<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#3470 Issue open: Cannot make USB recovery stick - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#3470 Issue open: Cannot make USB recovery stick";
        var mkdocs_page_input_path = "issues/2025-05-07.3470.issue.open.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_nas.html">Internal Backup with tar to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../scenarios/netfs_rsync.md">Internal Backup with rsync to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/rbme.html">External Backup using RBME</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/restic.html">External Backup using restic</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../development/squash-git-log-commments.html">How to squash git log comments into one line</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#3470 Issue open: Cannot make USB recovery stick</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="3470_issue_open_cannot_make_usb_recovery_stick"><a href="https://github.com/rear/rear/issues/3470">#3470 Issue</a> <code>open</code>: Cannot make USB recovery stick<a class="headerlink" href="#3470_issue_open_cannot_make_usb_recovery_stick" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>support / question</code>, <code>old version</code></p>
<h4 id="nomisfi_opened_issue_at_2025-05-07_2144"><img src="https://avatars.githubusercontent.com/u/109468904?v=4" width="50"><a href="https://github.com/nomiSFI">nomiSFI</a> opened issue at <a href="https://github.com/rear/rear/issues/3470">2025-05-07 21:44</a>:<a class="headerlink" href="#nomisfi_opened_issue_at_2025-05-07_2144" title="Permanent link">&para;</a></h4>
<h3 id="rear_version">ReaR version<a class="headerlink" href="#rear_version" title="Permanent link">&para;</a></h3>
<p>2.6</p>
<h3 id="describe_the_rear_bug_in_detail">Describe the ReaR bug in detail<a class="headerlink" href="#describe_the_rear_bug_in_detail" title="Permanent link">&para;</a></h3>
<p>/dev/sda is my 8 GB USB stick, formatted as FAT32:</p>
<pre><code>lsblk:
sda                   8:0    1   7,3G  0 disk 
└─sda1                8:1    1   7,3G  0 part 
nvme0n1             259:0    0   1,8T  0 disk 
└─nvme0n1p1         259:1    0   1,8T  0 part 
  ├─mint--vg-root   253:0    0   1,8T  0 lvm  /
  └─mint--vg-swap_1 253:1    0  15,9G  0 lvm  [SWAP]
</code></pre>
<p>ReaR local.conf contains:<br />
OUTPUT=USB<br />
USB_DEVICE=/dev/sda1 (also tried with /dev/sda)</p>
<p>rear -D mkrescue throws:</p>
<pre><code>ERROR: 
====================
BUG in /usr/share/rear/output/USB/Linux-i386/850_make_USB_bootable.sh line 40:
'Filesystem for device '/dev/sda1' could not be found'
--------------------
Please report this issue at https://github.com/rear/rear/issues
and include the relevant parts from /var/log/rear/rear-Boudreaux.log
preferably with full debug information via 'rear -D mkrescue'
====================
Some latest log messages since the last called script 850_make_USB_bootable.sh:
  2025-05-07 23:30:22.293487504 Including output/USB/Linux-i386/850_make_USB_bootable.sh
  2025-05-07 23:30:22.297611675 Entering debugscript mode via 'set -x'.
Aborting due to an error, check /var/log/rear/rear-Boudreaux.log for details
Exiting rear mkrescue (PID 176840) and its descendant processes ...
Running exit tasks
You should also rm -Rf /tmp/rear.xAPc8CW2grQfelI
Beendet
[WARNING] Backup file not found at: 
[ERROR] ReaR backup failed with exit code 143.
(same errors above when I used /dev/sda)

var/log/rear/rear-Boudreaux.log: (same errors when I used /dev/sda)
++ name=/dev/sda1
++ add_dependency /dev/sda1 /dev/sda
++ echo '/dev/sda1 /dev/sda'
++ add_component /dev/sda1 part
++ echo 'todo /dev/sda1 part'
+++ [[ /dev/sda1 = \s\w\a\p\:\/\d\e\v\/\m\a\p\p\e\r\/\m\i\n\t\-\-\v\g\-\s\w\a\p\_\1 ]]
+++ [[ /dev/sda1 = \/\d\e\v\/\m\a\p\p\e\r\/\m\i\n\t\-\-\v\g\-\s\w\a\p\_\1 ]]
+++ [[ /dev/sda1 = \/\d\e\v\/\m\i\n\t\-\v\g ]]
+++ [[ /dev/sda1 = \p\v\:\/\d\e\v\/\n\v\m\e\0\n\1\p\1 ]]
+++ [[ /dev/sda1 = \/\d\e\v\/\n\v\m\e\0\n\1\p\1 ]]
+++ [[ /dev/sda1 = \/\d\e\v\/\n\v\m\e\0\n\1 ]]
+++ [[ /dev/sda1 = \f\s\:\/ ]]
+++ [[ /dev/sda1 = \/\d\e\v\/\m\a\p\p\e\r\/\m\i\n\t\-\-\v\g\-\r\o\o\t ]]
+++ [[ /dev/sda1 = \/\d\e\v\/\m\i\n\t\-\v\g ]]
+++ [[ /dev/sda1 = \p\v\:\/\d\e\v\/\n\v\m\e\0\n\1\p\1 ]]
+++ [[ /dev/sda1 = \/\d\e\v\/\n\v\m\e\0\n\1\p\1 ]]
+++ [[ /dev/sda1 = \/\d\e\v\/\n\v\m\e\0\n\1 ]]
+++ IsInArray /dev/sda1
+++ current=/dev/sda1
+++ echo /dev/sda1
++ Debug 'Marking /dev/sda1 as done (dependent on /dev/sda)'
++ Log 'Marking /dev/sda1 as done (dependent on /dev/sda)'
++ echo '2025-05-07 23:28:29.847772255 Marking /dev/sda1 as done (dependent on /dev/sda)'
2025-05-07 23:28:29.847772255 Marking /dev/sda1 as done (dependent on /dev/sda)
++ mark_as_done /dev/sda1
++ Debug 'Marking /dev/sda1 as done.'
++ Log 'Marking /dev/sda1 as done.'
++ echo '2025-05-07 23:28:29.849342583 Marking /dev/sda1 as done.'
2025-05-07 23:28:29.849342583 Marking /dev/sda1 as done.
++ sed -i 's;todo\ /dev/sda1\ ;done\ /dev/sda1\ ;' /var/lib/rear/layout/disktodo.conf
+++ grep '^/dev/sda1 ' /var/lib/rear/layout/diskdeps.conf
+++ [[ /dev/sda1 = \f\s\:\/ ]]
+++ [[ /dev/sda1 = \/\d\e\v\/\m\a\p\p\e\r\/\m\i\n\t\-\-\v\g\-\r\o\o\t ]]
+++ [[ /dev/sda1 = \/\d\e\v\/\m\i\n\t\-\v\g ]]
+++ [[ /dev/sda1 = \p\v\:\/\d\e\v\/\n\v\m\e\0\n\1\p\1 ]]
+++ [[ /dev/sda1 = \/\d\e\v\/\n\v\m\e\0\n\1\p\1 ]]
+++ [[ /dev/sda1 = \/\d\e\v\/\n\v\m\e\0\n\1 ]]
++++ USB_DEVICE=/dev/sda1
++ '[' /dev/sda -a /dev/sda1 ']'
+++ grep -E '^/dev/sda1 |^/dev/sda1 ' /proc/mounts
++ BugError 'Filesystem for device '\''/dev/sda1'\'' could not be found'
'\''Filesystem for device '\''/dev/sda1'\'' could not be found'\''
'\''Filesystem for device '\''/dev/sda1'\'' could not be found'\''
'\''Filesystem for device '\''/dev/sda1'\'' could not be found'\''
'\''Filesystem for device '\''/dev/sda1'\'' could not be found'\''
'Filesystem for device '/dev/sda1' could not be found'
'\''Filesystem for device '\''/dev/sda1'\'' could not be found'\''
'\''Filesystem for device '\''/dev/sda1'\'' could not be found'\''
</code></pre>
<p>Best regards<br />
Frank</p>
<h3 id="platform">Platform<a class="headerlink" href="#platform" title="Permanent link">&para;</a></h3>
<p>Linux x64</p>
<h3 id="os_version">OS version<a class="headerlink" href="#os_version" title="Permanent link">&para;</a></h3>
<p>NAME="Linux Mint"<br />
VERSION="21.3 (Virginia)" ID=linuxmint ID_LIKE="ubuntu debian"<br />
PRETTY_NAME="Linux Mint 21.3" VERSION_ID="21.3"<br />
HOME_URL="<a href="https://www.linuxmint.com/" title=") SUPPORT_URL=&quot;[https://forums.linuxmint.com/&quot;](https://forums.linuxmint.com/">https://www.linuxmint.com/"</a>
BUG_REPORT_URL="<a href="http://linuxmint-troubleshooting-guide.readthedocs.io/en/latest/" title=") PRIVACY_POLICY_URL=&quot;[https://www.linuxmint.com/&quot;](https://www.linuxmint.com/">http://linuxmint-troubleshooting-guide.readthedocs.io/en/latest/"</a><br />
VERSION_CODENAME=virginia UBUNTU_CODENAME=jammy</p>
<h3 id="backup">Backup<a class="headerlink" href="#backup" title="Permanent link">&para;</a></h3>
<p><em>No response</em></p>
<h3 id="storage_layout">Storage layout<a class="headerlink" href="#storage_layout" title="Permanent link">&para;</a></h3>
<p><em>No response</em></p>
<h3 id="what_steps_will_reproduce_the_bug">What steps will reproduce the bug?<a class="headerlink" href="#what_steps_will_reproduce_the_bug" title="Permanent link">&para;</a></h3>
<p>rear -D mkrescue</p>
<h3 id="workaround_if_any">Workaround, if any<a class="headerlink" href="#workaround_if_any" title="Permanent link">&para;</a></h3>
<p>No valid workaround found.</p>
<h3 id="additional_information">Additional information<a class="headerlink" href="#additional_information" title="Permanent link">&para;</a></h3>
<p>Tried to create an USB recovery stick since neither OUTPUT=ISO nor
OUTPUT=PXE worked with iVentoy IPXE server.</p>
<h4 id="gdha_commented_at_2025-05-09_0829"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/3470#issuecomment-2865643226">2025-05-09 08:29</a>:<a class="headerlink" href="#gdha_commented_at_2025-05-09_0829" title="Permanent link">&para;</a></h4>
<p>You need to format the USB stick first according the instructions listed
in <a href="https://relax-and-recover.org/usage/#recovery_from_usb">https://relax-and-recover.org/usage/#recovery_from_usb</a></p>
<h4 id="nomisfi_commented_at_2025-05-15_2126"><img src="https://avatars.githubusercontent.com/u/109468904?v=4" width="50"><a href="https://github.com/nomiSFI">nomiSFI</a> commented at <a href="https://github.com/rear/rear/issues/3470#issuecomment-2885091382">2025-05-15 21:26</a>:<a class="headerlink" href="#nomisfi_commented_at_2025-05-15_2126" title="Permanent link">&para;</a></h4>
<p>Dear gdha,<br />
thanks for pointing this out. However, I am still getting an error, see
attached screenshot.<br />
<img alt="Image" src="https://github.com/user-attachments/assets/bb7186f2-31d7-4ef8-aa76-244de035ce03" /><br />
Best regards Frank</p>
<h4 id="gdha_commented_at_2025-05-16_0614"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/3470#issuecomment-2885742785">2025-05-16 06:14</a>:<a class="headerlink" href="#gdha_commented_at_2025-05-16_0614" title="Permanent link">&para;</a></h4>
<p>@nomiSFI Can you show us your <code>/etc/rear/local.conf</code> file please?</p>
<h4 id="nomisfi_commented_at_2025-05-16_1610"><img src="https://avatars.githubusercontent.com/u/109468904?v=4" width="50"><a href="https://github.com/nomiSFI">nomiSFI</a> commented at <a href="https://github.com/rear/rear/issues/3470#issuecomment-2887144403">2025-05-16 16:10</a>:<a class="headerlink" href="#nomisfi_commented_at_2025-05-16_1610" title="Permanent link">&para;</a></h4>
<p>Dear gdha,<br />
I noticed that I did not comment following lines in my local.conf:</p>
<p>ISO_MKISOFS_BIN="/usr/bin/mkisofs"<br />
ISO_NAME="rear-rescue"<br />
ISO_ISOLINUX=auto<br />
ISO_DIR="/mnt/NAS/ReaR/iso"</p>
<p>The errors in my earlier message may therefore not be relevant.</p>
<p>I did a new start, omitting the ISO stuff:</p>
<p><strong>/etc/rear/local.conf</strong><br />
OUTPUT=USB<br />
USB_DEVICE=/dev/sda<br />
BACKUP=NETFS<br />
BACKUP_URL=nfs://192.168.100.5/mnt/DataStore/Backups/<br />
USE_STATIC_NETWORKING=1<br />
STATIC_IP=192.168.100.1<br />
STATIC_NETMASK=255.255.255.0<br />
STATIC_GATEWAY=192.168.100.250<br />
STATIC_BROADCAST=192.168.100.255<br />
STATIC_HOSTNAME=Boudreaux<br />
STATIC_DNS="192.168.100.100"<br />
BOOTLOADER="GRUB"<br />
GRUB_RESCUE=y<br />
BACKUP_PROG_COMPRESS_OPTIONS="--zstd"<br />
BACKUP_PROG_EXCLUDE=(<br />
"/home"<br />
"<em>.iso"<br />
"/tmp/</em>"<br />
"/var/tmp/<em>"<br />
"/var/cache/</em>"<br />
"/var/log/<em>"<br />
"/run/</em>"<br />
"/mnt/<em>"<br />
"/media/</em>"<br />
"/dev/<em>"<br />
"/proc/</em>"<br />
"/sys/*"<br />
)</p>
<p><strong>$ sudo rear -v mkrescue</strong><br />
Relax-and-Recover 2.6 / Git<br />
Running rear mkrescue (PID 30937)<br />
Using log file: /var/log/rear/rear-Boudreaux.log<br />
Running workflow mkrescue on the normal/original system<br />
Using autodetected kernel '/boot/vmlinuz-5.15.0-140-generic' as kernel
in the recovery system<br />
Creating disk layout<br />
Overwriting existing disk layout file
/var/lib/rear/layout/disklayout.conf<br />
Docker is running, skipping filesystems mounted below Docker Root Dir
/var/lib/docker<br />
Using specified bootloader 'GRUB'<br />
Verifying that the entries in /var/lib/rear/layout/disklayout.conf are
correct ...<br />
Creating recovery system root filesystem skeleton layout<br />
Skipping 'docker0': not bound to any physical interface.<br />
Copying logfile /var/log/rear/rear-Boudreaux.log into initramfs as
'/tmp/rear-Boudreaux-partial-2025-05-16T17:38:10+02:00.log'<br />
Copying files and directories<br />
Copying binaries and libraries<br />
Copying all kernel modules in /lib/modules/5.15.0-140-generic (MODULES
contains 'all_modules')<br />
Copying all files in /lib*/firmware/<br />
Symlink '/usr/share/misc/magic' -&gt; '/usr/share/file/magic' refers to
a non-existing directory on the recovery system.<br />
It will not be copied by default. You can include
'/usr/share/file/magic' via the 'COPY_AS_IS' configuration variable.<br />
Symlink '/lib/modules/5.15.0-140-generic/build' -&gt;
'/usr/src/linux-headers-5.15.0-140-generic' refers to a non-existing
directory on the recovery system.<br />
It will not be copied by default. You can include
'/usr/src/linux-headers-5.15.0-140-generic' via the 'COPY_AS_IS'
configuration variable.<br />
Testing that the recovery system in /tmp/rear.Koqr6vDmnDTjvDk/rootfs
contains a usable system<br />
Creating recovery/rescue system initramfs/initrd initrd.cgz with gzip
default compression<br />
Created initrd.cgz with gzip default compression (782779775 bytes) in 65
seconds<br />
ERROR: Mount command 'mount -v -o rw,noatime /dev/sda
/tmp/rear.Koqr6vDmnDTjvDk/outputfs' failed.<br />
Some latest log messages since the last called script
100_mount_output_path.sh:<br />
2025-05-16 17:39:53.889032507 Including
output/default/100_mount_output_path.sh<br />
mkdir: created directory '/tmp/rear.Koqr6vDmnDTjvDk/outputfs'<br />
2025-05-16 17:39:53.901661070 Mounting with 'mount -v -o rw,noatime
/dev/sda /tmp/rear.Koqr6vDmnDTjvDk/outputfs'<br />
mount: /tmp/rear.Koqr6vDmnDTjvDk/outputfs: no medium found on
/dev/sda.<br />
Aborting due to an error, check /var/log/rear/rear-Boudreaux.log for
details<br />
Exiting rear mkrescue (PID 30937) and its descendant processes ...<br />
Running exit tasks<br />
Beendet</p>
<p><strong>/var/log/rear/rear-Boudreaux.log:</strong><br />
2025-05-16 17:39:53.845509198 ======================<br />
2025-05-16 17:39:53.849814588 Running 'output' stage<br />
2025-05-16 17:39:53.854131363 ======================<br />
2025-05-16 17:39:53.869175610 Including
output/default/010_set_umask.sh<br />
2025-05-16 17:39:53.872644576 Setting umask to 077<br />
2025-05-16 17:39:53.880779875 Including
output/USB/Linux-i386/100_create_efiboot.sh<br />
2025-05-16 17:39:53.889032507 Including
output/default/100_mount_output_path.sh<br />
mkdir: created directory '/tmp/rear.Koqr6vDmnDTjvDk/outputfs'<br />
2025-05-16 17:39:53.901661070 Mounting with 'mount -v -o rw,noatime
/dev/sda /tmp/rear.Koqr6vDmnDTjvDk/outputfs'<br />
mount: /tmp/rear.Koqr6vDmnDTjvDk/outputfs: no medium found on
/dev/sda.<br />
2025-05-16 17:39:53.917262235 ERROR: Mount command 'mount -v -o
rw,noatime /dev/sda /tmp/rear.Koqr6vDmnDTjvDk/outputfs' failed.<br />
===== Stack trace =====<br />
Trace 0: /usr/sbin/rear:541 main<br />
Trace 1: /usr/share/rear/lib/mkrescue-workflow.sh:22
WORKFLOW_mkrescue<br />
Trace 2: /usr/share/rear/lib/framework-functions.sh:116 SourceStage<br />
Trace 3: /usr/share/rear/lib/framework-functions.sh:56 Source<br />
Trace 4: /usr/share/rear/output/default/100_mount_output_path.sh:15
source<br />
Trace 5: /usr/share/rear/lib/global-functions.sh:563 mount_url<br />
=== End stack trace ===<br />
2025-05-16 17:39:53.928602987 Exiting rear mkrescue (PID 30937) and its
descendant processes ...<br />
2025-05-16 17:39:57.066226335 rear,30937 /usr/sbin/rear -v mkrescue<br />
<code>-rear,50089 /usr/sbin/rear -v mkrescue</code>-pstree,50090 -Aplau 30937<br />
/usr/share/rear/lib/_input-output-functions.sh: line 151: kill:
(50093) - No such process<br />
2025-05-16 17:39:57.109129939 Running exit tasks<br />
removed directory '/tmp/rear.Koqr6vDmnDTjvDk/outputfs'<br />
2025-05-16 17:39:57.114018159 Finished in 113 seconds<br />
2025-05-16 17:39:57.116803934 Removing build area
/tmp/rear.Koqr6vDmnDTjvDk<br />
removed directory '/tmp/rear.Koqr6vDmnDTjvDk'<br />
2025-05-16 17:39:58.133089280 End of program reached</p>
<p>I must be possible to backup to a NFS share on my NAS and create a
bootable USB stick which then can do a restore from the NAS. The
information in <a href="https://relax-and-recover.org/usage/#recovery_from_usb">https://relax-and-recover.org/usage/#recovery_from_usb</a>
suggests this line:
<strong>BACKUP_URL="usb:///dev/disk/by-label/REAR-000"</strong>.<br />
However, I can hardly backup 2 TB to a 8GB USB stick, the idea is to
save to the NAS.</p>
<p>Thanks for your help!<br />
Best regards<br />
Frank</p>
<h4 id="gdha_commented_at_2025-05-17_0843"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/3470#issuecomment-2888229726">2025-05-17 08:43</a>:<a class="headerlink" href="#gdha_commented_at_2025-05-17_0843" title="Permanent link">&para;</a></h4>
<p>@nomiSFI in your local.conf file remove all STATIC_* lines are these
will <em>not</em> be used by ReaR!<br />
Use the following example instead:</p>
<pre><code>NETWORKING_PREPARATION_COMMANDS=( 'ip addr add 192.168.100.2/24 dev eth0' 'ip link set dev eth0 up' 'ip route add default via 192.168.100.1' 'return' )
</code></pre>
<p>Furthermore, the line <code>USB_DEVICE=/dev/sda</code> is <em>not</em> correct as it
should be <code>USB_DEVICE=/dev/disk/by-label/REAR-000</code> if you formatted the
USB device via <code>rear format /dev/sda</code></p>
<h4 id="jsmeix_commented_at_2025-05-19_1307"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/3470#issuecomment-2890971589">2025-05-19 13:07</a>:<a class="headerlink" href="#jsmeix_commented_at_2025-05-19_1307" title="Permanent link">&para;</a></h4>
<p>@nomiSFI<br />
regarding "backup 2 TB":</p>
<p>Don't do that with ReaR.</p>
<p>Regarding ReaR versus "big data" backup see my<br />
<a href="https://github.com/rear/rear/issues/3451#issuecomment-2841051182">https://github.com/rear/rear/issues/3451#issuecomment-2841051182</a><br />
which is in general about</p>
<pre><code>separating disaster recovery of the basic operating system
from restore of the big data
</code></pre>
<p>So I recommend to use OUTPUT=USB with a (removable) disk<br />
for ReaR and its backup of only the basic operating system<br />
and save your "big data" to your NAS in a separated<br />
procedure which is independent of ReaR.</p>
<p>Of course you are free to do a "backup 2 TB" with<br />
ReaR and OUTPUT=USB on a sufficiently big (removable)<br />
external disk that is connected e.g. via fast USB3<br />
which could be even faster than NAS network access<br />
(depending on your USB and network hardware).</p>
<p>In general you may also have a look at the section<br />
"Relax-and-Recover versus backup and restore"<br />
<a href="https://en.opensuse.org/SDB:Disaster_Recovery#Relax-and-Recover_versus_backup_and_restore">https://en.opensuse.org/SDB:Disaster_Recovery#Relax-and-Recover_versus_backup_and_restore</a></p>
<h4 id="nomisfi_commented_at_2025-05-21_1120"><img src="https://avatars.githubusercontent.com/u/109468904?v=4" width="50"><a href="https://github.com/nomiSFI">nomiSFI</a> commented at <a href="https://github.com/rear/rear/issues/3470#issuecomment-2897579989">2025-05-21 11:20</a>:<a class="headerlink" href="#nomisfi_commented_at_2025-05-21_1120" title="Permanent link">&para;</a></h4>
<p>Dear Johannes,<br />
thanks for your reply!<br />
I still cannot restore from my rear formatted 250GB SSD 850 EVO USB
drive :-(<br />
Here's my local.conf:</p>
<pre><code>OUTPUT=USB
OUTPUT_URL=usb:///dev/disk/by-label/REAR-000
USB_DEVICE=/dev/disk/by-label/REAR-000
BACKUP=NETFS
BACKUP_URL=nfs://192.168.100.5/mnt/DataStore/Backups
COPY_AS_IS=( /lib/modules/$(uname -r)/kernel/drivers/video/nvidia.ko )
Boudreaux.old': Device or resource busy
BACKUP_PROG_COMPRESS_OPTIONS=( -I "zstd -3 -c" )
BACKUP_PROG_COMPRESS_SUFFIX=".zst"
BACKUP_PROG_EXCLUDE=( '/tmp/*' '/dev/shm/*' '/home/*' '/media/*' '/mnt/*' '/usr/ollama/*' '/usr/local/lib/ollama/*' '/opt/iventoy/*'  '*.iso' "$VAR_DIR/output/*" )
</code></pre>
<p>And here the error after a successful boot:<br />
<img alt="Image" src="https://github.com/user-attachments/assets/eedeb841-66a3-4def-8042-b3df73efe1b5" /></p>
<p>What needs to be done to get the neccessary files into the
/usr/share/rear/direcotory?<br />
<img alt="Image" src="https://github.com/user-attachments/assets/b59bd156-64b7-4c76-8f1b-4630fbcbe5f1" /></p>
<p>Thanks much, appreciate your help!<br />
Best regards<br />
Frank</p>
<h4 id="jsmeix_commented_at_2025-05-21_1542"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/3470#issuecomment-2898429574">2025-05-21 15:42</a>:<a class="headerlink" href="#jsmeix_commented_at_2025-05-21_1542" title="Permanent link">&para;</a></h4>
<p>@nomiSFI<br />
your <code>COPY_AS_IS=( ... )</code> kills it all.<br />
See usr/share/rear/conf/default.conf<br />
for ReaR 2.6 online starting at<br />
<a href="https://github.com/rear/rear/blob/rear-2.6/usr/share/rear/conf/default.conf#L1340">https://github.com/rear/rear/blob/rear-2.6/usr/share/rear/conf/default.conf#L1340</a><br />
how to correctly add things to arrays like COPY_AS_IS<br />
which are predefined in default.conf as</p>
<pre><code>COPY_AS_IS=( $SHARE_DIR $VAR_DIR )
</code></pre>
<p>Your <code>COPY_AS_IS=( ... )</code> overwrites that with only your values<br />
so you get in your ReaR recovery system only what you specified<br />
via your <code>COPY_AS_IS=( ... )</code> without all the ReaR stuff<br />
in ReaR's $SHARE_DIR and $VAR_DIR.<br />
I.e. in your local.conf use</p>
<pre><code>COPY_AS_IS+=( your additional things )
</code></pre>
<p>Same for BACKUP_PROG_EXCLUDE.<br />
When you like to specify additional things to exclude use</p>
<pre><code>BACKUP_PROG_EXCLUDE+=( your additional things )
</code></pre>
<p>When you want to overwrite ReaR automtisms for BACKUP_PROG_EXCLUDE<br />
and only want to exclude what you explicity specified then use</p>
<pre><code>BACKUP_PROG_EXCLUDE=( only your things )
</code></pre>
<p>By the way:<br />
I wonder what that line</p>
<pre><code>Boudreaux.old': Device or resource busy
</code></pre>
<p>is in your local.conf in your<br />
<a href="https://github.com/rear/rear/issues/3470#issuecomment-2897579989">https://github.com/rear/rear/issues/3470#issuecomment-2897579989</a><br />
Is that line perhaps a copy&amp;paste typo<br />
or does that line really exist in your local.conf?</p>
<h4 id="nomisfi_commented_at_2025-05-22_2131"><img src="https://avatars.githubusercontent.com/u/109468904?v=4" width="50"><a href="https://github.com/nomiSFI">nomiSFI</a> commented at <a href="https://github.com/rear/rear/issues/3470#issuecomment-2902619380">2025-05-22 21:31</a>:<a class="headerlink" href="#nomisfi_commented_at_2025-05-22_2131" title="Permanent link">&para;</a></h4>
<p>Dear Johannes,</p>
<p>thank you for your reply, this helped alot!</p>
<p>Now I am able to boot the recovery media without a problem.<br />
However, when trying to recover my system I could nor do so, due to a
missing boot loader:</p>
<p><img alt="Image" src="https://github.com/user-attachments/assets/6fb2742b-46f4-4e30-b2f6-4dfdf3d29157" /></p>
<p>I have: grub-install (GRUB) 2.06-2ubuntu7.2, Legacy BIOS boot and boot
disk layout:</p>
<pre><code>nvme0n1
│                                                                             
└─nvme0n1p1
     LVM2_m LVM2        aQsufx-QP1n-fPdy-lmNE-TlmD-TbCS-Frw8GS                
  ├─mint--vg-root
  │  ext4   1.0         43203ead-891a-4fc7-9d19-5138c6ce5537    893,5G    47% /
  └─mint--vg-swap_1
     swap   1           7eecfb22-1cfe-4a7b-8e5f-d0b31912a8e2                  [SWAP]
</code></pre>
<p>I am trying to convert the information in
/usr/share/rear/finalize/Linux-i386/660_install_grub2.sh to my
local.conf (below) but seem not to be able to do so.</p>
<pre><code>OUTPUT=USB
OUTPUT_URL=usb:///dev/disk/by-label/REAR-000
USB_DEVICE=/dev/disk/by-label/REAR-000
BACKUP=NETFS
BACKUP_URL=nfs://192.168.100.5/mnt/DataStore/Backups
USE_STATIC_NETWORKING=yes
KERNEL_CMDLINE="modprobe.blacklist=nvidia,nvidia_uvm,nvidia_modeset,nvidia_drm nomodeset vga=normal"
BACKUP_PROG_COMPRESS_OPTIONS=( -I "zstd -3 -c" )
BACKUP_PROG_COMPRESS_SUFFIX=".zst"
BACKUP_PROG_EXCLUDE=( '/tmp/*' '/dev/shm/*' '/home/*' '/media/*' '/mnt/*' '/usr/ollama/*' '/opt/iventoy/*' '*.iso' "$VAR_DIR/output/*" )
</code></pre>
<p>Once agian, thanks much. Your help is really appreciated!</p>
<p>Bes regards<br />
Frank</p>
<p>P.S. Boudreaux.old': Device or resource busy: This was an old comment
and is obsolete.</p>
<h4 id="jsmeix_commented_at_2025-05-23_0654"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/3470#issuecomment-2903454338">2025-05-23 06:54</a>:<a class="headerlink" href="#jsmeix_commented_at_2025-05-23_0654" title="Permanent link">&para;</a></h4>
<p>@nomiSFI<br />
when</p>
<pre><code>chroot /mnt/local bash --login
</code></pre>
<p>fails after "rear recover", things don't look good<br />
because at /mnt/local the recreated system is mounted<br />
where in particular your backup should have been restored<br />
so there should be a binary 'bash' below /mnt/local<br />
normally this would be /mnt/local/bin/bash</p>
<p>PATH does matter:<br />
For ReaR 2.6 inside the ReaR recovery system</p>
<pre><code>PATH=/bin
</code></pre>
<p><a href="https://github.com/rear/rear/blob/rear-2.6/usr/share/rear/skel/default/etc/profile#L6">https://github.com/rear/rear/blob/rear-2.6/usr/share/rear/skel/default/etc/profile#L6</a><br />
so inside the recreated system the binary 'bash'<br />
must be /bin/bash so that it can be found by</p>
<pre><code>chroot /mnt/local bash --login
</code></pre>
<p>i.e. from inside a ReaR 2.6 recovery system<br />
the 'bash' must be /mnt/local/bin/bash</p>
<p>So you should first and foremost verify that</p>
<ul>
<li>your backup is sufficiently complete (contains all needed files)</li>
<li>your backup was properly restored during "rear recover"</li>
<li>you have a /mnt/local/bin/bash after "rear recover"</li>
</ul>
<p>Regarding the bootloader installation:<br />
What did "rear recover" show you about the bootloader installation<br />
in the recreated system?<br />
During "rear recover" the bootloader installation happens<br />
after the backup was restored.</p>
<h4 id="jsmeix_commented_at_2025-05-23_0709"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/3470#issuecomment-2903486022">2025-05-23 07:09</a>:<a class="headerlink" href="#jsmeix_commented_at_2025-05-23_0709" title="Permanent link">&para;</a></h4>
<p>@nomiSFI</p>
<p>is there a special reason why you use a rather old ReaR version?<br />
ReaR 2.6 is from June 2020 i.e. almost 5 years old.<br />
Our current release is version 2.9 (from January 2025).</p>
<p>FYI some generic boilerplate info:</p>
<p>In general I recommend to try out our latest GitHub master code<br />
because the GitHub master code is the only place where we (i.e.<br />
the ReaR upstream authors and maintainers) can fix things and<br />
if there are issues it helps when you use exactly the code<br />
where we could fix things.</p>
<p>See the "QUICK START GUIDE" and "INSTALLATION" parts on<br />
<a href="https://github.com/rear/rear">https://github.com/rear/rear</a></p>
<p>Additionally / alternatively see the section<br />
"Testing current ReaR upstream GitHub master code" in<br />
<a href="https://en.opensuse.org/SDB:Disaster_Recovery">https://en.opensuse.org/SDB:Disaster_Recovery</a><br />
how you can try out our current ReaR GitHub master code<br />
without conflicts with your already installed ReaR version.</p>
<p>In general we at ReaR upstream do not support older ReaR versions.<br />
We at ReaR upstream do not plain reject issues with older ReaR
versions<br />
(e.g. we may answer easy to solve questions also for older ReaR
versions)<br />
but we do not spend much time on issues with older ReaR versions
because<br />
we do not (and cannot) fix issues in released ReaR versions.<br />
Issues in released ReaR versions are not fixed by us (by ReaR
upstream).<br />
Issues in released ReaR versions that got fixed in current ReaR
upstream<br />
GitHub master code might be fixed (if the fix can be backported with<br />
reasonable effort) by the Linux distributor wherefrom you got ReaR.</p>
<p>In particular regarding Ubuntu / Debian<br />
and Linux distributions which are based on them:</p>
<p>I am neither a Ubuntu user nor a Debian user nor a Linux Mint user.<br />
Currently we at ReaR upstream do not have an active<br />
maintainer for Ubuntu / Debian / Linux Mint.<br />
So ReaR support for Ubuntu / Debian / Linux Mint<br />
can be only as good as voluntary contributors<br />
who use those Linux distributions contribute<br />
which is much appreciated!</p>
<p>In particular regarding Ubuntu:<br />
It seems Canonical is not sufficiently interested in ReaR<br />
in contrast to Red Hat and SUSE who pay developers<br />
(like me from SUSE and e.g. @pcahyna and @lzaoral from Red Hat)<br />
to contribute to upstream ReaR because Red Hat and SUSE<br />
support ReaR in their enterprise Linux distributions.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2025 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2025-05-07.3470.issue.open.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
