<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#1335 Issue closed: ReaR PXE setup for SLES11 to boot HP ProLiant with UEFI - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#1335 Issue closed: ReaR PXE setup for SLES11 to boot HP ProLiant with UEFI";
        var mkdocs_page_input_path = "issues/2017-04-27.1335.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
      <li class="breadcrumb-item active">#1335 Issue closed: ReaR PXE setup for SLES11 to boot HP ProLiant with UEFI</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="1335_issue_closed_rear_pxe_setup_for_sles11_to_boot_hp_proliant_with_uefi"><a href="https://github.com/rear/rear/issues/1335">#1335 Issue</a> <code>closed</code>: ReaR PXE setup for SLES11 to boot HP ProLiant with UEFI<a class="headerlink" href="#1335_issue_closed_rear_pxe_setup_for_sles11_to_boot_hp_proliant_with_uefi" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>support / question</code>, <code>fixed / solved / done</code></p>
<h4 id="sko341_opened_issue_at_2017-04-27_1740"><img src="https://avatars.githubusercontent.com/u/28111434?v=4" width="50"><a href="https://github.com/sko341">sko341</a> opened issue at <a href="https://github.com/rear/rear/issues/1335">2017-04-27 17:40</a>:<a class="headerlink" href="#sko341_opened_issue_at_2017-04-27_1740" title="Permanent link">&para;</a></h4>
<h4 id="relax-and-recover_rear_issue">Relax-and-Recover (ReaR) Issue<a class="headerlink" href="#relax-and-recover_rear_issue" title="Permanent link">&para;</a></h4>
<p>Can someone please help me configure rear for DR with PXE. Idea is to
store rear rescue image to PXE server, and in event of disaster, recover
via pxe boot. Sharing of local.conf configuration for this setup will be
highly appreciated.</p>
<ul>
<li>rear version<br />
    Relax-and-Recover 2.00 / Git</li>
<li>OS version<br />
    SLES 11 SP4</li>
</ul>
<p>Thanks</p>
<h4 id="didacog_commented_at_2017-04-27_1802"><img src="https://avatars.githubusercontent.com/u/5380209?u=163f1571e6b9c9c7df94e2c6ca152b0a7406b52d&v=4" width="50"><a href="https://github.com/didacog">didacog</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-297792758">2017-04-27 18:02</a>:<a class="headerlink" href="#didacog_commented_at_2017-04-27_1802" title="Permanent link">&para;</a></h4>
<p>Hi,</p>
<p>Maybe you can take a look at DRLM (<a href="http://www.drlm.org">www.drlm.org</a>)
to manage your PXE rear setup with central managent of rear configs,
scheduling and more... ;)</p>
<p>Regards,</p>
<h4 id="gozora_commented_at_2017-04-27_1805"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-297793362">2017-04-27 18:05</a>:<a class="headerlink" href="#gozora_commented_at_2017-04-27_1805" title="Permanent link">&para;</a></h4>
<p>@didacog you was the first thing on my mind when I've read subject of
this issue :-)</p>
<h4 id="gozora_commented_at_2017-04-27_1814"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-297795728">2017-04-27 18:14</a>:<a class="headerlink" href="#gozora_commented_at_2017-04-27_1814" title="Permanent link">&para;</a></h4>
<p>@SuneelOad I've found
<a href="https://github.com/rear/rear/blob/16d55433c5e5c1ccc3d7d54f8e096fd8b0b74c2d/usr/share/rear/conf/examples/PXE-booting-example-with-URL-style.conf">this</a>.</p>
<p>Maybe it helps.</p>
<p>V.</p>
<h4 id="sko341_commented_at_2017-04-27_2205"><img src="https://avatars.githubusercontent.com/u/28111434?v=4" width="50"><a href="https://github.com/sko341">sko341</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-297852350">2017-04-27 22:05</a>:<a class="headerlink" href="#sko341_commented_at_2017-04-27_2205" title="Permanent link">&para;</a></h4>
<p>@gozora: thanks for sharing, that helped in creating rescue image on PXE
server. But I still can not see rescue image in pxe boot options. Here
is local.conf:</p>
<p>OUTPUT=PXE<br />
OUTPUT_PREFIX_PXE=$HOSTNAME<br />
BACKUP=NETFS<br />
BACKUP_URL=nfs://x.x.x.x/opt/rear<br />
PXE_TFTP_URL=<a href="http://x.x.x.x/tftpboot">http://x.x.x.x/tftpboot</a><br />
PXE_CONFIG_URL=<a href="http://x.x.x.x/tftpboot/pxelinux.cfg">http://x.x.x.x/tftpboot/pxelinux.cfg</a></p>
<h4 id="gdha_commented_at_2017-04-28_1010"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-297961554">2017-04-28 10:10</a>:<a class="headerlink" href="#gdha_commented_at_2017-04-28_1010" title="Permanent link">&para;</a></h4>
<p>@SuneelOad You should check the PXE config files at
<a href="http://10.48.187.202/tftpboot/pxelinux.cfg">http://10.48.187.202/tftpboot/pxelinux.cfg</a>
location.<br />
Was the upload successful of the config files? Check the rear log to be
sure.</p>
<h4 id="sko341_commented_at_2017-04-28_1538"><img src="https://avatars.githubusercontent.com/u/28111434?v=4" width="50"><a href="https://github.com/sko341">sko341</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-298031814">2017-04-28 15:38</a>:<a class="headerlink" href="#sko341_commented_at_2017-04-28_1538" title="Permanent link">&para;</a></h4>
<p>@gdha PXE config files were not uploading at
<a href="http://x.x.x.x/tftpboot/pxelinux.cfg">http://x.x.x.x/tftpboot/pxelinux.cfg</a>,
although in logs it says "Created pxelinux config 'rear-xxxx' and
symlinks for IP adresses in
<a href="http://x.x.x.x/tftpboot/pxelinux.cfg">http://x.x.x.x/tftpboot/pxelinux.cfg</a>".<br />
But when I am changing it to nfs share at:<br />
PXE_TFTP_URL=nfs://x.x.x.x/opt/rear/tftpboot<br />
PXE_CONFIG_URL=nfs://x.x.x.x/opt/rear/tftpboot/pxelinux.cfg<br />
then config files are creating but even then I still can not see rescue
image in pxe boot options.</p>
<h4 id="gozora_commented_at_2017-04-28_1705"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-298053117">2017-04-28 17:05</a>:<a class="headerlink" href="#gozora_commented_at_2017-04-28_1705" title="Permanent link">&para;</a></h4>
<p>Maybe I got it all wrong (I never used ReaR with PXE), but is "rescue
image" created with PXE at all?<br />
Shouldn't PXE just provide initrd and kernel for client booting?</p>
<p>V.</p>
<h4 id="sko341_commented_at_2017-04-28_1717"><img src="https://avatars.githubusercontent.com/u/28111434?v=4" width="50"><a href="https://github.com/sko341">sko341</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-298055876">2017-04-28 17:17</a>:<a class="headerlink" href="#sko341_commented_at_2017-04-28_1717" title="Permanent link">&para;</a></h4>
<p>@gozora you are right, PXE is just providing initrd and kernel for
client booting.</p>
<h4 id="sko341_commented_at_2017-04-28_2045"><img src="https://avatars.githubusercontent.com/u/28111434?v=4" width="50"><a href="https://github.com/sko341">sko341</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-298102377">2017-04-28 20:45</a>:<a class="headerlink" href="#sko341_commented_at_2017-04-28_2045" title="Permanent link">&para;</a></h4>
<p>I am able to boot from PXE, now rear recover is failing with following
error:<br />
ERROR: Mount command 'Mount -v -t nfs -o rw,noatime x.x.x.x:/opt/rear
/tmp/rear.vBU7wCBHSxHI51f/outputfs failed.<br />
Also, i can not ping to nfs server, looks like network is not working,
but i can boot via PXE (network works in this case) . Any help please!</p>
<h4 id="gozora_commented_at_2017-04-28_2109"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-298107403">2017-04-28 21:09</a>:<a class="headerlink" href="#gozora_commented_at_2017-04-28_2109" title="Permanent link">&para;</a></h4>
<p>Again just a guess, 'ifconfig &lt;dev_name&gt; inet &lt;ipaddress&gt;
netmask 255.0.0.0<code>;</code>rear recover`</p>
<h4 id="sko341_commented_at_2017-04-28_2116"><img src="https://avatars.githubusercontent.com/u/28111434?v=4" width="50"><a href="https://github.com/sko341">sko341</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-298108666">2017-04-28 21:16</a>:<a class="headerlink" href="#sko341_commented_at_2017-04-28_2116" title="Permanent link">&para;</a></h4>
<p>Thanks @gozora that didnt help.<br />
forgot to mention, I am trying to create rescue image for physical
server (successful) and then PXE booting to Virtual machine (physical to
virtual migration), and PXE booting is also working but while recover it
shows network unreachable, i guess this is some kind of driver issue.
But how to fix it, any help!</p>
<h4 id="gozora_commented_at_2017-04-28_2121"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-298109600">2017-04-28 21:21</a>:<a class="headerlink" href="#gozora_commented_at_2017-04-28_2121" title="Permanent link">&para;</a></h4>
<p>Do you see some network interfaces in <code>ifconfig -a</code> output?</p>
<h4 id="sko341_commented_at_2017-04-28_2124"><img src="https://avatars.githubusercontent.com/u/28111434?v=4" width="50"><a href="https://github.com/sko341">sko341</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-298110240">2017-04-28 21:24</a>:<a class="headerlink" href="#sko341_commented_at_2017-04-28_2124" title="Permanent link">&para;</a></h4>
<p>yes, it say UP. But i cannot even ping to gateway.</p>
<h4 id="gozora_commented_at_2017-04-28_2127"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-298110780">2017-04-28 21:27</a>:<a class="headerlink" href="#gozora_commented_at_2017-04-28_2127" title="Permanent link">&para;</a></h4>
<p>Can you paste output here?</p>
<h4 id="sko341_commented_at_2017-04-28_2147"><img src="https://avatars.githubusercontent.com/u/28111434?v=4" width="50"><a href="https://github.com/sko341">sko341</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-298114325">2017-04-28 21:47</a>:<a class="headerlink" href="#sko341_commented_at_2017-04-28_2147" title="Permanent link">&para;</a></h4>
<p>please see here:<br />
<img alt="rear-eth" src="https://cloud.githubusercontent.com/assets/28111434/25548493/7e95f6dc-2c21-11e7-9600-97b9a245c87c.png" /></p>
<h4 id="gozora_commented_at_2017-04-28_2154"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-298115528">2017-04-28 21:54</a>:<a class="headerlink" href="#gozora_commented_at_2017-04-28_2154" title="Permanent link">&para;</a></h4>
<p>Ok try, ifconfig eth6 inet &lt;ipaddress&gt; netmask 255.0.0.0; rear
recover</p>
<h4 id="gozora_commented_at_2017-04-28_2203"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-298117125">2017-04-28 22:03</a>:<a class="headerlink" href="#gozora_commented_at_2017-04-28_2203" title="Permanent link">&para;</a></h4>
<p>Thinking of it, you might really have drivers missing when
migrating...<br />
Try to search ReaR issues for "howto include modules" to recovery
system.</p>
<h4 id="schlomo_commented_at_2017-05-01_1358"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-298337709">2017-05-01 13:58</a>:<a class="headerlink" href="#schlomo_commented_at_2017-05-01_1358" title="Permanent link">&para;</a></h4>
<p>I would be surprised at a driver problem as you actually see a NIC in
the VM. Do you use DHCP on the physical server? If so then maybe there
was an issue picking that up. To check try to add <code>USE_DHCLIENT=y</code> and
create a new rescue system to force the rescue system to use DHCP.</p>
<p>I would also expect the rescue system to take you through the network
reconfiguration where you would have to choose the network card.</p>
<h4 id="sko341_commented_at_2017-05-01_2146"><img src="https://avatars.githubusercontent.com/u/28111434?v=4" width="50"><a href="https://github.com/sko341">sko341</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-298441397">2017-05-01 21:46</a>:<a class="headerlink" href="#sko341_commented_at_2017-05-01_2146" title="Permanent link">&para;</a></h4>
<p>@gozora "ifconfig eth6 inet <ipaddress> netmask 255.0.0.0; rear recover"
solved network issue and recover is successfully finished, but after
reboot system is not booting up (error: OS not found). I checked BIOS
setting and changed it local disk, even that didnt solve the issue. Any
suggestion, anyone please? pasting error below:<br />
<img alt="image" src="https://cloud.githubusercontent.com/assets/28111434/25596207/ee57c650-2e7c-11e7-8946-24c06bb4abe7.png" /></p>
<h4 id="sko341_commented_at_2017-05-02_0003"><img src="https://avatars.githubusercontent.com/u/28111434?v=4" width="50"><a href="https://github.com/sko341">sko341</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-298464238">2017-05-02 00:03</a>:<a class="headerlink" href="#sko341_commented_at_2017-05-02_0003" title="Permanent link">&para;</a></h4>
<p>and here is error message if i am trying recover on same physical
server:<br />
<img alt="image" src="https://cloud.githubusercontent.com/assets/28111434/25599308/0880c6b8-2e90-11e7-98b2-485502b585b1.png" /></p>
<p>any help...</p>
<h4 id="icebal_commented_at_2017-05-05_2100"><img src="https://avatars.githubusercontent.com/u/946581?u=6c08f02ac67727afa178cbb7dc926c0b7e3d862d&v=4" width="50"><a href="https://github.com/icebal">icebal</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-299574461">2017-05-05 21:00</a>:<a class="headerlink" href="#icebal_commented_at_2017-05-05_2100" title="Permanent link">&para;</a></h4>
<p>See issue #214 on this. SLES has a patched version of mkisofs and
causes issues with uefo. The current solution is located at this link:
<a href="http://www.it3.be/2015/10/27/uefi-iso-boot-with-ebiso/">http://www.it3.be/2015/10/27/uefi-iso-boot-with-ebiso/</a></p>
<h4 id="gdha_commented_at_2017-05-09_1131"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-300136278">2017-05-09 11:31</a>:<a class="headerlink" href="#gdha_commented_at_2017-05-09_1131" title="Permanent link">&para;</a></h4>
<p>@SuneelOad Are your questions answered?</p>
<h4 id="sko341_commented_at_2017-05-10_1953"><img src="https://avatars.githubusercontent.com/u/28111434?v=4" width="50"><a href="https://github.com/sko341">sko341</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-300594074">2017-05-10 19:53</a>:<a class="headerlink" href="#sko341_commented_at_2017-05-10_1953" title="Permanent link">&para;</a></h4>
<p>@gdha nope, still trying to solve the issue :(</p>
<h4 id="icebal_commented_at_2017-05-11_0015"><img src="https://avatars.githubusercontent.com/u/946581?u=6c08f02ac67727afa178cbb7dc926c0b7e3d862d&v=4" width="50"><a href="https://github.com/icebal">icebal</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-300647267">2017-05-11 00:15</a>:<a class="headerlink" href="#icebal_commented_at_2017-05-11_0015" title="Permanent link">&para;</a></h4>
<p>@SuneelOad you can also try with installing xorriso and run rear
mkbackup -v and see if it is throwing the flag USING_EFI_BOOTLOADER=1.
if it is, it is creating a efi compatible disk. if it is not, you can
set it manually in the config.<br />
edit - this is for ISO, not PXE like you are trying, my bad....</p>
<h4 id="sko341_commented_at_2017-05-12_1642"><img src="https://avatars.githubusercontent.com/u/28111434?v=4" width="50"><a href="https://github.com/sko341">sko341</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-301126883">2017-05-12 16:42</a>:<a class="headerlink" href="#sko341_commented_at_2017-05-12_1642" title="Permanent link">&para;</a></h4>
<p>After running rear -v recover i am getting this error:<br />
<img alt="image" src="https://cloud.githubusercontent.com/assets/28111434/26007896/4f41540e-36f7-11e7-98c8-37bd77bbf6dd.png" /></p>
<p>Any help, Please!</p>
<h4 id="gozora_commented_at_2017-05-12_1706"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-301132444">2017-05-12 17:06</a>:<a class="headerlink" href="#gozora_commented_at_2017-05-12_1706" title="Permanent link">&para;</a></h4>
<p>Hello @SuneelOad,</p>
<p>2 things ...</p>
<ol>
<li>
<p>In my copy of ReaR (cloned from upstream) I have
    <em>220_install_elilo.sh</em> instead of yours
    <strong>620_install_elilo.sh</strong>, did you somehow modify your copy of ReaR
    ?</p>
</li>
<li>
<p>Do you have file called <em>/sbin/elilo</em> on your original system?</p>
</li>
</ol>
<p>V.</p>
<h4 id="sko341_commented_at_2017-05-12_1710"><img src="https://avatars.githubusercontent.com/u/28111434?v=4" width="50"><a href="https://github.com/sko341">sko341</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-301133260">2017-05-12 17:10</a>:<a class="headerlink" href="#sko341_commented_at_2017-05-12_1710" title="Permanent link">&para;</a></h4>
<p>Hi @gozora:</p>
<ol>
<li>I got rear from git: git clone
    <a href="https://github.com/rear/rear.git">https://github.com/rear/rear.git</a>,
    and i didn't modified anything other than local.conf file.</li>
<li>yes, I have /sbin/elilo in my original HP Proliant server running
    SLES 11.4</li>
</ol>
<p>Thanks</p>
<h4 id="sko341_commented_at_2017-05-12_2302"><img src="https://avatars.githubusercontent.com/u/28111434?v=4" width="50"><a href="https://github.com/sko341">sko341</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-301204583">2017-05-12 23:02</a>:<a class="headerlink" href="#sko341_commented_at_2017-05-12_2302" title="Permanent link">&para;</a></h4>
<p>Does REAR work with PXE ( HP proliant running sles 11.x) , anyone tried?</p>
<h4 id="sko341_commented_at_2017-05-13_0002"><img src="https://avatars.githubusercontent.com/u/28111434?v=4" width="50"><a href="https://github.com/sko341">sko341</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-301210866">2017-05-13 00:02</a>:<a class="headerlink" href="#sko341_commented_at_2017-05-13_0002" title="Permanent link">&para;</a></h4>
<p>tried to restore on same server but still getting same error while rear
recover, as above : "Error: could not find elilo executables". Pasting
local.conf again:</p>
<p>OUTPUT=PXE<br />
OUTPUT_PREFIX_PXE=$HOSTNAME<br />
BACKUP=NETFS<br />
BACKUP_URL=nfs://x.x.x.x/opt/rear<br />
PXE_TFTP_URL=nfs://x.x.x.x/tftpboot<br />
PXE_CONFIG_URL=nfs://x.x.x.x/tftpboot/pxelinux.cfg<br />
ISO_MKISOFS_BIN=/usr/bin/ebiso<br />
USE_DHCLIENT=y</p>
<p>Any help!</p>
<h4 id="gdha_commented_at_2017-05-13_0554"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-301227615">2017-05-13 05:54</a>:<a class="headerlink" href="#gdha_commented_at_2017-05-13_0554" title="Permanent link">&para;</a></h4>
<p>@SuneelOad I wouldn't know why PXE booting wouldn't work on HPE Proliant
systems. The rear config looks OK to me, and I guess that PXE booting
works? Or am I wrong?</p>
<p>Could you paste the output of <code>head /var/lib/rear/recovery/*</code> ?</p>
<p>You could run once <code>rear -dDv mkrescue</code> and verify the rear log to see
whether the <strong>elilo</strong> executable was copied to the rescue image, and to
double check you can do a <code>find /tmp/rear.xxxx -name elilo</code> (replace the
xxxx with what you see in the rear output at the end)</p>
<h4 id="razorfish-sl_commented_at_2017-05-13_2223"><img src="https://avatars.githubusercontent.com/u/4497476?v=4" width="50"><a href="https://github.com/razorfish-sl">razorfish-sl</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-301278489">2017-05-13 22:23</a>:<a class="headerlink" href="#razorfish-sl_commented_at_2017-05-13_2223" title="Permanent link">&para;</a></h4>
<p>you may need more information.<br />
WHICH proliant &amp; WHICH gen.<br />
I'm having issues with proliant now........ not even got as far as you.</p>
<h4 id="jsmeix_commented_at_2017-05-15_0921"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-301422198">2017-05-15 09:21</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-05-15_0921" title="Permanent link">&para;</a></h4>
<p>@gozora<br />
regarding things like<br />
220_install_elilo.sh versus 620_install_elilo.sh<br />
see
<a href="https://github.com/rear/rear/issues/1331">https://github.com/rear/rear/issues/1331</a><br />
and
<a href="https://github.com/rear/rear/pull/1323">https://github.com/rear/rear/pull/1323</a>
therein<br />
<a href="https://github.com/rear/rear/pull/1323#issuecomment-298067993">https://github.com/rear/rear/pull/1323#issuecomment-298067993</a><br />
and the matching commit<br />
<a href="https://github.com/rear/rear/pull/1323/commits/968a6bcea58e7687f9b56774b1bf06cbb8ca00b1">https://github.com/rear/rear/pull/1323/commits/968a6bcea58e7687f9b56774b1bf06cbb8ca00b1</a></p>
<h4 id="gozora_commented_at_2017-05-15_1027"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-301436949">2017-05-15 10:27</a>:<a class="headerlink" href="#gozora_commented_at_2017-05-15_1027" title="Permanent link">&para;</a></h4>
<p>@jsmeix, Yes stupid me did not read message after <code>git pull</code> so I
thought that I'm working with most recent version ...</p>
<pre><code>You asked to pull from the remote 'rear', but did not specify
a branch. Because this is not the default configured remote
for your current branch, you must specify a branch on the command line.
</code></pre>
<p>Thanks!</p>
<p>V.</p>
<h4 id="sko341_commented_at_2017-05-15_2313"><img src="https://avatars.githubusercontent.com/u/28111434?v=4" width="50"><a href="https://github.com/sko341">sko341</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-301630756">2017-05-15 23:13</a>:<a class="headerlink" href="#sko341_commented_at_2017-05-15_2313" title="Permanent link">&para;</a></h4>
<p>Thank you all for your help, I can now restore and server is working
fine after restore :) only change i made was to download rear packages
from
<a href="http://download.opensuse.org/repositories/Archiving:/Backup:/Rear/SLE_12_SP1/x86_64/">http://download.opensuse.org/repositories/Archiving:/Backup:/Rear/SLE_12_SP1/x86_64/</a>
, rather than using git clone.<br />
So far, I can backup/restore from Physical to Physical (HP Proliant
DL380 G9: P2P) and from Virtual to Virtual (V2V), but I still have
problems in P2V. In this case restore is finished successfully but when
reboots, it says no OS found, any help here is appreciated. Thanks</p>
<h4 id="jsmeix_commented_at_2017-05-16_0723"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-301698036">2017-05-16 07:23</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-05-16_0723" title="Permanent link">&para;</a></h4>
<p>@SuneelOad<br />
your above<br />
<a href="https://github.com/rear/rear/issues/1335#issuecomment-301630756">https://github.com/rear/rear/issues/1335#issuecomment-301630756</a><br />
looks somewhat scaring because it means that<br />
some older ReaR version works for you while<br />
the current ReaR GitHub master does no longer work for you<br />
i.e. it looks like a regression somewhere in the current ReaR.</p>
<p>Under<br />
<a href="http://download.opensuse.org/repositories/Archiving:/Backup:/Rear/SLE_12_SP1/x86_64/">http://download.opensuse.org/repositories/Archiving:/Backup:/Rear/SLE_12_SP1/x86_64/</a><br />
there is<br />
ebiso-0.2.5-1.x86_64.rpm<br />
plus several ReaR versions<br />
rear-1.17.2-1.x86_64.rpm<br />
rear-1.18-3.x86_64.rpm<br />
rear-1.19-2.x86_64.rpm<br />
rear-2.00-1.x86_64.rpm<br />
Which exact ReaR version does work for you?</p>
<p>Regarding P2P and V2V works while P2V does not work:<br />
I guess with P2P and V2V you run "rear recover"<br />
on the same physical or virtual hardware as<br />
what you used for "rear mkbackup".<br />
In contrast for P2V you do a system migration<br />
from some physical hardware where "rear mkbackup" was run<br />
to some (obviously different) virtual hardware where "rear recover"<br />
is run.<br />
In general system migration with ReaR is tricky, cf.<br />
<a href="https://github.com/rear/rear/issues/1155#issuecomment-271236931">https://github.com/rear/rear/issues/1155#issuecomment-271236931</a></p>
<h4 id="sko341_commented_at_2017-05-16_1605"><img src="https://avatars.githubusercontent.com/u/28111434?v=4" width="50"><a href="https://github.com/sko341">sko341</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-301831204">2017-05-16 16:05</a>:<a class="headerlink" href="#sko341_commented_at_2017-05-16_1605" title="Permanent link">&para;</a></h4>
<p>@jsmeix<br />
I installed ebiso-0.2.5-1.x86_64.rpm and rear-2.00-1.x86_64.rpm, which
worked for me. On physical server I reinstall OS from SLES 11.4 to SLES
12.2 and installed above rpm packages rather than git, and it worked
(P2P).<br />
On Virtual server (running SLES 11.4) , i didnt do any change other than
installing above rpm packages without git clone, and that worked too
(V2V).<br />
And thanks for P2V link, I'll give that a try.</p>
<p>Thanks</p>
<h4 id="gozora_commented_at_2017-05-16_1821"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-301870866">2017-05-16 18:21</a>:<a class="headerlink" href="#gozora_commented_at_2017-05-16_1821" title="Permanent link">&para;</a></h4>
<p>@jsmeix</p>
<blockquote>
<p>looks somewhat scaring because it means that<br />
some older ReaR version works for you while<br />
the current ReaR GitHub master does no longer work for you<br />
i.e. it looks like a regression somewhere in the current ReaR.</p>
</blockquote>
<p>I just successfully finished test recovery of my SLES11 SP3 with latest
upstream commit 8ce891f .<br />
So I don't think any regression was introduced.</p>
<p>Following configuration was used:</p>
<pre><code>BACKUP=NETFS     
OUTPUT=ISO
BACKUP_URL=nfs://beta/mnt/rear
OUTPUT_URL=nfs://beta/mnt/rear/iso

ONLY_INCLUDE_VG=( "vg00" )
EXCLUDE_BACKUP=( ${EXCLUDE_BACKUP[@]} fs:/crash fs:/usr/sap fs:/oracle )
BACKUP_PROG_EXCLUDE=( ${BACKUP_PROG_EXCLUDE[@]} '/mnt/*' )
ISO_MKISOFS_BIN=/usr/bin/ebiso

EXCLUDE_MD=( $(grep -o -E '^md[0-9]+' /proc/mdstat) ) # exclude all md devices

GRUB_RESCUE=n
COPY_AS_IS=( ${COPY_AS_IS[@]} /sbin/sysctl /etc/sysctl.conf /sbin/vconfig /sbin/if* /etc/sysconfig/network /sbin/shutdown.wrap )
</code></pre>
<p>@SuneelOad</p>
<blockquote>
<p>So far, I can backup/restore from Physical to Physical (HP Proliant
DL380 G9: P2P) and from Virtual to Virtual (V2V), but I still have
problems in P2V. In this case restore is finished successfully but
when reboots, it says no OS found, any help here is appreciated.</p>
</blockquote>
<p>During your P2V recovery, are your source and destination servers using
SAME boot method (UEFI/Legacy boot) ?</p>
<p>V.</p>
<h4 id="sko341_commented_at_2017-05-16_1953"><img src="https://avatars.githubusercontent.com/u/28111434?v=4" width="50"><a href="https://github.com/sko341">sko341</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-301896265">2017-05-16 19:53</a>:<a class="headerlink" href="#sko341_commented_at_2017-05-16_1953" title="Permanent link">&para;</a></h4>
<p>@gozora no both are different boot methods, i.e. physical uses UEFI and
VM is grub.</p>
<p>Thanks,</p>
<h4 id="gozora_commented_at_2017-05-16_2001"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-301898403">2017-05-16 20:01</a>:<a class="headerlink" href="#gozora_commented_at_2017-05-16_2001" title="Permanent link">&para;</a></h4>
<p>@SuneelOad</p>
<p>As far as I know, ReaR can't handle restores from UEFI to legacy boot
(grub) and vice versa.<br />
(@schlomo, @gdha, @jsmeix correct me if I'm wrong)</p>
<p>You'd need to do some manual "magic" to make such migration work ...</p>
<p>V.</p>
<h4 id="jsmeix_commented_at_2017-05-17_0913"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-302032824">2017-05-17 09:13</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-05-17_0913" title="Permanent link">&para;</a></h4>
<p>Changing the bootloader is another "migration" thing<br />
that cannot work automatically - as far as I can imagine -<br />
because re-installing the bootloader on the recreated system<br />
happens after backup restore (during the 'finalize' stage)<br />
by using the restored bootloader config files from the backup<br />
to that changing the bootloader on the recreated system<br />
requires changes of the bootloader config files and that<br />
does not happen by ReaR.</p>
<p>This means - as far as I can imagine - changing the bootloader<br />
on the recreated system must be done manually from within<br />
the still running ReaR recovery system after "rear recover"<br />
had finished.</p>
<p>I think this can be done basically in the same way<br />
as I do it in my script for<br />
"Generic system installation with the plain SUSE installation system"<br />
in
<a href="https://en.opensuse.org/SDB:Disaster_Recovery">https://en.opensuse.org/SDB:Disaster_Recovery</a></p>
<p>For example after adapting the restored bootloader config files<br />
the actual bootloader installation could be done via something<br />
like (replace "/dev/sdXn" as needed):</p>
<pre>
target_system_filesystem_root="/mnt/local"
bootloader_install_device="/dev/sdXn"

# Make /proc /sys /dev from the installation system
# or from the ReaR recovery system
# available in the target system:
for mountpoint_directory in proc sys dev
do mkdir $target_system_filesystem_root/$mountpoint_directory
done
mount -t proc none $target_system_filesystem_root/proc
mount -t sysfs sys $target_system_filesystem_root/sys
mount -o bind /dev $target_system_filesystem_root/dev

# Make initrd verbosely in the target system:
chroot $target_system_filesystem_root /bin/bash --login -c "/sbin/mkinitrd -v"

# Install bootloader in the target system:
# Make bootloader configuration in the target system:
chroot $target_system_filesystem_root /bin/bash --login -c "/usr/sbin/grub2-mkconfig -o /boot/grub2/grub.cfg"
# Install bootloader in the target system:
chroot $target_system_filesystem_root /usr/sbin/grub2-install --force $bootloader_install_device
</pre>

<p>That has worked for me on SLES12 on a simple virtual machine.<br />
On SLES11 things are probably a bit different and<br />
on HP ProLiant hardware things are perhaps even more different.</p>
<p>As far as I know the only part of a system migration where<br />
ReaR has some (limited) support is disk layout migration.<br />
In particular migrating from a single disk to a bigger single disk<br />
should usually work (except some exceptions ;-)</p>
<p>But I think one cannot expect that e.g. migrating from<br />
one single 600 GiB traditional spinning harddisk<br />
to two 400 GiB SSDs will "just work" automatically<br />
or the other way round migrating a LVM setup<br />
that uses several traditional spinning harddisks<br />
to a single big virtual disk on a virtual machine.</p>
<h4 id="jsmeix_commented_at_2017-05-17_1205"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-302069770">2017-05-17 12:05</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-05-17_1205" title="Permanent link">&para;</a></h4>
<p>I tested my above<br />
<a href="https://github.com/rear/rear/issues/1335#issuecomment-302032824">https://github.com/rear/rear/issues/1335#issuecomment-302032824</a><br />
and adapted it so that it now works for me one SLES12-SP2<br />
because I found out that I need some adaptions,<br />
mainly I need sometimes a bash login shell for 'chroot' i.e.</p>
<pre>
chroot $target_system_filesystem_root /bin/bash --login -c "..."
</pre>

<p>cf.
<a href="https://github.com/rear/rear/issues/862">https://github.com/rear/rear/issues/862</a><br />
and
<a href="https://github.com/rear/rear/pull/1171">https://github.com/rear/rear/pull/1171</a><br />
and the resulting problems and bad consequences<br />
<a href="https://github.com/rear/rear/issues/862#issuecomment-274068914">https://github.com/rear/rear/issues/862#issuecomment-274068914</a><br />
<a href="https://github.com/rear/rear/issues/862#issuecomment-282039428">https://github.com/rear/rear/issues/862#issuecomment-282039428</a><br />
<a href="https://github.com/rear/rear/pull/1345#issuecomment-299798204">https://github.com/rear/rear/pull/1345#issuecomment-299798204</a></p>
<p>Furthermore I tried to avoid that "rear recover" installs<br />
a bootloader at all but it seems that is not easily possible<br />
because setting in the recovery system in local.conf</p>
<pre>
NOBOOTLOADER=1
</pre>

<p>and also in the recovery system</p>
<pre>
# mv /var/lib/rear/recovery/bootloader /var/lib/rear/recovery/bootloader.orig
</pre>

<p>did not avoid that "rear recover" installs a bootloader<br />
GRUB2 in my case via finalize/Linux-i386/620_install_grub2.sh</p>
<h4 id="gdha_commented_at_2017-08-16_0921"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-322714721">2017-08-16 09:21</a>:<a class="headerlink" href="#gdha_commented_at_2017-08-16_0921" title="Permanent link">&para;</a></h4>
<p>@sko341 is your question answered sufficiently or do you still have
other concerns at this point in time?</p>
<h4 id="hardcore-fs_commented_at_2018-01-18_0922"><img src="https://avatars.githubusercontent.com/u/1309004?v=4" width="50"><a href="https://github.com/Hardcore-fs">Hardcore-fs</a> commented at <a href="https://github.com/rear/rear/issues/1335#issuecomment-358586539">2018-01-18 09:22</a>:<a class="headerlink" href="#hardcore-fs_commented_at_2018-01-18_0922" title="Permanent link">&para;</a></h4>
<p>lets close it for now</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2023 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2017-04-27.1335.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
