<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#1603 PR merged: Fix for XFS file system recreation code. - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#1603 PR merged: Fix for XFS file system recreation code.";
        var mkdocs_page_input_path = "issues/2017-11-28.1603.pr.merged.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#1603 PR merged: Fix for XFS file system recreation code.</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="1603_pr_merged_fix_for_xfs_file_system_recreation_code"><a href="https://github.com/rear/rear/pull/1603">#1603 PR</a> <code>merged</code>: Fix for XFS file system recreation code.<a class="headerlink" href="#1603_pr_merged_fix_for_xfs_file_system_recreation_code" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>bug</code>, <code>fixed / solved / done</code></p>
<h4 id="gozora_opened_issue_at_2017-11-28_1729"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> opened issue at <a href="https://github.com/rear/rear/pull/1603">2017-11-28 17:29</a>:<a class="headerlink" href="#gozora_opened_issue_at_2017-11-28_1729" title="Permanent link">&para;</a></h4>
<p>In xfsprogs &gt;= 4.7 log section sunit=0 is considered invalid.<br />
c.f.
<a href="https://github.com/rear/rear/issues/1579">https://github.com/rear/rear/issues/1579</a></p>
<h4 id="gozora_commented_at_2017-11-29_1127"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/pull/1603#issuecomment-347832457">2017-11-29 11:27</a>:<a class="headerlink" href="#gozora_commented_at_2017-11-29_1127" title="Permanent link">&para;</a></h4>
<p>Hello @jsmeix,</p>
<p><code>i=$((i+1))</code> and <code>(( i += 1 ))</code> are same a perfectly valid way how to
increment variable. Not sure about overhead on lower levels but outcome
is the same.</p>
<p>I don't remember why I'd choose one or the the other way, but until it
creates a problem, I just trust my past me for having a reason.</p>
<blockquote>
<p>I wonder if xfs_param_count is perhaps<br />
just ${#xfs_param_iname[@]} ?</p>
</blockquote>
<p>This is not part of the pull request, so feel free to update it how ever
you like. It is some time since I've implement this parsing nightmare.
In the near future I'll try to write patch for
<a href="https://github.com/rear/rear/issues/1604">https://github.com/rear/rear/issues/1604</a>
(until somebody else writes it) so I'll need to retest whole code.<br />
That could be place for updating comments (and maybe iterators) ;-).</p>
<p>V.</p>
<h4 id="jsmeix_commented_at_2017-11-29_1136"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1603#issuecomment-347834421">2017-11-29 11:36</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-11-29_1136" title="Permanent link">&para;</a></h4>
<p>@gozora<br />
I am sorry my "FYI" addedum caused confusion.<br />
It was of course not meant that anything in your<br />
currently working code should be changed now<br />
via this pull request shortly before the ReaR 2.3 release.<br />
Again sorry for my useless addedum at this time<br />
and many thanks for your fix!</p>
<h4 id="gozora_commented_at_2017-11-29_1147"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/pull/1603#issuecomment-347836902">2017-11-29 11:47</a>:<a class="headerlink" href="#gozora_commented_at_2017-11-29_1147" title="Permanent link">&para;</a></h4>
<p>@jsmeix no need for apologies!<br />
Your comments are not useless!<br />
This fix (neither XFS recreation code) is not perfect, and it will
require a bit more work to recreate XFS file systems correctly. But it
comes from XFS nature, I guess you had similar fun with btrfs ;-)</p>
<p>V.</p>
<h4 id="jsmeix_commented_at_2017-11-29_1200"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1603#issuecomment-347839823">2017-11-29 12:00</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-11-29_1200" title="Permanent link">&para;</a></h4>
<p>I fear I had and will have "much more fun" with btrfs<br />
because btrfs subvolumes basically behave like filesystems<br />
within a whole btrfs (because subvolumes can be mounted).<br />
This "just breaks" the traditional assumption that one mount point<br />
belongs to one filesystem which is still a basic assumption for<br />
the whole current disk layout code in ReaR.<br />
Therefore since btrfs the whole disk layout code in ReaR<br />
actually needs to be fundamentally overhauled.<br />
I try as good as I can to ignore that skeleton in the closet ;-)</p>
<h4 id="jsmeix_commented_at_2017-11-29_1331"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1603#issuecomment-347860869">2017-11-29 13:31</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-11-29_1331" title="Permanent link">&para;</a></h4>
<p>Only an addedum FYI regarding<br />
ReaR's disk layout code skeleton in the closet:<br />
Meanwhile I found what I had already written about it, see<br />
<a href="https://github.com/rear/rear/issues/497#issuecomment-66448475">https://github.com/rear/rear/issues/497#issuecomment-66448475</a><br />
and<br />
<a href="https://github.com/rear/rear/issues/497#issuecomment-71650367">https://github.com/rear/rear/issues/497#issuecomment-71650367</a><br />
and the subsequent comment<br />
<a href="https://github.com/rear/rear/issues/497#issuecomment-71652667">https://github.com/rear/rear/issues/497#issuecomment-71652667</a><br />
and finally my currenly latest reasoning<br />
<a href="https://github.com/rear/rear/pull/1091#issuecomment-263819775">https://github.com/rear/rear/pull/1091#issuecomment-263819775</a></p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2024 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2017-11-28.1603.pr.merged.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
