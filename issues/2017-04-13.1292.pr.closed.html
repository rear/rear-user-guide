<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#1292 PR closed: ESP flagging, name partitions in 300_format_usb_disk.sh - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#1292 PR closed: ESP flagging, name partitions in 300_format_usb_disk.sh";
        var mkdocs_page_input_path = "issues/2017-04-13.1292.pr.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_nas.html">Internal Backup with tar to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_rsync.html">Internal Backup with rsync to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/rsync.html">External Backup using BACKUP=RSYNC method</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/rbme.html">External Backup using RBME</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/restic.html">External Backup using restic</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/duplicity.html">External Backup using duplicity</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../development/squash-git-log-commments.html">How to squash git log comments into one line</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#1292 PR closed: ESP flagging, name partitions in 300_format_usb_disk.sh</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="1292_pr_closed_esp_flagging_name_partitions_in_300_format_usb_disksh"><a href="https://github.com/rear/rear/pull/1292">#1292 PR</a> <code>closed</code>: ESP flagging, name partitions in 300_format_usb_disk.sh<a class="headerlink" href="#1292_pr_closed_esp_flagging_name_partitions_in_300_format_usb_disksh" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>won't fix / can't fix / obsolete</code></p>
<h4 id="probackup-nl_opened_issue_at_2017-04-13_1912"><img src="https://avatars.githubusercontent.com/u/515451?u=4f985fa15d087babc5049c337be90b42b56c8b8b&v=4" width="50"><a href="https://github.com/ProBackup-nl">ProBackup-nl</a> opened issue at <a href="https://github.com/rear/rear/pull/1292">2017-04-13 19:12</a>:<a class="headerlink" href="#probackup-nl_opened_issue_at_2017-04-13_1912" title="Permanent link">&para;</a></h4>
<p>(1) Change EFI partition from primary to ESP,<br />
(2) name partitions,<br />
(3) Set boot_flag to "esp" for EFI systemd-boot<br />
(4) Make log message more explicit</p>
<h4 id="probackup-nl_commented_at_2017-04-14_2237"><img src="https://avatars.githubusercontent.com/u/515451?u=4f985fa15d087babc5049c337be90b42b56c8b8b&v=4" width="50"><a href="https://github.com/ProBackup-nl">ProBackup-nl</a> commented at <a href="https://github.com/rear/rear/pull/1292#issuecomment-294249653">2017-04-14 22:37</a>:<a class="headerlink" href="#probackup-nl_commented_at_2017-04-14_2237" title="Permanent link">&para;</a></h4>
<p>I find it quite handy when <code>parted /dev/sdb print</code> also prints a name
describing the purpose of the partition, like:</p>
<pre><code>Number  Start   End     Size    File system  Name      Flags
 1      4194kB  214MB   210MB   fat16        EFIBOOT   boot, esp
 2      214MB   15.6GB  15.4GB  ext4         REARDATA
</code></pre>
<h4 id="jsmeix_commented_at_2017-04-19_1229"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1292#issuecomment-295250803">2017-04-19 12:29</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-04-19_1229" title="Permanent link">&para;</a></h4>
<p>Regarding "modern" flags like 'esp' or 'legacy_boot':</p>
<p>Older 'parted' on older Linux distributions do not support them, cf.<br />
<a href="https://github.com/rear/rear/pull/1308#issuecomment-295246028">https://github.com/rear/rear/pull/1308#issuecomment-295246028</a></p>
<p>The current code errors out when parted fails to set a flag.<br />
I don't know how the various parted versions behave when<br />
they should set a flag that is not supported.<br />
I guess parted returns then a non-zero exit code so that<br />
"rear format" errors out.</p>
<p>Accordingly I think there could be code that retries<br />
those parted calls with a traditional flag as fallback<br />
something (untested proposal) like</p>
<pre>
 if ! parted -s $RAW_USB_DEVICE set 1 $boot_flag on >&2 ; then
    # try a traditional flag as fallback
    if ! parted -s $RAW_USB_DEVICE set 1 boot on >&2 ; then
        Error "Could not make first partition bootable on '$RAW_USB_DEVICE'"
    fi
fi
</pre>

<h4 id="probackup-nl_commented_at_2017-05-11_0728"><img src="https://avatars.githubusercontent.com/u/515451?u=4f985fa15d087babc5049c337be90b42b56c8b8b&v=4" width="50"><a href="https://github.com/ProBackup-nl">ProBackup-nl</a> commented at <a href="https://github.com/rear/rear/pull/1292#issuecomment-300706250">2017-05-11 07:28</a>:<a class="headerlink" href="#probackup-nl_commented_at_2017-05-11_0728" title="Permanent link">&para;</a></h4>
<p>@gdha ESP is in parted since release 3.2 (2014-07-28).</p>
<h4 id="gdha_commented_at_2017-05-20_1524"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/pull/1292#issuecomment-302879718">2017-05-20 15:24</a>:<a class="headerlink" href="#gdha_commented_at_2017-05-20_1524" title="Permanent link">&para;</a></h4>
<p>@ProBackup-nl RHEL 6.3 still has parted 2.1, and lots of RHEL 7.2 still
have version 3.1. I don't mind to have it on-board, but then at least it
may not break parted &lt; version 3.2.<br />
Will you re-work the pull request, or would like to drop it?</p>
<h4 id="probackup-nl_commented_at_2017-06-13_1306"><img src="https://avatars.githubusercontent.com/u/515451?u=4f985fa15d087babc5049c337be90b42b56c8b8b&v=4" width="50"><a href="https://github.com/ProBackup-nl">ProBackup-nl</a> commented at <a href="https://github.com/rear/rear/pull/1292#issuecomment-308109313">2017-06-13 13:06</a>:<a class="headerlink" href="#probackup-nl_commented_at_2017-06-13_1306" title="Permanent link">&para;</a></h4>
<p>@gdha Please drop this request. After I have seen how easily new
non-optional dependencies (like <code>bc</code>) are introduced in this project, I
have lost my appetite.</p>
<h4 id="schlomo_commented_at_2017-06-13_1311"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/pull/1292#issuecomment-308110667">2017-06-13 13:11</a>:<a class="headerlink" href="#schlomo_commented_at_2017-06-13_1311" title="Permanent link">&para;</a></h4>
<p>@ProBackup-nl I am sorry for your frustration. I think that this topic
is something that should be part of a future ReaR major release that
does away with all the pre-systemd compatibility requirements.</p>
<h4 id="probackup-nl_commented_at_2017-06-14_1503"><img src="https://avatars.githubusercontent.com/u/515451?u=4f985fa15d087babc5049c337be90b42b56c8b8b&v=4" width="50"><a href="https://github.com/ProBackup-nl">ProBackup-nl</a> commented at <a href="https://github.com/rear/rear/pull/1292#issuecomment-308460041">2017-06-14 15:03</a>:<a class="headerlink" href="#probackup-nl_commented_at_2017-06-14_1503" title="Permanent link">&para;</a></h4>
<p>@schlomo I think that it is not wise to introduce a new
(hard/non-optional) dependency for a calculation problem that exists in
one old version of a distribution.<br />
In my opinion the code should check whether a (calculation) issue
exists, and only in that case the code should require (<code>bc</code>) dependency
to handle the exception (incorrect large integer calculations by bash).</p>
<h4 id="schlomo_commented_at_2017-06-14_1514"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/pull/1292#issuecomment-308463574">2017-06-14 15:14</a>:<a class="headerlink" href="#schlomo_commented_at_2017-06-14_1514" title="Permanent link">&para;</a></h4>
<p>@ProBackup-nl good point and I agree. I actually take it to support my
thesis that we should cut our obligations to the past and start working
on a new ReaR version that is geared towards recent systems (recent
probably being somewhat relative). I have a strong feeling that this
will simplify a <strong>lot</strong> of things within ReaR.</p>
<h4 id="probackup-nl_commented_at_2017-06-15_0813"><img src="https://avatars.githubusercontent.com/u/515451?u=4f985fa15d087babc5049c337be90b42b56c8b8b&v=4" width="50"><a href="https://github.com/ProBackup-nl">ProBackup-nl</a> commented at <a href="https://github.com/rear/rear/pull/1292#issuecomment-308661448">2017-06-15 08:13</a>:<a class="headerlink" href="#probackup-nl_commented_at_2017-06-15_0813" title="Permanent link">&para;</a></h4>
<p>@schlomo By the way, I am not frustrated, more disappointed. Please do
post me a note as soon as the <code>bc</code> dependency is optional. I can even
see a need to support relatively older systems.</p>
<h4 id="schlomo_commented_at_2017-06-15_0832"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/pull/1292#issuecomment-308665918">2017-06-15 08:32</a>:<a class="headerlink" href="#schlomo_commented_at_2017-06-15_0832" title="Permanent link">&para;</a></h4>
<p>I'll try to remember. BTW, I recently read the <a href="https://wiki.archlinux.org/index.php/Frequently_asked_questions#Why_is_there_only_a_single_version_of_each_shared_library_in_the_official_repositories.3F">Archlinux
FAQ</a>
and liked this part:</p>
<blockquote>
<p>Several distributions, such as Debian, have different versions of
shared libraries packaged as different packages: libfoo1, libfoo2,
libfoo3 and so on. In this way it is possible to have applications
compiled against different versions of libfoo installed on the same
system.</p>
<p>In case of a distribution like Arch, only the latest stable versions
of packages are officially supported. By dropping support for outdated
software, package maintainers are able to spend more time ensuring
that the newest versions work as expected. As soon as a new version of
a shared library becomes available from upstream, it is added to the
repositories and affected packages are rebuilt to use the new version.</p>
</blockquote>
<p>It kind of makes me wish we could split ReaR into two parts: One that
supports only recent distros and another one for the old stuff. I know
that many if not most of our users rely on ReaR supporting their old
stuff, this is just me as a developer speaking.</p>
<h4 id="probackup-nl_commented_at_2017-06-15_0909"><img src="https://avatars.githubusercontent.com/u/515451?u=4f985fa15d087babc5049c337be90b42b56c8b8b&v=4" width="50"><a href="https://github.com/ProBackup-nl">ProBackup-nl</a> commented at <a href="https://github.com/rear/rear/pull/1292#issuecomment-308674800">2017-06-15 09:09</a>:<a class="headerlink" href="#probackup-nl_commented_at_2017-06-15_0909" title="Permanent link">&para;</a></h4>
<p>@schlomo The newest versions of packages is one of the main reasons to
use Arch Linux in the first place. Once too many I stumbled upon ancient
packages in the major distributions, where I needed a newer version to
get things done. And there wasn't a quick solution to install that newer
package version.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2026 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2017-04-13.1292.pr.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
