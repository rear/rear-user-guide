<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#1028 Issue closed: Recover failed - file not found - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#1028 Issue closed: Recover failed - file not found";
        var mkdocs_page_input_path = "issues/2016-10-06.1028.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#1028 Issue closed: Recover failed - file not found</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="1028_issue_closed_recover_failed_-_file_not_found"><a href="https://github.com/rear/rear/issues/1028">#1028 Issue</a> <code>closed</code>: Recover failed - file not found<a class="headerlink" href="#1028_issue_closed_recover_failed_-_file_not_found" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>support / question</code>, <code>fixed / solved / done</code></p>
<h4 id="deepesh-agarwal_opened_issue_at_2016-10-06_0623"><img src="https://avatars.githubusercontent.com/u/3198004?v=4" width="50"><a href="https://github.com/deepesh-agarwal">deepesh-agarwal</a> opened issue at <a href="https://github.com/rear/rear/issues/1028">2016-10-06 06:23</a>:<a class="headerlink" href="#deepesh-agarwal_opened_issue_at_2016-10-06_0623" title="Permanent link">&para;</a></h4>
<ul>
<li>rear version (/usr/sbin/rear -V): 1.18-git20160031211 / 2016-10-03</li>
<li>OS version (cat /etc/rear/os.conf or lsb_release -a): No OS on SAS
    RAID-0, booted via REAR USB rescue media</li>
<li>rear configuration files (cat /etc/rear/site.conf or cat
    /etc/rear/local.conf):</li>
</ul>
<!-- -->

<pre><code>### write the rescue initramfs to USB and update the USB bootloader
OUTPUT=USB

### create a backup using the internal NETFS method, using 'tar'
BACKUP=NETFS

### write both rescue image and backup to the device labeled REAR-000
BACKUP_URL=usb:///dev/disk/by-label/REAR-000
</code></pre>
<ul>
<li>Brief description of the issue</li>
</ul>
<p>Made a backup and tried restoring after drive change and I get this :-0
, any ideas what just happened :-(</p>
<p><img alt="sshot-6" src="https://cloud.githubusercontent.com/assets/3198004/19142466/3a9a5312-8bbb-11e6-94dc-f31f341d1453.png" /></p>
<p><img alt="sshot-6" src="https://cloud.githubusercontent.com/assets/3198004/19143996/c2fda912-8bc4-11e6-92ef-b9537c5af7e0.png" /></p>
<h4 id="jsmeix_commented_at_2016-10-06_1222"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1028#issuecomment-251945819">2016-10-06 12:22</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-10-06_1222" title="Permanent link">&para;</a></h4>
<p>I never used rear that way (from USB rescue media)<br />
but from what I see on your screenshots it seems<br />
you try to boot a "backup" and not a "rescue image".</p>
<p>Regarding "OS version (cat /etc/rear/os.conf or lsb_release -a)":<br />
We like to know on what Linux system and version<br />
you did run "rear mkbackup".</p>
<p>From my current point of view it looks as if you need<br />
first and foremost a better generic understanding<br />
how rear works.</p>
<p>Or do I perhaps somehow completely misunderstand<br />
what your issue is about?</p>
<h4 id="jsmeix_commented_at_2016-10-06_1303"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1028#issuecomment-251954846">2016-10-06 13:03</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-10-06_1303" title="Permanent link">&para;</a></h4>
<p>Meanwhile I think I am wrong.</p>
<p>The naming "backup" versus "rescue image" confused me.</p>
<p>In output/USB/Linux-i386/30_create_extlinux.sh<br />
I found (excerpts):</p>
<pre>
case "$WORKFLOW" in
    (mkbackup) usb_label_workflow="backup";;
    (mkrescue) usb_label_workflow="rescue image";;
...
syslinux_write <<EOF 4>"$USB_REAR_DIR/syslinux.cfg"
label $HOSTNAME-$time
    menu label ${time:0:4}-${time:4:2}-${time:6:2} ${time:9:2}:${time:11:2} $usb_label_workflow
</pre>

<p>Accordingly the "backup" named thingy should boot a<br />
rear recovery system that resulted from "rear mkbackup".</p>
<p>@deepesh-agarwal<br />
can you inspect what files there actually are<br />
on your USB rescue media?</p>
<h4 id="jsmeix_commented_at_2016-10-06_1336"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1028#issuecomment-251963289">2016-10-06 13:36</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-10-06_1336" title="Permanent link">&para;</a></h4>
<p>Did my first try with kind of "USB rescue medium"<br />
and for me it sems to "just work".</p>
<p>I am using a QEMU KVM virtual machine for my testing<br />
with a second virtual harddisk /dev/sdb.</p>
<p>For preparation of /dev/sdb as rear rescue medium I did</p>
<pre>
# rear format /dev/sdb
USB device /dev/sdb must be formatted with ext2/3/4 or btrfs file system
Please type Yes to format /dev/sdb in ext3 format: Yes
# parted -s /dev/sdb unit GiB print
Model: ATA QEMU HARDDISK (scsi)
Disk /dev/sdb: 1.00GiB
Sector size (logical/physical): 512B/512B
Partition Table: msdos
Disk Flags: 
Number  Start    End      Size     Type     File system  Flags
 1      0.00GiB  1.00GiB  1.00GiB  primary  ext3         boot, type=83
</pre>

<p>I have in etc/rear/local.conf</p>
<pre>
OUTPUT=USB
USB_DEVICE=/dev/disk/by-label/REAR-000
BACKUP=NETFS
BACKUP_URL=usb:///dev/disk/by-label/REAR-000
</pre>

<p>Then I did only "rear mkrescue" because my 1GiB /dev/sdb<br />
is too small to store also the backup.tar.gz:</p>
<pre>
# rear -d -D mkrescue
Relax-and-Recover 1.18 / Git
Using log file: /root/rear/var/log/rear/rear-g136.log
Creating disk layout
Creating root filesystem layout
Copying files and directories
Copying binaries and libraries
Copying kernel modules
Creating initramfs
Writing MBR to /dev/sdb
Copying resulting files to usb location
You should also rm -Rf /tmp/rear.HYOgHYJbzr6leKR
</pre>

<p>Then I booted that virtual testing machine from /dev/sdb<br />
and got the usual rear boot menue where I can select<br />
an entry to boot the rear recovery system which boots<br />
as usual for me.</p>
<p>What files there are on my /dev/sdb:</p>
<pre>
# mount /dev/sdb1 /mnt
# find /mnt -ls
     2    4 drwxr-xr-x   6 root     root         4096 Oct  6 15:18 /mnt
 40961    4 drwx------   3 root     root         4096 Oct  6 15:18 /mnt/boot
 40962    4 drwx------   2 root     root         4096 Oct  6 15:18 /mnt/boot/syslinux
 40980  280 -rw-------   1 root     root       280644 Oct  6 15:18 /mnt/boot/syslinux/hdt.c32
 40977    4 -rw-------   1 root     root          985 Oct  6 15:18 /mnt/boot/syslinux/rear.help
 40976  156 -rw-------   1 root     root       153104 Oct  6 15:18 /mnt/boot/syslinux/vesamenu.c32
 40983    4 -rw-------   1 root     root          239 Oct  6 15:18 /mnt/boot/syslinux/poweroff.com
 40972   12 -rw-------   1 root     root         9132 Oct  6 15:18 /mnt/boot/syslinux/ls.c32
 40965    8 -rw-------   1 root     root         5696 Oct  6 15:18 /mnt/boot/syslinux/cat.c32
 40981  992 -rw-------   1 root     root      1011048 Oct  6 15:18 /mnt/boot/syslinux/pci.ids
 40964    4 -rw-------   1 root     root         1638 Oct  6 15:18 /mnt/boot/syslinux/extlinux.conf
 40978   60 -rw-------   1 root     root        55140 Oct  6 15:18 /mnt/boot/syslinux/menu.c32
 40975   40 -rw-------   1 root     root        40464 Oct  6 15:18 /mnt/boot/syslinux/sysdump.c32
 40967    4 -rw-------   1 root     root          800 Oct  6 15:18 /mnt/boot/syslinux/cmd.c32
 40973  244 -rw-------   1 root     root       244124 Oct  6 15:18 /mnt/boot/syslinux/lua.c32
 40970    8 -rw-------   1 root     root         4236 Oct  6 15:18 /mnt/boot/syslinux/host.c32
 40968    8 -rw-------   1 root     root         5388 Oct  6 15:18 /mnt/boot/syslinux/cpuid.c32
 40971    8 -rw-------   1 root     root         5084 Oct  6 15:18 /mnt/boot/syslinux/kbdmap.c32
 40969    8 -rw-------   1 root     root         5132 Oct  6 15:18 /mnt/boot/syslinux/disk.c32
 40966    8 -rw-------   1 root     root         4620 Oct  6 15:18 /mnt/boot/syslinux/config.c32
 40984   32 -r--------   1 root     root        32768 Oct  6 15:18 /mnt/boot/syslinux/ldlinux.sys
 40982    4 -rw-------   1 root     root          800 Oct  6 15:18 /mnt/boot/syslinux/reboot.c32
 40974   24 -rw-------   1 root     root        21000 Oct  6 15:18 /mnt/boot/syslinux/rosh.c32
 40979   20 -rw-------   1 root     root        20192 Oct  6 15:18 /mnt/boot/syslinux/chain.c32
 40963    4 -rw-------   1 root     root          262 Oct  6 15:18 /mnt/boot/syslinux/message
  8193    4 drwxr-x---   2 root     root         4096 Oct  6 15:18 /mnt/g136
  8194    0 -rw-------   1 root     root            0 Oct  6 15:18 /mnt/g136/.lockfile
  8195    4 -rw-------   1 root     root          262 Oct  6 15:18 /mnt/g136/VERSION
  8197 8788 -rw-------   1 root     root      8979944 Oct  6 15:18 /mnt/g136/rear.log
  8196    4 -rw-------   1 root     root           62 Oct  6 15:18 /mnt/g136/README
    11   16 drwx------   2 root     root        16384 Oct  6 15:11 /mnt/lost+found
 32769    4 drwx------   3 root     root         4096 Oct  6 15:18 /mnt/rear
 32773    4 -rw-------   1 root     root          492 Oct  6 15:18 /mnt/rear/syslinux.cfg
 32770    4 drwx------   3 root     root         4096 Oct  6 15:18 /mnt/rear/g136
 32771    4 drwx------   2 root     root         4096 Oct  6 15:18 /mnt/rear/g136/20161006.1518
 32772    4 -rw-------   1 root     root          985 Oct  6 15:18 /mnt/rear/g136/20161006.1518/syslinux.cfg
 32776 8768 -rw-------   1 root     root      8960926 Oct  6 15:18 /mnt/rear/g136/20161006.1518/rear.log
 32774 5620 -rw-r--r--   1 root     root      5741648 Aug 27 02:14 /mnt/rear/g136/20161006.1518/kernel
 32775 146324 -rw-r--r--   1 root     root     149681392 Oct  6 15:18 /mnt/rear/g136/20161006.1518/initrd.cgz
</pre>

<p>where in particular the syslinux.cfg contains in my case</p>
<pre>
# cat /mnt/rear/syslinux.cfg
label rear
    say Relax-and-Recover - Recover g136 from 20161006.1518
    menu hide
    kernel g136-20161006.1518
label -
    menu label Recovery images
    menu disable
menu begin g136
    menu label g136
    text help
Recover backup of g136 to this system.
    endtext
    include /rear/g136/20161006.1518/syslinux.cfg
    menu separator
    label -
        menu label ^Back
        menu default
        text help
Return to the main menu
        endtext
        menu exit
menu end
</pre>

<p>and rear/g136/20161006.1518/syslinux.cfg contains</p>
<pre>
# cat /mnt/rear/g136/20161006.1518/syslinux.cfg
label g136-20161006.1518
    menu label 2016-10-06 15:18 rescue image
    say g136-20161006.1518 - Recover g136 rescue image (20161006.1518)
    text help
Relax-and-Recover v1.18 - rescue image using kernel 4.4.19-60-default 
BACKUP=NETFS OUTPUT=USB BACKUP_URL=usb:///dev/disk/by-label/REAR-000
    endtext
    kernel /rear/g136/20161006.1518/kernel
    append initrd=/rear/g136/20161006.1518/initrd.cgz root=/dev/ram0 vga=normal rw selinux=0 console=ttyS0,9600 console=tty0
label g136-20161006.1518
    menu label 2016-10-06 15:18 rescue image - AUTOMATIC RECOVER
    say g136-20161006.1518 - Recover g136 rescue image (20161006.1518)
    text help
Relax-and-Recover v1.18 - rescue image using kernel 4.4.19-60-default 
BACKUP=NETFS OUTPUT=USB BACKUP_URL=usb:///dev/disk/by-label/REAR-000
    endtext
    kernel /rear/g136/20161006.1518/kernel
    append initrd=/rear/g136/20161006.1518/initrd.cgz root=/dev/ram0 vga=normal rw selinux=0 console=ttyS0,9600 console=tty0 auto_recover
</pre>

<h4 id="deepesh-agarwal_commented_at_2016-10-06_1336"><img src="https://avatars.githubusercontent.com/u/3198004?v=4" width="50"><a href="https://github.com/deepesh-agarwal">deepesh-agarwal</a> commented at <a href="https://github.com/rear/rear/issues/1028#issuecomment-251963318">2016-10-06 13:36</a>:<a class="headerlink" href="#deepesh-agarwal_commented_at_2016-10-06_1336" title="Permanent link">&para;</a></h4>
<p>I followed the exact procedure shown here -
<a href="http://relax-and-recover.org/documentation/getting-started">http://relax-and-recover.org/documentation/getting-started</a>
on a <code>Debian 8.6</code> installation to create the <code>rescue media</code> and then
created the <code>backup</code> on a 2TB USB disk. I got the drives changed and now
unable to restore :(</p>
<h4 id="jsmeix_commented_at_2016-10-06_1350"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1028#issuecomment-251966814">2016-10-06 13:50</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-10-06_1350" title="Permanent link">&para;</a></h4>
<p>@deepesh-agarwal</p>
<p>many thanks for your information.<br />
Now I better understand what you did.</p>
<p>As far as I understand your screenshots,<br />
your current problem is that your USB rescue medium<br />
does not boot the rear recovery system on it.</p>
<p>As far as I understand your screenshots, it seems<br />
you have several rear recovery systems and<br />
probably also several backup-tar.gz files on<br />
your USB rescue medium.</p>
<p>I think at the syslinux/extlinux boot prompt "boot:"<br />
it should work to enter the label or file name<br />
of what syslinux/extlinux should load and launch<br />
(but I am really not at all a syslinux/extlinux expert).</p>
<p>When it finally fails to boot a rear recovery system<br />
from your USB rescue medium you can perhaps<br />
(on another computer - provided you have one)<br />
check whether or not there is at least one or more<br />
backup-tar.gz files on your USB rescue medium<br />
so that you still have at least a backup of your files.</p>
<p>In gereral note that there is<br />
"No disaster recovery without testing and continuous validation"<br />
see
<a href="https://en.opensuse.org/SDB:Disaster_Recovery">https://en.opensuse.org/SDB:Disaster_Recovery</a><br />
excerpts:</p>
<pre>
You must test in advance that it works in your particular case
to recreate your particular system with your particular recovery
medium and that the recreated system can boot on its own and
that the recreated system with all its system services still work
as you need it in your particular case.
You must have replacement hardware available on which your
system can be recreated and you must try out if it works to
recreate your system with your recovery medium on your
replacement hardware.
You must continuously validate that the recovery still works
on the replacement hardware in particular after each change
of the basic system. 
</pre>

<p>Bottom line:<br />
There is no such thing as a disaster recovery solution<br />
that "just works", see also<br />
<a href="https://en.opensuse.org/SDB:Disaster_Recovery">https://en.opensuse.org/SDB:Disaster_Recovery</a></p>
<h4 id="deepesh-agarwal_commented_at_2016-10-06_1410"><img src="https://avatars.githubusercontent.com/u/3198004?v=4" width="50"><a href="https://github.com/deepesh-agarwal">deepesh-agarwal</a> commented at <a href="https://github.com/rear/rear/issues/1028#issuecomment-251972991">2016-10-06 14:10</a>:<a class="headerlink" href="#deepesh-agarwal_commented_at_2016-10-06_1410" title="Permanent link">&para;</a></h4>
<p>Will try your suggestion, but why it made multiple systems in the first
place? I did the process only once!!!</p>
<p>This is the rescue media creation logfile:</p>
<p><a href="http://pastebin.com/qgGvj3tt">http://pastebin.com/qgGvj3tt</a></p>
<h4 id="jsmeix_commented_at_2016-10-07_1354"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1028#issuecomment-252258345">2016-10-07 13:54</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-10-07_1354" title="Permanent link">&para;</a></h4>
<p>I did a second test like in<br />
<a href="https://github.com/rear/rear/issues/1028#issuecomment-251963289">https://github.com/rear/rear/issues/1028#issuecomment-251963289</a><br />
but now with a 10GiB virtual harddisk /dev/sdb.</p>
<p>Preparing /dev/sdb for rear:</p>
<pre>
# usr/sbin/rear format /dev/sdb
USB device /dev/sdb must be formatted with ext2/3/4 or btrfs file system
Please type Yes to format /dev/sdb in ext3 format: Yes
# parted -s /dev/sdb unit GiB print
Model: ATA QEMU HARDDISK (scsi)
Disk /dev/sdb: 10.0GiB
Sector size (logical/physical): 512B/512B
Partition Table: msdos
Disk Flags: 
Number  Start    End      Size     Type     File system  Flags
 1      0.00GiB  10.0GiB  10.0GiB  primary  ext3         boot, type=83
</pre>

<p>Running "rear mkbackup":</p>
<pre>
# usr/sbin/rear -d -D mkbackup
Relax-and-Recover 1.18 / Git
Using log file: /root/rear/var/log/rear/rear-g136.log
Creating disk layout
Creating root filesystem layout
Copying files and directories
Copying binaries and libraries
Copying kernel modules
Creating initramfs
Writing MBR to /dev/sdb
Copying resulting files to usb location
Encrypting disabled
Creating tar archive '/tmp/rear.bY5ExGhCCGXg79V/outputfs/rear/g136/20161007.1519/backup.tar.gz'
Archived 1020 MiB [avg 9008 KiB/sec]OK
Archived 1020 MiB in 117 seconds [avg 8931 KiB/sec]
</pre>

<p>Booting from that virtual harddisk results<br />
usual rear boot screen where I can select<br />
to boot the rear recovery system (labeled "backup")<br />
on that virtual harddisk.</p>
<p>The rear recovery system boots as usual and I can<br />
log in there as root (no password) and run the recovery<br />
(excerpts):</p>
<pre>
RESCUE g136:~ # rear -d -D recover
Relax-and-Recover 1.18 / Git
Using log file: /var/log/rear/rear-g136.log
NOTICE: Will do driver migration
Select a backup archive.
++ select choice in '"${backup_times[@]}"' '"Abort"'
1) 20161007.1519
2) Abort
#? 1
...
Calculating backup archive size
Backup archive size is 1.1G     /tmp/rear.Z2zC18yvDlp2CUG/outputfs/rear/g136/20161007.1519/backup.tar.gz (compressed)
Comparing disks.
Disk configuration is identical, proceeding with restore.
...
Creating swap on /dev/sda1
Disk layout created.
Decrypting disabled
Restoring from '/tmp/rear.Z2zC18yvDlp2CUG/outputfs/rear/g136/20161007.1519/backup.tar.gz'
Restored 2352 MiB [avg 92642 KiB/sec]OK
Restored 2352 MiB in 27 seconds [avg 89211 KiB/sec]
...
Installing GRUB2 boot loader
...
Finished recovering your system. You can explore it under '/mnt/local'.
</pre>

<p>I rebooted the rear recovery system and booted the system<br />
from /dev/sda (where the receated system is) and everything<br />
works well for me.</p>
<p>Then I did "rear mkbackup" a second time:</p>
<pre>
# usr/sbin/rear -d -D mkbackup
Relax-and-Recover 1.18 / Git
Using log file: /root/rear/var/log/rear/rear-g136.log
Creating disk layout
Creating root filesystem layout
Copying files and directories
Copying binaries and libraries
Copying kernel modules
Creating initramfs
Writing MBR to /dev/sdb
Copying resulting files to usb location
Encrypting disabled
Creating tar archive '/tmp/rear.GpgywlrJeFzqlId/outputfs/rear/g136/20161007.1543/backup.tar.gz'
Archived 1027 MiB [avg 8994 KiB/sec]OK
Archived 1027 MiB in 118 seconds [avg 8917 KiB/sec]
</pre>

<p>I booted again from that /dev/sdb<br />
got again the rear boot menue<br />
where I selected first my system (via its host name)<br />
and then I can now select two recovery systems<br />
both labeled "backup" but with different time stamps.<br />
I selected the last one which again boots as usual.</p>
<p>I can log in there as root and run the recovery<br />
ans now (as expected) I can select between<br />
two backups with different time stamps<br />
where I also selected the last one:<br />
(excerpts):</p>
<pre>
# rear -d -D recover
Relax-and-Recover 1.18 / Git
Using log file: /var/log/rear/rear-g136.log
NOTICE: Will do driver migration
Select a backup archive.
++ select choice in '"${backup_times[@]}"' '"Abort"'
1) 20161007.1519
2) 20161007.1543
3) Abort
#? 2
...
Calculating backup archive size
Backup archive size is 1.1G     /tmp/rear.sM5cxBPdnSaO03C/outputfs/rear/g136/20161007.1543/backup.tar.gz (compressed)
Comparing disks.
Disk configuration is identical, proceeding with restore.
...
Restoring from '/tmp/rear.sM5cxBPdnSaO03C/outputfs/rear/g136/20161007.1543/backup.tar.gz'
Restored 2528 MiB [avg 95905 KiB/sec]OK
Restored 2528 MiB in 28 seconds [avg 92480 KiB/sec]
...
Finished recovering your system. You can explore it under '/mnt/local'.
</pre>

<p>Summary:<br />
For me using rear with a kind of "USB rescue medium"<br />
(another disk drive in my case) "just works" even for<br />
more than one backup on the rescue medium.</p>
<p>@deepesh-agarwal<br />
I have no idea what went wrong in your particulat case<br />
why you don't get the usual working rear boot menue.</p>
<h4 id="deepesh-agarwal_commented_at_2016-10-07_1612"><img src="https://avatars.githubusercontent.com/u/3198004?v=4" width="50"><a href="https://github.com/deepesh-agarwal">deepesh-agarwal</a> commented at <a href="https://github.com/rear/rear/issues/1028#issuecomment-252294563">2016-10-07 16:12</a>:<a class="headerlink" href="#deepesh-agarwal_commented_at_2016-10-07_1612" title="Permanent link">&para;</a></h4>
<p>It's my bad day, while I asked my host to reinstall the OS and leave the
attached USB untouched - they wiped the USB clean. Thankfully, the
server had only 15 days of work which I had a 3 day old source-code
backup.</p>
<p>Will definitely use and learn more about REAR now to backup as ISO on a
different server.</p>
<p>Lesson learned.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2024 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2016-10-06.1028.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
