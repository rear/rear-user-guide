<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#3480 Issue open: Do we actually need dbus in the rescue environment? - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#3480 Issue open: Do we actually need dbus in the rescue environment?";
        var mkdocs_page_input_path = "issues/2025-06-16.3480.issue.open.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../development/squash-git-log-commments.html">How to squash git log comments into one line</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#3480 Issue open: Do we actually need dbus in the rescue environment?</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="3480_issue_open_do_we_actually_need_dbus_in_the_rescue_environment"><a href="https://github.com/rear/rear/issues/3480">#3480 Issue</a> <code>open</code>: Do we actually need <code>dbus</code> in the rescue environment?<a class="headerlink" href="#3480_issue_open_do_we_actually_need_dbus_in_the_rescue_environment" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code></p>
<h4 id="lzaoral_opened_issue_at_2025-06-16_1318"><img src="https://avatars.githubusercontent.com/u/48823770?v=4" width="50"><a href="https://github.com/lzaoral">lzaoral</a> opened issue at <a href="https://github.com/rear/rear/issues/3480">2025-06-16 13:18</a>:<a class="headerlink" href="#lzaoral_opened_issue_at_2025-06-16_1318" title="Permanent link">&para;</a></h4>
<h3 id="is_your_feature_request_related_to_a_problem_please_describe">Is your feature request related to a problem? Please describe.<a class="headerlink" href="#is_your_feature_request_related_to_a_problem_please_describe" title="Permanent link">&para;</a></h3>
<p>Currently, ReaR only supports the reference implementation of <code>dbus</code>
since commit
<a href="https://github.com/rear/rear/commit/d82a9553cda33ad89053a00e801d157e0de080d9">https://github.com/rear/rear/commit/d82a9553cda33ad89053a00e801d157e0de080d9</a>.
Note that the commit message does not mention "why" is was actually
added because the "Fedora dbus service required for better debugging
systemd" rationale makes no sense to me.</p>
<p>Fedora 29+, RHEL 9+ and possibly other distributions have switched to
<code>dbus-broker</code> instead (a more-performant replacement for the reference
implementation) which ReaR does not support.</p>
<p>So far, I have not seen any issues with the restore on such systems,
with the exception of the following harmless (but rather annoying!) log
messages during the installation of GRUB2 on x64 BIOS and ppc64le
PowerVM machines:</p>
<pre><code>Installing GRUB2 boot loader...
         Starting dbus.service - D-Bus System Message Bus...
[FAILED] Failed to start dbus.service - D-Bus System Message Bus.
See 'systemctl status dbus.service' for details.
         Starting dbus.service - D-Bus System Message Bus...
[FAILED] Failed to start dbus.service - D-Bus System Message Bus.
See 'systemctl status dbus.service' for details.
         Starting dbus.service - D-Bus System Message Bus...
[FAILED] Failed to start dbus.service - D-Bus System Message Bus.
See 'systemctl status dbus.service' for details.
         Starting dbus.service - D-Bus System Message Bus...
[FAILED] Failed to start dbus.service - D-Bus System Message Bus.
See 'systemctl status dbus.service' for details.
         Starting dbus.service - D-Bus System Message Bus...
[FAILED] Failed to start dbus.service - D-Bus System Message Bus.
See 'systemctl status dbus.service' for details.
[FAILED] Failed to start dbus.service - D-Bus System Message Bus.
See 'systemctl status dbus.service' for details.

# systemctl status dbus.service
× dbus.service - D-Bus System Message Bus
     Loaded: loaded (/usr/lib/systemd/system/dbus.service; static)
     Active: failed (Result: exit-code) since Wed 2024-04-03 14:02:23 EDT; 1min&gt;TriggeredBy: × dbus.socket
    Process: 10983 ExecStartPre=/bin/dbus-uuidgen --ensure (code=exited, status&gt;        CPU: 6ms
</code></pre>
<h3 id="describe_the_solution_youd_like">Describe the solution you'd like<a class="headerlink" href="#describe_the_solution_youd_like" title="Permanent link">&para;</a></h3>
<p>I'd like to discuss whether we actually need <code>dbus</code> support in the ReaR
rescue environment. If not, I suggest to just remove everything
<code>dbus</code>-related from the repository. Otherwise, the support for
<code>dbus-broker</code> should be implemented.</p>
<h4 id="jsmeix_commented_at_2025-06-16_1419"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/3480#issuecomment-2976849026">2025-06-16 14:19</a>:<a class="headerlink" href="#jsmeix_commented_at_2025-06-16_1419" title="Permanent link">&para;</a></h4>
<p>@lzaoral<br />
a totally offhanded and untested question:<br />
<code>Installing GRUB2 boot loader...</code> happens in<br />
usr/share/rear/finalize/Linux-i386/660_install_grub2.sh<br />
where 'grub[2]-install' is run within <code>chroot $TARGET_FS_ROOT</code><br />
so I am wondering if <code>Starting dbus.service</code> and the<br />
subsequent <code>Failed to start dbus.service</code> happens<br />
within the ReaR recovery system or<br />
within the restored target system?</p>
<h4 id="lzaoral_commented_at_2025-06-16_1444"><img src="https://avatars.githubusercontent.com/u/48823770?v=4" width="50"><a href="https://github.com/lzaoral">lzaoral</a> commented at <a href="https://github.com/rear/rear/issues/3480#issuecomment-2976944488">2025-06-16 14:44</a>:<a class="headerlink" href="#lzaoral_commented_at_2025-06-16_1444" title="Permanent link">&para;</a></h4>
<blockquote>
<p>I am wondering if <code>Starting dbus.service</code> and the subsequent
<code>Failed to start dbus.service</code> happens within the ReaR recovery system
or within the restored target system?</p>
</blockquote>
<p>@jsmeix Both, to be honest. <code>grub2-install</code> is executed in the restored
system using <code>chroot</code>. GRUB2 installer executes <code>os-prober</code> at some
point, which executes some other commands which subsequently trigger the
<code>dbus.socket</code> because <code>/run</code> is bind-mounted in that <code>chroot</code>.
Therefore, <code>systemd</code> in the recovery system will try to start the
<code>dbus.service</code> (which then fails on Fedora because <code>dbus-broker</code> is an
incompatible implementation).</p>
<p>I have experimented a bit with <code>dbus-monitor</code> and <code>os-prober</code> on a
regular Fedora 42 machine and it seems that the triggering messages are
just harmless signals from systemd about added/removed and (un)mounted
block devices. Mounting of various block devices is in implementation
detail of <code>os-prober</code>.</p>
<p>(@pcahyna, please, correct me if I'm wrong.)</p>
<h4 id="jsmeix_commented_at_2025-06-16_1458"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/3480#issuecomment-2976996774">2025-06-16 14:58</a>:<a class="headerlink" href="#jsmeix_commented_at_2025-06-16_1458" title="Permanent link">&para;</a></h4>
<p>@lzaoral<br />
thank you for your explanation.<br />
Now I understand that "it is complicated".</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2025 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2025-06-16.3480.issue.open.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
