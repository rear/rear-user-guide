<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#3162 Issue closed: RFC: Why does "rear recover" regenerate the original's system initrd in any case? - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#3162 Issue closed: RFC: Why does \"rear recover\" regenerate the original\u0027s system initrd in any case?";
        var mkdocs_page_input_path = "issues/2024-02-22.3162.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_nas.html">Internal Backup with tar to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_rsync.html">Internal Backup with rsync to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/rsync.html">External Backup using BACKUP=RSYNC method</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/rbme.html">External Backup using RBME</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/restic.html">External Backup using restic</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/duplicity.html">External Backup using duplicity</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../development/squash-git-log-commments.html">How to squash git log comments into one line</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#3162 Issue closed: RFC: Why does "rear recover" regenerate the original's system initrd in any case?</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="3162_issue_closed_rfc_why_does_rear_recover_regenerate_the_originals_system_initrd_in_any_case"><a href="https://github.com/rear/rear/issues/3162">#3162 Issue</a> <code>closed</code>: RFC: Why does "rear recover" regenerate the original's system initrd in any case?<a class="headerlink" href="#3162_issue_closed_rfc_why_does_rear_recover_regenerate_the_originals_system_initrd_in_any_case" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>discuss / RFC</code>, <code>fixed / solved / done</code></p>
<h4 id="jsmeix_opened_issue_at_2024-02-22_1058"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> opened issue at <a href="https://github.com/rear/rear/issues/3162">2024-02-22 10:58</a>:<a class="headerlink" href="#jsmeix_opened_issue_at_2024-02-22_1058" title="Permanent link">&para;</a></h4>
<p>Triggered by<br />
<a href="https://github.com/rear/rear/issues/3152">https://github.com/rear/rear/issues/3152</a><br />
and<br />
<a href="https://github.com/rear/rear/pull/3155">https://github.com/rear/rear/pull/3155</a><br />
I am wondering<br />
why "rear recover" regenerates<br />
the original's system initrd in any case?</p>
<p>In particular why I am wondering see in my<br />
<a href="https://github.com/rear/rear/issues/3152#issuecomment-1941510047">https://github.com/rear/rear/issues/3152#issuecomment-1941510047</a></p>
<pre><code>Cannot create initrd (found no mkinitrd in the recreated system).
...
Nevertheless the recreated system boots well for me
as expected because I recreated on 100% compatible
replacement "hardware" (on a same VM) so the same initrd
from the original system should still work.
</code></pre>
<p>and see in my<br />
<a href="https://github.com/rear/rear/pull/3155#issue-2138456399">https://github.com/rear/rear/pull/3155#issue-2138456399</a></p>
<pre><code>Additionally improved the user messages
(in particular the warning messages)
to make it more clear that the point is
to decide if the recreated system will boot
with the initrd 'as is' from the backup restore.
</code></pre>
<p>The default use case of "rear recover" is to recreate<br />
on "Fully compatible replacement hardware"<br />
(where "hardware" could be also virtual hardware), cf.<br />
<a href="https://en.opensuse.org/SDB:Disaster_Recovery#Fully_compatible_replacement_hardware_is_needed">https://en.opensuse.org/SDB:Disaster_Recovery#Fully_compatible_replacement_hardware_is_needed</a></p>
<p>On "fully compatible replacement hardware"<br />
the initrd 'as is' from the original system<br />
together with the kernel 'as is' from the original system<br />
(that both together are restored 'as is' from the backup)<br />
must still work<br />
(otherwise it is no "fully compatible replacement hardware").</p>
<p>So for the default use case of "rear recover"<br />
there is no need to regenerate the initrd.</p>
<p>But regenerating the initrd needs relatively long time<br />
so "rear recover" is slower than actually needed<br />
AND<br />
regenerating the original's system initrd<br />
during "rear recover" may generate the new initrd<br />
with (possibly subtle but severe) differences<br />
compared to the original's system initrd<br />
so regenerating the initrd in any case<br />
may do more harm than good in practice<br />
for the default use case of "rear recover".</p>
<h4 id="pcahyna_commented_at_2024-02-22_1519"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/3162#issuecomment-1959671814">2024-02-22 15:19</a>:<a class="headerlink" href="#pcahyna_commented_at_2024-02-22_1519" title="Permanent link">&para;</a></h4>
<p>I would check with SW RAID, I suspect some details of the recreated
array may differ from the original (like UUIDs) and regenerating the
initrd may be needed for picking up this.</p>
<h4 id="pcahyna_commented_at_2024-02-22_1521"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/3162#issuecomment-1959675328">2024-02-22 15:21</a>:<a class="headerlink" href="#pcahyna_commented_at_2024-02-22_1521" title="Permanent link">&para;</a></h4>
<p>This may be the case also for other IDs in the system config files that
may change, if the files are embedded in the ramdisk. We have a script
running at the end that updates the IDs in known config files.</p>
<h4 id="jsmeix_commented_at_2024-02-23_1424"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/3162#issuecomment-1961416228">2024-02-23 14:24</a>:<a class="headerlink" href="#jsmeix_commented_at_2024-02-23_1424" title="Permanent link">&para;</a></h4>
<p>@pcahyna<br />
thank you for the reasons why regenerating the initrd<br />
could be needed in any case to be more on the safe side<br />
against (possibly subtle but severe) differences<br />
between the original system and the recreated system.</p>
<h4 id="abbbi_commented_at_2024-03-14_0807"><img src="https://avatars.githubusercontent.com/u/3919561?u=473291dd3dbd58fd0af45714935992a3d416aa6e&v=4" width="50"><a href="https://github.com/abbbi">abbbi</a> commented at <a href="https://github.com/rear/rear/issues/3162#issuecomment-1996785565">2024-03-14 08:07</a>:<a class="headerlink" href="#abbbi_commented_at_2024-03-14_0807" title="Permanent link">&para;</a></h4>
<p>just as side note, i also experiencing this mostly on systems with
multipath setups.<br />
Im using qemu to simulate a multipath san environment and noted in my
automated tests that initrd is allways recreated, even if system
recovery is done into is started with equal qemu options.</p>
<h4 id="github-actions_commented_at_2024-05-14_0207"><img src="https://avatars.githubusercontent.com/in/15368?v=4" width="50"><a href="https://github.com/apps/github-actions">github-actions</a> commented at <a href="https://github.com/rear/rear/issues/3162#issuecomment-2109140573">2024-05-14 02:07</a>:<a class="headerlink" href="#github-actions_commented_at_2024-05-14_0207" title="Permanent link">&para;</a></h4>
<p>Stale issue message</p>
<h4 id="github-actions_commented_at_2024-07-14_0228"><img src="https://avatars.githubusercontent.com/in/15368?v=4" width="50"><a href="https://github.com/apps/github-actions">github-actions</a> commented at <a href="https://github.com/rear/rear/issues/3162#issuecomment-2227172352">2024-07-14 02:28</a>:<a class="headerlink" href="#github-actions_commented_at_2024-07-14_0228" title="Permanent link">&para;</a></h4>
<p>Stale issue message</p>
<h4 id="jsmeix_commented_at_2024-07-18_1134"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/3162#issuecomment-2236279085">2024-07-18 11:34</a>:<a class="headerlink" href="#jsmeix_commented_at_2024-07-18_1134" title="Permanent link">&para;</a></h4>
<p>I close it because it is sufficiently answered, cf.<br />
<a href="https://github.com/rear/rear/issues/3162#issuecomment-1961416228">https://github.com/rear/rear/issues/3162#issuecomment-1961416228</a></p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2026 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2024-02-22.3162.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
