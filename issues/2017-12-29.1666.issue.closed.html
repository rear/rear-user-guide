<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#1666 Issue closed: ReaR 2.3 configuration files world-readable in debian package - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#1666 Issue closed: ReaR 2.3 configuration files world-readable in debian package";
        var mkdocs_page_input_path = "issues/2017-12-29.1666.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#1666 Issue closed: ReaR 2.3 configuration files world-readable in debian package</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="1666_issue_closed_rear_23_configuration_files_world-readable_in_debian_package"><a href="https://github.com/rear/rear/issues/1666">#1666 Issue</a> <code>closed</code>: ReaR 2.3 configuration files world-readable in debian package<a class="headerlink" href="#1666_issue_closed_rear_23_configuration_files_world-readable_in_debian_package" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>bug</code>, <code>fixed / solved / done</code></p>
<h4 id="olivero2_opened_issue_at_2017-12-29_1125"><img src="https://avatars.githubusercontent.com/u/4660803?v=4" width="50"><a href="https://github.com/OliverO2">OliverO2</a> opened issue at <a href="https://github.com/rear/rear/issues/1666">2017-12-29 11:25</a>:<a class="headerlink" href="#olivero2_opened_issue_at_2017-12-29_1125" title="Permanent link">&para;</a></h4>
<p>Current debian packaging produces wrong permissions. According to the
Makefile (target <code>install-config</code>) they should be 0700 (u=rwx,go=-) for
directories <code>/etc/rear</code> and <code>/etc/rear/cert/</code>, and 0600 (u=rw,go=-) for
<code>/etc/rear/local.conf</code>. Actual permissions in the debian archive:</p>
<pre><code>$ ar x rear_2.3-0_amd64.deb
$ tar tvf data.tar.xz ./etc
drwxr-xr-x root/root         0 2017-12-20 16:19 ./etc/
drwxr-xr-x root/root         0 2017-12-20 16:19 ./etc/rear/
-rw-r--r-- root/root       534 2017-10-02 15:15 ./etc/rear/local.conf
drwxr-xr-x root/root         0 2017-12-20 16:19 ./etc/rear/cert/
</code></pre>
<h4 id="jsmeix_commented_at_2018-01-03_1504"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1666#issuecomment-355033818">2018-01-03 15:04</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-01-03_1504" title="Permanent link">&para;</a></h4>
<p>@OliverO2<br />
I know nothing at all about Debian packaging.</p>
<p>I assume you are talking about ReaR packages for Debian as in<br />
<a href="http://relax-and-recover.org/download/">http://relax-and-recover.org/download/</a><br />
i.e. from the OpenSUSE Build Service (and not from elsewhere).</p>
<p>I think matching Debian packaging source files are at<br />
<a href="https://build.opensuse.org/package/show/Archiving:Backup:Rear/rear-2.3">https://build.opensuse.org/package/show/Archiving:Backup:Rear/rear-2.3</a></p>
<h4 id="olivero2_commented_at_2018-01-03_1509"><img src="https://avatars.githubusercontent.com/u/4660803?v=4" width="50"><a href="https://github.com/OliverO2">OliverO2</a> commented at <a href="https://github.com/rear/rear/issues/1666#issuecomment-355034910">2018-01-03 15:09</a>:<a class="headerlink" href="#olivero2_commented_at_2018-01-03_1509" title="Permanent link">&para;</a></h4>
<p>@jsmeix Yes, precisely. I've also built the debian package locally with
identical results.</p>
<h4 id="jsmeix_commented_at_2018-01-03_1531"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1666#issuecomment-355040745">2018-01-03 15:31</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-01-03_1531" title="Permanent link">&para;</a></h4>
<p>By bind googling I found:<br />
<a href="https://unix.stackexchange.com/questions/265462/how-to-change-folder-permissions-during-package-installation">https://unix.stackexchange.com/questions/265462/how-to-change-folder-permissions-during-package-installation</a><br />
which talks about 'dh_fixperms' that is also mentioned in<br />
<a href="https://www.debian.org/doc/manuals/maint-guide/dreq.en.html#rules">https://www.debian.org/doc/manuals/maint-guide/dreq.en.html#rules</a><br />
and described in<br />
<a href="https://manpages.debian.org/jessie/debhelper/dh_fixperms.1.en.html">https://manpages.debian.org/jessie/debhelper/dh_fixperms.1.en.html</a></p>
<h4 id="olivero2_commented_at_2018-01-03_1713"><img src="https://avatars.githubusercontent.com/u/4660803?v=4" width="50"><a href="https://github.com/OliverO2">OliverO2</a> commented at <a href="https://github.com/rear/rear/issues/1666#issuecomment-355068485">2018-01-03 17:13</a>:<a class="headerlink" href="#olivero2_commented_at_2018-01-03_1713" title="Permanent link">&para;</a></h4>
<p>Yes, seems like <code>dh_fixperms</code> is the culprit. It contradicts its own
<a href="https://anonscm.debian.org/git/debhelper/debhelper.git/tree/dh_fixperms">(inline) manual
page</a>,
which omits the fact that the script actually makes <strong>everything</strong> world
readable.</p>
<p>So instead of setting permissions to a <em>sane state</em> (as advertised),
<code>dh_fixperms</code> paves the way to open up security holes once users insert
secrets into their config files. :frowning_face:</p>
<h4 id="jsmeix_commented_at_2018-01-04_1341"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1666#issuecomment-355284778">2018-01-04 13:41</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-01-04_1341" title="Permanent link">&para;</a></h4>
<p>@frediz<br />
because in
<a href="https://github.com/rear/rear/issues/1163">https://github.com/rear/rear/issues/1163</a>
you wrote</p>
<pre>
I've packaged Relax-and-Recover as "rear" for Debian
</pre>

<p>you may have a look here in particular at<br />
<a href="https://github.com/rear/rear/issues/1666#issuecomment-355068485">https://github.com/rear/rear/issues/1666#issuecomment-355068485</a><br />
whether or not there is perhaps a general security issue<br />
what file permissions Debian packaging results by default?</p>
<h4 id="frediz_commented_at_2018-01-08_1449"><img src="https://avatars.githubusercontent.com/u/10598161?v=4" width="50"><a href="https://github.com/frediz">frediz</a> commented at <a href="https://github.com/rear/rear/issues/1666#issuecomment-355986599">2018-01-08 14:49</a>:<a class="headerlink" href="#frediz_commented_at_2018-01-08_1449" title="Permanent link">&para;</a></h4>
<p>@jsmeix thanks for the notice. I'll check the details for the package in
Debian.</p>
<h4 id="frediz_commented_at_2018-01-26_1309"><img src="https://avatars.githubusercontent.com/u/10598161?v=4" width="50"><a href="https://github.com/frediz">frediz</a> commented at <a href="https://github.com/rear/rear/issues/1666#issuecomment-360780307">2018-01-26 13:09</a>:<a class="headerlink" href="#frediz_commented_at_2018-01-26_1309" title="Permanent link">&para;</a></h4>
<p>Hi,<br />
the default permissions are the one set by dh_fixperms as shown above,
and those are sensible default permissions according to Debian Policy
and no sensitive information.<br />
Most of configuration files in packages have no reason not to be read
and there would be anyway<br />
readable through the package downloadable by everybody in the Debian
packages archive which<br />
wouldn't make sense.<br />
Now, by default, these files don't include anything sensitive, so, I'd
say that if some rear user wants to<br />
store some keys, he's also responsible for taking care of the protection
of the files in an atomic fashion, that is :</p>
<ul>
<li>have /etc/rear/local.conf be 600 if one stores sensitive information</li>
<li>have /etc/rear/cert/* be 600 instead of the whole trees be 700<br />
    I completely understand the idea of forcing those permission which
    is what I started to implement in the package but by default from
    what the package provides that is nothing, it's a bit overkill. So
    I'm still wondering :)<br />
    Maybe rear should fail if sensitive information is stored and no
    proper permissions is set, as other utilities do in that case, so
    that for some reason if the permissions gets changed, no disaster
    occurs.<br />
    What do you think ?</li>
</ul>
<p>F.</p>
<h4 id="olivero2_commented_at_2018-01-29_2137"><img src="https://avatars.githubusercontent.com/u/4660803?v=4" width="50"><a href="https://github.com/OliverO2">OliverO2</a> commented at <a href="https://github.com/rear/rear/issues/1666#issuecomment-361395121">2018-01-29 21:37</a>:<a class="headerlink" href="#olivero2_commented_at_2018-01-29_2137" title="Permanent link">&para;</a></h4>
<p>@frediz Thanks for the explanations. I understand what <code>dh_fixperms</code> is
trying to accomplish (default permissions when there is no sensitive
information present). The problem is that dh_fixperms's documentation
simply does not explain what it actually does to file permissions in
<code>/etc/</code>.</p>
<p>You are right that ReaR's default configuration doesn't include
sensitive information. But probably one of the more popular
configuration changes would be setting <code>SSH_ROOT_PASSWORD</code> with a
password hash. It's like adding the first password hash to (the
read-protected) <code>/etc/shadow</code> in terms of sensitivity. So I'd argue it's
better for ReaR users to be safe than sorry here and install the ReaR
configuration files read-protected from the start like PR
<a href="https://github.com/rear/rear/pull/1674">https://github.com/rear/rear/pull/1674</a>
does.</p>
<h4 id="frediz_commented_at_2018-02-14_1602"><img src="https://avatars.githubusercontent.com/u/10598161?v=4" width="50"><a href="https://github.com/frediz">frediz</a> commented at <a href="https://github.com/rear/rear/issues/1666#issuecomment-365653672">2018-02-14 16:02</a>:<a class="headerlink" href="#frediz_commented_at_2018-02-14_1602" title="Permanent link">&para;</a></h4>
<p>Hi @OliverO2 (sorry for the delay, I really need to figure out how to
get notification on my mails despite checked).<br />
Yes, I thought about all that and don't want to get into troubles :) ..
so I'll commit what I initially did<br />
as asked that is set restrictive permissions and also back propagate
this to already installed rear package<br />
into Debian.<br />
Thanks guys,<br />
F.</p>
<h4 id="olivero2_commented_at_2018-02-14_1606"><img src="https://avatars.githubusercontent.com/u/4660803?v=4" width="50"><a href="https://github.com/OliverO2">OliverO2</a> commented at <a href="https://github.com/rear/rear/issues/1666#issuecomment-365655283">2018-02-14 16:06</a>:<a class="headerlink" href="#olivero2_commented_at_2018-02-14_1606" title="Permanent link">&para;</a></h4>
<p>@frediz You're welcome. Thanks for your feedback!</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2023 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2017-12-29.1666.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
