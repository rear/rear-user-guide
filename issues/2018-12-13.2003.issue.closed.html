<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#2003 Issue closed: ReaR does not preserve Grub install location - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#2003 Issue closed: ReaR does not preserve Grub install location";
        var mkdocs_page_input_path = "issues/2018-12-13.2003.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_nas.html">Internal Backup with tar to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/rbme.html">External Backup using RBME</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../development/squash-git-log-commments.html">How to squash git log comments into one line</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#2003 Issue closed: ReaR does not preserve Grub install location</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="2003_issue_closed_rear_does_not_preserve_grub_install_location"><a href="https://github.com/rear/rear/issues/2003">#2003 Issue</a> <code>closed</code>: ReaR does not preserve Grub install location<a class="headerlink" href="#2003_issue_closed_rear_does_not_preserve_grub_install_location" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>bug</code>, <code>discuss / RFC</code>, <code>no-issue-activity</code></p>
<h4 id="gozora_opened_issue_at_2018-12-13_1240"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> opened issue at <a href="https://github.com/rear/rear/issues/2003">2018-12-13 12:40</a>:<a class="headerlink" href="#gozora_opened_issue_at_2018-12-13_1240" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>ReaR version ("/usr/sbin/rear -V"):<br />
<code>Relax-and-Recover 2.4 / Git</code></p>
</li>
<li>
<p>OS version ("cat /etc/rear/os.conf" or "lsb_release -a" or "cat
    /etc/os-release"):<br />
<code>SUSE Linux Enterprise Server for SAP Applications 12 SP2</code></p>
</li>
<li>
<p>ReaR configuration files ("cat /etc/rear/site.conf" and/or "cat
    /etc/rear/local.conf"):</p>
</li>
</ul>
<!-- -->

<pre><code># cat /etc/rear/local.conf
UTPUT=ISO
BACKUP=NETFS
BACKUP_URL=nfs://backup/mnt/rear
BACKUP_OPTIONS="nfsvers=3,nolock"

SSH_FILES='yes'

# Network
USE_STATIC_NETWORKING="yes"
USE_DHCLIENT="no"
NETWORKING_PREPARATION_COMMANDS=( 'ip addr add 192.168.56.200/24 dev eth1' 'ip link set dev eth0 up' 'return' )
</code></pre>
<ul>
<li>
<p>Hardware (PC or PowerNV BareMetal or ARM) or virtual machine (KVM
    guest or PoverVM LPAR):<br />
<code>VirtualBox VM</code></p>
</li>
<li>
<p>System architecture (x86 compatible or PPC64/PPC64LE or what exact
    ARM device):<br />
<code>x86 compatible</code></p>
</li>
<li>
<p>Firmware (BIOS or UEFI or Open Firmware) and bootloader (GRUB or
    ELILO or Petitboot):<br />
<code>BIOS/GRUB</code></p>
</li>
<li>
<p>Storage (lokal disk or SSD) and/or SAN (FC or iSCSI or FCoE) and/or
    multipath (DM or NVMe):<br />
<code>Local (no multipath)</code></p>
</li>
<li>
<p>Description of the issue (ideally so that others can reproduce
    it):<br />
    GRUB that was originally installed on <code>/boot</code> (/dev/sda1) is
    reinstalled on <code>rear recover</code> to MBR (/dev/sda) which caused
    unbootable system after upgrade from SLE12-SP2-&gt;SLE2-SP3:</p>
</li>
</ul>
<p><img alt="post_upgrade_fail" src="https://user-images.githubusercontent.com/12116358/49937783-2c095400-fed8-11e8-86f4-8a1749574d11.png" /></p>
<p>This behavior should not apply to installations where GRUB is installed
to MBR during OS installation.</p>
<ul>
<li>Workaround, if any:<br />
<code>yast bootloader-&gt;OK</code> to reinstall bootloader to its original
    location (<code>/boot</code>) or update <code>/etc/default/grub_installdevice</code></li>
</ul>
<!-- -->

<pre><code>- /dev/sda1
+ /dev/sda
activate
generic_mbr
</code></pre>
<p>To reflect new location of boot loader installed by <code>rear recover</code></p>
<p>This is issue is reproducible as follows:</p>
<ol>
<li>Install boot loader to <code>/boot</code> partition during OS installation</li>
<li>backup / restore OS with ReaR</li>
<li>
<p>do SP upgrade (e.g. from SP2-&gt;SP3) either offline (by booting
    from SLE ISO) or by <code>zypper dist-upgrade</code></p>
</li>
<li>
<p>Attachments, as applicable ("rear -D mkrescue/mkbackup/recover"
    debug log files):</p>
</li>
</ol>
<h4 id="gozora_commented_at_2018-12-13_1241"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/2003#issuecomment-446954730">2018-12-13 12:41</a>:<a class="headerlink" href="#gozora_commented_at_2018-12-13_1241" title="Permanent link">&para;</a></h4>
<p>@jsmeix I've dared to assign you since we are dealing here with SuSE
;-), hope you don't mind ;-).</p>
<p>V.</p>
<h4 id="gozora_commented_at_2018-12-13_1323"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/2003#issuecomment-446966462">2018-12-13 13:23</a>:<a class="headerlink" href="#gozora_commented_at_2018-12-13_1323" title="Permanent link">&para;</a></h4>
<p>IMHO one sufficient thing would be to patch
<em>/mnt/local/etc/default/grub_installdevice</em> with information from
<code>finalize/Linux-i386/620_install_grub2.sh</code> is similar way like done in
<code>finalize/GNU/Linux/280_migrate_uuid_tags.sh</code></p>
<p>V.</p>
<h4 id="jsmeix_commented_at_2018-12-14_1002"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2003#issuecomment-447276273">2018-12-14 10:02</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-12-14_1002" title="Permanent link">&para;</a></h4>
<p>I know about this kind of issue since a longer time<br />
but I never did a thorough analysis.</p>
<p>As far as I know "rear recover" basically installs GRUB2 into MBR<br />
(or more precisely on the boot disk device node like /dev/sda<br />
but not into a boot partition device node like /dev/sda1)<br />
regardless how GRUB2 was installed on the original system<br />
(I never cared about the GRUB legacy scripts in ReaR, they seem<br />
to "somehow work good enough" because there are no bug reports).</p>
<p>What I implemented as a generic way to give the user final power<br />
where GRUB2 gets installed is GRUB2_INSTALL_DEVICES, cf.<br />
<a href="https://github.com/rear/rear/blob/master/usr/share/rear/conf/default.conf#L2450">https://github.com/rear/rear/blob/master/usr/share/rear/conf/default.conf#L2450</a></p>
<p>@gozora<br />
does `GRUB2_INSTALL_DEVICES="/dev/sa1" help in your case?</p>
<p>Did you re-run "rear mkbackup" after you did the<br />
upgrade from SLE12-SP2 to SLE2-SP3 ?</p>
<p>You need to re-do "rear mkbackup" and re-test "rear recover"<br />
after any change of the basic system, cf.<br />
<a href="https://en.opensuse.org/SDB:Disaster_Recovery">https://en.opensuse.org/SDB:Disaster_Recovery</a><br />
because you need in particular the new config files<br />
of the upgraded system in your backup because in particular<br />
GRUB2 is installed from within a 'chroot' into the up to that point<br />
recreated system so that GRUB2 gets installed within the<br />
environment of the up to that point recreated system which means<br />
GRUB2 gets installed with the config files from the restored backup.</p>
<p>But I think this does not affect the target location whereto<br />
GRUB2 will be installed (e.g. /dev/sda versus /dev/sda1)<br />
because that is provided as command line argument<br />
to the grub2-install command, cf.<br />
finalize/Linux-i386/620_install_grub2.sh<br />
and that command line argument can be specified<br />
via GRUB2_INSTALL_DEVICES.</p>
<h4 id="jsmeix_commented_at_2018-12-14_1015"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2003#issuecomment-447279972">2018-12-14 10:15</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-12-14_1015" title="Permanent link">&para;</a></h4>
<p>@gozora<br />
perhaps I understand now what you meant with</p>
<pre><code>1. Install boot loader to /boot partition during OS installation
2. backup / restore OS with ReaR
3. do SP upgrade (e.g. from SP2-&gt;SP3)
</code></pre>
<p>During <code>2. backup / restore OS with ReaR</code><br />
the system will be changed by "rear recover"<br />
from GRUB2 on /boot (i.e. on /dev/sda1)<br />
to GRUB2 in MBR (i.e. on /dev/sda)<br />
but the matching GRUB2 config file <code>/etc/default/grub_installdevice</code><br />
is not updated accordingly so that the actual GRUB2 installation<br />
does no longer match the GRUB2 config files.</p>
<p>Then <code>3. do SP upgrade (e.g. from SP2-&gt;SP3)</code> results<br />
a unbootable system because of what is likely a bug in this step.<br />
I think there is a bug in that step because I assume the system<br />
was still bootable after <code>2. backup / restore OS with ReaR</code><br />
(i.e. the new GRUB2 installation by "rear recover" worked in practice)<br />
so that <code>3. do SP upgrade (e.g. from SP2-&gt;SP3)</code> made a bootable system<br />
no longer bootable.</p>
<p>Nevertheless it seems there is also a generic bug in ReaR<br />
because it does not autodetect the actual GRUB2 install target<br />
(e.g. whether it is /dev/sda or /dev/sda1) but by default<br />
(i.e. unless GRUB2_INSTALL_DEVICES was specified)<br />
"rear recover" may change the actual GRUB2 install target<br />
which it should not do.</p>
<p>I think what is not right is to let "rear recover" silently change<br />
the actual GRUB2 install target and then even more change things<br />
and adapt GRUB2 config files on the recreated system because this<br />
is not what the admin expects to happen.</p>
<h4 id="jsmeix_commented_at_2018-12-14_1050"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2003#issuecomment-447288982">2018-12-14 10:50</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-12-14_1050" title="Permanent link">&para;</a></h4>
<p>By the way:<br />
On my SLES15-like openSUSE Leap 15.0<br />
x86_64 system with GPT and UEFI boot<br />
I do not have /etc/default/grub_installdevice<br />
I guess<br />
<a href="https://bugzilla.opensuse.org/show_bug.cgi?id=994322">https://bugzilla.opensuse.org/show_bug.cgi?id=994322</a><br />
is related.</p>
<h4 id="gozora_commented_at_2018-12-14_1050"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/2003#issuecomment-447288998">2018-12-14 10:50</a>:<a class="headerlink" href="#gozora_commented_at_2018-12-14_1050" title="Permanent link">&para;</a></h4>
<p>I don't see any easy way how to completely and correctly fix this
problem.<br />
I theory we would need similar approach as
<a href="http://bootinfoscript.sourceforge.net/">bootinfoscript</a>, which scans
all devices that can contain boot loader, store them during
<code>rear mkbackup</code> and restore it afterwards.</p>
<p>V.</p>
<h4 id="gozora_commented_at_2018-12-14_1103"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/2003#issuecomment-447292228">2018-12-14 11:03</a>:<a class="headerlink" href="#gozora_commented_at_2018-12-14_1103" title="Permanent link">&para;</a></h4>
<blockquote>
<p>By the way:<br />
On my SLES15-like openSUSE Leap 15.0<br />
x86_64 system with GPT and UEFI boot<br />
I do not have /etc/default/grub_installdevice<br />
I guess<br />
<a href="https://bugzilla.opensuse.org/show_bug.cgi?id=994322">https://bugzilla.opensuse.org/show_bug.cgi?id=994322</a><br />
is related.</p>
</blockquote>
<p>Sweet, this makes my idea in
<a href="https://github.com/rear/rear/issues/2003#issuecomment-446966462">https://github.com/rear/rear/issues/2003#issuecomment-446966462</a>
obsolete ...</p>
<h4 id="jsmeix_commented_at_2018-12-14_1221"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2003#issuecomment-447309268">2018-12-14 12:21</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-12-14_1221" title="Permanent link">&para;</a></h4>
<p>I assume the root cause is what is described in the section<br />
"Disaster recovery does not just work" in<br />
<a href="https://en.opensuse.org/SDB:Disaster_Recovery">https://en.opensuse.org/SDB:Disaster_Recovery</a><br />
(excerpt):</p>
<pre><code>For example there is the general problem
that it is impossible to determine in a reliable way
how a running system was actually booted.
</code></pre>
<p>Perhaps it is possible to find something that indicates<br />
when GRUB2 is not installed in MBR<br />
(e.g. when it is not on /dev/sda but elsewhere)<br />
and in this case error out during "rear mkrescue"<br />
unless GRUB2_INSTALL_DEVICES was specified<br />
to enforce the user when things are not clear to<br />
explicitly tell whereto GRUB2 needs to be installed?</p>
<h4 id="jsmeix_commented_at_2018-12-14_1230"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2003#issuecomment-447311302">2018-12-14 12:30</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-12-14_1230" title="Permanent link">&para;</a></h4>
<p>@gozora<br />
during "rear recover" you should have got LogPrint messages<br />
from finalize/Linux-i386/620_install_grub2.sh like</p>
<pre><code>Installing GRUB2 boot loader...
Determining where to install GRUB2 (no GRUB2_INSTALL_DEVICES specified)
Found possible boot disk /dev/sda - installing GRUB2 there
</code></pre>
<p>so that you should (theoretically) have been informed<br />
about the changed location whereto GRUB2 was installed.</p>
<p>Based on that another idea how to deal with such issues is<br />
to let the user actively confirm whereto GRUB2 gets installed<br />
by a UserInput dialog.</p>
<p>@gozora<br />
if you got the above LogPrint messages I will do a pull request (next
week)<br />
with an added UserInput dialog to let the user actively confirm<br />
whereto GRUB2 gets installed so that you could try out if that<br />
would make things behave more fail-safe for you.</p>
<h4 id="jsmeix_commented_at_2018-12-14_1312"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2003#issuecomment-447321361">2018-12-14 13:12</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-12-14_1312" title="Permanent link">&para;</a></h4>
<p>Third offhanded idea how to reasonably guess<br />
where GRUB2 is acually installed on the original system:</p>
<p>In layout/save/default/445_guess_bootloader.sh the code part</p>
<pre><code># Finally guess the used bootloader by inspecting the first bytes on all disks
# and use the first one that matches a known bootloader string:
for block_device in /sys/block/* ; do
    ...
done
</code></pre>
<p>guesses what bootloader is used by inspecting certain disk devices<br />
(currently as far as I see only e.g. /dev/sda but not yet /dev/sda1)<br />
so that it is perhaps possible to re-use and enhance that kind of code<br />
to remember on what disk device the guessed bootloader was found<br />
and use by default that disk device whereto GRUB2 will get
re-installed<br />
during "rear recover" unless GRUB2_INSTALL_DEVICES was specified.</p>
<p>If it finds signs of GRUB2 being installed on more than one disk
device<br />
we might blindly re-install GRUB2 on all of them (which would be right<br />
in case of RAID1 consisting of /dev/sda and /dev/sdb)<br />
or we could let ReaR behave better safe than sorry by default and<br />
error out with "ambiguous GRUB2 location" during "rear mkrescue" as in<br />
<a href="https://github.com/rear/rear/issues/2003#issuecomment-447309268">https://github.com/rear/rear/issues/2003#issuecomment-447309268</a></p>
<h4 id="gozora_commented_at_2018-12-16_1712"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/2003#issuecomment-447659629">2018-12-16 17:12</a>:<a class="headerlink" href="#gozora_commented_at_2018-12-16_1712" title="Permanent link">&para;</a></h4>
<p>@jsmeix don't waste your time too much on this one. It can be rather
easy to fix in running system.</p>
<p>I'll take a look on Grub installation code and see if there is some way,
how it can be enhanced.</p>
<p>V.</p>
<h4 id="github-actions_commented_at_2020-06-28_0133"><img src="https://avatars.githubusercontent.com/in/15368?v=4" width="50"><a href="https://github.com/apps/github-actions">github-actions</a> commented at <a href="https://github.com/rear/rear/issues/2003#issuecomment-650665316">2020-06-28 01:33</a>:<a class="headerlink" href="#github-actions_commented_at_2020-06-28_0133" title="Permanent link">&para;</a></h4>
<p>Stale issue message</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2025 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2018-12-13.2003.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
