<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#1307 Issue closed: Migrate: Partition resized to a negative number (new_size=0) - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#1307 Issue closed: Migrate: Partition resized to a negative number (new_size=0)";
        var mkdocs_page_input_path = "issues/2017-04-16.1307.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#1307 Issue closed: Migrate: Partition resized to a negative number (new_size=0)</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="1307_issue_closed_migrate_partition_resized_to_a_negative_number_new_size0"><a href="https://github.com/rear/rear/issues/1307">#1307 Issue</a> <code>closed</code>: Migrate: Partition resized to a negative number (new_size=0)<a class="headerlink" href="#1307_issue_closed_migrate_partition_resized_to_a_negative_number_new_size0" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>bug</code>, <code>cleanup</code>, <code>fixed / solved / done</code></p>
<h4 id="probackup-nl_opened_issue_at_2017-04-16_1130"><img src="https://avatars.githubusercontent.com/u/515451?u=4f985fa15d087babc5049c337be90b42b56c8b8b&v=4" width="50"><a href="https://github.com/ProBackup-nl">ProBackup-nl</a> opened issue at <a href="https://github.com/rear/rear/issues/1307">2017-04-16 11:30</a>:<a class="headerlink" href="#probackup-nl_opened_issue_at_2017-04-16_1130" title="Permanent link">&para;</a></h4>
<ul>
<li>rear version: 2.00 git</li>
<li>OS version: Arch Linux</li>
<li>rear configuration files: USB NETFS</li>
<li>Are you using legacy BIOS or UEFI boot? UEFI</li>
<li>Brief description of the issue: Recover and migrate from 32G to 128G
    drive, from /dev/sda to /dev/sda results in Partition /dev/sda
    resized to a negative number</li>
</ul>
<p>Source drive:</p>
<pre><code>Disk /dev/sdc: 32.1GB
Sector size (logical/physical): 512B/512B
Partition Table: gpt

Number  Start          End        Size       Name     File system  Flags
 1      4194kB         1078MB     1074MB     EFIboot  fat32        boot, esp
 2      1078MB         22.0GB     21.0GB     root     btrfs
 3      22.0GB         32.0GB     9966MB     home     btrfs
</code></pre>
<p>Target drive:</p>
<pre><code>Disk /dev/sda: 126GB
Sector size (logical/physical): 512B/512B
Partition Table: gpt

Number  Start          End       Size       Name     File system  Flags
 1      4194kB         104MB     99.6MB     EFIboot  fat16        boot, esp
 2      104MB          30.0GB    29.9GB     root     btrfs
 3      29.9GB         60.0B     30.0GB     home     btrfs
</code></pre>
<p>On screen:</p>
<pre><code>This is the disk mapping table:
    /dev/sda /dev/sda
ERROR:
===================
BUG in /usr/share/rear/layout/prepare/default/400_autoresize_disks.sh:
'Partition /dev/sda2 resized to a negative number.'
</code></pre>
<p><a href="https://github.com/rear/rear/blob/master/usr/share/rear/layout/prepare/default/400_autoresize_disks.sh">400_autoresize_disks.sh</a></p>
<p>/var/lib/rear/layout/disklayout.conf:</p>
<pre><code>part /dev/sda 1073741824 4194304 EFIboot boot /dev/sda1
part /dev/sda 20971520000 1077936128 root none /dev/sda2
part /dev/sda 9965666304 22049456128 home none /dev/sda3
</code></pre>
<p>Debug log (dots inserted as thousand separator for readability):</p>
<pre><code>difference=93.957.251.072B
...
partitions=()
resizeable_space=0
available_space=126.035.288.064
...
available_space=124.961.546.240
Log 'Will not resize partition /dev/sda1.'
...
.../dev/sda2...
...
resizeable_space=20.971.520.000
...Will resize partition /dev/sda2.'
...
.../dev/sda3...
...
resizeable_space=30.937.186.304
...Will resize partition /dev/sda3.'
...
(( available_space &lt; 0 ))
for data in "${partitions[@]}"
name=/dev/sda2
partition_size=20.971.520.000
new_size=0
(( new_size &gt; 0 ))
BugifError 'Partition dev/sda2 resized to a negative number.'
(( 1 != 0 ))
BugifError 'Partition dev/sda2 resized to a negative number.'
</code></pre>
<p>I would guess that
<code>$(( ( $partition_size / $resizeable_space ) * $available_space ))</code>
becomes: <code>$(( (20971520000/30937186304)*124961546240 ))</code> which equals to
<code>0</code>.</p>
<h4 id="probackup-nl_commented_at_2017-04-16_1914"><img src="https://avatars.githubusercontent.com/u/515451?u=4f985fa15d087babc5049c337be90b42b56c8b8b&v=4" width="50"><a href="https://github.com/ProBackup-nl">ProBackup-nl</a> commented at <a href="https://github.com/rear/rear/issues/1307#issuecomment-294368782">2017-04-16 19:14</a>:<a class="headerlink" href="#probackup-nl_commented_at_2017-04-16_1914" title="Permanent link">&para;</a></h4>
<p>Isn't <a href="https://github.com/rear/rear/blob/master/usr/share/rear/layout/prepare/default/400_autoresize_disks.sh#L49">line
49</a>
an issue?</p>
<p><code>if (( available_space &lt; 0 )) ; then</code></p>
<p>Shouldn't that <code>available_space</code> <em>var</em> not be prefixed with a <code>$</code>?</p>
<h4 id="probackup-nl_commented_at_2017-04-16_1935"><img src="https://avatars.githubusercontent.com/u/515451?u=4f985fa15d087babc5049c337be90b42b56c8b8b&v=4" width="50"><a href="https://github.com/ProBackup-nl">ProBackup-nl</a> commented at <a href="https://github.com/rear/rear/issues/1307#issuecomment-294369824">2017-04-16 19:35</a>:<a class="headerlink" href="#probackup-nl_commented_at_2017-04-16_1935" title="Permanent link">&para;</a></h4>
<p>@gozora
<a href="https://github.com/rear/rear/commit/2fb97e5dd789151516369deec8577d03c0ca14b0#diff-1478c668347b35dc86c26c2fa918dd73">https://github.com/rear/rear/commit/2fb97e5dd789151516369deec8577d03c0ca14b0#diff-1478c668347b35dc86c26c2fa918dd73</a>
breaks resizing with a Bug (new_size=0).</p>
<p>Bash 4.4.12 seems not be able to handle these large numbers:</p>
<pre><code>$ echo $(( 20971520000*30971520000 ))
3883808530565693440
</code></pre>
<h4 id="probackup-nl_commented_at_2017-04-16_2040"><img src="https://avatars.githubusercontent.com/u/515451?u=4f985fa15d087babc5049c337be90b42b56c8b8b&v=4" width="50"><a href="https://github.com/ProBackup-nl">ProBackup-nl</a> commented at <a href="https://github.com/rear/rear/issues/1307#issuecomment-294373000">2017-04-16 20:40</a>:<a class="headerlink" href="#probackup-nl_commented_at_2017-04-16_2040" title="Permanent link">&para;</a></h4>
<p>This issue is related to #1269 and #1272.</p>
<h4 id="gdha_commented_at_2017-04-18_0846"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/1307#issuecomment-294733421">2017-04-18 08:46</a>:<a class="headerlink" href="#gdha_commented_at_2017-04-18_0846" title="Permanent link">&para;</a></h4>
<p>@ProBackup-nl According <code>bc</code> it should be:</p>
<pre><code>$ echo  20971520000*30971520000|bc
649519851110400000000
</code></pre>
<p>@jsmeix @gozora If bash results are not correct, perhaps we should make
a function which is using <strong>bc</strong> instead?</p>
<h4 id="gozora_commented_at_2017-04-18_0952"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1307#issuecomment-294755221">2017-04-18 09:52</a>:<a class="headerlink" href="#gozora_commented_at_2017-04-18_0952" title="Permanent link">&para;</a></h4>
<p>I have a dimm feeling that bash mathematic expansion does not work with
decimal numbers.<br />
looks we will indeed need bc to deal with this... Will check that later
today.</p>
<h4 id="jsmeix_commented_at_2017-04-18_1135"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1307#issuecomment-294797533">2017-04-18 11:35</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-04-18_1135" title="Permanent link">&para;</a></h4>
<p>I didn't check all the details but when the issue is that in bash</p>
<pre>
(( ( a / b ) * c ))
</pre>

<p>evaluates to 0 when b &gt; a as in</p>
<pre>
# echo $(( ( 2 / 3 ) * 4 ))
0
</pre>

<p>then it should help to do the multiplication before the division</p>
<pre>
# echo $(( ( 2 * 4 ) / 3 ))
2
</pre>

<p>@gozora<br />
bash does not support decimal numbers like 0.666666 ( = 2 / 3).<br />
bash only supports integers so that 2 / 3 evaluates to 0 in bash:</p>
<pre>
# echo $(( 2 / 3 ))
0
</pre>

<h4 id="jsmeix_commented_at_2017-04-18_1141"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1307#issuecomment-294799784">2017-04-18 11:41</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-04-18_1141" title="Permanent link">&para;</a></h4>
<p>I suggest to change in
layout/prepare/default/400_autoresize_disks.sh<br />
the line</p>
<pre>
new_size=$(( ( $partition_size / $resizeable_space ) * $available_space ))
</pre>

<p>with</p>
<pre>
new_size=$(( ( $partition_size * $available_space ) / $resizeable_space ))
</pre>

<h4 id="jsmeix_commented_at_2017-04-18_1149"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1307#issuecomment-294803225">2017-04-18 11:49</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-04-18_1149" title="Permanent link">&para;</a></h4>
<p>Regarding<br />
<a href="https://github.com/rear/rear/issues/1307#issuecomment-294369824">https://github.com/rear/rear/issues/1307#issuecomment-294369824</a><br />
what the maximum numbers are that bash arithmetic can hande cf.<br />
<a href="https://github.com/rear/rear/issues/1269">https://github.com/rear/rear/issues/1269</a><br />
where it seems bash arithmetic works up to 2^63 - 1<br />
i.e. up to 9223372036854775807<br />
but on my SLES11 32-bit system<br />
and on my SLES12 64-bit system I also get</p>
<pre>
# echo $(( 20971520000 * 30971520000 ))
3883808530565693440
</pre>

<p>:-(</p>
<h4 id="jsmeix_commented_at_2017-04-18_1157"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1307#issuecomment-294806735">2017-04-18 11:57</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-04-18_1157" title="Permanent link">&para;</a></h4>
<p>I got confused what the 20971520000 * 30971520000 means.<br />
I think when the issue is to get the right result for<br />
( 20971520000 / 30937186304 ) * 124961546240<br />
then the multiplication should be<br />
20971520000 * 124961546240<br />
which of course fails even worse in bash.</p>
<h4 id="jsmeix_commented_at_2017-04-18_1211"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1307#issuecomment-294811754">2017-04-18 12:11</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-04-18_1211" title="Permanent link">&para;</a></h4>
<p>Meanwhile I also think we must use 'bc -l'<br />
basically everywhere in partitioning code<br />
because bash arithmetic "just fails".</p>
<p>Note that plain 'bc' also does only integer calculations:</p>
<pre>
# echo '( 2 / 3 ) * 4' | bc
0

# echo '( 20971520000 / 30937186304 ) * 124961546240' | bc
0
</pre>

<p>in contrast to 'bc -l' that results what we need:</p>
<pre>
# echo '( 2 / 3 ) * 4' | bc -l
2.66666666666666666664

# echo '( 20971520000 / 30937186304 ) * 124961546240' | bc -l
84708206507.59219088829208903680
</pre>

<p>To get only the final result as integer from 'bc -l' we can use</p>
<pre>
# echo ' r = ( 2 / 3 ) * 4 ; scale=0 ; r / 1 ' | bc -l
2

# echo -e 'r = ( 20971520000 / 30937186304 ) * 124961546240 ; scale = 0 ; r / 1 ' | bc -l
84708206507
</pre>

<p>a bit complicated and ugly but it seems to work.</p>
<h4 id="gozora_commented_at_2017-04-18_1852"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1307#issuecomment-294944797">2017-04-18 18:52</a>:<a class="headerlink" href="#gozora_commented_at_2017-04-18_1852" title="Permanent link">&para;</a></h4>
<p>@jsmeix</p>
<pre><code>&gt; To get only the final result as integer from 'bc -l' we can use
&gt; 
&gt; # echo ' r = ( 2 / 3 ) * 4 ; scale=0 ; r / 1 ' | bc -l
&gt; 2
&gt; 
&gt; # echo -e 'r = ( 20971520000 / 30937186304 ) * 124961546240 ; scale = 0 ; r / 1 ' | bc -l
&gt; 84708206507
</code></pre>
<p>This is exactly it, and it is not ugly, I'd call it clever!</p>
<p>As this is primary your idea, would you like to implement it, or should
I?</p>
<p>V.</p>
<h4 id="gozora_commented_at_2017-04-18_1902"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1307#issuecomment-294947540">2017-04-18 19:02</a>:<a class="headerlink" href="#gozora_commented_at_2017-04-18_1902" title="Permanent link">&para;</a></h4>
<p>Just for fun of it, I've try to run before listed code on my Arch, and
guess what I've got:</p>
<pre><code>[root@arch ~]# bc
bash: bc: command not found
</code></pre>
<p>;-)</p>
<p>V.</p>
<h4 id="jsmeix_commented_at_2017-04-19_1125"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1307#issuecomment-295227625">2017-04-19 11:25</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-04-19_1125" title="Permanent link">&para;</a></h4>
<p>@ProBackup-nl<br />
can you comment about whether or not 'bc'<br />
is usually available on Arch Linux<br />
and if not what we could do here?</p>
<p>I would think ReaR should switch to 'bc'<br />
for all partitioning calculations and error out<br />
if 'bc' is not available.</p>
<p>I think all partitioning calculations should be done<br />
with bytes 'B' as unit<br />
cf.
<a href="https://github.com/rear/rear/issues/1270">https://github.com/rear/rear/issues/1270</a><br />
and
<a href="https://github.com/rear/rear/pull/1273">https://github.com/rear/rear/pull/1273</a></p>
<p>Only the final result may - if needed - be rounded<br />
to whatever MiB unit that is reasonable for a real disk.<br />
Usually only in disk migration mode partitioning values<br />
should be re-calculated and finally rounded to a MiB unit.</p>
<p>By default this MiB unit should be 8 MiB nowadays<br />
cf.
<a href="https://github.com/rear/rear/issues/1201">https://github.com/rear/rear/issues/1201</a><br />
and
<a href="https://github.com/rear/rear/pull/1217">https://github.com/rear/rear/pull/1217</a></p>
<h4 id="probackup-nl_commented_at_2017-04-21_0831"><img src="https://avatars.githubusercontent.com/u/515451?u=4f985fa15d087babc5049c337be90b42b56c8b8b&v=4" width="50"><a href="https://github.com/ProBackup-nl">ProBackup-nl</a> commented at <a href="https://github.com/rear/rear/issues/1307#issuecomment-296126754">2017-04-21 08:31</a>:<a class="headerlink" href="#probackup-nl_commented_at_2017-04-21_0831" title="Permanent link">&para;</a></h4>
<p>@jsmeix <code>bc</code> is usually not installed on Arch Linux.</p>
<blockquote>
<p>If not what we could do here?</p>
</blockquote>
<p>Revert back to the <code>awk</code> solution, and try to fix <code>awk</code> for the failing
cases.</p>
<h4 id="jsmeix_commented_at_2017-04-21_1127"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1307#issuecomment-296166558">2017-04-21 11:27</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-04-21_1127" title="Permanent link">&para;</a></h4>
<p>ReaR cannot fix awk (or any tool that is calls).<br />
I would rather "fix Arch Linux" when it comes without 'bc'.<br />
In general regarding ReaR on very minimal systems, see<br />
<a href="https://github.com/rear/rear/issues/755">https://github.com/rear/rear/issues/755</a></p>
<h4 id="schlomo_commented_at_2017-04-21_1326"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/1307#issuecomment-296190007">2017-04-21 13:26</a>:<a class="headerlink" href="#schlomo_commented_at_2017-04-21_1326" title="Permanent link">&para;</a></h4>
<p>👍 for fixing Arch. Doesn't Arch also have some kind of dependency
mechanism which we can use to pull in required software?</p>
<p>Typically <strong>users</strong> will use the package management to install ReaR,
developers should install the dependencies manually.</p>
<p>So, let's add <code>bc</code> to <code>REQUIRED_PROGS</code> and also add it to the package
dependencies.</p>
<h4 id="jsmeix_commented_at_2017-04-21_1446"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1307#issuecomment-296211286">2017-04-21 14:46</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-04-21_1446" title="Permanent link">&para;</a></h4>
<p>Hopefully I find some time during May<br />
to use 'bc' for the calculations in the partitioning code<br />
but no promises...</p>
<p>@gozora<br />
if you like to do it, I would very much appreciate it.</p>
<h4 id="jsmeix_commented_at_2017-04-21_1449"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1307#issuecomment-296212029">2017-04-21 14:49</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-04-21_1449" title="Permanent link">&para;</a></h4>
<p>Only a side note: I think a lot more programs<br />
should be added to REQUIRED_PROGS<br />
cf.
<a href="https://github.com/rear/rear/issues/892">https://github.com/rear/rear/issues/892</a></p>
<h4 id="schlomo_commented_at_2017-04-21_1520"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/1307#issuecomment-296220471">2017-04-21 15:20</a>:<a class="headerlink" href="#schlomo_commented_at_2017-04-21_1520" title="Permanent link">&para;</a></h4>
<p>👍</p>
<p>On 21 April 2017 at 16:49, Johannes Meixner <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;">&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a><br />
wrote:</p>
<blockquote>
<p>Only a side note: I think a lot more programs<br />
should be added to REQUIRED_PROGS<br />
cf. #892
<a href="https://github.com/rear/rear/issues/892">https://github.com/rear/rear/issues/892</a></p>
<p>—<br />
You are receiving this because you commented.<br />
Reply to this email directly, view it on GitHub<br />
<a href="https://github.com/rear/rear/issues/1307#issuecomment-296212029">https://github.com/rear/rear/issues/1307#issuecomment-296212029</a>,
or mute<br />
the thread<br />
<a href="https://github.com/notifications/unsubscribe-auth/AAGMCNtMqtLxuv_ErvFNxiRbTNRawSZSks5ryMHzgaJpZM4M-mss">https://github.com/notifications/unsubscribe-auth/AAGMCNtMqtLxuv_ErvFNxiRbTNRawSZSks5ryMHzgaJpZM4M-mss</a><br />
.</p>
</blockquote>
<h4 id="gozora_commented_at_2017-04-24_0741"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1307#issuecomment-296559914">2017-04-24 07:41</a>:<a class="headerlink" href="#gozora_commented_at_2017-04-24_0741" title="Permanent link">&para;</a></h4>
<p>@jsmeix I certainly can take a look on this.<br />
Just to my understanding, we want to replace ALL calculations through
whole ReaR code, right?</p>
<p>V.</p>
<h4 id="schlomo_commented_at_2017-04-24_0801"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/1307#issuecomment-296565946">2017-04-24 08:01</a>:<a class="headerlink" href="#schlomo_commented_at_2017-04-24_0801" title="Permanent link">&para;</a></h4>
<p>IMHO we should take this in steps and start from cleaning up the
partitioning calculations, after all there we have the current pains.
Maybe here it is worthwhile to render a <code>bc</code> script that does all the
calculations in one go instead of calling <code>bc</code> many times.</p>
<p>I wouldn't go so far as to replace all trivial calculations with <code>bc</code>.</p>
<h4 id="jsmeix_commented_at_2017-04-24_0838"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1307#issuecomment-296578141">2017-04-24 08:38</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-04-24_0838" title="Permanent link">&para;</a></h4>
<p>@gozora<br />
my understanding is that we need to replace<br />
all calculations with possibly big numbers<br />
through whole ReaR code.</p>
<p>But I also fully agree with @schlomo<br />
to do first things first so that as a first step we should<br />
only replace the partitioning calculations and later<br />
when that "just works perfectly fine" we can replace<br />
also other calculations as needed.</p>
<p>Ideally there should be a new generic function calculate()<br />
in global-functions.sh so that we have this one function<br />
where we could fix things if something doesn't work.</p>
<p>Something (not thoroughly tested) like:</p>
<pre>
function calculate()
{   # Use 'bc' for calculations because other tools
    # fail in various unexpected ways for big numbers,
    # e.g. see https://github.com/rear/rear/issues/1307
    echo " result = $@ ; scale=0 ; result / 1 " | bc -l
}
</pre>

<p>According to a very first quick test (on my SLES11 system)<br />
it seems to work for me:</p>
<pre>
# function calculate() { echo " result = $@ ; scale=0 ; result / 1 " | bc -l ; }

# foo=20971520000

# bar=30937186304

# baz=124961546240

# set -x

# res=$( calculate "( $foo / $bar ) * $baz" )
++ calculate '( 20971520000 / 30937186304 ) * 124961546240'
++ echo ' result = ( 20971520000 / 30937186304 ) * 124961546240 ; scale=0 ; result / 1 '
++ bc -l
+ res=84708206507

# { set +x 2>/dev/null ; }

# echo $res
84708206507
</pre>

<h4 id="gozora_commented_at_2017-04-24_0852"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1307#issuecomment-296582969">2017-04-24 08:52</a>:<a class="headerlink" href="#gozora_commented_at_2017-04-24_0852" title="Permanent link">&para;</a></h4>
<p>OK, so for the start I'll implement idea of @jsmeix with <code>calculate</code>
function in <em>100_include_partition_code.sh</em> and
<em>400_autoresize_disks.sh</em> and run couple of tests.<br />
Once it works we can spread it wherever necessary.</p>
<p>V.</p>
<h4 id="schlomo_commented_at_2017-04-24_0910"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/1307#issuecomment-296588735">2017-04-24 09:10</a>:<a class="headerlink" href="#schlomo_commented_at_2017-04-24_0910" title="Permanent link">&para;</a></h4>
<p>BTW, you can use Bash here strings instead of pipes to <a href="https://askubuntu.com/a/229451/146779">speed up
stuff</a>:</p>
<pre><code>$ function calculate() { bc -ql &lt;&lt;&lt;"result=$@ ; scale=0 ; result / 1 "; }
$ foo=20971520000 bar=30937186304 baz=124961546240
$ set -x
$ res=$( calculate "( $foo / $bar ) * $baz" )
++ calculate '( 20971520000 / 30937186304 ) * 124961546240'
++ bc -ql
+ res=84708206507
$ set +x ; echo $res
+ set +x
84708206507
</code></pre>
<p>As this <code>calculate</code> function actually rounds the result we might call it
appropriately <code>calculate_round</code> or so. And we should beware of rounding
issues...</p>
<h4 id="jsmeix_commented_at_2017-04-24_0942"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1307#issuecomment-296596963">2017-04-24 09:42</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-04-24_0942" title="Permanent link">&para;</a></h4>
<p>@schlomo<br />
thanks for the interesting information!</p>
<p>It speeds up - but not much - about 14% on my SLES11 system:</p>
<pre>
# foo=20971520000
# bar=30937186304
# baz=124961546240

# function calculate() { bc -ql <<<"result=$@ ; scale=0 ; result / 1 "; }

# time for i in $( seq 1000 ) ; do res=$( calculate "( $foo / $bar ) * $baz" ) ; done
real    0m4.366s
user    0m0.208s
sys     0m0.372s

# function calculate() { echo " result = $@ ; scale=0 ; result / 1 " | bc -l ; }

# time for i in $( seq 1000 ) ; do res=$( calculate "( $foo / $bar ) * $baz" ) ; done
real    0m5.000s
user    0m0.152s
sys     0m0.408s
</pre>

<h4 id="schlomo_commented_at_2017-04-24_0950"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/1307#issuecomment-296599302">2017-04-24 09:50</a>:<a class="headerlink" href="#schlomo_commented_at_2017-04-24_0950" title="Permanent link">&para;</a></h4>
<p>IMHO 14% is really impressive, didn't think that the pipe was that
expensive.</p>
<h4 id="jsmeix_commented_at_2017-04-24_1024"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1307#issuecomment-296608784">2017-04-24 10:24</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-04-24_1024" title="Permanent link">&para;</a></h4>
<p>Yes, the relative speedup is impressive.<br />
My comment was not clear.<br />
I meant the absolute gain in seconds.<br />
On my old slow 32-bit i386 SLES11 computer<br />
I got less than one second for a thousand calculations<br />
which is less than a millisecond for a single calculation.<br />
With usually about tens of calculations in the partitioning code<br />
the overall gain is not so much.<br />
On the other hand using bash here strings instead of pipes<br />
costs us nothing so we can "just use them".<br />
On big iron with thousands of disks (like IBM System z)<br />
it may actually help.</p>
<h4 id="gozora_commented_at_2017-04-24_1051"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1307#issuecomment-296617835">2017-04-24 10:51</a>:<a class="headerlink" href="#gozora_commented_at_2017-04-24_1051" title="Permanent link">&para;</a></h4>
<p>FYI,<br />
I'll use
<a href="https://github.com/gozora/rear/tree/issue/1307">https://github.com/gozora/rear/tree/issue/1307</a>
while working on this issue ...</p>
<p>V.</p>
<h4 id="jsmeix_commented_at_2017-04-26_1200"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1307#issuecomment-297380661">2017-04-26 12:00</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-04-26_1200" title="Permanent link">&para;</a></h4>
<p>With
<a href="https://github.com/rear/rear/pull/1332">https://github.com/rear/rear/pull/1332</a>
merged<br />
this issue should (hopefully) be solved.</p>
<p>@ProBackup-nl<br />
note that since
<a href="https://github.com/rear/rear/pull/1332">https://github.com/rear/rear/pull/1332</a>
merged<br />
the 'bc' tool is mandatory to use ReaR because now 'bc' is<br />
added to the REQUIRED_PROGS array in default.conf</p>
<h4 id="jsmeix_commented_at_2017-04-26_1437"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1307#issuecomment-297428939">2017-04-26 14:37</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-04-26_1437" title="Permanent link">&para;</a></h4>
<p>An addednum only FYI:</p>
<p>I got an unexpected</p>
<pre>
Partition primary on /dev/sda: size reduced to fit on disk.
</pre>

<p>message plus different partitioning (by one MiB)<br />
for "rear recover" on a disk with exact same size<br />
and swap was not at all migrated.</p>
<p>I think this shows that disk migration mode<br />
is not yet working really well but hopefully<br />
it works somewhat o.k. for now.</p>
<p>Details:</p>
<p>I did "rear mkbackup" on a system (virtual KVM/QEMU machine)<br />
with two exactly 20 GiB disks (/dev/sda and /dev/sdb)<br />
with same partitioning on each one.</p>
<p>Only /dev/sda is mounted but swap is used on /dev/sdb1</p>
<pre>
# parted -s /dev/sda unit B print
Model: ATA QEMU HARDDISK (scsi)
Disk /dev/sda: 21474836480B
Sector size (logical/physical): 512B/512B
Partition Table: msdos
Disk Flags: 
Number  Start        End           Size          Type     File system     Flags
 1      1048576B     1562378239B   1561329664B   primary  linux-swap(v1)  type=82
 2      1562378240B  21474836479B  19912458240B  primary  ext4            boot, type=83

# parted -s /dev/sda unit MiB print
Model: ATA QEMU HARDDISK (scsi)
Disk /dev/sda: 20480MiB
Sector size (logical/physical): 512B/512B
Partition Table: msdos
Disk Flags: 
Number  Start    End       Size      Type     File system     Flags
 1      1.00MiB  1490MiB   1489MiB   primary  linux-swap(v1)  type=82
 2      1490MiB  20480MiB  18990MiB  primary  ext4            boot, type=83

# parted -s /dev/sdb unit B print
Model: ATA QEMU HARDDISK (scsi)
Disk /dev/sdb: 21474836480B
Sector size (logical/physical): 512B/512B
Partition Table: msdos
Disk Flags: 
Number  Start        End           Size          Type     File system     Flags
 1      1048576B     1562378239B   1561329664B   primary  linux-swap(v1)  type=83
 2      1562378240B  21474836479B  19912458240B  primary  ext4            boot, type=83

# mount | grep sd
/dev/sda2 on / type ext4 (rw,relatime,data=ordered)

# cat /proc/swaps
Filename                                Type            Size    Used    Priority
/dev/sdb1                               partition       1524732 1084    -1

# rear -d -D mkbackup
...

# grep -v '^#' var/lib/rear/layout/disklayout.conf
disk /dev/sda 21474836480 msdos
part /dev/sda 1561329664 1048576 primary none /dev/sda1
part /dev/sda 19912458240 1562378240 primary boot /dev/sda2
disk /dev/sdb 21474836480 msdos
part /dev/sdb 1561329664 1048576 primary none /dev/sdb1
part /dev/sdb 19912458240 1562378240 primary boot /dev/sdb2
fs /dev/sda2 / ext4 uuid=46d7e8be-7812-49d1-8d24-e25ed0589e94 label= blocksize=4096 reserved_blocks=5% max_mounts=-1 check_interval=0d bytes_per_inode=16377 default_mount_options=user_xattr,acl options=rw,relatime,data=ordered
swap /dev/sdb1 uuid=28e43119-dac1-4426-a71a-1d70b26d33d7 label=
</pre>

<p>I did "rear recover" on a new system (same kind of virtual machine)<br />
with one exactly 20 GiB disk (/dev/sda)<br />
and got (excerpts):</p>
<pre>
# rear -d -D recover
...
Comparing disks.
Device sdb does not exist.
Switching to manual disk layout configuration.
This is the disk mapping table:
    /dev/sda /dev/sda
Please confirm that '/var/lib/rear/layout/disklayout.conf' is as you expect.

++ select choice in '"${choices[@]}"'
1) View disk layout (disklayout.conf)  3) View original disk space usage      5) Continue recovery
2) Edit disk layout (disklayout.conf)  4) Go to Relax-and-Recover shell       6) Abort Relax-and-Recover
#? 5
++ case "$REPLY" in
++ break
Partition primary on /dev/sda: size reduced to fit on disk.
Please confirm that '/var/lib/rear/layout/diskrestore.sh' is as you expect.

++ select choice in '"${choices[@]}"'
1) View restore script (diskrestore.sh)  3) View original disk space usage        5) Continue recovery
2) Edit restore script (diskrestore.sh)  4) Go to Relax-and-Recover shell         6) Abort Relax-and-Recover
#? 5
++ case "$REPLY" in
++ break
Start system layout restoration.
Creating partitions for disk /dev/sda (msdos)
Creating filesystem of type ext4 with mount point / on /dev/sda2.
Mounting filesystem /
Disk layout created.
Restoring from '/tmp/rear.8JX5LAaL1d7Y3Hn/outputfs/e205/backup.tar.gz'...
...
Restoring finished.
...
Finished recovering your system. You can explore it under '/mnt/local'.
# reboot
</pre>

<p>The recreated system works well<br />
but I got a bit different partitioning (by one MiB)<br />
regardless that the disk has exactly same size:</p>
<pre>
# parted -s /dev/sda unit B print
Model: ATA QEMU HARDDISK (scsi)
Disk /dev/sda: 21474836480B
Sector size (logical/physical): 512B/512B
Partition Table: msdos
Disk Flags: 
Number  Start        End           Size          Type     File system  Flags
 1      2097152B     1563426815B   1561329664B   primary               type=83
 2      1563430912B  21474836479B  19911405568B  primary  ext4         boot, type=83

# parted -s /dev/sda unit MiB print
Model: ATA QEMU HARDDISK (scsi)
Disk /dev/sda: 20480MiB
Sector size (logical/physical): 512B/512B
Partition Table: msdos
Disk Flags: 
Number  Start    End       Size      Type     File system  Flags
 1      2.00MiB  1491MiB   1489MiB   primary               type=83
 2      1491MiB  20480MiB  18989MiB  primary  ext4         boot, type=83

# grep -v '^#' /var/log/rear/recover/layout/disklayout.conf
disk /dev/sda 21474836480 msdos
part /dev/sda 1561329664 1048576 primary none /dev/sda1
part /dev/sda 19912458240 1562378240 primary boot /dev/sda2
fs /dev/sda2 / ext4 uuid=46d7e8be-7812-49d1-8d24-e25ed0589e94 label= blocksize=4096 reserved_blocks=5% max_mounts=-1 check_interval=0d bytes_per_inode=16377 default_mount_options=user_xattr,acl options=rw,relatime,data=ordered

# cat /proc/swaps 
Filename                                Type            Size    Used    Priority
[no further output]
</pre>

<p>This shows that swap was not at all migrated<br />
which is probably a missing enhancement.</p>
<p>But I think it is a bug that there is not any LogPrint message<br />
so that the original swap on /dev/sdb1 seems to have been<br />
silently ignored.</p>
<h4 id="jsmeix_commented_at_2017-05-11_0837"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1307#issuecomment-300722198">2017-05-11 08:37</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-05-11_0837" title="Permanent link">&para;</a></h4>
<p>FYI regarding calculations with non-bc tools like 'awk' cf.<br />
<a href="https://github.com/rear/rear/issues/1269#issuecomment-300719707">https://github.com/rear/rear/issues/1269#issuecomment-300719707</a></p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2024 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2017-04-16.1307.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
