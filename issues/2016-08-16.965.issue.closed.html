<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#965 Issue closed: wickedd-dhcp SLES12 - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#965 Issue closed: wickedd-dhcp SLES12";
        var mkdocs_page_input_path = "issues/2016-08-16.965.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#965 Issue closed: wickedd-dhcp SLES12</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="965_issue_closed_wickedd-dhcp_sles12"><a href="https://github.com/rear/rear/issues/965">#965 Issue</a> <code>closed</code>: wickedd-dhcp SLES12<a class="headerlink" href="#965_issue_closed_wickedd-dhcp_sles12" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>documentation</code>, <code>support / question</code>,
<code>fixed / solved / done</code></p>
<h4 id="gozora_opened_issue_at_2016-08-16_1131"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> opened issue at <a href="https://github.com/rear/rear/issues/965">2016-08-16 11:31</a>:<a class="headerlink" href="#gozora_opened_issue_at_2016-08-16_1131" title="Permanent link">&para;</a></h4>
<h1 id="relax-and-recover_rear_issue_template">Relax-and-Recover (rear) Issue Template<a class="headerlink" href="#relax-and-recover_rear_issue_template" title="Permanent link">&para;</a></h1>
<p>Please fill in the following items before submitting a new issue:</p>
<ul>
<li>rear version (/usr/sbin/rear -V): Relax-and-Recover 1.18 / Git</li>
<li>OS version (cat /etc/rear/os.conf or lsb_release -a): SUSE Linux
    Enterprise Server 12 SP1</li>
<li>rear configuration files (cat /etc/rear/site.conf or cat
    /etc/rear/local.conf):</li>
</ul>
<!-- -->

<pre><code>ONLY_INCLUDE_VG=( "vg00" )

EXCLUDE_BACKUP=( ${EXCLUDE_BACKUP[@]} fs:/crash fs:/usr/sap fs:/oracle )

BACKUP_PROG_EXCLUDE=( ${BACKUP_PROG_EXCLUDE[@]} '/mnt/*' )

ISO_MKISOFS_BIN=/usr/bin/ebiso
BACKUP=NETFS
OUTPUT=ISO

BACKUP_URL=nfs://beta/mnt/rear
OUTPUT_URL=nfs://beta/mnt/rear/iso
EXCLUDE_MD=( $(grep -o -E '^md[0-9]+' /proc/mdstat) ) # exclude all md devices

GRUB_RESCUE=y

COPY_AS_IS=( ${COPY_AS_IS[@]} /sbin/sysctl /etc/sysctl.conf /sbin/vconfig /sbin/if* /etc/sysconfig/network /sbin/shutdown.wrap )
</code></pre>
<ul>
<li>Brief description of the issue dhcp configuration with wicked</li>
<li>Work-around, if any</li>
</ul>
<p>@jsmeix this is more a question for you rather that issue.<br />
You've mentioned to use dhcp for rear testing. In SLES2 SP1 I have
<strong>wicked</strong> running for network management, but rear have hard coded
binaries to look for (wicked is not part of them).<br />
from <em>21_include_dhclient.sh</em>:</p>
<pre><code>for x in "${DHCLIENT_BIN##*/}" \
        "${DHCLIENT6_BIN##*/}" \
        dhcpcd dhclient \
        dhcp6c dhclient6 ;
do
...
</code></pre>
<p>As you can see here even if dhcp is running on SLES12 SP1, it can't work
"out of the box" in rear recover.</p>
<p>Can you please share with me how do you have your environment set ?</p>
<h4 id="gozora_commented_at_2016-08-16_1205"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/965#issuecomment-240082500">2016-08-16 12:05</a>:<a class="headerlink" href="#gozora_commented_at_2016-08-16_1205" title="Permanent link">&para;</a></h4>
<p>It looks like it might appear to work on SLES12 SP1 however IP set is
definitely not assigned by DHCP.</p>
<p>On my system process responsible for DHCP configuration is this one:<br />
<code>/usr/lib/wicked/bin/wickedd-dhcp4 --systemd --foreground</code></p>
<p>following code in <em>21_include_dhclient.sh</em> is responsible to set
whether DHCP will or will not be in use:</p>
<pre><code>   dhcp_interfaces_active() {
   local my_dhclients
   my_dhclients=${dhclients}
   my_dhclients=${dhclients// /|}
   ps -e | grep -qEs "[ /]($my_dhclients)"
   if [ $? -eq 0 ]; then
        # if we find a dhcp client being active we automatically
        # include DHCP CLIENT support in Relax-and-Recover
        Log "Running DHCP client found, enabling USE_DHCLIENT"
        USE_DHCLIENT=y
   fi
</code></pre>
<p>In other words USE_DHCP will be set to 'y' only if one of following
daemons is running on OS: <em>dhcpcd dhclient dhcp6c dhclient6 dhclient
dhcp6c dhclient6</em> this condition is not met (at least) on my SLES12 SP1,
for this reason rear recover will handle network setup as if it would be
a static one.</p>
<p>In order to confirm this, can you please boot your recovery medium an
check if you have lines similar to these in your
<strong>/etc/rear/recover.conf</strong>?</p>
<p>USE_DHCLIENT=y<br />
DHCLIENT_BIN=dhclient</p>
<p>Thx</p>
<p>V.</p>
<h4 id="jsmeix_commented_at_2016-08-16_1259"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/965#issuecomment-240093756">2016-08-16 12:59</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-08-16_1259" title="Permanent link">&para;</a></h4>
<p>@gozora<br />
probably no real surprise: currently I know nothing at all<br />
about SUSE's wicked (and I was grateful for that up to now ;-)<br />
I ask for patience until I got
<a href="https://github.com/rear/rear/issues/963">https://github.com/rear/rear/issues/963</a>
done.</p>
<h4 id="jsmeix_commented_at_2016-08-16_1305"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/965#issuecomment-240095306">2016-08-16 13:05</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-08-16_1305" title="Permanent link">&para;</a></h4>
<p>On my original system (now SLES12-SP2-rc1):</p>
<pre>
USE_DHCLIENT="yes"
</pre>

<p>In the recovery system:</p>
<pre>
RESCUE d245:~ # grep -i dhc /etc/rear/rescue.conf
# The following 3 lines were added through 21_include_dhclient.sh
USE_DHCLIENT=yes
DHCLIENT_BIN=dhclient
DHCLIENT6_BIN=dhclient6
RESCUE d245:~ # 
</pre>

<h4 id="jsmeix_commented_at_2016-08-16_1310"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/965#issuecomment-240096391">2016-08-16 13:10</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-08-16_1310" title="Permanent link">&para;</a></h4>
<p>@gozora<br />
do you know that on the recovery system boot screen<br />
where you select what to boot, you can press the 'tab' key<br />
to get the kernel command line for the currently selected entry<br />
and when you append ' debug' to the kernel command line<br />
the system-setup scripts of the recovery system<br />
are run with 'set -x' and need an 'enter' keypress before<br />
each one starts so that you can more easily debug what<br />
exactly the recovery system-setup scripts do, cf.<br />
skel/default/etc/scripts/system-setup</p>
<h4 id="gozora_commented_at_2016-08-16_1357"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/965#issuecomment-240109718">2016-08-16 13:57</a>:<a class="headerlink" href="#gozora_commented_at_2016-08-16_1357" title="Permanent link">&para;</a></h4>
<blockquote>
<p>I ask for patience until I got #963 done.</p>
</blockquote>
<p>Sure no rush here ...</p>
<p>with <code>USE_DHCLIENT="yes"</code> it works for me fine as well, and brought some
light to understanding this whole setup.</p>
<p>Thanks for that debug hint, it is definitely useful, btw you can use it
same way on UEFI based systems, only difference is that you need to
press 'e' while in grub2 menu ;-)</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2025 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2016-08-16.965.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
