<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#1426 Issue closed: Cannot boot from rear iso uefi - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#1426 Issue closed: Cannot boot from rear iso uefi";
        var mkdocs_page_input_path = "issues/2017-07-20.1426.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#1426 Issue closed: Cannot boot from rear iso uefi</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="1426_issue_closed_cannot_boot_from_rear_iso_uefi"><a href="https://github.com/rear/rear/issues/1426">#1426 Issue</a> <code>closed</code>: Cannot boot from rear iso uefi<a class="headerlink" href="#1426_issue_closed_cannot_boot_from_rear_iso_uefi" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>support / question</code>, <code>fixed / solved / done</code></p>
<h4 id="cocampbe_opened_issue_at_2017-07-20_1354"><img src="https://avatars.githubusercontent.com/u/2211329?u=4cd2be2e33c0e225dd2ffa8fe52fc0015c498af1&v=4" width="50"><a href="https://github.com/cocampbe">cocampbe</a> opened issue at <a href="https://github.com/rear/rear/issues/1426">2017-07-20 13:54</a>:<a class="headerlink" href="#cocampbe_opened_issue_at_2017-07-20_1354" title="Permanent link">&para;</a></h4>
<ul>
<li>rear version (/usr/sbin/rear -V):</li>
</ul>
<p>Relax-and-Recover 1.17.2 / Git</p>
<ul>
<li>OS version (cat /etc/rear/os.conf or lsb_release -a):</li>
</ul>
<p>Oracle Linux Server release 7.3</p>
<ul>
<li>rear configuration files (cat /etc/rear/site.conf or cat
    /etc/rear/local.conf):</li>
</ul>
<p>OUTPUT=ISO<br />
BACKUP=NETFS<br />
BACKUP_URL="nfs://server/rear/"<br />
NETFS_KEEP_OLD_BACKUP_COPY=1<br />
ONLY_INCLUDE_VG=( vg00 )</p>
<ul>
<li>Are you using legacy BIOS or UEFI boot?</li>
</ul>
<p>UEFI</p>
<ul>
<li>Brief description of the issue:</li>
</ul>
<p>We are testing rear recovery on new HP Synergy compute nodes. They are
setup using UEFI. The process to make the recovery is fine. When booting
from the ISO, we get the following output.</p>
<p><strong>Failed to open \EFI\BOOT\grubx64.efi - Not Found<br />
Failed to load image \EFI\BOOT\grubx64.efi: Not Found<br />
start_image() returned Not Found</strong></p>
<p>This makes sense since the iso image does not contain that file. It does
contain BOOTx64.efi. I have not tried a newer version on rear as I want
to stick with the one that comes with the distro. I have oracle support,
so I should be able to take any info and supply it to them. They could
then update the package.</p>
<p>I have noticed that when I run mkbackup with verbosity, I see this in
the output.</p>
<p>Using UEFI Boot Loader for Linux (USING_UEFI_BOOTLOADER=1)</p>
<p>So I can only assume it is not necessary in the local.conf file.</p>
<ul>
<li>Work-around, if any:</li>
</ul>
<h4 id="cocampbe_commented_at_2017-07-20_1543"><img src="https://avatars.githubusercontent.com/u/2211329?u=4cd2be2e33c0e225dd2ffa8fe52fc0015c498af1&v=4" width="50"><a href="https://github.com/cocampbe">cocampbe</a> commented at <a href="https://github.com/rear/rear/issues/1426#issuecomment-316744516">2017-07-20 15:43</a>:<a class="headerlink" href="#cocampbe_commented_at_2017-07-20_1543" title="Permanent link">&para;</a></h4>
<p>Adding log</p>
<h4 id="cocampbe_commented_at_2017-07-20_1544"><img src="https://avatars.githubusercontent.com/u/2211329?u=4cd2be2e33c0e225dd2ffa8fe52fc0015c498af1&v=4" width="50"><a href="https://github.com/cocampbe">cocampbe</a> commented at <a href="https://github.com/rear/rear/issues/1426#issuecomment-316744741">2017-07-20 15:44</a>:<a class="headerlink" href="#cocampbe_commented_at_2017-07-20_1544" title="Permanent link">&para;</a></h4>
<p><a href="https://github.com/rear/rear/files/1162864/rear-host.zip">rear-host.zip</a></p>
<h4 id="gozora_commented_at_2017-07-20_1633"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1426#issuecomment-316759473">2017-07-20 16:33</a>:<a class="headerlink" href="#gozora_commented_at_2017-07-20_1633" title="Permanent link">&para;</a></h4>
<p>Hello @cocampbe,</p>
<p>There have been lots of changes in ReaRs UEFI code since 1.17.2 so I
don't even dare to guess what can be wrong in your case.<br />
My best advice to you would be to update to version 2.1 or if you are
using secure boot to HEAD of ReaRs master branch.</p>
<p>V.</p>
<h4 id="cocampbe_commented_at_2017-07-20_1639"><img src="https://avatars.githubusercontent.com/u/2211329?u=4cd2be2e33c0e225dd2ffa8fe52fc0015c498af1&v=4" width="50"><a href="https://github.com/cocampbe">cocampbe</a> commented at <a href="https://github.com/rear/rear/issues/1426#issuecomment-316761327">2017-07-20 16:39</a>:<a class="headerlink" href="#cocampbe_commented_at_2017-07-20_1639" title="Permanent link">&para;</a></h4>
<p>@gozora</p>
<p>I was going to try that, but since I have oracle support, I figured I
would stay with the version they supply with the distro. I will open a
case with them. It was worth a shot.</p>
<h4 id="gozora_commented_at_2017-07-20_1641"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1426#issuecomment-316762008">2017-07-20 16:41</a>:<a class="headerlink" href="#gozora_commented_at_2017-07-20_1641" title="Permanent link">&para;</a></h4>
<p>Maybe something that might help you.<br />
When booting, try to escape to EFI shell, cd to directory EFI/BOOT on
your ISO and launch BOOTX64.efi manually.</p>
<p>V.</p>
<h4 id="cocampbe_commented_at_2017-07-20_1655"><img src="https://avatars.githubusercontent.com/u/2211329?u=4cd2be2e33c0e225dd2ffa8fe52fc0015c498af1&v=4" width="50"><a href="https://github.com/cocampbe">cocampbe</a> commented at <a href="https://github.com/rear/rear/issues/1426#issuecomment-316765610">2017-07-20 16:55</a>:<a class="headerlink" href="#cocampbe_commented_at_2017-07-20_1655" title="Permanent link">&para;</a></h4>
<p>@gozora</p>
<p>I did try that. It prodices this output when executed:</p>
<p><strong>Failed to open \EFI\BOOT\grubx64.efi - Not Found<br />
Failed to load image \EFI\BOOT\grubx64.efi: Not Found<br />
start_image() returned Not Found</strong></p>
<p>I am not very familiar with UEFI from this perspective. I ran the
mkresuce with debugging. I noticed that shim.efi was copied to
BOOTX64.efi. That seemed strange to me, but when you don't know what
your looking for it's all pretty strange. ;)</p>
<h4 id="cocampbe_commented_at_2017-07-20_1704"><img src="https://avatars.githubusercontent.com/u/2211329?u=4cd2be2e33c0e225dd2ffa8fe52fc0015c498af1&v=4" width="50"><a href="https://github.com/cocampbe">cocampbe</a> commented at <a href="https://github.com/rear/rear/issues/1426#issuecomment-316768113">2017-07-20 17:04</a>:<a class="headerlink" href="#cocampbe_commented_at_2017-07-20_1704" title="Permanent link">&para;</a></h4>
<p>@gozora</p>
<p>I am going to go ahead and try the latest rear. There are a few things
that do not seem correct. I noticed that the grub.cfg that is generated
is not using linuxefi, nor initrdefi. That does not look correct.</p>
<h4 id="cocampbe_commented_at_2017-07-20_1724"><img src="https://avatars.githubusercontent.com/u/2211329?u=4cd2be2e33c0e225dd2ffa8fe52fc0015c498af1&v=4" width="50"><a href="https://github.com/cocampbe">cocampbe</a> commented at <a href="https://github.com/rear/rear/issues/1426#issuecomment-316773534">2017-07-20 17:24</a>:<a class="headerlink" href="#cocampbe_commented_at_2017-07-20_1724" title="Permanent link">&para;</a></h4>
<p>I just made a build of the latest git. It failed creating the backup.
Which is fine at this point. I did notice that the verbosity is much
better in the latest release. I was able to see the efi file that was
going to be copied, and it wasn't the shim.efi. I beleive the correct
file is /boot/efi/EFI/redhat/grubx64.efi. I am going to edit the file
/usr/share/rear/output/ISO/Linux-i386/25_populate_efibootimg.sh and
see what happens now.</p>
<p>If you don't mind, I would like to use this issue to keep track of my
progress. Maybe it will help someone else. If not, please let me know. I
will close the issue and track it under my repo.</p>
<h4 id="gozora_commented_at_2017-07-20_1734"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1426#issuecomment-316775960">2017-07-20 17:34</a>:<a class="headerlink" href="#gozora_commented_at_2017-07-20_1734" title="Permanent link">&para;</a></h4>
<p>@carragom take a look on
<a href="https://raw.githubusercontent.com/rear/rear/master/usr/share/rear/conf/default.conf">defaul.conf</a>
and search for UEFI_BOOTLOADER. If you set this variable to whatever
*.efi booloader you are using, it should disable guess work ReaR is
doing to find right files to copy.</p>
<p>V</p>
<h4 id="cocampbe_commented_at_2017-07-20_1815"><img src="https://avatars.githubusercontent.com/u/2211329?u=4cd2be2e33c0e225dd2ffa8fe52fc0015c498af1&v=4" width="50"><a href="https://github.com/cocampbe">cocampbe</a> commented at <a href="https://github.com/rear/rear/issues/1426#issuecomment-316787156">2017-07-20 18:15</a>:<a class="headerlink" href="#cocampbe_commented_at_2017-07-20_1815" title="Permanent link">&para;</a></h4>
<p>Ah, that makes sense. I will do that. Thanks.</p>
<h4 id="cocampbe_commented_at_2017-07-20_1855"><img src="https://avatars.githubusercontent.com/u/2211329?u=4cd2be2e33c0e225dd2ffa8fe52fc0015c498af1&v=4" width="50"><a href="https://github.com/cocampbe">cocampbe</a> commented at <a href="https://github.com/rear/rear/issues/1426#issuecomment-316797466">2017-07-20 18:55</a>:<a class="headerlink" href="#cocampbe_commented_at_2017-07-20_1855" title="Permanent link">&para;</a></h4>
<p>@gozora</p>
<p>That resolved my issue. Now I just don't understand the menu entries for
"secure boot" vs "no secure boot". The "secure boot" entry uses linuxefi
and initrdefi, but the "no secure boot entry" uses just linux and
initrd. I don't think that matters, why should both be using the *efi
commands.</p>
<p>Thanks for your assistance.</p>
<h4 id="gozora_commented_at_2017-07-20_2005"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1426#issuecomment-316814825">2017-07-20 20:05</a>:<a class="headerlink" href="#gozora_commented_at_2017-07-20_2005" title="Permanent link">&para;</a></h4>
<p>That menu entries exists for compatibily reasons.<br />
You would not believe how variable can UEFI boot be.<br />
To put it simple, if one of the entries doesnt work you can try anther
one ;-).</p>
<p>V.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2024 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2017-07-20.1426.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
