<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#1998 Issue closed: SLE15 on ppcl: mkfs.xfs fails if sunit &gt; 0 but swidth = 0 - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#1998 Issue closed: SLE15 on ppcl: mkfs.xfs fails if sunit \u0026gt; 0 but swidth = 0";
        var mkdocs_page_input_path = "issues/2018-12-06.1998.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_nas.html">Internal Backup with tar to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/rbme.html">External Backup using RBME</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/restic.html">External Backup using restic</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../development/squash-git-log-commments.html">How to squash git log comments into one line</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#1998 Issue closed: SLE15 on ppcl: mkfs.xfs fails if sunit &gt; 0 but swidth = 0</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="1998_issue_closed_sle15_on_ppcl_mkfsxfs_fails_if_sunit_0_but_swidth_0"><a href="https://github.com/rear/rear/issues/1998">#1998 Issue</a> <code>closed</code>: SLE15 on ppcl: mkfs.xfs fails if sunit &gt; 0 but swidth = 0<a class="headerlink" href="#1998_issue_closed_sle15_on_ppcl_mkfsxfs_fails_if_sunit_0_but_swidth_0" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>support / question</code>, <code>fixed / solved / done</code>,
<code>not ReaR / invalid</code></p>
<h4 id="abbbi_opened_issue_at_2018-12-06_1334"><img src="https://avatars.githubusercontent.com/u/3919561?u=473291dd3dbd58fd0af45714935992a3d416aa6e&v=4" width="50"><a href="https://github.com/abbbi">abbbi</a> opened issue at <a href="https://github.com/rear/rear/issues/1998">2018-12-06 13:34</a>:<a class="headerlink" href="#abbbi_opened_issue_at_2018-12-06_1334" title="Permanent link">&para;</a></h4>
<h4 id="relax-and-recover_rear_issue_template">Relax-and-Recover (ReaR) Issue Template<a class="headerlink" href="#relax-and-recover_rear_issue_template" title="Permanent link">&para;</a></h4>
<p>Fill in the following items before submitting a new issue<br />
(quick response is not guaranteed with free support):</p>
<ul>
<li>ReaR version ("/usr/sbin/rear -V"):</li>
</ul>
<p>2.4</p>
<ul>
<li>OS version ("cat /etc/rear/os.conf" or "lsb_release -a" or "cat
    /etc/os-release"):</li>
</ul>
<p>SLES15 on PPC</p>
<p>Recover works until system tries to create filesystem via MKFS, errors
out with:</p>
<pre><code>++++ date '+%Y-%m-%d %H:%M:%S.%N '
+++ local 'timestamp=2018-12-06 13:28:11.711452462 '
+++ test 1 -gt 0
+++ echo '2018-12-06 13:28:11.711452462 Creating filesystem of type xfs with mount point / on /dev/mapper/system-root.'
2018-12-06 13:28:11.711452462 Creating filesystem of type xfs with mount point / on /dev/mapper/system-root.
+++ Print 'Creating filesystem of type xfs with mount point / on /dev/mapper/system-root.'
+++ test 1
+++ echo -e 'Creating filesystem of type xfs with mount point / on /dev/mapper/system-root.'
+++ wipefs --all --force /dev/mapper/system-root
+++ mkfs.xfs -f -m uuid=dd0e1c7d-e0ff-46f3-bd58-76abfc46b284 -i size=512 -d agcount=16 -s size=512 -i attr=2 -i projid32bit=1 -m crc=1 -m finobt=1 -b size=4096 -i maxpct=25 -d sunit=64 -d swidth=0 -l version=2 -l lazy-count=1 -n size=4096 -n version=2 -r extsize=4096 /dev/mapper/system-root
data stripe width (0) must be a multiple of the data stripe unit (64)
Usage: mkfs.xfs
/* blocksize */         [-b size=num]
/* metadata */          [-m crc=0|1,finobt=0|1,uuid=xxx,rmapbt=0|1,reflink=0|1]
/* data subvol */       [-d agcount=n,agsize=n,file,name=xxx,size=num,
                            (sunit=value,swidth=value|su=num,sw=num|noalign),
                            sectsize=num
/* force overwrite */   [-f]
/* inode size */        [-i log=n|perblock=n|size=num,maxpct=n,attr=0|1|2,
                            projid32bit=0|1,sparse=0|1]
/* no discard */        [-K]
/* log subvol */        [-l agnum=n,internal,size=num,logdev=xxx,version=n
                            sunit=value|su=num,sectsize=num,lazy-count=0|1]
/* label */             [-L label (maximum 12 characters)]
/* naming */            [-n size=num,version=2|ci,ftype=0|1]
/* no-op info only */   [-N]
/* prototype file */    [-p fname]
/* quiet */             [-q]
/* realtime subvol */   [-r extsize=num,size=num,rtdev=xxx]
/* sectorsize */        [-s size=num]
/* version */           [-V]
                        devicename
&lt;devicename&gt; is required unless -d name=xxx is given.
&lt;num&gt; is xxx (bytes), xxxs (sectors), xxxb (fs blocks), xxxk (xxx KiB),
</code></pre>
<h4 id="gozora_commented_at_2018-12-06_1340"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1998#issuecomment-444873906">2018-12-06 13:40</a>:<a class="headerlink" href="#gozora_commented_at_2018-12-06_1340" title="Permanent link">&para;</a></h4>
<p>Hello @abbbi,</p>
<p>Do you know if this system was upgraded from older (SLES12, SLES11) or
clean installed ?<br />
Can you provide content of /var/lib/rear/layout/xfs ?</p>
<p>Thanks</p>
<p>V.</p>
<h4 id="abbbi_commented_at_2018-12-06_1346"><img src="https://avatars.githubusercontent.com/u/3919561?u=473291dd3dbd58fd0af45714935992a3d416aa6e&v=4" width="50"><a href="https://github.com/abbbi">abbbi</a> commented at <a href="https://github.com/rear/rear/issues/1998#issuecomment-444875501">2018-12-06 13:46</a>:<a class="headerlink" href="#abbbi_commented_at_2018-12-06_1346" title="Permanent link">&para;</a></h4>
<p>problem is that swidth is set to 0:</p>
<p>-d sunit=64 -d swidth=0</p>
<p>data stripe width (0) must be a multiple of the data stripe unit (64)</p>
<p>working around by setting -d swidth=64 in diskrestore.sh</p>
<p>System was freshly installed from scratch.</p>
<h4 id="gozora_commented_at_2018-12-06_1349"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1998#issuecomment-444876389">2018-12-06 13:49</a>:<a class="headerlink" href="#gozora_commented_at_2018-12-06_1349" title="Permanent link">&para;</a></h4>
<p>what about <em>/var/lib/rear/layout/xfs</em>, can you provide it ?</p>
<p>V.</p>
<h4 id="abbbi_commented_at_2018-12-06_1354"><img src="https://avatars.githubusercontent.com/u/3919561?u=473291dd3dbd58fd0af45714935992a3d416aa6e&v=4" width="50"><a href="https://github.com/abbbi">abbbi</a> commented at <a href="https://github.com/rear/rear/issues/1998#issuecomment-444878059">2018-12-06 13:54</a>:<a class="headerlink" href="#abbbi_commented_at_2018-12-06_1354" title="Permanent link">&para;</a></h4>
<pre><code>rear&gt; more system-root.xfs
meta-data=/dev/mapper/system-root isize=512    agcount=16, agsize=589824 blks
         =                       sectsz=512   attr=2, projid32bit=1
         =                       crc=1        finobt=1 spinodes=0 rmapbt=0
         =                       reflink=0
data     =                       bsize=4096   blocks=9437184, imaxpct=25
         =                       sunit=8      swidth=0 blks
naming   =version 2              bsize=4096   ascii-ci=0 ftype=1
log      =internal               bsize=4096   blocks=4608, version=2
         =                       sectsz=512   sunit=0 blks, lazy-count=1
realtime =none                   extsz=4096   blocks=0, rtextents=0
</code></pre>
<h4 id="gozora_commented_at_2018-12-06_1359"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1998#issuecomment-444879411">2018-12-06 13:59</a>:<a class="headerlink" href="#gozora_commented_at_2018-12-06_1359" title="Permanent link">&para;</a></h4>
<p>Thanks,<br />
I'll try to reproduce this problem, maybe I've forgotten about yet
another XFS special case in
<a href="https://github.com/rear/rear/blob/master/usr/share/rear/lib/filesystems-functions.sh#L37">filesystems-functions.sh</a></p>
<p>V.</p>
<h4 id="abbbi_commented_at_2018-12-06_1405"><img src="https://avatars.githubusercontent.com/u/3919561?u=473291dd3dbd58fd0af45714935992a3d416aa6e&v=4" width="50"><a href="https://github.com/abbbi">abbbi</a> commented at <a href="https://github.com/rear/rear/issues/1998#issuecomment-444881186">2018-12-06 14:05</a>:<a class="headerlink" href="#abbbi_commented_at_2018-12-06_1405" title="Permanent link">&para;</a></h4>
<p>Another interesting thing is that it also trys to mount with mount
option -o sunit=64, so one has to remove this from the mount command
line in diskrestore.sh aswell. I endet up removing the -d sunit=64 -d
swidth=0 options from the mkfs.xfs command and the mount option and was
able to recover the system then.</p>
<h4 id="gozora_commented_at_2018-12-06_1415"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1998#issuecomment-444884401">2018-12-06 14:15</a>:<a class="headerlink" href="#gozora_commented_at_2018-12-06_1415" title="Permanent link">&para;</a></h4>
<p>Honestly I don't remember how all this XFS magic work, I'll need to take
a closer look, later today ...</p>
<p>V.</p>
<h4 id="gozora_commented_at_2018-12-06_1416"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1998#issuecomment-444884679">2018-12-06 14:16</a>:<a class="headerlink" href="#gozora_commented_at_2018-12-06_1416" title="Permanent link">&para;</a></h4>
<p>Anyhow, if you could upload log created by <code>rear -d -D recover</code> it would
help ...</p>
<p>V.</p>
<h4 id="abbbi_commented_at_2018-12-06_1428"><img src="https://avatars.githubusercontent.com/u/3919561?u=473291dd3dbd58fd0af45714935992a3d416aa6e&v=4" width="50"><a href="https://github.com/abbbi">abbbi</a> commented at <a href="https://github.com/rear/rear/issues/1998#issuecomment-444888750">2018-12-06 14:28</a>:<a class="headerlink" href="#abbbi_commented_at_2018-12-06_1428" title="Permanent link">&para;</a></h4>
<p>Unfortunately it was a customer system which im not remote anymore. I
tried to reproduce on a SLES15 system in house on PPC, and it seems the
sunit=8 setting on the other system is already an difference. My XFS
filesystem (created by the standard sles15 installation) looks like:</p>
<pre><code>meta-data=/dev/sda3              isize=512    agcount=4, agsize=404544 blks
         =                       sectsz=512   attr=2, projid32bit=1
         =                       crc=1        finobt=1 spinodes=0 rmapbt=0
         =                       reflink=0
data     =                       bsize=4096   blocks=1618176, imaxpct=25
         =                       sunit=0      swidth=0 blks
naming   =version 2              bsize=4096   ascii-ci=0 ftype=1
log      =internal               bsize=4096   blocks=2560, version=2
         =                       sectsz=512   sunit=0 blks, lazy-count=1
realtime =none                   extsz=4096   blocks=0, rtextents=0
</code></pre>
<p>Probably thats some SAP related filesystem options.</p>
<h4 id="abbbi_commented_at_2018-12-06_1432"><img src="https://avatars.githubusercontent.com/u/3919561?u=473291dd3dbd58fd0af45714935992a3d416aa6e&v=4" width="50"><a href="https://github.com/abbbi">abbbi</a> commented at <a href="https://github.com/rear/rear/issues/1998#issuecomment-444890137">2018-12-06 14:32</a>:<a class="headerlink" href="#abbbi_commented_at_2018-12-06_1432" title="Permanent link">&para;</a></h4>
<p>These options are probably auto detected by mkfs during filesystem
creation. As the system uses Multipath SAN disks only, i think the xfs
tools might suspect other options than on a regular filesystem:</p>
<p><a href="http://xfs.org/index.php/XFS_FAQ#Q:_How_to_calculate_the_correct_sunit.2Cswidth_values_for_optimal_performance">http://xfs.org/index.php/XFS_FAQ#Q:_How_to_calculate_the_correct_sunit.2Cswidth_values_for_optimal_performance</a></p>
<p>honestly its the first time i see these options used too :)</p>
<h4 id="gozora_commented_at_2018-12-06_1435"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1998#issuecomment-444890973">2018-12-06 14:35</a>:<a class="headerlink" href="#gozora_commented_at_2018-12-06_1435" title="Permanent link">&para;</a></h4>
<p>Never mind.<br />
It looks like XFS introduced some new features,.. Happens quite a lot.</p>
<p>Can you tell me what version of XFS is used on SLE15 ? ( I'm
unfortunately still missing such VM in my collection.)</p>
<p>V.</p>
<h4 id="abbbi_commented_at_2018-12-06_1436"><img src="https://avatars.githubusercontent.com/u/3919561?u=473291dd3dbd58fd0af45714935992a3d416aa6e&v=4" width="50"><a href="https://github.com/abbbi">abbbi</a> commented at <a href="https://github.com/rear/rear/issues/1998#issuecomment-444891591">2018-12-06 14:36</a>:<a class="headerlink" href="#abbbi_commented_at_2018-12-06_1436" title="Permanent link">&para;</a></h4>
<p>its</p>
<blockquote>
<p>mkfs.xfs version 4.15.0</p>
</blockquote>
<p>but as i can see the filesystem sh already has some logic caring about
stuff like this:</p>
<p><a href="https://github.com/rear/rear/blob/master/usr/share/rear/lib/filesystems-functions.sh#L205">https://github.com/rear/rear/blob/master/usr/share/rear/lib/filesystems-functions.sh#L205</a></p>
<h4 id="gozora_commented_at_2018-12-06_1438"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1998#issuecomment-444891967">2018-12-06 14:38</a>:<a class="headerlink" href="#gozora_commented_at_2018-12-06_1438" title="Permanent link">&para;</a></h4>
<blockquote>
<p>but as i can see the filesystem sh already has some logic caring about
stuff like this:</p>
</blockquote>
<p>Yes, that is my humble work ;-)</p>
<p>V.</p>
<h4 id="jsmeix_commented_at_2018-12-06_1451"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1998#issuecomment-444896544">2018-12-06 14:51</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-12-06_1451" title="Permanent link">&para;</a></h4>
<p>FYI:<br />
On a simple SLES15 system (I use a KVM/QEMU virtual machine)<br />
with a XFS root partition (no LVM) as the SLES15 YaST installer creates
it<br />
when I only switch in YaST from btrfs to XFS as filesystem<br />
"rear recover" just works for me.</p>
<p>My disklayout.conf:</p>
<pre><code># Disk /dev/sda
# Format: disk &lt;devname&gt; &lt;size(bytes)&gt; &lt;partition label type&gt;
disk /dev/sda 21474836480 gpt
# Partitions on /dev/sda
# Format: part &lt;device&gt; &lt;partition size(bytes)&gt; &lt;partition start(bytes)&gt; &lt;partition type|name&gt; &lt;flags&gt; /dev/&lt;partition&gt;
part /dev/sda 8388608 1048576 rear-noname bios_grub /dev/sda1
part /dev/sda 19316867072 9437184 rear-noname legacy_boot /dev/sda2
part /dev/sda 2148515328 19326304256 rear-noname swap /dev/sda3
# Filesystems (only ext2,ext3,ext4,vfat,xfs,reiserfs,btrfs are supported).
# Format: fs &lt;device&gt; &lt;mountpoint&gt; &lt;fstype&gt; [uuid=&lt;uuid&gt;] [label=&lt;label&gt;] [&lt;attributes&gt;]
fs /dev/sda2 / xfs uuid=877d5ff9-eee3-4fe4-a1c5-90ca58f02b5c label=  options=rw,relatime,attr2,inode64,noquota
# Swap partitions or swap files
# Format: swap &lt;filename&gt; uuid=&lt;uuid&gt; label=&lt;label&gt;
swap /dev/sda3 uuid=729a6343-f595-498b-ade6-27e6d16297a4 label=
</code></pre>
<p>My sda2.xfs</p>
<pre><code>meta-data=/dev/sda2              isize=512    agcount=4, agsize=1179008 blks
         =                       sectsz=512   attr=2, projid32bit=1
         =                       crc=1        finobt=1 spinodes=0 rmapbt=0
         =                       reflink=0
data     =                       bsize=4096   blocks=4716032, imaxpct=25
         =                       sunit=0      swidth=0 blks
naming   =version 2              bsize=4096   ascii-ci=0 ftype=1
log      =internal               bsize=4096   blocks=2560, version=2
         =                       sectsz=512   sunit=0 blks, lazy-count=1
realtime =none                   extsz=4096   blocks=0, rtextents=0
</code></pre>
<h4 id="jsmeix_commented_at_2018-12-06_1522"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1998#issuecomment-444908375">2018-12-06 15:22</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-12-06_1522" title="Permanent link">&para;</a></h4>
<p>@abbbi<br />
is that system really a plain usual "SLES15 on PPC" i.e.<br />
"SUSE Linux Enterprise Server 15" on PPC or is it perhaps<br />
"SUSE Linux Enterprise Server for SAP Applications 15 GA",<br />
e.g. see<br />
<a href="https://www.suse.com/documentation/sles-for-sap-15/">https://www.suse.com/documentation/sles-for-sap-15/</a></p>
<p>I ask because what the YaST installer creates can be different<br />
depending on the exact product so that e.g. the YaST installer<br />
on "SUSE Linux Enterprise Server for SAP Applications 15 GA"<br />
might create a XFS with some subtle special differences<br />
compared to plain usual "SUSE Linux Enterprise Server 15".</p>
<p>Or was that particular XFS perhaps specifically set up<br />
by your customer with those special XFS option settings?</p>
<h4 id="abbbi_commented_at_2018-12-06_1528"><img src="https://avatars.githubusercontent.com/u/3919561?u=473291dd3dbd58fd0af45714935992a3d416aa6e&v=4" width="50"><a href="https://github.com/abbbi">abbbi</a> commented at <a href="https://github.com/rear/rear/issues/1998#issuecomment-444910654">2018-12-06 15:28</a>:<a class="headerlink" href="#abbbi_commented_at_2018-12-06_1528" title="Permanent link">&para;</a></h4>
<p>Cant say for sure at the moment. It was running SAP HANA so i think
chances are high its the SAP4HANA Release. All i have left at the moment
ist the os.conf from REAR from the rear backup log:</p>
<pre><code>&gt; 2018-12-06 11:05:35.336033347 Entering debugscripts mode via 'set -x'.
&gt; + source /etc/rear/os.conf
&gt; ++ OS_VENDOR=SUSE_LINUX
&gt; ++ OS_VERSION=15
&gt; ++ ARCH=Linux-ppc64le
&gt; ++ OS=GNU/Linux
&gt; ++ OS_VERSION=15
&gt; ++ OS_VENDOR=SUSE_LINUX
&gt; ++ OS_VENDOR_VERSION=SUSE_LINUX/15
&gt; ++ OS_VENDOR_ARCH=SUSE_LINUX/ppc64le
&gt;
</code></pre>
<h4 id="gozora_commented_at_2018-12-06_1708"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1998#issuecomment-444950437">2018-12-06 17:08</a>:<a class="headerlink" href="#gozora_commented_at_2018-12-06_1708" title="Permanent link">&para;</a></h4>
<p>ReaR XFS code must work regardless of Linux distribution.<br />
I guess that some new features/rules emerged that must be included into
ReaR, XFS guys are quite progressive when it comes to implementing new
stuff.<br />
I'm currently installing SLE15 and will suspend my work on EFISTUB for a
while and try to look on this issue in upcoming days, hope it will not
be too much work :-).</p>
<p>V.</p>
<h4 id="abbbi_commented_at_2018-12-06_1929"><img src="https://avatars.githubusercontent.com/u/3919561?u=473291dd3dbd58fd0af45714935992a3d416aa6e&v=4" width="50"><a href="https://github.com/abbbi">abbbi</a> commented at <a href="https://github.com/rear/rear/issues/1998#issuecomment-444999308">2018-12-06 19:29</a>:<a class="headerlink" href="#abbbi_commented_at_2018-12-06_1929" title="Permanent link">&para;</a></h4>
<p>Im not sure you will hit this problem with a regular SLE15 installation.
I have various SLES15 systems around that do not have an XFS formatted
with -d sunit=8 -d swidth=0.</p>
<p>I even cannot format an volume using these options to be able to get an
xfs_info output that causes the problem:</p>
<p>sles15ppcl:~ # mkfs.xfs -d sunit=8 -d swidth=0 ./myfile<br />
data stripe width (0) must be a multiple of the data stripe unit (64)<br />
[..]</p>
<p>im not quite sure how it was even possible to format it in that way.</p>
<p>One thing i could imagine is that the volume was created too small and
then has been resized with xfs_growfs so that the width information
output by xfs_info doesnt match anymore. Or that the multipath
configuration does something strange resulting in an xfs_info output
not making sense.</p>
<h4 id="gozora_commented_at_2018-12-06_1942"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1998#issuecomment-445003796">2018-12-06 19:42</a>:<a class="headerlink" href="#gozora_commented_at_2018-12-06_1942" title="Permanent link">&para;</a></h4>
<blockquote>
<p>im not quite sure how it was even possible to format it in that way.</p>
</blockquote>
<p>:-) I'm exactly at the same spot right now... Can't create filesystem
where <code>sunit &gt; 0 and swidth == 0</code></p>
<blockquote>
<p>One think i could imagine is that the volume was created too small and
then has been resized with xfs_growfs so that the width information
output by xfs_info doesnt match anymore.</p>
</blockquote>
<p>I'm afraid that this is not possible either, because if you specify
sunit &gt; 0 you must specify swidth as well and swidth must be multiple
of sunit (and can't be 0)<br />
This is why I was initially asking whether system was upgraded :-),
because there is a chance that older version of xfs-util was used for
formatting (which in theory could allow such combination)</p>
<p>V.</p>
<h4 id="abbbi_commented_at_2018-12-06_2119"><img src="https://avatars.githubusercontent.com/u/3919561?u=473291dd3dbd58fd0af45714935992a3d416aa6e&v=4" width="50"><a href="https://github.com/abbbi">abbbi</a> commented at <a href="https://github.com/rear/rear/issues/1998#issuecomment-445033150">2018-12-06 21:19</a>:<a class="headerlink" href="#abbbi_commented_at_2018-12-06_2119" title="Permanent link">&para;</a></h4>
<p>Not sure about the upgrade, looking at the xfsprogs source this check
has been around since 2002.<br />
But the git logs also show some things about misaligment from certain
hardware devices that result in width values not beeing right. At least
its smelling like this (Power, multipath, SAN ..)</p>
<p>One recent commit from xfsprogs:</p>
<pre><code>commit 99a3f52e337d9c785315e64a599755bc6f7b2118
Author: Jeff Mahoney &lt;jeffm@suse.com&gt;
Date:   Wed Aug 1 17:06:45 2018 -0500

    mkfs: avoid divide-by-zero when hardware reports optimal i/o size as 0

    Commit 051b4e37f5e (mkfs: factor AG alignment) factored out the
    AG alignment code into a separate function.  It got rid of
    redundant checks for dswidth != 0 since calc_stripe_factors was
    supposed to guarantee that if dsunit is non-zero dswidth will be
    as well.  Unfortunately, there's hardware out there that reports its
    optimal i/o size as larger than the maximum i/o size, which the kernel
    treats as broken and zeros out the optimal i/o size.
</code></pre>
<p>not sure we hit an issue in xfs here.<br />
It seems the version shipped in sles15 still have this issue, as it was
introduced in 2017 and fixed in 2018. Not sure if Suse have backported
this fix. Its too late to stare at more git logs now :)</p>
<p>I have asked at #xfs in freenode, lets see if i get response.</p>
<h4 id="abbbi_commented_at_2018-12-06_2158"><img src="https://avatars.githubusercontent.com/u/3919561?u=473291dd3dbd58fd0af45714935992a3d416aa6e&v=4" width="50"><a href="https://github.com/abbbi">abbbi</a> commented at <a href="https://github.com/rear/rear/issues/1998#issuecomment-445045009">2018-12-06 21:58</a>:<a class="headerlink" href="#abbbi_commented_at_2018-12-06_2158" title="Permanent link">&para;</a></h4>
<p>response from #xfs</p>
<pre><code>22:53 &lt;dchinner_&gt; the problem described in that commit was that mkfs crashed because devide by zero, not that it made a filesystem with swidth = 0
22:54 &lt;dchinner_&gt; before that, mkfs would ignore invalid stripe configs where dswidth was zero
22:55 &lt;abi`&gt; hm, okey. I still cant imagine how one is able to format with sunit=8,swidth=0.. so i guess it was some auto-detection thing that went wrong.
22:55 &lt;dchinner_&gt; I doubt we'll ever know what caused swidth=0 to be considered valid
22:56 &lt;dchinner_&gt; it's a CRC enabled fs, so it had to be an XFS tool that set it that way
22:56 &lt;dchinner_&gt; I can create the situation manually by editting the superblock with xfs_db
22:57 &lt;dchinner_&gt; but I cannot make any of the tools or mount options cause it
22:59 &lt;dchinner_&gt; and, well, I can't mount a filesystem with that config, either
22:59 &lt;dchinner_&gt; the superblock verifier fires and detects an invalid stripe unit config
23:00 &lt;dchinner_&gt; one the first read during mount
23:00 &lt;dchinner_&gt; what kernel does SLES15 run?
23:01 &lt;abi`&gt; 4.12.14-23-default
23:02 &lt;dchinner_&gt; yeah, Ok, I added the superblock stripe config verification in 4.18
23:17 &lt;sandeen&gt; dchinner_, abi` there was also 14c57d50 mkfs.xfs: if either sunit or swidth is nonzero, the other must be as well
</code></pre>
<h4 id="abbbi_commented_at_2018-12-06_2217"><img src="https://avatars.githubusercontent.com/u/3919561?u=473291dd3dbd58fd0af45714935992a3d416aa6e&v=4" width="50"><a href="https://github.com/abbbi">abbbi</a> commented at <a href="https://github.com/rear/rear/issues/1998#issuecomment-445050107">2018-12-06 22:17</a>:<a class="headerlink" href="#abbbi_commented_at_2018-12-06_2217" title="Permanent link">&para;</a></h4>
<p>here is how to reproduce this situation. The filesystem is only
mountable by older kernels such as on sles15 which do not check
swidth/sunit parameters during mount. This should help to make REAR at
least handle such situations gracefully :)</p>
<pre><code>dd if=/dev/zero of=XFS bs=1M count=50
mkfs.xfs XFS
sles15ppclefix:~ # xfs_db -x XFS 
xfs_db&gt; sb
xfs_db&gt; write unit 8
unit = 8
xfs_db&gt; quit
sles15ppclefix:~ # mount -o loop XFS /mnt
sles15ppclefix:~ # xfs_info /mnt/
meta-data=/dev/loop0             isize=512    agcount=2, agsize=6400 blks
         =                       sectsz=512   attr=2, projid32bit=1
         =                       crc=1        finobt=1 spinodes=0 rmapbt=0
         =                       reflink=0
data     =                       bsize=4096   blocks=12800, imaxpct=25
         =                       sunit=8      swidth=0 blks
</code></pre>
<h4 id="gozora_commented_at_2018-12-07_0743"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1998#issuecomment-445149675">2018-12-07 07:43</a>:<a class="headerlink" href="#gozora_commented_at_2018-12-07_0743" title="Permanent link">&para;</a></h4>
<p>Hello @abbbi,</p>
<p>From what I've understood from your communication with David,
<code>sunit=8 swidth=0</code> can be considered incorrect and we can only guess
how/why it happened.</p>
<p>First I was thinking that ReaR XFS code incorrectly parsed stored output
from xfs_info but I was wrong. ReaR handled situation correctly and
tried to recreate filesystem as it originally was. This behavior
attracted your attention and you've find out that something is not right
so you can start further investigation on "why XFS changed its behavior
yet another time :-)). At the same time ReaR allowed reasonable fallback
(by editing <code>diskrestore.sh</code>) ale let you decide what are the correct
values for your XFS filesystem.<br />
In general this is how I intended this code should behave.<br />
Graceful handling of XFS filesystem creation code was present in ReaR
already, where we just blindly run <code>mkfs.xfs &lt;device&gt;</code> without
explicitly handling filesystem option. This lead us to quite complex
<a href="https://github.com/rear/rear/issues/1208">issues</a>. The one mentioned
include couple other issues, describing various ways of what can go
wrong if you are using graceful handling of XFS filesystem creation.</p>
<p>I've assigned labels <em>Discuss / RFC</em> because this topic can be widely
and endlessly discussed :-) and other people might have other opinions
...<br />
And I've assigned <em>nor ReaR / Invalid</em> because of reasons mentioned
previously in this comment, but it can be changed during discussion ;-).</p>
<p>In either way, if you have ideas how current code can be improved don't
hesitate to share them.</p>
<p>V.</p>
<h4 id="schlomo_commented_at_2018-12-07_0750"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/1998#issuecomment-445151051">2018-12-07 07:50</a>:<a class="headerlink" href="#schlomo_commented_at_2018-12-07_0750" title="Permanent link">&para;</a></h4>
<p>I still don't understand if this is a transitioning problem or a
permanent problem. Or is the problem that after the <code>xfsprogs</code> update
the output of <code>xfs_info</code> contains data (size 0) that is not accepted by
the <code>mkfs.xfs</code> program?</p>
<h4 id="gozora_commented_at_2018-12-07_0804"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1998#issuecomment-445153843">2018-12-07 08:04</a>:<a class="headerlink" href="#gozora_commented_at_2018-12-07_0804" title="Permanent link">&para;</a></h4>
<p>Hello @schlomo,<br />
We don't know it either, in ideal world <code>sunit=8 swidth=0 blks</code> should
not be possible ...</p>
<p>V.</p>
<h4 id="gozora_commented_at_2018-12-07_0807"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1998#issuecomment-445154635">2018-12-07 08:07</a>:<a class="headerlink" href="#gozora_commented_at_2018-12-07_0807" title="Permanent link">&para;</a></h4>
<p>In theory <code>mkfs.xfs</code> called during installation could allow such option
combination, and it could be upgraded to newer version which does not
allow it any more. But this is pure speculation ...</p>
<p>V.</p>
<h4 id="jsmeix_commented_at_2018-12-07_1022"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1998#issuecomment-445188468">2018-12-07 10:22</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-12-07_1022" title="Permanent link">&para;</a></h4>
<p>@gozora<br />
I do fully agree with your reasoning in<br />
<a href="https://github.com/rear/rear/issues/1998#issuecomment-445149675">https://github.com/rear/rear/issues/1998#issuecomment-445149675</a></p>
<p>By the way (cf. "by the way" below):</p>
<p>We already had some other issues where "rear recover" revealed<br />
that something was severely broken on the original system.</p>
<p>For an example see my<br />
<a href="https://github.com/rear/rear/issues/1907#issuecomment-434218293">https://github.com/rear/rear/issues/1907#issuecomment-434218293</a><br />
which actually belongs to
<a href="https://github.com/rear/rear/issues/1927">https://github.com/rear/rear/issues/1927</a><br />
that reads (excerpt)</p>
<pre>
By setting up a disaster recovery procedure with ReaR
and by verifying that 'rear recover' actually works to
recreate the original system on replacement hardware
one gets "by the way" some kind of confirmation that
the basic setup of the original system is o.k. because
when the basic setup of the original system is broken
it is likely that then it is not possible to recreate such
a broken original system on replacement hardware.

Simply put:
Run 'rear mkbackup' on your original system
and 'rear recover' on your replacement hardware
to verify that your original system is still o.k.
</pre>

<p>In general when someone likes to use ReaR for disaster recovery<br />
he must set up his original system so that ReaR can recreate it<br />
but not the other way round because that might only work by luck,<br />
cf. sections like "Disaster recovery does not just work" and<br />
"Let's face it: Deployment via the recovery installer is a must" and<br />
"The limitation is what the special ReaR recovery system can do" in<br />
<a href="https://en.opensuse.org/SDB:Disaster_Recovery">https://en.opensuse.org/SDB:Disaster_Recovery</a></p>
<p>That SDB article is referenced in our SLE-HA manuals, e.g. cf.<br />
<a href="https://www.suse.com/documentation/sle-ha-15/book_sleha_guide/data/sec_ha_rear_more.html">https://www.suse.com/documentation/sle-ha-15/book_sleha_guide/data/sec_ha_rear_more.html</a><br />
and our SLE-HA manuals also tell very clearly that the user<br />
must verify in advance that his disaster recovery setup does<br />
actually work in his particular environment, cf.<br />
<a href="https://www.suse.com/documentation/sle-ha-15/book_sleha_guide/data/sec_ha_rear_testing.html">https://www.suse.com/documentation/sle-ha-15/book_sleha_guide/data/sec_ha_rear_testing.html</a></p>
<p>Users who do not do that are not supported,<br />
at least not officially supported by SUSE, cf. the sections<br />
"Help and Support" "Feasible in advance" "Hopeless in retrospect" in<br />
<a href="https://en.opensuse.org/SDB:Disaster_Recovery">https://en.opensuse.org/SDB:Disaster_Recovery</a></p>
<p>But of course we try to help them here at<br />
ReaR upstream on a voluntary base - and even more:</p>
<p>ReaR is by design prepared to let an experienced admin even deal with
such<br />
unexpected issues during "rear recover" to be able to successfully
recreate<br />
his system with some manual intervention even in problematic cases,<br />
cf. "Disaster recovery with Relax-and-Recover (ReaR)" in<br />
<a href="https://en.opensuse.org/SDB:Disaster_Recovery">https://en.opensuse.org/SDB:Disaster_Recovery</a><br />
that reads:</p>
<pre>
Experienced users and system admins can
adapt or extend the ReaR scripts to make it work
for their particular cases and - if the worst comes
to the worst - even temporary quick and dirty
workarounds are relatively easily possible. 
</pre>

<p>Bottom line:<br />
I think everything worked perfectly well as it should here and<br />
this issue could be rightfully closed as "perfectly well done".</p>
<h4 id="gdha_commented_at_2018-12-07_1031"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/1998#issuecomment-445190746">2018-12-07 10:31</a>:<a class="headerlink" href="#gdha_commented_at_2018-12-07_1031" title="Permanent link">&para;</a></h4>
<p>@abbbi Is this not a perfect case for a short FAQ? We would like to
share it on our ReaR site - see
<a href="https://github.com/rear/rear.github.com/blob/master/documentation/faq.md">https://github.com/rear/rear.github.com/blob/master/documentation/faq.md</a>
(perhaps prepare a PR to make our life easier ;-)</p>
<h4 id="jsmeix_commented_at_2018-12-07_1037"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1998#issuecomment-445192256">2018-12-07 10:37</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-12-07_1037" title="Permanent link">&para;</a></h4>
<p>( finally I won my fight against markdown ;-)</p>
<h4 id="abbbi_commented_at_2018-12-07_1229"><img src="https://avatars.githubusercontent.com/u/3919561?u=473291dd3dbd58fd0af45714935992a3d416aa6e&v=4" width="50"><a href="https://github.com/abbbi">abbbi</a> commented at <a href="https://github.com/rear/rear/issues/1998#issuecomment-445218653">2018-12-07 12:29</a>:<a class="headerlink" href="#abbbi_commented_at_2018-12-07_1229" title="Permanent link">&para;</a></h4>
<p>@gozora for me its some weird case and as we have seen not a problem in
REAR. But if you look closely, there seems to be something messed up in
the REAR part too. The xfs_info output prints</p>
<p>sunit=8</p>
<p>but rear tries to format with:</p>
<p>-d sunit=64</p>
<p>not sure if that is an error crafted by the fact that swidth=0, but
worth a look anyway, not that we<br />
overlook some other issue here :)</p>
<h4 id="gozora_commented_at_2018-12-07_1237"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1998#issuecomment-445220483">2018-12-07 12:37</a>:<a class="headerlink" href="#gozora_commented_at_2018-12-07_1237" title="Permanent link">&para;</a></h4>
<p>@abbbi it is a feature ;-)<br />
if you specify <code>mkfs.xfs -d sunit=64</code> you will get <code>sunit 8</code> in
xfs_info output.<br />
It was great pleasure to write this code I can tell you ;-).</p>
<p>V.</p>
<h4 id="jsmeix_commented_at_2018-12-14_1329"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1998#issuecomment-447325672">2018-12-14 13:29</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-12-14_1329" title="Permanent link">&para;</a></h4>
<p>@gozora<br />
regarding "ideas how current code can be improved" in your<br />
<a href="https://github.com/rear/rear/issues/1998#issuecomment-445149675">https://github.com/rear/rear/issues/1998#issuecomment-445149675</a></p>
<p>I have one and I like to do a pull request as soon as time permits<br />
so that you could have a look.</p>
<p>Hint:<br />
It will be about "final power to the user" or in other words:<br />
Make @abbbi 's life a bit easier...</p>
<h4 id="jsmeix_commented_at_2018-12-14_1455"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1998#issuecomment-447348969">2018-12-14 14:55</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-12-14_1455" title="Permanent link">&para;</a></h4>
<p>@gozora<br />
please have a look at<br />
<a href="https://github.com/rear/rear/pull/2005">https://github.com/rear/rear/pull/2005</a></p>
<h4 id="jsmeix_commented_at_2018-12-18_1355"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1998#issuecomment-448228502">2018-12-18 13:55</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-12-18_1355" title="Permanent link">&para;</a></h4>
<p>With
<a href="https://github.com/rear/rear/pull/2005">https://github.com/rear/rear/pull/2005</a>
merged<br />
it should be a bit easier to get things back to work<br />
when mkfs.xfs failed within the recovery system, cf.<br />
<a href="https://github.com/rear/rear/pull/2005#issuecomment-447799986">https://github.com/rear/rear/pull/2005#issuecomment-447799986</a></p>
<h4 id="abbbi_commented_at_2021-06-09_1139"><img src="https://avatars.githubusercontent.com/u/3919561?u=473291dd3dbd58fd0af45714935992a3d416aa6e&v=4" width="50"><a href="https://github.com/abbbi">abbbi</a> commented at <a href="https://github.com/rear/rear/issues/1998#issuecomment-857622163">2021-06-09 11:39</a>:<a class="headerlink" href="#abbbi_commented_at_2021-06-09_1139" title="Permanent link">&para;</a></h4>
<p>Additional note, because as today this problem striked again at another
customer, again on PowerPC with SLES15.</p>
<p>The introduced MKFS_XFS_OPTIONS property helps during creation of the
filesystems, but one has to make sure that the mount options which are
passed to the volume are the right ones too. It might happen that the
mount options include the sunit=64 option too, resulting in mount
issues:</p>
<pre><code>mount -o rw,noatime,nodiratime,attr2,nobarrier,inode64,sunit=64,noquota /dev/mapper/vol /mnt/local/vol
mount: /dev/mapper/vol: wrong fs type, bad option, bad superblock on [...]
</code></pre>
<p>So the disklayout.conf has to be edited before recovery too, to get
things working again.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2025 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2018-12-06.1998.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
