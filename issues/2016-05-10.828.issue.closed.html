<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#828 Issue closed: Unknown -e flag with genisoimage under Debian - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#828 Issue closed: Unknown -e flag with genisoimage under Debian";
        var mkdocs_page_input_path = "issues/2016-05-10.828.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#828 Issue closed: Unknown -e flag with genisoimage under Debian</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="828_issue_closed_unknown_-e_flag_with_genisoimage_under_debian"><a href="https://github.com/rear/rear/issues/828">#828 Issue</a> <code>closed</code>: Unknown -e flag with genisoimage under Debian<a class="headerlink" href="#828_issue_closed_unknown_-e_flag_with_genisoimage_under_debian" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>fixed / solved / done</code></p>
<h4 id="erkannt_opened_issue_at_2016-05-10_0836"><img src="https://avatars.githubusercontent.com/u/19282025?u=0c993cdedb8a9104d6ba7dcf48721d31eeb19b17&v=4" width="50"><a href="https://github.com/erkannt">erkannt</a> opened issue at <a href="https://github.com/rear/rear/issues/828">2016-05-10 08:36</a>:<a class="headerlink" href="#erkannt_opened_issue_at_2016-05-10_0836" title="Permanent link">&para;</a></h4>
<ul>
<li>Relax-and-Recover 1.18 / Git</li>
<li>Debian GNU/Linux 8.4 (jessie)</li>
<li>Dell Poweredge R330</li>
</ul>
<p>Built and installed deb-package from current master with
<code>make deb OFFICIAL=1.18</code>.<br />
Tried running <code>rear -v mkrescue</code> with the following conf:</p>
<pre><code>### write the rescue initramfs to USB and update the USB bootloader
OUTPUT=USB

### create a backup using the internal NETFS method, using 'tar'
BACKUP=NETFS

### write both rescue image and backup to the device labeled REAR-000
BACKUP_URL=usb:///dev/disk/by-label/REAR-000

### From /usr/share/rear/conf/Debian
# Add here the Debian ia64 specials which are not general ia64, e.g.
# agetty vs. getty
REQUIRED_PROGS=(
"${REQUIRED_PROGS[@]}"
getty
)

PROGS=(
"${PROGS[@]}"
)

COPY_AS_IS=( "${COPY_AS_IS[@]}"  )
</code></pre>
<p>This fails when creating ISO image.</p>
<pre><code>2016-05-10 10:26:57 Including output/ISO/Linux-i386/81_prepare_multiple_iso.sh
2016-05-10 10:26:57 Including output/ISO/Linux-i386/82_create_iso_image.sh
2016-05-10 10:26:57 Starting '/usr/bin/genisoimage'
2016-05-10 10:26:57 Making ISO image
2016-05-10 10:26:57 Including ISO UEFI boot (as triggered by USING_UEFI_BOOTLOADER=1)
/usr/bin/genisoimage: option '-e' is ambiguous; possibilities: '--eltorito-boot' '--exchange' '--ethershare' '--exclude-list' '--exclude' '--eltorito-catalog' '--eltorito-alt-boot'
Usage: genisoimage [options] -o file directory ...

Use genisoimage -help
to get a list of valid options.

Report problems to debburn-devel@lists.alioth.debian.org.
2016-05-10 10:26:57 ERROR: Could not create ISO image (with /usr/bin/genisoimage)
=== Stack trace ===
Trace 0: /usr/sbin/rear:410 main
Trace 1: /usr/share/rear/lib/mkrescue-workflow.sh:35 WORKFLOW_mkrescue
Trace 2: /usr/share/rear/lib/framework-functions.sh:85 SourceStage
Trace 3: /usr/share/rear/lib/framework-functions.sh:45 Source
Trace 4: /usr/share/rear/output/ISO/Linux-i386/82_create_iso_image.sh:22 source
Trace 5: /usr/share/rear/lib/_input-output-functions.sh:150 StopIfError
Message: Could not create ISO image (with /usr/bin/genisoimage)
</code></pre>
<p>This error has come up previously on OpenSUSE #804. Here it was solved
by using ebiso. But this is on Debian where genisoimage should work if I
understand <a href="http://www.it3.be/2015/10/27/uefi-iso-boot-with-ebiso/">this
</a>post correctly.</p>
<h4 id="gozora_commented_at_2016-05-10_0841"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/828#issuecomment-218094466">2016-05-10 08:41</a>:<a class="headerlink" href="#gozora_commented_at_2016-05-10_0841" title="Permanent link">&para;</a></h4>
<p>@erkannt what version of genisoimage are you using?<br />
I'm running <code>genisoimage 1.1.11</code> on my Ubuntu and this one should be
fine ...</p>
<h4 id="erkannt_commented_at_2016-05-10_0845"><img src="https://avatars.githubusercontent.com/u/19282025?u=0c993cdedb8a9104d6ba7dcf48721d31eeb19b17&v=4" width="50"><a href="https://github.com/erkannt">erkannt</a> commented at <a href="https://github.com/rear/rear/issues/828#issuecomment-218095306">2016-05-10 08:45</a>:<a class="headerlink" href="#erkannt_commented_at_2016-05-10_0845" title="Permanent link">&para;</a></h4>
<p>I'm also running <code>genisoimage 1.1.11 (Linux)</code>.<br />
The man page and -help both don't mention any <code>-e</code> option.</p>
<h4 id="gozora_commented_at_2016-05-10_0849"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/828#issuecomment-218096198">2016-05-10 08:49</a>:<a class="headerlink" href="#gozora_commented_at_2016-05-10_0849" title="Permanent link">&para;</a></h4>
<p>that is really strange, because if I run:</p>
<pre><code># /usr/bin/genisoimage -e
/usr/bin/genisoimage: option requires an argument -- 'e'
Usage: genisoimage [options] -o file directory ...

Use genisoimage -help
to get a list of valid options.

Report problems to debburn-devel@lists.alioth.debian.org.
</code></pre>
<p>No ambiguous warning ...</p>
<p>Do you have <code>-efi-boot</code> option available?</p>
<h4 id="erkannt_commented_at_2016-05-10_0855"><img src="https://avatars.githubusercontent.com/u/19282025?u=0c993cdedb8a9104d6ba7dcf48721d31eeb19b17&v=4" width="50"><a href="https://github.com/erkannt">erkannt</a> commented at <a href="https://github.com/rear/rear/issues/828#issuecomment-218097925">2016-05-10 08:55</a>:<a class="headerlink" href="#erkannt_commented_at_2016-05-10_0855" title="Permanent link">&para;</a></h4>
<pre><code>➜  ~ genisoimage -e
genisoimage: option '-e' is ambiguous; possibilities: '--eltorito-boot' '--exchange' '--ethershare' '--exclude-list' '--exclude' '--eltorito-catalog' '--eltorito-alt-boot'

➜  ~ genisoimage -efi-boot
genisoimage: unrecognized option '-efi-boot'
</code></pre>
<p>Very strange indeed.</p>
<h4 id="gozora_commented_at_2016-05-10_0903"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/828#issuecomment-218100063">2016-05-10 09:03</a>:<a class="headerlink" href="#gozora_commented_at_2016-05-10_0903" title="Permanent link">&para;</a></h4>
<p>All this EFI boot wars drives me nuts, I personally don't see a reason
for such big difference despite same version number is used.<br />
I guess Ubuntu guys did little something to make EFI boot work on their
version. Unfortunately I don't have currently any Debian distro to check
deeper.<br />
Maybe you can try to compile ebiso? (we don't have deb packages yet, as
I thought that EFI boot works fine on Debian).</p>
<h4 id="gozora_commented_at_2016-05-10_0907"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/828#issuecomment-218100785">2016-05-10 09:07</a>:<a class="headerlink" href="#gozora_commented_at_2016-05-10_0907" title="Permanent link">&para;</a></h4>
<p>One more thing I just realized ... You are using <code>OUTPUT=USB</code> ...<br />
Can you just test with <code>OUTPUT=ISO</code> ?</p>
<h4 id="erkannt_commented_at_2016-05-10_1012"><img src="https://avatars.githubusercontent.com/u/19282025?u=0c993cdedb8a9104d6ba7dcf48721d31eeb19b17&v=4" width="50"><a href="https://github.com/erkannt">erkannt</a> commented at <a href="https://github.com/rear/rear/issues/828#issuecomment-218115638">2016-05-10 10:12</a>:<a class="headerlink" href="#erkannt_commented_at_2016-05-10_1012" title="Permanent link">&para;</a></h4>
<p><code>OUTPUT=ISO</code> results in the same error.<br />
When trying to determine the reason for the difference between Ubuntu
and Debian I found the following workaround. This issue also appeared in
Mondo and some stage apperently.</p>
<p><a href="http://trac.mondorescue.org/ticket/782">http://trac.mondorescue.org/ticket/782</a></p>
<p>I manually changed <code>-e</code> to <code>--eltorito-boot</code> in
<code>/usr/share/rear/output/ISO/Linux-i386/82_create_iso_image.sh</code>.</p>
<p>Would it be sensible to include such a workaround in the
defaul/Debian.conf?</p>
<h4 id="gozora_commented_at_2016-05-10_1018"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/828#issuecomment-218116813">2016-05-10 10:18</a>:<a class="headerlink" href="#gozora_commented_at_2016-05-10_1018" title="Permanent link">&para;</a></h4>
<p>That is interesting, however I'm not sure that <code>--eltorito-boot</code> does
the same thing as <code>--efi-boot</code>...<br />
Did you try to boot from ISO image created using <code>--eltorito-boot</code>
option?</p>
<h4 id="gozora_commented_at_2016-05-10_1020"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/828#issuecomment-218117276">2016-05-10 10:20</a>:<a class="headerlink" href="#gozora_commented_at_2016-05-10_1020" title="Permanent link">&para;</a></h4>
<p>and maybe one more question that I should ask at the very begging. :-)<br />
Are you using <code>EFI boot</code> or <code>Legacy boot</code> on your Dell Poweredge R330?</p>
<h4 id="erkannt_commented_at_2016-05-10_1547"><img src="https://avatars.githubusercontent.com/u/19282025?u=0c993cdedb8a9104d6ba7dcf48721d31eeb19b17&v=4" width="50"><a href="https://github.com/erkannt">erkannt</a> commented at <a href="https://github.com/rear/rear/issues/828#issuecomment-218201265">2016-05-10 15:47</a>:<a class="headerlink" href="#erkannt_commented_at_2016-05-10_1547" title="Permanent link">&para;</a></h4>
<p>I currently am using EFI boot, but have no qualms is switching to BIOS
boot.</p>
<p>I was able to boot from the created ISO when mounting it as a virtual
drive via iDRAC.<br />
I was not able to boot from the created USB Drive. It didn't show up as
a boot option.</p>
<h4 id="gozora_commented_at_2016-05-10_2000"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/828#issuecomment-218273264">2016-05-10 20:00</a>:<a class="headerlink" href="#gozora_commented_at_2016-05-10_2000" title="Permanent link">&para;</a></h4>
<p>If you really can switch to legacy boot, my humble advice would be DO SO
AND NEVER LOOK BACK ;-), you will save lot of trouble to your self ...<br />
I did a bit of experimenting with ReaR on USB and observed that
<code>rear format</code> creates ext/btrs like file system during initialization
and as native EFI FS is FAT, I'd say that ReaR does not support EFI boot
on USB device.<br />
@jsmeix @gdha @schlomo can you confirm?</p>
<h4 id="jsmeix_commented_at_2016-05-11_0744"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/828#issuecomment-218386015">2016-05-11 07:44</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-05-11_0744" title="Permanent link">&para;</a></h4>
<p>I am afraid my knowledge in general about UEFI<br />
is very limited which means in general I cannot<br />
answer questions regarding UEFI - usually it is me<br />
who has questions about UEFI.</p>
<p>From my very limited own experience with UEFI<br />
I do fully agree with @gozora that if one can use<br />
traditional BIOS then use BIOS (and simply relax and wait<br />
until UEFI is generally well supported - except you really like<br />
to deal with various "technically interesting" issues - ideally<br />
when you also can provide GitHub pull requests that fix<br />
issues with UEFI in rear ;-)</p>
<p>@gozora<br />
I have a probably stupid question (which proves<br />
that I really don't know about UEFI):</p>
<p>What exactly do you mean with "ReaR on USB ... rear format ...<br />
ReaR does not support EFI boot on USB device"?</p>
<p>Shouldn't it work generically to let "rear mkrescue" create<br />
a UEFI bootable ISO image (e.g. via "ebiso") and then<br />
burn or dump that onto a CD or DVD or USB stick<br />
to get a UEFI bootable CD or DVD or USB stick?</p>
<p>Isn't it a different way to use "rear format"?</p>
<p>Regarding "rear format":</p>
<p>What I found documented about it:<br />
README.adoc reads (excerpts):</p>
<pre>
create a bootable USB backup
</pre>

<p>doc/rear-release-notes.txt reads (excerpts):</p>
<pre>
External USB booting now uses extlinux instead of syslinux,
and therefore, the USB disk must first be formatted with
an ext2, ext3, ext4 or btrfs based file system
</pre>

<p>doc/user-guide/04-scenarios.adoc reads (excerpts):</p>
<pre>
To prepare your USB device for use with Relax-and-Recover, do:
rear format /dev/sdX
This will create a single partition, make it bootable, format it
with ext3, label it REAR-000
</pre>

<p>It seems nothing is documented about BIOS versus UEFI<br />
regarding "rear format" so that one must inspect<br />
the sources (fortunately rear is fee software so that<br />
one can inspect the sources ;-)</p>
<p>lib/format-workflow.sh reads (excerpts):</p>
<pre>
# Usage: rear -v format -- -h /dev/<usb-disk>
# By default 1 partition will be created with ext3 format and label REAR-000
# With the --efi toggle you get 2 partitions (vfat and ext3) so we are able
# to make this USB UEFI bootable afterwards
</pre>

<p>It seems with "rear format --efi /dev/sdX"<br />
one should get a UEFI bootable USB device.</p>
<p>But I never tried that myself.</p>
<h4 id="gozora_commented_at_2016-05-11_0810"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/828#issuecomment-218391137">2016-05-11 08:10</a>:<a class="headerlink" href="#gozora_commented_at_2016-05-11_0810" title="Permanent link">&para;</a></h4>
<p>@jsmeix<br />
To settle things down I'm very far from being UEFI expert and to my top
UEFI knowledge belongs being able to use pager when displaying help (it
is <code>help -b</code> btw) and changing colors (<code>cls &lt;0-9&gt;</code>) ;-).</p>
<p>From what I've understood UEFI recognizes (by default) only FAT file
systems. Means that if you plug in any device that does not contain FAT
and trigger <code>map</code> in UEFI shell, you will not able to see its content,
hence not able to boot.<br />
So as I firstly triggered <code>rear format</code> and saw the outcome I was quite
sure that UEFI will not be able to boot from such formatted USB..</p>
<p>information about <code>rear format --efi</code> is totally new to me, it looks
like it could really work due added vfat partition ...<br />
I'll certainly give it a try later today.</p>
<p>Thanks for pointing it out!</p>
<h4 id="jsmeix_commented_at_2016-05-11_0836"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/828#issuecomment-218396495">2016-05-11 08:36</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-05-11_0836" title="Permanent link">&para;</a></h4>
<p>I love "git blame" for "assignment of guilt" ;-)</p>
<pre>
$ git blame usr/share/rear/lib/format-workflow.sh
...
9fa2faaf (Gratien D'haese  2015-06-05 16:43:13 +0200  4) # Usage: rear -v format -- -h /dev/<usb-disk>
9fa2faaf (Gratien D'haese  2015-06-05 16:43:13 +0200  5) # By default 1 partition will be created with ext3 format and label REAR-000
9fa2faaf (Gratien D'haese  2015-06-05 16:43:13 +0200  6) # With the --efi toggle you get 2 partitions (vfat and ext3) so we are able
9fa2faaf (Gratien D'haese  2015-06-05 16:43:13 +0200  7) # to make this USB UEFI bootable afterwards
...
9fa2faaf (Gratien D'haese  2015-06-05 16:43:13 +0200 26)             (-e|--efi) EFI=y;;
$ git log | grep -A7 9fa2faaf 
commit 9fa2faaf9d59fec679e68645963365ae41598441
Author: Gratien D'haese <gratien.dhaese@gmail.com>
Date:   Fri Jun 5 16:43:13 2015 +0200
    Added some clarification on how to use the options in the format workflow.
    Added an --efi toggle to create an UEFI bootable disk (partitions only for the moment)
    issue #593
</pre>

<p>which refers to
<a href="https://github.com/rear/rear/issues/593">https://github.com/rear/rear/issues/593</a><br />
but it seems that issue in not yet the actual issue<br />
where UEFI boot support was added to "rear format".</p>
<p>But the "partitions only for the moment" may indicate that<br />
UEFI boot support is perhaps not yet fully implemented<br />
for "rear format --efi".</p>
<p>It seems it is @gdha who knows the real details here...</p>
<h4 id="gdha_commented_at_2016-05-11_1006"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/828#issuecomment-218416657">2016-05-11 10:06</a>:<a class="headerlink" href="#gdha_commented_at_2016-05-11_1006" title="Permanent link">&para;</a></h4>
<p>@jsmeix @gozora UEFI USB booting is not supported for the moment - I
started with it (the format part only), but stopped as there was no real
reason to continue with this as <code>ebiso</code> could do the job for SLES. See
also #603.</p>
<h4 id="jsmeix_commented_at_2016-05-11_1247"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/828#issuecomment-218448711">2016-05-11 12:47</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-05-11_1247" title="Permanent link">&para;</a></h4>
<p>@gdha<br />
many thanks for your prompt reply.</p>
<p>FYI:<br />
I did not find
<a href="https://github.com/rear/rear/issues/603">https://github.com/rear/rear/issues/603</a>
because I have no idea<br />
how I could find related but not implemented GitHub issues<br />
because such issues are not mentioned in the git commit log<br />
or in a source file (as long as nothing is implemented).</p>
<h4 id="carragom_commented_at_2016-07-29_1852"><img src="https://avatars.githubusercontent.com/u/970403?v=4" width="50"><a href="https://github.com/carragom">carragom</a> commented at <a href="https://github.com/rear/rear/issues/828#issuecomment-236264004">2016-07-29 18:52</a>:<a class="headerlink" href="#carragom_commented_at_2016-07-29_1852" title="Permanent link">&para;</a></h4>
<p>Hey there,</p>
<p>Using Debian 8 and rear-1.17.2. The same issue with option <code>-e</code> is
visible. To solve it I installed <strong>xorriso</strong> and set added
<code>ISO_MKISOFS_BIN=/usr/bin/xorrisofs</code> to my <em>/etc/rear/local.conf</em> file.
Now the error is gone and the backup works. I still have to test if the
image actually boot in UEFI. I'll test it and get back with that info.</p>
<p>In the mean time, maybe the Debian version should depend on <strong>xorriso</strong>
instead of <strong>genisoimage</strong> and ship <code>ISO_MKISOFS_BIN=/usr/bin/xorrisofs</code>
in <em>default.conf</em>?</p>
<p>Cheers.</p>
<h4 id="gdha_commented_at_2016-08-09_1220"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/828#issuecomment-238536012">2016-08-09 12:20</a>:<a class="headerlink" href="#gdha_commented_at_2016-08-09_1220" title="Permanent link">&para;</a></h4>
<p>@gozora @jsmeix What are your thoughts on above proposal around using
<code>xorriso</code> instead of <code>genisoimage</code> when dealing with UEFi on Debian?</p>
<h4 id="gozora_commented_at_2016-08-09_1239"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/828#issuecomment-238540198">2016-08-09 12:39</a>:<a class="headerlink" href="#gozora_commented_at_2016-08-09_1239" title="Permanent link">&para;</a></h4>
<p>In general that should not do any harm, considering that xorriso really
works fine.</p>
<h4 id="jsmeix_commented_at_2016-08-10_1435"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/828#issuecomment-238886347">2016-08-10 14:35</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-08-10_1435" title="Permanent link">&para;</a></h4>
<p>I am not a Debian or Ubuntu user but in general<br />
I think using xorriso for now only on Debian or Ubuntu<br />
looks like a good step into the right direction<br />
in particular because at SUSE we also had<br />
an (internal) request to support xorriso in rear.</p>
<h4 id="jsmeix_commented_at_2016-08-10_1438"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/828#issuecomment-238887369">2016-08-10 14:38</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-08-10_1438" title="Permanent link">&para;</a></h4>
<p>@carragom<br />
according to your
<a href="https://github.com/rear/rear/issues/828#issuecomment-236264004">https://github.com/rear/rear/issues/828#issuecomment-236264004</a><br />
it seems you got it working so that I would like to ask you<br />
to make a GitHub pull request with your changes<br />
so that we have at least a starting point for<br />
some kind of general xorriso support in rear.</p>
<p>Don't be afraid to contribute to Relax-and-Recover<br />
even if your contribution is only a first attempt, cf.<br />
<a href="https://github.com/rear/rear/wiki/Coding-Style">https://github.com/rear/rear/wiki/Coding-Style</a></p>
<h4 id="jsmeix_commented_at_2016-08-15_1454"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/828#issuecomment-239823313">2016-08-15 14:54</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-08-15_1454" title="Permanent link">&para;</a></h4>
<p>With
<a href="https://github.com/rear/rear/pull/962">https://github.com/rear/rear/pull/962</a>
merged<br />
I consider this issue as fixed.</p>
<h4 id="signum_commented_at_2018-12-16_1610"><img src="https://avatars.githubusercontent.com/u/36562?v=4" width="50"><a href="https://github.com/Signum">Signum</a> commented at <a href="https://github.com/rear/rear/issues/828#issuecomment-447655087">2018-12-16 16:10</a>:<a class="headerlink" href="#signum_commented_at_2018-12-16_1610" title="Permanent link">&para;</a></h4>
<p>It is not fixed for me unfortunately. I am backing up a Debian 9 system
installed in UEFI mode. And I also get:</p>
<pre><code>/usr/bin/genisoimage: option '-e' is ambiguous; possibilities: '--eltorito-boot' '--exchange' '--ethershare' '--exclude-list' '--exclude' '--eltorito-catalog' '--eltorito-alt-boot'
</code></pre>
<p>carragom's workaround
(<a href="https://github.com/rear/rear/issues/828#issuecomment-236264004">https://github.com/rear/rear/issues/828#issuecomment-236264004</a>)
works for me. But shouldn't the default be sane even for UEFI?</p>
<p>genisoimage here is</p>
<pre><code># genisoimage --version
genisoimage 1.1.11 (Linux)
</code></pre>
<h4 id="gdha_commented_at_2018-12-17_0725"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/828#issuecomment-447747273">2018-12-17 07:25</a>:<a class="headerlink" href="#gdha_commented_at_2018-12-17_0725" title="Permanent link">&para;</a></h4>
<p>@Signum why not create a dedicated config file for Debian? Use
<code>rear dump</code> to find out which config file would be appropriate for this
purpose? You could add <code>ISO_MKISOFS_BIN=/usr/bin/xorrisofs</code> line to the
new config file.</p>
<h4 id="jsmeix_commented_at_2018-12-17_0837"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/828#issuecomment-447763038">2018-12-17 08:37</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-12-17_0837" title="Permanent link">&para;</a></h4>
<p>Only FYI a general addendum:</p>
<p>In ReaR basically all is bash scripts, in particular config files<br />
are also bash scripts that get sourced (and executed).</p>
<p>Therefore one can do arbitrary bash scripting in config files as
needed<br />
to distinguish different cases for example in etc/rear/local.conf things
like</p>
<pre><code>if CONDITION_IT_IS_A_DEBIAN_9_SYSTEM ; then
    ISO_MKISOFS_BIN="/usr/bin/xorrisofs"
fi
</code></pre>
<p>One must consider that etc/rear/local.conf is also used during "rear
recover"<br />
where etc/rear/local.conf is sourced within the rather minimal
environment<br />
in the running ReaR recovery system so that things like<br />
CONDITION_IT_IS_A_DEBIAN_9_SYSTEM must be sufficiently fail-safe<br />
that can be also evaluated within the recovery system - regardless
that<br />
ISO_MKISOFS_BIN is not needed within the recovery system<br />
but evaluating CONDITION_IT_IS_A_DEBIAN_9_SYSTEM must<br />
not cause a fatal error (it can of course result a non-zero return
code).</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2023 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2016-05-10.828.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
