<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#2667 Issue closed: 'rear recover' does not entirely remove build area (any more). - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#2667 Issue closed: \u0027rear recover\u0027 does not entirely remove build area (any more).";
        var mkdocs_page_input_path = "issues/2021-08-06.2667.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
      <li class="breadcrumb-item active">#2667 Issue closed: 'rear recover' does not entirely remove build area (any more).</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="2667_issue_closed_rear_recover_does_not_entirely_remove_build_area_any_more"><a href="https://github.com/rear/rear/issues/2667">#2667 Issue</a> <code>closed</code>: 'rear recover' does not entirely remove build area (any more).<a class="headerlink" href="#2667_issue_closed_rear_recover_does_not_entirely_remove_build_area_any_more" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>fixed / solved / done</code>, <code>minor bug</code></p>
<h4 id="hpannenb_opened_issue_at_2021-08-06_1347"><img src="https://avatars.githubusercontent.com/u/13567759?u=b037e492e58a5f63f35277b3606d500cd622c8ed&v=4" width="50"><a href="https://github.com/hpannenb">hpannenb</a> opened issue at <a href="https://github.com/rear/rear/issues/2667">2021-08-06 13:47</a>:<a class="headerlink" href="#hpannenb_opened_issue_at_2021-08-06_1347" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>ReaR version ("/usr/sbin/rear -V"): 2.6 / current git master</p>
</li>
<li>
<p>OS version ("cat /etc/os-release" or "lsb_release -a" or "cat
    /etc/rear/os.conf"):<br />
    Centos 7</p>
</li>
<li>
<p>ReaR configuration files ("cat /etc/rear/site.conf" and/or "cat
    /etc/rear/local.conf"):</p>
</li>
</ul>
<!-- -->

<pre><code># ReaR - site.conf

BACKUP=NETFS
BACKUP_URL=iso://backup

BACKUP_PROG_EXCLUDE+=( '/var/tmp/*' '/var/backup/*' '/backup/*' )
OUTPUT=ISO
OUTPUT_URL=null

ISO_MAX_SIZE=2500

USE_STATIC_NETWORKING=yes
USE_RESOLV_CONF=no

USER_INPUT_TIMEOUT=30

SSH_ROOT_PASSWORD='root'
</code></pre>
<ul>
<li>Hardware (PC or PowerNV BareMetal or ARM) or virtual machine (KVM
    guest or PoverVM LPAR):<br />
    KVM guest</li>
<li>System architecture (x86 compatible or PPC64/PPC64LE or what exact
    ARM device):<br />
    x86</li>
<li>Firmware (BIOS or UEFI or Open Firmware) and bootloader (GRUB or
    ELILO or Petitboot):<br />
    GRUB</li>
<li>Storage (local disk or SSD) and/or SAN (FC or iSCSI or FCoE) and/or
    multipath (DM or NVMe):<br />
    Local disk</li>
<li>Storage layout ("lsblk -ipo
    NAME,KNAME,PKNAME,TRAN,TYPE,FSTYPE,SIZE,MOUNTPOINT" or "lsblk" as
    makeshift):</li>
</ul>
<!-- -->

<pre><code>NAME            MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
sr0              11:0    1  1.2G  0 rom  
vda             253:0    0   16G  0 disk 
|-vda1          253:1    0  500M  0 part /mnt/local/boot
`-vda2          253:2    0 15.5G  0 part 
  |-centos-swap 252:0    0  512M  0 lvm  
  `-centos-root 252:1    0   15G  0 lvm  /mnt/local
</code></pre>
<ul>
<li>Description of the issue (ideally so that others can reproduce
    it):<br />
    Compared to the official 2.6 version the current git master
    version's <code>rear recover</code> cannot entirely remove the build area. An
    orphaned <code>outputfs</code> remains causing the following warning</li>
</ul>
<!-- -->

<pre><code>...
Running exit tasks
Could not remove build area /var/tmp/rear.K0wbKZyga3vmP3O (something still exists therein)
To manually remove the build area use (with caution): rm -Rf --one-file-system /var/tmp/rear.K0wbKZyga3vmP3O
...
</code></pre>
<ul>
<li>
<p>Workaround, if any:<br />
    Not really required since the build area is removed anyway since it
    exists in the rescue environment only.<br />
    But it might be a nasty side effect (in future) and is a "change" in
    behaviour to the prior release version of ReaR.</p>
</li>
<li>
<p>Attachments, as applicable ("rear -D mkrescue/mkbackup/recover"
    debug log files):</p>
</li>
</ul>
<!-- -->

<pre><code>RESCUE centos7:/var/tmp/rear.K0wbKZyga3vmP3O # ls -laR
.:
total 0
drwx------ 3 root root 0 Aug  6 12:28 .
drwxr-xr-x 3 root root 0 Aug  6 12:28 ..
drwxr-xr-x 2 root root 0 Aug  6 12:25 outputfs

./outputfs:
total 0
drwxr-xr-x 2 root root 0 Aug  6 12:25 .
drwx------ 3 root root 0 Aug  6 12:28 ..
</code></pre>
<h4 id="hpannenb_commented_at_2021-08-06_1750"><img src="https://avatars.githubusercontent.com/u/13567759?u=b037e492e58a5f63f35277b3606d500cd622c8ed&v=4" width="50"><a href="https://github.com/hpannenb">hpannenb</a> commented at <a href="https://github.com/rear/rear/issues/2667#issuecomment-894419763">2021-08-06 17:50</a>:<a class="headerlink" href="#hpannenb_commented_at_2021-08-06_1750" title="Permanent link">&para;</a></h4>
<p>I suppose it has something to do with @jsmeix major work (see also
commit 619a3b3ff76780e327269f73407fc25467c7801b) upwards. Anyhow there
is an empty outputfs not beeing removed thus the build area cannot be
purged in the rescue environment. As mentioned it might be kind of a
cosmetic issue rather than a real one or a works-as-designed point I
lost track of.</p>
<h4 id="pcahyna_commented_at_2021-08-06_1806"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2667#issuecomment-894429330">2021-08-06 18:06</a>:<a class="headerlink" href="#pcahyna_commented_at_2021-08-06_1806" title="Permanent link">&para;</a></h4>
<p>Thanks for the report. I think you mean my major work? It seems related
indeed, but I haven't seen it in my testing (maybe it was my oversight,
because it is a warning, not an error?)</p>
<h4 id="hpannenb_commented_at_2021-08-06_1835"><img src="https://avatars.githubusercontent.com/u/13567759?u=b037e492e58a5f63f35277b3606d500cd622c8ed&v=4" width="50"><a href="https://github.com/hpannenb">hpannenb</a> commented at <a href="https://github.com/rear/rear/issues/2667#issuecomment-894445574">2021-08-06 18:35</a>:<a class="headerlink" href="#hpannenb_commented_at_2021-08-06_1835" title="Permanent link">&para;</a></h4>
<p>Sorry. Obviously these were your commits. At the very end of the `rear
recover``this happens (reproducible) with the current git version.</p>
<h4 id="patrikdahlsll_commented_at_2021-08-13_0745"><img src="https://avatars.githubusercontent.com/u/61880083?v=4" width="50"><a href="https://github.com/patrikdahlsll">patrikdahlsll</a> commented at <a href="https://github.com/rear/rear/issues/2667#issuecomment-898258946">2021-08-13 07:45</a>:<a class="headerlink" href="#patrikdahlsll_commented_at_2021-08-13_0745" title="Permanent link">&para;</a></h4>
<p>We seem to experience the same issue, built a new version of Rear
yesterday.<br />
<code>[user@host ~]$ /usr/sbin/rear -V Relax-and-Recover 2.6-git.4526.6589c8d.master.changed / 2021-08-06</code></p>
<p>Error<br />
<code>[user@host ~]$ sudo rear mkrescue /*** Stuff Deleted Here ***/ Could not remove build area /var/tmp/rear.KCmijgTOJjTqUbV (something still exists therein) To manually remove the build area use (with caution): rm -Rf --one-file-system /var/tmp/rear.KCmijgTOJjTqUbV</code></p>
<h4 id="patrikdahlsll_commented_at_2021-08-17_1357"><img src="https://avatars.githubusercontent.com/u/61880083?v=4" width="50"><a href="https://github.com/patrikdahlsll">patrikdahlsll</a> commented at <a href="https://github.com/rear/rear/issues/2667#issuecomment-900321581">2021-08-17 13:57</a>:<a class="headerlink" href="#patrikdahlsll_commented_at_2021-08-17_1357" title="Permanent link">&para;</a></h4>
<p>I did some more testing and I actually see a .lockfile left behind in
/var/tmp/rear.POCVTK1YcYthBK9/outputfs/hostname<br />
Not sure if this is the same issues as OP described?</p>
<p><strong>/var/tmp after a few days</strong></p>
<pre><code>[user@hostname ~]$ ls -ltr /var/tmp/
total 0
drwx------. 3 root root 22 Aug 12 18:15 rear.KCmijgTOJjTqUbV
drwx------. 3 root root 22 Aug 12 20:02 rear.U90gz6n67xTWFgf
drwx------. 3 root root 22 Aug 13 20:02 rear.EQeMlFVe33gGJlP
drwx------. 3 root root 22 Aug 14 20:02 rear.yjAzqU9UUurUHO3
drwx------. 3 root root 22 Aug 15 20:02 rear.xty6UHH89BiuiSD
drwx------. 3 root root 22 Aug 16 20:03 rear.4qZcRXCwTiBB702
</code></pre>
<p><strong>/usr/sbin/rear -v mkrescue</strong></p>
<pre><code>[user@hostname ~]$ sudo /usr/sbin/rear -v mkrescue
[sudo] password for user:
Relax-and-Recover 2.6-git.4526.6589c8d2.master.changed / 2021-08-06
Running rear mkrescue (PID 590092 date 2021-08-17 15:28:20)
Using log file: /var/log/rear/rear-hostname.log
Running workflow mkrescue on the normal/original system
Using autodetected kernel '/boot/vmlinuz-4.18.0-305.10.2.el8_4.x86_64' as kernel in the recovery system
Creating disk layout
Overwriting existing disk layout file /var/lib/rear/layout/disklayout.conf
Using guessed bootloader 'GRUB' for 'rear recover' (found in first bytes on /dev/sda)
Verifying that the entries in /var/lib/rear/layout/disklayout.conf are correct
Created disk layout (check the results in /var/lib/rear/layout/disklayout.conf)
Creating recovery system root filesystem skeleton layout
Copying logfile /var/log/rear/rear-hostname.log into initramfs as '/tmp/rear-hostname-partial-2021-08-17T15:28:25+02:00.log'
Copying files and directories
Copying binaries and libraries
Copying all kernel modules in /lib/modules/4.18.0-305.10.2.el8_4.x86_64 (MODULES contains 'all_modules')
Copying all files in /lib*/firmware/
Broken symlink '/usr/lib/modules/4.18.0-305.10.2.el8_4.x86_64/build' in recovery system because 'readlink' cannot determine its link target
Broken symlink '/usr/lib/modules/4.18.0-305.10.2.el8_4.x86_64/source' in recovery system because 'readlink' cannot determine its link target
Broken symlink '/usr/lib/firmware/4.18.0-240.8.1.el8_3.x86_64/intel-ucode/06-8c-01' in recovery system because 'readlink' cannot determine its link target
Broken symlink '/usr/lib/firmware/4.18.0-193.19.1.el8_2.x86_64/intel-ucode/06-8c-01' in recovery system because 'readlink' cannot determine its link target
Broken symlink '/usr/lib/firmware/4.18.0-193.28.1.el8_2.x86_64/intel-ucode/06-8c-01' in recovery system because 'readlink' cannot determine its link target
Broken symlink '/usr/lib/firmware/4.18.0-240.1.1.el8_3.x86_64/intel-ucode/06-8c-01' in recovery system because 'readlink' cannot determine its link target
Testing that the recovery system in /var/tmp/rear.POCVTK1YcYthBK9/rootfs contains a usable system
Skipped ldd test for '/usr/lib64/nagios/plugins/check_selinux' (owner 'nrpe' not in TRUSTED_FILE_OWNERS)
Skipped ldd test for '/usr/lib64/nagios/plugins/check_multiprocs' (owner 'nrpe' not in TRUSTED_FILE_OWNERS)
Creating recovery/rescue system initramfs/initrd initrd.cgz with gzip default compression
Created initrd.cgz with gzip default compression (544183325 bytes) in 58 seconds
Making ISO image
Wrote ISO image: /var/lib/rear/output/rear-hostname.iso (532M)
Exiting rear mkrescue (PID 590092) and its descendant processes ...
Running exit tasks
Could not remove build area /var/tmp/rear.POCVTK1YcYthBK9 (something still exists therein)
To manually remove the build area use (with caution): rm -Rf --one-file-system /var/tmp/rear.POCVTK1YcYthBK9
</code></pre>
<p><strong>ls -latR /var/tmp/rear.POCVTK1YcYthBK9</strong></p>
<pre><code>[user@hostname ~]$ sudo ls -latR /var/tmp/rear.POCVTK1YcYthBK9
/var/tmp/rear.POCVTK1YcYthBK9:
total 4
drwxrwxrwt. 13 root root 4096 Aug 17 15:30 ..
drwx------.  3 root root   22 Aug 17 15:30 .
drwx------.  3 root root   30 Aug 17 15:30 outputfs

/var/tmp/rear.POCVTK1YcYthBK9/outputfs:
total 0
drwx------. 3 root root 22 Aug 17 15:30 ..
drwxr-x---. 2 root root 23 Aug 17 15:30 hostname
drwx------. 3 root root 30 Aug 17 15:30 .

/var/tmp/rear.POCVTK1YcYthBK9/outputfs/hostname:
total 0
drwxr-x---. 2 root root 23 Aug 17 15:30 .
-rw-------. 1 root root  0 Aug 17 15:30 .lockfile
drwx------. 3 root root 30 Aug 17 15:30 ..
</code></pre>
<h4 id="gdha_commented_at_2021-08-17_1542"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/2667#issuecomment-900409532">2021-08-17 15:42</a>:<a class="headerlink" href="#gdha_commented_at_2021-08-17_1542" title="Permanent link">&para;</a></h4>
<p>@pcahyna @jsmeix I was so bold to address this issue to you as the last
changes were made by you on this area of cleanup or not to cleanup.</p>
<h4 id="pcahyna_commented_at_2021-08-17_1728"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2667#issuecomment-900492936">2021-08-17 17:28</a>:<a class="headerlink" href="#pcahyna_commented_at_2021-08-17_1728" title="Permanent link">&para;</a></h4>
<p>@gdha sure, I think I am the right person, but unfortunately I am afraid
I can look at the problem only next week, not earlier.</p>
<h4 id="jsmeix_commented_at_2021-09-03_1002"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2667#issuecomment-912418890">2021-09-03 10:02</a>:<a class="headerlink" href="#jsmeix_commented_at_2021-09-03_1002" title="Permanent link">&para;</a></h4>
<p>@hpannenb<br />
I can reproduce it.<br />
After "rear -v recover" I have</p>
<pre><code>RESCUE localhost:~ # ls -ld /var/tmp/rear*
drwx------ 3 root root 0 Sep  3 11:57 /var/tmp/rear.aYeRj4poiApK787

RESCUE localhost:~ # find /var/tmp/rear.aYeRj4poiApK787 -ls
26478 0 drwx------ 3 root root 0 Sep 3 11:57 /var/tmp/rear.aYeRj4poiApK787
26849 0 drwxr-xr-x 2 root root 0 Sep 3 11:54 /var/tmp/rear.aYeRj4poiApK787/outputfs
</code></pre>
<p>I did not notice it because I always run <code>rear</code> in debug mode (usually
with <code>-D</code>)<br />
and in debug mode the build area is kept anyway.</p>
<h4 id="jsmeix_commented_at_2021-09-03_1041"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2667#issuecomment-912442380">2021-09-03 10:41</a>:<a class="headerlink" href="#jsmeix_commented_at_2021-09-03_1041" title="Permanent link">&para;</a></h4>
<p>Got it:<br />
In lib/_input-output-functions.sh there is</p>
<pre><code>remove_temporary_mountpoint '$BUILD_DIR/outputfs' || BugError "..."
</code></pre>
<p>which results (with special added <code>set -x</code>) in the log</p>
<pre><code>++ remove_temporary_mountpoint '$BUILD_DIR/outputfs'
++ test -d '$BUILD_DIR/outputfs'
</code></pre>
<p>so <code>$BUILD_DIR</code> is not evaluated (and then <code>$BUILD_DIR/outputfs</code> is no
directory).</p>
<h4 id="jsmeix_commented_at_2021-09-03_1106"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2667#issuecomment-912455452">2021-09-03 11:06</a>:<a class="headerlink" href="#jsmeix_commented_at_2021-09-03_1106" title="Permanent link">&para;</a></h4>
<p>@hpannenb @patrikdahlsll<br />
could you test whether or not my changes in<br />
<a href="https://github.com/rear/rear/pull/2675/files">https://github.com/rear/rear/pull/2675/files</a><br />
also makes things work for your use cases?</p>
<h4 id="patrikdahlsll_commented_at_2021-09-06_1007"><img src="https://avatars.githubusercontent.com/u/61880083?v=4" width="50"><a href="https://github.com/patrikdahlsll">patrikdahlsll</a> commented at <a href="https://github.com/rear/rear/issues/2667#issuecomment-913522802">2021-09-06 10:07</a>:<a class="headerlink" href="#patrikdahlsll_commented_at_2021-09-06_1007" title="Permanent link">&para;</a></h4>
<p>Same problem? I did the following, not a Git expert.</p>
<pre><code>git clone -b jsmeix-fix-issue-2667 git://github.com/rear/rear.git

[user@hostname ~]$ rear --version
`Relax-and-Recover 2.6-git.4531.190cf104.jsmeixfixissue2667.changed / 2021-09-03`
</code></pre>
<p>Sorry for formating, output from<br />
cat site.conf<br />
rear mkrescue<br />
ls -latr buildarea<br />
rear -D mkrescue</p>
<pre><code>[user@hostname ~]$ sudo cat /etc/rear/site.conf
OUTPUT=ISO
BACKUP=CDM
export LD_LIBRARY_PATH="$LD_LIBRARY_PATH:/usr/lib64/python3.6/site-packages:/usr/lib64/python3.6/site-packages/hawkey:/usr/lib64/bind9-export:/usr/lib64/eog:/usr/lib64/samba:/usr/lib64/firefox"


[user@hostname ~]$ sudo rear mkrescue
Broken symlink '/usr/lib/modules/4.18.0-305.10.2.el8_4.x86_64/build' in recovery system because 'readlink' cannot determine its link target
Broken symlink '/usr/lib/modules/4.18.0-305.10.2.el8_4.x86_64/source' in recovery system because 'readlink' cannot determine its link target
Broken symlink '/usr/lib/firmware/4.18.0-240.8.1.el8_3.x86_64/intel-ucode/06-8c-01' in recovery system because 'readlink' cannot determine its link target
Broken symlink '/usr/lib/firmware/4.18.0-193.19.1.el8_2.x86_64/intel-ucode/06-8c-01' in recovery system because 'readlink' cannot determine its link target
Broken symlink '/usr/lib/firmware/4.18.0-193.28.1.el8_2.x86_64/intel-ucode/06-8c-01' in recovery system because 'readlink' cannot determine its link target
Broken symlink '/usr/lib/firmware/4.18.0-240.1.1.el8_3.x86_64/intel-ucode/06-8c-01' in recovery system because 'readlink' cannot determine its link target
Skipped ldd test for '/usr/lib64/nagios/plugins/check_selinux' (owner 'nrpe' not in TRUSTED_FILE_OWNERS)
Skipped ldd test for '/usr/lib64/nagios/plugins/check_multiprocs' (owner 'nrpe' not in TRUSTED_FILE_OWNERS)
ERROR:
====================
BUG in /usr/share/rear/lib/_input-output-functions.sh line 321:
'Directory /var/tmp/rear.tUSHcoVO9caZrAX/outputfs not empty, cannot remove'
--------------------
Please report this issue at https://github.com/rear/rear/issues
and include at least all related parts from /var/log/rear/rear-hostname.log
preferably the whole debug information via 'rear -D mkrescue'
====================
Some latest log messages since the last called script 980_umount_output_dir.sh:
  2021-09-06 11:28:33.539512164 Finished running mkrescue workflow
  2021-09-06 11:28:33.548450313 Exiting rear mkrescue (PID 1273774) and its descendant processes ...
  2021-09-06 11:28:36.578445245 rear,1273774 /sbin/rear mkrescue
                                  `-rear,1325360 /sbin/rear mkrescue
                                      `-pstree,1325361 -Aplau 1273774
  2021-09-06 11:28:36.604105283 Running exit tasks
  2021-09-06 11:28:36.611716539 Finished rear mkrescue in 133 seconds
  2021-09-06 11:28:36.615849223 Removing build area /var/tmp/rear.tUSHcoVO9caZrAX
Use debug mode '-d' for some debug messages or debugscript mode '-D' for full debug messages with 'set -x' output
Aborting due to an error, check /var/log/rear/rear-hostname.log for details
Terminated
[user@hostname ~]$


[user@hostname ~]$ sudo ls -latr /var/tmp/rear.tUSHcoVO9caZrAX/
total 4
drwx------.  3 root root   30 Sep  6 11:28 outputfs
drwx------.  3 root root   22 Sep  6 11:28 .
drwxrwxrwt. 34 root root 4096 Sep  6 11:28 ..

[user@hostname ~]$ sudo ls -latr /var/tmp/rear.tUSHcoVO9caZrAX/outputfs
total 0
drwx------. 3 root root 30 Sep  6 11:28 .
drwxr-x---. 2 root root 23 Sep  6 11:28 hostname
drwx------. 3 root root 22 Sep  6 11:28 ..

[user@hostname ~]$ sudo ls -latr /var/tmp/rear.tUSHcoVO9caZrAX/outputfs/hostname
total 0
drwx------. 3 root root 30 Sep  6 11:28 ..
-rw-------. 1 root root  0 Sep  6 11:28 .lockfile
drwxr-x---. 2 root root 23 Sep  6 11:28 .


[user@hostname ~]$ sudo rear -D mkrescue
Relax-and-Recover 2.6-git.4531.190cf104.jsmeixfixissue2667.changed / 2021-09-03
Running rear mkrescue (PID 1325570 date 2021-09-06 11:32:52)
Command line options: /sbin/rear -D mkrescue
Using log file: /var/log/rear/rear-hostname.log
Using build area: /var/tmp/rear.wPgkkP26fOdvCt1
Running workflow mkrescue on the normal/original system
Using '/bin/mkisofs' to create ISO filesystem images
Using autodetected kernel '/boot/vmlinuz-4.18.0-305.10.2.el8_4.x86_64' as kernel in the recovery system
Creating disk layout
Overwriting existing disk layout file /var/lib/rear/layout/disklayout.conf
Disabling excluded components in /var/lib/rear/layout/disklayout.conf
Using guessed bootloader 'GRUB' for 'rear recover' (found in first bytes on /dev/sda)
Verifying that the entries in /var/lib/rear/layout/disklayout.conf are correct
Created disk layout (check the results in /var/lib/rear/layout/disklayout.conf)
Creating recovery system root filesystem skeleton layout
Handling network interface 'ens160'
ens160 is a physical device
Handled network interface 'ens160'
Included current keyboard mapping (via 'dumpkeys -f')
Included default US keyboard mapping /lib/kbd/keymaps/legacy/i386/qwerty/defkeymap.map.gz
Included other keyboard mappings in /lib/kbd/keymaps
Copying logfile /var/log/rear/rear-hostname.log into initramfs as '/tmp/rear-hostname-partial-2021-09-06T11:32:58+02:00.log'
Copying files and directories
Copying binaries and libraries
Copying all kernel modules in /lib/modules/4.18.0-305.10.2.el8_4.x86_64 (MODULES contains 'all_modules')
Copying all files in /lib*/firmware/
Skip copying broken symlink '/etc/mtab' target '/proc/1353351/mounts' on /proc/ /sys/ /dev/ or /run/
Broken symlink '/usr/lib/modules/4.18.0-305.10.2.el8_4.x86_64/build' in recovery system because 'readlink' cannot determine its link target
Broken symlink '/usr/lib/modules/4.18.0-305.10.2.el8_4.x86_64/source' in recovery system because 'readlink' cannot determine its link target
Broken symlink '/usr/lib/firmware/4.18.0-240.8.1.el8_3.x86_64/intel-ucode/06-8c-01' in recovery system because 'readlink' cannot determine its link target
Broken symlink '/usr/lib/firmware/4.18.0-193.19.1.el8_2.x86_64/intel-ucode/06-8c-01' in recovery system because 'readlink' cannot determine its link target
Broken symlink '/usr/lib/firmware/4.18.0-193.28.1.el8_2.x86_64/intel-ucode/06-8c-01' in recovery system because 'readlink' cannot determine its link target
Broken symlink '/usr/lib/firmware/4.18.0-240.1.1.el8_3.x86_64/intel-ucode/06-8c-01' in recovery system because 'readlink' cannot determine its link target
Testing that the recovery system in /var/tmp/rear.wPgkkP26fOdvCt1/rootfs contains a usable system
Testing each binary with 'ldd' and look for 'not found' libraries within the recovery system
Skipped ldd test for '/usr/lib64/nagios/plugins/check_selinux' (owner 'nrpe' not in TRUSTED_FILE_OWNERS)
Skipped ldd test for '/usr/lib64/nagios/plugins/check_multiprocs' (owner 'nrpe' not in TRUSTED_FILE_OWNERS)
Testing that the existing programs in the PROGS array can be found as executable command within the recovery system
Testing that each program in the REQUIRED_PROGS array can be found as executable command within the recovery system
Creating recovery/rescue system initramfs/initrd initrd.cgz with gzip default compression
Created initrd.cgz with gzip default compression (539068831 bytes) in 54 seconds
Making ISO image
Wrote ISO image: /var/lib/rear/output/rear-hostname.iso (527M)
Exiting rear mkrescue (PID 1325570) and its descendant processes ...
Running exit tasks
To remove the build area use (with caution): rm -Rf --one-file-system /var/tmp/rear.wPgkkP26fOdvCt1
[user@hostname ~]$
</code></pre>
<h4 id="jsmeix_commented_at_2021-09-07_1253"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2667#issuecomment-914281285">2021-09-07 12:53</a>:<a class="headerlink" href="#jsmeix_commented_at_2021-09-07_1253" title="Permanent link">&para;</a></h4>
<p>@patrikdahlsll<br />
your issue seems to be specific for <code>BACKUP=CDM</code><br />
because for me "rear mkrescue" and "rear mkbackup" work with
<code>BACKUP=NETFS</code>.</p>
<p>I am not a Rubrik CDM Cloud Data Management user<br />
so I cannot reproduce how it really behaves but I will try...</p>
<h4 id="pcahyna_commented_at_2021-09-07_1404"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2667#issuecomment-914334574">2021-09-07 14:04</a>:<a class="headerlink" href="#pcahyna_commented_at_2021-09-07_1404" title="Permanent link">&para;</a></h4>
<p>Thank you @hpannenb for noticing the bug and @jsmeix for fixing it,
sorry for having introduced the problem.<br />
@patrikdahlsll I suspect there are two different issues. And looking at
what you have provided, I suspect <code>.lockfile</code> may be the problem. Can
you please provide <code>/var/log/rear/rear-hostname.log</code> that was produced
by the failing run?</p>
<h4 id="pcahyna_commented_at_2021-09-07_1434"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2667#issuecomment-914358940">2021-09-07 14:34</a>:<a class="headerlink" href="#pcahyna_commented_at_2021-09-07_1434" title="Permanent link">&para;</a></h4>
<p>@jsmeix I can reproduce the problem without CDM quite easily.</p>
<pre><code>git clone -b jsmeix-fix-issue-2667 git://github.com/rear/rear.git
cd rear/
cat &gt;&gt; etc/rear/local.conf &lt;&lt;EOF
OUTPUT=ISO
#BACKUP=CDM
EOF
./usr/sbin/rear mkrescue
(...)
ERROR: 
====================
BUG in /root/rear/usr/share/rear/lib/_input-output-functions.sh line 321:
'Directory /var/tmp/rear.1z4h8eA73CUU9eb/outputfs not empty, cannot remove'
--------------------
Please report this issue at https://github.com/rear/rear/issues
and include at least all related parts from /root/rear/var/log/rear/....log
preferably the whole debug information via 'rear -D mkrescue'
====================
Some latest log messages since the last called script 980_umount_output_dir.sh:
  2021-09-07 10:16:56.484539609 Finished running mkrescue workflow
  2021-09-07 10:16:56.505907556 Exiting rear mkrescue (PID 24655) and its descendant processes ...
  2021-09-07 10:16:59.530845833 rear,24655 ./usr/sbin/rear mkrescue
                                  `-rear,43913 ./usr/sbin/rear mkrescue
                                      `-pstree,43914 -Aplau 24655
  2021-09-07 10:16:59.559714020 Running exit tasks
  2021-09-07 10:16:59.566259476 Finished rear mkrescue in 237 seconds
  2021-09-07 10:16:59.570458104 Removing build area /var/tmp/rear.1z4h8eA73CUU9eb
Use debug mode '-d' for some debug messages or debugscript mode '-D' for full debug messages with 'set -x' output
Aborting due to an error, check /root/rear/var/log/rear/....log for details
Terminated
</code></pre>
<p>I suspect the fact that both OUTPUT_URL and BACKUP_URL are unset is
triggering the problem. <code>echo OUTPUT_URL=null &gt;&gt; etc/rear/local.conf</code>
fixes it.<br />
Now the question is, what is the intended semantics of <code>OUTPUT_URL=</code>
(empty, which is the default) if <code>BACKUP_URL=</code> as well (otherwise
<code>OUTPUT_URL</code> inherits the value of <code>BACKUP_URL</code> by default) and whether
it is intended to be different from <code>OUTPUT_URL=null</code>.<br />
Note that <code>BACKUP_URL=</code> (empty) is quite common if using external backup
methods, because they usually have no use for <code>BACKUP_URL</code>.</p>
<h4 id="jsmeix_commented_at_2021-09-07_1438"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2667#issuecomment-914361254">2021-09-07 14:38</a>:<a class="headerlink" href="#jsmeix_commented_at_2021-09-07_1438" title="Permanent link">&para;</a></h4>
<p>@pcahyna<br />
no need to say sorry for that little annoyance bug.<br />
You had cleaned up a possibly destructive mess of various scattered
code<br />
which is a major improvement towards more fail-safe behaviour of ReaR.<br />
Again many thanks for all your work!</p>
<h4 id="pcahyna_commented_at_2021-09-07_1439"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2667#issuecomment-914362451">2021-09-07 14:39</a>:<a class="headerlink" href="#pcahyna_commented_at_2021-09-07_1439" title="Permanent link">&para;</a></h4>
<p>To reproduce the problem in debug modes: adding <code>KEEP_BUILD_DIR=no</code> to
the configuration file will do the trick. (By default, the vale is <code>yes</code>
in debug modes, hiding the problem.)</p>
<h4 id="jsmeix_commented_at_2021-09-07_1441"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2667#issuecomment-914363702">2021-09-07 14:41</a>:<a class="headerlink" href="#jsmeix_commented_at_2021-09-07_1441" title="Permanent link">&para;</a></h4>
<p>@pcahyna<br />
thank you for your reproducer!<br />
I could not reproduce it with</p>
<pre><code>OUTPUT=ISO
BACKUP=CDM
BACKUP_URL=nfs://192.168.122.1/nfs
</code></pre>
<p>(I needed to skip prep/CDM/default/450_check_cdm_client.sh to not
error out there).<br />
I did not notice that both OUTPUT_URL and BACKUP_URL are unset in<br />
<a href="https://github.com/rear/rear/issues/2667#issuecomment-913522802">https://github.com/rear/rear/issues/2667#issuecomment-913522802</a></p>
<h4 id="pcahyna_commented_at_2021-09-07_1441"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2667#issuecomment-914363808">2021-09-07 14:41</a>:<a class="headerlink" href="#pcahyna_commented_at_2021-09-07_1441" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Can you please provide <code>/var/log/rear/rear-hostname.log</code> that was
produced by the failing run?</p>
</blockquote>
<p>actually, you don't have to, I can reproduce the problem now.</p>
<h4 id="jsmeix_commented_at_2021-09-07_1446"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2667#issuecomment-914368204">2021-09-07 14:46</a>:<a class="headerlink" href="#jsmeix_commented_at_2021-09-07_1446" title="Permanent link">&para;</a></h4>
<p>Regarding whether or not OUTPUT_URL and/or BACKUP_URL must be set<br />
I found in <code>man rear</code>:</p>
<pre><code>An example to use TSM for backup and ISO for output
would be to add these lines to /etc/rear/local.conf
(no need to define a BACKUP_URL when
 using an external backup solution):

BACKUP=TSM
OUTPUT=ISO
</code></pre>
<p>so it seems there are cases that are intended to work<br />
with both OUTPUT_URL and BACKUP_URL unset.</p>
<p>See also<br />
<a href="https://github.com/rear/rear/issues/1532#issuecomment-336810460">https://github.com/rear/rear/issues/1532#issuecomment-336810460</a><br />
and<br />
<a href="https://github.com/rear/rear/blob/master/usr/share/rear/prep/default/040_check_backup_and_output_scheme.sh">https://github.com/rear/rear/blob/master/usr/share/rear/prep/default/040_check_backup_and_output_scheme.sh</a></p>
<p>According to<br />
<a href="https://github.com/rear/rear/blob/master/doc/user-guide/16-Rubrik-CDM.adoc">https://github.com/rear/rear/blob/master/doc/user-guide/16-Rubrik-CDM.adoc</a><br />
it seems also <code>BACKUP=CDM</code> is meant to work<br />
without OUTPUT_URL and/or BACKUP_URL.</p>
<h4 id="patrikdahlsll_commented_at_2021-09-07_1458"><img src="https://avatars.githubusercontent.com/u/61880083?v=4" width="50"><a href="https://github.com/patrikdahlsll">patrikdahlsll</a> commented at <a href="https://github.com/rear/rear/issues/2667#issuecomment-914377933">2021-09-07 14:58</a>:<a class="headerlink" href="#patrikdahlsll_commented_at_2021-09-07_1458" title="Permanent link">&para;</a></h4>
<p>Hi,<br />
If I understand correctly you don't need any further logfiles from me
atm?</p>
<p>I have verified that adding to OUTPUT_URL=null to site.conf solved the
problem as suggested.<br />
We have not used it with previous version of rear (2.5-something) with
CDM, we just let it drop the iso in /var/lib/rear/output/.</p>
<p>Current site.conf</p>
<pre><code>OUTPUT=ISO
BACKUP=CDM
export LD_LIBRARY_PATH="$LD_LIBRARY_PATH:/usr/lib64/python3.6/site-packages:/usr/lib64/python3.6/site-packages/hawkey:/usr/lib64/bind9-export:/usr/lib64/eog:/usr/lib64/samba:/usr/lib64/firefox"
OUTPUT_URL=null
</code></pre>
<h4 id="jsmeix_commented_at_2021-09-07_1502"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2667#issuecomment-914384251">2021-09-07 15:02</a>:<a class="headerlink" href="#jsmeix_commented_at_2021-09-07_1502" title="Permanent link">&para;</a></h4>
<p>@patrikdahlsll<br />
thank you for your prompt feedback and for your workaround!</p>
<p>We have to find out what makes things like plain</p>
<pre><code>OUTPUT=ISO
BACKUP=CDM
</code></pre>
<p>no longer work which is a related but separated issue.</p>
<h4 id="pcahyna_commented_at_2021-09-07_1622"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2667#issuecomment-914447326">2021-09-07 16:22</a>:<a class="headerlink" href="#pcahyna_commented_at_2021-09-07_1622" title="Permanent link">&para;</a></h4>
<blockquote>
<p>so it seems there are cases that are intended to work<br />
with both OUTPUT_URL and BACKUP_URL unset.</p>
</blockquote>
<p><code>BACKUP_URL</code> unset (empty) is for sure supported, because many backup
methods do not make any use of it. One still needs some destination for
the output image (<code>OUTPUT_URL</code>) though. When <code>OUTPUT_URL=null</code>, ReaR
simply leaves the ISO image under <code>/var/lib/rear</code> and does not copy it
anywhere, which may be a satisfactory solution in some cases. The
question is, is <code>OUTPUT_URL</code> empty or unset intended to be the
equivalent of the literal <code>null</code>? If so, one might simply set
<code>OUTPUT_URL=null</code>, if otherwise unset, in default.conf or in some
script. This will simplify the code which would not need to deal with
the two cases: empty and <code>null</code>. See for example
<a href="https://github.com/rear/rear/blob/f06e0d22eeb3bd45ad8ce0b8fce0b538e4534f93/usr/share/rear/prep/default/040_check_backup_and_output_scheme.sh#L69">https://github.com/rear/rear/blob/f06e0d22eeb3bd45ad8ce0b8fce0b538e4534f93/usr/share/rear/prep/default/040_check_backup_and_output_scheme.sh#L69</a>
which correctly errors out if one uses <code>OUTPUT_URL=null</code> with <code>USB</code> but
does not complain in case of an empty <code>OUTPUT_URL</code>.<br />
Or
<a href="https://github.com/rear/rear/blob/f06e0d22eeb3bd45ad8ce0b8fce0b538e4534f93/usr/share/rear/output/default/250_create_lock.sh#L9">https://github.com/rear/rear/blob/f06e0d22eeb3bd45ad8ce0b8fce0b538e4534f93/usr/share/rear/output/default/250_create_lock.sh#L9</a>
which needs to be updated to use quotes around <code>$scheme</code> because
<code>$scheme</code> may be empty (which may well be the root cause of the problem
here).</p>
<h4 id="hpannenb_commented_at_2021-09-07_1733"><img src="https://avatars.githubusercontent.com/u/13567759?u=b037e492e58a5f63f35277b3606d500cd622c8ed&v=4" width="50"><a href="https://github.com/hpannenb">hpannenb</a> commented at <a href="https://github.com/rear/rear/issues/2667#issuecomment-914493219">2021-09-07 17:33</a>:<a class="headerlink" href="#hpannenb_commented_at_2021-09-07_1733" title="Permanent link">&para;</a></h4>
<blockquote>
<p>@hpannenb @patrikdahlsll<br />
could you test whether or not my changes in<br />
<a href="https://github.com/rear/rear/pull/2675/files">https://github.com/rear/rear/pull/2675/files</a><br />
also makes things work for your use cases?</p>
</blockquote>
<p>Hi, @jsmeix.</p>
<p>With Your fix it worked for my use case. The mentioned error is not
occurring any more and <code>/var/tmp/rear.*</code> has been removed.</p>
<p>Regards,<br />
Holger.</p>
<h4 id="jsmeix_commented_at_2021-09-08_1157"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2667#issuecomment-915170181">2021-09-08 11:57</a>:<a class="headerlink" href="#jsmeix_commented_at_2021-09-08_1157" title="Permanent link">&para;</a></h4>
<p>@pcahyna<br />
thank you for pointing me into the right direction<br />
that
<a href="https://github.com/rear/rear/issues/2676">https://github.com/rear/rear/issues/2676</a><br />
is related to <code>scheme_supports_filesystem()</code></p>
<p>@hpannenb<br />
thank you for verifying it.<br />
It helps us a lot when also others verify things.</p>
<h4 id="jsmeix_commented_at_2021-09-09_1106"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2667#issuecomment-915987177">2021-09-09 11:06</a>:<a class="headerlink" href="#jsmeix_commented_at_2021-09-09_1106" title="Permanent link">&para;</a></h4>
<p>With
<a href="https://github.com/rear/rear/pull/2675">https://github.com/rear/rear/pull/2675</a>
merged<br />
this issue should be fixed.</p>
<h4 id="patrikdahlsll_commented_at_2021-09-09_1144"><img src="https://avatars.githubusercontent.com/u/61880083?v=4" width="50"><a href="https://github.com/patrikdahlsll">patrikdahlsll</a> commented at <a href="https://github.com/rear/rear/issues/2667#issuecomment-916013670">2021-09-09 11:44</a>:<a class="headerlink" href="#patrikdahlsll_commented_at_2021-09-09_1144" title="Permanent link">&para;</a></h4>
<p>Hi, do you want me to open a separate issue regarding our problem that
build area is not removed if we had our old site.conf? Or shouls that
problem be solved also?</p>
<h4 id="jsmeix_commented_at_2021-09-09_1329"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2667#issuecomment-916093623">2021-09-09 13:29</a>:<a class="headerlink" href="#jsmeix_commented_at_2021-09-09_1329" title="Permanent link">&para;</a></h4>
<p>@patrikdahlsll<br />
both issues should be solved<br />
since
<a href="https://github.com/rear/rear/pull/2675">https://github.com/rear/rear/pull/2675</a>
is merged.</p>
<p>In particular a plain config like</p>
<pre><code>OUTPUT=ISO
BACKUP=CDM
</code></pre>
<p>should again work.</p>
<p>But I cannot actually test <code>BACKUP=CDM</code> issues, cf.<br />
<a href="https://github.com/rear/rear/issues/2667#issuecomment-914281285">https://github.com/rear/rear/issues/2667#issuecomment-914281285</a></p>
<p>So I would appreciate feedback whether or not<br />
the current GitHub ReaR master code that contains in particular<br />
<a href="https://github.com/rear/rear/commit/675eed16a5a048ace4cfdfadaa2b65c211604d88">https://github.com/rear/rear/commit/675eed16a5a048ace4cfdfadaa2b65c211604d88</a><br />
again works with a plain config like</p>
<pre><code>OUTPUT=ISO
BACKUP=CDM
</code></pre>
<h4 id="patrikdahlsll_commented_at_2021-09-09_1355"><img src="https://avatars.githubusercontent.com/u/61880083?v=4" width="50"><a href="https://github.com/patrikdahlsll">patrikdahlsll</a> commented at <a href="https://github.com/rear/rear/issues/2667#issuecomment-916120839">2021-09-09 13:55</a>:<a class="headerlink" href="#patrikdahlsll_commented_at_2021-09-09_1355" title="Permanent link">&para;</a></h4>
<p>Thanks, I will give it a try today or tomorrow.</p>
<h4 id="patrikdahlsll_commented_at_2021-09-19_1011"><img src="https://avatars.githubusercontent.com/u/61880083?v=4" width="50"><a href="https://github.com/patrikdahlsll">patrikdahlsll</a> commented at <a href="https://github.com/rear/rear/issues/2667#issuecomment-922448469">2021-09-19 10:11</a>:<a class="headerlink" href="#patrikdahlsll_commented_at_2021-09-19_1011" title="Permanent link">&para;</a></h4>
<p>Hi,</p>
<p>Forgot to inform you that your fixes seem to work perfect.<br />
We tested the new version last weekend.</p>
<h4 id="jsmeix_commented_at_2021-09-20_0721"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2667#issuecomment-922688837">2021-09-20 07:21</a>:<a class="headerlink" href="#jsmeix_commented_at_2021-09-20_0721" title="Permanent link">&para;</a></h4>
<p>@patrikdahlsll<br />
thank you for your feedback!<br />
Even a bit late feedback helps us because the more feedback the better.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2023 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2021-08-06.2667.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
