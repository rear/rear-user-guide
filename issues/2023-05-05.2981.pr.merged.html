<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#2981 PR merged: Increase USER_INPUT_INTERRUPT_TIMEOUT default from 10 to 30 seconds - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#2981 PR merged: Increase USER_INPUT_INTERRUPT_TIMEOUT default from 10 to 30 seconds";
        var mkdocs_page_input_path = "issues/2023-05-05.2981.pr.merged.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#2981 PR merged: Increase USER_INPUT_INTERRUPT_TIMEOUT default from 10 to 30 seconds</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="2981_pr_merged_increase_user_input_interrupt_timeout_default_from_10_to_30_seconds"><a href="https://github.com/rear/rear/pull/2981">#2981 PR</a> <code>merged</code>: Increase USER_INPUT_INTERRUPT_TIMEOUT default from 10 to 30 seconds<a class="headerlink" href="#2981_pr_merged_increase_user_input_interrupt_timeout_default_from_10_to_30_seconds" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>fixed / solved / done</code></p>
<h4 id="jsmeix_opened_issue_at_2023-05-05_1339"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> opened issue at <a href="https://github.com/rear/rear/pull/2981">2023-05-05 13:39</a>:<a class="headerlink" href="#jsmeix_opened_issue_at_2023-05-05_1339" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>Type: <strong>Enhancement</strong></p>
</li>
<li>
<p>Impact: <strong>Normal</strong></p>
</li>
<li>
<p>How was this pull request tested?</p>
</li>
</ul>
<p>In current GitHub master code since DISKS_TO_BE_WIPED="" cf.<br />
<a href="https://github.com/rear/rear/pull/2859">https://github.com/rear/rear/pull/2859</a><br />
there is in layout/recreate/default/120_confirm_wipedisk_disks.sh<br />
a UserInput() dialog like</p>
<pre><code>Disks to be wiped: /dev/sda /dev/sdb /dev/sdd
...
Confirm disks to be wiped and continue 'rear recover'
</code></pre>
<p>which has usually (i.e. when not in MIGRATION_MODE)<br />
a timeout of USER_INPUT_INTERRUPT_TIMEOUT.</p>
<p>During my tests with current GitHub master code<br />
I learned that 10 seconds is far too little time<br />
to read and understand that UserInput message and<br />
then some more time to make a decision whether or not<br />
the automated action is actually the right one.</p>
<p>I.e. 10 seconds was far too little time even for me<br />
where I expected that UserInput dialog but even I<br />
could not actually comprehend what disks will be wiped<br />
and I could not at all make a decision whether or not<br />
those are the right disks.</p>
<p>So the same applies to any UserInput dialog<br />
(in prticular to any unexpected UserInput dialog)<br />
where USER_INPUT_INTERRUPT_TIMEOUT is used<br />
i.e. any UserInput() dialog with a predefined input.</p>
<p>In general a default timeout is useless when it is too short<br />
to let the user understand what is going on and let him<br />
make a decision so in practice such a too short timeout<br />
behaves very user unfiendly.</p>
<ul>
<li>Brief description of the changes in this pull request:</li>
</ul>
<p>In default.conf increased the default USER_INPUT_INTERRUPT_TIMEOUT<br />
from 10 seconds to 30 seconds because 10 seconds is far too little
time<br />
to read and understand a possibly unexpected UserInput() message<br />
and then some more time to make a decision whether or not<br />
the automated action is actually the right one.</p>
<h4 id="jsmeix_commented_at_2023-05-08_0716"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/2981#issuecomment-1537874526">2023-05-08 07:16</a>:<a class="headerlink" href="#jsmeix_commented_at_2023-05-08_0716" title="Permanent link">&para;</a></h4>
<p>@schlomo<br />
thank you for your review.<br />
I fully agree with your above comment<br />
<a href="https://github.com/rear/rear/pull/2981#pullrequestreview-1414902682">https://github.com/rear/rear/pull/2981#pullrequestreview-1414902682</a></p>
<p>Additionlly<br />
<a href="https://stackoverflow.com/questions/4437573/bash-assign-default-value">https://stackoverflow.com/questions/4437573/bash-assign-default-value</a><br />
explains why</p>
<pre><code>VAR="${VAR:-default value}"
</code></pre>
<p>is better in practice than</p>
<pre><code>: "${VAR:=default value}"
</code></pre>
<p>cf. my comment in<br />
<a href="https://github.com/rear/rear/pull/2981/commits/a436ad55e5dc437f173eb3c253341fd4d3c59551">https://github.com/rear/rear/pull/2981/commits/a436ad55e5dc437f173eb3c253341fd4d3c59551</a><br />
excerpt:</p>
<p><code>VAR="${VAR:-default value}"</code> is found by 'grep' for 'VAR=' and<br />
with 'set -x' it shows <code>VAR='default value'</code> (instead of
<code>: 'default value'</code>)<br />
which makes this code easier to understand, debug and maintain,<br />
cf.
<a href="https://github.com/rear/rear/wiki/Coding-Style">https://github.com/rear/rear/wiki/Coding-Style</a></p>
<h4 id="jsmeix_commented_at_2023-05-08_0724"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/2981#issuecomment-1537883949">2023-05-08 07:24</a>:<a class="headerlink" href="#jsmeix_commented_at_2023-05-08_0724" title="Permanent link">&para;</a></h4>
<p>I am wondering why we use</p>
<pre><code>VAR="${VAR:-default value}"
</code></pre>
<p>and not</p>
<pre><code>VAR="${VAR-default value}"
</code></pre>
<p>i.e. why we assign 'defult value' via <code>:-</code><br />
if VAR is unset or null (i.e. unset or empty)<br />
instead of assigning 'defult value' via <code>-</code><br />
only if VAR is unset?</p>
<p>In the former case the user cannot set an empty value via</p>
<pre><code>export VAR=""
</code></pre>
<p>which he could do (if needed) in the latter case.</p>
<p>As far as I see this does not matter with the current<br />
config variables that are set this way because<br />
for none of those which get a non-empty default set<br />
it makes sense for the user to set them to be empty.</p>
<p>So my question is currently only out of curiosity.</p>
<h4 id="jsmeix_commented_at_2023-05-08_0752"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/2981#issuecomment-1537913293">2023-05-08 07:52</a>:<a class="headerlink" href="#jsmeix_commented_at_2023-05-08_0752" title="Permanent link">&para;</a></h4>
<p>I have another question:</p>
<p>What is "the best" way to assign a string of words<br />
via bash parameter expansion?</p>
<p>Currenly I use an unquoted string</p>
<pre><code>VAR="${VAR:-default value}"
</code></pre>
<p>in</p>
<pre><code>USER_INPUT_PROMPT="${USER_INPUT_PROMPT:-enter your input}"
</code></pre>
<p>because we do it this way already in<br />
rear/output/RAWDISK/Linux-i386/280_create_bootable_disk_image.sh</p>
<pre><code>"${RAWDISK_GPT_PARTITION_NAME:-Rescue System}"
${RAWDISK_BOOT_SYSLINUX_START_INFORMATION:-Starting the rescue system...}
</code></pre>
<p>and<br />
rear/output/RAWDISK/Linux-i386/270_create_grub2_efi_bootloader.sh</p>
<pre><code>"${RAWDISK_BOOT_GRUB_MENUENTRY_TITLE:-Recovery System}"
</code></pre>
<p>Alternatively</p>
<pre><code>VAR="${VAR:-"default value"}"
</code></pre>
<p>would work but the nested double quotes look confusing.<br />
In contrast single quotes like</p>
<pre><code>VAR="${VAR:-'default value'}"
</code></pre>
<p>do not work because (at least with bash version 4.4.23)</p>
<pre><code># unset VAR

# VAR="${VAR:-'default value'}"

# declare -p VAR
declare -- VAR="'default value'"
</code></pre>
<p>the single quotes become part of the assigned value.</p>
<h4 id="schlomo_commented_at_2023-05-08_0825"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/pull/2981#issuecomment-1537957836">2023-05-08 08:25</a>:<a class="headerlink" href="#schlomo_commented_at_2023-05-08_0825" title="Permanent link">&para;</a></h4>
<p>@jsmeix the examples in<br />
<a href="https://tldp.org/LDP/abs/html/parameter-substitution.html#:~:text=variable%3D%0A%23%20variable%20has%20been%20declared%2C%20but%20is%20set%20to%20null.%0A%0Aecho%20%22%24%7Bvariable%2D0%7D%22%20%20%20%20%23%20(no%20output)%0Aecho%20%22%24%7Bvariable%3A%2D1%7D%22%20%20%20%23%201%0A%23%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5E">https://tldp.org/LDP/abs/html/parameter-substitution.html#:~:text=variable%3D%0A%23%20variable%20has%20been%20declared%2C%20but%20is%20set%20to%20null.%0A%0Aecho%20%22%24%7Bvariable%2D0%7D%22%20%20%20%20%23%20(no%20output)%0Aecho%20%22%24%7Bvariable%3A%2D1%7D%22%20%20%20%23%201%0A%23%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5E</a><br />
led me (long long time ago and now again) to always use <code>:-</code> syntax as
it also handles <code>null</code> set variables.</p>
<p>What is bad with <code>VAR="${VAR:-default value}"</code> if it works as
expected?<br />
Even <code>VAR=${VAR:-default value}</code> works the same.</p>
<p>I don't see a need to change anything from our current use of this
parameter substitution and it seems to me that there is no need for
inner quotes around multi word default values either.</p>
<h4 id="jsmeix_commented_at_2023-05-08_0919"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/2981#issuecomment-1538041835">2023-05-08 09:19</a>:<a class="headerlink" href="#jsmeix_commented_at_2023-05-08_0919" title="Permanent link">&para;</a></h4>
<p>By the way regarding <code>${VAR-value}</code>:</p>
<p>As far as I found we have only one case where this is used:<br />
rear/lib/layout-functions.sh</p>
<pre><code>function get_device_from_partition() {
    ...
    partition_number=${2-$(get_partition_number $partition_block_device )}
</code></pre>
<p>It seems to be allowed to call get_device_from_partition<br />
with an empty second argument?</p>
<p>get_device_from_partition is only called in<br />
finalize/Linux-i386/670_run_efibootmgr.sh</p>
<p>@pcahyna<br />
as far as I see from<br />
<code>git log --follow -p usr/share/rear/lib/layout-functions.sh</code><br />
this <code>${VAR-value}</code> parameter expansion is from you in<br />
<a href="https://github.com/rear/rear/commit/fae98be14d0a7de30128f896c879f19259a96ad7">https://github.com/rear/rear/commit/fae98be14d0a7de30128f896c879f19259a96ad7</a><br />
that belongs to<br />
<a href="https://github.com/rear/rear/pull/2608">https://github.com/rear/rear/pull/2608</a><br />
which has very many comments.<br />
Do you perhaps remember why not <code>${VAR:-value}</code> is used in this case?</p>
<h4 id="schlomo_commented_at_2023-05-08_0920"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/pull/2981#issuecomment-1538043661">2023-05-08 09:20</a>:<a class="headerlink" href="#schlomo_commented_at_2023-05-08_0920" title="Permanent link">&para;</a></h4>
<p>No memories, most likely I did it wrong. Off the top of my head I'm not
aware of any reason to use <code>VAR-value</code> instead of <code>VAR:-value</code></p>
<p>Personally, I also find <code>:-</code> easier to read and notice</p>
<h4 id="jsmeix_commented_at_2023-05-08_0925"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/2981#issuecomment-1538049154">2023-05-08 09:25</a>:<a class="headerlink" href="#jsmeix_commented_at_2023-05-08_0925" title="Permanent link">&para;</a></h4>
<p>@schlomo I guess you are not @pcahyna :-)</p>
<h4 id="schlomo_commented_at_2023-05-08_0933"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/pull/2981#issuecomment-1538058456">2023-05-08 09:33</a>:<a class="headerlink" href="#schlomo_commented_at_2023-05-08_0933" title="Permanent link">&para;</a></h4>
<p>Ah yes, that would explain my lack of memory. Well spotted ðŸ˜„</p>
<h4 id="jsmeix_commented_at_2023-05-08_1325"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/2981#issuecomment-1538359020">2023-05-08 13:25</a>:<a class="headerlink" href="#jsmeix_commented_at_2023-05-08_1325" title="Permanent link">&para;</a></h4>
<p>I did<br />
<a href="https://github.com/rear/rear/commit/ad5cac29d948a4a73ee31a47ba515d9f6c305f19">https://github.com/rear/rear/commit/ad5cac29d948a4a73ee31a47ba515d9f6c305f19</a><br />
as addednum to this (already merged) pull request.</p>
<h4 id="jsmeix_commented_at_2023-05-08_1337"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/2981#issuecomment-1538375851">2023-05-08 13:37</a>:<a class="headerlink" href="#jsmeix_commented_at_2023-05-08_1337" title="Permanent link">&para;</a></h4>
<p>Oh - right now I found in default.conf</p>
<pre><code>OPAL_PBA_DEBUG_PASSWORD=''
</code></pre>
<h4 id="jsmeix_commented_at_2023-05-09_0534"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/2981#issuecomment-1539437102">2023-05-09 05:34</a>:<a class="headerlink" href="#jsmeix_commented_at_2023-05-09_0534" title="Permanent link">&para;</a></h4>
<p>I will do a new pull request to clean up in default.conf<br />
all cases of config variables for confidential values<br />
i.e. have a generic explanation comment at the beginning<br />
instead of several similar comments at each place:<br />
<a href="https://github.com/rear/rear/pull/2982">https://github.com/rear/rear/pull/2982</a></p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2024 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2023-05-05.2981.pr.merged.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
