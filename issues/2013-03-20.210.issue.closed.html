<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#210 Issue closed: grub recovery gets confused by --prefix option, system hangs during boot - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#210 Issue closed: grub recovery gets confused by --prefix option, system hangs during boot";
        var mkdocs_page_input_path = "issues/2013-03-20.210.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#210 Issue closed: grub recovery gets confused by --prefix option, system hangs during boot</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="210_issue_closed_grub_recovery_gets_confused_by_--prefix_option_system_hangs_during_boot"><a href="https://github.com/rear/rear/issues/210">#210 Issue</a> <code>closed</code>: grub recovery gets confused by --prefix option, system hangs during boot<a class="headerlink" href="#210_issue_closed_grub_recovery_gets_confused_by_--prefix_option_system_hangs_during_boot" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>bug</code></p>
<h4 id="abbbi_opened_issue_at_2013-03-20_1036"><img src="https://avatars.githubusercontent.com/u/3919561?u=473291dd3dbd58fd0af45714935992a3d416aa6e&v=4" width="50"><a href="https://github.com/abbbi">abbbi</a> opened issue at <a href="https://github.com/rear/rear/issues/210">2013-03-20 10:36</a>:<a class="headerlink" href="#abbbi_opened_issue_at_2013-03-20_1036" title="Permanent link">&para;</a></h4>
<p>hi,</p>
<p>while trying to recover a SLES11 x64 system with REAR everything went
well but the system was unable to boot. GRUB installation was reported
as beeing succesfull but in the detailed logging it failed:</p>
<p>GUB version 0.97 (640K lower / 3072K upper memory)</p>
<p>[ Minimal BASH-like line editing is supported. For the first word,
TAB<br />
lists possible command completions. Anywhere else TAB lists the
possible<br />
completions of a device/filename. ]<br />
grub&gt; device (hd0) /dev/sda<br />
grub&gt; root (hd0,1)<br />
Filesystem type is reiserfs, partition type 0x83<br />
grub&gt; setup --stage2=/boot/grub/stage2 --prefix=/grub (hd0)<br />
Checking if "/grub/stage1" exists... no</p>
<p>Error 15: File not found<br />
grub&gt; quit</p>
<p>it seems the --prefix option did confuse it some kind of a way, with a
simple:</p>
<p>setup --stage2=/boot/grub/stage2 (hd0)</p>
<p>everything went well.</p>
<p>Relax-and-Recover 1.14 / Git</p>
<h4 id="abbbi_commented_at_2013-03-20_1040"><img src="https://avatars.githubusercontent.com/u/3919561?u=473291dd3dbd58fd0af45714935992a3d416aa6e&v=4" width="50"><a href="https://github.com/abbbi">abbbi</a> commented at <a href="https://github.com/rear/rear/issues/210#issuecomment-15168024">2013-03-20 10:40</a>:<a class="headerlink" href="#abbbi_commented_at_2013-03-20_1040" title="Permanent link">&para;</a></h4>
<p>the system did not have a dedicated boot partition, i think it went
wrong because of this, according to the script the prefix stays /grub if
no seperate disk is found:</p>
<p>finalize/Linux-i386/21_install_grub.sh</p>
<pre><code>bootparts=$( (find_partition fs:/boot; find_partition fs:/) | sort | uniq -u )
grub_prefix=/grub
if [[ -z "$bootparts" ]]; then
    bootparts=$(find_partition fs:/)
    grub_prefix=/boot/grub
fi
</code></pre>
<p>i think defaulting to /boot/grub as the prefix makes sense anyway?</p>
<h4 id="gdha_commented_at_2013-03-26_0839"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/210#issuecomment-15446775">2013-03-26 08:39</a>:<a class="headerlink" href="#gdha_commented_at_2013-03-26_0839" title="Permanent link">&para;</a></h4>
<p>do you mean /boot is not mounted by default?</p>
<h4 id="abbbi_commented_at_2013-03-26_1504"><img src="https://avatars.githubusercontent.com/u/3919561?u=473291dd3dbd58fd0af45714935992a3d416aa6e&v=4" width="50"><a href="https://github.com/abbbi">abbbi</a> commented at <a href="https://github.com/rear/rear/issues/210#issuecomment-15463522">2013-03-26 15:04</a>:<a class="headerlink" href="#abbbi_commented_at_2013-03-26_1504" title="Permanent link">&para;</a></h4>
<p>yes, there is no seperate partition for /boot, it exists on / however:</p>
<p>/dev/sda2 on / type reiserfs (rw,acl,user_xattr)<br />
/proc on /proc type proc (rw)<br />
sysfs on /sys type sysfs (rw)<br />
debugfs on /sys/kernel/debug type debugfs (rw)<br />
udev on /dev type tmpfs (rw)<br />
devpts on /dev/pts type devpts (rw,mode=0620,gid=5)<br />
fusectl on /sys/fs/fuse/connections type fusectl (rw)<br />
none on /proc/sys/fs/binfmt_misc type binfmt_misc (rw)</p>
<p>dbupdate:~ # cat /etc/fstab<br />
/dev/sda2 / reiserfs acl,user_xattr 1 1<br />
/dev/sda1 swap swap defaults 0 0<br />
proc /proc proc defaults 0 0<br />
sysfs /sys sysfs noauto 0 0<br />
debugfs /sys/kernel/debug debugfs noauto 0 0<br />
devpts /dev/pts devpts mode=0620,gid=5 0 0<br />
/dev/fd0 /media/floppy auto noauto,user,sync 0 0</p>
<h4 id="gdha_commented_at_2013-03-31_1510"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/210#issuecomment-15692543">2013-03-31 15:10</a>:<a class="headerlink" href="#gdha_commented_at_2013-03-31_1510" title="Permanent link">&para;</a></h4>
<p>@jhoekx any suggestions on this topic?</p>
<h4 id="jhoekx_commented_at_2013-03-31_1518"><img src="https://avatars.githubusercontent.com/u/783473?v=4" width="50"><a href="https://github.com/jhoekx">jhoekx</a> commented at <a href="https://github.com/rear/rear/issues/210#issuecomment-15692654">2013-03-31 15:18</a>:<a class="headerlink" href="#jhoekx_commented_at_2013-03-31_1518" title="Permanent link">&para;</a></h4>
<p>@dagwieers knows this better. I was just sitting idly next to him when
we wrote than and all I did was just nod when he asked a question :-)</p>
<p>But if I look at it, I think we want our initial search fot <code>$bootparts</code>
to return nothing, then the prefix is set to <code>/boot/grub</code>. I don't know
why we also search for fs:/ and do the sort and uniq there.</p>
<h4 id="mclien_commented_at_2013-04-09_1035"><img src="https://avatars.githubusercontent.com/u/4102563?v=4" width="50"><a href="https://github.com/mclien">mclien</a> commented at <a href="https://github.com/rear/rear/issues/210#issuecomment-16105402">2013-04-09 10:35</a>:<a class="headerlink" href="#mclien_commented_at_2013-04-09_1035" title="Permanent link">&para;</a></h4>
<p>Had/have the same issue. Did the workaround another way by creating a
symlink /grub -&gt; /boot/grub on the System before doing the backup<br />
But I think the script should get /boot/grub as prefix, when no separate
boot partition is found</p>
<h4 id="abbbi_commented_at_2013-06-04_0829"><img src="https://avatars.githubusercontent.com/u/3919561?u=473291dd3dbd58fd0af45714935992a3d416aa6e&v=4" width="50"><a href="https://github.com/abbbi">abbbi</a> commented at <a href="https://github.com/rear/rear/issues/210#issuecomment-18895675">2013-06-04 08:29</a>:<a class="headerlink" href="#abbbi_commented_at_2013-06-04_0829" title="Permanent link">&para;</a></h4>
<p>hi guys,</p>
<p>anything new on that? I just ran into the same troubles again and i
think the fix is quite straight-forward :)</p>
<h4 id="gdha_commented_at_2013-06-04_0924"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/210#issuecomment-18898017">2013-06-04 09:24</a>:<a class="headerlink" href="#gdha_commented_at_2013-06-04_0924" title="Permanent link">&para;</a></h4>
<p>Some background info (which is important to understand the why's I
guess)</p>
<p>From the mail archive I found the following (from @dagwieers ):<br />
Re: [rear-users] mbr broken after recover</p>
<p>Anyway, the reason there is a distinction between <code>/grub/stage1</code> and<br />
<code>/boot/grub/stage1</code> is related to the fact that it could be on a
separate<br />
filesystem, in that case <code>/grub/stage1</code> is correct (in fact in most
cases<br />
this is what is happening). So apparently it now fails for cases where
it<br />
should be using <code>/boot/grub/stage1</code>.</p>
<p>The reason the grub installation code is more complex is because we had
to<br />
support this second possibility. Why it now fails, I don't know. We
did<br />
test it when we wrote it ;-)</p>
<p>So how did we do this ?</p>
<p>To know exactly what devices are involved with the boot partition, we<br />
search for the dependencies of fs:/boot and we remove any dependencies
we<br />
find for fs:/ as shown below:</p>
<pre><code> bootparts=$( (find_partition fs:/boot; find_partition fs:/) | sort | uniq -u )
</code></pre>
<p>If in this case bootparts is empty, it means that <code>fs:/boot</code> and <code>fs:/</code>
share<br />
the same partition(s). In which case we need to use <code>/boot/grub</code> as<br />
grub_prefix.</p>
<p>The reason we have this complexity is because if you have software
raid,<br />
you need to be sure both disks are being updated, so we find more than
one<br />
partition ! This explains the complexity, otherwise we could just
compare<br />
the partition of <code>fs:/</code> and <code>fs:/boot</code>.</p>
<p>Once we know the boot partition(s) and we have the correct grub_prefix,
we<br />
can go and look for the disks that relate to these partitions and
install<br />
grub on these.</p>
<p>So how to proceed to debug the problem ? Enable debugging and check
what<br />
Rear reports for <code>find_partition fs:/boot</code> and <code>find_partition fs:/</code>,
that<br />
should give an indication to what is going on.</p>
<p>PS: we're talking about code from
<code>finalize/Linux-i386/21_install_grub.sh</code> and/or
<code>finalize/Linux-i386/22_install_grub2.sh</code></p>
<h4 id="dagwieers_commented_at_2013-06-04_1116"><img src="https://avatars.githubusercontent.com/u/388198?u=0732dee3fe5002278cfbf40359ec431bdcf5f06c&v=4" width="50"><a href="https://github.com/dagwieers">dagwieers</a> commented at <a href="https://github.com/rear/rear/issues/210#issuecomment-18902787">2013-06-04 11:16</a>:<a class="headerlink" href="#dagwieers_commented_at_2013-06-04_1116" title="Permanent link">&para;</a></h4>
<p>@gdha I am sorry, I should have replied to the bug report, instead of
the mailinglist :-/</p>
<h4 id="unknown_commented_at_2013-06-05_1205"><img src="(unknown)" width="50"><a href="(unknown)">(unknown)</a> commented at <a href="https://github.com/rear/rear/issues/210#issuecomment-18971281">2013-06-05 12:05</a>:<a class="headerlink" href="#unknown_commented_at_2013-06-05_1205" title="Permanent link">&para;</a></h4>
<p>hi,</p>
<p>i tried to reproduce, the strange thing is:</p>
<p>after recovering the data to /mnt/local and exiting the rear&gt; command
prompt with "exit" it does not show any error, the grub failure however
is reported to the logfile</p>
<p>if get back into the recovery mode again, skipping the disk
partitioninig it then complains correctly about<br />
missing the boot partition:</p>
<p>rear&gt; exit<br />
Did you restore the backup to /mnt/local ? Are you ready to continue
recovery ? yes<br />
exit<br />
Updated initramfs with new drivers for this system.<br />
Installing GRUB boot loader<br />
ERROR: BUG BUG BUG! Unable to find any /boot partitions<br />
=== Issue report ===<br />
Please report this unexpected issue at:
<a href="https://github.com/rear/rear/issues">https://github.com/rear/rear/issues</a><br />
Also include the relevant bits from /var/log/rear/rear-dbupdate.log</p>
<h1 id="hint_if_you_can_reproduce_the_issue_try_using_the_-d_or_-d_option">HINT: If you can reproduce the issue, try using the -d or -D option !<a class="headerlink" href="#hint_if_you_can_reproduce_the_issue_try_using_the_-d_or_-d_option" title="Permanent link">&para;</a></h1>
<p>Aborting due to an error, check /var/log/rear/rear-dbupdate.log for
details<br />
Terminated</p>
<p>so it seems there must be a difference between executing the recovery
the first and the second time!<br />
Attached you can find the logfile for the first recovery which does NOT
catch the BugIfError, here is the relevant<br />
part with -D</p>
<p>++++ grep -E '^[^ ]+ /dev/sda2 '
/var/opt/sesam/var/lib/rear//var/lib/rear/layout/disktodo.conf<br />
++++ cut -d ' ' -f 3<br />
+++ sort<br />
+++ type=part<br />
+++ [[ part != \p\a\r\t ]]<br />
+++ echo /dev/sda2<br />
+++ for component in '"${ancestors[@]}"'<br />
+++ [[ -n part ]]<br />
++++ get_component_type /dev/sda<br />
++++ grep -E '^[^ ]+ /dev/sda '
/var/opt/sesam/var/lib/rear//var/lib/rear/layout/disktodo.conf<br />
++++ cut -d ' ' -f 3<br />
+++ uniq -u<br />
+++ type=disk<br />
+++ [[ disk != \p\a\r\t ]]<br />
+++ continue<br />
++ bootparts=/dev/sda2<br />
++ grub_prefix=/grub<br />
++ [[ -z /dev/sda2 ]]<br />
++ [[ -n /dev/sda2 ]]<br />
++ BugIfError 'Unable to find any /boot partitions'<br />
++ (( 0 != 0 ))<br />
+++ grep '^disk '
/var/opt/sesam/var/lib/rear//var/lib/rear/layout/disklayout.conf<br />
+++ cut '-d ' -f2</p>
<p>contents of diskalyout/todo:</p>
<p>disk /dev/sda 5368709120 msdos<br />
part /dev/sda 12409206784 32256 primary none /dev/sda1<br />
part /dev/sda 4770662400 575769600 primary boot /dev/sda2<br />
fs /dev/sda2 / reiserfs uuid=3c83197e-b9f8-46ed-9586-105a48932e1b label=
options=rw,acl,user_xattr<br />
swap /dev/sda1 uuid= label=</p>
<p>done /dev/sda disk<br />
done /dev/sda1 part<br />
done /dev/sda2 part<br />
done fs:/ fs<br />
done swap:/dev/sda1 swap</p>
<p>I think the error is maybe also caused by the situation that /dev/sda1
is swap, and /dev/sda2 is / aswell as /boot/<br />
if you need any further logfiles please tell me!</p>
<h4 id="dagwieers_commented_at_2013-06-07_1738"><img src="https://avatars.githubusercontent.com/u/388198?u=0732dee3fe5002278cfbf40359ec431bdcf5f06c&v=4" width="50"><a href="https://github.com/dagwieers">dagwieers</a> commented at <a href="https://github.com/rear/rear/issues/210#issuecomment-19121664">2013-06-07 17:38</a>:<a class="headerlink" href="#dagwieers_commented_at_2013-06-07_1738" title="Permanent link">&para;</a></h4>
<p>I think I get it now, although I don't know why. Look at this piece of
code:</p>
<pre><code>    # Find exclusive partitions belonging to /boot (subtract root partitions from deps)
    bootparts=$( (find_partition fs:/boot; find_partition fs:/) | sort | uniq -u )
    grub_prefix=/grub
    if [[ -z "$bootparts" ]]; then
        bootparts=$(find_partition fs:/)
        grub_prefix=/boot/grub
    fi
    # Should never happen
    [[ "$bootparts" ]]
    BugIfError "Unable to find any /boot partitions"
</code></pre>
<p>If in your case <code>/boot</code> is in the root partition, we expect to get from
find_partition foor both fs:/ and fs:/boot to get the same partition
back (/dev/sda2). This means that "sort | uniq -u" removes non-unique
entries:</p>
<pre><code>echo -e "/dev/sda2\n/dev/sda2" | sort | uniq -u
</code></pre>
<p>And so <code>bootparts</code> is expected to be empty, but in this case it isn't
empty and that's the real problem. From your code I cannot tell what is
going on (not enough copy&amp;pasted).</p>
<p>Let me do this on my own running system (this is a good way to debug the
code BTW:</p>
<pre><code>[root@moria ~]# LAYOUT_DEPS=/var/lib/rear/layout/diskdeps.conf
[root@moria ~]# LAYOUT_FILE=/var/lib/rear/layout/disklayout.conf 
[root@moria ~]# LAYOUT_TODO=/var/lib/rear/layout/disktodo.conf 
[root@moria ~]# source /usr/share/rear/lib/array-functions.sh 
[root@moria ~]# source /usr/share/rear/lib/layout-functions.sh
[root@moria ~]# find_partition fs:/
/dev/sda2
[root@moria ~]# find_partition fs:/boot
/dev/sda1
/dev/sda2
[root@moria ~]# ( find_partition fs:/; find_partition fs:/boot )
/dev/sda2
/dev/sda1
/dev/sda2
[root@moria ~]# ( find_partition fs:/; find_partition fs:/boot ) | sort
/dev/sda1
/dev/sda2
/dev/sda2
[root@moria ~]# ( find_partition fs:/; find_partition fs:/boot ) | sort | uniq -u
/dev/sda1
</code></pre>
<p>This is to be expected in my case (/dev/sda1 is the <em>/boot</em> partition).
In your case it should return nothing. Which means / and /boot are the
same device.</p>
<h4 id="dagwieers_commented_at_2013-06-07_1937"><img src="https://avatars.githubusercontent.com/u/388198?u=0732dee3fe5002278cfbf40359ec431bdcf5f06c&v=4" width="50"><a href="https://github.com/dagwieers">dagwieers</a> commented at <a href="https://github.com/rear/rear/issues/210#issuecomment-19128407">2013-06-07 19:37</a>:<a class="headerlink" href="#dagwieers_commented_at_2013-06-07_1937" title="Permanent link">&para;</a></h4>
<p>Ok, I got it:</p>
<pre><code>[root@moria ~]# find_partition fs:/
/dev/sda2
[root@moria ~]# find_partition fs:/usr
</code></pre>
<p>So the find_partition only works for mountpoints :-(</p>
<h4 id="dagwieers_commented_at_2013-06-07_2021"><img src="https://avatars.githubusercontent.com/u/388198?u=0732dee3fe5002278cfbf40359ec431bdcf5f06c&v=4" width="50"><a href="https://github.com/dagwieers">dagwieers</a> commented at <a href="https://github.com/rear/rear/issues/210#issuecomment-19130676">2013-06-07 20:21</a>:<a class="headerlink" href="#dagwieers_commented_at_2013-06-07_2021" title="Permanent link">&para;</a></h4>
<p>Please test the fix and reopen the bug if it does not work.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2024 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2013-03-20.210.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
