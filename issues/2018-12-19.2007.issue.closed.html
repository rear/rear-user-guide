<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#2007 Issue closed: Borg stats do not appear in log file even in verbose mode - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#2007 Issue closed: Borg stats do not appear in log file even in verbose mode";
        var mkdocs_page_input_path = "issues/2018-12-19.2007.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_nas.html">Internal Backup with tar to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/rbme.html">External Backup using RBME</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/restic.html">External Backup using restic</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../development/squash-git-log-commments.html">How to squash git log comments into one line</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#2007 Issue closed: Borg stats do not appear in log file even in verbose mode</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="2007_issue_closed_borg_stats_do_not_appear_in_log_file_even_in_verbose_mode"><a href="https://github.com/rear/rear/issues/2007">#2007 Issue</a> <code>closed</code>: Borg stats do not appear in log file even in verbose mode<a class="headerlink" href="#2007_issue_closed_borg_stats_do_not_appear_in_log_file_even_in_verbose_mode" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>support / question</code>, <code>fixed / solved / done</code></p>
<h4 id="nikasl_opened_issue_at_2018-12-19_1344"><img src="https://avatars.githubusercontent.com/u/20294336?u=e40e5963cbc4a9e075e905011e637fffac2e2b01&v=4" width="50"><a href="https://github.com/nikasl">nikasl</a> opened issue at <a href="https://github.com/rear/rear/issues/2007">2018-12-19 13:44</a>:<a class="headerlink" href="#nikasl_opened_issue_at_2018-12-19_1344" title="Permanent link">&para;</a></h4>
<h4 id="relax-and-recover_rear_issue_template">Relax-and-Recover (ReaR) Issue Template<a class="headerlink" href="#relax-and-recover_rear_issue_template" title="Permanent link">&para;</a></h4>
<p>Fill in the following items before submitting a new issue<br />
(quick response is not guaranteed with free support):</p>
<ul>
<li>
<p>ReaR version ("/usr/sbin/rear -V"):<br />
    2.4-2.el7</p>
</li>
<li>
<p>OS version ("cat /etc/rear/os.conf" or "lsb_release -a" or "cat
    /etc/os-release"): CentOS Linux release 7.3.1611 (Core)</p>
</li>
<li>
<p>ReaR configuration files ("cat /etc/rear/site.conf" and/or "cat
    /etc/rear/local.conf"):</p>
</li>
</ul>
<!-- -->

<pre><code># Rescue ISO                                    
OUTPUT=ISO
OUTPUT_URL=rsync://backuper@172.16.10.33/rear_rescue_images
# Borg Backup 
BACKUP=BORG
BACKUP_PROG_EXCLUDE=( ${BACKUP_PROG_EXCLUDE[@]} '/var/log/lastlog' '/var/lib/mysql' )
BORGBACKUP_HOST=172.16.10.33
BORGBACKUP_USERNAME=backuper
BORGBACKUP_REPO=/sambamnt/borg_backups/prf3
BORGBACKUP_ARCHIVE_PREFIX="rear"
BORGBACKUP_COMPRESSION="lz4"
BORGBACKUP_ENC_TYPE="none"
BORGBACKUP_REMOTE_PATH="/usr/bin/borg"
export BORG_RELOCATED_REPO_ACCESS_IS_OK="yes"
export BORG_UNKNOWN_UNENCRYPTED_REPO_ACCESS_IS_OK="yes"
# Borg retention policy
BORGBACKUP_PRUNE_DAILY=14
BORGBACKUP_PRUNE_WEEKLY=6
BORGBACKUP_PRUNE_MONTHLY=24
</code></pre>
<ul>
<li>
<p>Hardware (PC or PowerNV BareMetal or ARM) or virtual machine (KVM
    guest or PoverVM LPAR):<br />
    XenServer guest</p>
</li>
<li>
<p>System architecture (x86 compatible or PPC64/PPC64LE or what exact
    ARM device):<br />
    x86_64</p>
</li>
<li>
<p>Firmware (BIOS or UEFI or Open Firmware) and bootloader (GRUB or
    ELILO or Petitboot):<br />
    GRUB</p>
</li>
<li>
<p>Storage (lokal disk or SSD) and/or SAN (FC or iSCSI or FCoE) and/or
    multipath (DM or NVMe):<br />
    SAN FC</p>
</li>
<li>
<p>Description of the issue (ideally so that others can reproduce
    it):<br />
    When rear is called through a script that runs from crontab, no Borg
    stats appear in the log file, as was the case until at least rear v
    2.00. If rear is run manually in the command line then the stats
    appear in the screen but not in the log files. As we are analyzing
    Borg stats in the log files to decide if the backup was successful
    for over 100 servers, this creates a problem for us.</p>
</li>
<li>
<p>Workaround, if any:<br />
    To manually replace the new "500_make_backup.sh" script with the
    old one, every time rear is updated.</p>
</li>
<li>
<p>Attachments, as applicable ("rear -D mkrescue/mkbackup/recover"
    debug log files):</p>
</li>
</ul>
<h4 id="gozora_commented_at_2018-12-19_1418"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/2007#issuecomment-448611500">2018-12-19 14:18</a>:<a class="headerlink" href="#gozora_commented_at_2018-12-19_1418" title="Permanent link">&para;</a></h4>
<p>What is full command used to launch ReaR from cron ?</p>
<p>V.</p>
<h4 id="nikasl_commented_at_2018-12-19_1424"><img src="https://avatars.githubusercontent.com/u/20294336?u=e40e5963cbc4a9e075e905011e637fffac2e2b01&v=4" width="50"><a href="https://github.com/nikasl">nikasl</a> commented at <a href="https://github.com/rear/rear/issues/2007#issuecomment-448613291">2018-12-19 14:24</a>:<a class="headerlink" href="#nikasl_commented_at_2018-12-19_1424" title="Permanent link">&para;</a></h4>
<p>Crontab entry:</p>
<pre><code>8 2 * * * /opt/scripts/system_backup.sh
</code></pre>
<p>And the script:</p>
<pre><code>#!/bin/bash        
/usr/sbin/rear -v -C local mkbackup
</code></pre>
<h4 id="jsmeix_commented_at_2018-12-19_1424"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2007#issuecomment-448613506">2018-12-19 14:24</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-12-19_1424" title="Permanent link">&para;</a></h4>
<p>I just guess it might be somehow related to<br />
<a href="https://github.com/rear/rear/issues/1588">https://github.com/rear/rear/issues/1588</a><br />
therein in particular<br />
<a href="https://github.com/rear/rear/issues/1588#issuecomment-346014845">https://github.com/rear/rear/issues/1588#issuecomment-346014845</a></p>
<h4 id="nikasl_commented_at_2018-12-19_1429"><img src="https://avatars.githubusercontent.com/u/20294336?u=e40e5963cbc4a9e075e905011e637fffac2e2b01&v=4" width="50"><a href="https://github.com/nikasl">nikasl</a> commented at <a href="https://github.com/rear/rear/issues/2007#issuecomment-448614976">2018-12-19 14:29</a>:<a class="headerlink" href="#nikasl_commented_at_2018-12-19_1429" title="Permanent link">&para;</a></h4>
<p>Probably.<br />
Is there any other way to have Borg stats to the log file?</p>
<p>For now, after every version upgrade we are copying the older
"500_make_backup.sh" files to all servers using Ansible.</p>
<h4 id="gozora_commented_at_2018-12-19_1434"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/2007#issuecomment-448616665">2018-12-19 14:34</a>:<a class="headerlink" href="#gozora_commented_at_2018-12-19_1434" title="Permanent link">&para;</a></h4>
<p>What data exactly you need to have stored in log ?<br />
Is it maybe following table:</p>
<pre><code>Archive name: rear_17
Archive fingerprint: 28ddf7efd0ca94a2767e54fe120e769e6f75c814c6629476953310e67b074eed
Time (start): Wed, 2018-12-19 15:31:32
Time (end):   Wed, 2018-12-19 15:31:46
Duration: 14.01 seconds
Number of files: 75673
Utilization of max. archive size: 0%
------------------------------------------------------------------------------
                       Original size      Compressed size    Deduplicated size
This archive:                2.44 GB              1.55 GB              1.60 MB
All archives:                7.32 GB              4.64 GB              1.49 GB

                       Unique chunks         Total chunks
Chunk index:                   54205               180423
------------------------------------------------------------------------------
</code></pre>
<p>V.</p>
<h4 id="nikasl_commented_at_2018-12-19_1436"><img src="https://avatars.githubusercontent.com/u/20294336?u=e40e5963cbc4a9e075e905011e637fffac2e2b01&v=4" width="50"><a href="https://github.com/nikasl">nikasl</a> commented at <a href="https://github.com/rear/rear/issues/2007#issuecomment-448617395">2018-12-19 14:36</a>:<a class="headerlink" href="#nikasl_commented_at_2018-12-19_1436" title="Permanent link">&para;</a></h4>
<p>Exactly</p>
<h4 id="jsmeix_commented_at_2018-12-19_1440"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2007#issuecomment-448618562">2018-12-19 14:40</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-12-19_1440" title="Permanent link">&para;</a></h4>
<p>In backup/BORG/default/500_make_backup.sh (excerpt)</p>
<pre><code>borg create ... 0&lt;&amp;6 1&gt;&amp;7 2&gt;&amp;8
</code></pre>
<p>runs <code>borg create</code> with the original stdin, stdout, and stderr file
descriptors<br />
when <code>rear</code> was launched that are saved as fd6, fd7, and fd8
respectively,<br />
cf. "What to do with stdin, stdout, and stderr" in<br />
<a href="https://github.com/rear/rear/wiki/Coding-Style">https://github.com/rear/rear/wiki/Coding-Style</a></p>
<p>Accordingly it should work to launch <code>rear</code> with appropriately
redirected<br />
stdout, and stderr to some separated log file.</p>
<p>For example for me</p>
<pre><code>usr/sbin/rear -D mkrescue 2&gt;&amp;1 | tee -a /tmp/rear.tty.log
</code></pre>
<p>seems to work as expected (I get in <code>/tmp/rear.tty.log</code><br />
the same as I get on my terminal where I run it).</p>
<p>Regarding stdin see "It should be possible to run ReaR unattended" at<br />
<a href="https://github.com/rear/rear/wiki/Coding-Style">https://github.com/rear/rear/wiki/Coding-Style</a></p>
<h4 id="nikasl_commented_at_2018-12-19_1459"><img src="https://avatars.githubusercontent.com/u/20294336?u=e40e5963cbc4a9e075e905011e637fffac2e2b01&v=4" width="50"><a href="https://github.com/nikasl">nikasl</a> commented at <a href="https://github.com/rear/rear/issues/2007#issuecomment-448624978">2018-12-19 14:59</a>:<a class="headerlink" href="#nikasl_commented_at_2018-12-19_1459" title="Permanent link">&para;</a></h4>
<p>Nice idea, but I'm also getting in the log file all the mumbo jumbo of
the borg progress output. It would be very nice if I could only get the
final stats.</p>
<h4 id="jsmeix_commented_at_2018-12-19_1517"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2007#issuecomment-448631065">2018-12-19 15:17</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-12-19_1517" title="Permanent link">&para;</a></h4>
<p>I am not a Borg user so that I don't know what<br />
<code>the borg progress output</code> actually is, if it is caused<br />
by the <code>--progress</code> or <code>--stats</code> option but basically it seems<br />
to be in backup/BORG/default/500_make_backup.sh the lines</p>
<pre><code># Only in ReaR verbose mode also show borg progress output and stats
local borg_progress=''
test "$verbose" &amp;&amp; borg_progress='--progress --stats'
</code></pre>
<p>where you get both if you run <code>rear -v</code>.</p>
<p>I guess one of them should be only shown in debug mode, cf.<br />
<a href="https://github.com/rear/rear/issues/1588#issuecomment-346308767">https://github.com/rear/rear/issues/1588#issuecomment-346308767</a><br />
i.e. something like</p>
<pre><code># Only in ReaR verbose mode also show Borg stats output
# and in ReaR debug mode additionally show Borg progress
# (debug mode implies verbose mode, cf. usr/sbin/rear):
local borg_progress=''
test "$VERBOSE" &amp;&amp; borg_progress='--stats'
test "$DEBUG" &amp;&amp; borg_progress='--progress --stats'
</code></pre>
<p>or similar (not tested by me because I do not use Borg).</p>
<h4 id="gozora_commented_at_2018-12-19_1712"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/2007#issuecomment-448672956">2018-12-19 17:12</a>:<a class="headerlink" href="#gozora_commented_at_2018-12-19_1712" title="Permanent link">&para;</a></h4>
<p>@jsmeix like many time before your guess is right!<br />
I'll prepare PR to allow user to decide if he wants to have stats and
progress shown or not.<br />
My idea would be to give user final power to decide what will be shown
using booleans BORGBACKUP_SHOW_STATS="yes/no" and
BORGBACKUP_SHOW_PROGRESS="yes/no"</p>
<p>The reason why I don't like
<code>test "$DEBUG" &amp;&amp; borg_progress='--progress --stats'</code> very much is that
some users might want to see just a progress without additional
debugging information.</p>
<p>V.</p>
<h4 id="gozora_commented_at_2018-12-19_1758"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/2007#issuecomment-448688020">2018-12-19 17:58</a>:<a class="headerlink" href="#gozora_commented_at_2018-12-19_1758" title="Permanent link">&para;</a></h4>
<p>With code in
<a href="https://github.com/rear/rear/pull/2008">https://github.com/rear/rear/pull/2008</a>
I can have following outputs:<br />
With <code>BORGBACKUP_SHOW_STATS="yes"</code></p>
<pre><code>fedora:(/root)(root)# rear mkbackuponly      
------------------------------------------------------------------------------                                                              
Archive name: rear_25
Archive fingerprint: 11d8c2dcff56be4af267e08c835c461d63c7ae9e029c14cf64f58664aefbdd73
Time (start): Wed, 2018-12-19 18:39:42
Time (end):   Wed, 2018-12-19 18:39:56
Duration: 13.60 seconds
Number of files: 75681
Utilization of max. archive size: 0%
------------------------------------------------------------------------------
                       Original size      Compressed size    Deduplicated size
This archive:                2.45 GB              1.55 GB              2.24 MB
All archives:                7.34 GB              4.64 GB              1.49 GB

                       Unique chunks         Total chunks
Chunk index:                   54217               180442
------------------------------------------------------------------------------
</code></pre>
<p>@nikasl You will still need to <code>tee</code> output somewhere ...</p>
<p>With <code>BORGBACKUP_SHOW_PROGRESS="yes"</code></p>
<pre><code>fedora:(/root)(root)# rear mkbackuponly      
851.51 MB O 424.73 MB C 2.19 MB D 7042 N usr/lib64/python3.6/distutils/__pycache__/unixccompiler.cpython-36.opt-2.pyc
</code></pre>
<p>Side-effect of this change is that what Borg shows is not longer
controlled by <code>rear --verbose or rear --debug</code>, but I think this gives
finer control for output.</p>
<p>V.</p>
<h4 id="nikasl_commented_at_2018-12-20_0754"><img src="https://avatars.githubusercontent.com/u/20294336?u=e40e5963cbc4a9e075e905011e637fffac2e2b01&v=4" width="50"><a href="https://github.com/nikasl">nikasl</a> commented at <a href="https://github.com/rear/rear/issues/2007#issuecomment-448905978">2018-12-20 07:54</a>:<a class="headerlink" href="#nikasl_commented_at_2018-12-20_0754" title="Permanent link">&para;</a></h4>
<p>Thanks for your help guys, it should be much better this way, to have
finer control on the output.</p>
<h4 id="jsmeix_commented_at_2018-12-20_1140"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2007#issuecomment-448968836">2018-12-20 11:40</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-12-20_1140" title="Permanent link">&para;</a></h4>
<p>@nikasl<br />
a side note regarding your<br />
<a href="https://github.com/rear/rear/issues/2007#issuecomment-448613291">https://github.com/rear/rear/issues/2007#issuecomment-448613291</a><br />
<code>/usr/sbin/rear -v -C local mkbackup</code>:</p>
<p>According to <code>man rear</code><br />
<a href="https://github.com/rear/rear/blob/master/doc/rear.8.adoc">https://github.com/rear/rear/blob/master/doc/rear.8.adoc</a><br />
the <code>-C</code> option is only for an <code>additional config file</code><br />
and not for the default config files like etc/rear/local.conf.</p>
<p>With <code>-C local</code> the default config file etc/rear/local.conf<br />
gets sourced (and executed) two times.<br />
First by default and then again because of <code>-C local</code><br />
cf. in usr/sbin/rear "Combine configuration files" in particular
starting at<br />
<a href="https://github.com/rear/rear/blob/master/usr/sbin/rear#L442">https://github.com/rear/rear/blob/master/usr/sbin/rear#L442</a></p>
<p>Usually this has no negative effect but when you specify e.g.</p>
<pre><code>BACKUP_PROG_EXCLUDE=( ${BACKUP_PROG_EXCLUDE[@]} '/var/log/lastlog' '/var/lib/mysql' )
</code></pre>
<p>you get that executed two times which results that '/var/log/lastlog'
and<br />
'/var/lib/mysql' are added two times to the BACKUP_PROG_EXCLUDE
array<br />
which probably does by luck also not have an actual negative effect<br />
but things do not work fully right this way.</p>
<h4 id="nikasl_commented_at_2018-12-20_1149"><img src="https://avatars.githubusercontent.com/u/20294336?u=e40e5963cbc4a9e075e905011e637fffac2e2b01&v=4" width="50"><a href="https://github.com/nikasl">nikasl</a> commented at <a href="https://github.com/rear/rear/issues/2007#issuecomment-448972151">2018-12-20 11:49</a>:<a class="headerlink" href="#nikasl_commented_at_2018-12-20_1149" title="Permanent link">&para;</a></h4>
<p>@jsmeix</p>
<p>Thank you very much for this info!!</p>
<h4 id="gozora_commented_at_2018-12-20_1635"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/2007#issuecomment-449058159">2018-12-20 16:35</a>:<a class="headerlink" href="#gozora_commented_at_2018-12-20_1635" title="Permanent link">&para;</a></h4>
<p>With
<a href="https://github.com/rear/rear/pull/2008">https://github.com/rear/rear/pull/2008</a>
merged user can now decide with:</p>
<pre><code>BORGBACKUP_SHOW_STATS="yes/no"
BORGBACKUP_SHOW_PROGRESS="yes/no"
</code></pre>
<p>if he wants to see Borg stats after ReaR backup finished and/or Borg
progress during ReaR backup session.<br />
Since this output will not be stored into ReaR log file, user is advised
to use other Linux tools to store this information.<br />
One great example can be found in
<a href="https://github.com/rear/rear/issues/2007#issuecomment-448618562">https://github.com/rear/rear/issues/2007#issuecomment-448618562</a>.</p>
<p>I guess no one would mind if I close this issue now.</p>
<p>V.</p>
<h4 id="jsmeix_commented_at_2018-12-21_0920"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2007#issuecomment-449327040">2018-12-21 09:20</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-12-21_0920" title="Permanent link">&para;</a></h4>
<p>@nikasl<br />
because neither @gozora nor I are Borg users<br />
we need now your feedback whether or not the enhancement in<br />
<a href="https://github.com/rear/rear/pull/2008">https://github.com/rear/rear/pull/2008</a><br />
makes things work for you as you need it.</p>
<p>FYI:</p>
<p>How to try out our current ReaR upstream GitHub master code:</p>
<p>Basically "git clone" our current ReaR upstream GitHub master code<br />
into a separated directory and then configure and run ReaR<br />
from within that directory like:</p>
<pre><code># git clone https://github.com/rear/rear.git

# mv rear rear.github.master

# cd rear.github.master

# vi etc/rear/local.conf

# usr/sbin/rear -D mkbackup
</code></pre>
<p>Note the relative paths "etc/rear/" and "usr/sbin/".</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2025 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2018-12-19.2007.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
