<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>2018 08 06.1891.issue.closed - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "2018 08 06.1891.issue.closed";
        var mkdocs_page_input_path = "issues/2018-08-06.1891.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/rust.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', '366986045', 'auto');
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
      <li>2018 08 06.1891.issue.closed</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="1891_issue_closed_unable_to_restore_to_ppc64le_system_with_error_mount_command_mount_devdiskby-labelrelaxrecover_tmprearoutputfs_failed"><a href="https://github.com/rear/rear/issues/1891">#1891 Issue</a> <code>closed</code>: Unable to restore to PPC64LE system with ERROR: Mount command 'mount /dev/disk/by-label/RELAXRECOVER /tmp/rear.../outputfs' failed.<a class="headerlink" href="#1891_issue_closed_unable_to_restore_to_ppc64le_system_with_error_mount_command_mount_devdiskby-labelrelaxrecover_tmprearoutputfs_failed" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>bug</code>, <code>cleanup</code>, <code>support / question</code>,
<code>fixed / solved / done</code></p>
<h4 id="ccjung_opened_issue_at_2018-08-06_1439"><img src="https://avatars.githubusercontent.com/u/29214472?u=58ae98d864664297a19702de40bf4767338e396b&v=4" width="50"><a href="https://github.com/ccjung">ccjung</a> opened issue at <a href="https://github.com/rear/rear/issues/1891">2018-08-06 14:39</a>:<a class="headerlink" href="#ccjung_opened_issue_at_2018-08-06_1439" title="Permanent link">&para;</a></h4>
<h4 id="relax-and-recover_rear_issue_template">Relax-and-Recover (ReaR) Issue Template<a class="headerlink" href="#relax-and-recover_rear_issue_template" title="Permanent link">&para;</a></h4>
<p>Fill in the following items before submitting a new issue<br />
(quick response is not guaranteed with free support):</p>
<ul>
<li>ReaR version ("/usr/sbin/rear -V"):<br />
    Relax-and-Recover 2.4 / Git</li>
</ul>
<pre>
rpm -qa|grep rear
rear23a-2.3.a-1.1.ppc64le
</pre>

<ul>
<li>OS version ("cat /etc/rear/os.conf" or "lsb_release -a" or "cat
    /etc/os-release"):</li>
</ul>
<pre>
cat /etc/os-release
NAME="SLES"
VERSION="12-SP3"
VERSION_ID="12.3"
PRETTY_NAME="SUSE Linux Enterprise Server 12 SP3"
ID="sles"
ANSI_COLOR="0;32"
CPE_NAME="cpe:/o:suse:sles:12:sp3"
</pre>

<ul>
<li>ReaR configuration files ("cat /etc/rear/site.conf" and/or "cat
    /etc/rear/local.conf"):</li>
</ul>
<pre>
cat /etc/rear/local.conf
# Default is to create Relax-and-Recover rescue media as ISO image
# set OUTPUT to change that
# set BACKUP to activate an automated (backup and) restore of your data
# Possible configuration values can be found in /usr/share/rear/conf/default.conf
#
# This file (local.conf) is intended for manual configuration. For configuration
# through packages and other automated means we recommend creating a new
# file named site.conf next to this file and to leave the local.conf as it is.
# Our packages will never ship with a site.conf.

AUTOEXCLUDE_MULTIPATH=n
BOOT_OVER_SAN=y
REAR_INITRD_COMPRESSION=lzma
OUTPUT=ISO
ISO_MAX_SIZE=4000
BACKUP=NETFS
BACKUP_URL=iso:///iso_fs/REAR_BACKUP
ISO_DIR=/iso_fs/REAR_ISO
TMPDIR=/iso_fs/REAR_TEMP
OUTPUT_URL=null
BOOT_FROM_SAN=y
EXCLUDE_MOUNTPOINTS=( /iso_fs /opt/IBM/ITM /cv /opt/splunkforwarder /opt/teamquest /var/opt/BESClient /usr/sap /hana/data /hana/log /hana/shared /hana/backup /usr/sap/basis /usr/sap/srm /PA_backup )
EXCLUDE_COMPONENTS=( /dev/mapper/20017380034880209 /dev/mapper/2001738003488020a /dev/mapper/2001738003488020b /dev/mapper/2001738003488020c /dev/mapper/2001738003488020d /dev/mapper/2001738003488020e /dev/mapper/2001738003488020f /dev/mapper/20017380034880210 /dev/mapper/20017380034880211 /dev/mapper/20017380034880212 /dev/mapper/20017380034880213 /dev/mapper/20017380034880214 /dev/mapper/20017380034880215 /dev/mapper/20017380034880216 )

## SLES12-SP2

REQUIRED_PROGS=( "${REQUIRED_PROGS[@]}" snapper chattr lsattr )

COPY_AS_IS=( "${COPY_AS_IS[@]}" /usr/lib/snapper/installation-helper /etc/snapper/config-templates/default )

for subvol in $(findmnt -n -r -t btrfs | cut -d ' ' -f 1 | grep -v '^/$' | egrep -v 'snapshots|crash') ; do
        BACKUP_PROG_INCLUDE=( "${BACKUP_PROG_INCLUDE[@]}" "$subvol" )
done

POST_RECOVERY_SCRIPT=( 'if snapper --no-dbus -r $TARGET_FS_ROOT get-config | grep -q "^QGROUP.*[0-9]/[0-9]" ; then snapper --no-dbus -r $TARGET_FS_ROOT set-config QGROUP= ; snapper --no-dbus -r $TARGET_FS_ROOT setup-quota && echo snapper setup-quota done || echo snapper setup-quota failed ; else echo snapper setup-quota not used ; fi' )
</pre>

<ul>
<li>
<p>Hardware (PC or PowerNV BareMetal or ARM) or virtual machine (KVM
    guest or PoverVM LPAR): PowerVM LPAR</p>
</li>
<li>
<p>System architecture (x86 compatible or PPC64/PPC64LE or what excat
    ARM device):<br />
    PPC64LE</p>
</li>
<li>
<p>Firmware (BIOS or UEFI or Open Firmware) and bootloader (GRUB or
    ELILO or Petitboot):<br />
    GRUB</p>
</li>
<li>
<p>Description of the issue (ideally so that others can reproduce
    it):<br />
    I have attached the log.<br />
<a href="https://github.com/rear/rear/files/2262950/eniesdbs101_restore.txt">eniesdbs101_restore.txt</a></p>
</li>
</ul>
<p>Got the following errors when trying to restore:</p>
<pre>
RESCUE eniesdbd012:~ # rear -dDv recover
Relax-and-Recover 2.4 / Git
Using log file: /var/log/rear/rear-eniesdbd012.log
Running workflow recover within the ReaR rescue/recovery system

ERROR: Mount command 'mount /dev/disk/by-label/RELAXRECOVER /tmp/rear.SgfzmzgGmm2nVkE/outputfs' failed.
</pre>

<p>Further down in the logs, we saw the following:</p>
<pre>
[  OK  ] Started udev Kernel Device Manager.
         Starting Initialize Rescue System...

Verifying md5sums of the files in the Relax-and-Recover rescue system

md5sum: ./dev/.SRC-Semaphore: No such file or directory
./dev/.SRC-Semaphore: FAILED open or read
[  OK  ] Found device /dev/ttyS0.
[  OK  ] Started udev Coldplug all Devices.
md5sum: WARNING: 1 listed file could not be read
Possibly corrupted Relax-and-Recover rescue system
Proceeding 'bona fide' nevertheless...
</pre>

<p>The strange thing is that we were able to restore to this same system
and it worked before.</p>
<p>We wanted to add more customization in the Rescue system (original
system) and restore the backup to the same system so we don't know why
it doesn't work anymore.</p>
<p>Any help would be greatly appreciated. Thank you.</p>
<ul>
<li>Work-around, if any:</li>
</ul>
<h4 id="ccjung_commented_at_2018-08-06_1451"><img src="https://avatars.githubusercontent.com/u/29214472?u=58ae98d864664297a19702de40bf4767338e396b&v=4" width="50"><a href="https://github.com/ccjung">ccjung</a> commented at <a href="https://github.com/rear/rear/issues/1891#issuecomment-410735000">2018-08-06 14:51</a>:<a class="headerlink" href="#ccjung_commented_at_2018-08-06_1451" title="Permanent link">&para;</a></h4>
<p>Attached another log file from another restore failure.</p>
<p>We have two systems (eniesdbd101 and eniesdbs101) and they both failed
to restore.<br />
<a href="https://github.com/rear/rear/files/2262987/eniesdbd101_restore.txt">eniesdbd101_restore.txt</a></p>
<h4 id="jsmeix_commented_at_2018-08-06_1532"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1891#issuecomment-410749428">2018-08-06 15:32</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-08-06_1532" title="Permanent link">&para;</a></h4>
<p>@suseusr168<br />
in your eniesdbd101_restore.txt there is (excerpt)</p>
<pre>
ERROR: Mount command 'mount /dev/disk/by-label/RELAXRECOVER /tmp/rear.Ogqve80B29D23eG/outputfs' failed.
Some latest log messages since the last called script 060_mount_NETFS_path.sh:
  2018-08-06 14:37:05.506048036 Including verify/NETFS/default/060_mount_NETFS_path.sh
  2018-08-06 14:37:05.506899805 Entering debugscripts mode via 'set -x'.
  mkdir: created directory '/tmp/rear.Ogqve80B29D23eG/outputfs'
  2018-08-06 14:37:05.511294779 Added 'rmdir -v /tmp/rear.Ogqve80B29D23eG/outputfs >&2' as an exit task
  2018-08-06 14:37:05.514107494 Mounting with 'mount /dev/disk/by-label/RELAXRECOVER /tmp/rear.Ogqve80B29D23eG/outputfs'
  mount: you must specify the filesystem type
</pre>

<p>which indicates the root cause is likely a wrong config variable
value,<br />
probably for the BACKUP_URL or OUTPUT_URL config variable<br />
but I never used BACKUP_URL=iso://... myself so that<br />
offhandedly I don't know the right way how to set up this.</p>
<p>The <code>md5sum: ./dev/.SRC-Semaphore: No such file or directory</code> can be
ignored<br />
because it is false alarm.<br />
I noticed already once such a md5sum failure for a strange file in
/dev/.<br />
I need to exclude md5sum checking by default for files in /dev/<br />
cf. "EXCLUDE_MD5SUM_VERIFICATION" in
usr/share/rear/conf/default.conf<br />
how you could exclude such things manually for now.</p>
<h4 id="jsmeix_commented_at_2018-08-06_1556"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1891#issuecomment-410757405">2018-08-06 15:56</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-08-06_1556" title="Permanent link">&para;</a></h4>
<p>Meanwhile I think it is not a wrong config variable value<br />
because in case of the <code>iso</code> URL scheme the mount_url function<br />
in usr/share/rear/lib/global-functions.sh does</p>
<pre>
        (iso)
            if [[ "$WORKFLOW" = "recover" ]]; then
                mount_cmd="mount /dev/disk/by-label/${ISO_VOLID} $mountpoint"
            else
                return 0
            fi
            ;;
</pre>

<p>i.e. the mount command is basically hardcoded<br />
so that it does not depend on config variable values.</p>
<p>Currently I don't know why <code>mount</code> complains in this case<br />
because usually on can "just mount" an ISO image and the<br />
filesystem type <code>iso9660</code> is autodetected by the mount command<br />
...<br />
wait!<br />
...<br />
I think I remember something - see<br />
<a href="https://github.com/rear/rear/issues/1202">https://github.com/rear/rear/issues/1202</a><br />
where mounting an ISO in the recovery system failed for me<br />
with <code>mount: unknown filesystem type 'iso9660'</code>.</p>
<p>The reason behind was missing kernel modules in the recovery system.</p>
<p>With <code>MODULES=( 'all_modules' )</code> you get all kernel modules<br />
into the recovery system to be on the safe side agains possibly<br />
missing subtle kernel module dependencies, cf.<br />
<a href="https://github.com/rear/rear/issues/1355">https://github.com/rear/rear/issues/1355</a></p>
<p>But on POWER but that may result a too big initrd<br />
which could cause arbitrary other strange issues there, cf.<br />
<a href="https://github.com/rear/rear/issues/1724">https://github.com/rear/rear/issues/1724</a><br />
that was also a reason for the md5sum verification<br />
<a href="https://github.com/rear/rear/issues/1859">https://github.com/rear/rear/issues/1859</a></p>
<h4 id="dewagner1_commented_at_2018-08-06_1911"><img src="https://avatars.githubusercontent.com/u/42152522?v=4" width="50"><a href="https://github.com/dewagner1">dewagner1</a> commented at <a href="https://github.com/rear/rear/issues/1891#issuecomment-410820702">2018-08-06 19:11</a>:<a class="headerlink" href="#dewagner1_commented_at_2018-08-06_1911" title="Permanent link">&para;</a></h4>
<p>The restore consistently fails on this lpar but using the same rear
backup image on a different lpar works sometimes. I have been successful
in restoring this image to another lpar but if I restart the install to
that same lpar with the same image it will fail. I will attach files for
each scenario. Each file contains a screen capture and the log file
appended to the end. Another anomaly I've found is that the ethernet
adapters are discovered differently during the various attempts at
restoring.</p>
<p>Boot from the same rear backup image to the same destination lpar with
different results</p>
<pre>
No network interface mapping is specified in /etc/rear/mappings/mac
The original network interface eth0 2a:90:90:4a:af:03 is not available
1) eth2 52:41:08:ca:e4:03 ibmveth
2) eth3 52:41:08:ca:e4:04 ibmveth
3) Skip replacing eth0 2a:90:90:4a:af:03
Choose replacement for eth0 2a:90:90:4a:af:03
</pre>

<pre>
No network interface mapping is specified in /etc/rear/mappings/mac
The original network interface eth0 2a:90:90:4a:af:03 is not available
1) eth0 52:41:08:ca:e4:03 ibmveth
2) eth1 52:41:08:ca:e4:04 ibmveth
3) Skip replacing eth0 2a:90:90:4a:af:03
Choose replacement for eth0 2a:90:90:4a:af:03
</pre>

<p><a href="https://github.com/rear/rear/files/2263762/eniesdbd101_restore_fail1.txt">eniesdbd101_restore_fail1.txt</a><br />
<a href="https://github.com/rear/rear/files/2263764/eniesdbd101_restore_success.txt">eniesdbd101_restore_success.txt</a></p>
<h4 id="jsmeix_commented_at_2018-08-07_0852"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1891#issuecomment-410984210">2018-08-07 08:52</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-08-07_0852" title="Permanent link">&para;</a></h4>
<p>@dewagner1<br />
an initial question only out of curiosity:<br />
Do you work together with @suseusr168 on the same system<br />
or happens your issue on a different system?</p>
<p>Your eniesdbd101_restore_fail1.txt contains (excerpts)</p>
<pre>
Configuring Relax-and-Recover rescue system
...
Running 67-check-by-label-cdrom.sh...
ln: failed to create symbolic link '/dev/disk/by-label/RELAXRECOVER': No such file or directory
Running 99-makedev.sh...
.
.
.
RESCUE eniesdbd012:~ # rear -dDv recover
...
ERROR: Mount command 'mount /dev/disk/by-label/RELAXRECOVER /tmp/rear.Ogqve80B29D23eG/outputfs' failed.
.
.
.
+++ mount /dev/disk/by-label/RELAXRECOVER /tmp/rear.Ogqve80B29D23eG/outputfs
mount: you must specify the filesystem type
</pre>

<p>while your eniesdbd101_restore_success.txt contains (excerpt)</p>
<pre>
Configuring Relax-and-Recover rescue system
...
Running 67-check-by-label-cdrom.sh...
Running 99-makedev.sh...
.
.
.
RESCUE eniesdbd012:~ # rear -dDv recover
.
.
.
+++ mount /dev/disk/by-label/RELAXRECOVER /tmp/rear.fdnZ71LVDP4vDbk/outputfs
mount: /dev/sr0 is write-protected, mounting read-only
</pre>

<p>I.e. when it fails the cause is during "Configuring Relax-and-Recover
rescue system" that<br />
<code>ln: failed to create symbolic link '/dev/disk/by-label/RELAXRECOVER': No such file or directory</code><br />
but currently I don't know what the root cause for that is.</p>
<p>usr/share/rear/skel/default/etc/scripts/system-setup.d/67-check-by-label-cdrom.sh<br />
contains</p>
<pre>
# On Ubuntu we have received many reports of a missing /dev/disk/by-label/RELAXRECOVER link
# and therefore during recovery the cdrom was not found automatically - details are in #326

# check if the symbolic link exist? Yes - just return
[[ -h /dev/disk/by-label/RELAXRECOVER ]] && return

if [[ -h /dev/cdrom ]] ; then
    ln -s  /dev/cdrom /dev/disk/by-label/RELAXRECOVER
elif [[ -b /dev/sr0 ]] ; then
    ln -s /dev/sr0 /dev/disk/by-label/RELAXRECOVER
else
    echo "Did not find a cdrom device. Recover might fail."
fi
</pre>

<p>which points to<br />
<a href="https://github.com/rear/rear/issues/326">https://github.com/rear/rear/issues/326</a></p>
<p>O.k. - seems to be just another "udev does not behave consistenty"
issue<br />
which matches perfectly your observation that it "works sometimes".</p>
<p>For more debugging what exactly happens while 67-check-by-label-cdrom.sh
runs<br />
you would need to run 67-check-by-label-cdrom.sh with <code>set -x</code> debugging
output.</p>
<p>To run the recovery system setup scripts one by one with <code>set -x</code>
debugging output<br />
you must add in the recovery system boot menue the kernel command line<br />
option <code>debug</code>.</p>
<p>Because you use GRUB2 to boot the recovery system the recovery system<br />
GRUB2 boot menue seems to be in your eniesdbd101_restore_fail1.txt</p>
<pre>
                             GNU GRUB  version 2.02
 +----------------------------------------------------------------------------+
 |*Relax-and-Recover                                                          |
 |                                                                            |
 |                                                                            |
 +----------------------------------------------------------------------------+
      Use the ^ and v keys to select which entry is highlighted.
      Press enter to boot the selected OS, `e' to edit the commands
      before booting or `c' for a command-line.
</pre>

<p>where you should be able to use <code>e</code> to edit the kernel command line<br />
and append the option <code>debug</code> to it.</p>
<p>Then during "Configuring Relax-and-Recover rescue system" you need to<br />
confirm running each recovery system startup script with the Enter key<br />
and each script would show <code>set -x</code> debugging output.</p>
<p>The <code>set -x</code> debugging output of the 67-check-by-label-cdrom.sh<br />
should help to find out what the reason is why<br />
<code>ln: failed to create symbolic link '/dev/disk/by-label/RELAXRECOVER': No such file or directory</code></p>
<p>From the 67-check-by-label-cdrom.sh code it seems the reason is<br />
that there is neither a /dev/cdrom nor a /dev/sr0 device node.</p>
<p>Perhaps on POWER LPAR the device node where the ISO is attached to<br />
could be something different (e.g. /dev/sr1 or whatever)?</p>
<p>If there is whatever device node where your ISO is attached to<br />
on your particular POWER LPAR system, you can manually create<br />
the missing symbolic link as a workaround before you run "rear recover".</p>
<p>If there is not any device node where your ISO is attached to<br />
on your particular POWER LPAR system, I don't know what to do.</p>
<p>I am not a POWER user so that I don't know how a POWER LPAR system
behaves<br />
but @schabrolles is a POWER user and I assume he can explain what goes
on<br />
in this particular case here.</p>
<h4 id="dewagner1_commented_at_2018-08-07_0906"><img src="https://avatars.githubusercontent.com/u/42152522?v=4" width="50"><a href="https://github.com/dewagner1">dewagner1</a> commented at <a href="https://github.com/rear/rear/issues/1891#issuecomment-410988082">2018-08-07 09:06</a>:<a class="headerlink" href="#dewagner1_commented_at_2018-08-07_0906" title="Permanent link">&para;</a></h4>
<p>Yes, we work together. I am trying to clone two systems using rear. I<br />
have not been able to restore the system that the problem was
originally<br />
opened for. It fails every time. However, when I tried to restore the<br />
second system, it worked. So I then tried the second system again and
it<br />
failed.</p>
<p>Also, the ethernet adapters are numbered differentlly almost everytime
I<br />
try a restore.</p>
<p>I will try to follow your instructions to gather more information.</p>
<p>Regards,<br />
Dan Wagner<br />
Senior Enterprise System Specialist</p>
<p>(717) 580-3844 Mobile<br />
(717) 409-5858 Office<br />
<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#100;&#119;&#97;&#103;&#110;&#101;&#114;&#49;&#64;&#117;&#115;&#46;&#105;&#98;&#109;&#46;&#99;&#111;&#109;">&#100;&#119;&#97;&#103;&#110;&#101;&#114;&#49;&#64;&#117;&#115;&#46;&#105;&#98;&#109;&#46;&#99;&#111;&#109;</a></p>
<p>IBM Services</p>
<h4 id="jsmeix_commented_at_2018-08-07_0926"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1891#issuecomment-410993931">2018-08-07 09:26</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-08-07_0926" title="Permanent link">&para;</a></h4>
<p>I am not at all a networking expert but as far as I know<br />
one cannot rely on the numbering of traditional network interface
names<br />
(i.e. eth0 versus eth1) because the network interface numbers<br />
depend on when each network interface hardware becomes available<br />
so that eth0 matches those network interface hardware that became<br />
first available to the kernel and eth1 is the next one and so on.<br />
In the end it depends on hardware timing randomness, cf.<br />
<a href="https://www.freedesktop.org/wiki/Software/systemd/PredictableNetworkInterfaceNames/">https://www.freedesktop.org/wiki/Software/systemd/PredictableNetworkInterfaceNames/</a></p>
<h4 id="jsmeix_commented_at_2018-08-07_0936"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1891#issuecomment-410996942">2018-08-07 09:36</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-08-07_0936" title="Permanent link">&para;</a></h4>
<p>Correction:<br />
In<br />
<a href="https://github.com/rear/rear/issues/1891#issuecomment-410984210">https://github.com/rear/rear/issues/1891#issuecomment-410984210</a><br />
I wrote</p>
<pre>
From the 67-check-by-label-cdrom.sh code it seems the reason is
that there is neither a /dev/cdrom nor a /dev/sr0 device node.
</pre>

<p>After a bit closer looking at the code in 67-check-by-label-cdrom.sh<br />
I think now the reason is that there is no /dev/disk/by-label/
directory<br />
where 'ln' could create the symbolic link
'/dev/disk/by-label/RELAXRECOVER'<br />
because I can reproduce it this way:</p>
<pre>
# ln -s /etc/doesnotexist /tmp/doesnotexist/issue
ln: failed to create symbolic link '/tmp/doesnotexist/issue': No such file or directory

# ln -s /etc/doesnotexist /tmp/issue

# file /tmp/issue
/tmp/issue: broken symbolic link to /etc/doesnotexist
</pre>

<p>Currently I have no idea what the root cause is<br />
when there is no /dev/disk/by-label/ directory.<br />
I guess it is related to systemd/udev...</p>
<h4 id="dewagner1_commented_at_2018-08-07_0940"><img src="https://avatars.githubusercontent.com/u/42152522?v=4" width="50"><a href="https://github.com/dewagner1">dewagner1</a> commented at <a href="https://github.com/rear/rear/issues/1891#issuecomment-410997970">2018-08-07 09:40</a>:<a class="headerlink" href="#dewagner1_commented_at_2018-08-07_0940" title="Permanent link">&para;</a></h4>
<p>We have never seen this behavior using rear 2.1 on sles 11 sp4. The<br />
ethernet adapters are always consistently eth0 and eth1.</p>
<p>[Ashburn] eniesdbd002:~ # rear -V<br />
Relax-and-Recover 2.1-git.2325.fc6e788.master / 2017-07-16<br />
[Ashburn] eniesdbd002:~ # uname -a<br />
Linux eniesdbd002 3.0.101-108.18.1.14692.0.PTF-bigmem #1 SMP Wed Jan
31<br />
01:12:29 UTC 2018 (8d683c9) ppc64 ppc64 ppc64 GNU/Linux</p>
<h4 id="dewagner1_commented_at_2018-08-07_0941"><img src="https://avatars.githubusercontent.com/u/42152522?v=4" width="50"><a href="https://github.com/dewagner1">dewagner1</a> commented at <a href="https://github.com/rear/rear/issues/1891#issuecomment-410998203">2018-08-07 09:41</a>:<a class="headerlink" href="#dewagner1_commented_at_2018-08-07_0941" title="Permanent link">&para;</a></h4>
<p>Would you still like me to run the recover with debug appended to the<br />
kernel line in grub?</p>
<h4 id="dewagner1_commented_at_2018-08-07_0954"><img src="https://avatars.githubusercontent.com/u/42152522?v=4" width="50"><a href="https://github.com/dewagner1">dewagner1</a> commented at <a href="https://github.com/rear/rear/issues/1891#issuecomment-411002148">2018-08-07 09:54</a>:<a class="headerlink" href="#dewagner1_commented_at_2018-08-07_0954" title="Permanent link">&para;</a></h4>
<p>Here is a file with the screen capture and the log file appended to
the<br />
end.</p>
<p>(See attached file: eniesdbs101 kernel debug.txt)</p>
<h4 id="jsmeix_commented_at_2018-08-07_0955"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1891#issuecomment-411002238">2018-08-07 09:55</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-08-07_0955" title="Permanent link">&para;</a></h4>
<p>@dewagner1<br />
yes, please - we need the debug output to be able to move forward<br />
from the current guesswork to what really happens on your system.</p>
<h4 id="jsmeix_commented_at_2018-08-07_1003"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1891#issuecomment-411004436">2018-08-07 10:03</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-08-07_1003" title="Permanent link">&para;</a></h4>
<p>@dewagner1<br />
your <code>attached file: eniesdbs101 kernel debug.txt</code> appears as text in<br />
<a href="https://github.com/rear/rear/issues/1891#issuecomment-411002148">https://github.com/rear/rear/issues/1891#issuecomment-411002148</a><br />
and there it is only partially i.e. it is truncated (in particular there
is<br />
no debug output of the 67-check-by-label-cdrom.sh script).</p>
<p>Can you attach it again as a file as you successfully did it for your
files<br />
eniesdbd101_restore_fail1.txt and eniesdbd101_restore_success.txt<br />
in your<br />
<a href="https://github.com/rear/rear/issues/1891#issuecomment-410820702">https://github.com/rear/rear/issues/1891#issuecomment-410820702</a></p>
<h4 id="jsmeix_commented_at_2018-08-07_1010"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1891#issuecomment-411006196">2018-08-07 10:10</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-08-07_1010" title="Permanent link">&para;</a></h4>
<p>@dewagner1<br />
regarding your
<a href="https://github.com/rear/rear/issues/1891#issuecomment-410997970">https://github.com/rear/rear/issues/1891#issuecomment-410997970</a></p>
<p>On SLES11 things worked in the traditional way.<br />
Since SLES12 there is systemd that includes a newer udev.</p>
<h4 id="dewagner1_commented_at_2018-08-07_1026"><img src="https://avatars.githubusercontent.com/u/42152522?v=4" width="50"><a href="https://github.com/dewagner1">dewagner1</a> commented at <a href="https://github.com/rear/rear/issues/1891#issuecomment-411010651">2018-08-07 10:26</a>:<a class="headerlink" href="#dewagner1_commented_at_2018-08-07_1026" title="Permanent link">&para;</a></h4>
<p><a href="https://github.com/rear/rear/files/2266025/eniesdbs101.kernel.debug.txt">eniesdbs101 kernel
debug.txt</a></p>
<h4 id="jsmeix_commented_at_2018-08-07_1054"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1891#issuecomment-411017183">2018-08-07 10:54</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-08-07_1054" title="Permanent link">&para;</a></h4>
<p>The eniesdbs101 kernel debug.txt contains</p>
<pre>
Press ENTER to run 67-check-by-label-cdrom.sh
+ source /etc/scripts/system-setup.d/67-check-by-label-cdrom.sh
++ [[ -h /dev/disk/by-label/RELAXRECOVER ]]
++ [[ -h /dev/cdrom ]]
++ ln -s /dev/cdrom /dev/disk/by-label/RELAXRECOVER
ln: failed to create symbolic link '/dev/disk/by-label/RELAXRECOVER': No such file or directory

Press ENTER to run 99-makedev.sh
</pre>

<p>which means there is a /dev/cdrom<br />
but it does not show the reason behind why <code>ln</code> failed.</p>
<p>Currently I have no good idea what to do next.<br />
Therefore now only some blind shot in the dark:</p>
<p>@dewagner1<br />
when you are logged in as root in the recovery system<br />
(i.e. without running "rear recover"), what do the commands<br />
<code>ls -l /dev/disk</code> and <code>ls -l /dev/disk/*</code> show?</p>
<p>If they show nothing, wait one minute and retry.</p>
<h4 id="dewagner1_commented_at_2018-08-07_1130"><img src="https://avatars.githubusercontent.com/u/42152522?v=4" width="50"><a href="https://github.com/dewagner1">dewagner1</a> commented at <a href="https://github.com/rear/rear/issues/1891#issuecomment-411025148">2018-08-07 11:30</a>:<a class="headerlink" href="#dewagner1_commented_at_2018-08-07_1130" title="Permanent link">&para;</a></h4>
<pre>
RESCUE eniesdbd012:~ # ls -l /dev/disk
total 0
drwxr-xr-x 2 root root 120 Aug  7 07:16 by-id
drwxr-xr-x 2 root root 280 Aug  7 07:16 by-path

RESCUE eniesdbd012:~ # ls -l /dev/disk/*
/dev/disk/by-id:
total 0
lrwxrwxrwx 1 root root 10 Aug  7 07:16 lvm-pv-uuid-eoHhwg-IEaj-xKuI-Q34I-ppZs-eUgd-4U8bqj -> ../../sdb2
lrwxrwxrwx 1 root root 10 Aug  7 07:16 'scsi-0IBM_2810XIV_host=eniesdbs101_OS-part2' -> ../../sdd2
lrwxrwxrwx 1 root root 10 Aug  7 07:16 scsi-1IBM_2810XIV_78033E700F2-part2 -> ../../sdc2
lrwxrwxrwx 1 root root 10 Aug  7 07:16 scsi-20017380033e700f2-part1 -> ../../sdb1

/dev/disk/by-path:
total 0
lrwxrwxrwx 1 root root  9 Aug  7 07:16 fc-0x5001738033e70140-lun-1 -> ../../sda
lrwxrwxrwx 1 root root 10 Aug  7 07:16 fc-0x5001738033e70140-lun-1-part1 -> ../../sda1
lrwxrwxrwx 1 root root 10 Aug  7 07:16 fc-0x5001738033e70140-lun-1-part2 -> ../../sda2
lrwxrwxrwx 1 root root  9 Aug  7 07:16 fc-0x5001738033e70142-lun-1 -> ../../sdc
lrwxrwxrwx 1 root root 10 Aug  7 07:16 fc-0x5001738033e70142-lun-1-part1 -> ../../sdc1
lrwxrwxrwx 1 root root 10 Aug  7 07:16 fc-0x5001738033e70142-lun-1-part2 -> ../../sdc2
lrwxrwxrwx 1 root root  9 Aug  7 07:16 fc-0x5001738033e70152-lun-1 -> ../../sdd
lrwxrwxrwx 1 root root 10 Aug  7 07:16 fc-0x5001738033e70152-lun-1-part1 -> ../../sdd1
lrwxrwxrwx 1 root root 10 Aug  7 07:16 fc-0x5001738033e70152-lun-1-part2 -> ../../sdd2
lrwxrwxrwx 1 root root  9 Aug  7 07:16 fc-0x5001738033e70170-lun-1 -> ../../sdb
lrwxrwxrwx 1 root root 10 Aug  7 07:16 fc-0x5001738033e70170-lun-1-part1 -> ../../sdb1
lrwxrwxrwx 1 root root 10 Aug  7 07:16 fc-0x5001738033e70170-lun-1-part2 -> ../../sdb2
</pre>

<h4 id="jsmeix_commented_at_2018-08-07_1131"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1891#issuecomment-411025347">2018-08-07 11:31</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-08-07_1131" title="Permanent link">&para;</a></h4>
<p>From what I learned here I think the current recovery system setup<br />
script 67-check-by-label-cdrom.sh needs to be overhauled,<br />
see
<a href="https://github.com/rear/rear/issues/1893">https://github.com/rear/rear/issues/1893</a></p>
<h4 id="jsmeix_commented_at_2018-08-07_1139"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1891#issuecomment-411027324">2018-08-07 11:39</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-08-07_1139" title="Permanent link">&para;</a></h4>
<p>@dewagner1<br />
your
<a href="https://github.com/rear/rear/issues/1891#issuecomment-411025148">https://github.com/rear/rear/issues/1891#issuecomment-411025148</a><br />
proves what I suspected in<br />
<a href="https://github.com/rear/rear/issues/1891#issuecomment-410996942">https://github.com/rear/rear/issues/1891#issuecomment-410996942</a></p>
<p>There is no /dev/disk/by-label/ directory.</p>
<p>And it even indicates that there is not any kernel device node for any
kind of<br />
CDROM-like device (i.e. a device node where the ReaR ISO image is
attached to).</p>
<p>It seems there are only device nodes for normal disks 'sdX'<br />
and normal disk partitions 'sdXN'.</p>
<p>@schabrolles<br />
can you perhaps help here to find the root cause why<br />
in the running ReaR recovery system there is no device node<br />
where the ReaR ISO image is attached to.</p>
<p>I am puzzled because the ReaR recovery system was booted<br />
from an attached ReaR ISO image (i.e. GRUB2 can access it)<br />
but it seems from within the running ReaR recovery system<br />
that same ReaR ISO image is no longer accessible.</p>
<p>For comparison how it looks on my KVM x86_64 system<br />
from within the running ReaR recovery system see<br />
<a href="https://github.com/rear/rear/issues/1893#issue-348280637">https://github.com/rear/rear/issues/1893#issue-348280637</a></p>
<h4 id="schabrolles_commented_at_2018-08-07_1206"><img src="https://avatars.githubusercontent.com/u/19491077?u=0021b16ab426902cbe676f6831f41607bbe4d441&v=4" width="50"><a href="https://github.com/schabrolles">schabrolles</a> commented at <a href="https://github.com/rear/rear/issues/1891#issuecomment-411033276">2018-08-07 12:06</a>:<a class="headerlink" href="#schabrolles_commented_at_2018-08-07_1206" title="Permanent link">&para;</a></h4>
<p>@dewagner1, could you please run <code>blkid</code> after booting on the recovery
ReaR ISO.</p>
<h4 id="dewagner1_commented_at_2018-08-07_1212"><img src="https://avatars.githubusercontent.com/u/42152522?v=4" width="50"><a href="https://github.com/dewagner1">dewagner1</a> commented at <a href="https://github.com/rear/rear/issues/1891#issuecomment-411034838">2018-08-07 12:12</a>:<a class="headerlink" href="#dewagner1_commented_at_2018-08-07_1212" title="Permanent link">&para;</a></h4>
<pre>
RESCUE eniesdbd012:~ # blkid
/dev/sr0: UUID="2018-08-06-10-20-24-00" LABEL="RELAXRECOVER" TYPE="iso9660" PTTYPE="dos"
/dev/sda1: PARTUUID="000bb0f5-01"
/dev/sda2: UUID="eoHhwg-IEaj-xKuI-Q34I-ppZs-eUgd-4U8bqj" TYPE="LVM2_member" PARTUUID="000bb0f5-02"
/dev/sdb1: PARTUUID="000bb0f5-01"
/dev/sdb2: UUID="eoHhwg-IEaj-xKuI-Q34I-ppZs-eUgd-4U8bqj" TYPE="LVM2_member" PARTUUID="000bb0f5-02"
/dev/sdc1: PARTUUID="000bb0f5-01"
/dev/sdc2: UUID="eoHhwg-IEaj-xKuI-Q34I-ppZs-eUgd-4U8bqj" TYPE="LVM2_member" PARTUUID="000bb0f5-02"
/dev/sdd1: PARTUUID="000bb0f5-01"
/dev/sdd2: UUID="eoHhwg-IEaj-xKuI-Q34I-ppZs-eUgd-4U8bqj" TYPE="LVM2_member" PARTUUID="000bb0f5-02"
</pre>

<h4 id="schabrolles_commented_at_2018-08-07_1234"><img src="https://avatars.githubusercontent.com/u/19491077?u=0021b16ab426902cbe676f6831f41607bbe4d441&v=4" width="50"><a href="https://github.com/schabrolles">schabrolles</a> commented at <a href="https://github.com/rear/rear/issues/1891#issuecomment-411040450">2018-08-07 12:34</a>:<a class="headerlink" href="#schabrolles_commented_at_2018-08-07_1234" title="Permanent link">&para;</a></h4>
<p>Ok thanks @dewagner1</p>
<p>As @jsmeix says the issue is mainly the fact that <code>/dev/disk/by-label</code>
directory does not exist on your system. So <code>67-check-by-label-cdrom.sh</code>
failed to create the link.</p>
<p>If you need to restore your image, you can manually create the directory
<code>/dev/disk/by-label</code> and manually create the link
<code>ln -s /dev/sr0 /dev/disk/by-label/RELAXRECOVER</code>.<br />
Then try a rear recover.</p>
<p>@jsmeix we should be able to make <code>67-check-by-label-cdrom.sh</code> a bit
more dynamic by using <code>blkid</code> and be sure that <code>/dev/disk/by-label</code>
directory is created.</p>
<h4 id="jsmeix_commented_at_2018-08-07_1236"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1891#issuecomment-411040802">2018-08-07 12:36</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-08-07_1236" title="Permanent link">&para;</a></h4>
<p>@schabrolles<br />
yes, that's the point of
<a href="https://github.com/rear/rear/issues/1893">https://github.com/rear/rear/issues/1893</a></p>
<h4 id="jsmeix_commented_at_2018-08-07_1239"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1891#issuecomment-411041620">2018-08-07 12:39</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-08-07_1239" title="Permanent link">&para;</a></h4>
<p>@schabrolles<br />
do you have an idea why sometimes the /dev/disk/by-label directory is
not created<br />
and sometimes it is created (when things work) - i.e. why things do not
behave<br />
consistently (of course except the generic answer that since
systemd/udev<br />
things do no longer behave consistently ;-)</p>
<h4 id="dewagner1_commented_at_2018-08-07_1253"><img src="https://avatars.githubusercontent.com/u/42152522?v=4" width="50"><a href="https://github.com/dewagner1">dewagner1</a> commented at <a href="https://github.com/rear/rear/issues/1891#issuecomment-411045379">2018-08-07 12:53</a>:<a class="headerlink" href="#dewagner1_commented_at_2018-08-07_1253" title="Permanent link">&para;</a></h4>
<p>If I create the /dev/disk/by-label directory and create the link<br />
ln -s /dev/sr0 /dev/disk/by-label/RELAXRECOVER<br />
the restore works.</p>
<h4 id="jsmeix_commented_at_2018-08-07_1258"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1891#issuecomment-411046798">2018-08-07 12:58</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-08-07_1258" title="Permanent link">&para;</a></h4>
<p>@dewagner1<br />
thanks for confrmation how to make "rear recover" work in this case.<br />
Now we can enhance that 67-check-by-label-cdrom.sh to make it work more
fail safe.</p>
<p>FYI:<br />
You can automate such manual workaround hacks via<br />
a PRE_RECOVERY_SCRIPT see usr/share/rear/conf/default.conf<br />
for example in your case something like (untested):</p>
<pre>
PRE_RECOVERY_SCRIPT=( 'if ! test -h /dev/disk/by-label/RELAXRECOVER ; then mkdir -p /dev/disk/by-label ; ln -s /dev/sr0 /dev/disk/by-label/RELAXRECOVER ; fi' )
</pre>

<h4 id="jsmeix_commented_at_2018-08-08_1543"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1891#issuecomment-411453072">2018-08-08 15:43</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-08-08_1543" title="Permanent link">&para;</a></h4>
<p>The false alarm during the md5sum verification in<br />
<a href="https://github.com/rear/rear/issues/1891#issue-347952166">https://github.com/rear/rear/issues/1891#issue-347952166</a><br />
should become fixed with
<a href="https://github.com/rear/rear/pull/1895">https://github.com/rear/rear/pull/1895</a></p>
<h4 id="jsmeix_commented_at_2018-08-08_1547"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1891#issuecomment-411454395">2018-08-08 15:47</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-08-08_1547" title="Permanent link">&para;</a></h4>
<p>The actual issue here (missing /dev/disk/by-label directory<br />
and missing symlink /dev/disk/by-label/RELAXRECOVER<br />
that points to a block device with filesystem label RELAXRECOVER)<br />
should become fixed with
<a href="https://github.com/rear/rear/pull/1894">https://github.com/rear/rear/pull/1894</a></p>
<h4 id="schabrolles_commented_at_2018-08-08_1602"><img src="https://avatars.githubusercontent.com/u/19491077?u=0021b16ab426902cbe676f6831f41607bbe4d441&v=4" width="50"><a href="https://github.com/schabrolles">schabrolles</a> commented at <a href="https://github.com/rear/rear/issues/1891#issuecomment-411459720">2018-08-08 16:02</a>:<a class="headerlink" href="#schabrolles_commented_at_2018-08-08_1602" title="Permanent link">&para;</a></h4>
<p>@jsmeix, regarding
<a href="https://github.com/rear/rear/issues/1891#issuecomment-411041620">https://github.com/rear/rear/issues/1891#issuecomment-411041620</a><br />
I've no idea why sometimes <code>/dev/disk/by-label/</code> is not created ...</p>
<h4 id="jsmeix_commented_at_2018-08-10_1044"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1891#issuecomment-412047177">2018-08-10 10:44</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-08-10_1044" title="Permanent link">&para;</a></h4>
<p>With
<a href="https://github.com/rear/rear/pull/1894">https://github.com/rear/rear/pull/1894</a>
merged<br />
this issue should be sufficiently fixed.</p>
<p>"Sufficiently fixed" means that it cannot magically heal it when in the
recovery system<br />
there is no block device with filesystem label $ISO_VOLID
(RELAXRECOVER)<br />
but now "rear recover" shows a user dialog in this case where the user
can fix things<br />
(e.g. attach a CDROM with the RELAXRECOVER labeled ReaR ISO).</p>
<p>But when there is a device with filesystem label $ISO_VOLID
(RELAXRECOVER)<br />
things repair automatically when the /dev/disk/by-label/RELAXRECOVER
symlink<br />
does not point to that device or when there is no such symlink.</p>
<p>See<br />
<a href="https://github.com/rear/rear/pull/1894#issuecomment-411766357">https://github.com/rear/rear/pull/1894#issuecomment-411766357</a><br />
for some examples how it behaves now.</p>
<h4 id="ccjung_commented_at_2018-08-10_1305"><img src="https://avatars.githubusercontent.com/u/29214472?u=58ae98d864664297a19702de40bf4767338e396b&v=4" width="50"><a href="https://github.com/ccjung">ccjung</a> commented at <a href="https://github.com/rear/rear/issues/1891#issuecomment-412076364">2018-08-10 13:05</a>:<a class="headerlink" href="#ccjung_commented_at_2018-08-10_1305" title="Permanent link">&para;</a></h4>
<p>Will this fix be in 2.4 or 2.5?</p>
<p>Do we continue to use your 23a version with the workaround or can you
provide us the updated version with this fix?</p>
<p>Thanks.</p>
<h4 id="jsmeix_commented_at_2018-08-10_1425"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1891#issuecomment-412098431">2018-08-10 14:25</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-08-10_1425" title="Permanent link">&para;</a></h4>
<p>@suseusr168 and @dewagner1</p>
<p>If you like to try out our latest ReaR GitHub upstream code<br />
that contaions all fixes and enhancements up to now<br />
on your SLES12-SP3 PPC64LE system:</p>
<p>I provide the latest ReaR GitHub upstream code as of today<br />
in my RPM package rear23a via the public openSUSE build service<br />
wherefrom you could download the currently latest built RPM package<br />
rear23a-2.3.a-2.1.ppc64le.rpm (the RPM release number 2.1 varies) from<br />
<a href="http://download.opensuse.org/repositories/home:/jsmeix/SLE_12_SP3/ppc64le/">http://download.opensuse.org/repositories/home:/jsmeix/SLE_12_SP3/ppc64le/</a></p>
<p>Regarding what latest fixes and enhancements<br />
that rear23a RPM package actually contains<br />
see at<br />
<a href="https://build.opensuse.org/package/show/home:jsmeix/rear23a">https://build.opensuse.org/package/show/home:jsmeix/rear23a</a><br />
my rear23a.changes file<br />
<a href="https://build.opensuse.org/package/view_file/home:jsmeix/rear23a/rear23a.changes?expand=1">https://build.opensuse.org/package/view_file/home:jsmeix/rear23a/rear23a.changes?expand=1</a></p>
<p>The openSUSE build service is not an official repository for RPM
packages<br />
that are officially supported by SUSE for SUSE Linux Enterprise
products<br />
so that in particular any RPM packages from<br />
<a href="http://download.opensuse.org/repositories/home:/jsmeix/">http://download.opensuse.org/repositories/home:/jsmeix/</a><br />
are not officially supported by SUSE, cf.<br />
<a href="https://build.opensuse.org/project/show/home:jsmeix">https://build.opensuse.org/project/show/home:jsmeix</a></p>
<p>But this way you could right now try out what is intended to become<br />
the officially provided rear23a package for SLEHA15 SLEHA12 and
SLEHA11<br />
provided no further serious issues appear with it.</p>
<p>I would very much appreciate it if you try out and test and verify
whether or not<br />
my currently latest updated rear23a RPM package actually works<br />
for you on your particular system in your particular environment<br />
and provide feedback to us here at ReaR upstream.</p>
<p>Many thanks in advance for testing it!</p>
<h4 id="ccjung_commented_at_2018-08-11_0109"><img src="https://avatars.githubusercontent.com/u/29214472?u=58ae98d864664297a19702de40bf4767338e396b&v=4" width="50"><a href="https://github.com/ccjung">ccjung</a> commented at <a href="https://github.com/rear/rear/issues/1891#issuecomment-412240381">2018-08-11 01:09</a>:<a class="headerlink" href="#ccjung_commented_at_2018-08-11_0109" title="Permanent link">&para;</a></h4>
<p>I was able to backup/restore using your rear23a-2.3.a-2.1.ppc64le rpm.</p>
<p><a href="https://github.com/rear/rear/files/2279805/Rear23a21.Restore.log">Rear23a21.Restore.log</a></p>
<pre>
ps1dca0u:~ # cat /etc/os-release
NAME="SLES"
VERSION="12-SP3"
VERSION_ID="12.3"
PRETTY_NAME="SUSE Linux Enterprise Server 12 SP3"
ID="sles"
ANSI_COLOR="0;32"
CPE_NAME="cpe:/o:suse:sles:12:sp3"

ps1dca0u:~ # rpm -qa|grep rear
rear23a-2.3.a-2.1.ppc64le
</pre>

<h4 id="jsmeix_commented_at_2018-08-13_0810"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1891#issuecomment-412440589">2018-08-13 08:10</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-08-13_0810" title="Permanent link">&para;</a></h4>
<p>@suseusr168<br />
many thanks for your prompt testing and your explicit feedback.<br />
Your Rear23a21.Restore.log looks fine to me.</p>
<h4 id="ccjung_commented_at_2018-08-13_1303"><img src="https://avatars.githubusercontent.com/u/29214472?u=58ae98d864664297a19702de40bf4767338e396b&v=4" width="50"><a href="https://github.com/ccjung">ccjung</a> commented at <a href="https://github.com/rear/rear/issues/1891#issuecomment-412510289">2018-08-13 13:03</a>:<a class="headerlink" href="#ccjung_commented_at_2018-08-13_1303" title="Permanent link">&para;</a></h4>
<p>I forgot to mention we still see the following at the beginning of the
restore but it doesn't stop the restore process:</p>
<p>error: unrecognized number.</p>
<h4 id="jsmeix_commented_at_2018-08-13_1456"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1891#issuecomment-412547740">2018-08-13 14:56</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-08-13_1456" title="Permanent link">&para;</a></h4>
<p>@suseusr168<br />
I had noticed the GRUB2 <code>error: unrecognized number.</code><br />
but I still cannot find out what its root cause is, cf.<br />
<a href="https://github.com/rear/rear/issues/1883#issuecomment-409867612">https://github.com/rear/rear/issues/1883#issuecomment-409867612</a></p>
<p>I think as long as GRUB2 can load kernel and recovery system initrd<br />
(i.e. as long as GRUB2 can boot the recovery system)<br />
you could ignore that GRUB2 <code>error: unrecognized number.</code></p>
<p>I think to find the root cause of the GRUB2
<code>error: unrecognized number.</code><br />
a GRUB2 expert who can imagine what each GRUB2 config setting results<br />
would have to analyze the GRUB2 config of the recovery system<br />
to (hopefully) find something that is not fully right therein.</p>
<p>But I am not a POWER user and I don't know how booting with GRUB2
happens<br />
on PPC64LE PowerVM LPAR (in general I am not at all a bootloader
expert)<br />
so that I cannot really help in this area.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2022 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2018-08-06.1891.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
