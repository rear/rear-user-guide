<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#2681 Issue closed: Error when booting with rear uefi iso - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#2681 Issue closed: Error when booting with rear uefi iso";
        var mkdocs_page_input_path = "issues/2021-09-27.2681.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#2681 Issue closed: Error when booting with rear uefi iso</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="2681_issue_closed_error_when_booting_with_rear_uefi_iso"><a href="https://github.com/rear/rear/issues/2681">#2681 Issue</a> <code>closed</code>: Error when booting with rear uefi iso<a class="headerlink" href="#2681_issue_closed_error_when_booting_with_rear_uefi_iso" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>support / question</code>, <code>won't fix / can't fix / obsolete</code></p>
<h4 id="rolfweilen_opened_issue_at_2021-09-27_1231"><img src="https://avatars.githubusercontent.com/u/20532944?v=4" width="50"><a href="https://github.com/RolfWeilen">RolfWeilen</a> opened issue at <a href="https://github.com/rear/rear/issues/2681">2021-09-27 12:31</a>:<a class="headerlink" href="#rolfweilen_opened_issue_at_2021-09-27_1231" title="Permanent link">&para;</a></h4>
<h4 id="relax-and-recover_rear_issue_template">Relax-and-Recover (ReaR) Issue Template<a class="headerlink" href="#relax-and-recover_rear_issue_template" title="Permanent link">&para;</a></h4>
<p>Fill in the following items before submitting a new issue<br />
(quick response is not guaranteed with free support):</p>
<ul>
<li>
<p>ReaR version ("/usr/sbin/rear -V"):<br />
    Relax-and-Recover 2.6 / Git<br />
    rpm: rear-2.6.5-1.el7.x86_64</p>
</li>
<li>
<p>OS version ("cat /etc/os-release" or "lsb_release -a" or "cat
    /etc/rear/os.conf"):<br />
    OS_VENDOR=RedHatEnterpriseServer<br />
    OS_VERSION=8.3</p>
</li>
<li>
<p>ReaR configuration files ("cat /etc/rear/site.conf" and/or "cat
    /etc/rear/local.conf"):<br />
    AUTOEXCLUDE_MULTIPATH=N<br />
    OUTPUT=ISO<br />
    OUTPUT_URL=null<br />
    ISO_DEFAULT=manuel<br />
    TIMESYNC=NTP<br />
    BACKUP=TSM<br />
    TSM_RESULT_SAVE=n<br />
    TSM_RESULT_FILE_PATH=<br />
    USE_DHCLIENT=y<br />
    USE_STATIC_NETWORKING=<br />
    ONLY_INCLUDE_VG=(s53r010vg00)<br />
    GRUB_RESCUE=n<br />
    WAIT_SECS=31104000<br />
    SSH_ROOT_PASSWORD=rear</p>
</li>
<li>
<p>Hardware (PC or PowerNV BareMetal or ARM) or virtual machine (KVM
    guest or PoverVM LPAR):<br />
    BareMetal</p>
</li>
<li>
<p>System architecture (x86 compatible or PPC64/PPC64LE or what exact
    ARM device):<br />
    x86</p>
</li>
<li>
<p>Firmware (BIOS or UEFI or Open Firmware) and bootloader (GRUB or
    ELILO or Petitboot):<br />
    UEFI</p>
</li>
<li>
<p>Storage (local disk or SSD) and/or SAN (FC or iSCSI or FCoE) and/or
    multipath (DM or NVMe):<br />
    SAN</p>
</li>
<li>
<p>Storage layout ("lsblk -ipo
    NAME,KNAME,PKNAME,TRAN,TYPE,FSTYPE,SIZE,MOUNTPOINT" or "lsblk" as
    makeshift):</p>
</li>
</ul>
<!-- -->

<pre><code>NAME                                                KNAME      PKNAME    TRAN TYPE  FSTYPE         SIZE MOUNTPOINT
/dev/sda                                            /dev/sda             fc   disk  mpath_member   240G 
`-/dev/mapper/360060e8007e2ce000030e2ce00002041     /dev/dm-0  /dev/sda       mpath                240G 
  |-/dev/mapper/360060e8007e2ce000030e2ce00002041p1 /dev/dm-1  /dev/dm-0      part  vfat           200M /boot/efi
  |-/dev/mapper/360060e8007e2ce000030e2ce00002041p2 /dev/dm-2  /dev/dm-0      part  xfs              2G /boot
  `-/dev/mapper/360060e8007e2ce000030e2ce00002041p3 /dev/dm-3  /dev/dm-0      part  LVM2_member  237.9G 
    |-/dev/mapper/s53r010vg00-root                  /dev/dm-4  /dev/dm-3      lvm   xfs             50G /
    |-/dev/mapper/s53r010vg00-swap                  /dev/dm-5  /dev/dm-3      lvm   swap            16G [SWAP]
    |-/dev/mapper/s53r010vg00-alib                  /dev/dm-6  /dev/dm-3      lvm   xfs              5G /app/lib
    |-/dev/mapper/s53r010vg00-home                  /dev/dm-7  /dev/dm-3      lvm   xfs              5G /home
    |-/dev/mapper/s53r010vg00-vlsu                  /dev/dm-8  /dev/dm-3      lvm   xfs              5G /var/log/suva
    |-/dev/mapper/s53r010vg00-vlog                  /dev/dm-9  /dev/dm-3      lvm   xfs              5G /var/log
    `-/dev/mapper/s53r010vg00-uloc                  /dev/dm-10 /dev/dm-3      lvm   xfs              5G /usr/local
/dev/sdb                                            /dev/sdb             fc   disk  mpath_member   240G 
`-/dev/mapper/360060e8007e2ce000030e2ce00002041     /dev/dm-0  /dev/sdb       mpath                240G 
  |-/dev/mapper/360060e8007e2ce000030e2ce00002041p1 /dev/dm-1  /dev/dm-0      part  vfat           200M /boot/efi
  |-/dev/mapper/360060e8007e2ce000030e2ce00002041p2 /dev/dm-2  /dev/dm-0      part  xfs              2G /boot
  `-/dev/mapper/360060e8007e2ce000030e2ce00002041p3 /dev/dm-3  /dev/dm-0      part  LVM2_member  237.9G 
    |-/dev/mapper/s53r010vg00-root                  /dev/dm-4  /dev/dm-3      lvm   xfs             50G /
    |-/dev/mapper/s53r010vg00-swap                  /dev/dm-5  /dev/dm-3      lvm   swap            16G [SWAP]
    |-/dev/mapper/s53r010vg00-alib                  /dev/dm-6  /dev/dm-3      lvm   xfs              5G /app/lib
    |-/dev/mapper/s53r010vg00-home                  /dev/dm-7  /dev/dm-3      lvm   xfs              5G /home
    |-/dev/mapper/s53r010vg00-vlsu                  /dev/dm-8  /dev/dm-3      lvm   xfs              5G /var/log/suva
    |-/dev/mapper/s53r010vg00-vlog                  /dev/dm-9  /dev/dm-3      lvm   xfs              5G /var/log
    `-/dev/mapper/s53r010vg00-uloc                  /dev/dm-10 /dev/dm-3      lvm   xfs              5G /usr/local
/dev/sdc                                            /dev/sdc             fc   disk  mpath_member   240G 
`-/dev/mapper/360060e8007e2ce000030e2ce00002041     /dev/dm-0  /dev/sdc       mpath                240G 
  |-/dev/mapper/360060e8007e2ce000030e2ce00002041p1 /dev/dm-1  /dev/dm-0      part  vfat           200M /boot/efi
  |-/dev/mapper/360060e8007e2ce000030e2ce00002041p2 /dev/dm-2  /dev/dm-0      part  xfs              2G /boot
  `-/dev/mapper/360060e8007e2ce000030e2ce00002041p3 /dev/dm-3  /dev/dm-0      part  LVM2_member  237.9G 
    |-/dev/mapper/s53r010vg00-root                  /dev/dm-4  /dev/dm-3      lvm   xfs             50G /
    |-/dev/mapper/s53r010vg00-swap                  /dev/dm-5  /dev/dm-3      lvm   swap            16G [SWAP]
    |-/dev/mapper/s53r010vg00-alib                  /dev/dm-6  /dev/dm-3      lvm   xfs              5G /app/lib
    |-/dev/mapper/s53r010vg00-home                  /dev/dm-7  /dev/dm-3      lvm   xfs              5G /home
    |-/dev/mapper/s53r010vg00-vlsu                  /dev/dm-8  /dev/dm-3      lvm   xfs              5G /var/log/suva
    |-/dev/mapper/s53r010vg00-vlog                  /dev/dm-9  /dev/dm-3      lvm   xfs              5G /var/log
    `-/dev/mapper/s53r010vg00-uloc                  /dev/dm-10 /dev/dm-3      lvm   xfs              5G /usr/local
/dev/sdd                                            /dev/sdd             fc   disk  mpath_member   240G 
`-/dev/mapper/360060e8007e2ce000030e2ce00002041     /dev/dm-0  /dev/sdd       mpath                240G 
  |-/dev/mapper/360060e8007e2ce000030e2ce00002041p1 /dev/dm-1  /dev/dm-0      part  vfat           200M /boot/efi
  |-/dev/mapper/360060e8007e2ce000030e2ce00002041p2 /dev/dm-2  /dev/dm-0      part  xfs              2G /boot
  `-/dev/mapper/360060e8007e2ce000030e2ce00002041p3 /dev/dm-3  /dev/dm-0      part  LVM2_member  237.9G 
    |-/dev/mapper/s53r010vg00-root                  /dev/dm-4  /dev/dm-3      lvm   xfs             50G /
    |-/dev/mapper/s53r010vg00-swap                  /dev/dm-5  /dev/dm-3      lvm   swap            16G [SWAP]
    |-/dev/mapper/s53r010vg00-alib                  /dev/dm-6  /dev/dm-3      lvm   xfs              5G /app/lib
    |-/dev/mapper/s53r010vg00-home                  /dev/dm-7  /dev/dm-3      lvm   xfs              5G /home
    |-/dev/mapper/s53r010vg00-vlsu                  /dev/dm-8  /dev/dm-3      lvm   xfs              5G /var/log/suva
    |-/dev/mapper/s53r010vg00-vlog                  /dev/dm-9  /dev/dm-3      lvm   xfs              5G /var/log
    `-/dev/mapper/s53r010vg00-uloc                  /dev/dm-10 /dev/dm-3      lvm   xfs              5G /usr/local
/dev/sr0                                            /dev/sr0             usb  rom   udf          712.5M
</code></pre>
<ul>
<li>Description of the issue (ideally so that others can reproduce
    it):<br />
    We trie to use uefi on linux. When i try to boot from rear iso on
    system i get the error on console:</li>
</ul>
<!-- -->

<pre><code>Loading Kernel ....
Loading initial ramdisk ....
error: ../../grub-core/loader/i1386/efi/linux.c:119:can't allocate initrd.
Press any key to continue
...
...
Kernel panic
</code></pre>
<ul>
<li>
<p>Workaround, if any:</p>
</li>
<li>
<p>Attachments, as applicable ("rear -D mkrescue/mkbackup/recover"
    debug log files):</p>
</li>
</ul>
<p>To paste verbatim text like command output or file content,<br />
include it between a leading and a closing line of three backticks like</p>
<pre><code>```
verbatim content
```
</code></pre>
<p>Best Reagrds<br />
Rolf Weilenmann</p>
<h4 id="rolfweilen_commented_at_2021-09-27_1232"><img src="https://avatars.githubusercontent.com/u/20532944?v=4" width="50"><a href="https://github.com/RolfWeilen">RolfWeilen</a> commented at <a href="https://github.com/rear/rear/issues/2681#issuecomment-927828539">2021-09-27 12:32</a>:<a class="headerlink" href="#rolfweilen_commented_at_2021-09-27_1232" title="Permanent link">&para;</a></h4>
<p><img alt="errot" src="https://user-images.githubusercontent.com/20532944/134908612-11897490-051e-4bca-8fab-293ba640e996.png" /><br />
<img alt="error2" src="https://user-images.githubusercontent.com/20532944/134908618-093bba9e-2d81-4553-93a8-24f948c652d0.png" /></p>
<h4 id="rolfweilen_commented_at_2021-09-27_1240"><img src="https://avatars.githubusercontent.com/u/20532944?v=4" width="50"><a href="https://github.com/RolfWeilen">RolfWeilen</a> commented at <a href="https://github.com/rear/rear/issues/2681#issuecomment-927833465">2021-09-27 12:40</a>:<a class="headerlink" href="#rolfweilen_commented_at_2021-09-27_1240" title="Permanent link">&para;</a></h4>
<p>Booting to rear menue work<br />
Choosen the UEFI XCC virtual Media</p>
<p><img alt="Screenshot 2021-09-27
143647" src="https://user-images.githubusercontent.com/20532944/134909527-25f2db26-7342-4261-92e2-b1b50d8cc966.png" /><br />
<img alt="Screenshot 2021-09-27
143728" src="https://user-images.githubusercontent.com/20532944/134909532-513d0f06-e5b8-4709-9995-c51ef662f114.png" /></p>
<h4 id="gdha_commented_at_2021-09-27_1347"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/2681#issuecomment-927892101">2021-09-27 13:47</a>:<a class="headerlink" href="#gdha_commented_at_2021-09-27_1347" title="Permanent link">&para;</a></h4>
<p>@RolfWeilen Please have a look at comment
<a href="https://github.com/rear/rear/issues/1193#issuecomment-451450705">https://github.com/rear/rear/issues/1193#issuecomment-451450705</a>
it may help you.<br />
Did you inspec the rear.log file for specific errors? Missing libraries?
Looks like the inital ramdisk was not fully created as it should. You
could attach the rear.log file as reference.</p>
<p>Did you try to boot ReaR in Secure Boot to see if it changes the boot
behavior?</p>
<h4 id="rolfweilen_commented_at_2021-09-27_1518"><img src="https://avatars.githubusercontent.com/u/20532944?v=4" width="50"><a href="https://github.com/RolfWeilen">RolfWeilen</a> commented at <a href="https://github.com/rear/rear/issues/2681#issuecomment-927976994">2021-09-27 15:18</a>:<a class="headerlink" href="#rolfweilen_commented_at_2021-09-27_1518" title="Permanent link">&para;</a></h4>
<p>Hi<br />
The package is installed:
<code>grub2-efi-x64-modules.noarch     1:2.02-99.el8</code></p>
<p>secure boot shows the same problem.<br />
On ISO File the grub.cfg shows different entries for secure boot and
normal boot:</p>
<pre><code>menuentry "Relax-and-Recover (no Secure Boot)"  --class gnu-linux --class gnu --class os {
     echo 'Loading kernel ...'
     linux /isolinux/kernel root=UUID=b822c52d-63b1-492a-b31c-9ed40a9940d5 selinux=0 console=ttyS0,9600 console=ttyS1,115200 console=tty0
     echo 'Loading initial ramdisk ...'
     initrd /isolinux/initrd.cgz
}

menuentry "Relax-and-Recover (Secure Boot)"  --class gnu-linux --class gnu --class os {
     echo 'Loading kernel ...'
     linuxefi /isolinux/kernel root=UUID=b822c52d-63b1-492a-b31c-9ed40a9940d5 selinux=0 console=ttyS0,9600 console=ttyS1,115200 console=tty0
     echo 'Loading initial ramdisk ...'
     initrdefi /isolinux/initrd.cgz
}
</code></pre>
<p>I have attached the log.<br />
Thanks a lot for your help.</p>
<p>Best regards<br />
Rolf<br />
<a href="https://github.com/rear/rear/files/7237348/rear-s53r010.log">rear-s53r010.log</a></p>
<h4 id="gdha_commented_at_2021-09-27_1607"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/2681#issuecomment-928027799">2021-09-27 16:07</a>:<a class="headerlink" href="#gdha_commented_at_2021-09-27_1607" title="Permanent link">&para;</a></h4>
<p>@jsmeix Might it be that PR
<a href="https://github.com/rear/rear/commit/b81693f27a41482ed89da36a9af664fe808f8186">https://github.com/rear/rear/commit/b81693f27a41482ed89da36a9af664fe808f8186</a>
does not have the same effect on RHEL8 then it has on SLES12 SP1?
Referring to the <code>root_uuid=b822c52d-63b1-492a-b31c-9ed40a9940d5</code> saving
via the function create_grub2_rear_boot_entry? Why does linux or
linuxefi entries point to the internal root disk?</p>
<h4 id="pcahyna_commented_at_2021-09-27_1636"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2681#issuecomment-928055637">2021-09-27 16:36</a>:<a class="headerlink" href="#pcahyna_commented_at_2021-09-27_1636" title="Permanent link">&para;</a></h4>
<p>@RolfWeilen the error message</p>
<pre><code>error: ../../grub-core/loader/i1386/efi/linux.c:119:can't allocate initrd.
</code></pre>
<p>seems to mean that grub is out of memory.<br />
How large is the initrd file on the ISO?</p>
<h4 id="rolfweilen_commented_at_2021-09-27_1641"><img src="https://avatars.githubusercontent.com/u/20532944?v=4" width="50"><a href="https://github.com/RolfWeilen">RolfWeilen</a> commented at <a href="https://github.com/rear/rear/issues/2681#issuecomment-928059481">2021-09-27 16:41</a>:<a class="headerlink" href="#rolfweilen_commented_at_2021-09-27_1641" title="Permanent link">&para;</a></h4>
<p>Hi<br />
The initrd is about 611MB. The hole iso is 729.606MB.</p>
<h4 id="rolfweilen_commented_at_2021-09-27_1642"><img src="https://avatars.githubusercontent.com/u/20532944?v=4" width="50"><a href="https://github.com/RolfWeilen">RolfWeilen</a> commented at <a href="https://github.com/rear/rear/issues/2681#issuecomment-928060227">2021-09-27 16:42</a>:<a class="headerlink" href="#rolfweilen_commented_at_2021-09-27_1642" title="Permanent link">&para;</a></h4>
<pre><code># ls -l /var/lib/rear/output/rear-s53r010.iso
-rw-------. 1 root root 747130880 Sep 27 14:03 /var/lib/rear/output/rear-s53r010.iso
</code></pre>
<h4 id="pcahyna_commented_at_2021-09-27_1654"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2681#issuecomment-928068221">2021-09-27 16:54</a>:<a class="headerlink" href="#pcahyna_commented_at_2021-09-27_1654" title="Permanent link">&para;</a></h4>
<p>@RolfWeilen are you able to recreate another ISO and test it? I suggest
to omit <code>BACKUP=TSM</code> and produce an image using <code>rear mkrescue</code>
(hopefully it will be smaller) and boot it. Of course, it will not
contain the TSM utilities, so it will not be that useful for backup
restoration, but at least it will help to isolate the problem.</p>
<h4 id="jsmeix_commented_at_2021-09-28_0740"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2681#issuecomment-928937450">2021-09-28 07:40</a>:<a class="headerlink" href="#jsmeix_commented_at_2021-09-28_0740" title="Permanent link">&para;</a></h4>
<p>By googling for "grub can't allocate initrd" I found in particular:</p>
<p><a href="https://bugzilla.redhat.com/show_bug.cgi?id=1572126">https://bugzilla.redhat.com/show_bug.cgi?id=1572126</a><br />
which is an old issue where the initial comment reads (excerpts)</p>
<pre><code>We use a rather large initrd, around 300-500MB
...
On a Dell XPS 15 9550 grub will state when loading initrd:
  error: can't allocate initrd.
This is the first system we see this issue on, whilst we run this
on a lot of different hardware configurations. One of the most notable
differences is that this system actually has much more memory than usual.
</code></pre>
<p>And that one is a more current issue<br />
<a href="https://answers.launchpad.net/ubuntu/+question/695353">https://answers.launchpad.net/ubuntu/+question/695353</a><br />
and its last comment tells (excerpt)</p>
<pre><code>The image wasn't being loaded because the size was too big.
After reducing the size the new kernel is work.
</code></pre>
<p>In general regaring the size of the ReaR recovery system<br />
and how it could be reduced see also<br />
<a href="https://github.com/rear/rear/discussions/2640#discussioncomment-908335">https://github.com/rear/rear/discussions/2640#discussioncomment-908335</a></p>
<h4 id="rolfweilen_commented_at_2021-09-28_0754"><img src="https://avatars.githubusercontent.com/u/20532944?v=4" width="50"><a href="https://github.com/RolfWeilen">RolfWeilen</a> commented at <a href="https://github.com/rear/rear/issues/2681#issuecomment-928946689">2021-09-28 07:54</a>:<a class="headerlink" href="#rolfweilen_commented_at_2021-09-28_0754" title="Permanent link">&para;</a></h4>
<p>Hi<br />
I will try to reduce the image and give feedback as soon as possible.<br />
Rolf</p>
<h4 id="rolfweilen_commented_at_2021-09-28_1357"><img src="https://avatars.githubusercontent.com/u/20532944?v=4" width="50"><a href="https://github.com/RolfWeilen">RolfWeilen</a> commented at <a href="https://github.com/rear/rear/issues/2681#issuecomment-929246756">2021-09-28 13:57</a>:<a class="headerlink" href="#rolfweilen_commented_at_2021-09-28_1357" title="Permanent link">&para;</a></h4>
<p>Hi<br />
I tried the hint to exclude the firmware<br />
FIRMWARE_FILES=( 'no' ):<br />
The iso is now about 680MB big.<br />
The initrd.cgz about 350MB.<br />
The system is now booting with this iso.<br />
Should i generally exclude firmware for rear recover or is there any
need to include the firmware?</p>
<p>Best regards<br />
Rolf</p>
<h4 id="gdha_commented_at_2021-09-28_1417"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/2681#issuecomment-929274655">2021-09-28 14:17</a>:<a class="headerlink" href="#gdha_commented_at_2021-09-28_1417" title="Permanent link">&para;</a></h4>
<p>@RolfWeilen If the ISO image created is meant to recover this system
only then there is not need to load all firmware (kernel) modules. If
there is a need to clone on slightly different hardware than it is a
good idea to include all firmware (kernel) modules.</p>
<h4 id="rolfweilen_commented_at_2021-09-29_1317"><img src="https://avatars.githubusercontent.com/u/20532944?v=4" width="50"><a href="https://github.com/RolfWeilen">RolfWeilen</a> commented at <a href="https://github.com/rear/rear/issues/2681#issuecomment-930166300">2021-09-29 13:17</a>:<a class="headerlink" href="#rolfweilen_commented_at_2021-09-29_1317" title="Permanent link">&para;</a></h4>
<p>Hi<br />
I guess not booting from an to big initrd is not a rear problem.<br />
Should we address this to redhat support or is it simple not possible
booting from initrd with an size of 611MB.<br />
I can try it on different hw.<br />
regards<br />
Rolf</p>
<h4 id="pcahyna_commented_at_2021-09-29_1345"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2681#issuecomment-930190632">2021-09-29 13:45</a>:<a class="headerlink" href="#pcahyna_commented_at_2021-09-29_1345" title="Permanent link">&para;</a></h4>
<p>@jsmeix thanks for locating the related bug reports. "It appears to me
that there have been quite some changes to the memory allocation stuff
already which seem to have resolved the issue.</p>
<p>It works with current git version. " indicates that maybe grub2 in RHEL
7 is too old and RHEL 8 could work (not sure if the fix is in RHEL 8,
but it could be).</p>
<h4 id="pcahyna_commented_at_2021-09-29_1415"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2681#issuecomment-930219433">2021-09-29 14:15</a>:<a class="headerlink" href="#pcahyna_commented_at_2021-09-29_1415" title="Permanent link">&para;</a></h4>
<blockquote>
<p>grub2 in RHEL 7 is too old and RHEL 8 could work (not sure if the fix
is in RHEL 8, but it could be)</p>
</blockquote>
<p>Sorry, I see now this is RHEL 8, I got confused by
<code>rear-2.6.5-1.el7.x86_64</code>.</p>
<p>Is it 32-bit UEFI by chance? Do you have a <code>grub2-efi-ia32</code> package?</p>
<h4 id="pcahyna_commented_at_2021-09-29_1438"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2681#issuecomment-930240347">2021-09-29 14:38</a>:<a class="headerlink" href="#pcahyna_commented_at_2021-09-29_1438" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Should we address this to redhat support</p>
</blockquote>
<p>Yes, please address it to support, and also try on a different hardware.</p>
<h4 id="jsmeix_commented_at_2021-09-30_0656"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2681#issuecomment-930879162">2021-09-30 06:56</a>:<a class="headerlink" href="#jsmeix_commented_at_2021-09-30_0656" title="Permanent link">&para;</a></h4>
<p>@RolfWeilen<br />
regarding your question</p>
<pre><code>Should i generally exclude firmware for rear recover
or is there any need to include the firmware?
</code></pre>
<p>in your
<a href="https://github.com/rear/rear/issues/2681#issuecomment-929246756">https://github.com/rear/rear/issues/2681#issuecomment-929246756</a>
above:</p>
<p>You may need certain firmware to recover on exactly same hardware<br />
when that hardware needs firmware.<br />
E.g. some network interface cards need firmware so without their
firmware<br />
inside the ReaR recovery system those network interface cards won't
work<br />
within the ReaR recovery system so possibly no network for "rear
recover".</p>
<p>According to<br />
<a href="https://serverfault.com/questions/1026598/know-which-firmware-my-linux-kernel-has-loaded-since-booting">https://serverfault.com/questions/1026598/know-which-firmware-my-linux-kernel-has-loaded-since-booting</a></p>
<pre><code>Background information:
You cannot query for "currently loaded" firmware, because
firmware doesn't necessarily remain in system memory.
It is often uploaded to some chip in some device outside the system.
Drivers usually load a firmware file into a kernel buffer,
use that buffer to program the device, then discard the buffer
without keeping any record of what the file was.
And the standard kernel firmware API does not keep a log by default.
Some drivers do log their firmware loading to the kernel log,
but it's not universal.
</code></pre>
<p>you need some "hacks" to find out what exact firmware files<br />
are needed by your exact hardware (if any), see the details in<br />
<a href="https://serverfault.com/questions/1026598/know-which-firmware-my-linux-kernel-has-loaded-since-booting">https://serverfault.com/questions/1026598/know-which-firmware-my-linux-kernel-has-loaded-since-booting</a></p>
<h4 id="github-actions_commented_at_2021-11-30_0201"><img src="https://avatars.githubusercontent.com/in/15368?v=4" width="50"><a href="https://github.com/apps/github-actions">github-actions</a> commented at <a href="https://github.com/rear/rear/issues/2681#issuecomment-982208698">2021-11-30 02:01</a>:<a class="headerlink" href="#github-actions_commented_at_2021-11-30_0201" title="Permanent link">&para;</a></h4>
<p>Stale issue message</p>
<h4 id="rolfweilen_commented_at_2021-12-01_1003"><img src="https://avatars.githubusercontent.com/u/20532944?v=4" width="50"><a href="https://github.com/RolfWeilen">RolfWeilen</a> commented at <a href="https://github.com/rear/rear/issues/2681#issuecomment-983479638">2021-12-01 10:03</a>:<a class="headerlink" href="#rolfweilen_commented_at_2021-12-01_1003" title="Permanent link">&para;</a></h4>
<p>We can close the case. I will test it again with RHL 8.5 and will then
open the case by redhat.</p>
<h4 id="pcahyna_commented_at_2023-05-16_1704"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2681#issuecomment-1550050699">2023-05-16 17:04</a>:<a class="headerlink" href="#pcahyna_commented_at_2023-05-16_1704" title="Permanent link">&para;</a></h4>
<p>Hi @RolfWeilen, I saw a similar issue, for me it is fixed in
grub2-2.02-121.el8 - try this build of GRUB2.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2023 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2021-09-27.2681.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
