<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#742 Issue closed: Test suite for rear - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#742 Issue closed: Test suite for rear";
        var mkdocs_page_input_path = "issues/2015-12-16.742.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
      <li class="breadcrumb-item active">#742 Issue closed: Test suite for rear</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="742_issue_closed_test_suite_for_rear"><a href="https://github.com/rear/rear/issues/742">#742 Issue</a> <code>closed</code>: Test suite for rear<a class="headerlink" href="#742_issue_closed_test_suite_for_rear" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>needs sponsorship</code></p>
<h4 id="phracek_opened_issue_at_2015-12-16_1135"><img src="https://avatars.githubusercontent.com/u/3416672?u=8867c1fd5f4ffa568d781775ab6110624b2dccd4&v=4" width="50"><a href="https://github.com/phracek">phracek</a> opened issue at <a href="https://github.com/rear/rear/issues/742">2015-12-16 11:35</a>:<a class="headerlink" href="#phracek_opened_issue_at_2015-12-16_1135" title="Permanent link">&para;</a></h4>
<p>Would it possible to create a test suite for rear?<br />
Or even rear already include it, but I did not find them.</p>
<h4 id="schlomo_commented_at_2015-12-16_1154"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/742#issuecomment-165082860">2015-12-16 11:54</a>:<a class="headerlink" href="#schlomo_commented_at_2015-12-16_1154" title="Permanent link">&para;</a></h4>
<p>YES, we all want this.</p>
<p>So far we have <code>make validate</code> and @aussendorf built something for their
Bareos product.</p>
<h4 id="phracek_commented_at_2015-12-18_0818"><img src="https://avatars.githubusercontent.com/u/3416672?u=8867c1fd5f4ffa568d781775ab6110624b2dccd4&v=4" width="50"><a href="https://github.com/phracek">phracek</a> commented at <a href="https://github.com/rear/rear/issues/742#issuecomment-165711618">2015-12-18 08:18</a>:<a class="headerlink" href="#phracek_commented_at_2015-12-18_0818" title="Permanent link">&para;</a></h4>
<p>@aussendorf I am trying to thing how to test ReaR. Any suggestions or
examples?</p>
<p>I guess that it would be awesome to have it and test at least basic
functionality.</p>
<h4 id="jhoekx_commented_at_2015-12-18_0853"><img src="https://avatars.githubusercontent.com/u/783473?v=4" width="50"><a href="https://github.com/jhoekx">jhoekx</a> commented at <a href="https://github.com/rear/rear/issues/742#issuecomment-165716772">2015-12-18 08:53</a>:<a class="headerlink" href="#jhoekx_commented_at_2015-12-18_0853" title="Permanent link">&para;</a></h4>
<p>@dagwieers and I have had a plan for this for a few years already, but
we never got around to actually doing it. Dag already has a server for
it.</p>
<p>I'm running a DR test every week automatically as an Ansible playbook.
Building on that, our plan was to:</p>
<ul>
<li>create a master ReaR image that has all the necessary tooling</li>
<li>boot it</li>
<li>upload and run a script that creates the test layout</li>
<li>select a distribution tar and extract it over the layout</li>
<li>boot the newly created system</li>
<li>install the ReaR version under test</li>
<li>make a ReaR image</li>
<li>recover the system</li>
</ul>
<p>Thoughts?</p>
<p>Furthermore I was also thinking about a rear test workflow to run unit
tests, but given that tools on different distributions have a different
output, you would end up in mocking hell. I think there is more value in
end-to-end tests.</p>
<h4 id="aussendorf_commented_at_2015-12-18_1057"><img src="https://avatars.githubusercontent.com/u/3491238?v=4" width="50"><a href="https://github.com/aussendorf">aussendorf</a> commented at <a href="https://github.com/rear/rear/issues/742#issuecomment-165748360">2015-12-18 10:57</a>:<a class="headerlink" href="#aussendorf_commented_at_2015-12-18_1057" title="Permanent link">&para;</a></h4>
<p>Hello,<br />
I've integrated a ReaR test into our overall Bareos CI tests. We have VM
(xen) templates for every distribution we support. Whenever we build new
Bareos packages, we automatically clone those VMs, and install,
configure, run backup/restore, install debug-packages, create
traceback-files, de-install, and some other stuff.</p>
<p>For ReaR I've included a fully automated test in our framework that:</p>
<ul>
<li>creates a rear image (iso)</li>
<li>takes that iso as boot-image for vm (via xen api)</li>
<li>boots ReaR system (to do this I needed the patch, to configure the
    default option in isolinux.cfg)</li>
<li>connect by ssh and run "rear recover"</li>
<li>remove iso</li>
<li>reboot</li>
<li>do some sanity checks.</li>
</ul>
<p>Everything controlled using jenkins.</p>
<p>The scripts are integrated into a broader scripting system so it does
not make much sense to post them partially.</p>
<h4 id="dagwieers_commented_at_2015-12-23_2142"><img src="https://avatars.githubusercontent.com/u/388198?u=0732dee3fe5002278cfbf40359ec431bdcf5f06c&v=4" width="50"><a href="https://github.com/dagwieers">dagwieers</a> commented at <a href="https://github.com/rear/rear/issues/742#issuecomment-166996793">2015-12-23 21:42</a>:<a class="headerlink" href="#dagwieers_commented_at_2015-12-23_2142" title="Permanent link">&para;</a></h4>
<p>Ok, @jhoekx and me sat together today to look into automated testing and
we did 2 things today.</p>
<ul>
<li>We integrated the 'make validate' step as part of a TravisCI hook,
    so that commits automatically get syntax checked by Bash.</li>
<li>We started a separate project, named 'rear-test' (lacking a better
    name) with the goal to have automated backup and restore tests using
    different methods.</li>
</ul>
<p>This last part is unfinished yet, it currently only includes a single
Ansible playbook to create a CentOS 7 image. The ultimate goal is to
include Ansible playbooks that use prior generated images to set up
infrastructure (if needed) and perform the backup and restore tests on
pre-made configuration files.</p>
<p>We intend to have OS-independent playbooks for testing, so that they can
be used for different Linux distributions. Since each backup and restore
method test only needs a specific Rear configuration, it should be
straightforward to reuse this for different OS images. So we do intend
to have SLES, Ubuntu, Arch and whatever interests users to contribute.
However our aim now is to ensure we have the proper framework set up
first.</p>
<p>Once we have these tests implemented, I expect some opportunities to
improve Rear for automated testing so it becomes easier to find specific
error-conditions (that may or may not be fatal to Rear). Because it is
essential that we can find issues in an automated way.</p>
<h4 id="schlomo_commented_at_2015-12-24_0826"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/742#issuecomment-167067429">2015-12-24 08:26</a>:<a class="headerlink" href="#schlomo_commented_at_2015-12-24_0826" title="Permanent link">&para;</a></h4>
<p>@dagwieers &amp; @jhoekx thank you so much! This is really great news.</p>
<p>I have only one suggestion: Maybe we should rename the repo to
<code>rear-integration-tests</code> or something else that is a bit more
self-explanatory? I am only worried that people would think at their
first glance that this is just some test and not for real. Or that it
contains the bleeding edge test stuff...</p>
<h4 id="jhoekx_commented_at_2015-12-24_0852"><img src="https://avatars.githubusercontent.com/u/783473?v=4" width="50"><a href="https://github.com/jhoekx">jhoekx</a> commented at <a href="https://github.com/rear/rear/issues/742#issuecomment-167070713">2015-12-24 08:52</a>:<a class="headerlink" href="#jhoekx_commented_at_2015-12-24_0852" title="Permanent link">&para;</a></h4>
<p>Ok, renamed to <code>rear-integration-tests</code>.</p>
<h4 id="gdha_commented_at_2016-02-18_1721"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/742#issuecomment-185823541">2016-02-18 17:21</a>:<a class="headerlink" href="#gdha_commented_at_2016-02-18_1721" title="Permanent link">&para;</a></h4>
<p>Issue #38 was the original request (we can close that one) and we
better use this issue for further discussions etc.</p>
<h4 id="gdha_commented_at_2016-08-23_1038"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/742#issuecomment-241692730">2016-08-23 10:38</a>:<a class="headerlink" href="#gdha_commented_at_2016-08-23_1038" title="Permanent link">&para;</a></h4>
<p>@rear/owners set the milestone to <strong>Rear future</strong> as that describes it
much better - it is something that might be available in the future
(perhaps sponsored?)</p>
<h4 id="gdha_commented_at_2017-07-19_1605"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/742#issuecomment-316435698">2017-07-19 16:05</a>:<a class="headerlink" href="#gdha_commented_at_2017-07-19_1605" title="Permanent link">&para;</a></h4>
<p>We have
<a href="https://github.com/gdha/rear-automated-testing">https://github.com/gdha/rear-automated-testing</a>
in place to test daily ReaR builds (we do this on request for customers
- yes those who pay for it)</p>
<h4 id="gdha_commented_at_2018-01-12_0802"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/742#issuecomment-357169104">2018-01-12 08:02</a>:<a class="headerlink" href="#gdha_commented_at_2018-01-12_0802" title="Permanent link">&para;</a></h4>
<p>The "Relax-and-Recover Automated Test" project already proofed it works
sufficient to test new versions of ReaR. More enhancements are needed,
but as mentioned before we will only implement new features when these
are sponsored. With this I think we can close this topic.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2023 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2015-12-16.742.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
