<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#985 Issue closed: TSM parameters containing a dot - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#985 Issue closed: TSM parameters containing a dot";
        var mkdocs_page_input_path = "issues/2016-08-25.985.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#985 Issue closed: TSM parameters containing a dot</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="985_issue_closed_tsm_parameters_containing_a_dot"><a href="https://github.com/rear/rear/issues/985">#985 Issue</a> <code>closed</code>: TSM parameters containing a dot<a class="headerlink" href="#985_issue_closed_tsm_parameters_containing_a_dot" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>fixed / solved / done</code>, <code>minor bug</code></p>
<h4 id="stermeau_opened_issue_at_2016-08-25_1352"><img src="https://avatars.githubusercontent.com/u/11390759?v=4" width="50"><a href="https://github.com/stermeau">stermeau</a> opened issue at <a href="https://github.com/rear/rear/issues/985">2016-08-25 13:52</a>:<a class="headerlink" href="#stermeau_opened_issue_at_2016-08-25_1352" title="Permanent link">&para;</a></h4>
<ul>
<li>rear version (/usr/sbin/rear -V): Relax-and-Recover 1.17.2</li>
<li>OS version (cat /etc/rear/os.conf or lsb_release -a): RHEL 6</li>
<li>rear configuration files (cat /etc/rear/site.conf or cat
    /etc/rear/local.conf):<br />
    PROGS=( "${PROGS[@]}" screen )<br />
    GRUB_RESCUE=n<br />
    USE_STATIC_NETWORKING=y<br />
    BACKUP=TSM<br />
    OUTPUT=ISO<br />
    TIMESYNC=NTP<br />
    AUTOEXCLUDE_MULTIPATH=y<br />
    COPY_AS_IS=( "${COPY_AS_IS[@]}" )<br />
    COPY_AS_IS_TSM=( "${COPY_AS_IS_TSM[@]}" /.tsm /.tsm_ora)<br />
    POST_RECOVERY_SCRIPT='cp /etc/adsm/TSM.PWD /mnt/local/etc/adsm'<br />
    SSH_ROOT_PASSWORD="XXXXX"<br />
    ISO_PREFIX="rear-XXXX"</li>
<li>Brief description of the issue<br />
    If dsm.sys includes an option that has a dot in its name, 'rear
    recover' fails with<br />
    /usr/share/rear/verify/TSM/default/40_verify_tsm.sh: line 12:
    export: `TSM_SYS_INCLUDE.ENCRYPT=/.../*': not a valid identifier</li>
<li>Work-around, if any<br />
    Replace 'tr a-z A-Z' by 'tr a-z. A-Z_' in 40_verify_tsm.sh<br />
    See<br />
<a href="https://github.com/stermeau/rear/commit/f14bdce3f3529c27497338afd70926e46db59f68">https://github.com/stermeau/rear/commit/f14bdce3f3529c27497338afd70926e46db59f68</a></li>
</ul>
<h4 id="gdha_commented_at_2016-08-25_1409"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/985#issuecomment-242400116">2016-08-25 14:09</a>:<a class="headerlink" href="#gdha_commented_at_2016-08-25_1409" title="Permanent link">&para;</a></h4>
<p>@stermeau How do we know it won't break other users rear/TSM setups?</p>
<h4 id="stermeau_commented_at_2016-08-26_0727"><img src="https://avatars.githubusercontent.com/u/11390759?v=4" width="50"><a href="https://github.com/stermeau">stermeau</a> commented at <a href="https://github.com/rear/rear/issues/985#issuecomment-242650697">2016-08-26 07:27</a>:<a class="headerlink" href="#stermeau_commented_at_2016-08-26_0727" title="Permanent link">&para;</a></h4>
<p>@gdha This script loads all the TSM options in variables called
TSM_SYS_XXX but only TSM_SYS_TCPSERVERADDRESS is ever used.<br />
`<br />
$ grep -r TSM_SYS /usr/share/rear/</p>
<p>/usr/share/rear/verify/TSM/default/40_verify_tsm.sh:while read KEY
VALUE ; do echo "$KEY" | grep -q '*' &amp;&amp; continue ; test -z "$KEY" &amp;&amp;
continue ; KEY="$(echo "$KEY" | tr a-z A-Z)" ; export
TSM_SYS_$KEY="${VALUE//"}" ; done
&lt;/opt/tivoli/tsm/client/ba/bin/dsm.sys</p>
<p>/usr/share/rear/verify/TSM/default/40_verify_tsm.sh:[
"${TSM_SYS_TCPSERVERADDRESS}" ]</p>
<p>/usr/share/rear/verify/TSM/default/40_verify_tsm.sh: ping -c 1
"${TSM_SYS_TCPSERVERADDRESS}" &gt;&amp;8 2&gt;&amp;1</p>
<p>/usr/share/rear/verify/TSM/default/40_verify_tsm.sh: StopIfError
"Sorry, but cannot reach TSM Server ${TSM_SYS_TCPSERVERADDRESS}"</p>
<p>/usr/share/rear/verify/TSM/default/40_verify_tsm.sh: Log "TSM Server
${TSM_SYS_TCPSERVERADDRESS} seems to be up and running."<br />
`</p>
<p>TSM has several options with a dot in their name like INCLUDE.FS or
INCLUDE.ENCRYPT. The patch itself just replaces dots by underscores in
the key name. If someone is using an option like this rear will fail
during a restore</p>
<h4 id="gdha_commented_at_2016-08-26_0729"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/985#issuecomment-242651400">2016-08-26 07:29</a>:<a class="headerlink" href="#gdha_commented_at_2016-08-26_0729" title="Permanent link">&para;</a></h4>
<p>@stermeau OK you can request a pull request</p>
<h4 id="stermeau_commented_at_2016-08-26_0737"><img src="https://avatars.githubusercontent.com/u/11390759?v=4" width="50"><a href="https://github.com/stermeau">stermeau</a> commented at <a href="https://github.com/rear/rear/issues/985#issuecomment-242653127">2016-08-26 07:37</a>:<a class="headerlink" href="#stermeau_commented_at_2016-08-26_0737" title="Permanent link">&para;</a></h4>
<p>@gdha Thanks. I have opened the pull request #986</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2024 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2016-08-25.985.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
