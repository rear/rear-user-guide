<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>2021 12 28.2736.pr.merged - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "2021 12 28.2736.pr.merged";
        var mkdocs_page_input_path = "issues/2021-12-28.2736.pr.merged.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/rust.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', '366986045', 'auto');
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
      <li>2021 12 28.2736.pr.merged</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="2736_pr_merged_new_exclude_ip_addresses_and_exclude_network_interfaces_directives"><a href="https://github.com/rear/rear/pull/2736">#2736 PR</a> <code>merged</code>: New EXCLUDE_IP_ADDRESSES and EXCLUDE_NETWORK_INTERFACES directives<a class="headerlink" href="#2736_pr_merged_new_exclude_ip_addresses_and_exclude_network_interfaces_directives" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>fixed / solved / done</code></p>
<h4 id="rmetrich_opened_issue_at_2021-12-28_1709"><img src="https://avatars.githubusercontent.com/u/1163635?u=36b5e32e1dd55f1ce77cad431a5683fce40a7934&v=4" width="50"><a href="https://github.com/rmetrich">rmetrich</a> opened issue at <a href="https://github.com/rear/rear/pull/2736">2021-12-28 17:09</a>:<a class="headerlink" href="#rmetrich_opened_issue_at_2021-12-28_1709" title="Permanent link">&para;</a></h4>
<h4 id="relax-and-recover_rear_pull_request_template">Relax-and-Recover (ReaR) Pull Request Template<a class="headerlink" href="#relax-and-recover_rear_pull_request_template" title="Permanent link">&para;</a></h4>
<p>Please fill in the following items before submitting a new pull request:</p>
<h5 id="pull_request_details">Pull Request Details:<a class="headerlink" href="#pull_request_details" title="Permanent link">&para;</a></h5>
<ul>
<li>
<p>Type: <strong>Enhancement</strong></p>
</li>
<li>
<p>Impact: <strong>Normal</strong></p>
</li>
<li>
<p>Reference to related issue (URL): N/A</p>
</li>
<li>
<p>How was this pull request tested? Manually</p>
</li>
<li>
<p>Brief description of the changes in this pull request:</p>
</li>
</ul>
<p>These new array variables enable to ignore specific IP addresses or
network interfaces when building the network configuration used in the
rescue environment.<br />
This is typically useful when floating IP addresses are used. Not
ignoring these may lead to outage if the floating IP address is used by
another system at time the system is getting recovered.</p>
<h4 id="pcahyna_commented_at_2022-02-14_1657"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/pull/2736#issuecomment-1039321565">2022-02-14 16:57</a>:<a class="headerlink" href="#pcahyna_commented_at_2022-02-14_1657" title="Permanent link">&para;</a></h4>
<p>Looks good, thanks - @rear/contributors , do you have an opinion on the
variable naming? I checked the current variables and there is nothing
called <code>IGNORED_*</code> but there are many <code>EXCLUDE_*</code> variables. As the
present variables are for a bit different purpose than the <code>EXCLUDE_*</code>
ones (those are for excluding stuff from backup, layout, or both, ditto
<code>*INCLUDE_*</code>), I think the different name is acceptable. Shouldn't one
use an imperative (<code>IGNORE</code>) instead of a participle (<code>IGNORED</code>) for
consistency, though?</p>
<h4 id="jsmeix_commented_at_2022-02-15_1358"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/2736#issuecomment-1040306726">2022-02-15 13:58</a>:<a class="headerlink" href="#jsmeix_commented_at_2022-02-15_1358" title="Permanent link">&para;</a></h4>
<p>We also use <code>EXCLUDE</code> named variables (in imperative grammar form)<br />
to exclude things from the recovery system e.g. <code>COPY_AS_IS_EXCLUDE</code>.</p>
<p>We use nowhere <code>IGNORE</code> named config variables<br />
except <code>EXTERNAL_IGNORE_ERRORS</code> which has a different meaning<br />
than what IGNORED_IP_ADDRESSES and IGNORED_NETWORK_INTERFACES<br />
are meant to do as far as I understand their description in
default.conf<br />
which actually means something like<br />
"ignore them during recovery system build so they get excluded from the
recovery system".</p>
<p>So I think renaming them into<br />
<code>EXCLUDE_IP_ADDRESSES</code> and <code>EXCLUDE_NETWORK_INTERFACES</code><br />
explains better to the user what their actual meaning is.</p>
<h4 id="rmetrich_commented_at_2022-02-16_0918"><img src="https://avatars.githubusercontent.com/u/1163635?u=36b5e32e1dd55f1ce77cad431a5683fce40a7934&v=4" width="50"><a href="https://github.com/rmetrich">rmetrich</a> commented at <a href="https://github.com/rear/rear/pull/2736#issuecomment-1041277770">2022-02-16 09:18</a>:<a class="headerlink" href="#rmetrich_commented_at_2022-02-16_0918" title="Permanent link">&para;</a></h4>
<blockquote>
<p>So I think renaming them into<br />
<code>EXCLUDE_IP_ADDRESSES</code> and <code>EXCLUDE_NETWORK_INTERFACES</code><br />
explains better to the user what their actual meaning is.</p>
</blockquote>
<p>👍</p>
<h4 id="rmetrich_commented_at_2022-02-16_1001"><img src="https://avatars.githubusercontent.com/u/1163635?u=36b5e32e1dd55f1ce77cad431a5683fce40a7934&v=4" width="50"><a href="https://github.com/rmetrich">rmetrich</a> commented at <a href="https://github.com/rear/rear/pull/2736#issuecomment-1041315314">2022-02-16 10:01</a>:<a class="headerlink" href="#rmetrich_commented_at_2022-02-16_1001" title="Permanent link">&para;</a></h4>
<p>Thanks for the comments, I will squash all this before merging once you
are ok with this.</p>
<h4 id="jsmeix_commented_at_2022-02-16_1015"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/2736#issuecomment-1041328139">2022-02-16 10:15</a>:<a class="headerlink" href="#jsmeix_commented_at_2022-02-16_1015" title="Permanent link">&para;</a></h4>
<p>@rmetrich<br />
thank you for your prompt code cleanup and enhancements.<br />
I reassign it to you so that you can merge it when you are ready for
merging it.</p>
<h4 id="pcahyna_commented_at_2022-02-16_1035"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/pull/2736#issuecomment-1041344745">2022-02-16 10:35</a>:<a class="headerlink" href="#pcahyna_commented_at_2022-02-16_1035" title="Permanent link">&para;</a></h4>
<p>Just a thought: <code>EXCLUDE_IP_ADDRESSES</code> and <code>EXCLUDE_NETWORK_INTERFACES</code>
are intended for the rescue image only. Do you think that there will
ever be a need to exclude the addresses from the recovered system (i.e.
permanently)? I would prefer to not have such transformations of the
resulting system in ReaR, but there are some already (the various
mapping rules and migration capabilities).</p>
<h4 id="pcahyna_commented_at_2022-02-16_1038"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/pull/2736#issuecomment-1041347136">2022-02-16 10:38</a>:<a class="headerlink" href="#pcahyna_commented_at_2022-02-16_1038" title="Permanent link">&para;</a></h4>
<p>@rmetrich thank you for quickly addressing the review comments. I think
squashing the commits is appropriate. I keep separate commits when there
is a logical need to do so (like, when in the same PR I do a cleanup of
the old code, then I do functional changes, I keep the two separate),
but it is not the case here.</p>
<h4 id="jsmeix_commented_at_2022-02-16_1101"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/2736#issuecomment-1041367004">2022-02-16 11:01</a>:<a class="headerlink" href="#jsmeix_commented_at_2022-02-16_1101" title="Permanent link">&para;</a></h4>
<p>In general recreating a system different than it was before<br />
belongs primarily to MIGRATION_MODE in ReaR.</p>
<p>If the values in EXCLUDE_IP_ADDRESSES and
EXCLUDE_NETWORK_INTERFACES<br />
are also intended for the recreated system some additional separated<br />
config variable would be needed.</p>
<p>The current config variables that are related to migration are not
named<br />
with MIGRATE in their name so one has to search default.conf for
places<br />
that mention <code>migrat</code> (ignore case) to find what is related to
migration.</p>
<p>The whole system migration area is currently not well implemented.<br />
Something is done automatically mostly even hardcoded by scripts<br />
so not at all any "final power to the user" in those cases.<br />
Something can be specified via some config variables.<br />
Something is just missing, cf.<br />
<a href="https://github.com/rear/rear/issues/2312">https://github.com/rear/rear/issues/2312</a><br />
and<br />
<a href="https://github.com/rear/rear/issues/2468">https://github.com/rear/rear/issues/2468</a></p>
<p>For the not so fun of it:<br />
As far as I remember some longer time ago<br />
I tried to improve the automated networking migration code<br />
cf.
<a href="https://github.com/rear/rear/issues/2310">https://github.com/rear/rear/issues/2310</a><br />
and
<a href="https://github.com/rear/rear/pull/2313">https://github.com/rear/rear/pull/2313</a><br />
in the recreated system but I basically got lost in that code<br />
likely because I am not at all an expert in networking setup.<br />
There is a reason why I prefer DHCP - my FritzBox router<br />
and the KVM/QEMU virtualization environments<br />
do the networking setup better than I can :-)</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2022 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2021-12-28.2736.pr.merged.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
