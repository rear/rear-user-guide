<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>2019 01 15.2017.issue.closed - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "2019 01 15.2017.issue.closed";
        var mkdocs_page_input_path = "issues/2019-01-15.2017.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/rust.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', '366986045', 'auto');
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
      <li>2019 01 15.2017.issue.closed</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="2017_issue_closed_900_create_missing_directoriessh_fails_calling_chroot_due_to_missing_files_in_mntlocal_with_backupnsr"><a href="https://github.com/rear/rear/issues/2017">#2017 Issue</a> <code>closed</code>: 900_create_missing_directories.sh fails calling chroot due to missing files in /mnt/local/ (with BACKUP=NSR)<a class="headerlink" href="#2017_issue_closed_900_create_missing_directoriessh_fails_calling_chroot_due_to_missing_files_in_mntlocal_with_backupnsr" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>support / question</code>, <code>fixed / solved / done</code>,
<code>external tool</code></p>
<h4 id="richardwheatley87_opened_issue_at_2019-01-15_1909"><img src="https://avatars.githubusercontent.com/u/46721228?v=4" width="50"><a href="https://github.com/richardwheatley87">richardwheatley87</a> opened issue at <a href="https://github.com/rear/rear/issues/2017">2019-01-15 19:09</a>:<a class="headerlink" href="#richardwheatley87_opened_issue_at_2019-01-15_1909" title="Permanent link">&para;</a></h4>
<h4 id="relax-and-recover_rear_issue_template">Relax-and-Recover (ReaR) Issue Template<a class="headerlink" href="#relax-and-recover_rear_issue_template" title="Permanent link">&para;</a></h4>
<p>Fill in the following items before submitting a new issue<br />
(quick response is not guaranteed with free support):</p>
<ul>
<li>
<p>ReaR version ("/usr/sbin/rear -V"):<br />
    Relax-andRecover 2.4 / 2018-06-21</p>
</li>
<li>
<p>OS version ("cat /etc/rear/os.conf" or "lsb_release -a" or "cat
    /etc/os-release"):<br />
<img alt="image" src="https://user-images.githubusercontent.com/46721228/51198233-97857d80-18eb-11e9-91a1-8d1b188f0abc.png" /><br />
    RHEL Server 6.5</p>
</li>
<li>
<p>ReaR configuration files ("cat /etc/rear/site.conf" and/or "cat
    /etc/rear/local.conf"):<br />
<img alt="image" src="https://user-images.githubusercontent.com/46721228/51198317-da475580-18eb-11e9-94d1-588a9eba71a1.png" /></p>
</li>
<li>
<p>Hardware (PC dor PowerNV BareMetal or ARM) or virtual machine (KVM
    guest or PoverVM LPAR):<br />
    VMware Red Hat Enterprise Linux 6 32-bit, compatability ESXi 5.5 and
    later (VM version 10)</p>
</li>
<li>
<p>System architecture (x86 compatible or PPC64/PPC64LE or what exact
    ARM device):<br />
    x86 compatible</p>
</li>
<li>
<p>Firmware (BIOS or UEFI or Open Firmware) and bootloader (GRUB or
    ELILO or Petitboot):<br />
    BIOS firmware and GRUB bootloader</p>
</li>
<li>
<p>Storage (lokal disk or SSD) and/or SAN (FC or iSCSI or FCoE) and/or
    multipath (DM or NVMe):<br />
    Local disk 105GB Thick provisioned lazy zeroed</p>
</li>
<li>
<p>Description of the issue (ideally so that others can reproduce
    it):<br />
    rear recover fails during 900_create_missing_directories.sh with
    error:<br />
<code>choot: failed to run command '/bin/bash' : No such file or directory &lt;timestamp&gt; Failed to 'chown root:root /mnt/cdrom'</code><br />
    Error appears to be similar to closed issue #1715 and #879</p>
</li>
<li>
<p>Workaround, if any: None</p>
</li>
<li>
<p>Attachments, as applicable ("rear -D mkrescue/mkbackup/recover"
    debug log files):<br />
    /var/log/rear/rear-dev-calbd-server.log extract:<br />
<img alt="image" src="https://user-images.githubusercontent.com/46721228/51202868-a07c4c00-18f7-11e9-858e-5570f0345235.png" /><br />
    Debug log output:<br />
<img alt="image" src="https://user-images.githubusercontent.com/46721228/51203018-f81ab780-18f7-11e9-8cb9-992c6cb2931a.png" /></p>
</li>
</ul>
<h4 id="jsmeix_commented_at_2019-01-16_1101"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2017#issuecomment-454739469">2019-01-16 11:01</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-01-16_1101" title="Permanent link">&para;</a></h4>
<p>When it fails during 900_create_missing_directories.sh<br />
(that is run during 'rear recover' after the backup was restorted)<br />
with</p>
<pre><code>choot: failed to run command '/bin/bash' : No such file or directory
</code></pre>
<p>what actually happens is that<br />
'chroot $TARGET_FS_ROOT' fails with '/bin/bash No such file or
directory'.<br />
which means:</p>
<p>After restore of the backup 'chroot $TARGET_FS_ROOT'<br />
is not possible which indicates that the backup restore<br />
was not correct (probably mandatory files are missing).</p>
<p>During 'rear recover' the backup restore happens from<br />
within the running ReaR recovery system into TARGET_FS_ROOT<br />
and TARGET_FS_ROOT is /mnt/local.</p>
<p>This looks as if no '/bin/bash' was restored which would mean<br />
your backup restore did not work - perhaps even because<br />
there is no '/bin/bash' in your backup?</p>
<p>Check what files are in your backup and inspect your<br />
backup log that was created when you did "rear mkbackup" and<br />
your backup restore log that was created during "rear recover".</p>
<p>In general regarding ReaR versus backup see the section<br />
"Relax-and-Recover versus backup and restore" in<br />
<a href="https://en.opensuse.org/SDB:Disaster_Recovery">https://en.opensuse.org/SDB:Disaster_Recovery</a></p>
<p>For a more detailed analysis of issues see the section<br />
"Debugging issues with Relax-and-Recover" in<br />
<a href="https://en.opensuse.org/SDB:Disaster_Recovery">https://en.opensuse.org/SDB:Disaster_Recovery</a><br />
what information and files are needed when 'rear recover' failed<br />
so that others (i.e. we at ReaR upstream) could do a more detailed
analysis.</p>
<h4 id="jsmeix_commented_at_2019-01-16_1125"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2017#issuecomment-454745465">2019-01-16 11:25</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-01-16_1125" title="Permanent link">&para;</a></h4>
<p>@richardwheatley87<br />
in general regarding <code>BACKUP=NSR</code>:</p>
<p>I am not a EMC NetWorker (or Legato NetWorker) user<br />
so that I cannot reproduce anything or even fix anything<br />
that is specific regarding <code>BACKUP=NSR</code>.</p>
<p>In particular I do not have any proprietary third-party backup tool.</p>
<p>In general I do not use any of the third-party backup tools<br />
so that in general I can neither reproduce any issue nor fix<br />
or enhance things that are related to third-party backup tools.</p>
<p>When you have a Red Hat support contract, perhaps they could help?</p>
<h4 id="richardwheatley87_commented_at_2019-01-17_1558"><img src="https://avatars.githubusercontent.com/u/46721228?v=4" width="50"><a href="https://github.com/richardwheatley87">richardwheatley87</a> commented at <a href="https://github.com/rear/rear/issues/2017#issuecomment-455224854">2019-01-17 15:58</a>:<a class="headerlink" href="#richardwheatley87_commented_at_2019-01-17_1558" title="Permanent link">&para;</a></h4>
<p>Thank you for your prompt reply.<br />
I shall read suggested information on disaster recovery, look at my EMC
NetWorker backup configuration and check the logs (both ReaR and NSR)
for info on any failures that occured during the NSR restore phase.</p>
<h4 id="gdha_commented_at_2019-01-29_0757"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/2017#issuecomment-458442192">2019-01-29 07:57</a>:<a class="headerlink" href="#gdha_commented_at_2019-01-29_0757" title="Permanent link">&para;</a></h4>
<p>@richardwheatley87 Any update you want to share about the research you
did?</p>
<h4 id="richardwheatley87_commented_at_2019-01-29_0850"><img src="https://avatars.githubusercontent.com/u/46721228?v=4" width="50"><a href="https://github.com/richardwheatley87">richardwheatley87</a> commented at <a href="https://github.com/rear/rear/issues/2017#issuecomment-458456860">2019-01-29 08:50</a>:<a class="headerlink" href="#richardwheatley87_commented_at_2019-01-29_0850" title="Permanent link">&para;</a></h4>
<p>Not yet, I have not had time to progress further. Since the problem
appears to be that the backup has not been restored, I will change the
<code>NSR_DEFAULT_POOL_NAME=Default</code> in the site.config file to be the actual
EMC NetWorker pool where my machine backup is stored then re-create the
rescue ISO, using <code>rear mkrescue</code>. I thought that the NSR agent on the
machine would know which pool get the backup from.<br />
Thank you for your interest, I will add an update once I have tried this
and have more information.</p>
<h4 id="jsmeix_commented_at_2019-04-26_0953"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2017#issuecomment-487000617">2019-04-26 09:53</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-04-26_0953" title="Permanent link">&para;</a></h4>
<p>No news is good news.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2022 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2019-01-15.2017.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
