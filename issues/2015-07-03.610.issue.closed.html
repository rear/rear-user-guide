<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#610 Issue closed: recovery iso image fails to boot on ibm powervm lpar - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#610 Issue closed: recovery iso image fails to boot on ibm powervm lpar";
        var mkdocs_page_input_path = "issues/2015-07-03.610.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#610 Issue closed: recovery iso image fails to boot on ibm powervm lpar</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="610_issue_closed_recovery_iso_image_fails_to_boot_on_ibm_powervm_lpar"><a href="https://github.com/rear/rear/issues/610">#610 Issue</a> <code>closed</code>: recovery iso image fails to boot on ibm powervm lpar<a class="headerlink" href="#610_issue_closed_recovery_iso_image_fails_to_boot_on_ibm_powervm_lpar" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>bug</code>, <code>support / question</code></p>
<h4 id="harikum_opened_issue_at_2015-07-03_1611"><img src="https://avatars.githubusercontent.com/u/13168225?v=4" width="50"><a href="https://github.com/harikum">harikum</a> opened issue at <a href="https://github.com/rear/rear/issues/610">2015-07-03 16:11</a>:<a class="headerlink" href="#harikum_opened_issue_at_2015-07-03_1611" title="Permanent link">&para;</a></h4>
<p>Environment: IBM PowerVM Lpar on Power8 hardware<br />
OS: SLES11SP3<br />
Rear 1.17.1</p>
<p>local.conf:</p>
<pre><code>OUTPUT=ISO
BACKUP=NETFS
NETFS_URL=nfs://nfs_host/backup/rear/
BACKUP_PROG_INCLUDE=( '/' )
BACKUP_PROG_EXCLUDE=( '/tmp/*' '/dev/shm/*' '/var/lib/rear/output/*' '/media/*'  )
</code></pre>
<p>"rear -v mkbackup" runs successfully and creates the bootable iso and
the backup.tar.gz file</p>
<p>however the lpar to be recovered is unable to boot from the
'rear-hostname.iso' image, message "no operating system found " is
displayed on the console, no errors or any other references.</p>
<p>here is the output of rear validate on the system.</p>
<pre><code>Version:     Relax-and-Recover 1.17.1 / Git
Validation:  SUSE_LINUX/11/ppc64
Submitted:   Hari Mahadevan hari@mahadevan.net USA
Date:        2015-07-03
Features:    ISO
Comment:     rescue disk fails to load ( SMS message "no operating system found message ", this occurs  when attempting to recover a SLES 11Sp3 lpar, The boot iso 'rear-hostname'.iso get created as part of 'rear -v mkbackup'
</code></pre>
<p>The same process works fine on a x86 vmware virtual machine.</p>
<p>Anything unique with the Power8 Lpars with SLES11Sp3?</p>
<p>appreciate your response.</p>
<h4 id="jayfurmanek_commented_at_2015-07-06_0444"><img src="https://avatars.githubusercontent.com/u/8660918?v=4" width="50"><a href="https://github.com/jayfurmanek">jayfurmanek</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-118711884">2015-07-06 04:44</a>:<a class="headerlink" href="#jayfurmanek_commented_at_2015-07-06_0444" title="Permanent link">&para;</a></h4>
<p>What is your storage? If you are booting from a SAN, you'll need to
start with defining BOOT_FROM_SAN=y as well as
AUTOEXCLUDE_MULTIPATH=n in your config file.</p>
<p>I could be wrong, but I bet your VMWare env is not the same. Many VMWare
environments use a clustered file system and not an NPIV, multipath'd
boot from SAN environment. Booting directly from the SAN from virtual
fibre channel is a bit more complicated.</p>
<p>Any more details to share? Can you post the mkbackup log?</p>
<h4 id="jayfurmanek_commented_at_2015-07-06_0446"><img src="https://avatars.githubusercontent.com/u/8660918?v=4" width="50"><a href="https://github.com/jayfurmanek">jayfurmanek</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-118712132">2015-07-06 04:46</a>:<a class="headerlink" href="#jayfurmanek_commented_at_2015-07-06_0446" title="Permanent link">&para;</a></h4>
<p>Also, take a look at issue #572 . It might help you get your
configuration set up correctly.</p>
<h4 id="harikum_commented_at_2015-07-06_1254"><img src="https://avatars.githubusercontent.com/u/13168225?v=4" width="50"><a href="https://github.com/harikum">harikum</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-118846107">2015-07-06 12:54</a>:<a class="headerlink" href="#harikum_commented_at_2015-07-06_1254" title="Permanent link">&para;</a></h4>
<p>EMC San Storage</p>
<p>I will test with BOOT_FROM_SAN=y and AUTOEXCLUDE_MULTIPATH=n options
and update with the logs.</p>
<h4 id="harikum_commented_at_2015-07-06_1409"><img src="https://avatars.githubusercontent.com/u/13168225?v=4" width="50"><a href="https://github.com/harikum">harikum</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-118867419">2015-07-06 14:09</a>:<a class="headerlink" href="#harikum_commented_at_2015-07-06_1409" title="Permanent link">&para;</a></h4>
<p>updated the Rear local.conf to include options<br />
BOOT_FROM_SAN=y<br />
AUTOEXCLUDE_MULTIPATH=n</p>
<p>boot fails with an error message now..</p>
<p>IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM
IBM<br />
IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM
IBM<br />
IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM
IBM<br />
IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM
IBM<br />
IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM
IBM<br />
IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM
IBM<br />
IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM
IBM<br />
IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM
IBM<br />
IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM
IBM<br />
IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM
IBM<br />
IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM
IBM<br />
IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM
IBM<br />
IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM
IBM<br />
IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM
IBM<br />
IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM
IBM<br />
IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM
IBM<br />
IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM<br />
IBM IBM IBM IBM IBM IBM STARTING SOFTWARE IBM IBM IBM IBM IBM IBM<br />
IBM IBM IBM IBM IBM IBM PLEASE WAIT... IBM IBM IBM IBM IBM IBM<br />
IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM<br />
IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM
IBM<br />
IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM
IBM<br />
IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM
IBM<br />
IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM
IBM<br />
IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM
IBM<br />
IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM
IBM<br />
IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM
IBM<br />
IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM
IBM<br />
IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM
IBM<br />
IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM
IBM<br />
IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM
IBM<br />
Detected bad memory access to address: ffffffffffffffff<br />
Package path = /packages/boot-mgr</p>
<pre><code>                  .----------------------------------.
                  |  No Operating Systems Installed  |
                  `----------------------------------'
</code></pre>
<h4 id="schlomo_commented_at_2015-07-06_1641"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-118920641">2015-07-06 16:41</a>:<a class="headerlink" href="#schlomo_commented_at_2015-07-06_1641" title="Permanent link">&para;</a></h4>
<p>AFAIKT an LPAR is some kind of virtualized environment. Are you sure
that the ISO that is built by ReaR is actually made for that? Can you
try booting the hardware system from that ISO?</p>
<p>Also, are there other ways how to boot Linux on LPAR? For example by
providing a kernel and initrd directly (like with XEN)? If yes, then I
would advice to use that and not to rely on the "ISO" wrapping.</p>
<h4 id="harikum_commented_at_2015-07-06_1729"><img src="https://avatars.githubusercontent.com/u/13168225?v=4" width="50"><a href="https://github.com/harikum">harikum</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-118932325">2015-07-06 17:29</a>:<a class="headerlink" href="#harikum_commented_at_2015-07-06_1729" title="Permanent link">&para;</a></h4>
<p>Yes LPAR is a virtualised environment on IBM's Power
hypervisor/hardware.</p>
<p>the ISO image was created by rear (rear -v mkbackup) and the same iso
was mapped to a vSCSI device on the lpar, and the iso os the backing
device that presents as a cdrom for the lpar.</p>
<p>the same process using an SLES 11 ISO was used to build the SLES 11 OS
on the lpar. so the booting from the SLES ISO works fine.</p>
<h4 id="schlomo_commented_at_2015-07-06_1857"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-118958343">2015-07-06 18:57</a>:<a class="headerlink" href="#schlomo_commented_at_2015-07-06_1857" title="Permanent link">&para;</a></h4>
<p>I see. IMHO the fact that the vendor-shipped SLES11 ISO works
unfortunately does not tell us anything about the ReaR ISO.</p>
<p>ReaR uses yaboot to make the ISO bootable, the code is in
<code>output/ISO/Linux-ppc64/30_create_yaboot.sh</code>. PPC64 is not so wide
spread and AFAIKT none of the ReaR developers has access to that.</p>
<p>Bottom line is that it might be that we cannot help you directly. I
would, however, strongly advice to ask on the ReaR mailing list as there
might be still some PPC64 users around. You might also search the GitHub
issues for PPC and contact their authors directly.</p>
<p>And, I still think it would be interesting to know if the ReaR ISO works
on the raw hardware. That test would help you to narrow down where to
look further.</p>
<h4 id="jayfurmanek_commented_at_2015-07-06_1942"><img src="https://avatars.githubusercontent.com/u/8660918?v=4" width="50"><a href="https://github.com/jayfurmanek">jayfurmanek</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-118975358">2015-07-06 19:42</a>:<a class="headerlink" href="#jayfurmanek_commented_at_2015-07-06_1942" title="Permanent link">&para;</a></h4>
<p>I think we'll need the logs to see what is happening. I have access to
ppc64 hardware, but I don't have a SAN to test on. The create_yaboot.sh
script should work. It works for me using RHEL on ppc64 on local
storage, anyway.</p>
<p>Also, schlomo, on ppc64 gear running PowerVM, you actually don't ever
have access to the raw hardware. The hypervisor is in the firmware and
OS's are always virtualized (LPAR'd). It's changed a bit with the new
OpenPower servers though, which do have a raw hardware mode.</p>
<p>Can you post the rear/var/log/rear/rear-hostname-log file? That will
tell us if it created the PReP partition at least.</p>
<h4 id="schlomo_commented_at_2015-07-06_1944"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-118975776">2015-07-06 19:44</a>:<a class="headerlink" href="#schlomo_commented_at_2015-07-06_1944" title="Permanent link">&para;</a></h4>
<p>Ah, good point. My PPC knowledge is indeed <em>very</em> outdated. Mostly from
installing SUSE 7 on an old PowerPC Mac :-) But, yaboot was already
state of the art back then.</p>
<h4 id="jayfurmanek_commented_at_2015-07-06_1950"><img src="https://avatars.githubusercontent.com/u/8660918?v=4" width="50"><a href="https://github.com/jayfurmanek">jayfurmanek</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-118976855">2015-07-06 19:50</a>:<a class="headerlink" href="#jayfurmanek_commented_at_2015-07-06_1950" title="Permanent link">&para;</a></h4>
<p>Always good to keep learning right? :) Yaboot was good for it's day, but
grub2 has surpassed it in design and function. This is reflected in the
latest distros for PPC (RHEL7, SLES12, Ubuntu) all moving to grub2 for
the bootloader. The PReP partition still exists, however.</p>
<p>I've not tested REAR in a grub2 PPC distro yet. I'll have to do that and
open any issues I find..</p>
<h4 id="jayfurmanek_commented_at_2015-07-07_0606"><img src="https://avatars.githubusercontent.com/u/8660918?v=4" width="50"><a href="https://github.com/jayfurmanek">jayfurmanek</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-119082586">2015-07-07 06:06</a>:<a class="headerlink" href="#jayfurmanek_commented_at_2015-07-07_0606" title="Permanent link">&para;</a></h4>
<p>I think I found the issue here - I haven't worked up a patch just yet
though.<br />
In SLES, the yaboot binary is at: /lib/lilo/pmac/yaboot, not in
/etc/yaboot/yaboot like in Red Hat based distros.<br />
The code in output/ISO/Linux-ppc64/30_create_yaboot.sh will need to
account for the different location based on distro. The created ISO
looks good otherwise, it's just missing the bootloader.</p>
<p>As a quick workaround, you can change line 23 to point to
/lib/lilo/pmac/yaboot instead of /etc/yaboot/yaboot. That should get a
working bootable ISO.</p>
<h4 id="gdha_commented_at_2015-07-07_1230"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-119190186">2015-07-07 12:30</a>:<a class="headerlink" href="#gdha_commented_at_2015-07-07_1230" title="Permanent link">&para;</a></h4>
<p>@jayfurmanek perhaps make a special function like <code>find_syslinux_file</code>
(<code>usr/share/rear/lib/bootloader-functions.sh</code>) for it like we did for
finding syslinux executable.</p>
<h4 id="jayfurmanek_commented_at_2015-07-07_1433"><img src="https://avatars.githubusercontent.com/u/8660918?v=4" width="50"><a href="https://github.com/jayfurmanek">jayfurmanek</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-119222845">2015-07-07 14:33</a>:<a class="headerlink" href="#jayfurmanek_commented_at_2015-07-07_1433" title="Permanent link">&para;</a></h4>
<p>That's a good idea. That /lib/bootloader-functions seems like a good
place for that, but looking in that file I see mostly syslinux related
stuff. Any preference on where that function should live?</p>
<h4 id="schlomo_commented_at_2015-07-07_1440"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-119224480">2015-07-07 14:40</a>:<a class="headerlink" href="#schlomo_commented_at_2015-07-07_1440" title="Permanent link">&para;</a></h4>
<p>You can put it into the same file, just make sure that the function
carries a self-explanatory name.</p>
<h4 id="jayfurmanek_commented_at_2015-07-09_2057"><img src="https://avatars.githubusercontent.com/u/8660918?v=4" width="50"><a href="https://github.com/jayfurmanek">jayfurmanek</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-120142037">2015-07-09 20:57</a>:<a class="headerlink" href="#jayfurmanek_commented_at_2015-07-09_2057" title="Permanent link">&para;</a></h4>
<p>harikum,</p>
<p>Can you try to check out the latest code and try again. The boot media
should work now. On my system with local storage I can recover a SLES 11
system just fine now.</p>
<h4 id="acsacpact_commented_at_2015-07-13_1303"><img src="https://avatars.githubusercontent.com/u/13315048?v=4" width="50"><a href="https://github.com/acsacpact">acsacpact</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-120921665">2015-07-13 13:03</a>:<a class="headerlink" href="#acsacpact_commented_at_2015-07-13_1303" title="Permanent link">&para;</a></h4>
<p>I am also facing same issue, Yaboot file (/etc/yaboot.conf) not updated
with rear iso and path of it.</p>
<p>can you please guide where I can get the latest code,so that I can try
out.</p>
<h4 id="acsacpact_commented_at_2015-07-13_1356"><img src="https://avatars.githubusercontent.com/u/13315048?v=4" width="50"><a href="https://github.com/acsacpact">acsacpact</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-120936353">2015-07-13 13:56</a>:<a class="headerlink" href="#acsacpact_commented_at_2015-07-13_1356" title="Permanent link">&para;</a></h4>
<p>Can you share the latest code rpm for the suse 11 sp3 for PPC64.. I
could not able to make rpm from the source code.Getting below error and
not able to get th git package rpm from the SLES 11 iso iamge also.</p>
<p>vwdcqv-uxapp140:~/rear-latest/rear-latest # make rpm<br />
which: no git in
(/sbin:/usr/sbin:/usr/local/sbin:/root/bin:/usr/local/bin:/usr/bin:/bin:/usr/bin/X11:/usr/X11R6/bin:/usr/games:/usr/lib/mit/bin:/usr/lib/mit/sbin:/opt/ibm/java-ppc64-71/bin/)<br />
rm -f rear-1.17.1-git201507130000.tar.gz<br />
rm -f build-stamp<br />
make -C doc clean<br />
make[1]: Entering directory
<code>/root/rear-latest/rear-latest/doc' rm -f unconv.8 *.html *.xml make -C user-guide clean make[2]: Entering directory</code>/root/rear-latest/rear-latest/doc/user-guide'<br />
rm -f <em>.html *.svg *.xml<br />
make[2]: Leaving directory
<code>/root/rear-latest/rear-latest/doc/user-guide' make[1]: Leaving directory</code>/root/rear-latest/rear-latest/doc'<br />
== Validating scripts and configuration ==<br />
find etc/ usr/share/rear/conf/ -name '</em>.conf' | xargs -n 1 bash -n<br />
bash -n usr/sbin/rear<br />
find . -name '<em>.sh' | xargs -n 1 bash -n<br />
== Prepare manual ==<br />
make -C doc man<br />
make[1]: Entering directory
<code>/root/rear-latest/rear-latest/doc' make[1]: Nothing to be done for</code>man'.<br />
make[1]: Leaving directory `/root/rear-latest/rear-latest/doc'<br />
Nothing to do.<br />
== Building archive rear-1.17.1-git201507130000 ==<br />
git checkout master<br />
/bin/bash: git: command not found<br />
make: *</em>* [rear-1.17.1-git201507130000.tar.gz] Error 127</p>
<p>vwdcqv-uxapp140:<s>/rear-latest/rear-latest # make install<br />
which: no git in
(/sbin:/usr/sbin:/usr/local/sbin:/root/bin:/usr/local/bin:/usr/bin:/bin:/usr/bin/X11:/usr/X11R6/bin:/usr/games:/usr/lib/mit/bin:/usr/lib/mit/sbin:/opt/ibm/java-ppc64-71/bin/)<br />
== Validating scripts and configuration ==<br />
find etc/ usr/share/rear/conf/ -name '<em>.conf' | xargs -n 1 bash -n<br />
bash -n usr/sbin/rear<br />
find . -name '</em>.sh' | xargs -n 1 bash -n<br />
== Prepare manual ==<br />
make -C doc man<br />
make[1]: Entering directory
<code>/root/rear-latest/rear-latest/doc' make[1]: Nothing to be done for</code>man'.<br />
make[1]: Leaving directory
<code>/root/rear-latest/rear-latest/doc' == Installing configuration == install -d -m0700 /etc/rear/ [[ ! -e /etc/rear/local.conf ]] &amp;&amp; \ install -Dp -m0600 etc/rear/local.conf /etc/rear/local.conf make: [install-config] Error 1 (ignored) [[ ! -e /etc/rear/os.conf &amp;&amp; -e etc/rear/os.conf ]] &amp;&amp; \ install -Dp -m0600 etc/rear/os.conf /etc/rear/os.conf make: [install-config] Error 1 (ignored) find /etc/rear/ -name '.gitignore' -exec rm -rf {} \; &amp;&gt;/dev/null Nothing to do. == Installing binary == install -Dp -m0755 usr/sbin/rear /usr/sbin/rear sed -i -e 's,^CONFIG_DIR=.*,CONFIG_DIR="/etc/rear",' \ -e 's,^SHARE_DIR=.*,SHARE_DIR="/usr/share/rear",' \ -e 's,^VAR_DIR=.*,VAR_DIR="/var/lib/rear",' \ /usr/sbin/rear Nothing to do. == Installing scripts == install -d -m0755 /usr/share/rear/ cp -a usr/share/rear/. /usr/share/rear/ find /usr/share/rear/ -name '.gitignore' -exec rm -rf {} \; &amp;&gt;/dev/null == Installing working directory == install -d -m0755 /var/lib/rear/ install -d -m0755 /var/log/rear/ == Installing documentation == make -C doc install make[1]: Entering directory</code>/root/rear-latest/rear-latest/doc'<br />
install -Dp -m0644 rear.8 /usr/share/man/man8/rear.8<br />
make[1]: Leaving directory `/root/rear-latest/rear-latest/doc'<br />
sed -i -e 's,/etc,/etc,' <br />
-e 's,/usr/sbin,/usr/sbin,' <br />
-e 's,/usr/share,/usr/share,' <br />
-e 's,/usr/share/doc/packages,/usr/share/doc,' <br />
/usr/share/man/man8/rear.8<br />
vwdcqv-uxapp140:</s>/rear-latest/rear-latest #</p>
<h4 id="harikum_commented_at_2015-07-13_1406"><img src="https://avatars.githubusercontent.com/u/13168225?v=4" width="50"><a href="https://github.com/harikum">harikum</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-120939130">2015-07-13 14:06</a>:<a class="headerlink" href="#harikum_commented_at_2015-07-13_1406" title="Permanent link">&para;</a></h4>
<p>jay, no luck, i used the latest code for
output/ISO/Linux-ppc64/30_create_yaboot.sh and still running into the
same issue, unable to boot off the iso.</p>
<p>Detected bad memory access to address: ffffffffffffffff<br />
Package path = /packages/boot-mgr<br />
.----------------------------------.<br />
| No Operating Systems Installed |<br />
`----------------------------------'</p>
<h4 id="jayfurmanek_commented_at_2015-07-13_1451"><img src="https://avatars.githubusercontent.com/u/8660918?v=4" width="50"><a href="https://github.com/jayfurmanek">jayfurmanek</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-120955000">2015-07-13 14:51</a>:<a class="headerlink" href="#jayfurmanek_commented_at_2015-07-13_1451" title="Permanent link">&para;</a></h4>
<p>acsacpact,</p>
<p>Do you need to create the RPM? Why not just do a quick git clone and use
that? Also, from your output, it looks like you need to install git.</p>
<h4 id="jayfurmanek_commented_at_2015-07-13_1503"><img src="https://avatars.githubusercontent.com/u/8660918?v=4" width="50"><a href="https://github.com/jayfurmanek">jayfurmanek</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-120960384">2015-07-13 15:03</a>:<a class="headerlink" href="#jayfurmanek_commented_at_2015-07-13_1503" title="Permanent link">&para;</a></h4>
<p>harikum,</p>
<p>Did you do a full checkout? The 30_create_yaboot.sh file is not the
only file that changed. You'll have to generate a new ISO as well.</p>
<p>I never saw that error, though...but seeing as you are on Power8, maybe
try explicitly putting the LPAR in Power7 compat mode. SLES 11 doesn't
support Power8 until the next SP release.</p>
<h4 id="acsacpact_commented_at_2015-07-13_1708"><img src="https://avatars.githubusercontent.com/u/13315048?v=4" width="50"><a href="https://github.com/acsacpact">acsacpact</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-120995109">2015-07-13 17:08</a>:<a class="headerlink" href="#acsacpact_commented_at_2015-07-13_1708" title="Permanent link">&para;</a></h4>
<p>HI Jay,<br />
Thanks for your quick response..<br />
Can you guide me how i can get the quick git clone of it.. please help
with steps.</p>
<p>Regards<br />
Srinivasan AC</p>
<h4 id="jayfurmanek_commented_at_2015-07-13_1710"><img src="https://avatars.githubusercontent.com/u/8660918?v=4" width="50"><a href="https://github.com/jayfurmanek">jayfurmanek</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-120995683">2015-07-13 17:10</a>:<a class="headerlink" href="#jayfurmanek_commented_at_2015-07-13_1710" title="Permanent link">&para;</a></h4>
<p>install git from the OS's repositories, then do:<br />
git clone
<a href="https://github.com/rear/rear.git">https://github.com/rear/rear.git</a></p>
<p>Then you can run it from that directory.</p>
<h4 id="acsacpact_commented_at_2015-07-13_1732"><img src="https://avatars.githubusercontent.com/u/13315048?v=4" width="50"><a href="https://github.com/acsacpact">acsacpact</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-121000257">2015-07-13 17:32</a>:<a class="headerlink" href="#acsacpact_commented_at_2015-07-13_1732" title="Permanent link">&para;</a></h4>
<p>I have downloaded those files in zip format and moved to the server..
still getting below error.Can you please suggest on the same.</p>
<p>vwdcqv-uxapp140:<s>/rear-latest/rear-latest # make rpm<br />
fatal: Not a git repository (or any of the parent directories): .git<br />
fatal: Not a git repository (or any of the parent directories): .git<br />
rm -f rear-1.17.1-git201507130000.tar.gz<br />
rm -f build-stamp<br />
make -C doc clean<br />
make[1]: Entering directory
<code>/root/rear-latest/rear-latest/doc' rm -f unconv.8 *.html *.xml make -C user-guide clean make[2]: Entering directory</code>/root/rear-latest/rear-latest/doc/user-guide'<br />
rm -f <em>.html *.svg *.xml<br />
make[2]: Leaving directory
<code>/root/rear-latest/rear-latest/doc/user-guide' make[1]: Leaving directory</code>/root/rear-latest/rear-latest/doc'<br />
== Validating scripts and configuration ==<br />
find etc/ usr/share/rear/conf/ -name '</em>.conf' | xargs -n 1 bash -n<br />
bash -n usr/sbin/rear<br />
find . -name '<em>.sh' | xargs -n 1 bash -n<br />
== Prepare manual ==<br />
make -C doc man<br />
make[1]: Entering directory
<code>/root/rear-latest/rear-latest/doc' make[1]: Nothing to be done for</code>man'.<br />
make[1]: Leaving directory `/root/rear-latest/rear-latest/doc'<br />
Nothing to do.<br />
== Building archive rear-1.17.1-git201507130000 ==<br />
git checkout<br />
fatal: Not a git repository (or any of the parent directories): .git<br />
make: *</em>* [rear-1.17.1-git201507130000.tar.gz] Error 128<br />
vwdcqv-uxapp140:</s>/rear-latest/rear-latest # ls -lrt<br />
total 68<br />
drwxr-xr-x 4 root root 4096 Jul 9 09:05 usr<br />
drwxr-xr-x 6 root root 4096 Jul 9 09:05 packaging<br />
drwxr-xr-x 4 root root 4096 Jul 9 09:05 etc<br />
drwxr-xr-x 4 root root 4096 Jul 9 09:05 doc<br />
-rw-r--r-- 1 root root 8601 Jul 9 09:05 README.adoc<br />
-rw-r--r-- 1 root root 8998 Jul 9 09:05 Makefile<br />
-rw-r--r-- 1 root root 18010 Jul 9 09:05 COPYING<br />
-rw-r--r-- 1 root root 91 Jul 9 09:05 AUTHORS<br />
-rw-r--r-- 1 root root 36 Jul 9 09:05 .gitignore<br />
vwdcqv-uxapp140:~/rear-latest/rear-latest #</p>
<h4 id="acsacpact_commented_at_2015-07-13_1733"><img src="https://avatars.githubusercontent.com/u/13315048?v=4" width="50"><a href="https://github.com/acsacpact">acsacpact</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-121000436">2015-07-13 17:32</a>:<a class="headerlink" href="#acsacpact_commented_at_2015-07-13_1733" title="Permanent link">&para;</a></h4>
<p>I dont have the direct access to internet from the system,its via proxy</p>
<p>vwdcqv-uxapp140:~/rear-latest/rear-latest # git clone
<a href="https://github.com/rear/rear.git">https://github.com/rear/rear.git</a><br />
Cloning into 'rear'...</p>
<p>fatal: unable to access
'<a href="https://github.com/rear/rear.git/">https://github.com/rear/rear.git/</a>':
Failed connect to github.com:443; Operation now in progress<br />
vwdcqv-uxapp140:~/rear-latest/rear-latest #</p>
<h4 id="jayfurmanek_commented_at_2015-07-13_1741"><img src="https://avatars.githubusercontent.com/u/8660918?v=4" width="50"><a href="https://github.com/jayfurmanek">jayfurmanek</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-121002599">2015-07-13 17:41</a>:<a class="headerlink" href="#jayfurmanek_commented_at_2015-07-13_1741" title="Permanent link">&para;</a></h4>
<p>Not to be mean, but this log is for issue #610 and is probably not
place for these basic questions.</p>
<p>You don't need to make the the RPM, nothing needs compiled, just use
REAR from that very directory. (./usr/sbin/rear)</p>
<h4 id="acsacpact_commented_at_2015-07-13_1756"><img src="https://avatars.githubusercontent.com/u/13315048?v=4" width="50"><a href="https://github.com/acsacpact">acsacpact</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-121005936">2015-07-13 17:56</a>:<a class="headerlink" href="#acsacpact_commented_at_2015-07-13_1756" title="Permanent link">&para;</a></h4>
<p>I understand its very basic questions and I already installed stable
version (rear-1.17.1-1) and did the rear -v mkbackup and it completed
successfully. But when I try to reboot and test the recover, yaboot not
even showing the rear recovery in boot image list.. then I found this
issue link and suggested to get latest code(rear-1.18) but I could able
to get the rpm</p>
<p>please help to get it resolve the issue. Shall I remove the
rear-1.17.1-1 package from the linux system and how I can install the
rear-1.18 and do the backup again and test the recovery.</p>
<p>I am new to this Linux platform, If there some basic please excuse me.</p>
<h4 id="jayfurmanek_commented_at_2015-07-13_1813"><img src="https://avatars.githubusercontent.com/u/8660918?v=4" width="50"><a href="https://github.com/jayfurmanek">jayfurmanek</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-121011017">2015-07-13 18:13</a>:<a class="headerlink" href="#jayfurmanek_commented_at_2015-07-13_1813" title="Permanent link">&para;</a></h4>
<ul>
<li>Download this:
    <a href="https://github.com/rear/rear/archive/master.zip">https://github.com/rear/rear/archive/master.zip</a></li>
<li>unzip it somewhere</li>
<li>run it: /<where you unzipped REAR to>/usr/sbin/rear -v mkbackup</li>
<li>(probably edit your local.conf first at:
    /<where you unzipped REAR to>/etc/rear/local.conf)</li>
</ul>
<h4 id="acsacpact_commented_at_2015-07-13_1844"><img src="https://avatars.githubusercontent.com/u/13315048?v=4" width="50"><a href="https://github.com/acsacpact">acsacpact</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-121019792">2015-07-13 18:44</a>:<a class="headerlink" href="#acsacpact_commented_at_2015-07-13_1844" title="Permanent link">&para;</a></h4>
<p>Thanks.. its portable package can be run without installing.. Now I
understand...;)</p>
<p>And I have below configuration on the local.conf file. Do I need update
anything else to update the /etc/yaboot.conf to get the my rear boot
image on it? because I donâ€™t see rescue boot image, how we see it on
x86_64 hardware( /boot/grub/menu.lst)..</p>
<p>OUTPUT=ISO<br />
BACKUP=NETFS<br />
BACKUP_URL="nfs://10.192.115.12/as400linux-backup/backup-quality140/"<br />
BACKUP_PROG_INCLUDE=( '/' )<br />
BACKUP_PROG_EXCLUDE=( '/tmp/<em>' '/dev/shm/</em>' '/var/lib/rear/output/<em>'
'/media/</em>' '/as400linux-backup/*' )<br />
BOOT_FROM_SAN=y<br />
AUTOEXCLUDE_MULTIPATH=n</p>
<h4 id="acsacpact_commented_at_2015-07-13_1903"><img src="https://avatars.githubusercontent.com/u/13315048?v=4" width="50"><a href="https://github.com/acsacpact">acsacpact</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-121024130">2015-07-13 19:03</a>:<a class="headerlink" href="#acsacpact_commented_at_2015-07-13_1903" title="Permanent link">&para;</a></h4>
<p>When I check the rear step by step option ,could see the
"/rear-latest/rear-latest/usr/share/rear/output/ISO/Linux-ppc64/30_create_yaboot.sh"
file, but look like it not getting executing it..</p>
<p>Source output/ISO/Linux-ppc64/30_create_yaboot.sh<br />
Source output/ISO/Linux-ppc64/80_create_isofs.sh</p>
<h4 id="acsacpact_commented_at_2015-07-13_1915"><img src="https://avatars.githubusercontent.com/u/13315048?v=4" width="50"><a href="https://github.com/acsacpact">acsacpact</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-121026541">2015-07-13 19:15</a>:<a class="headerlink" href="#acsacpact_commented_at_2015-07-13_1915" title="Permanent link">&para;</a></h4>
<p>On the latest master.zip files, still i could see the following
Linux-ppc64.conf file referen to the wrong path of yaboot command. Can
you check and suggest on the same.</p>
<p>usr/share/rear/conf/Linux-ppc64.conf:/usr/lib/yaboot/yaboot<br />
usr/share/rear/conf/Linux-ppc64.conf:/usr/lib/yaboot/ofboot<br />
usr/share/rear/conf/Linux-ppc64.conf:/usr/lib/yaboot/yaboot.debug<br />
usr/share/rear/conf/Linux-ppc64.conf:/usr/lib/yaboot/addnote</p>
<p>vwdcqv-uxapp140:<s>/rear-latest/rear-latest # usr/sbin/rear -v
mkbackup<br />
Relax-and-Recover 1.17.1 / Git<br />
Using log file:
/root/rear-latest/rear-latest/var/log/rear/rear-vwdcqv-uxapp140.log<br />
Creating disk layout<br />
Creating root filesystem layout<br />
TIP: To login as root via ssh you need to set up
/root/.ssh/authorized_keys or SSH_ROOT_PASSWORD in your configuration
file<br />
Copying files and directories<br />
Copying binaries and libraries<br />
Copying kernel modules<br />
Creating initramfs<br />
Making ISO image<br />
Wrote ISO Image
/root/rear-latest/rear-latest/var/lib/rear/output/rear-vwdcqv-uxapp140.iso
(74M)<br />
Copying resulting files to nfs location<br />
Encrypting disabled<br />
Creating tar archive
'/tmp/rear.d9VJn2WVZ1cq2g6/outputfs/vwdcqv-uxapp140/backup.tar.gz'<br />
Archived 2121 MiB [avg 6664 KiB/sec]OK<br />
Archived 2121 MiB in 327 seconds [avg 6643 KiB/sec]<br />
vwdcqv-uxapp140:</s>/rear-latest/rear-latest #</p>
<h4 id="jayfurmanek_commented_at_2015-07-13_2000"><img src="https://avatars.githubusercontent.com/u/8660918?v=4" width="50"><a href="https://github.com/jayfurmanek">jayfurmanek</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-121038129">2015-07-13 20:00</a>:<a class="headerlink" href="#jayfurmanek_commented_at_2015-07-13_2000" title="Permanent link">&para;</a></h4>
<p>It looks like it's finding a yaboot on your system. What is the contents
of the generated ISO? Is there a yaboot binary on it?</p>
<h4 id="acsacpact_commented_at_2015-07-14_0850"><img src="https://avatars.githubusercontent.com/u/13315048?v=4" width="50"><a href="https://github.com/acsacpact">acsacpact</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-121170454">2015-07-14 08:50</a>:<a class="headerlink" href="#acsacpact_commented_at_2015-07-14_0850" title="Permanent link">&para;</a></h4>
<p>This is what shows in the ISO...</p>
<p>server name:/tmp # cd /reariso/<br />
server name:/reariso # ls -lrt<br />
total 74387<br />
-rw-r--r-- 1 root root 20574055 Jun 14 2013 kernel<br />
-rw------- 1 root root 411830 Jul 13 20:33 yaboot<br />
drwx------ 3 root root 2048 Jul 13 20:33 ppc<br />
-rw-r--r-- 1 root root 55180934 Jul 13 20:33 initrd.cgz<br />
drwx------ 2 root root 2048 Jul 13 20:33 etc<br />
vwdcqv-uxapp140:/reariso # cat etc/yaboot.conf<br />
init-message = "\nRelax-and-Recover boot\n\n"<br />
timeout=100<br />
default=Relax-and-Recover</p>
<p>image=kernel<br />
label=Relax-and-Recover<br />
initrd=initrd.cgz<br />
append=" root=/dev/ram0 LANG=en_US.UTF-8 SYSFONT=latarcyrheb-sun16
KEYTABLE=us console=hvc0 selinux=0"</p>
<p>server name:/reariso #</p>
<h4 id="acsacpact_commented_at_2015-07-14_1653"><img src="https://avatars.githubusercontent.com/u/13315048?v=4" width="50"><a href="https://github.com/acsacpact">acsacpact</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-121306890">2015-07-14 16:53</a>:<a class="headerlink" href="#acsacpact_commented_at_2015-07-14_1653" title="Permanent link">&para;</a></h4>
<p>Can you let me know how to fix the issue.</p>
<p>Regards<br />
Srini</p>
<h4 id="jayfurmanek_commented_at_2015-07-14_1742"><img src="https://avatars.githubusercontent.com/u/8660918?v=4" width="50"><a href="https://github.com/jayfurmanek">jayfurmanek</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-121319575">2015-07-14 17:42</a>:<a class="headerlink" href="#jayfurmanek_commented_at_2015-07-14_1742" title="Permanent link">&para;</a></h4>
<p>Your ISO looks ok to me. Does it boot?</p>
<h4 id="acsacpact_commented_at_2015-07-14_1813"><img src="https://avatars.githubusercontent.com/u/13315048?v=4" width="50"><a href="https://github.com/acsacpact">acsacpact</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-121327506">2015-07-14 18:13</a>:<a class="headerlink" href="#acsacpact_commented_at_2015-07-14_1813" title="Permanent link">&para;</a></h4>
<p>I dont want to test this ISO, I need to boot the same LAPR into rear
recover mode to test the backup.tar.gz can be restored on the same
server.</p>
<p>How in the x86 hardware, when we add the GRUBRESCUE=y in the local.conf
file, the rear -v mkbackup modify the /boot/grub/menu.lst with rear
recover kernel option in that file and we can recover the system and
restore the backup.tar.gz file to the same SuSE Linux system.</p>
<p>similarly I am looking option in the IBM Power LAPR that yaboot.conf
file to get the another boot for the rear recover to restore the backup
to the same LPAR.</p>
<p>Will this supported or not ?</p>
<p>or I need to boot from the rear ISO, then Only I can recover it even the
Same server ?</p>
<h4 id="harikum_commented_at_2015-07-14_2359"><img src="https://avatars.githubusercontent.com/u/13168225?v=4" width="50"><a href="https://github.com/harikum">harikum</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-121431716">2015-07-14 23:59</a>:<a class="headerlink" href="#harikum_commented_at_2015-07-14_2359" title="Permanent link">&para;</a></h4>
<p>@jayfurmanek, Yes i did run a fresh 'mkback' to generate a new ISO after
updating 30_create_yaboot.sh file.</p>
<p>my kernel version is '3.0.101-0.42.1.7881.0.PTF-default, this is updated
on top of a SLES11SP3 build. I didn't have to modify the lpar definition
switch to comparability mode to perform the original builds. Not sure
why this will be required to recover?</p>
<h4 id="jayfurmanek_commented_at_2015-07-15_0714"><img src="https://avatars.githubusercontent.com/u/8660918?v=4" width="50"><a href="https://github.com/jayfurmanek">jayfurmanek</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-121512334">2015-07-15 07:14</a>:<a class="headerlink" href="#jayfurmanek_commented_at_2015-07-15_0714" title="Permanent link">&para;</a></h4>
<p>harikum,<br />
The kernel will negotiate to Power7 mode, but the yaboot bootloader may
be getting confused. Trying it with the entire LPAR set to Power7 mode
might help with your problem.</p>
<h4 id="jayfurmanek_commented_at_2015-07-15_0718"><img src="https://avatars.githubusercontent.com/u/8660918?v=4" width="50"><a href="https://github.com/jayfurmanek">jayfurmanek</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-121512854">2015-07-15 07:18</a>:<a class="headerlink" href="#jayfurmanek_commented_at_2015-07-15_0718" title="Permanent link">&para;</a></h4>
<p>@acsacpact<br />
There is no GRUBRESCUE=y option for yaboot in Rear. You've told Rear to
create an ISO and it did.<br />
You can recover using that ISO to the same LPAR or to a different one
(assuming you are not mounting using UUIDs in the /etc/fstab, which SLES
likes to do by default)</p>
<h4 id="acsacpact_commented_at_2015-07-16_1928"><img src="https://avatars.githubusercontent.com/u/13315048?v=4" width="50"><a href="https://github.com/acsacpact">acsacpact</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-122059984">2015-07-16 19:28</a>:<a class="headerlink" href="#acsacpact_commented_at_2015-07-16_1928" title="Permanent link">&para;</a></h4>
<p>@Jay,</p>
<p>After I reboot the system with my recovered image, getting below error.
Can you suggest how to fix it</p>
<p>Something we need to do to fix the PRep boot image or the boot list.</p>
<p>IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM
IBM<br />
IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM IBM
IBM<br />
PReP-BOOT : Unable to load full PReP image.<br />
Loaded 0 out of 64c00 bytes.</p>
<p>I have attached the rear -v recover output for the reference.</p>
<p>only below warning message in the below output.<br />
"More than five entries cannot be specified in the bootlist"</p>
<p>RESCUE vwdcpv-uxapp131:~ # rear -v recover<br />
Relax-and-Recover 1.17.1 / Git<br />
Using log file: /var/log/rear/rear-vwdcpv-uxapp131.log<br />
NOTICE: Will do driver migration<br />
Calculating backup archive size<br />
Backup archive size is 2.8G
/tmp/rear.k7CO0G7gIOqpn5u/outputfs/vwdcpv-uxapp131/backup.tar.gz
(compressed)<br />
Comparing disks.<br />
Disk configuration is identical, proceeding with restore.<br />
Start system layout restoration.<br />
Creating LVM PV /dev/mapper/36005076300810a318800000000000016<br />
0 logical volume(s) in volume group "appvg" now active<br />
Restoring LVM VG appvg<br />
Creating partitions for disk
/dev/mapper/36005076300810a318800000000000015 (msdos)<br />
Creating swap on /dev/mapper/36005076300810a318800000000000015_part2<br />
Creating ext3-filesystem / on
/dev/mapper/36005076300810a318800000000000015_part3<br />
Mounting filesystem /<br />
Creating ext3-filesystem /usr/local on /dev/mapper/appvg-appvol<br />
Mounting filesystem /usr/local<br />
Disk layout created.<br />
Decrypting disabled<br />
Restoring from
'/tmp/rear.k7CO0G7gIOqpn5u/outputfs/vwdcpv-uxapp131/backup.tar.gz'<br />
Restored 9445 MiB [avg 72721 KiB/sec]OK<br />
Restored 9445 MiB in 134 seconds [avg 72179 KiB/sec]<br />
Installing PPC PReP Boot partition.<br />
Boot partitions found: /dev/sda1<br />
/dev/sdc1<br />
/dev/sde1<br />
/dev/sdg1<br />
/dev/sdi1<br />
/dev/sdk1<br />
/dev/sdm1<br />
/dev/sdo1<br />
/dev/mapper/36005076300810a318800000000000015p1.<br />
Initializing boot partition /dev/sda1.<br />
Initializing boot partition /dev/sdc1.<br />
Initializing boot partition /dev/sde1.<br />
Initializing boot partition /dev/sdg1.<br />
Initializing boot partition /dev/sdi1.<br />
Initializing boot partition /dev/sdk1.<br />
Initializing boot partition /dev/sdm1.<br />
Initializing boot partition /dev/sdo1.<br />
Initializing boot partition
/dev/mapper/36005076300810a318800000000000015p1.<br />
Boot device list is /dev/mapper/36005076300810a318800000000000015p<br />
/dev/sda<br />
/dev/sdc<br />
/dev/sde<br />
/dev/sdg<br />
/dev/sdi<br />
/dev/sdk<br />
/dev/sdm<br />
/dev/sdo.<br />
More than five entries cannot be specified in the bootlist</p>
<p>WARNING ! You are mounting some devices by ID. Please be aware that the
IDs<br />
are hardware dependant and that you might have to adjust your fstab to
match<br />
the new IDs. Currently your system has the following disks with LUN
IDs:<br />
36005076300810a318800000000000015 /dev/sda 109568MB<br />
36005076300810a318800000000000015 /dev/sda1 0MB<br />
36005076300810a318800000000000015 /dev/sda2 2047MB<br />
36005076300810a318800000000000015 /dev/sda3 107325MB<br />
36005076300810a318800000000000016 /dev/sdb 109568MB<br />
36005076300810a318800000000000015 /dev/sdc 109568MB<br />
36005076300810a318800000000000015 /dev/sdc1 0MB<br />
36005076300810a318800000000000015 /dev/sdc2 2047MB<br />
36005076300810a318800000000000015 /dev/sdc3 107325MB<br />
36005076300810a318800000000000016 /dev/sdd 109568MB<br />
36005076300810a318800000000000015 /dev/sde 109568MB<br />
36005076300810a318800000000000015 /dev/sde1 0MB<br />
36005076300810a318800000000000015 /dev/sde2 2047MB<br />
36005076300810a318800000000000015 /dev/sde3 107325MB<br />
36005076300810a318800000000000016 /dev/sdf 109568MB<br />
36005076300810a318800000000000015 /dev/sdg 109568MB<br />
36005076300810a318800000000000015 /dev/sdg1 0MB<br />
36005076300810a318800000000000015 /dev/sdg2 2047MB<br />
36005076300810a318800000000000015 /dev/sdg3 107325MB<br />
36005076300810a318800000000000015 /dev/sdi 109568MB<br />
36005076300810a318800000000000015 /dev/sdi1 0MB<br />
36005076300810a318800000000000015 /dev/sdi2 2047MB<br />
36005076300810a318800000000000015 /dev/sdi3 107325MB<br />
36005076300810a318800000000000016 /dev/sdh 109568MB<br />
36005076300810a318800000000000016 /dev/sdj 109568MB<br />
36005076300810a318800000000000015 /dev/sdk 109568MB<br />
36005076300810a318800000000000015 /dev/sdk1 0MB<br />
36005076300810a318800000000000015 /dev/sdk2 2047MB<br />
36005076300810a318800000000000015 /dev/sdk3 107325MB<br />
36005076300810a318800000000000016 /dev/sdl 109568MB<br />
36005076300810a318800000000000015 /dev/sdm 109568MB<br />
36005076300810a318800000000000015 /dev/sdm1 0MB<br />
36005076300810a318800000000000015 /dev/sdm2 2047MB<br />
36005076300810a318800000000000015 /dev/sdm3 107325MB<br />
36005076300810a318800000000000016 /dev/sdn 109568MB<br />
36005076300810a318800000000000015 /dev/sdo 109568MB<br />
36005076300810a318800000000000015 /dev/sdo1 0MB<br />
36005076300810a318800000000000015 /dev/sdo2 2047MB<br />
36005076300810a318800000000000015 /dev/sdo3 107325MB<br />
36005076300810a318800000000000016 /dev/sdp 109568MB<br />
36005076300810a318800000000000015 /dev/dm-0 109568MB<br />
36005076300810a318800000000000016 /dev/dm-1 109568MB<br />
36005076300810a318800000000000016 /dev/dm-5 109468MB<br />
36005076300810a318800000000000015 /dev/dm-2 0MB<br />
36005076300810a318800000000000015 /dev/dm-3 2047MB<br />
36005076300810a318800000000000015 /dev/dm-4 107325MB</p>
<p>Finished recovering your system. You can explore it under '/mnt/local'.</p>
<p>RESCUE vwdcpv-uxapp131:~ # df -h<br />
Filesystem Size Used Avail Use% Mounted on<br />
/dev/mapper/36005076300810a318800000000000015_part3 104G 3.8G 99G 4%
/mnt/local<br />
/dev/mapper/appvg-appvol 106G 6.1G 95G 6% /mnt/local/usr/local</p>
<h4 id="jayfurmanek_commented_at_2015-07-16_1944"><img src="https://avatars.githubusercontent.com/u/8660918?v=4" width="50"><a href="https://github.com/jayfurmanek">jayfurmanek</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-122067105">2015-07-16 19:44</a>:<a class="headerlink" href="#jayfurmanek_commented_at_2015-07-16_1944" title="Permanent link">&para;</a></h4>
<p>ok, so the ISO worked and you got to the rescue shell..and the recover
functioned.That's good.</p>
<p>Is this on a different system/LPAR than the original? SLES sets up fstab
and bootloader config based on LUN UUID. If the LUNs are different, the
UUIDs will be different. The WARNING in there is referring to that:</p>
<p>WARNING ! You are mounting some devices by ID. Please be aware that the
IDs<br />
are hardware dependant and that you might have to adjust your fstab to
match<br />
the new IDs. Currently your system has the following disks with LUN IDs:</p>
<p>Can you post the yaboot.conf you are using (the one that gets put on the
recovered system)?</p>
<h4 id="jayfurmanek_commented_at_2015-07-16_1956"><img src="https://avatars.githubusercontent.com/u/8660918?v=4" width="50"><a href="https://github.com/jayfurmanek">jayfurmanek</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-122070567">2015-07-16 19:56</a>:<a class="headerlink" href="#jayfurmanek_commented_at_2015-07-16_1956" title="Permanent link">&para;</a></h4>
<p>@acsacpact<br />
Can you open a new issue for this? You've verified that the fix for
issue #610 does indeed work. It's likely you are having a multipath/SAN
boot issue now. Thanks!</p>
<h4 id="acsacpact_commented_at_2015-07-16_2024"><img src="https://avatars.githubusercontent.com/u/13315048?v=4" width="50"><a href="https://github.com/acsacpact">acsacpact</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-122079039">2015-07-16 20:24</a>:<a class="headerlink" href="#acsacpact_commented_at_2015-07-16_2024" title="Permanent link">&para;</a></h4>
<p>@Jay,</p>
<p>After I do the automatic repair of the system while boot from the OS
DVD, server booted normally now.. Thanks for the support..</p>
<p>I hope rear recover not writing the boot loader correctly to the disk.</p>
<h4 id="jay_commented_at_2015-07-16_2029"><img src="https://avatars.githubusercontent.com/u/965580?v=4" width="50"><a href="https://github.com/jay">jay</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-122080251">2015-07-16 20:29</a>:<a class="headerlink" href="#jay_commented_at_2015-07-16_2029" title="Permanent link">&para;</a></h4>
<p>@acsacpact Can you please not @jay , the github notification system
requires the full username.</p>
<h4 id="gdha_commented_at_2015-07-24_0939"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-124457055">2015-07-24 09:39</a>:<a class="headerlink" href="#gdha_commented_at_2015-07-24_0939" title="Permanent link">&para;</a></h4>
<p>@acsacpact can we close this issue?</p>
<h4 id="acsacpact_commented_at_2015-07-24_1327"><img src="https://avatars.githubusercontent.com/u/13315048?v=4" width="50"><a href="https://github.com/acsacpact">acsacpact</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-124520347">2015-07-24 13:27</a>:<a class="headerlink" href="#acsacpact_commented_at_2015-07-24_1327" title="Permanent link">&para;</a></h4>
<p>@gdha<br />
Yes.. thank you</p>
<h4 id="ihidouri_commented_at_2016-11-18_1154"><img src="https://avatars.githubusercontent.com/u/23553727?v=4" width="50"><a href="https://github.com/ihidouri">ihidouri</a> commented at <a href="https://github.com/rear/rear/issues/610#issuecomment-261515072">2016-11-18 11:54</a>:<a class="headerlink" href="#ihidouri_commented_at_2016-11-18_1154" title="Permanent link">&para;</a></h4>
<p>hello, please I'm facing the same issue, and I'm trying to find the
solution between all these comments...<br />
My Power8 LPAR couldn't boot with ISo rear mkrescue (Detected bad memory
access to address: ffffffffffffffff Package path = /packages/boot-mgr)</p>
<p>With vmware VMs have no problem.</p>
<p>Thank you</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2024 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2015-07-03.610.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
