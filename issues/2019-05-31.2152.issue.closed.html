<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#2152 Issue closed: Bacula support for "bacula-enterprise-client" RPMs (different file locations) - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#2152 Issue closed: Bacula support for \"bacula-enterprise-client\" RPMs (different file locations)";
        var mkdocs_page_input_path = "issues/2019-05-31.2152.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#2152 Issue closed: Bacula support for "bacula-enterprise-client" RPMs (different file locations)</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="2152_issue_closed_bacula_support_for_bacula-enterprise-client_rpms_different_file_locations"><a href="https://github.com/rear/rear/issues/2152">#2152 Issue</a> <code>closed</code>: Bacula support for "bacula-enterprise-client" RPMs (different file locations)<a class="headerlink" href="#2152_issue_closed_bacula_support_for_bacula-enterprise-client_rpms_different_file_locations" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>fixed / solved / done</code>, <code>external tool</code></p>
<h4 id="linuxdan_opened_issue_at_2019-05-31_1827"><img src="https://avatars.githubusercontent.com/u/969909?v=4" width="50"><a href="https://github.com/linuxdan">linuxdan</a> opened issue at <a href="https://github.com/rear/rear/issues/2152">2019-05-31 18:27</a>:<a class="headerlink" href="#linuxdan_opened_issue_at_2019-05-31_1827" title="Permanent link">&para;</a></h4>
<h4 id="relax-and-recover_rear_issue_template">Relax-and-Recover (ReaR) Issue Template<a class="headerlink" href="#relax-and-recover_rear_issue_template" title="Permanent link">&para;</a></h4>
<p>Fill in the following items before submitting a new issue<br />
(quick response is not guaranteed with free support):</p>
<ul>
<li>
<p>ReaR version ("/usr/sbin/rear -V"):<br />
    2.4 / Git</p>
</li>
<li>
<p>OS version ("cat /etc/rear/os.conf" or "lsb_release -a" or "cat
    /etc/os-release"):<br />
    CentOS 7 (RedHatEnterpriseServer 7)</p>
</li>
<li>
<p>ReaR configuration files ("cat /etc/rear/site.conf" and/or "cat
    /etc/rear/local.conf"):<br />
    local.conf =<br />
    BACKUP=BACULA<br />
    OUTPUT=ISO</p>
</li>
<li>
<p>Hardware (PC or PowerNV BareMetal or ARM) or virtual machine (KVM
    guest or PoverVM LPAR):<br />
    Dell Precision Tower 3620</p>
</li>
<li>
<p>System architecture (x86 compatible or PPC64/PPC64LE or what exact
    ARM device):<br />
    x86_64</p>
</li>
<li>
<p>Firmware (BIOS or UEFI or Open Firmware) and bootloader (GRUB or
    ELILO or Petitboot):<br />
    BIOS</p>
</li>
<li>
<p>Storage (local disk or SSD) and/or SAN (FC or iSCSI or FCoE) and/or
    multipath (DM or NVMe):<br />
    local disks</p>
</li>
<li>
<p>Description of the issue (ideally so that others can reproduce
    it):<br />
    Does not work with bacula-enterprise-client - specifically
    bacula-enterprise-client-8.8.6-1.el7.x86_64<br />
    Looking for binaries and config files in the wrong location.<br />
    Perhaps these are for open-source Bacula.<br />
    I will check that out.</p>
</li>
<li>
<p>Workaround, if any:<br />
    Multiple file edits.</p>
</li>
</ul>
<!-- -->

<pre><code>diff -btwr usr/share/rear/prep/BACULA/default/450_check_BACULA_client_configured.sh /usr/share/rear/prep/BACULA/default/450_check_BACULA_client_configured.sh
10c10
&lt;    [ -s /etc/bacula/bacula-sd.conf ]
---
&gt;    [ -s /opt/bacula/etc/bacula-fd.conf ]
19c19
&lt;    [ -s /etc/bacula/bacula-fd.conf ]
---
&gt;    [ -s /opt/bacula/etc/bacula-fd.conf ]
25c25
&lt;    [ -s /etc/bacula/bconsole.conf ]
---
&gt;    [ -s /opt/bacula/etc/bconsole.conf ]
diff -btwr usr/share/rear/prep/BACULA/default/500_check_BACULA_bconsole_results.sh /usr/share/rear/prep/BACULA/default/500_check_BACULA_bconsole_results.sh
14,15c14,15
&lt; # is the director server present? Fetch from /etc/bacula/bconsole.conf file
&lt; BACULA_DIRECTOR=$(grep -i address /etc/bacula/bconsole.conf | awk '{ print $3 }')
---
&gt; # is the director server present? Fetch from /opt/bacula/etc/bconsole.conf file
&gt; BACULA_DIRECTOR=$(grep -i address /opt/bacula/etc/bconsole.conf | awk '{ print $3 }')
17c17
&lt; StopIfError "Director not defined in /etc/bacula/bconsole.conf"
---
&gt; StopIfError "Director not defined in /opt/bacula/etc/bconsole.conf
32c32
&lt; BACULA_CLIENT=`grep $(hostname -s) /etc/bacula/bacula-fd.conf | grep "\-fd" | awk '{print $3}' | sed -e "s/-fd//g"`
---
&gt; BACULA_CLIENT=`grep $(hostname -s) /opt/bacula/etc/bacula-fd.conf | grep "\-fd" | awk '{print $3}' | sed -e "s/-fd//g"`
34c34
&lt; StopIfError "Client $(hostname -s) not defined in /etc/bacula/bacula-fd.conf"
---
&gt; StopIfError "Client $(hostname -s) not defined in /opt/bacula/etc/bacula-fd.conf
diff -btwr usr/share/rear/verify/BACULA/default/050_check_requirements.sh /usr/share/rear/verify/BACULA/default/050_check_requirements.sh
22c22
&lt;    [ -x /usr/sbin/bacula-fd ]
---
&gt;    [ -x /opt/bacula/bin/bacula-fd ]
25c25
&lt;    [ -s /etc/bacula/bacula-fd.conf ]
---
&gt;    [ -s /opt/bacula/etc/bacula-fd.conf ]
28c28
&lt;    [ -x /usr/sbin/bconsole ]
---
&gt;    [ -x /opt/bacula/bin/bconsole ]
31c31
&lt;    [ -s /etc/bacula/bconsole.conf ]
---
&gt;    [ -s /opt/bacula/etc/bconsole.conf ]
diff -btwr usr/share/rear/verify/BACULA/default/100_start_bacula-fd.sh /usr/share/rear/verify/BACULA/default/100_start_bacula-fd.sh
16c16
&lt;    bacula-fd -u root -g bacula -c /etc/bacula/bacula-fd.conf
---
&gt;    /opt/bacula/bin/bacula-fd -u root -g bacula -c /opt/bacula/etc/bacula-fd.conf
</code></pre>
<ul>
<li>Attachments, as applicable ("rear -D mkrescue/mkbackup/recover"
    debug log files):</li>
</ul>
<h4 id="linuxdan_commented_at_2019-05-31_1841"><img src="https://avatars.githubusercontent.com/u/969909?v=4" width="50"><a href="https://github.com/linuxdan">linuxdan</a> commented at <a href="https://github.com/rear/rear/issues/2152#issuecomment-497818978">2019-05-31 18:41</a>:<a class="headerlink" href="#linuxdan_commented_at_2019-05-31_1841" title="Permanent link">&para;</a></h4>
<p>I checked and found the alternate file paths in CentOS - bacula-client
and bacula-console</p>
<p>So my guess appears accurate. Open source bacula and bacula enterprise
put things in different locations.</p>
<p>What would be easier ?<br />
Making a separate BACKUP type like ENT_BACULA<br />
or<br />
adding code to BACULA to look in two locations ?</p>
<h4 id="linuxdan_commented_at_2019-05-31_1849"><img src="https://avatars.githubusercontent.com/u/969909?v=4" width="50"><a href="https://github.com/linuxdan">linuxdan</a> commented at <a href="https://github.com/rear/rear/issues/2152#issuecomment-497821593">2019-05-31 18:49</a>:<a class="headerlink" href="#linuxdan_commented_at_2019-05-31_1849" title="Permanent link">&para;</a></h4>
<p>Red Hat RPM's use the same paths as CentOS</p>
<h4 id="jsmeix_commented_at_2019-06-03_1026"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2152#issuecomment-498201997">2019-06-03 10:26</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-06-03_1026" title="Permanent link">&para;</a></h4>
<p>I do not use Bacula or any other third-party backup tools.<br />
Therefore I can neither reproduce such issues<br />
nor can I verify what could actually fix it.</p>
<p>@gdha<br />
do you perhaps know someone who could help<br />
with issues in case of <code>BACKUP=BACULA</code><br />
(ideally a Bacula developer from Bacula.org)?</p>
<p>@linuxdan<br />
my offhanded preference is to add code to BACULA to look in two
locations<br />
because I think in both cases it is basically "the same Bacula
software"<br />
where only the files are installed at different locations.</p>
<p>I think a separate BACKUP type like ENT_BACULA would only make sense<br />
if the bacula-enterprise-client software would behave substantially
different<br />
compared to what is currently implemented for BACKUP=BACULA.</p>
<p>I would prefer a generic future-proof solution with additional config
variables<br />
in usr/share/rear/conf/default.conf where Bacula directories are
specified,<br />
for example something like</p>
<pre><code># For bacula-enterprise-client use BACULA_CONF_DIR="/opt/bacula/etc"
BACULA_CONF_DIR="/etc/bacula"
# For bacula-enterprise-client use BACULA_BIN_DIR="/opt/bacula/bin"
BACULA_BIN_DIR="/usr/sbin"
</code></pre>
<p>or even with automated setting of the right values like</p>
<pre><code>BACULA_CONF_DIR="/etc/bacula"
# bacula-enterprise-client uses /opt/bacula/etc
test -d "/opt/bacula/etc" &amp;&amp; BACULA_CONF_DIR="/opt/bacula/etc"
BACULA_BIN_DIR="/usr/sbin"
# bacula-enterprise-client uses /opt/bacula/bin
test -d "/opt/bacula/bin" &amp;&amp; BACULA_BIN_DIR="/opt/bacula/bin"
</code></pre>
<p>You can run code as you like in usr/share/rear/conf/default.conf<br />
because in ReaR also config files are sourced and executed<br />
as bash scripts, e.g. see how REAL_MACHINE is set in default.conf</p>
<h4 id="jsmeix_commented_at_2019-06-03_1034"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2152#issuecomment-498204268">2019-06-03 10:34</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-06-03_1034" title="Permanent link">&para;</a></h4>
<p>@linuxdan<br />
is your first change from <code>bacula-sd.conf</code> to <code>bacula-fd.conf</code> in</p>
<pre><code>diff -btwr usr/share/rear/prep/BACULA/default/450_check_BACULA_client_configured.sh /usr/share/rear/prep/BACULA/default/450_check_BACULA_client_configured.sh
10c10
&lt;    [ -s /etc/bacula/bacula-sd.conf ]
---
&gt;    [ -s /opt/bacula/etc/bacula-fd.conf ]
</code></pre>
<p>intentionally or is it perhaps a typo?</p>
<h4 id="gdha_commented_at_2019-06-03_1255"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/2152#issuecomment-498244676">2019-06-03 12:55</a>:<a class="headerlink" href="#gdha_commented_at_2019-06-03_1255" title="Permanent link">&para;</a></h4>
<p>@jsmeix I have no knowledge of any Bacula user ( is over 10 years ago I
used it ). Indeed the proposed solution with the BACULA_BIN_DIR
setting looks the correct way to go for. Preferably automatically
detected via a prep script.<br />
Is this something @linuxdan could try out and propare a PR for it?</p>
<h4 id="linuxdan_commented_at_2019-06-03_1334"><img src="https://avatars.githubusercontent.com/u/969909?v=4" width="50"><a href="https://github.com/linuxdan">linuxdan</a> commented at <a href="https://github.com/rear/rear/issues/2152#issuecomment-498258687">2019-06-03 13:34</a>:<a class="headerlink" href="#linuxdan_commented_at_2019-06-03_1334" title="Permanent link">&para;</a></h4>
<blockquote>
<p>@linuxdan<br />
is your first change from <code>bacula-sd.conf</code> to <code>bacula-fd.conf</code> in</p>
<pre><code>diff -btwr usr/share/rear/prep/BACULA/default/450_check_BACULA_client_configured.sh /usr/share/rear/prep/BACULA/default/450_check_BACULA_client_configured.sh
10c10
&lt;    [ -s /etc/bacula/bacula-sd.conf ]
---
&gt;    [ -s /opt/bacula/etc/bacula-fd.conf ]
</code></pre>
<p>intentionally or is it perhaps a typo?</p>
</blockquote>
<p>That's a typo. Sharp eyes.</p>
<p>Thanks.</p>
<h4 id="linuxdan_commented_at_2019-06-03_1341"><img src="https://avatars.githubusercontent.com/u/969909?v=4" width="50"><a href="https://github.com/linuxdan">linuxdan</a> commented at <a href="https://github.com/rear/rear/issues/2152#issuecomment-498261383">2019-06-03 13:41</a>:<a class="headerlink" href="#linuxdan_commented_at_2019-06-03_1341" title="Permanent link">&para;</a></h4>
<blockquote>
<p>@jsmeix I have no knowledge of any Bacula user ( is over 10 years ago
I used it ). Indeed the proposed solution with the BACULA_BIN_DIR
setting looks the correct way to go for. Preferably automatically
detected via a prep script.<br />
Is this something @linuxdan could try out and prepare a PR for it?</p>
</blockquote>
<p>I am willing to give it a try.<br />
I have already identified all the places BACULA_BIN_DIR and
BACULA_CONF_DIR are needed.<br />
All I need is a clue or three about how to set up a prep script.</p>
<h4 id="linuxdan_commented_at_2019-06-03_1342"><img src="https://avatars.githubusercontent.com/u/969909?v=4" width="50"><a href="https://github.com/linuxdan">linuxdan</a> commented at <a href="https://github.com/rear/rear/issues/2152#issuecomment-498261826">2019-06-03 13:42</a>:<a class="headerlink" href="#linuxdan_commented_at_2019-06-03_1342" title="Permanent link">&para;</a></h4>
<p>Unfortunately, I have no spare time to work this for the next two
weeks.<br />
Can it wait that long ?</p>
<h4 id="jsmeix_commented_at_2019-06-04_0627"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2152#issuecomment-498539028">2019-06-04 06:27</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-06-04_0627" title="Permanent link">&para;</a></h4>
<p>@linuxdan<br />
no worries - no rush - it can wait as long as you need.<br />
Apparently you are currently the only one<br />
who uses ReaR with bacula-enterprise-client.</p>
<h4 id="jsmeix_commented_at_2019-06-05_0919"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2152#issuecomment-499006517">2019-06-05 09:19</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-06-05_0919" title="Permanent link">&para;</a></h4>
<p>@gdha<br />
regarding</p>
<pre><code>Preferably automatically detected via a prep script
</code></pre>
<p>in your
<a href="https://github.com/rear/rear/issues/2152#issuecomment-498244676">https://github.com/rear/rear/issues/2152#issuecomment-498244676</a></p>
<p>If we do the automated settings directly in default.conf as in<br />
<a href="https://github.com/rear/rear/issues/2152#issuecomment-498201997">https://github.com/rear/rear/issues/2152#issuecomment-498201997</a><br />
the whole code is simpler because default.conf is sourced before<br />
etc/rear/local.conf so that the user can enforce his own settings.</p>
<p>If we do the automated settings in a prep script<br />
e.g. at the beginning of the existing BACULA specific<br />
usr/share/rear/prep/BACULA/default/400_prep_bacula.sh<br />
the code gets more complicated because the prep script<br />
is sourced after both default.conf and etc/rear/local.conf<br />
were sourced so that special stuff is needed to be able to<br />
distingush the default case where automated settings should happen<br />
from the case where the user had specified the values in
etc/rear/local.conf<br />
so that no automated settings should happen in the prep script<br />
(ReaR must obey what its user has explicity specifed).</p>
<p>The usual way how to distingush the default case<br />
from the user specified case is that by default<br />
config variables are set to an empty value.</p>
<p>So we would have in default.conf</p>
<pre><code># If empty BACULA_CONF_DIR and BACULA_BIN_DIR
# are automatically set in
# prep/BACULA/default/400_prep_bacula.sh
# Usually BACULA_CONF_DIR is "/etc/bacula"
# but for bacula-enterprise-client it is "/opt/bacula/etc"
# Usually BACULA_BIN_DIR is "/usr/sbin"
# but for bacula-enterprise-client it is "/opt/bacula/bin"
BACULA_CONF_DIR=""
BACULA_BIN_DIR=""
</code></pre>
<p>and in prep/BACULA/default/400_prep_bacula.sh<br />
something like</p>
<pre><code>if ! test $BACULA_CONF_DIR ; then
    BACULA_CONF_DIR="/etc/bacula"
    # bacula-enterprise-client uses /opt/bacula/etc
    test -d "/opt/bacula/etc" &amp;&amp; BACULA_CONF_DIR="/opt/bacula/etc"   
fi
if ! test $BACULA_BIN_DIR ; then
    BACULA_BIN_DIR="/usr/sbin"
    # bacula-enterprise-client uses /opt/bacula/bin
    test -d "/opt/bacula/bin" &amp;&amp; BACULA_BIN_DIR="/opt/bacula/bin"
fi
</code></pre>
<p>or better in compliance with "Try to care about possible errors"<br />
in
<a href="https://github.com/rear/rear/wiki/Coding-Style">https://github.com/rear/rear/wiki/Coding-Style</a><br />
in 400_prep_bacula.sh something like</p>
<pre><code>if ! test -d "$BACULA_CONF_DIR" ; then
    test -d "/etc/bacula" &amp;&amp; BACULA_CONF_DIR="/etc/bacula"
    # bacula-enterprise-client uses /opt/bacula/etc
    test -d "/opt/bacula/etc" &amp;&amp; BACULA_CONF_DIR="/opt/bacula/etc"   
fi
test -d "$BACULA_CONF_DIR" || Error "No BACULA_CONF_DIR"
if ! test -d "$BACULA_BIN_DIR" ; then
    BACULA_BIN_DIR="/usr/sbin"
    # bacula-enterprise-client uses /opt/bacula/bin
    test -d "/opt/bacula/bin" &amp;&amp; BACULA_BIN_DIR="/opt/bacula/bin"
fi
</code></pre>
<h4 id="jsmeix_commented_at_2019-06-05_0920"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2152#issuecomment-499006896">2019-06-05 09:20</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-06-05_0920" title="Permanent link">&para;</a></h4>
<p>@linuxdan<br />
see
<a href="https://github.com/rear/rear/issues/2152#issuecomment-499006517">https://github.com/rear/rear/issues/2152#issuecomment-499006517</a><br />
for "a clue or three about how to set up a prep script".</p>
<h4 id="github-actions_commented_at_2020-06-29_0137"><img src="https://avatars.githubusercontent.com/in/15368?v=4" width="50"><a href="https://github.com/apps/github-actions">github-actions</a> commented at <a href="https://github.com/rear/rear/issues/2152#issuecomment-650857788">2020-06-29 01:37</a>:<a class="headerlink" href="#github-actions_commented_at_2020-06-29_0137" title="Permanent link">&para;</a></h4>
<p>Stale issue message</p>
<h4 id="vn1977_commented_at_2020-11-23_1457"><img src="https://avatars.githubusercontent.com/u/25663601?v=4" width="50"><a href="https://github.com/VN1977">VN1977</a> commented at <a href="https://github.com/rear/rear/issues/2152#issuecomment-732213935">2020-11-23 14:57</a>:<a class="headerlink" href="#vn1977_commented_at_2020-11-23_1457" title="Permanent link">&para;</a></h4>
<p>Hello!<br />
I have the same problem. Can you return to it and solve at last?</p>
<h4 id="gdha_commented_at_2020-11-23_1516"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/2152#issuecomment-732225919">2020-11-23 15:16</a>:<a class="headerlink" href="#gdha_commented_at_2020-11-23_1516" title="Permanent link">&para;</a></h4>
<p>@VN1977 We do not use (enterprise) bacula whatsoever, so do not expect
from us to blindly change code which cannot be tested.<br />
Therefore, may I propose if you can prepare a pull request for the
needed changes?</p>
<h4 id="vn1977_commented_at_2020-11-23_1822"><img src="https://avatars.githubusercontent.com/u/25663601?v=4" width="50"><a href="https://github.com/VN1977">VN1977</a> commented at <a href="https://github.com/rear/rear/issues/2152#issuecomment-732341259">2020-11-23 18:22</a>:<a class="headerlink" href="#vn1977_commented_at_2020-11-23_1822" title="Permanent link">&para;</a></h4>
<p>Sure i can add pull request.<br />
And want to clarify that i use community edition not enterprise.</p>
<p>Regards, Vladimir</p>
<h4 id="linuxdan_commented_at_2020-11-23_1921"><img src="https://avatars.githubusercontent.com/u/969909?v=4" width="50"><a href="https://github.com/linuxdan">linuxdan</a> commented at <a href="https://github.com/rear/rear/issues/2152#issuecomment-732372876">2020-11-23 19:21</a>:<a class="headerlink" href="#linuxdan_commented_at_2020-11-23_1921" title="Permanent link">&para;</a></h4>
<p>This issue was for the Enterprise Bacula client.</p>
<h4 id="vn1977_commented_at_2020-11-23_2006"><img src="https://avatars.githubusercontent.com/u/25663601?v=4" width="50"><a href="https://github.com/VN1977">VN1977</a> commented at <a href="https://github.com/rear/rear/issues/2152#issuecomment-732396649">2020-11-23 20:06</a>:<a class="headerlink" href="#vn1977_commented_at_2020-11-23_2006" title="Permanent link">&para;</a></h4>
<p>Sorry i see.<br />
If it's possible to continue here I try to explain the problem because
it's<br />
connected with community edition too.<br />
According to this manual<br />
<a href="https://www.bacula.org/whitepapers/CommunityInstallationGuide.pdf">https://www.bacula.org/whitepapers/CommunityInstallationGuide.pdf</a>
community<br />
version is installed to /opt/bacula, so it could be two places where
config<br />
and bin files live. For RPM version 5 default path was /etc/bacula but<br />
current RPMs compiled differently. Of cource I can compile the new
custom<br />
RPM with /etc/bacula to comply rear.</p>
<p>Regards, Vladimir</p>
<h4 id="vn1977_commented_at_2020-11-24_0822"><img src="https://avatars.githubusercontent.com/u/25663601?v=4" width="50"><a href="https://github.com/VN1977">VN1977</a> commented at <a href="https://github.com/rear/rear/issues/2152#issuecomment-732735693">2020-11-24 08:22</a>:<a class="headerlink" href="#vn1977_commented_at_2020-11-24_0822" title="Permanent link">&para;</a></h4>
<p>I honestly tried to create a new pull request but didn't understand how
to do it. It was my first expirience.</p>
<h4 id="gdha_commented_at_2020-11-24_0849"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/2152#issuecomment-732749551">2020-11-24 08:49</a>:<a class="headerlink" href="#gdha_commented_at_2020-11-24_0849" title="Permanent link">&para;</a></h4>
<p>@VN1977 See Contributing section of
<a href="http://relax-and-recover.org/development/">http://relax-and-recover.org/development/</a><br />
If it is unclear please let us know</p>
<h4 id="vn1977_commented_at_2020-11-24_0922"><img src="https://avatars.githubusercontent.com/u/25663601?v=4" width="50"><a href="https://github.com/VN1977">VN1977</a> commented at <a href="https://github.com/rear/rear/issues/2152#issuecomment-732768007">2020-11-24 09:22</a>:<a class="headerlink" href="#vn1977_commented_at_2020-11-24_0922" title="Permanent link">&para;</a></h4>
<p>Yes, it's unclear. I never worked with git and created pull requests. I
thought that creating it similar to posting issues</p>
<h4 id="gdha_commented_at_2020-12-09_1332"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/2152#issuecomment-741772747">2020-12-09 13:32</a>:<a class="headerlink" href="#gdha_commented_at_2020-12-09_1332" title="Permanent link">&para;</a></h4>
<p>@linuxdan @VN1977 Could you have a look at the comments from @jsmeix -
<a href="https://github.com/rear/rear/pull/2535#issuecomment-741769548">https://github.com/rear/rear/pull/2535#issuecomment-741769548</a><br />
And, provide the required feedback what the best approach is according
you?</p>
<h4 id="linuxdan_commented_at_2020-12-09_2147"><img src="https://avatars.githubusercontent.com/u/969909?v=4" width="50"><a href="https://github.com/linuxdan">linuxdan</a> commented at <a href="https://github.com/rear/rear/issues/2152#issuecomment-742083800">2020-12-09 21:47</a>:<a class="headerlink" href="#linuxdan_commented_at_2020-12-09_2147" title="Permanent link">&para;</a></h4>
<blockquote>
<p>@linuxdan @VN1977 Could you have a look at the comments from @jsmeix -
<a href="https://github.com/rear/rear/pull/2535#issuecomment-741769548">#2535
(comment)</a><br />
And, provide the required feedback what the best approach is according
you?</p>
</blockquote>
<p>That is a completely different issue that this one.<br />
I would have to re-investigate the source code.<br />
Is anyone planning to help see this issue reaches a fix ?</p>
<h4 id="linuxdan_commented_at_2020-12-09_2152"><img src="https://avatars.githubusercontent.com/u/969909?v=4" width="50"><a href="https://github.com/linuxdan">linuxdan</a> commented at <a href="https://github.com/rear/rear/issues/2152#issuecomment-742086154">2020-12-09 21:52</a>:<a class="headerlink" href="#linuxdan_commented_at_2020-12-09_2152" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Sorry i see. If it's possible to continue here I try to explain the
problem because it's connected with community edition too. According
to this manual
<a href="https://www.bacula.org/whitepapers/CommunityInstallationGuide.pdf">https://www.bacula.org/whitepapers/CommunityInstallationGuide.pdf</a>
community version is installed to /opt/bacula, so it could be two
places where config and bin files live. For RPM version 5 default path
was /etc/bacula but current RPMs compiled differently. Of cource I can
compile the new custom RPM with /etc/bacula to comply rear. Regards,
Vladimir</p>
</blockquote>
<p>That guide is dated 2018 and refers to apt commands for installing. I am
working with CentOS/RHEL systems. The community RPM installs to
/etc/bacula</p>
<p>Try installing it on a CentOS system or just look at the contents of the
CentOS RPM.</p>
<h4 id="vn1977_commented_at_2020-12-10_0618"><img src="https://avatars.githubusercontent.com/u/25663601?v=4" width="50"><a href="https://github.com/VN1977">VN1977</a> commented at <a href="https://github.com/rear/rear/issues/2152#issuecomment-742268243">2020-12-10 06:18</a>:<a class="headerlink" href="#vn1977_commented_at_2020-12-10_0618" title="Permanent link">&para;</a></h4>
<p>This guide is about Centos 6 and 7 too. Look for page 6 for instance. I
work with CentOS 7.<br />
If you don't like guides look at<br />
<a href="https://www.bacula.lat/script-installation-bacula-community-9-x-official-packages/?lang=en">https://www.bacula.lat/script-installation-bacula-community-9-x-official-packages/?lang=en</a><br />
Community version installs to /opt at least 9.6, try to deploy test lab.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2025 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2019-05-31.2152.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
