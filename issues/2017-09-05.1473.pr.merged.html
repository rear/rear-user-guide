<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#1473 PR merged: Use meaningful variable names for automated UserInput - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#1473 PR merged: Use meaningful variable names for automated UserInput";
        var mkdocs_page_input_path = "issues/2017-09-05.1473.pr.merged.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_nas.html">Internal Backup with tar to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/rbme.html">External Backup using RBME</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/restic.html">External Backup using restic</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../development/squash-git-log-commments.html">How to squash git log comments into one line</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#1473 PR merged: Use meaningful variable names for automated UserInput</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="1473_pr_merged_use_meaningful_variable_names_for_automated_userinput"><a href="https://github.com/rear/rear/pull/1473">#1473 PR</a> <code>merged</code>: Use meaningful variable names for automated UserInput<a class="headerlink" href="#1473_pr_merged_use_meaningful_variable_names_for_automated_userinput" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>cleanup</code>, <code>fixed / solved / done</code></p>
<h4 id="jsmeix_opened_issue_at_2017-09-05_1436"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> opened issue at <a href="https://github.com/rear/rear/pull/1473">2017-09-05 14:36</a>:<a class="headerlink" href="#jsmeix_opened_issue_at_2017-09-05_1436" title="Permanent link">&para;</a></h4>
<p>Now each UserInput function call requires<br />
a specified '-I user_input_ID' option and<br />
the autogenerated user_input_ID is gone.</p>
<p>Now the user_input_ID option value can and must be<br />
a valid bash variable name e.g. 'choose_replacement_disk'<br />
so that the user can (if he wants) specify a variable named<br />
UserInput_choose_replacement_disk<br />
(i.e. the user_input_ID option value with prefix 'UserInput_')<br />
where its value is used as automated input.</p>
<p>This way meaningful variable names for automated UserInput<br />
are implemented in a generic way using plain bash syntax<br />
without any restriction how the user needs to specify<br />
his particular automated input settings.</p>
<p>The user can do this statically in his local.conf like<br />
UserInput_choose_replacement_disk="/dev/sda"<br />
or via whatever sophisticated scripting magic as he likes<br />
(e.g. also local.conf is sourced and executed as a script).</p>
<h4 id="jsmeix_commented_at_2017-09-05_1444"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1473#issuecomment-327198110">2017-09-05 14:44</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-09-05_1444" title="Permanent link">&para;</a></h4>
<p>@gozora<br />
I used in your restore/BORG/default/300_load_archives.sh</p>
<pre>
UserInput -I BORGBACKUP_archive_to_recover ...
</pre>

<p>but I think the user input there is run in a loop where the user<br />
can add several BorgBackup archives to restore.<br />
With a fixed UserInput_BORGBACKUP_archive_to_recover<br />
variable value only one automated user input is currently possible<br />
(which is already better than no automated user input before ;-)<br />
but I think you need to enhance that script so that for each<br />
UserInput call a different '-I user_input_ID' option is used<br />
e.g. with a trailing number</p>
<pre>
UserInput -I BORGBACKUP_archive_to_recover_1 ...
UserInput -I BORGBACKUP_archive_to_recover_2 ...
UserInput -I BORGBACKUP_archive_to_recover_3 ...
...
</pre>

<p>so that the user can specify as many BorgBackup archives<br />
as he needs e.g. via</p>
<pre>
UserInput_BORGBACKUP_archive_to_recover_1="archive1"
UserInput_BORGBACKUP_archive_to_recover_1="archive2"
UserInput_BORGBACKUP_archive_to_recover_1="archive3"
...
</pre>

<h4 id="jsmeix_commented_at_2017-09-05_1445"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1473#issuecomment-327198636">2017-09-05 14:45</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-09-05_1445" title="Permanent link">&para;</a></h4>
<p>@schabrolles<br />
in your prepare/GNU/Linux/210_load_multipath.sh I used</p>
<pre>
UserInput -I multipath_failed_to_list_device ...
</pre>

<p>Please comment if that '-I user_input_ID' option value<br />
is o.k. for you or if you prefer a different one.</p>
<h4 id="jsmeix_commented_at_2017-09-05_1502"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1473#issuecomment-327203840">2017-09-05 15:02</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-09-05_1502" title="Permanent link">&para;</a></h4>
<p>Intentionally I named the UserInput and my other new functions<br />
for user input and output as the existing functions for user output<br />
were named in ReaR so that all functions for user I/O<br />
are named consistently.<br />
I cannot clean up all the syntactical mess in ReaR.<br />
I like to implement actual functionality but it feels as if<br />
I do most of my time clean up mess that is not from me.<br />
I wished I could clean up e.g. function names via script<br />
but function names like 'Print' make that impossible for me<br />
because I cannot do a semantics testing script because<br />
one cannot simply replace all 'Print' with 'print' - and 'print'<br />
(the lowercase word) is a too simple/generic word so that<br />
it should not be used as a ReaR-specific (function) name.</p>
<h4 id="jsmeix_commented_at_2017-09-05_1510"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1473#issuecomment-327206449">2017-09-05 15:10</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-09-05_1510" title="Permanent link">&para;</a></h4>
<p>I think it is misleading to lowercase things that are used<br />
like "proper names" for example things like<br />
EFI, USB, SELinux, DRBD, NBKDC.</p>
<p>Perhaps BORGBACKUP should be even correctly<br />
spelled BorgBackup but somewhere we decided<br />
to use all-caps for config variables and that is<br />
wherefrom to took BORGBACKUP.</p>
<p>None of the non-lowercase spellings is my own spelling.<br />
I carefully tried to use "correct" spelling - whatever "correct"<br />
might actually mean in each particular case.</p>
<h4 id="gozora_commented_at_2017-09-05_1512"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/pull/1473#issuecomment-327207147">2017-09-05 15:12</a>:<a class="headerlink" href="#gozora_commented_at_2017-09-05_1512" title="Permanent link">&para;</a></h4>
<p>Hello @jsmeix,</p>
<blockquote>
<p>but I think the user input there is run in a loop where the user<br />
can add several BorgBackup archives to restore.</p>
</blockquote>
<p>Wrong ;-), and thank you for teaching me how comments can be useful ;-)</p>
<p>Reading comment:</p>
<pre><code># Display BORGBACKUP_ARCHIVE_CACHE file content
# and prompt user for archive to restore.
# Always ask which archive to restore (even if there is only one).
# This gives possibility to abort restore if repository doesn't contain
# desired archive, hence saves some time.
</code></pre>
<p>So that loop is there only for user to choose archive to restore or exit
if desired archive is missing, no other fancy functionalities.<br />
You certainly can break to loop if <em>BORGBACKUP_archive_to_recover</em> is
set and continue with recovery, or if you are busy, I can patch it after
your PR is merged ;-).</p>
<p>V.</p>
<h4 id="jsmeix_commented_at_2017-09-05_1516"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1473#issuecomment-327208436">2017-09-05 15:16</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-09-05_1516" title="Permanent link">&para;</a></h4>
<p>@gozora<br />
now even I see the 'break' statement in the while loop<br />
when one valid BorgBackup archive was specified<br />
so that the current UserInput call is sufficient.</p>
<h4 id="schlomo_commented_at_2017-09-05_1518"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/pull/1473#issuecomment-327209035">2017-09-05 15:18</a>:<a class="headerlink" href="#schlomo_commented_at_2017-09-05_1518" title="Permanent link">&para;</a></h4>
<p>Sorry @jsmeix I disagree. IMHO mixed spelling is the worst. So within a
single name or ID the spelling should be consistent. Either uppercase
like in global variables or lowercase as in function names.</p>
<p>Good:</p>
<ul>
<li>get_size_for_efi_boot_in_mib</li>
<li>SET_SIZE_FOR_EFI_BOOT_IN_MIB</li>
</ul>
<p>Bad:</p>
<ul>
<li>Set_size_for_EFI_boot_in_MiB</li>
<li>... other mixtures ...</li>
</ul>
<p>I am also fine with uppercasing all the user input ID names. This is
consistent with our coding style to upper case global variables.</p>
<p>Yes, there is a lot of old mess in ReaR. That is why I believe it to be
better to introduce new stuff following our new guidelines instead of
matching new stuff to the wrong ways of the past.</p>
<p><code>Print</code> is indeed a problem, maybe <code>user_print</code> is a good alternative
name. Same for <code>Error</code> which might be better named <code>raise_error</code> or
<code>abort_with_error</code> or such.</p>
<h4 id="gozora_commented_at_2017-09-05_1522"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/pull/1473#issuecomment-327210346">2017-09-05 15:22</a>:<a class="headerlink" href="#gozora_commented_at_2017-09-05_1522" title="Permanent link">&para;</a></h4>
<p>@schlomo just to ease my curiosity (really have no preference in naming
and I'm still looking for "perfect" formatting style), why do you think
<em>Set_size_for_EFI_boot_in_MiB</em> is bad ?</p>
<h4 id="schlomo_commented_at_2017-09-05_1525"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/pull/1473#issuecomment-327211335">2017-09-05 15:25</a>:<a class="headerlink" href="#schlomo_commented_at_2017-09-05_1525" title="Permanent link">&para;</a></h4>
<p>@gozora the main reason that is bad is that you have an additional
dimension of potential errors. As a user you not only have to get the
words right you on top of that also have to get the spelling right. IMHO
this is a totally needles source of errors that doesn't help anybody.</p>
<p>If we want to force users to always copy-paste those IDs then we should
be using random IDs or UUIDs instead. If we want users to be able to
just type them in then we should use a very consistent and as easy as
possible way of writing those variables.</p>
<h4 id="schlomo_commented_at_2017-09-11_1403"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/pull/1473#issuecomment-328539040">2017-09-11 14:03</a>:<a class="headerlink" href="#schlomo_commented_at_2017-09-11_1403" title="Permanent link">&para;</a></h4>
<p>Thanks a lot @jsmeix I know that this is a lot of work.</p>
<h4 id="jsmeix_commented_at_2017-09-12_1025"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1473#issuecomment-328811035">2017-09-12 10:25</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-09-12_1025" title="Permanent link">&para;</a></h4>
<p>In shameless self-praise mode I am impressed:<br />
That thingy seems to "just work great" - at least for me<br />
(and in any case it is now better than it was ever before ;-)<br />
Here a "rear recover" excerpt with predefined user input:</p>
<pre>
Welcome to Relax-and-Recover. Run "rear recover" to restore your system !

RESCUE e205:~ # export USER_INPUT_LAYOUT_MIGRATION_REPLACEMENT_DISK="1"

RESCUE e205:~ # export USER_INPUT_LAYOUT_MIGRATION_CONFIRM_MAPPINGS="yEs"

RESCUE e205:~ # rear recover
...
Comparing disks.
Device sda has size 22548578304, 21474836480 expected
Switching to manual disk layout configuration.
Original disk /dev/sda does not exist (with same size) in the target system
Choose an appropriate replacement for /dev/sda
1) /dev/sda
2) /dev/sdb
3) Do not map /dev/sda
4) Use Relax-and-Recover shell and return back to here
(default 1 timeout 300 seconds)
UserInput: Will use predefined input in 'USER_INPUT_LAYOUT_MIGRATION_REPLACEMENT_DISK'='1'
Hit any key to interrupt the automated input (timeout 5 seconds)
Using /dev/sda (chosen by user) for recreating /dev/sda
Current disk mapping table (source -> target):
    /dev/sda /dev/sda
Confirm or edit the disk mapping
1) Confirm disk mapping and continue 'rear recover'
2) Edit disk mapping (/var/lib/rear/layout/disk_mappings)
3) Use Relax-and-Recover shell and return back to here
4) Abort 'rear recover'
(default 1 timeout 300 seconds)
UserInput: Will use predefined input in 'USER_INPUT_LAYOUT_MIGRATION_CONFIRM_MAPPINGS'='1'
Hit any key to interrupt the automated input (timeout 5 seconds)
User confirmed disk mapping
...
</pre>

<h4 id="schlomo_commented_at_2017-09-12_1122"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/pull/1473#issuecomment-328823149">2017-09-12 11:22</a>:<a class="headerlink" href="#schlomo_commented_at_2017-09-12_1122" title="Permanent link">&para;</a></h4>
<p>Cool! how come that <code>USER_INPUT_LAYOUT_MIGRATION_CONFIRM_MAPPINGS="yEs"</code>
comes out as <strong>1</strong> during the recovery?</p>
<h4 id="jsmeix_commented_at_2017-09-12_1129"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1473#issuecomment-328824722">2017-09-12 11:29</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-09-12_1129" title="Permanent link">&para;</a></h4>
<p>Because I coded it in layout/prepare/default/300_map_disks.sh</p>
<pre>
# When USER_INPUT_LAYOUT_MIGRATION_CONFIRM_MAPPINGS has any 'true' value be liberal in what you accept and
# assume choices[0] 'Confirm mapping' was actually meant which is shown with choice number 1 (not 0) and
# a predefined user input must match the choice number that is shown to the user (not the choice index):
is_true "$USER_INPUT_LAYOUT_MIGRATION_CONFIRM_MAPPINGS" && USER_INPUT_LAYOUT_MIGRATION_CONFIRM_MAPPINGS="1"
</pre>

<p>and similar things in<br />
format/USB/default/200_check_usb_layout.sh<br />
layout/prepare/GNU/Linux/150_include_drbd_code.sh<br />
restore/FDRUPSTREAM/default/270_selinux_considerations.sh<br />
and some kind of opposite logic in<br />
restore/NBKDC/default/400_restore_backup.sh<br />
to avoid that a predefined user input variable could cause harm<br />
because in this case no automated proceed is ever wanted.</p>
<h4 id="jsmeix_commented_at_2017-09-12_1139"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1473#issuecomment-328826695">2017-09-12 11:39</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-09-12_1139" title="Permanent link">&para;</a></h4>
<p>I made<br />
<a href="https://github.com/rear/rear/issues/1484">https://github.com/rear/rear/issues/1484</a><br />
for the further general cleanup changes.</p>
<p>For now I think this pull request is good enough to be merged.</p>
<p>The main issue was that variables for predefined user input<br />
had not been only with uppercase letters but such variables are<br />
user config variables and we cannot rename user config variables<br />
without causing regressions for our users or implememting<br />
awkward backward-compatibility stuff. Therefore variables<br />
for predefined user input are now only with uppercase letters.</p>
<p>The names of user input/output functions can be changed<br />
via
<a href="https://github.com/rear/rear/issues/1484">https://github.com/rear/rear/issues/1484</a>
because<br />
function names are implementation details but no<br />
user interface (in contrast to config variables).</p>
<p>I prefer consistent function names<br />
(all user input/output functions in CamelCase)<br />
over strict compliance with our intended coding style<br />
only for the new user input/output function names.<br />
In other words:<br />
I will either change all user input/output function names<br />
to get all in compliance with our intended coding style<br />
or none.</p>
<h4 id="schlomo_commented_at_2017-09-12_1145"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/pull/1473#issuecomment-328828107">2017-09-12 11:45</a>:<a class="headerlink" href="#schlomo_commented_at_2017-09-12_1145" title="Permanent link">&para;</a></h4>
<p>I see, nice trick. I think that this is a pattern that you might want to
add to our coding docs as it is not obvious and it requires the
developer to perceive the user input variable as a multi-value variable
that can be either true or a number from the list. It also forces the
developer to have the first list item as the "true" value.</p>
<h4 id="schlomo_commented_at_2017-09-12_1149"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/pull/1473#issuecomment-328828878">2017-09-12 11:49</a>:<a class="headerlink" href="#schlomo_commented_at_2017-09-12_1149" title="Permanent link">&para;</a></h4>
<p>I think that you should slowly get to merge this so that we can collect
some feedback from users.</p>
<p>About backwards compatible: In general I agree, in particular I like to
understand where the backwards compatibility creates a lot of complexity
in ReaR. In those cases I would like us to discuss a breaking change,
especially if it something where we learned over time that previous
assumptions were less than optimum.</p>
<h4 id="jsmeix_commented_at_2017-09-12_1153"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1473#issuecomment-328829731">2017-09-12 11:53</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-09-12_1153" title="Permanent link">&para;</a></h4>
<p>@schlomo<br />
regarding your<br />
<a href="https://github.com/rear/rear/pull/1473#pullrequestreview-60622391">https://github.com/rear/rear/pull/1473#pullrequestreview-60622391</a></p>
<p>I am strongly :-) against positional parameters/arguments<br />
because I think positional parameters/arguments<br />
are one of the worst things ever.</p>
<p>I strongly ;-) suggest to prefer named parameters/arguments<br />
regardless if one is required or optional - except one single<br />
kind of arguments that are the trailing mass-arguments.<br />
This way also the unnamed arguments have same meaning<br />
because all mass-arguments are of one same kind.</p>
<p>If the ID parameter was a positional parameter I could not<br />
test if a ID parameter was specified at all or if it was valid<br />
because I could not reliably distinguish a right call like</p>
<pre>
UserInput FOO BAR BAZ
</pre>

<p>where FOO is meant as ID and BAR BAZ are choices<br />
from a same looking but wrong working call</p>
<pre>
UserInput FOO BAR BAZ
</pre>

<p>where no ID is specified because FOO BAR BAZ are<br />
all meant as choices.<br />
In the latter case I would take FOO as ID but because it was<br />
not meant this way that UserInput call would work but it<br />
would behave wrong (hopefully someone detects that)<br />
in contrast to now where I can test the syntax and<br />
immediately BugError out for syntactically wrong calls.</p>
<h4 id="schlomo_commented_at_2017-09-12_1155"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/pull/1473#issuecomment-328830105">2017-09-12 11:55</a>:<a class="headerlink" href="#schlomo_commented_at_2017-09-12_1155" title="Permanent link">&para;</a></h4>
<p>@jsmeix very good reasoning which convinces me, you probably also would
love programming in Python ðŸ˜„</p>
<h4 id="jsmeix_commented_at_2017-09-12_1205"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1473#issuecomment-328832250">2017-09-12 12:05</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-09-12_1205" title="Permanent link">&para;</a></h4>
<p>@schabrolles<br />
I simply assume you like in particular how the migration mode<br />
can now be automated at least to some initial extent, cf.<br />
layout/prepare/default/300_map_disks.sh</p>
<pre>
# TODO: Currently only one single
# USER_INPUT_LAYOUT_MIGRATION_REPLACEMENT_DISK
# can be predefined (which is at least better
# than nothing) but that dialog can appear
# several times for several unmapped
# original 'disk' devices and 'multipath' devices:
</pre>

<h4 id="jsmeix_commented_at_2017-09-12_1208"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1473#issuecomment-328832850">2017-09-12 12:08</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-09-12_1208" title="Permanent link">&para;</a></h4>
<p>FYI:<br />
Intentionally the UserInput function variables<br />
are not yet documented in default.conf because<br />
I still like to be able to change things as needed.</p>
<h4 id="jsmeix_commented_at_2017-09-12_1431"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1473#issuecomment-328871126">2017-09-12 14:31</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-09-12_1431" title="Permanent link">&para;</a></h4>
<p><a href="https://github.com/rear/rear/pull/1486">https://github.com/rear/rear/pull/1486</a><br />
implements the missing part in<br />
<a href="https://github.com/rear/rear/pull/1473#issuecomment-328832250">https://github.com/rear/rear/pull/1473#issuecomment-328832250</a></p>
<p>It was unexpectedly easy :-)</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2025 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2017-09-05.1473.pr.merged.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
