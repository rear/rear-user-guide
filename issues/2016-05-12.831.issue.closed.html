<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#831 Issue closed: USB UEFI boot support - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#831 Issue closed: USB UEFI boot support";
        var mkdocs_page_input_path = "issues/2016-05-12.831.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#831 Issue closed: USB UEFI boot support</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="831_issue_closed_usb_uefi_boot_support"><a href="https://github.com/rear/rear/issues/831">#831 Issue</a> <code>closed</code>: USB UEFI boot support<a class="headerlink" href="#831_issue_closed_usb_uefi_boot_support" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>fixed / solved / done</code></p>
<h4 id="gozora_opened_issue_at_2016-05-12_0552"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> opened issue at <a href="https://github.com/rear/rear/issues/831">2016-05-12 05:52</a>:<a class="headerlink" href="#gozora_opened_issue_at_2016-05-12_0552" title="Permanent link">&para;</a></h4>
<p>Firs of all sorry for not using the template (not that I'd be a rebel or
something ;-)), but this is rather a question about rear code.<br />
After checking the issue #828 , I've thought about helping with UEFI
USB boot support.</p>
<p>I've checked existing code for UEFI USB written by @gdha and realized
that most of the work is already done. Only thing left is fill UEFI
(FAT) partition with boot loader and create some fancy config for it.</p>
<p>For this reason I'd like to know your opinion on what is the best way to
do this.</p>
<p>My initial question would be:<br />
Where to put code for mounting the UEFI (FAT) partition?</p>
<p>In <strong>10_mount_output_path.sh</strong> we have</p>
<pre><code>...
mount_url $OUTPUT_URL $BUILD_DIR/outputfs $OUTPUT_OPTIONS
...
</code></pre>
<p>If I'm not wrong this mounts the main (non FAT) partition only.<br />
Would it be OK for you add the code here?</p>
<h4 id="jsmeix_commented_at_2016-05-12_0737"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/831#issuecomment-218682453">2016-05-12 07:37</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-05-12_0737" title="Permanent link">&para;</a></h4>
<p>Offhandedly (i.e. without any thorough analysis right now)<br />
I would prefer to implement all what is needed for that<br />
particular functionality in one single block of code<br />
(regardless if that block of code is added to an<br />
existing script or added via a separated script).</p>
<p>For my generic reasoning why I would prefer it this way<br />
remember how we both together achieved to greately simplify<br />
and cleanup the code for creating an UEFI bootable iso image<br />
during
<a href="https://github.com/rear/rear/issues/810">https://github.com/rear/rear/issues/810</a>
and
<a href="https://github.com/rear/rear/pull/816">https://github.com/rear/rear/pull/816</a></p>
<p>Accordingly I suggest that you (at least as an initial<br />
starting point) simply implement all what is needed<br />
in one single block of code (or whatever else is easiest<br />
for you to implement it). If that somehow does not work<br />
or looks too ugly we could adapt it as needed later.</p>
<p>In the end I think that everybody first and foremost<br />
greately appreciates your contribution to make<br />
"rear format --efi" really working regardless<br />
how exactly you implemented it.</p>
<h4 id="jsmeix_commented_at_2016-05-12_0741"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/831#issuecomment-218683079">2016-05-12 07:41</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-05-12_0741" title="Permanent link">&para;</a></h4>
<p>I assign that issue to me.<br />
Regardless that I am not at all a UEFI expert<br />
I will care about the issue to get it into rear<br />
(just like
<a href="https://github.com/rear/rear/pull/816">https://github.com/rear/rear/pull/816</a>).</p>
<h4 id="gdha_commented_at_2016-05-12_0750"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/831#issuecomment-218684752">2016-05-12 07:50</a>:<a class="headerlink" href="#gdha_commented_at_2016-05-12_0750" title="Permanent link">&para;</a></h4>
<p>@gozora @jsmeix As far I can remember the <code>rear format --efi</code> works
already (and is part of the <em>format</em> workflow). What is not yet done is
as @gozora mentioned is adding boot code + and executables. New code
(scripts) should be added to directory
<code>usr/share/rear/output/USB/Linux-i386/</code>, but keep in mind that you will
have 2 partitions now on the USB device (one vFAT and another ext3) - so
you need to be careful where to copy where of course. And, extlinux is
not required. Therefore, the current scripts could conflict with you
want to achieve. This was also one of the reasons why I stopped. The
effort became bigger then on the first impression.</p>
<h4 id="gozora_commented_at_2016-05-12_0805"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/831#issuecomment-218687713">2016-05-12 08:05</a>:<a class="headerlink" href="#gozora_commented_at_2016-05-12_0805" title="Permanent link">&para;</a></h4>
<p>Yes, correct <code>rear format --efi</code> works as charm.<br />
Yesterday I was able to manually construct UEFI bootable USB and
successfully run restore. As @jsmeix mentioned I'll try to put together
some code and create pull request for further discussion.</p>
<p>Thanks for your inputs so far!</p>
<h4 id="jsmeix_commented_at_2016-05-13_0739"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/831#issuecomment-218972859">2016-05-13 07:39</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-05-13_0739" title="Permanent link">&para;</a></h4>
<p>@gozora<br />
many thanks for you valuable contribution
<a href="https://github.com/rear/rear/pull/834">https://github.com/rear/rear/pull/834</a></p>
<h4 id="gozora_commented_at_2016-05-13_0744"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/831#issuecomment-218973897">2016-05-13 07:44</a>:<a class="headerlink" href="#gozora_commented_at_2016-05-13_0744" title="Permanent link">&para;</a></h4>
<p>No problem with that.<br />
Can we keep this issue open until this part is done as a place where we
can communicate?</p>
<h4 id="jsmeix_commented_at_2016-05-13_0838"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/831#issuecomment-218984172">2016-05-13 08:38</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-05-13_0838" title="Permanent link">&para;</a></h4>
<p>Yes, I will keep this issue here open<br />
until we agree that it is done.</p>
<h4 id="gozora_commented_at_2016-05-14_1413"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/831#issuecomment-219222491">2016-05-14 14:13</a>:<a class="headerlink" href="#gozora_commented_at_2016-05-14_1413" title="Permanent link">&para;</a></h4>
<p>So we should have now working USB EFI boot for elilo.<br />
As always feel free to test and comment.</p>
<p>I'll try to put together support for both grub versions (0.97, 2.0) ...</p>
<h4 id="gozora_commented_at_2016-05-15_1951"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/831#issuecomment-219306673">2016-05-15 19:51</a>:<a class="headerlink" href="#gozora_commented_at_2016-05-15_1951" title="Permanent link">&para;</a></h4>
<p>Now the commit is complete and should work regardless on bootloader
version.</p>
<p>More testing is always welcomed ;-)</p>
<h4 id="jsmeix_commented_at_2016-05-17_1217"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/831#issuecomment-219700357">2016-05-17 12:17</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-05-17_1217" title="Permanent link">&para;</a></h4>
<p>With
<a href="https://github.com/rear/rear/pull/837">https://github.com/rear/rear/pull/837</a><br />
I regard this issue as done.</p>
<p>If bugs with USB EFI boot support might be detected later<br />
they can be handled as separated issues.</p>
<p>@gozora<br />
again many thanks for your various<br />
valuable contributions to rear!</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2024 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2016-05-12.831.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
