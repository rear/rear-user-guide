<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>2022 06 21.2826.issue.closed - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "2022 06 21.2826.issue.closed";
        var mkdocs_page_input_path = "issues/2022-06-21.2826.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/rust.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', '366986045', 'auto');
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
      <li>2022 06 21.2826.issue.closed</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="2826_issue_closed_redhatenterpriseserver8_-_there_is_no_code_to_install_a_boot_loader_on_the_recovered_system"><a href="https://github.com/rear/rear/issues/2826">#2826 Issue</a> <code>closed</code>: RedHatEnterpriseServer/8 - There is no code to install a boot loader on the recovered system<a class="headerlink" href="#2826_issue_closed_redhatenterpriseserver8_-_there_is_no_code_to_install_a_boot_loader_on_the_recovered_system" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>support / question</code>, <code>fixed / solved / done</code></p>
<h4 id="githopp192_opened_issue_at_2022-06-21_1833"><img src="https://avatars.githubusercontent.com/u/32612067?u=b6007aaa015ff323addaf197670b509febc7c77c&v=4" width="50"><a href="https://github.com/Githopp192">Githopp192</a> opened issue at <a href="https://github.com/rear/rear/issues/2826">2022-06-21 18:33</a>:<a class="headerlink" href="#githopp192_opened_issue_at_2022-06-21_1833" title="Permanent link">&para;</a></h4>
<p>Relax-and-Recover (ReaR) Issue Template<br />
Fill in the following items before submitting a new issue<br />
(quick response is not guaranteed with free support):</p>
<ul>
<li>ReaR version ("/usr/sbin/rear -V"):</li>
</ul>
<p>Relax-and-Recover 2.6 / 2020-06-17</p>
<ul>
<li>OS version ("cat /etc/os-release" or "lsb_release -a" or "cat
    /etc/rear/os.conf"):</li>
</ul>
<!-- -->

<pre><code>VERSION="8.5 (Ootpa)"
ID="rhel"
ID_LIKE="fedora"
VERSION_ID="8.5"
PLATFORM_ID="platform:el8"
PRETTY_NAME="Red Hat Enterprise Linux 8.5 (Ootpa)"
</code></pre>
<ul>
<li>ReaR configuration files ("cat /etc/rear/site.conf" and/or "cat
    /etc/rear/local.conf"):</li>
</ul>
<!-- -->

<pre><code>BACKUP=BACULA
export TMPDIR="/home/TMPDIR"
COPY_AS_IS_BACULA=( /usr/lib64/libbac* /opt/bacula/working /etc/bacula /var/spool/bacula )
COPY_AS_IS_EXCLUDE_BACULA=( /var/lib/bacula )
PROGS_BACULA=( bacula bacula-fd bconsole bacula-console bextract bls bscan btape smartctl gawk )
BACULA_CLIENT=baculaclient-fd
CLONE_ALL_USERS_GROUPS=y
OUTPUT_URL=nfs://nas/volumex/Backup/REAR
OUTPUT_PREFIX=server2.opn9.9opn
</code></pre>
<ul>
<li>Hardware vendor/product (PC or PowerNV BareMetal or ARM) or VM (KVM
    guest or PowerVM LPAR):</li>
</ul>
<p>HP Proliant DL360 G7</p>
<ul>
<li>System architecture (x86 compatible or PPC64/PPC64LE or what exact
    ARM device):</li>
</ul>
<p>x86</p>
<ul>
<li>Firmware (BIOS or UEFI or Open Firmware) and bootloader (GRUB or
    ELILO or Petitboot):</li>
</ul>
<p>BIOS, Bootloader GRUB</p>
<ul>
<li>Storage (local disk or SSD) and/or SAN (FC or iSCSI or FCoE) and/or
    multipath (DM or NVMe):</li>
</ul>
<p>local disks (DM (mdadm))</p>
<ul>
<li>Storage layout ("lsblk -ipo
    NAME,KNAME,PKNAME,TRAN,TYPE,FSTYPE,LABEL,SIZE,MOUNTPOINT"):</li>
</ul>
<!-- -->

<pre><code>NAME                              KNAME      PKNAME     TRAN TYPE  FSTYPE            LABEL          SIZE MOUNTPOINT
/dev/sda                          /dev/sda              sas  disk                                 279.4G
|-/dev/sda1                       /dev/sda1  /dev/sda        part  ext4                               1G /mnt/local/boot
`-/dev/sda2                       /dev/sda2  /dev/sda        part  linux_raid_member server2:pv00 278.4G
  `-/dev/md127                    /dev/md127 /dev/sda2       raid1 LVM2_member                    278.2G
    |-/dev/mapper/cl_server2-home /dev/dm-0  /dev/md127      lvm   xfs               home            60G /mnt/local/home
    |-/dev/mapper/cl_server2-root /dev/dm-1  /dev/md127      lvm   xfs               root            50G /mnt/local
    `-/dev/mapper/cl_server2-swap /dev/dm-2  /dev/md127      lvm   swap              swap            20G
/dev/sdb                          /dev/sdb              sas  disk                                 279.4G
`-/dev/sdb1                       /dev/sdb1  /dev/sdb        part  linux_raid_member server2:pv00 278.4G
  `-/dev/md127                    /dev/md127 /dev/sdb1       raid1 LVM2_member                    278.2G
    |-/dev/mapper/cl_server2-home /dev/dm-0  /dev/md127      lvm   xfs               home            60G /mnt/local/home
    |-/dev/mapper/cl_server2-root /dev/dm-1  /dev/md127      lvm   xfs               root            50G /mnt/local
    `-/dev/mapper/cl_server2-swap /dev/dm-2  /dev/md127      lvm   swap              swap            20G
/dev/sdc                          /dev/sdc              usb  disk                                   1.9G
`-/dev/sdc1                       /dev/sdc1  /dev/sdc        part  vfat              RELAXRECOVE    1.9G
</code></pre>
<ul>
<li>Description of the issue (ideally so that others can reproduce it):</li>
</ul>
<!-- -->

<pre><code>dracut: *** Stripping files done ***
dracut: *** Creating image file '/boot/initramfs-4.18.0-372.9.1.el8.x86_64.img' ***
dracut: *** Creating initramfs image file '/boot/initramfs-4.18.0-372.9.1.el8.x86_64.img' done ***
2022-06-14 12:45:36.378711439 Updated initrd with new drivers for kernel 4.18.0-372.9.1.el8.x86_64.
2022-06-14 12:45:36.386270072 Including finalize/Linux-i386/610_EFISTUB_run_efibootmgr.sh
2022-06-14 12:45:36.393015395 Including finalize/Linux-i386/630_install_grub.sh
/sbin/grub2-probe
2022-06-14 12:45:36.396131289 Skip installing GRUB Legacy boot loader because GRUB 2 is installed (grub-probe or grub2-probe exist).
2022-06-14 12:45:36.403333237 Including finalize/Linux-i386/640_install_lilo.sh
2022-06-14 12:45:36.410207701 Including finalize/Linux-i386/650_install_elilo.sh
2022-06-14 12:45:36.416834713 Including finalize/Linux-i386/660_install_grub2.sh
/sbin/grub2-probe
2022-06-14 12:45:36.419869106 Installing GRUB2 boot loader...
Generating grub configuration file ...
done
2022-06-14 12:45:52.295025695 Determining where to install GRUB2 (no GRUB2_INSTALL_DEVICES specified)
2022-06-14 12:45:52.306608019 Cannot install GRUB2 (unable to find a /boot or / partition)
2022-06-14 12:45:52.313893146 Including finalize/Linux-i386/670_run_efibootmgr.sh
2022-06-14 12:45:52.320646224 Including finalize/default/880_check_for_mount_by_id.sh
2022-06-14 12:45:52.329801215 Including finalize/default/890_finish_checks.sh
2022-06-14 12:45:52.340399684 WARNING:
For this system
RedHatEnterpriseServer/8 on Linux-i386 (based on Fedora/8/i386)
there is no code to install a boot loader on the recovered system
or the code that we have failed to install the boot loader correctly.
Please contribute appropriate code to the Relax-and-Recover project,
see http://relax-and-recover.org/development/
Take a look at the scripts in /usr/share/rear/finalize - for example
for PC architectures like x86 and x86_64 see the script
/usr/share/rear/finalize/Linux-i386/660_install_grub2.sh
and for POWER architectures like ppc64le see the script
/usr/share/rear/finalize/Linux-ppc64le/660_install_grub2.sh
---------------------------------------------------
|  IF YOU DO NOT INSTALL A BOOT LOADER MANUALLY,  |
|  THEN YOUR SYSTEM WILL NOT BE ABLE TO BOOT.     |
---------------------------------------------------
You can use 'chroot /mnt/local bash --login'
to change into the recovered system and
manually install a boot loader therein.

2022-06-14 12:45:52.347734289 Including finalize/default/900_remount_sync.sh
2022-06-14 12:45:52.350216411 Finished running 'finalize' stage in 271 seconds
2022-06-14 12:45:52.352338551 ======================
2022-06-14 12:45:52.354267487 Running 'wrapup' stage
2022-06-14 12:45:52.356258575 ======================
2022-06-14 12:45:52.368024420 Including wrapup/default/500_post_recovery_script.sh
2022-06-14 12:45:52.374734324 Including wrapup/default/980_good_bye.sh
2022-06-14 12:45:52.381432044 Including wrapup/default/990_copy_logfile.sh
removed '/mnt/local//root/rear-2022-06-11T01:35:05+02:00.log'
'/mnt/local//root/rear-2022-06-14T12:45:52+02:00.log' -&gt; '/var/log/rear/recover/rear-server2.log'
2022-06-14 12:45:52.396646758 Finished running 'wrapup' stage in 0 seconds
2022-06-14 12:45:52.398795849 Finished running recover workflow
2022-06-14 12:45:52.406599457 Exiting rear recover (PID 1771) and its descendant processes ...
2022-06-14 12:45:55.451808639 rear,1771 /bin/rear recover
</code></pre>
<ul>
<li>Workaround, if any:</li>
</ul>
<p>what i did before reboot (i cannot determine, if the system did reboot
or not without those steps).<br />
The only way for me, was to do the following steps as precaution:</p>
<pre><code>- chroot /mnt/local bash --login
- grub2-install /dev/sda
- grub2-install /dev/sdb
- grub2-mkconfig -o /boot/grub2/grub.cfg
</code></pre>
<p>There was no issue finding the the config files !</p>
<p>The system did reboot successfully !</p>
<ul>
<li>Attachments, as applicable ("rear -D mkrescue/mkbackup/recover"
    debug log files):</li>
</ul>
<h4 id="jsmeix_commented_at_2022-06-22_0716"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2826#issuecomment-1162737691">2022-06-22 07:16</a>:<a class="headerlink" href="#jsmeix_commented_at_2022-06-22_0716" title="Permanent link">&para;</a></h4>
<p>@Githopp192</p>
<p>I think</p>
<pre><code>2022-06-14 12:45:52.295025695 Determining where to install GRUB2 (no GRUB2_INSTALL_DEVICES specified)
2022-06-14 12:45:52.306608019 Cannot install GRUB2 (unable to find a /boot or / partition)
</code></pre>
<p>tells it.</p>
<p>I.e. you should specify GRUB2_INSTALL_DEVICES,<br />
see its description in usr/share/rear/conf/default.conf</p>
<p>I experienced this kind of issue with RAID1 and for me</p>
<pre><code>GRUB2_INSTALL_DEVICES="/dev/sda /dev/sdb"
</code></pre>
<p>helped.</p>
<p>I don't know the reason why the automatism in<br />
usr/share/rear/finalize/Linux-i386/660_install_grub2.sh<br />
is <code>unable to find a /boot or / partition</code> with RAID1.<br />
Perhaps this happens only when LVM is used on top of RAID1?<br />
But I didn't spend time to analyze the root cause<br />
because specifying GRUB2_INSTALL_DEVICES "just worked"<br />
at least for me (and in case of doubt I prefer specifying<br />
the right facts over relying on possible fragile automatisms).</p>
<h4 id="githopp192_commented_at_2022-06-27_2009"><img src="https://avatars.githubusercontent.com/u/32612067?u=b6007aaa015ff323addaf197670b509febc7c77c&v=4" width="50"><a href="https://github.com/Githopp192">Githopp192</a> commented at <a href="https://github.com/rear/rear/issues/2826#issuecomment-1167832009">2022-06-27 20:09</a>:<a class="headerlink" href="#githopp192_commented_at_2022-06-27_2009" title="Permanent link">&para;</a></h4>
<p>thx @jsmeix - yes exactly - using md-softraid RAID1, too.</p>
<p>Thanks for the hint - i added "GRUB2_INSTALL_DEVICES="/dev/sda
/dev/sdb" now to /etc/rear/local.conf</p>
<p>You mentioned <em>"Perhaps this happens only when LVM is used on top of
RAID1</em>?"</p>
<p>i'm using ext4 for the /boot part:</p>
<pre><code>NAME         FSTYPE            LABEL           UUID   MOUNTPOINT
sda
├─sda1       linux_raid_member server2:pv00    xxx
│ └─md125    ext4                              yyy    /boot
</code></pre>
<h4 id="pcahyna_commented_at_2022-06-27_2036"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2826#issuecomment-1167861186">2022-06-27 20:36</a>:<a class="headerlink" href="#pcahyna_commented_at_2022-06-27_2036" title="Permanent link">&para;</a></h4>
<p>That's weird, I believe I tested this (boot from RAID 1) in the past and
it worked. Is this the ReaR package shipped with RHEL (not the upstream
release or the upstream development version)? Are you able to reproduce
it and re-run the recovery with the -D flag and provide the log, please?</p>
<h4 id="githopp192_commented_at_2022-06-27_2124"><img src="https://avatars.githubusercontent.com/u/32612067?u=b6007aaa015ff323addaf197670b509febc7c77c&v=4" width="50"><a href="https://github.com/Githopp192">Githopp192</a> commented at <a href="https://github.com/rear/rear/issues/2826#issuecomment-1167918343">2022-06-27 21:24</a>:<a class="headerlink" href="#githopp192_commented_at_2022-06-27_2124" title="Permanent link">&para;</a></h4>
<p>Name : rear<br />
Version : 2.6<br />
Release : 4.el8<br />
Architecture : x86_64<br />
Size : 2.5 M<br />
Source : rear-2.6-4.el8.src.rpm<br />
Repository : @System<br />
From repo : rhel-8-for-x86_64-appstream-rpms<br />
Summary : Relax-and-Recover is a Linux disaster recovery and system
migration tool<br />
URL : <a href="http://relax-and-recover.org/">http://relax-and-recover.org/</a><br />
License : GPLv3</p>
<p>i was not able to reproduce it - i did run the "workaround" commands
(see obove) &amp; the system booted.</p>
<p>**REAR-log: (without -D flag) **</p>
<p><a href="https://github.com/rear/rear/files/8995598/rear.log">rear.log</a></p>
<h4 id="jsmeix_commented_at_2022-06-30_1151"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2826#issuecomment-1171123738">2022-06-30 11:51</a>:<a class="headerlink" href="#jsmeix_commented_at_2022-06-30_1151" title="Permanent link">&para;</a></h4>
<p>In
<a href="https://github.com/rear/rear/files/8995598/rear.log">https://github.com/rear/rear/files/8995598/rear.log</a><br />
something looks completely wrong during<br />
restore via Bacula (excerpts from that log file):</p>
<pre><code>2022-06-14 12:24:09.643981496 Running 'layout/recreate' stage
2022-06-14 12:24:09.645905076 ======================
2022-06-14 12:24:09.657149747 Including layout/recreate/default/100_confirm_layout_code.sh
2022-06-14 12:24:09.664109658 UserInput: called in /usr/share/rear/layout/recreate/default/100_confirm_layout_code.sh line 26
2022-06-14 12:24:09.669788565 UserInput: Default input in choices - using choice number 1 as default input
2022-06-14 12:24:09.672459197 Confirm or edit the disk recreation script
2022-06-14 12:24:09.675164986 1) Confirm disk recreation script and continue 'rear recover'
2022-06-14 12:24:09.677714576 2) Edit disk recreation script (/var/lib/rear/layout/diskrestore.sh)
2022-06-14 12:24:09.680203480 3) View disk recreation script (/var/lib/rear/layout/diskrestore.sh)
2022-06-14 12:24:09.682721249 4) View original disk space usage (/var/lib/rear/layout/config/df.txt)
2022-06-14 12:24:09.685252236 5) Use Relax-and-Recover shell and return back to here
2022-06-14 12:24:09.687811608 6) Abort 'rear recover'
2022-06-14 12:24:09.690405561 (default '1' timeout 300 seconds)
2022-06-14 12:24:15.103391197 UserInput: 'read' got as user input ''
2022-06-14 12:24:15.112834641 User confirmed disk recreation script
2022-06-14 12:24:15.121691888 Including layout/recreate/default/200_run_layout_code.sh
2022-06-14 12:24:15.128314936 Start system layout restoration.
+++ create_component /dev/sda disk
...
+++ set +x
2022-06-14 12:24:26.600104307 Disk layout created.
2022-06-14 12:24:26.606502665 UserInput: called in /usr/share/rear/layout/recreate/default/200_run_layout_code.sh line 98
2022-06-14 12:24:26.611988093 UserInput: Default input in choices - using choice number 1 as default input
2022-06-14 12:24:26.614679470 Confirm the recreated disk layout or go back one step
2022-06-14 12:24:26.617250002 1) Confirm recreated disk layout and continue 'rear recover'
2022-06-14 12:24:26.619781925 2) Go back one step to redo disk layout recreation
2022-06-14 12:24:26.622359749 3) Use Relax-and-Recover shell and return back to here
2022-06-14 12:24:26.624873542 4) Abort 'rear recover'
2022-06-14 12:24:26.627594781 (default '1' timeout 300 seconds)
2022-06-14 12:24:29.903325386 UserInput: 'read' got as user input ''
2022-06-14 12:24:29.912567488 User confirmed recreated disk layout
2022-06-14 12:24:29.919874994 Including layout/recreate/default/250_verify_mount.sh
2022-06-14 12:24:29.925660839 Finished running 'layout/recreate' stage in 20 seconds
2022-06-14 12:24:29.927805368 ======================
2022-06-14 12:24:29.929762906 Running 'restore' stage
2022-06-14 12:24:29.931697422 ======================
2022-06-14 12:24:29.943297934 Including restore/Fedora/050_copy_dev_files.sh
2022-06-14 12:24:29.986066623 Including restore/default/050_remount_async.sh
2022-06-14 12:24:29.992730746 Including restore/BACULA/default/400_restore_backup.sh
2022-06-14 12:24:30.000032073 
The system is now ready for a restore via Bacula. bconsole will be started for
you to restore the required files. It's assumed that you know what is necessary
to restore - typically it will be a full backup.

Do not exit 'bconsole' until all files are restored

WARNING: The new root is mounted under '/mnt/local'.

Press ENTER to start bconsole
2022-06-14 12:27:10.910173212 UserInput: 'read' timed out with non-zero exit code
2022-06-14 12:27:10.918487118 Continuing 'rear recover' by default
2022-06-14 12:27:10.938294118 Including layout/prepare/default/310_remove_exclusions.sh
2022-06-14 12:27:11.023995593 Including layout/prepare/default/320_apply_mappings.sh
2022-06-14 12:27:11.028876350 Completely identical layout mapping in /var/lib/rear/layout/disk_mappings
2022-06-14 12:27:11.033922193 Completely identical layout mapping in /var/lib/rear/layout/disk_mappings
2022-06-14 12:27:11.039040265 Completely identical layout mapping in /var/lib/rear/layout/disk_mappings
2022-06-14 12:27:11.048128038 Including layout/prepare/default/420_autoresize_last_partitions.sh
2022-06-14 12:27:11.066318633 Including layout/prepare/default/430_autoresize_all_partitions.sh
2022-06-14 12:27:11.072619974 Including layout/prepare/default/500_confirm_layout_file.sh
2022-06-14 12:27:11.078923853 UserInput: called in /usr/share/rear/layout/prepare/default/500_confirm_layout_file.sh line 26
2022-06-14 12:27:11.084274851 UserInput: Default input in choices - using choice number 1 as default input
2022-06-14 12:27:11.086888456 Confirm or edit the disk layout file
2022-06-14 12:27:11.096314934 1) Confirm disk layout and continue 'rear recover'
2022-06-14 12:27:11.105779579 2) Edit disk layout (/var/lib/rear/layout/disklayout.conf)
2022-06-14 12:27:11.115397571 3) View disk layout (/var/lib/rear/layout/disklayout.conf)
2022-06-14 12:27:11.124761486 4) View original disk space usage (/var/lib/rear/layout/config/df.txt)
2022-06-14 12:27:11.134471847 5) Use Relax-and-Recover shell and return back to here
2022-06-14 12:27:11.144432964 6) Abort 'rear recover'
2022-06-14 12:27:11.154225635 (default '1' timeout 300 seconds)
2022-06-14 12:32:11.167158596 UserInput: 'read' timed out with non-zero exit code
2022-06-14 12:32:11.175733399 Continuing 'rear recover' by default
2022-06-14 12:32:11.189436650 Including layout/prepare/default/510_list_dependencies.sh
2022-06-14 12:32:11.197735577 Including layout/prepare/default/520_exclude_components.sh
2022-06-14 12:32:11.206363445 Including layout/prepare/default/540_generate_device_code.sh
2022-06-14 12:32:11.222679445 Including layout/prepare/default/550_finalize_script.sh
2022-06-14 12:32:11.230471911 Including layout/prepare/default/600_show_unprocessed.sh
2022-06-14 12:32:11.240738865 Including layout/prepare/default/610_exclude_from_restore.sh
2022-06-14 12:32:11.243015639 Finished running 'layout/prepare' stage in 601 seconds
2022-06-14 12:32:11.244965195 ======================
2022-06-14 12:32:11.246846378 Running 'layout/recreate' stage
2022-06-14 12:32:11.248701520 ======================
2022-06-14 12:32:11.259451517 Including layout/recreate/default/100_confirm_layout_code.sh
2022-06-14 12:32:11.265990050 UserInput: called in /usr/share/rear/layout/recreate/default/100_confirm_layout_code.sh line 26
2022-06-14 12:32:11.271356385 UserInput: Default input in choices - using choice number 1 as default input
2022-06-14 12:32:11.273986991 Confirm or edit the disk recreation script
2022-06-14 12:32:11.283764062 1) Confirm disk recreation script and continue 'rear recover'
2022-06-14 12:32:11.293397365 2) Edit disk recreation script (/var/lib/rear/layout/diskrestore.sh)
2022-06-14 12:32:11.303133280 3) View disk recreation script (/var/lib/rear/layout/diskrestore.sh)
2022-06-14 12:32:11.312837962 4) View original disk space usage (/var/lib/rear/layout/config/df.txt)
2022-06-14 12:32:11.322805021 5) Use Relax-and-Recover shell and return back to here
2022-06-14 12:32:11.332638899 6) Abort 'rear recover'
2022-06-14 12:32:11.342440230 (default '1' timeout 300 seconds)
2022-06-14 12:37:11.355345402 UserInput: 'read' timed out with non-zero exit code
2022-06-14 12:37:11.364124335 Continuing 'rear recover' by default
2022-06-14 12:37:11.379461132 Including layout/recreate/default/200_run_layout_code.sh
2022-06-14 12:37:11.385350246 Start system layout restoration.
2022-06-14 12:37:11.461599976 Disk layout created.
2022-06-14 12:37:11.474899829 UserInput: called in /usr/share/rear/layout/recreate/default/200_run_layout_code.sh line 98
2022-06-14 12:37:11.479722113 UserInput: Default input in choices - using choice number 1 as default input
2022-06-14 12:37:11.482209213 Confirm the recreated disk layout or go back one step
2022-06-14 12:37:11.492305515 1) Confirm recreated disk layout and continue 'rear recover'
2022-06-14 12:37:11.502614861 2) Go back one step to redo disk layout recreation
2022-06-14 12:37:11.512881281 3) Use Relax-and-Recover shell and return back to here
2022-06-14 12:37:11.523002129 4) Abort 'rear recover'
2022-06-14 12:37:11.533043088 (default '1' timeout 300 seconds)
2022-06-14 12:40:50.741821868 bconsole finished with zero exit code
2022-06-14 12:40:50.744491991 
Please verify that the backup has been restored correctly to '/mnt/local'
in the provided shell. When finished, type exit in the shell to continue
recovery.

2022-06-14 12:41:20.801562293 Including restore/default/500_selinux_autorelabel.sh
</code></pre>
<p>During 'restore' stage it somehow runs<br />
the 'layout/recreate' stage a second time<br />
which is (at least normally) plain wrong.</p>
<p>Fortunately the second run of the 'layout/recreate' stage<br />
does not actually do anything (i.e. it leaves the target system<br />
unchanged) because the layout code in ReaR "remembers" what it<br />
had already recreated so there is nothing to do for the<br />
second run of the 'layout/recreate' stage.</p>
<p>But it seems with BACKUP=BACULA things do not behave<br />
during "rear recover" as they normally should.</p>
<p>I am not a BACKUP=BACULA user so I cannot actually reproduce<br />
issues with BACKUP=BACULA but I did some kind of "dry run"<br />
with BACKUP=BACULA versus BACKUP=NETFS as follows:</p>
<pre><code># grep -v '^#' etc/rear/local.conf
...
OUTPUT=USB
BACKUP=BACULA
BACKUP_URL=usb:///dev/disk/by-label/REAR-000
...

# usr/sbin/rear -s recover | egrep 'recreate/|restore/'
Source layout/recreate/default/100_confirm_layout_code.sh
Source layout/recreate/default/120_confirm_wipedisk_disks.sh
Source layout/recreate/default/150_wipe_disks.sh
Source layout/recreate/default/200_run_layout_code.sh
Source layout/recreate/default/220_verify_layout.sh
Source layout/recreate/default/250_verify_mount.sh
Source restore/default/050_remount_async.sh
Source restore/BACULA/default/400_restore_backup.sh
Source restore/default/500_selinux_autorelabel.sh
Source restore/default/900_create_missing_directories.sh
Source restore/SUSE_LINUX/910_create_missing_directories.sh
Source restore/default/990_move_away_restored_files.sh
Source restore/default/995_remount_sync.sh

# grep -v '^#' etc/rear/local.conf
...
OUTPUT=USB
BACKUP=NETFS
BACKUP_URL=usb:///dev/disk/by-label/REAR-000
...

# usr/sbin/rear -s recover | egrep 'recreate/|restore/'
Source layout/recreate/default/100_confirm_layout_code.sh
Source layout/recreate/default/120_confirm_wipedisk_disks.sh
Source layout/recreate/default/150_wipe_disks.sh
Source layout/recreate/default/200_run_layout_code.sh
Source layout/recreate/default/220_verify_layout.sh
Source layout/recreate/default/250_verify_mount.sh
Source restore/default/050_remount_async.sh
Source restore/NETFS/default/100_mount_NETFS_path.sh
Source restore/NETFS/default/200_remove_relative_rsync_option.sh
Source restore/NETFS/default/380_prepare_multiple_isos.sh
Source restore/NETFS/default/400_restore_backup.sh
Source restore/NETFS/default/500_selinux_autorelabel.sh
Source restore/default/500_selinux_autorelabel.sh
Source restore/NETFS/Linux-i386/510_selinux_fixfiles_exclude_dirs.sh
Source restore/NETFS/default/510_set_capabilities.sh
Source restore/default/900_create_missing_directories.sh
Source restore/SUSE_LINUX/910_create_missing_directories.sh
Source restore/NETFS/default/980_umount_NETFS_dir.sh
Source restore/default/990_move_away_restored_files.sh
Source restore/default/995_remount_sync.sh
</code></pre>
<p>so for me also with only plain BACKUP=BACULA as a test<br />
the 'layout/recreate' stage is run only once as it should.</p>
<h4 id="jsmeix_commented_at_2022-06-30_1215"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2826#issuecomment-1171145330">2022-06-30 12:15</a>:<a class="headerlink" href="#jsmeix_commented_at_2022-06-30_1215" title="Permanent link">&para;</a></h4>
<p>It seems there were several "rear recover" processes<br />
running in parallel:</p>
<p>Those ReaR scripts are run two times:</p>
<pre><code>layout/prepare/default/310_remove_exclusions.sh
layout/prepare/default/320_apply_mappings.sh
layout/prepare/default/420_autoresize_last_partitions.sh
layout/prepare/default/430_autoresize_all_partitions.sh
layout/prepare/default/500_confirm_layout_file.sh
layout/prepare/default/510_list_dependencies.sh
layout/prepare/default/520_exclude_components.sh
layout/prepare/default/540_generate_device_code.sh
layout/prepare/default/550_finalize_script.sh
layout/prepare/default/600_show_unprocessed.sh
layout/prepare/default/610_exclude_from_restore.sh
layout/recreate/default/100_confirm_layout_code.sh
layout/recreate/default/200_run_layout_code.sh
layout/recreate/default/250_verify_mount.sh
restore/BACULA/default/400_restore_backup.sh
restore/default/050_remount_async.sh
restore/Fedora/050_copy_dev_files.sh
</code></pre>
<p>but other things are run even three times</p>
<pre><code>2022-06-14 12:41:35.888780755 Running mkinitrd...
2022-06-14 12:43:22.759435618 Running mkinitrd...
2022-06-14 12:44:26.001667243 Running mkinitrd...
</code></pre>
<h4 id="githopp192_commented_at_2022-06-30_1740"><img src="https://avatars.githubusercontent.com/u/32612067?u=b6007aaa015ff323addaf197670b509febc7c77c&v=4" width="50"><a href="https://github.com/Githopp192">Githopp192</a> commented at <a href="https://github.com/rear/rear/issues/2826#issuecomment-1171502584">2022-06-30 17:40</a>:<a class="headerlink" href="#githopp192_commented_at_2022-06-30_1740" title="Permanent link">&para;</a></h4>
<p>Thanks very much, Johannes.</p>
<p>I can not exclude that I made a mistake (do several runs) - if this were
the case - my apologies</p>
<h4 id="jsmeix_commented_at_2022-07-01_0818"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2826#issuecomment-1172074862">2022-07-01 08:18</a>:<a class="headerlink" href="#jsmeix_commented_at_2022-07-01_0818" title="Permanent link">&para;</a></h4>
<p>The issue is that normally it should not happen that<br />
several "rear recover" (or "rear mkrescue/mkbackup") processes<br />
can run in parallel because we have a check for that in usr/sbin/rear<br />
(I already had "some fun" with that check in the past ;-)</p>
<p>But that check does not yet work sufficiently reliable<br />
in particular not when 'rear' is run from a GitHub checkout/clone<br />
so the 'rear' program is /path/to/checkout/usr/sbin/rear</p>
<h4 id="jsmeix_commented_at_2022-07-01_0821"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2826#issuecomment-1172077790">2022-07-01 08:21</a>:<a class="headerlink" href="#jsmeix_commented_at_2022-07-01_0821" title="Permanent link">&para;</a></h4>
<p>Via<br />
<a href="https://github.com/rear/rear/commit/e04125b03d1ac2f10e965852e9f33d40fe913447">https://github.com/rear/rear/commit/e04125b03d1ac2f10e965852e9f33d40fe913447</a><br />
I enhanced the check in usr/sbin/rear<br />
for other simultaneously running 'rear'<br />
to let it find running 'rear' instances<br />
independent of how it was called by the user<br />
in particular also when 'rear' is run<br />
from a GitHub checkout/clone.</p>
<h4 id="jsmeix_commented_at_2022-07-01_0831"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2826#issuecomment-1172086004">2022-07-01 08:31</a>:<a class="headerlink" href="#jsmeix_commented_at_2022-07-01_0831" title="Permanent link">&para;</a></h4>
<p>@Githopp192 @pcahyna<br />
I assume my enhancement<br />
<a href="https://github.com/rear/rear/commit/e04125b03d1ac2f10e965852e9f33d40fe913447">https://github.com/rear/rear/commit/e04125b03d1ac2f10e965852e9f33d40fe913447</a><br />
does not help in this particular case here because<br />
<a href="https://github.com/rear/rear/files/8995598/rear.log">https://github.com/rear/rear/files/8995598/rear.log</a><br />
contains</p>
<pre><code>2022-06-14 12:23:55.694183313 Command line options: /bin/rear recover
</code></pre>
<p>so it seems in this particular case here the 'rear' program<br />
is not installed under a <code>/sbin/</code> (sub)-directory<br />
but under <code>/bin/</code> which is not what is checked.</p>
<p>For comparison how it looks for me<br />
on openSUSE Leap 15.3 with openSUSE's 'rear23a' RPM package</p>
<pre><code>2022-07-01 10:17:37.031049342 Command line options: /usr/sbin/rear -s mkrescue
</code></pre>
<p>where I called 'rear' as</p>
<pre><code># rear -s mkrescue
</code></pre>
<p>and on the same system from a GitHub checkout</p>
<pre><code>2022-07-01 10:28:30.283543904 Command line options: usr/sbin/rear -D -s mkrescue
</code></pre>
<p>where I called 'rear' as</p>
<pre><code># cd /path/to/checkout

# usr/sbin/rear -D -s mkrescue
</code></pre>
<h4 id="pcahyna_commented_at_2022-07-01_0833"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2826#issuecomment-1172088217">2022-07-01 08:33</a>:<a class="headerlink" href="#pcahyna_commented_at_2022-07-01_0833" title="Permanent link">&para;</a></h4>
<p>@jsmeix here the issue would be running multiple <code>rear recover</code> in
parallel, not multiple <code>rear mkrescue</code>. Where is <code>rear</code> found on the
rescue system when run from a Git checkout?</p>
<h4 id="jsmeix_commented_at_2022-07-01_0834"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2826#issuecomment-1172089522">2022-07-01 08:34</a>:<a class="headerlink" href="#jsmeix_commented_at_2022-07-01_0834" title="Permanent link">&para;</a></h4>
<p>@pcahyna<br />
ARGH! - I fear you are right - let me check...</p>
<h4 id="jsmeix_commented_at_2022-07-01_0859"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2826#issuecomment-1172111440">2022-07-01 08:59</a>:<a class="headerlink" href="#jsmeix_commented_at_2022-07-01_0859" title="Permanent link">&para;</a></h4>
<p>In the ReaR recovery system it is always</p>
<pre><code>/sbin:     symbolic link to bin
/usr/sbin: symbolic link to ../bin
/usr/bin:  symbolic link to ../bin
/bin:      directory
</code></pre>
<p>and the 'rear' bash script is <code>/bin/rear</code><br />
regardless if "rear mkrescue" was run from a Git checkout</p>
<pre><code># chroot /var/tmp/rear.dWgO3DKyGchoKRa/rootfs/

bash-4.4# type -a rear
rear is /sbin/rear
rear is /usr/sbin/rear
rear is /usr/bin/rear
rear is /bin/rear

bash-4.4# file /sbin /usr/sbin /usr/bin /bin     
/sbin:     symbolic link to bin
/usr/sbin: symbolic link to ../bin
/usr/bin:  symbolic link to ../bin
/bin:      directory

bash-4.4# echo $PATH
/sbin:/usr/sbin:/usr/local/sbin:/root/bin:/usr/local/bin:/usr/bin:/bin
</code></pre>
<p>or run from an installed RPM package</p>
<pre><code># chroot /tmp/rear.rMOyIy61Yg3EyNC/rootfs/

bash-4.4# type -a rear
rear is /sbin/rear
rear is /usr/sbin/rear
rear is /usr/bin/rear
rear is /bin/rear

bash-4.4# file /sbin /usr/sbin /usr/bin /bin
/sbin:     symbolic link to bin
/usr/sbin: symbolic link to ../bin
/usr/bin:  symbolic link to ../bin
/bin:      directory

bash-4.4# echo $PATH
/sbin:/usr/sbin:/usr/local/sbin:/root/bin:/usr/local/bin:/usr/bin:/bin
</code></pre>
<p>Interestingly <code>type -a rear</code> shows something different<br />
from inside a booted ReaR recovery system</p>
<pre><code>RESCUE localhost:~ # type -a rear
rear is /bin/rear

RESCUE localhost:~ # file /sbin /usr/sbin /usr/bin /bin
/sbin:     symbolic link to bin
/usr/sbin: symbolic link to ../bin
/usr/bin:  symbolic link to ../bin
/bin:      directory

RESCUE localhost:~ # echo $PATH
/bin
</code></pre>
<p>because there $PATH is only 'bin'<br />
and accordingly inside a booted ReaR recovery system one gets</p>
<pre><code>RESCUE localhost:~ # rear -D -s recover 1&gt;/dev/null

RESCUE localhost:~ # head /var/log/rear/rear-localhost.log
...
2022-07-01 10:48:24.647073881 Command line options: /bin/rear -D -s recover
</code></pre>
<p>q.e.d.</p>
<p>I need to further enhance that check in the 'rear' main script...</p>
<pre><code>RESCUE localhost:~ # pwd
/root

# ../bin/rear -D -s recover 1&gt;/dev/null &amp; sleep 1 ; ps auwx | grep rear
[1] 3789
root      3789 24.2  0.3  17236  6448 pts/0    S    11:02   0:00 /bin/bash ../bin/rear -D -s recover

RESCUE localhost:~ # head /var/log/rear/rear-localhost.log
...
2022-07-01 11:00:09.894053570 Command line options: ../bin/rear -D -s recover
</code></pre>
<p>so also in the ReaR recovery system one cannot<br />
rely on that it is called as '/bin/rear'</p>
<h4 id="jsmeix_commented_at_2022-07-01_0925"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2826#issuecomment-1172138188">2022-07-01 09:25</a>:<a class="headerlink" href="#jsmeix_commented_at_2022-07-01_0925" title="Permanent link">&para;</a></h4>
<p>When in the ReaR recovery system 'rear' is called normally like</p>
<pre><code>RESCUE localhost:~ # rear recover
</code></pre>
<p>then <code>$SCRIPT_FILE</code> is '/bin/rear'<br />
and the check works (also the non-enhanced check)</p>
<pre><code>RESCUE localhost:~ # rear -D recover &amp; rear -D recover
[1] 18691
ERROR: rear is already running, not starting again
RESCUE localhost:~ # Relax-and-Recover 2.6 / Git
Running rear recover (PID 18691 date 2022-07-01 11:24:03)
Command line options: /bin/rear -D recover
...
[Ctrl]+[C]
[1]+  Terminated              rear -D recover
</code></pre>
<p>The check fails when in the ReaR recovery system 'rear'<br />
is not called normally like</p>
<pre><code>RESCUE localhost:~ # ../bin/rear -D recover &amp; ../bin/rear -D recover
[1] 20315
Relax-and-Recover 2.6 / Git
Relax-and-Recover 2.6 / Git
Running rear recover (PID 20315 date 2022-07-01 11:28:26)
Running rear recover (PID 20316 date 2022-07-01 11:28:26)
Command line options: ../bin/rear -D recover
Command line options: ../bin/rear -D recover
...
</code></pre>
<p>or</p>
<pre><code>RESCUE localhost:~ # cd /bin

RESCUE localhost:/bin # ./rear -D recover &amp; ./rear -D recover
[1] 21850
Relax-and-Recover 2.6 / Git
Relax-and-Recover 2.6 / Git
Running rear recover (PID 21850 date 2022-07-01 11:30:53)
Running rear recover (PID 21851 date 2022-07-01 11:30:53)
Command line options: ./rear -D recover
Command line options: ./rear -D recover
...
</code></pre>
<p>but the last case works with the enhanced check because<br />
it also checks for <code>"./$PROGRAM"</code> which is <code>./rear</code></p>
<h4 id="jsmeix_commented_at_2022-07-01_1031"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2826#issuecomment-1172199397">2022-07-01 10:31</a>:<a class="headerlink" href="#jsmeix_commented_at_2022-07-01_1031" title="Permanent link">&para;</a></h4>
<p>Via<br />
<a href="https://github.com/rear/rear/commit/63e0540e3617d1b7a024f7c188d5135cce733095">https://github.com/rear/rear/commit/63e0540e3617d1b7a024f7c188d5135cce733095</a><br />
I added a comment in usr/sbin/rear that describes<br />
how the check for other simultaneously running 'rear'<br />
works from inside a booted ReaR recovery system<br />
cf.
<a href="https://github.com/rear/rear/issues/2826#issuecomment-1172111440">https://github.com/rear/rear/issues/2826#issuecomment-1172111440</a><br />
and I described the limitations of that check,<br />
cf.
<a href="https://github.com/rear/rear/issues/2826#issuecomment-1172138188">https://github.com/rear/rear/issues/2826#issuecomment-1172138188</a></p>
<p>In particular this check is not meant to detect any possible way<br />
how another rear instance might have been called.</p>
<h4 id="githopp192_commented_at_2022-07-04_2044"><img src="https://avatars.githubusercontent.com/u/32612067?u=b6007aaa015ff323addaf197670b509febc7c77c&v=4" width="50"><a href="https://github.com/Githopp192">Githopp192</a> commented at <a href="https://github.com/rear/rear/issues/2826#issuecomment-1174319231">2022-07-04 20:44</a>:<a class="headerlink" href="#githopp192_commented_at_2022-07-04_2044" title="Permanent link">&para;</a></h4>
<p>It's really a fantastic Job you do @jsmeix - i'm very impressed how much
knowledge you've got about all the different &amp; possible recovery
scenarios. Really, really excellent work!</p>
<h4 id="jsmeix_commented_at_2022-07-05_0648"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2826#issuecomment-1174683003">2022-07-05 06:48</a>:<a class="headerlink" href="#jsmeix_commented_at_2022-07-05_0648" title="Permanent link">&para;</a></h4>
<p>@Githopp192<br />
thank you for your plaudit.</p>
<p>Regardless how much experience I get<br />
there is always at least one unnoticed case left<br />
and then I need other's help like here @pcahyna via his<br />
<a href="https://github.com/rear/rear/issues/2826#issuecomment-1172088217">https://github.com/rear/rear/issues/2826#issuecomment-1172088217</a><br />
to get some more cases included but even then there<br />
will still be at least another unnoticed case left<br />
and so on ad infinitum ;-)</p>
<p>This is the reason behind why</p>
<pre><code>There is no such thing as a disaster recovery solution that "just works".
</code></pre>
<p><a href="https://en.opensuse.org/SDB:Disaster_Recovery#Inappropriate_expectations">https://en.opensuse.org/SDB:Disaster_Recovery#Inappropriate_expectations</a></p>
<h4 id="jsmeix_commented_at_2022-07-07_0630"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2826#issuecomment-1177147166">2022-07-07 06:30</a>:<a class="headerlink" href="#jsmeix_commented_at_2022-07-07_0630" title="Permanent link">&para;</a></h4>
<p>I assume this issue is sufficiently solved so I can close it.<br />
Further comments may be added regardless that it is closed<br />
or it could be reopened if needed.</p>
<h4 id="githopp192_commented_at_2022-07-07_0703"><img src="https://avatars.githubusercontent.com/u/32612067?u=b6007aaa015ff323addaf197670b509febc7c77c&v=4" width="50"><a href="https://github.com/Githopp192">Githopp192</a> commented at <a href="https://github.com/rear/rear/issues/2826#issuecomment-1177171643">2022-07-07 07:03</a>:<a class="headerlink" href="#githopp192_commented_at_2022-07-07_0703" title="Permanent link">&para;</a></h4>
<p>Yes, Johannes - you can close it. Thx for investigating.<br />
Btw - i did a full recovery yesterday on the same server and the
"automatic recover" did run smoothly without any error.</p>
<p>I even had another disc that was larger in the mdadm compound - and REAR
automatically enlarged it.</p>
<p>Perfect.</p>
<p>If you may be interested in the REAR-logs - just tell.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2022 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2022-06-21.2826.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
