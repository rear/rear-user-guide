<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#2488 PR merged: Support OPAL 2 self-encrypting NVMe disk drives (fix #2475) - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#2488 PR merged: Support OPAL 2 self-encrypting NVMe disk drives (fix #2475)";
        var mkdocs_page_input_path = "issues/2020-09-04.2488.pr.merged.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#2488 PR merged: Support OPAL 2 self-encrypting NVMe disk drives (fix #2475)</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="2488_pr_merged_support_opal_2_self-encrypting_nvme_disk_drives_fix_2475"><a href="https://github.com/rear/rear/pull/2488">#2488 PR</a> <code>merged</code>: Support OPAL 2 self-encrypting NVMe disk drives (fix #2475)<a class="headerlink" href="#2488_pr_merged_support_opal_2_self-encrypting_nvme_disk_drives_fix_2475" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>fixed / solved / done</code></p>
<h4 id="olivero2_opened_issue_at_2020-09-04_0843"><img src="https://avatars.githubusercontent.com/u/4660803?v=4" width="50"><a href="https://github.com/OliverO2">OliverO2</a> opened issue at <a href="https://github.com/rear/rear/pull/2488">2020-09-04 08:43</a>:<a class="headerlink" href="#olivero2_opened_issue_at_2020-09-04_0843" title="Permanent link">&para;</a></h4>
<p>This patch enables support for OPAL 2 self-encrypting NVMe disk drives.</p>
<p>I will amend this PR and/or propose merging it as soon as testing
results come in (cf. progress in #2475).</p>
<h4 id="jsmeix_commented_at_2020-09-18_0915"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/2488#issuecomment-694755532">2020-09-18 09:15</a>:<a class="headerlink" href="#jsmeix_commented_at_2020-09-18_0915" title="Permanent link">&para;</a></h4>
<p>@OliverO2<br />
thank you for your improvement in<br />
<a href="https://github.com/rear/rear/pull/2488/commits/48669d230486adee85755f92bf5c6a0c5b5a7f92">https://github.com/rear/rear/pull/2488/commits/48669d230486adee85755f92bf5c6a0c5b5a7f92</a></p>
<p>It is such a pleasure for my eyes!<br />
Perfect code that is 100% to the point with a complete explanatory
comment<br />
and that with even the same number of characters as my clumsy attempt
before.</p>
<p>Have a nice and relaxed weekend!</p>
<h4 id="olivero2_commented_at_2020-09-18_0920"><img src="https://avatars.githubusercontent.com/u/4660803?v=4" width="50"><a href="https://github.com/OliverO2">OliverO2</a> commented at <a href="https://github.com/rear/rear/pull/2488#issuecomment-694757614">2020-09-18 09:20</a>:<a class="headerlink" href="#olivero2_commented_at_2020-09-18_0920" title="Permanent link">&para;</a></h4>
<p>@jsmeix<br />
My pleasure, I just happend to cross-check and found out that <code>extglob</code>
is actually enabled throughout ReaR. :-)</p>
<p>Have a nice weekend, too!</p>
<h4 id="jsmeix_commented_at_2020-09-18_1025"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/2488#issuecomment-694788519">2020-09-18 10:25</a>:<a class="headerlink" href="#jsmeix_commented_at_2020-09-18_1025" title="Permanent link">&para;</a></h4>
<p>Yes, there are some well hidded 'secrets' (like the global <code>extglob</code>) in
ReaR.</p>
<p>Right now I adapted the "Beware of the emptiness" section in<br />
<a href="https://github.com/rear/rear/wiki/Coding-Style">https://github.com/rear/rear/wiki/Coding-Style</a><br />
so that it now at least mentiones that also <code>extglob</code> is globally set as
follows:</p>
<pre><code>There is a global 'shopt -s nullglob extglob' setting in usr/sbin/rear
where the 'nullglob' setting means that ...
</code></pre>
<h4 id="enzolis_commented_at_2020-10-27_1450"><img src="https://avatars.githubusercontent.com/u/12384667?v=4" width="50"><a href="https://github.com/enzolis">enzolis</a> commented at <a href="https://github.com/rear/rear/pull/2488#issuecomment-717297914">2020-10-27 14:50</a>:<a class="headerlink" href="#enzolis_commented_at_2020-10-27_1450" title="Permanent link">&para;</a></h4>
<p>@OliverO2<br />
Thanks for providing these patches.<br />
Previously, the disks were unlocked but "unlocked_device_count" did
not increase due to failing partprobe. Thus the password prompt was
showing up again.<br />
Your patches fix the issue for me (NVMe disks using UEFI boot).</p>
<p>I would like to make you aware that at least in my PBA environment the
shell options nullglob and extglob are NOT set (contrary to the
situation in the booted OS). Thus the shell was complaining about
incorrect syntax.<br />
Adding "shopt -s nullglob extglob" to the top of "unlock-opal-disks",
re-creation and upload of PBA fixed this issue, but I am not sure if it
is the correct place to put it.</p>
<h4 id="olivero2_commented_at_2020-10-30_1344"><img src="https://avatars.githubusercontent.com/u/4660803?v=4" width="50"><a href="https://github.com/OliverO2">OliverO2</a> commented at <a href="https://github.com/rear/rear/pull/2488#issuecomment-719560733">2020-10-30 13:44</a>:<a class="headerlink" href="#olivero2_commented_at_2020-10-30_1344" title="Permanent link">&para;</a></h4>
<p>@enzolis<br />
Thank you so much for your feedback. Good to hear that it works in
general. I'll take care of safely integrating
<code>shopt -s nullglob extglob</code>. It is my plan to come up with a
ready-to-merge solution within 7 days.</p>
<h4 id="olivero2_commented_at_2020-11-03_1328"><img src="https://avatars.githubusercontent.com/u/4660803?v=4" width="50"><a href="https://github.com/OliverO2">OliverO2</a> commented at <a href="https://github.com/rear/rear/pull/2488#issuecomment-721115317">2020-11-03 13:28</a>:<a class="headerlink" href="#olivero2_commented_at_2020-11-03_1328" title="Permanent link">&para;</a></h4>
<p>With the successful test report by @enzolis and the fix for missing
'nullglob extglob' options I'd consider this patch ready to merge.</p>
<h4 id="jsmeix_commented_at_2020-11-03_1355"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/2488#issuecomment-721130250">2020-11-03 13:55</a>:<a class="headerlink" href="#jsmeix_commented_at_2020-11-03_1355" title="Permanent link">&para;</a></h4>
<p>@rear/contributors<br />
please have a look.<br />
Perhaps you see some obvious issues.<br />
If there are no objections I would like to merge it on Thursday
(05.Oct.2020) afternoon.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2025 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2020-09-04.2488.pr.merged.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
