<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#839 Issue closed: /usr/share/rear/backup/NETFS/default/50_make_backup.sh: line 133: 2.16061e+09: syntax error: invalid arithmetic operator (error token is ".16061e+09") - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#839 Issue closed: /usr/share/rear/backup/NETFS/default/50_make_backup.sh: line 133: 2.16061e+09: syntax error: invalid arithmetic operator (error token is \".16061e+09\")";
        var mkdocs_page_input_path = "issues/2016-05-15.839.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#839 Issue closed: /usr/share/rear/backup/NETFS/default/50_make_backup.sh: line 133: 2.16061e+09: syntax error: invalid arithmetic operator (error token is ".16061e+09")</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="839_issue_closed_usrsharerearbackupnetfsdefault50_make_backupsh_line_133_216061e09_syntax_error_invalid_arithmetic_operator_error_token_is_16061e09"><a href="https://github.com/rear/rear/issues/839">#839 Issue</a> <code>closed</code>: /usr/share/rear/backup/NETFS/default/50_make_backup.sh: line 133: 2.16061e+09: syntax error: invalid arithmetic operator (error token is ".16061e+09")<a class="headerlink" href="#839_issue_closed_usrsharerearbackupnetfsdefault50_make_backupsh_line_133_216061e09_syntax_error_invalid_arithmetic_operator_error_token_is_16061e09" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>waiting for info</code>, <code>support / question</code></p>
<h4 id="alxndr13_opened_issue_at_2016-05-15_1718"><img src="https://avatars.githubusercontent.com/u/13996238?u=b79ed506911b1b1366646de3e40489ea50ae53f9&v=4" width="50"><a href="https://github.com/alxndr13">alxndr13</a> opened issue at <a href="https://github.com/rear/rear/issues/839">2016-05-15 17:18</a>:<a class="headerlink" href="#alxndr13_opened_issue_at_2016-05-15_1718" title="Permanent link">&para;</a></h4>
<ul>
<li>rear version:<br />
    Relax-and-Recover 1.18 / Git</li>
<li>OS version:</li>
</ul>
<!-- -->

<pre><code>Distributor ID: elementary OS
Description:    elementary OS Freya
Release:    0.3.2
Codename:   freya
</code></pre>
<ul>
<li>rear configuration file: (/etc/rear/local.conf)</li>
</ul>
<!-- -->

<pre><code># Default is to create Relax-and-Recover rescue media as ISO image
# set OUTPUT to change that
# set BACKUP to activate an automated (backup and) restore of your data
# Possible configuration values can be found in /usr/share/rear/conf/default.conf
#
# This file (local.conf) is intended for manual configuration. For configuration
# through packages and other automated means we recommend creating a new
# file named site.conf next to this file and to leave the local.conf as it is. 
# Our packages will never ship with a site.conf.
OUTPUT=USB
BACKUP=NETFS
BACKUP_URL=usb:///dev/disk/by-label/REAR-000
</code></pre>
<ul>
<li>Brief description of the issue:</li>
</ul>
<p>Hangs after creating the tar archive.. looked in the logs and found this
issue..</p>
<h4 id="jsmeix_commented_at_2016-05-17_1037"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/839#issuecomment-219681038">2016-05-17 10:37</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-05-17_1037" title="Permanent link">&para;</a></h4>
<p>Without debug logging information<br />
it is in parctice impossible to guess the reason<br />
what lets it fail in your particular case<br />
in your particular environment on your particular system<br />
(for me it "just works" but I do not run "elementary OS Freya").</p>
<p>Because rear is written entirely as bash scripts,<br />
debugging rear is usual bash debugging.</p>
<p>To debug rear run it both with the '-d' option (log debug messages) and
with the '-D' option (debugscript mode) to log commands and their
arguments as they are executed (via 'set -x') like</p>
<pre>
rear -d -D mkbackup
</pre>

<p>Afterwards inspect the rear log file for further analysis.<br />
The rear log files get stored in the /var/log/rear/ directory.</p>
<p>At least post here an excerpt of the rear debug log file<br />
with some lines before the error message appears.<br />
Try to imagine how many lines before the error message<br />
seem to be related to the error.</p>
<p>The relevant code in backup/NETFS/default/50_make_backup.sh<br />
seems to be</p>
<pre>
   127          (tar)
   128                  while sleep 1 ; kill -0 $BackupPID 2&gt;&amp;8; do
   129                          #blocks="$(stat -c %b ${backuparchive})"
   130                          #size="$((blocks*512))"
   131                          size="$(stat -c %s ${backuparchive}* | awk '{s+=$1} END {print s}')"
   132                          #echo -en "\e[2K\rArchived $((size/1024/1024)) MiB [avg $((size/1024/(SECONDS-starttime))) KiB/sec]"
   133                          ProgressInfo "Archived $((size/1024/1024)) MiB [avg $((size/1024/(SECONDS-starttime))) KiB/sec]"
   134                  done
   135                  ;;
</pre>

<p>I guess something with "stat -c" might not work in your case<br />
as expected?</p>
<p>Perhaps you can adapt that code so that it also works<br />
in your case.</p>
<h4 id="gdha_commented_at_2016-05-17_1454"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/839#issuecomment-219743543">2016-05-17 14:54</a>:<a class="headerlink" href="#gdha_commented_at_2016-05-17_1454" title="Permanent link">&para;</a></h4>
<p>@alxndr13 The problem might be that Elementary OS is not yet a known OS
within rear. Try <code>rear dump</code> to see more details. I believe it is based
on Ubuntu, no?</p>
<h4 id="jsmeix_commented_at_2016-09-21_1335"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/839#issuecomment-248614137">2016-09-21 13:35</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-09-21_1335" title="Permanent link">&para;</a></h4>
<p>No feedback since 4 month =&gt; closing.<br />
If needed it can be reopened.</p>
<h4 id="apapierz_commented_at_2017-02-27_1442"><img src="https://avatars.githubusercontent.com/u/26064190?v=4" width="50"><a href="https://github.com/apapierz">apapierz</a> commented at <a href="https://github.com/rear/rear/issues/839#issuecomment-282739114">2017-02-27 14:42</a>:<a class="headerlink" href="#apapierz_commented_at_2017-02-27_1442" title="Permanent link">&para;</a></h4>
<p>I had similar issue in Debian 5.0. The reason was the way how awk prints
numbers above 2G which is reported within ProgerssInfo function. You
will get the error as mentionned only if your backup i larger than 2GB.</p>
<p>In Debian 5.0:<br />
<code>stat -c %s backup.tar.gz |awk '{s+=$1} END {print s}' 3,29123e+09</code></p>
<p>The same file in Debian 7.0 is:<br />
<code>stat -c %s backup.tar.gz |awk '{s+=$1} END {print s}' 3291226398</code></p>
<p>Simply change line 131 in
/usr/share/rear/backup/NETFS/default/50_make_backup.sh from</p>
<p><code>size="$(stat -c %s ${backuparchive}* | awk '{s+=$1} END {print s}')"</code></p>
<p>to</p>
<p><code>size="$(stat -c %s ${backuparchive}* | awk '{s=$1} END {print s}')"</code><br />
or<br />
<code>size="$(stat -c %s ${backuparchive}* | awk '{s+=$1} END {printf "%d\n",s}')"</code></p>
<p>It solved my problem.</p>
<p>Regards.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2023 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2016-05-15.839.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
