<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#2148 Issue closed: 900_copy_ramdisk.sh seems to duplicate what 950_copy_result_files.sh does - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#2148 Issue closed: 900_copy_ramdisk.sh seems to duplicate what 950_copy_result_files.sh does";
        var mkdocs_page_input_path = "issues/2019-05-23.2148.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#2148 Issue closed: 900_copy_ramdisk.sh seems to duplicate what 950_copy_result_files.sh does</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="2148_issue_closed_900_copy_ramdisksh_seems_to_duplicate_what_950_copy_result_filessh_does"><a href="https://github.com/rear/rear/issues/2148">#2148 Issue</a> <code>closed</code>: 900_copy_ramdisk.sh seems to duplicate what 950_copy_result_files.sh does<a class="headerlink" href="#2148_issue_closed_900_copy_ramdisksh_seems_to_duplicate_what_950_copy_result_filessh_does" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>documentation</code>, <code>cleanup</code>, <code>fixed / solved / done</code></p>
<h4 id="jsmeix_opened_issue_at_2019-05-23_0916"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> opened issue at <a href="https://github.com/rear/rear/issues/2148">2019-05-23 09:16</a>:<a class="headerlink" href="#jsmeix_opened_issue_at_2019-05-23_0916" title="Permanent link">&para;</a></h4>
<p>I use the current ReaR GitHub master code.</p>
<p>I never used <code>OUTPUT=RAMDISK</code> before so<br />
perhaps I do not understand how it meant to be used<br />
but my excuse is that its usage is not really documented.</p>
<p>I noticed its usage in<br />
<a href="https://github.com/rear/rear/pull/2142#issuecomment-495010023">https://github.com/rear/rear/pull/2142#issuecomment-495010023</a></p>
<p>With <code>OUTPUT=RAMDISK</code> I get<br />
(excerpt - only the <code>ouput</code> scripts)</p>
<pre><code># usr/sbin/rear -s mkrescue
...
Source output/default/010_set_umask.sh
Source output/default/100_mount_output_path.sh
Source output/default/150_save_copy_of_prefix_dir.sh
Source output/default/200_make_boot_dir.sh
Source output/default/200_make_prefix_dir.sh
Source output/default/250_create_lock.sh
Source output/default/400_copy_disk_struct_files.sh
Source output/RAMDISK/Linux-i386/900_copy_ramdisk.sh
Source output/default/940_grub2_rescue.sh
Source output/default/940_grub_rescue.sh
Source output/default/950_copy_result_files.sh
Source output/default/950_email_result_files.sh
Source output/default/970_remove_lock.sh
Source output/default/980_umount_output_dir.sh
</code></pre>
<p>where both</p>
<pre><code>output/RAMDISK/Linux-i386/900_copy_ramdisk.sh
</code></pre>
<p>and</p>
<pre><code>output/default/950_copy_result_files.sh
</code></pre>
<p>are run but as far as I see both scripts do basically the same.</p>
<p>Therefore I wonder if output/RAMDISK/Linux-i386/900_copy_ramdisk.sh<br />
is needed at all or if that should be better integrated into<br />
the output/default/950_copy_result_files.sh</p>
<p>Furthermore the only <code>RAMDISK</code> scripts are</p>
<pre><code>usr/share/rear/output/RAMDISK/Linux-i386/900_copy_ramdisk.sh
usr/share/rear/conf/templates/RESULT_usage_RAMDISK.txt
</code></pre>
<p>so that I wonder what <code>RAMDISK</code> is meant to be used for.</p>
<p>@rear/contributors<br />
can you help me to understand how <code>RAMDISK</code><br />
is meant to be used?</p>
<h4 id="jsmeix_commented_at_2019-05-23_1032"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2148#issuecomment-495164153">2019-05-23 10:32</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-05-23_1032" title="Permanent link">&para;</a></h4>
<p>It seems</p>
<pre><code>output/PXE/default/820_copy_to_net.sh
</code></pre>
<p>is another one that seems to duplicate what</p>
<pre><code>output/default/950_copy_result_files.sh
</code></pre>
<p>does.</p>
<p>But as for <code>OUTPUT=RAMDISK</code> I may also misunderstand<br />
something because I never used <code>OUTPUT=PXE</code>.</p>
<h4 id="gdha_commented_at_2019-05-23_1047"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/2148#issuecomment-495168495">2019-05-23 10:47</a>:<a class="headerlink" href="#gdha_commented_at_2019-05-23_1047" title="Permanent link">&para;</a></h4>
<p>@jsmeix @jhoekx I believe RAMDISK was developed by Jeroen to have a
faster test cyclus (booting from RAM is faster then from ISO)</p>
<h4 id="jsmeix_commented_at_2019-05-23_1112"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2148#issuecomment-495175058">2019-05-23 11:12</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-05-23_1112" title="Permanent link">&para;</a></h4>
<p>But the only files that contain <code>RAMDISK</code> are</p>
<pre><code>usr/share/rear/restore/DUPLICITY/default/400_restore_duplicity.sh
usr/share/rear/output/RAMDISK/Linux-i386/900_copy_ramdisk.sh
usr/share/rear/lib/validated/Arch/rolling/i386.txt
usr/share/rear/conf/default.conf
</code></pre>
<p>so that output/RAMDISK/Linux-i386/900_copy_ramdisk.sh<br />
is the only script for <code>OUTPUT=RAMDISK</code>.</p>
<p>As far as I see it does not create any kind of bootable ramdisk.</p>
<p>What is does is to only copy ReaR's initrd and the kernel<br />
to an OUTPUT_URL location.</p>
<p>This matches what <code>man rear</code> tells</p>
<pre><code>OUTPUT=RAMDISK
    Create only the Relax-and-Recover initramfs.
</code></pre>
<p>i.e. nothing about creating a (bootable) ramdisk.</p>
<h4 id="jsmeix_commented_at_2019-05-23_1128"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2148#issuecomment-495179378">2019-05-23 11:28</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-05-23_1128" title="Permanent link">&para;</a></h4>
<p>To mee it looks as if <code>OUTPUT=RAMDISK</code> is basically<br />
what @mutable-dan and I need for ReaR on IBM Z<br />
where we like to get the plain ReaR initrd and the kernel<br />
copied as is to our OUTPUT_URL location which is done via<br />
output/default/950_copy_result_files.sh<br />
provided RESULT_FILES contains KERNEL_FILE and<br />
ReaR's initrd (via $TMP_DIR/$REAR_INITRD_FILENAME).</p>
<p>To get that done I made a quick and dirty new script<br />
usr/share/rear/output/IPL/Linux-s390/800_create_ipl.sh<br />
cf.
<a href="https://github.com/rear/rear/pull/2142#issuecomment-494426331">https://github.com/rear/rear/pull/2142#issuecomment-494426331</a><br />
plus I used a new <code>OUTPUT=IPL</code> for it because at that time<br />
I did not know about <code>OUTPUT=RAMDISK</code>.</p>
<p>Now I think I may better cleanup and adapt the existing<br />
output/RAMDISK/Linux-i386/900_copy_ramdisk.sh<br />
and use <code>OUTPUT=RAMDISK</code> - provided I understand<br />
how it is meant to be used to avoid regressions if I adapt<br />
output/RAMDISK/Linux-i386/900_copy_ramdisk.sh</p>
<h4 id="jsmeix_commented_at_2019-05-23_1229"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2148#issuecomment-495198179">2019-05-23 12:29</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-05-23_1229" title="Permanent link">&para;</a></h4>
<p>I wonder why 900_copy_ramdisk.sh is an architecture dependent script<br />
cf.
<a href="https://github.com/rear/rear/pull/2142#issuecomment-495196467">https://github.com/rear/rear/pull/2142#issuecomment-495196467</a></p>
<p>I think there should be no usr/share/rear/output/RAMDISK/Linux-i386<br />
but only a usr/share/rear/output/RAMDISK/default/900_copy_ramdisk.sh</p>
<h4 id="jsmeix_commented_at_2019-05-23_1239"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2148#issuecomment-495201287">2019-05-23 12:39</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-05-23_1239" title="Permanent link">&para;</a></h4>
<p>An initial proposal for a completely overhauled 900_copy_ramdisk.sh<br />
as an architecture independent script</p>
<pre><code>usr/share/rear/output/RAMDISK/default/900_copy_ramdisk.sh
</code></pre>
<p>is shown in<br />
<a href="https://github.com/rear/rear/pull/2142#issuecomment-495200737">https://github.com/rear/rear/pull/2142#issuecomment-495200737</a></p>
<h4 id="jsmeix_commented_at_2019-05-28_1009"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2148#issuecomment-496453656">2019-05-28 10:09</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-05-28_1009" title="Permanent link">&para;</a></h4>
<p>With
<a href="https://github.com/rear/rear/pull/2149">https://github.com/rear/rear/pull/2149</a><br />
this issue is (hopefully) fixed.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2023 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2019-05-23.2148.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
