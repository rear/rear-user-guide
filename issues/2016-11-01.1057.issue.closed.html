<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#1057 Issue closed: Restore via ISO swaps disks /dev/sda &lt;==&gt; /dev/sdb - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#1057 Issue closed: Restore via ISO swaps disks /dev/sda \u0026lt;==\u0026gt; /dev/sdb";
        var mkdocs_page_input_path = "issues/2016-11-01.1057.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_nas.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../development/squash-git-log-commments.html">How to squash git log comments into one line</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#1057 Issue closed: Restore via ISO swaps disks /dev/sda &lt;==&gt; /dev/sdb</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="1057_issue_closed_restore_via_iso_swaps_disks_devsda_devsdb"><a href="https://github.com/rear/rear/issues/1057">#1057 Issue</a> <code>closed</code>: Restore via ISO swaps disks /dev/sda &lt;==&gt; /dev/sdb<a class="headerlink" href="#1057_issue_closed_restore_via_iso_swaps_disks_devsda_devsdb" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>bug</code>, <code>support / question</code>,
<code>fixed / solved / done</code></p>
<h4 id="adrian987654321_opened_issue_at_2016-11-01_1430"><img src="https://avatars.githubusercontent.com/u/23192859?v=4" width="50"><a href="https://github.com/Adrian987654321">Adrian987654321</a> opened issue at <a href="https://github.com/rear/rear/issues/1057">2016-11-01 14:30</a>:<a class="headerlink" href="#adrian987654321_opened_issue_at_2016-11-01_1430" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>rear version (/usr/sbin/rear -V):<br />
    Relax-and-Recover 1.17.2 / Git</p>
</li>
<li>
<p>OS version (cat /etc/rear/os.conf or lsb_release -a):<br />
    OS_VENDOR=SUSE_LINUX<br />
    OS_VERSION=12</p>
</li>
<li>
<p>rear configuration files (cat /etc/rear/site.conf or cat
    /etc/rear/local.conf):</p>
</li>
</ul>
<!-- -->

<pre><code>cat /etc/rear/local.conf
# Create Relax-and-Recover rescue media as ISO image
OUTPUT=ISO
BACKUP=TSM
</code></pre>
<ul>
<li>
<p>Brief description of the issue<br />
    Running on a VM with two disks, one 50GiB and the other 80GiB. When
    running through the menus the disks are swapped over /dev/sda
    becomes /dev/sdb and /dev/sdb becomes /dev/sda. This is booting the
    ISO image so I don't have a log file to paste in to this message. I
    do however have a couple of screen shots but cant paste them in to
    the messsage.</p>
</li>
<li>
<p>Work-around, if any<br />
    No work around</p>
</li>
</ul>
<h4 id="adrian987654321_commented_at_2016-11-04_1332"><img src="https://avatars.githubusercontent.com/u/23192859?v=4" width="50"><a href="https://github.com/Adrian987654321">Adrian987654321</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-258431657">2016-11-04 13:32</a>:<a class="headerlink" href="#adrian987654321_commented_at_2016-11-04_1332" title="Permanent link">&para;</a></h4>
<p>This is the first part of the output after booting from the ISO image</p>
<pre><code>Compairing disks.

Device sda has size 85899345920, 53687091200 expected
Device sdb has size 53687091200, 85899345920 expected
Switching to manual disk layout configuration.
This is the disk mapping table
    /dev/sda /dev/sdb
    /dev/sdb /dev/sda
 Please confirm that 'var/lib/rear/layout/disklayout.conf' is as you expect.
</code></pre>
<p>The disk have been switched!</p>
<p>Can anyone shed any light on this and how to resolve the issue.</p>
<h4 id="gozora_commented_at_2016-11-04_1344"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-258434459">2016-11-04 13:44</a>:<a class="headerlink" href="#gozora_commented_at_2016-11-04_1344" title="Permanent link">&para;</a></h4>
<p>I've run through restore process several times, but did not had the
<s>luck</s> chance to see something like this.<br />
@Adrian987654321 maybe you could give me a hint, how to reproduce this?</p>
<h4 id="adrian987654321_commented_at_2016-11-04_1528"><img src="https://avatars.githubusercontent.com/u/23192859?v=4" width="50"><a href="https://github.com/Adrian987654321">Adrian987654321</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-258462780">2016-11-04 15:28</a>:<a class="headerlink" href="#adrian987654321_commented_at_2016-11-04_1528" title="Permanent link">&para;</a></h4>
<p>I'm at a bit of a loss to explain what has happened.</p>
<p>All our SLES11 servers use rear 1.14 and work perfectly. I took the<br />
opportunity to upgrade as part of the move to SLES12 so am now using
rear<br />
1.17. Here are two screenshots of the error message..</p>
<p>Any help you can offer is gratefully appreciated.</p>
<p>[image: Inline images 1]</p>
<p>[image: Inline images 2]</p>
<h4 id="gdha_commented_at_2016-11-04_1539"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-258465761">2016-11-04 15:39</a>:<a class="headerlink" href="#gdha_commented_at_2016-11-04_1539" title="Permanent link">&para;</a></h4>
<p>@Adrian987654321 perhaps pasting the content of
<code>/var/lib/rear/layout/disklayout.conf</code> could help us as well</p>
<h4 id="gozora_commented_at_2016-11-04_1546"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-258467998">2016-11-04 15:46</a>:<a class="headerlink" href="#gozora_commented_at_2016-11-04_1546" title="Permanent link">&para;</a></h4>
<p>Is it only me, or are the screenshots really missing?</p>
<h4 id="adrian987654321_commented_at_2016-11-04_1550"><img src="https://avatars.githubusercontent.com/u/23192859?v=4" width="50"><a href="https://github.com/Adrian987654321">Adrian987654321</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-258469312">2016-11-04 15:50</a>:<a class="headerlink" href="#adrian987654321_commented_at_2016-11-04_1550" title="Permanent link">&para;</a></h4>
<p>gdha</p>
<p>Thanks for the help, this is the disklayout.conf file contents</p>
<pre><code>disk /dev/sda 53687091200 msdos
part /dev/sda 279659520 1048576 primary boot /dev/sda1
part /dev/sda 53406383104 280708096 primary lvm /dev/sda2
lvmdev /dev/system /dev/sda2 lDaxch-gQmT-aEzw-CPnO-gNhl-vNA7-QmJZO7
104309342
lvmgrp /dev/system 4096 12732 52150272
lvmvol /dev/system lvhome 768 6291456
lvmvol /dev/system lvopt 384 3145728
lvmvol /dev/system lvperflog 128 1048576
lvmvol /dev/system lvroot 381 3121152
lvmvol /dev/system lvsysmon 64 524288
lvmvol /dev/system lvtmp 512 4194304
lvmvol /dev/system lvusr 768 6291456
lvmvol /dev/system lvvar 512 4194304
lvmvol /dev/system lvvarlog 512 4194304
lvmvol /dev/system lvvarlogaudit 512 4194304
lvmvol /dev/system lvswap 4096 33554432
lvmvol /dev/system lvsplunk 512 4194304

# Filesystems (only ext2,ext3,ext4,vfat,xfs,reiserfs,btrfs are supported).

# Format: fs &lt;device&gt; &lt;mountpoint&gt; &lt;fstype&gt; [uuid=&lt;uuid&gt;] [label=&lt;label&gt;]

[&lt;attributes&gt;]
fs /dev/mapper/system-lvhome /home btrfs
uuid=eb6aceaf-3f18-44ab-8f6d-e09fb53c23a5 label=
options=rw,nodev,relatime,space_cache,subvolid=256,subvol=/@
fs /dev/mapper/system-lvopt /opt btrfs
uuid=d9d5c837-a203-4429-9cd2-60d56c066636 label=
options=rw,relatime,space_cache,subvolid=256,subvol=/@
fs /dev/mapper/system-lvperflog /perflog btrfs
uuid=109d9b2c-75b1-4974-8b72-d63e6af5dff7 label=
options=rw,relatime,space_cache,subvolid=256,subvol=/@
fs /dev/mapper/system-lvroot / btrfs
uuid=464b2ed0-f4f1-4b21-b96d-88c378c6596f label=
options=rw,relatime,space_cache,subvolid=256,subvol=/@
fs /dev/mapper/system-lvsplunk /opt/splunk btrfs
uuid=b98df3f8-5182-45ff-957e-ad5c586188f8 label=
options=rw,relatime,space_cache,subvolid=5,subvol=/
fs /dev/mapper/system-lvsysmon /sysmon btrfs
uuid=796d681c-5e05-4839-9f52-b4f992196533 label=
options=rw,relatime,space_cache,subvolid=256,subvol=/@
fs /dev/mapper/system-lvtmp /tmp btrfs
uuid=7cc20f81-c6e6-4026-adce-d45cc00c1add label=
options=rw,nosuid,nodev,noexec,relatime,space_cache,subvolid=257,subvol=/@
fs /dev/mapper/system-lvusr /usr btrfs
uuid=21c14351-fb17-4f75-906f-4a105c26f042 label=
options=rw,relatime,space_cache,subvolid=257,subvol=/@
fs /dev/mapper/system-lvvar /var btrfs
uuid=452dee04-198b-49d2-b13a-6e8c746da033 label=
options=rw,relatime,space_cache,subvolid=257,subvol=/@
fs /dev/mapper/system-lvvarlog /var/log btrfs
uuid=ffaa67d3-9b07-4445-853b-ba9b04ad98e8 label=
options=rw,relatime,space_cache,subvolid=5,subvol=/
fs /dev/mapper/system-lvvarlogaudit /var/log/audit btrfs
uuid=b9da829e-89fd-497c-9cc1-21a54c7a912f label=
options=rw,relatime,space_cache,subvolid=5,subvol=/
fs /dev/sda1 /boot xfs uuid=e365109f-a007-4382-a736-02d9ed8c33dc label=
 options=rw,relatime,attr2,inode64,noquota

# Btrfs default subvolume for /dev/mapper/system-lvhome at /home

# Format: btrfsdefaultsubvol &lt;device&gt; &lt;mountpoint&gt; &lt;btrfs_subvolume_ID&gt;

&lt;btrfs_subvolume_path&gt;
btrfsdefaultsubvol /dev/mapper/system-lvhome /home 256 @

# Btrfs normal subvolumes for /dev/mapper/system-lvhome at /home

# Format: btrfsnormalsubvol &lt;device&gt; &lt;mountpoint&gt; &lt;btrfs_subvolume_ID&gt;

&lt;btrfs_subvolume_path&gt;
btrfsnormalsubvol /dev/mapper/system-lvhome /home 256 @

# Btrfs default subvolume for /dev/mapper/system-lvopt at /opt

# Format: btrfsdefaultsubvol &lt;device&gt; &lt;mountpoint&gt; &lt;btrfs_subvolume_ID&gt;

&lt;btrfs_subvolume_path&gt;
btrfsdefaultsubvol /dev/mapper/system-lvopt /opt 256 @

# Btrfs normal subvolumes for /dev/mapper/system-lvopt at /opt

# Format: btrfsnormalsubvol &lt;device&gt; &lt;mountpoint&gt; &lt;btrfs_subvolume_ID&gt;

&lt;btrfs_subvolume_path&gt;
btrfsnormalsubvol /dev/mapper/system-lvopt /opt 256 @

# Btrfs default subvolume for /dev/mapper/system-lvperflog at /perflog

# Format: btrfsdefaultsubvol &lt;device&gt; &lt;mountpoint&gt; &lt;btrfs_subvolume_ID&gt;

&lt;btrfs_subvolume_path&gt;
btrfsdefaultsubvol /dev/mapper/system-lvperflog /perflog 256 @

# Btrfs normal subvolumes for /dev/mapper/system-lvperflog at /perflog

# Format: btrfsnormalsubvol &lt;device&gt; &lt;mountpoint&gt; &lt;btrfs_subvolume_ID&gt;

&lt;btrfs_subvolume_path&gt;
btrfsnormalsubvol /dev/mapper/system-lvperflog /perflog 256 @

# Btrfs default subvolume for /dev/mapper/system-lvroot at /

# Format: btrfsdefaultsubvol &lt;device&gt; &lt;mountpoint&gt; &lt;btrfs_subvolume_ID&gt;

&lt;btrfs_subvolume_path&gt;
btrfsdefaultsubvol /dev/mapper/system-lvroot / 256 @

# Btrfs normal subvolumes for /dev/mapper/system-lvroot at /

# Format: btrfsnormalsubvol &lt;device&gt; &lt;mountpoint&gt; &lt;btrfs_subvolume_ID&gt;

&lt;btrfs_subvolume_path&gt;
btrfsnormalsubvol /dev/mapper/system-lvroot / 256 @

# Btrfs default subvolume for /dev/mapper/system-lvsplunk at /opt/splunk

# Format: btrfsdefaultsubvol &lt;device&gt; &lt;mountpoint&gt; &lt;btrfs_subvolume_ID&gt;

&lt;btrfs_subvolume_path&gt;
btrfsdefaultsubvol /dev/mapper/system-lvsplunk /opt/splunk 5 /

# Btrfs default subvolume for /dev/mapper/system-lvsysmon at /sysmon

# Format: btrfsdefaultsubvol &lt;device&gt; &lt;mountpoint&gt; &lt;btrfs_subvolume_ID&gt;

&lt;btrfs_subvolume_path&gt;
btrfsdefaultsubvol /dev/mapper/system-lvsysmon /sysmon 256 @

# Btrfs normal subvolumes for /dev/mapper/system-lvsysmon at /sysmon

# Format: btrfsnormalsubvol &lt;device&gt; &lt;mountpoint&gt; &lt;btrfs_subvolume_ID&gt;

&lt;btrfs_subvolume_path&gt;
btrfsnormalsubvol /dev/mapper/system-lvsysmon /sysmon 256 @

# Btrfs default subvolume for /dev/mapper/system-lvtmp at /tmp

# Format: btrfsdefaultsubvol &lt;device&gt; &lt;mountpoint&gt; &lt;btrfs_subvolume_ID&gt;

&lt;btrfs_subvolume_path&gt;
btrfsdefaultsubvol /dev/mapper/system-lvtmp /tmp 257 @

# Btrfs normal subvolumes for /dev/mapper/system-lvtmp at /tmp

# Format: btrfsnormalsubvol &lt;device&gt; &lt;mountpoint&gt; &lt;btrfs_subvolume_ID&gt;

&lt;btrfs_subvolume_path&gt;
btrfsnormalsubvol /dev/mapper/system-lvtmp /tmp 257 @

# Btrfs default subvolume for /dev/mapper/system-lvusr at /usr

# Format: btrfsdefaultsubvol &lt;device&gt; &lt;mountpoint&gt; &lt;btrfs_subvolume_ID&gt;

&lt;btrfs_subvolume_path&gt;
btrfsdefaultsubvol /dev/mapper/system-lvusr /usr 257 @

# Btrfs normal subvolumes for /dev/mapper/system-lvusr at /usr

# Format: btrfsnormalsubvol &lt;device&gt; &lt;mountpoint&gt; &lt;btrfs_subvolume_ID&gt;

&lt;btrfs_subvolume_path&gt;
btrfsnormalsubvol /dev/mapper/system-lvusr /usr 257 @

# Btrfs default subvolume for /dev/mapper/system-lvvar at /var

# Format: btrfsdefaultsubvol &lt;device&gt; &lt;mountpoint&gt; &lt;btrfs_subvolume_ID&gt;

&lt;btrfs_subvolume_path&gt;
btrfsdefaultsubvol /dev/mapper/system-lvvar /var 257 @

# Btrfs normal subvolumes for /dev/mapper/system-lvvar at /var

# Format: btrfsnormalsubvol &lt;device&gt; &lt;mountpoint&gt; &lt;btrfs_subvolume_ID&gt;

&lt;btrfs_subvolume_path&gt;
btrfsnormalsubvol /dev/mapper/system-lvvar /var 257 @

# Btrfs default subvolume for /dev/mapper/system-lvvarlog at /var/log

# Format: btrfsdefaultsubvol &lt;device&gt; &lt;mountpoint&gt; &lt;btrfs_subvolume_ID&gt;

&lt;btrfs_subvolume_path&gt;
btrfsdefaultsubvol /dev/mapper/system-lvvarlog /var/log 5 /

# Btrfs default subvolume for /dev/mapper/system-lvvarlogaudit at

/var/log/audit

# Format: btrfsdefaultsubvol &lt;device&gt; &lt;mountpoint&gt; &lt;btrfs_subvolume_ID&gt;

&lt;btrfs_subvolume_path&gt;
btrfsdefaultsubvol /dev/mapper/system-lvvarlogaudit /var/log/audit 5 /

# All mounted btrfs subvolumes (including mounted btrfs default subvolumes

and mounted btrfs snapshot subvolumes).

# Determined by the findmnt command that shows the mounted

btrfs_subvolume_path.

# Format: btrfsmountedsubvol &lt;device&gt; &lt;subvolume_mountpoint&gt;

&lt;mount_options&gt; &lt;btrfs_subvolume_path&gt;
btrfsmountedsubvol /dev/mapper/system-lvroot /
rw,relatime,space_cache,subvolid=256,subvol=/@ @
btrfsmountedsubvol /dev/mapper/system-lvusr /usr
rw,relatime,space_cache,subvolid=257,subvol=/@ @
btrfsmountedsubvol /dev/mapper/system-lvsysmon /sysmon
rw,relatime,space_cache,subvolid=256,subvol=/@ @
btrfsmountedsubvol /dev/mapper/system-lvhome /home
rw,nodev,relatime,space_cache,subvolid=256,subvol=/@ @
btrfsmountedsubvol /dev/mapper/system-lvopt /opt
rw,relatime,space_cache,subvolid=256,subvol=/@ @
btrfsmountedsubvol /dev/mapper/system-lvtmp /tmp
rw,nosuid,nodev,noexec,relatime,space_cache,subvolid=257,subvol=/@ @
btrfsmountedsubvol /dev/mapper/system-lvvar /var
rw,relatime,space_cache,subvolid=257,subvol=/@ @
btrfsmountedsubvol /dev/mapper/system-lvperflog /perflog
rw,relatime,space_cache,subvolid=256,subvol=/@ @
btrfsmountedsubvol /dev/mapper/system-lvtmp /var/tmp
rw,nosuid,nodev,noexec,relatime,space_cache,subvolid=257,subvol=/@ @
btrfsmountedsubvol /dev/mapper/system-lvsplunk /opt/splunk
rw,relatime,space_cache,subvolid=5,subvol=/ /
btrfsmountedsubvol /dev/mapper/system-lvvarlog /var/log
rw,relatime,space_cache,subvolid=5,subvol=/ /
btrfsmountedsubvol /dev/mapper/system-lvvarlogaudit /var/log/audit
rw,relatime,space_cache,subvolid=5,subvol=/ /
swap /dev/mapper/system-lvswap uuid=c20e6d9a-4280-4bd6-acf9-04a1f4f45107
label=
</code></pre>
<h4 id="adrian987654321_commented_at_2016-11-04_1554"><img src="https://avatars.githubusercontent.com/u/23192859?v=4" width="50"><a href="https://github.com/Adrian987654321">Adrian987654321</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-258470311">2016-11-04 15:54</a>:<a class="headerlink" href="#adrian987654321_commented_at_2016-11-04_1554" title="Permanent link">&para;</a></h4>
<p>Sorry about that, I pasted them in to the email last time.</p>
<p>I've attached them instead this time.</p>
<p>Thanks in advance.<br />
Adrian</p>
<h4 id="gozora_commented_at_2016-11-04_1604"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-258473240">2016-11-04 16:04</a>:<a class="headerlink" href="#gozora_commented_at_2016-11-04_1604" title="Permanent link">&para;</a></h4>
<p>:-/ not sure if Github can extract images from mail ...<br />
Never mind, will try couple of test restores on SLES12 with two disks,
an see hot it goes ...</p>
<h4 id="adrian987654321_commented_at_2016-11-04_1605"><img src="https://avatars.githubusercontent.com/u/23192859?v=4" width="50"><a href="https://github.com/Adrian987654321">Adrian987654321</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-258473518">2016-11-04 16:05</a>:<a class="headerlink" href="#adrian987654321_commented_at_2016-11-04_1605" title="Permanent link">&para;</a></h4>
<p><img alt="01-screen" src="https://cloud.githubusercontent.com/assets/23192859/20012765/76400bd8-a2a8-11e6-97eb-efb2e4ef6469.png" /><br />
<img alt="02-screen" src="https://cloud.githubusercontent.com/assets/23192859/20012766/77f72dda-a2a8-11e6-83e5-6d1eeca07060.png" /><br />
<img alt="03-screen" src="https://cloud.githubusercontent.com/assets/23192859/20012767/798a51d6-a2a8-11e6-8574-0a74d76762ee.png" /></p>
<h4 id="adrian987654321_commented_at_2016-11-04_1606"><img src="https://avatars.githubusercontent.com/u/23192859?v=4" width="50"><a href="https://github.com/Adrian987654321">Adrian987654321</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-258473639">2016-11-04 16:05</a>:<a class="headerlink" href="#adrian987654321_commented_at_2016-11-04_1606" title="Permanent link">&para;</a></h4>
<p>I can now attach images to the call as per above.</p>
<h4 id="gozora_commented_at_2016-11-04_1606"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-258473907">2016-11-04 16:06</a>:<a class="headerlink" href="#gozora_commented_at_2016-11-04_1606" title="Permanent link">&para;</a></h4>
<p>nice üëç</p>
<h4 id="gozora_commented_at_2016-11-04_1611"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-258475295">2016-11-04 16:11</a>:<a class="headerlink" href="#gozora_commented_at_2016-11-04_1611" title="Permanent link">&para;</a></h4>
<p>oh, at first glance i can see some BTRFS messages (nor really my
favorite FS), but as far as I remember @jsmeix did some btrfs
improvements recently,<br />
@Adrian987654321 would it be possible from your site to give ReaR 1.19 a
try?</p>
<h4 id="gozora_commented_at_2016-11-04_1710"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-258491161">2016-11-04 17:10</a>:<a class="headerlink" href="#gozora_commented_at_2016-11-04_1710" title="Permanent link">&para;</a></h4>
<p>@Adrian987654321 reading your
<a href="https://github.com/rear/rear/issues/1057#issuecomment-258469312">disklayout.conf</a>,
maybe I got it all wrong, but are you using btrfs on top of each logical
volume?<br />
If not, could you share your filesystem layout/setup with me?</p>
<p>Like outputs from:<br />
<code>mount</code><br />
<code>btrfs subvolume list -a /</code><br />
<code>vgs</code><br />
<code>lvs</code><br />
<code>pvs</code><br />
<code>df -h</code><br />
...</p>
<h4 id="rpasche_commented_at_2016-11-05_1310"><img src="https://avatars.githubusercontent.com/u/12664472?u=7d93437b713d9a1a67b448b34f2c0a6576a0930e&v=4" width="50"><a href="https://github.com/rpasche">rpasche</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-258610493">2016-11-05 13:10</a>:<a class="headerlink" href="#rpasche_commented_at_2016-11-05_1310" title="Permanent link">&para;</a></h4>
<p>@Adrian987654321 For me, this looks like disks are "detected" in the
"wrong" way. On hardware, I would suspect, that the two disks are
connected to different controllers using different driver modules and
that these modules are loaded in a different order on boot within
recovery, resulting in this fault.</p>
<p>But on a VM....hmm..</p>
<p>Are the disks using different controllers within the VM? Can you give as
the SCSI IDs of the disks?</p>
<h4 id="adrian987654321_commented_at_2016-11-07_1134"><img src="https://avatars.githubusercontent.com/u/23192859?v=4" width="50"><a href="https://github.com/Adrian987654321">Adrian987654321</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-258813168">2016-11-07 11:34</a>:<a class="headerlink" href="#adrian987654321_commented_at_2016-11-07_1134" title="Permanent link">&para;</a></h4>
<p>Please find the output from the commands you required.</p>
<pre><code>sysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)
proc on /proc type proc (rw,nosuid,nodev,noexec,relatime)
devtmpfs on /dev type devtmpfs
(rw,nosuid,size=8223172k,nr_inodes=2055793,mode=755)
securityfs on /sys/kernel/security type securityfs
(rw,nosuid,nodev,noexec,relatime)
tmpfs on /dev/shm type tmpfs (rw,nosuid,nodev,noexec)
devpts on /dev/pts type devpts
(rw,nosuid,noexec,relatime,gid=5,mode=620,ptmxmode=000)
tmpfs on /run type tmpfs (rw,nosuid,nodev,mode=755)
tmpfs on /sys/fs/cgroup type tmpfs (rw,nosuid,nodev,noexec,mode=755)
cgroup on /sys/fs/cgroup/systemd type cgroup
(rw,nosuid,nodev,noexec,relatime,xattr,release_agent=/usr/lib/systemd/systemd-cgroups-agent,name=systemd)
pstore on /sys/fs/pstore type pstore (rw,nosuid,nodev,noexec,relatime)
cgroup on /sys/fs/cgroup/cpuset type cgroup
(rw,nosuid,nodev,noexec,relatime,cpuset)
cgroup on /sys/fs/cgroup/cpu,cpuacct type cgroup
(rw,nosuid,nodev,noexec,relatime,cpuacct,cpu)
cgroup on /sys/fs/cgroup/memory type cgroup
(rw,nosuid,nodev,noexec,relatime,memory)
cgroup on /sys/fs/cgroup/devices type cgroup
(rw,nosuid,nodev,noexec,relatime,devices)
cgroup on /sys/fs/cgroup/freezer type cgroup
(rw,nosuid,nodev,noexec,relatime,freezer)
cgroup on /sys/fs/cgroup/blkio type cgroup
(rw,nosuid,nodev,noexec,relatime,blkio)
cgroup on /sys/fs/cgroup/perf_event type cgroup
(rw,nosuid,nodev,noexec,relatime,perf_event)
cgroup on /sys/fs/cgroup/hugetlb type cgroup
(rw,nosuid,nodev,noexec,relatime,hugetlb)
/dev/mapper/system-lvroot on / type btrfs
(rw,relatime,space_cache,subvolid=256,subvol=/@)
/dev/mapper/system-lvusr on /usr type btrfs
(rw,relatime,space_cache,subvolid=257,subvol=/@)
systemd-1 on /proc/sys/fs/binfmt_misc type autofs
(rw,relatime,fd=31,pgrp=1,timeout=300,minproto=5,maxproto=5,direct)
hugetlbfs on /dev/hugepages type hugetlbfs (rw,relatime)
mqueue on /dev/mqueue type mqueue (rw,relatime)
debugfs on /sys/kernel/debug type debugfs (rw,relatime)
/dev/sda1 on /boot type xfs (rw,relatime,attr2,inode64,noquota)
/dev/mapper/system-lvsysmon on /sysmon type btrfs
(rw,relatime,space_cache,subvolid=256,subvol=/@)
/dev/mapper/system-lvhome on /home type btrfs
(rw,nodev,relatime,space_cache,subvolid=256,subvol=/@)
/dev/mapper/system-lvopt on /opt type btrfs
(rw,relatime,space_cache,subvolid=256,subvol=/@)
/dev/mapper/system-lvtmp on /tmp type btrfs
(rw,nosuid,nodev,noexec,relatime,space_cache,subvolid=257,subvol=/@)
/dev/mapper/system-lvvar on /var type btrfs
(rw,relatime,space_cache,subvolid=257,subvol=/@)
/dev/mapper/system-lvperflog on /perflog type btrfs
(rw,relatime,space_cache,subvolid=256,subvol=/@)
/dev/mapper/system-lvtmp on /var/tmp type btrfs
(rw,nosuid,nodev,noexec,relatime,space_cache,subvolid=257,subvol=/@)
/dev/mapper/system-lvvarlog on /var/log type btrfs
(rw,relatime,space_cache,subvolid=5,subvol=/)
/dev/mapper/system-lvvarlogaudit on /var/log/audit type btrfs
(rw,relatime,space_cache,subvolid=5,subvol=/)
binfmt_misc on /proc/sys/fs/binfmt_misc type binfmt_misc (rw,relatime)
/dev/mapper/datavg-splunklv on /opt/splunk type xfs
(rw,relatime,attr2,inode64,noquota)
/dev/mapper/datavg-worklv on /workspace type xfs
(rw,relatime,attr2,inode64,noquota)

utvlfidj12:~ # btrfs subvolume list -a /
ID 256 gen 5188 top level 5 path &lt;FS_TREE&gt;/@

utvlfidj12:~ # vgs
  VG     #PV #LV #SN Attr   VSize  VFree
  datavg   1   2   0 wz--n- 80.00g 40.00g
  system   1  11   0 wz--n- 49.73g 16.00g

utvlfidj12:~ # lvs
  LV            VG     Attr       LSize   Pool Origin Data%  Meta%  Move
Log Cpy%Sync Convert
  splunklv      datavg -wi-ao----  35.00g
  worklv        datavg -wi-ao----   5.00g
  lvhome        system -wi-ao----   3.00g
  lvopt         system -wi-ao----   1.50g
  lvperflog     system -wi-ao---- 512.00m
  lvroot        system -wi-ao----   1.49g
  lvswap        system -wi-ao----  16.00g
  lvsysmon      system -wi-ao---- 256.00m
  lvtmp         system -wi-ao----   2.00g
  lvusr         system -wi-ao----   3.00g
  lvvar         system -wi-ao----   2.00g
  lvvarlog      system -wi-ao----   2.00g
  lvvarlogaudit system -wi-ao----   2.00g

utvlfidj12:~ # pvs
  PV         VG     Fmt  Attr PSize  PFree
  /dev/sda2  system lvm2 a--  49.73g 16.00g
  /dev/sdb1  datavg lvm2 a--  80.00g 40.00g

utvlfidj12:~ # df -h
Filesystem                        Size  Used Avail Use% Mounted on
/dev/mapper/system-lvroot         1.5G  353M  974M  27% /
devtmpfs                          7.9G     0  7.9G   0% /dev
tmpfs                             7.9G     0  7.9G   0% /dev/shm
tmpfs                             7.9G   41M  7.9G   1% /run
tmpfs                             7.9G     0  7.9G   0% /sys/fs/cgroup
/dev/mapper/system-lvusr          3.0G  1.3G  1.6G  44% /usr
/dev/sda1                         264M   50M  214M  19% /boot
/dev/mapper/system-lvsysmon       256M  4.3M  252M   2% /sysmon
/dev/mapper/system-lvhome         3.0G   17M  2.9G   1% /home
/dev/mapper/system-lvopt          1.5G  368M  1.2G  24% /opt
/dev/mapper/system-lvtmp          2.0G   17M  1.8G   1% /tmp
/dev/mapper/system-lvvar          2.0G  426M  1.4G  24% /var
/dev/mapper/system-lvperflog      512M   65M  448M  13% /perflog
/dev/mapper/system-lvvarlog       2.0G   26M  1.8G   2% /var/log
/dev/mapper/system-lvvarlogaudit  2.0G   27M  1.8G   2% /var/log/audit
/dev/mapper/datavg-splunklv        35G   33M   35G   1% /opt/splunk
/dev/mapper/datavg-worklv         5.0G   33M  5.0G   1% /workspace
</code></pre>
<h4 id="gozora_commented_at_2016-11-07_1157"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-258817405">2016-11-07 11:57</a>:<a class="headerlink" href="#gozora_commented_at_2016-11-07_1157" title="Permanent link">&para;</a></h4>
<p>Hmm, so btrfs on top of LVM indeed.<br />
I've never worked with such setup before.<br />
@Adrian987654321 can you tell me if you was able to successfully restore
your OS?</p>
<h4 id="jsmeix_commented_at_2016-11-07_1303"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-258830033">2016-11-07 13:03</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-11-07_1303" title="Permanent link">&para;</a></h4>
<p>Only a note FYI:<br />
Last week I was not in the office.<br />
I will have a look here hopefully tomorrow...</p>
<h4 id="jsmeix_commented_at_2016-11-07_1318"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-258832970">2016-11-07 13:18</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-11-07_1318" title="Permanent link">&para;</a></h4>
<p>In general kernel device names like /dev/sda and /dev/sdb<br />
can appear in any ordering.</p>
<p>Basically it is just luck which of two disks gets<br />
the device node /dev/sda versus /dev/sdb.</p>
<p>A solution might be to optionally? no longer use kernel device nodes<br />
but instead/additionally? more higher level names like the symlinks in<br />
/dev/disk/by-id<br />
/dev/disk/by-label<br />
/dev/disk/by-partlabel<br />
/dev/disk/by-partuuid<br />
/dev/disk/by-path<br />
/dev/disk/by-uuid</p>
<p>Some drawbacks of using disk/by-* symlinks are:</p>
<p>On basically same replacement hardware some of them<br />
are not same, in particular disk WWNs or WWIDs in disk/by-id<br />
should be different for any replacement disk.</p>
<p>On a new replacement disk there are neither partitions nor filesystems<br />
so that there are neither partition labes nor partition UUIDs nor<br />
filesystem labels nor filesystem UUIDs so that neither
disk/by-partlabel<br />
nor disk/by-partuuid not disk/by-label nor disk/by-uuid can be used.</p>
<p>Therefore - as far as I can imagine right now - using<br />
kernel device nodes like /dev/sda and /dev/sdb<br />
works sufficiently well in very most cases - except<br />
exceptional cases like this one.</p>
<p>As far as I see the only thing that could be actually useful is
disk/by-path<br />
because on basically same replacement hardware one could assume<br />
that the replacement disks are connected via the same physical paths<br />
as it was on the original system so that "basically same replacement
hardware"<br />
means in particular that the same physical paths are used on the
original system<br />
and on the replacement hardware.</p>
<p>Currently ReaR uses only the disk size to find out<br />
which disk kernel device node on the replacement hardware<br />
matches which disk kernel device node on the original system<br />
and if more than one matches ReaR goes into migration mode,<br />
see the "MIGRATION_MODE" description in disklayout.conf.</p>
<p>When in addition to the disk size also disk/by-path would be used<br />
and when there is more than one disk with same size, then<br />
ReaR could match according to the physical paths and only if there is<br />
no match by path, ReaR would have to go into migration mode,<br />
cf.
<a href="https://github.com/rear/rear/issues/2050">https://github.com/rear/rear/issues/2050</a></p>
<h4 id="gozora_commented_at_2016-11-07_1323"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-258834011">2016-11-07 13:23</a>:<a class="headerlink" href="#gozora_commented_at_2016-11-07_1323" title="Permanent link">&para;</a></h4>
<p>@jsmeix I'm afraid that despite description, swapped disks are not the
main problem here. (see <a href="https://cloud.githubusercontent.com/assets/23192859/20012767/798a51d6-a2a8-11e6-8574-0a74d76762ee.png">screen
shot</a>).<br />
I'm waiting for reply to my
<a href="https://github.com/rear/rear/issues/1057#issuecomment-258817405">comment</a>
...</p>
<h4 id="gozora_commented_at_2016-11-07_1324"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-258834132">2016-11-07 13:24</a>:<a class="headerlink" href="#gozora_commented_at_2016-11-07_1324" title="Permanent link">&para;</a></h4>
<p>@jsmeix did you ever tested ReaR with btrfs on LVM ?</p>
<h4 id="jsmeix_commented_at_2016-11-07_1327"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-258834808">2016-11-07 13:27</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-11-07_1327" title="Permanent link">&para;</a></h4>
<p>Good grief!<br />
"btrfs on LVM"<br />
I never ever used that.<br />
Currently I have no experience with such complicated setups.</p>
<h4 id="adrian987654321_commented_at_2016-11-07_1634"><img src="https://avatars.githubusercontent.com/u/23192859?v=4" width="50"><a href="https://github.com/Adrian987654321">Adrian987654321</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-258886184">2016-11-07 16:34</a>:<a class="headerlink" href="#adrian987654321_commented_at_2016-11-07_1634" title="Permanent link">&para;</a></h4>
<p>Yes this looks to be the case.</p>
<p>The two disks are using two different two different driver modules. I
don't<br />
have access to copy what that modules are but both are different.</p>
<h4 id="adrian987654321_commented_at_2016-11-07_1637"><img src="https://avatars.githubusercontent.com/u/23192859?v=4" width="50"><a href="https://github.com/Adrian987654321">Adrian987654321</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-258887357">2016-11-07 16:37</a>:<a class="headerlink" href="#adrian987654321_commented_at_2016-11-07_1637" title="Permanent link">&para;</a></h4>
<p>I've asked a college to install version 1.19 which he will do in the<br />
morning and then test to see if it fixes the issue of the mount failure
of<br />
/dev/mapper/system-lvroot</p>
<p>‚ÄãThanks for all of your help.</p>
<p>Adrian‚Äã</p>
<h4 id="adrian987654321_commented_at_2016-11-07_1639"><img src="https://avatars.githubusercontent.com/u/23192859?v=4" width="50"><a href="https://github.com/Adrian987654321">Adrian987654321</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-258887711">2016-11-07 16:39</a>:<a class="headerlink" href="#adrian987654321_commented_at_2016-11-07_1639" title="Permanent link">&para;</a></h4>
<p>So far no. The restore fails when mounting /dev/mapper/system-lvroot.</p>
<h4 id="jsmeix_commented_at_2016-11-08_1309"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-259132110">2016-11-08 13:09</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-11-08_1309" title="Permanent link">&para;</a></h4>
<p>I am sneaking up on the issue step by step:</p>
<p>For me with SLE12-SP2 on a QEMU/KVM virtual machine<br />
with a single 20GB virtual harddisk /dev/sda<br />
with btrfs on top of LVM both "rear mkbackup" and<br />
then on a second same virtual machine "rear recover"<br />
just work with the current ReaR GitHub master code.</p>
<p>The next step will be with two virtual harddisks...</p>
<p>I am using<br />
usr/share/rear/conf/examples/SLE12-SP2-btrfs-example.conf<br />
as template for my etc/rear/local.conf</p>
<p>During initial system installation with YaST<br />
I clicked in the YaST "Suggested Partitioning" dialog<br />
on "Edit Proposal Settings" and then I selected the<br />
"LVM-based Proposal" which results LVM with<br />
the default SLE12-SP2 btrfs structure on top of it.<br />
I do no manual special LVM or btrfs configuration.<br />
I use the YaST proposal as is.</p>
<p>Some details:</p>
<pre>
d108:~/rear # cat /etc/issue      
Welcome to SUSE Linux Enterprise Server 12 SP2  (x86_64) ...
d108:~/rear # findmnt -t btrfs -o TARGET,SOURCE
TARGET                    SOURCE
/                         /dev/mapper/system-root[/@/.snapshots/1/snapshot]
|-/var/lib/pgsql          /dev/mapper/system-root[/@/var/lib/pgsql]
|-/var/lib/machines       /dev/mapper/system-root[/@/var/lib/machines]
|-/.snapshots             /dev/mapper/system-root[/@/.snapshots]
|-/srv                    /dev/mapper/system-root[/@/srv]
|-/var/lib/mysql          /dev/mapper/system-root[/@/var/lib/mysql]
|-/var/opt                /dev/mapper/system-root[/@/var/opt]
|-/var/tmp                /dev/mapper/system-root[/@/var/tmp]
|-/var/lib/named          /dev/mapper/system-root[/@/var/lib/named]
|-/var/lib/mailman        /dev/mapper/system-root[/@/var/lib/mailman]
|-/opt                    /dev/mapper/system-root[/@/opt]
|-/var/lib/libvirt/images /dev/mapper/system-root[/@/var/lib/libvirt/images]
|-/boot/grub2/i386-pc     /dev/mapper/system-root[/@/boot/grub2/i386-pc]
|-/var/lib/mariadb        /dev/mapper/system-root[/@/var/lib/mariadb]
|-/var/cache              /dev/mapper/system-root[/@/var/cache]
|-/tmp                    /dev/mapper/system-root[/@/tmp]
|-/usr/local              /dev/mapper/system-root[/@/usr/local]
|-/var/crash              /dev/mapper/system-root[/@/var/crash]
|-/var/log                /dev/mapper/system-root[/@/var/log]
|-/home                   /dev/mapper/system-root[/@/home]
|-/var/spool              /dev/mapper/system-root[/@/var/spool]
`-/boot/grub2/x86_64-efi  /dev/mapper/system-root[/@/boot/grub2/x86_64-efi]
d108:~/rear # grep -v ^# etc/rear/local.conf 
OUTPUT=ISO
BACKUP=NETFS
BACKUP_OPTIONS="nfsvers=3,nolock"
BACKUP_URL=nfs://10.160.4.244/nfs
NETFS_KEEP_OLD_BACKUP_COPY=yes
REQUIRED_PROGS=( "${REQUIRED_PROGS[@]}" snapper chattr lsattr )
COPY_AS_IS=( "${COPY_AS_IS[@]}" /usr/lib/snapper/installation-helper /etc/snapper/config-templates/default )
BACKUP_PROG_INCLUDE=( '/var/cache/*' '/var/lib/mailman/*' '/var/tmp/*' '/var/lib/pgsql/*' '/usr/local/*' '/opt/*' '/var/lib/libvirt/images/*' '/boot/grub2/i386/*' '/var/opt/*' '/srv/*' '/boot/grub2/x86_64/*' '/var/lib/mariadb/*' '/var/spool/*' '/var/lib/mysql/*' '/tmp/*' '/home/*' '/var/log/*' '/var/lib/named/*' '/var/lib/machines/*' )
POST_RECOVERY_SCRIPT=( 'if snapper --no-dbus -r $TARGET_FS_ROOT get-config | grep -q "^QGROUP.*[0-9]/[0-9]" ; then snapper --no-dbus -r $TARGET_FS_ROOT set-config QGROUP= ; snapper --no-dbus -r $TARGET_FS_ROOT setup-quota && echo snapper setup-quota done || echo snapper setup-quota failed ; else echo snapper setup-quota not used ; fi' )
SSH_ROOT_PASSWORD="rear"
USE_DHCLIENT="yes"
KEEP_BUILD_DIR=""
d108:~/rear # usr/sbin/rear -d -D mkbackup
Relax-and-Recover 1.19 / Git
Using log file: /root/rear/var/log/rear/rear-d108.log
mkdir: created directory '/root/rear/var/lib'
mkdir: created directory '/root/rear/var/lib/rear'
mkdir: created directory '/root/rear/var/lib/rear/output'
Creating disk layout
Creating root filesystem layout
Copying files and directories
Copying binaries and libraries
Copying kernel modules
Creating initramfs
Making ISO image
Wrote ISO image: /root/rear/var/lib/rear/output/rear-d108.iso (150M)
Copying resulting files to nfs location
Encrypting disabled
Creating tar archive '/tmp/rear.9pxiJl1HGxwcHjf/outputfs/d108/backup.tar.gz'
Archived 823 MiB [avg 7600 KiB/sec]OK
Archived 823 MiB in 112 seconds [avg 7532 KiB/sec]
d108:~/rear # cat var/lib/rear/layout/disklayout.conf
# Disk /dev/sda
# Format: disk <devname> <size(bytes)> <partition label type>
disk /dev/sda 21474836480 msdos
# Partitions on /dev/sda
# Format: part <device> <partition size(bytes)> <partition start(bytes)> <partition type|name> <flags> /dev/<partition>
part /dev/sda 21473787904 1048576 primary boot,lvm /dev/sda1
lvmdev /dev/system /dev/sda1 Klj7cB-Hhw4-h2RX-MYoI-fh17-NhkB-a5CfxZ 41940992
lvmgrp /dev/system 4096 5119 20967424
lvmvol /dev/system root 4746 38879232 
lvmvol /dev/system swap 371 3039232 
# Filesystems (only ext2,ext3,ext4,vfat,xfs,reiserfs,btrfs are supported).
# Format: fs <device> <mountpoint> <fstype> [uuid=<uuid>] [label=<label>] [<attributes>]
fs /dev/mapper/system-root / btrfs uuid=d0480ddb-9876-4e87-9ad3-273e7fb3702e label= options=rw,relatime,space_cache,subvolid=259,subvol=/@/.snapshots/1/snapshot
# Btrfs default subvolume for /dev/mapper/system-root at /
# Format: btrfsdefaultsubvol <device> <mountpoint> <btrfs_subvolume_ID> <btrfs_subvolume_path>
btrfsdefaultsubvol /dev/mapper/system-root / 259 @/.snapshots/1/snapshot
# Btrfs snapshot subvolumes for /dev/mapper/system-root at /
# Btrfs snapshot subvolumes are listed here only as documentation.
# There is no recovery of btrfs snapshot subvolumes.
# Format: btrfssnapshotsubvol <device> <mountpoint> <btrfs_subvolume_ID> <btrfs_subvolume_path>
#btrfssnapshotsubvol /dev/mapper/system-root / 259 @/.snapshots/1/snapshot
#btrfssnapshotsubvol /dev/mapper/system-root / 283 @/.snapshots/2/snapshot
#btrfssnapshotsubvol /dev/mapper/system-root / 284 @/.snapshots/3/snapshot
#btrfssnapshotsubvol /dev/mapper/system-root / 285 @/.snapshots/4/snapshot
#btrfssnapshotsubvol /dev/mapper/system-root / 286 @/.snapshots/5/snapshot
#btrfssnapshotsubvol /dev/mapper/system-root / 287 @/.snapshots/6/snapshot
# Btrfs normal subvolumes for /dev/mapper/system-root at /
# Format: btrfsnormalsubvol <device> <mountpoint> <btrfs_subvolume_ID> <btrfs_subvolume_path>
# Btrfs subvolumes that belong to snapper are listed here only as documentation.
# Snapper's base subvolume '/@/.snapshots' is deactivated here because during 'rear recover'
# it is created by 'snapper/installation-helper --step 1' (which fails if it already exists).
# Furthermore any normal btrfs subvolume under snapper's base subvolume would be wrong.
# See https://github.com/rear/rear/issues/944#issuecomment-238239926
# and https://github.com/rear/rear/issues/963#issuecomment-240061392
# how to create a btrfs subvolume in compliance with the SLES12 default brtfs structure.
# In short: Normal btrfs subvolumes on SLES12 must be created directly below '/@/'
# e.g. '/@/var/lib/mystuff' (which requires that the btrfs root subvolume is mounted)
# and then the subvolume is mounted at '/var/lib/mystuff' to be accessible from '/'
# plus usually an entry in /etc/fstab to get it mounted automatically when booting.
# Because any '@/.snapshots' subvolume would let 'snapper/installation-helper --step 1' fail
# such subvolumes are deactivated here to not let 'rear recover' fail:
#btrfsnormalsubvol /dev/mapper/system-root / 258 @/.snapshots
btrfsnormalsubvol /dev/mapper/system-root / 257 @
btrfsnormalsubvol /dev/mapper/system-root / 260 @/boot/grub2/i386-pc
btrfsnormalsubvol /dev/mapper/system-root / 261 @/boot/grub2/x86_64-efi
btrfsnormalsubvol /dev/mapper/system-root / 262 @/home
btrfsnormalsubvol /dev/mapper/system-root / 263 @/opt
btrfsnormalsubvol /dev/mapper/system-root / 264 @/srv
btrfsnormalsubvol /dev/mapper/system-root / 265 @/tmp
btrfsnormalsubvol /dev/mapper/system-root / 266 @/usr/local
btrfsnormalsubvol /dev/mapper/system-root / 267 @/var/cache
btrfsnormalsubvol /dev/mapper/system-root / 268 @/var/crash
btrfsnormalsubvol /dev/mapper/system-root / 269 @/var/lib/libvirt/images
btrfsnormalsubvol /dev/mapper/system-root / 270 @/var/lib/machines
btrfsnormalsubvol /dev/mapper/system-root / 271 @/var/lib/mailman
btrfsnormalsubvol /dev/mapper/system-root / 272 @/var/lib/mariadb
btrfsnormalsubvol /dev/mapper/system-root / 273 @/var/lib/mysql
btrfsnormalsubvol /dev/mapper/system-root / 274 @/var/lib/named
btrfsnormalsubvol /dev/mapper/system-root / 275 @/var/lib/pgsql
btrfsnormalsubvol /dev/mapper/system-root / 276 @/var/log
btrfsnormalsubvol /dev/mapper/system-root / 277 @/var/opt
btrfsnormalsubvol /dev/mapper/system-root / 278 @/var/spool
btrfsnormalsubvol /dev/mapper/system-root / 279 @/var/tmp
# All mounted btrfs subvolumes (including mounted btrfs default subvolumes and mounted btrfs snapshot subvolumes).
# Determined by the findmnt command that shows the mounted btrfs_subvolume_path.
# Format: btrfsmountedsubvol <device> <subvolume_mountpoint> <mount_options> <btrfs_subvolume_path>
btrfsmountedsubvol /dev/mapper/system-root / rw,relatime,space_cache,subvolid=259,subvol=/@/.snapshots/1/snapshot @/.snapshots/1/snapshot
btrfsmountedsubvol /dev/mapper/system-root /.snapshots rw,relatime,space_cache,subvolid=258,subvol=/@/.snapshots @/.snapshots
btrfsmountedsubvol /dev/mapper/system-root /var/lib/pgsql rw,relatime,space_cache,subvolid=275,subvol=/@/var/lib/pgsql @/var/lib/pgsql
btrfsmountedsubvol /dev/mapper/system-root /var/lib/machines rw,relatime,space_cache,subvolid=270,subvol=/@/var/lib/machines @/var/lib/machines
btrfsmountedsubvol /dev/mapper/system-root /var/lib/mysql rw,relatime,space_cache,subvolid=273,subvol=/@/var/lib/mysql @/var/lib/mysql
btrfsmountedsubvol /dev/mapper/system-root /var/lib/named rw,relatime,space_cache,subvolid=274,subvol=/@/var/lib/named @/var/lib/named
btrfsmountedsubvol /dev/mapper/system-root /var/lib/mailman rw,relatime,space_cache,subvolid=271,subvol=/@/var/lib/mailman @/var/lib/mailman
btrfsmountedsubvol /dev/mapper/system-root /var/opt rw,relatime,space_cache,subvolid=277,subvol=/@/var/opt @/var/opt
btrfsmountedsubvol /dev/mapper/system-root /opt rw,relatime,space_cache,subvolid=263,subvol=/@/opt @/opt
btrfsmountedsubvol /dev/mapper/system-root /var/lib/libvirt/images rw,relatime,space_cache,subvolid=269,subvol=/@/var/lib/libvirt/images @/var/lib/libvirt/images
btrfsmountedsubvol /dev/mapper/system-root /var/lib/mariadb rw,relatime,space_cache,subvolid=272,subvol=/@/var/lib/mariadb @/var/lib/mariadb
btrfsmountedsubvol /dev/mapper/system-root /var/tmp rw,relatime,space_cache,subvolid=279,subvol=/@/var/tmp @/var/tmp
btrfsmountedsubvol /dev/mapper/system-root /boot/grub2/i386-pc rw,relatime,space_cache,subvolid=260,subvol=/@/boot/grub2/i386-pc @/boot/grub2/i386-pc
btrfsmountedsubvol /dev/mapper/system-root /var/cache rw,relatime,space_cache,subvolid=267,subvol=/@/var/cache @/var/cache
btrfsmountedsubvol /dev/mapper/system-root /tmp rw,relatime,space_cache,subvolid=265,subvol=/@/tmp @/tmp
btrfsmountedsubvol /dev/mapper/system-root /var/crash rw,relatime,space_cache,subvolid=268,subvol=/@/var/crash @/var/crash
btrfsmountedsubvol /dev/mapper/system-root /usr/local rw,relatime,space_cache,subvolid=266,subvol=/@/usr/local @/usr/local
btrfsmountedsubvol /dev/mapper/system-root /var/log rw,relatime,space_cache,subvolid=276,subvol=/@/var/log @/var/log
btrfsmountedsubvol /dev/mapper/system-root /home rw,relatime,space_cache,subvolid=262,subvol=/@/home @/home
btrfsmountedsubvol /dev/mapper/system-root /var/spool rw,relatime,space_cache,subvolid=278,subvol=/@/var/spool @/var/spool
btrfsmountedsubvol /dev/mapper/system-root /srv rw,relatime,space_cache,subvolid=264,subvol=/@/srv @/srv
btrfsmountedsubvol /dev/mapper/system-root /boot/grub2/x86_64-efi rw,relatime,space_cache,subvolid=261,subvol=/@/boot/grub2/x86_64-efi @/boot/grub2/x86_64-efi
# Mounted btrfs subvolumes that have the 'no copy on write' attribute set.
# Format: btrfsnocopyonwrite <btrfs_subvolume_path>
btrfsnocopyonwrite @/var/lib/pgsql
btrfsnocopyonwrite @/var/lib/mysql
btrfsnocopyonwrite @/var/lib/libvirt/images
btrfsnocopyonwrite @/var/lib/mariadb
# Swap partitions or swap files
# Format: swap <filename> uuid=<uuid> label=<label>
swap /dev/mapper/system-swap uuid=a846b25b-4347-4b63-83b5-ce0ede60adfb label=
</pre>

<h4 id="jsmeix_commented_at_2016-11-08_1337"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-259137971">2016-11-08 13:37</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-11-08_1337" title="Permanent link">&para;</a></h4>
<p>@Adrian987654321<br />
in your initial comment<br />
<a href="https://github.com/rear/rear/issues/1057#issue-186547940">https://github.com/rear/rear/issues/1057#issue-186547940</a><br />
you wrote</p>
<pre>
cat /etc/rear/local.conf
# Create Relax-and-Recover rescue media as ISO image
OUTPUT=ISO
BACKUP=TSM
</pre>

<p>Is that really your whole /etc/rear/local.conf file content?</p>
<p>If that is really your whole /etc/rear/local.conf<br />
it cannot work.</p>
<p>For the special SUSE btrfs default structure use one of the<br />
usr/share/rear/conf/examples/SLE*example.conf<br />
files as template.</p>
<h4 id="adrian987654321_commented_at_2016-11-08_1438"><img src="https://avatars.githubusercontent.com/u/23192859?v=4" width="50"><a href="https://github.com/Adrian987654321">Adrian987654321</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-259153102">2016-11-08 14:38</a>:<a class="headerlink" href="#adrian987654321_commented_at_2016-11-08_1438" title="Permanent link">&para;</a></h4>
<p>I'm not in a position where I can test today but tomorrow</p>
<p>I'm hoping to have someone who can test using this version of rear.</p>
<p>rear-1.19-22.git201611071733.x86_64.rpm<br />
<a href="http://download.opensuse.org/repositories/Archiving:/Backup:/Rear:/Snapshot/SLE_12_SP1/x86_64/rear-1.19-22.git201611071733.x86_64.rpm">http://download.opensuse.org/repositories/Archiving:/Backup:/Rear:/Snapshot/SLE_12_SP1/x86_64/rear-1.19-22.git201611071733.x86_64.rpm</a></p>
<p>I<br />
‚Äã'll let you know as soon as i do if it runs successfully.</p>
<h4 id="adrian987654321_commented_at_2016-11-08_1441"><img src="https://avatars.githubusercontent.com/u/23192859?v=4" width="50"><a href="https://github.com/Adrian987654321">Adrian987654321</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-259153715">2016-11-08 14:41</a>:<a class="headerlink" href="#adrian987654321_commented_at_2016-11-08_1441" title="Permanent link">&para;</a></h4>
<p>Just double checked and yes that is all there is in the file.</p>
<pre><code>cat /etc/rear/local.conf

# Create Relax-and-Recover rescue media as ISO image

OUTPUT=ISO
BACKUP=TSM
</code></pre>
<p>I'll get one of the files use suggest tested tomorrow with version
1.19.22<br />
and let you know the outcome.</p>
<p>Thanks for your help.</p>
<h4 id="jsmeix_commented_at_2016-11-08_1623"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-259183614">2016-11-08 16:23</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-11-08_1623" title="Permanent link">&para;</a></h4>
<p>Also with two virtual harddisks<br />
using SLE12-SP2 on a QEMU/KVM virtual machine<br />
with one 10GB virtual harddisk /dev/sda and<br />
a second 15GB virtual harddisk /dev/sdb<br />
with btrfs on top of LVM both "rear mkbackup" and<br />
then on a second same virtual machine "rear recover"<br />
just work with the current ReaR GitHub master code.</p>
<p>But during "rear recover" I got no message about<br />
interchanged harddisk devices.</p>
<p>My next step is to do "rear recover" on another virtual machine<br />
where the first disk is 15GB and the second one 10GB<br />
(i.e. with interchanged virtual harddisks).</p>
<p>During initial system installation with YaST<br />
I used the YaST "expert patitioner" to<br />
first make on each whole disk a single partition<br />
(i.e. I got /dev/sda1 and /dev/sdb1)<br />
then make a volume group of those two partitions<br />
and in that volume group I created three logical volumes:<br />
1.<br />
a 15GB logical "root" volume with<br />
the SLE12-SP2 default btrfs structure<br />
2.<br />
a 2GB logical "swap" volume<br />
3.<br />
a 5GB logical "home" volume with XFS.</p>
<h4 id="jsmeix_commented_at_2016-11-08_1640"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-259188698">2016-11-08 16:40</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-11-08_1640" title="Permanent link">&para;</a></h4>
<p>For me "rear recover" also works well<br />
on another virtual machine where the<br />
first disk is 15GB and the second one 10GB<br />
(i.e. with interchanged virtual harddisks).</p>
<p>I got two times a question what to do and in both cases<br />
I simply replied with a "5" (i.e. "Continue recovery").</p>
<pre>
RESCUE d44:~ # rear -d -D recover
Relax-and-Recover 1.19 / Git
Using log file: /var/log/rear/rear-d44.log
Starting required daemons for NFS: RPC portmapper (portmap or rpcbind) and rpc.statd if available.
Started RPC portmapper 'rpcbind'.
RPC portmapper 'rpcbind' available.
Started rpc.statd.
RPC status rpc.statd available.
NOTICE: Will do driver migration
Calculating backup archive size
Backup archive size is 825M     /tmp/rear.D4Tf1ZaNWHcMJ4c/outputfs/d44/backup.tar.gz (compressed)
Comparing disks.
Device sda has size 16106127360, 10737418240 expected
Device sdb has size 10737418240, 16106127360 expected
Switching to manual disk layout configuration.
This is the disk mapping table:
    /dev/sda /dev/sdb
    /dev/sdb /dev/sda
Please confirm that '/var/lib/rear/layout/disklayout.conf' is as you expect.
++ select choice in '"${choices[@]}"'
1) View disk layout (disklayout.conf)  3) View original disk space usage      5) Continue recovery
2) Edit disk layout (disklayout.conf)  4) Go to Relax-and-Recover shell       6) Abort Relax-and-Recover
#? 5
++ case "$REPLY" in
++ break
Partition primary on /dev/sdb: size reduced to fit on disk.
Partition primary on /dev/sda: size reduced to fit on disk.
Doing SLES12 special btrfs subvolumes setup because the default subvolume path contains '@/.snapshots/'
Please confirm that '/var/lib/rear/layout/diskrestore.sh' is as you expect.
++ select choice in '"${choices[@]}"'
1) View restore script (diskrestore.sh)  3) View original disk space usage        5) Continue recovery
2) Edit restore script (diskrestore.sh)  4) Go to Relax-and-Recover shell         6) Abort Relax-and-Recover
#? 5
++ case "$REPLY" in
++ break
Start system layout restoration.
Creating partitions for disk /dev/sdb (msdos)
Creating partitions for disk /dev/sda (msdos)
Creating LVM PV /dev/sdb1
Creating LVM PV /dev/sda1
Creating LVM VG myvolumegroup
Creating LVM volume myvolumegroup/myhomelogicalvolume
  Logical volume "myhomelogicalvolume" created.
Creating LVM volume myvolumegroup/myrootlogicalvolume
  Logical volume "myrootlogicalvolume" created.
Creating LVM volume myvolumegroup/myswaplogicalvolume
  Logical volume "myswaplogicalvolume" created.
Creating filesystem of type btrfs with mount point / on /dev/mapper/myvolumegroup-myrootlogicalvolume.
btrfs-progs v4.5.3+20160729
See http://btrfs.wiki.kernel.org for more information.
Performing full device TRIM (15.00GiB) ...
Label:              (null)
UUID:               92db603c-2653-47bd-b517-54025cb60306
Node size:          16384
Sector size:        4096
Filesystem size:    15.00GiB
Block group profiles:
  Data:             single            8.00MiB
  Metadata:         DUP               1.01GiB
  System:           DUP              12.00MiB
SSD detected:       no
Incompat features:  extref, skinny-metadata
Number of devices:  1
Devices:
   ID        SIZE  PATH
    1    15.00GiB  /dev/mapper/myvolumegroup-myrootlogicalvolume
Mounting filesystem /
Create subvolume '/mnt/local/@'
Create subvolume '/mnt/local//@/boot/grub2/i386-pc'
Create subvolume '/mnt/local//@/boot/grub2/x86_64-efi'
Create subvolume '/mnt/local//@/opt'
Create subvolume '/mnt/local//@/srv'
Create subvolume '/mnt/local//@/tmp'
Create subvolume '/mnt/local//@/usr/local'
Create subvolume '/mnt/local//@/var/cache'
Create subvolume '/mnt/local//@/var/crash'
Create subvolume '/mnt/local//@/var/lib/libvirt/images'
Create subvolume '/mnt/local//@/var/lib/machines'
Create subvolume '/mnt/local//@/var/lib/mailman'
Create subvolume '/mnt/local//@/var/lib/mariadb'
Create subvolume '/mnt/local//@/var/lib/mysql'
Create subvolume '/mnt/local//@/var/lib/named'
Create subvolume '/mnt/local//@/var/lib/pgsql'
Create subvolume '/mnt/local//@/var/log'
Create subvolume '/mnt/local//@/var/opt'
Create subvolume '/mnt/local//@/var/spool'
Create subvolume '/mnt/local//@/var/tmp'
Running snapper/installation-helper:
step 1 device:/dev/mapper/myvolumegroup-myrootlogicalvolume
temporarily mounting device
copying/modifying config-file
creating filesystem config
creating snapshot
setting default subvolume
done
Creating filesystem of type xfs with mount point /home on /dev/mapper/myvolumegroup-myhomelogicalvolume.
meta-data=/dev/mapper/myvolumegroup-myhomelogicalvolume isize=256    agcount=4, agsize=327680 blks
         =                       sectsz=512   attr=2, projid32bit=1
         =                       crc=0        finobt=0, sparse=0
data     =                       bsize=4096   blocks=1310720, imaxpct=25
         =                       sunit=0      swidth=0 blks
naming   =version 2              bsize=4096   ascii-ci=0 ftype=1
log      =internal log           bsize=4096   blocks=2560, version=2
         =                       sectsz=512   sunit=0 blks, lazy-count=1
realtime =none                   extsz=4096   blocks=0, rtextents=0
Mounting filesystem /home
Creating swap on /dev/mapper/myvolumegroup-myswaplogicalvolume
Disk layout created.
Decrypting disabled
Restoring from '/tmp/rear.D4Tf1ZaNWHcMJ4c/outputfs/d44/backup.tar.gz'
Restored 2191 MiB [avg 72395 KiB/sec]OK
Restored 2191 MiB in 32 seconds [avg 70133 KiB/sec]
Restore the Mountpoints (with permissions) from /var/lib/rear/recovery/mountpoint_permissions
Patching file 'boot/grub2/grub.cfg'
Patching file 'boot/grub2/device.map'
Patching file 'etc/sysconfig/bootloader'
Patching file 'etc/fstab'
Patching file 'etc/mtools.conf'
Patching file 'etc/smartd.conf'
Patching file 'etc/sysconfig/smartmontools'
Patching file 'etc/security/pam_mount.conf.xml'
Installing GRUB2 boot loader
snapper setup-quota done
Finished recovering your system. You can explore it under '/mnt/local'.
</pre>

<p>The result is as expected.</p>
<p>On the original system I have</p>
<pre>
# parted -l 2>/dev/null | grep '^Disk /'            
Disk /dev/sda: 10.7GB
Disk /dev/sdb: 16.1GB
Disk /dev/mapper/myvolumegroup-myhomelogicalvolume: 5369MB
Disk /dev/mapper/myvolumegroup-myswaplogicalvolume: 2147MB
Disk /dev/mapper/myvolumegroup-myrootlogicalvolume: 16.1GB
</pre>

<p>On the recovered system (with interchanged disks) I have:</p>
<pre>
# parted -l 2>/dev/null | grep '^Disk /'
Disk /dev/sda: 16.1GB
Disk /dev/sdb: 10.7GB
Disk /dev/mapper/myvolumegroup-myhomelogicalvolume: 5369MB
Disk /dev/mapper/myvolumegroup-myswaplogicalvolume: 2147MB
Disk /dev/mapper/myvolumegroup-myrootlogicalvolume: 16.1GB
</pre>

<p>For me everything works well.</p>
<h4 id="schabrolles_commented_at_2016-11-09_1113"><img src="https://avatars.githubusercontent.com/u/19491077?u=0021b16ab426902cbe676f6831f41607bbe4d441&v=4" width="50"><a href="https://github.com/schabrolles">schabrolles</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-259390395">2016-11-09 11:13</a>:<a class="headerlink" href="#schabrolles_commented_at_2016-11-09_1113" title="Permanent link">&para;</a></h4>
<p>This works as soon as the disks have different size ... But you can
still have some swapped disk during restoration if you have several disk
with the same size.<br />
What about using lsblk command to store disk_name, size, serial. It
could help to identify the REAL good disk based on serial instead of
only size.</p>
<pre><code># lsblk -ro TYPE,NAME,SIZE,SERIAL | grep disk
disk sdcr 500G 600507680180851458000000000017a4
disk sddh 500G 60050768018085145800000000001797
disk sdcs 500G 60050768018085145800000000001796
disk sddi 500G 60050768018085145800000000001798
</code></pre>
<h4 id="adrian987654321_commented_at_2016-11-09_1433"><img src="https://avatars.githubusercontent.com/u/23192859?v=4" width="50"><a href="https://github.com/Adrian987654321">Adrian987654321</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-259428098">2016-11-09 14:33</a>:<a class="headerlink" href="#adrian987654321_commented_at_2016-11-09_1433" title="Permanent link">&para;</a></h4>
<p>I have installed version 1.19</p>
<p>rear-1.19-22.git201611071733.x86_64.rpm</p>
<p>and have used the SLES12 SP1 config file as suggested from</p>
<p>/usr/share/rear/conf/examples/</p>
<p>and run the tests again. The ISO image is created correctly but the
recovery fails on the same step with the same error message.</p>
<p>Incompat features: extref, skinny-metadata</p>
<p>Mounting filesystem /<br />
An error occured during the layout recreation</p>
<p>This web page may be the issue</p>
<p><a href="https://btrfs.wiki.kernel.org/index.php/Manpage/mkfs.btrfs">https://btrfs.wiki.kernel.org/index.php/Manpage/mkfs.btrfs</a></p>
<p>Search for<br />
Incompat features: extref, skinny-metadata</p>
<p>SMALL FILESYSTEMS AND LARGE NODESIZE</p>
<p>The combination of small filesystem size and large nodesize is not
recommended in general and can lead to various ENOSPC-related issues
during mount time or runtime.</p>
<p>Since mixed block group creation is optional, we allow small filesystem
instances with differing values for sectorsize and nodesize to be
created and could end up in the following situation:</p>
<p>Searching the net
<a href="https://btrfs.wiki.kernel.org/index.php/Manpage/mkfs.btrfs">https://btrfs.wiki.kernel.org/index.php/Manpage/mkfs.btrfs</a></p>
<p>So the output of mkfs.btrfs -O list-all is</p>
<p>Filesystem features available:<br />
mixed-bg - mixed data and metadata block groups (0x4)<br />
extref - increased hardlink limit per file to 65536 (0x40, default)X<br />
raid56 - raid56 extended format (0x80)<br />
skinny-metadata - reduced-size metadata extent refs (0x100, default)<br />
no-holes - no explicit hole extents for files (0x200)</p>
<p>Question seems to be how to turn off these two features (extref and
skinny-metadata) for the recovery.</p>
<h4 id="adrian987654321_commented_at_2016-11-09_1438"><img src="https://avatars.githubusercontent.com/u/23192859?v=4" width="50"><a href="https://github.com/Adrian987654321">Adrian987654321</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-259429258">2016-11-09 14:38</a>:<a class="headerlink" href="#adrian987654321_commented_at_2016-11-09_1438" title="Permanent link">&para;</a></h4>
<p>Sorry forgot to add</p>
<p>mkfs.btrfs -O ^extref ^skinny-metadata</p>
<p>should work when the LV is created.</p>
<h4 id="jsmeix_commented_at_2016-11-09_1537"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-259444183">2016-11-09 15:37</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-11-09_1537" title="Permanent link">&para;</a></h4>
<p>@schabrolles<br />
regarding using any hardware specific IDs:<br />
Have in mind that "rear recover" must work on replacement hardware<br />
where any hardware specific IDs could be different compared to<br />
the original system where "rear mkbackup" was run.</p>
<p>Currently I have no good idea how one could automatically<br />
find out on replacement hardware what the actually right<br />
disks are.</p>
<h4 id="jsmeix_commented_at_2016-11-09_1545"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-259446169">2016-11-09 15:45</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-11-09_1545" title="Permanent link">&para;</a></h4>
<p>@Adrian987654321<br />
in general regarding how to do special hacks during recovery<br />
for recreating the disk layout:<br />
You can edit the diskrestore.sh script during "rear recover",<br />
see my<br />
<a href="https://github.com/rear/rear/issues/1057#issuecomment-259188698">https://github.com/rear/rear/issues/1057#issuecomment-259188698</a></p>
<pre>
Please confirm that '/var/lib/rear/layout/diskrestore.sh' is as you expect.
++ select choice in '"${choices[@]}"'
1) View restore script (diskrestore.sh)  3) View original disk space usage        5) Continue recovery
2) Edit restore script (diskrestore.sh)  4) Go to Relax-and-Recover shell         6) Abort Relax-and-Recover
#?
</pre>

<p>I.e. when you get this question reply with "2" to adapt<br />
the diskrestore.sh script - therein you can change the mkfs<br />
command for btrfs as you need it in your particular case.</p>
<p>For some general documentation about how to play around<br />
with the diskrestore.sh script during "rear recover" see<br />
<a href="https://github.com/rear/rear/blob/master/doc/user-guide/06-layout-configuration.adoc">https://github.com/rear/rear/blob/master/doc/user-guide/06-layout-configuration.adoc</a><br />
and<br />
<a href="https://github.com/rear/rear/blob/master/doc/user-guide/08-troubleshooting.adoc">https://github.com/rear/rear/blob/master/doc/user-guide/08-troubleshooting.adoc</a></p>
<h4 id="schabrolles_commented_at_2016-11-09_1637"><img src="https://avatars.githubusercontent.com/u/19491077?u=0021b16ab426902cbe676f6831f41607bbe4d441&v=4" width="50"><a href="https://github.com/schabrolles">schabrolles</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-259460160">2016-11-09 16:37</a>:<a class="headerlink" href="#schabrolles_commented_at_2016-11-09_1637" title="Permanent link">&para;</a></h4>
<p>@jsmeix<br />
I think we should check first if the same disk exists based on HW ID,<br />
If we can't find the same HW ID, use the size to get the best candidate
disk (like rear is doing today)</p>
<p>When restoring on same hardware, we should keep exactly the same
disks.<br />
When restoring on different hardware, find the best disk to map based on
size.</p>
<h4 id="rpasche_commented_at_2016-11-10_0832"><img src="https://avatars.githubusercontent.com/u/12664472?u=7d93437b713d9a1a67b448b34f2c0a6576a0930e&v=4" width="50"><a href="https://github.com/rpasche">rpasche</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-259630705">2016-11-10 08:32</a>:<a class="headerlink" href="#rpasche_commented_at_2016-11-10_0832" title="Permanent link">&para;</a></h4>
<p>@schabrolles<br />
As you said...on same hardware, you should keep the same disks. And the
disks should also be recognized the same way. For me, the main problem
right now is the setup of @Adrian987654321 currently running system. It
looks somehow broken to me.</p>
<p>@Adrian987654321<br />
Can you please provide output of <code>lsscsi</code> and <code>dmesg</code> and <code>lspci -v</code> on
the running system (before <code>rear mkbackup</code>)</p>
<p>I just want to know the SCSI IDs of the disks and whether there are on
differnt controllers using different modules.</p>
<h4 id="adrian987654321_commented_at_2016-11-10_0843"><img src="https://avatars.githubusercontent.com/u/23192859?v=4" width="50"><a href="https://github.com/Adrian987654321">Adrian987654321</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-259632771">2016-11-10 08:43</a>:<a class="headerlink" href="#adrian987654321_commented_at_2016-11-10_0843" title="Permanent link">&para;</a></h4>
<p>Thanks for the info.</p>
<p>In this case I am trying to run a test restore on the same VM as the
ISO<br />
came from.</p>
<h4 id="jsmeix_commented_at_2016-11-10_0850"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-259634092">2016-11-10 08:50</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-11-10_0850" title="Permanent link">&para;</a></h4>
<p>@schabrolles<br />
I fully agree with your proposal<br />
<a href="https://github.com/rear/rear/issues/1057#issuecomment-259460160">https://github.com/rear/rear/issues/1057#issuecomment-259460160</a><br />
and therefore I created<br />
<a href="https://github.com/rear/rear/issues/1063">https://github.com/rear/rear/issues/1063</a></p>
<h4 id="rpasche_commented_at_2016-11-10_0856"><img src="https://avatars.githubusercontent.com/u/12664472?u=7d93437b713d9a1a67b448b34f2c0a6576a0930e&v=4" width="50"><a href="https://github.com/rpasche">rpasche</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-259635310">2016-11-10 08:56</a>:<a class="headerlink" href="#rpasche_commented_at_2016-11-10_0856" title="Permanent link">&para;</a></h4>
<p>@schabrolles @jsmeix<br />
I also agree. Checking the HW IDs is a good idea.</p>
<h4 id="jsmeix_commented_at_2016-11-10_0921"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-259640399">2016-11-10 09:21</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-11-10_0921" title="Permanent link">&para;</a></h4>
<p>@Adrian987654321<br />
I have a general question:<br />
In
<a href="https://github.com/rear/rear/issues/1057#issue-186547940">https://github.com/rear/rear/issues/1057#issue-186547940</a><br />
you wrote</p>
<pre>
Running on a VM with two disks,
one 50GiB and the other 80GiB.
</pre>

<p>I wonder why you have two virtual harddisks on that virtual machine.<br />
Why can't you simply use a single virtual 130GiB harddisk?<br />
Or more generally:<br />
Why LVM with virtual harddisks?<br />
Perhaps my question is stupid because I have no experience<br />
with LVM (except my few tetsing attempts above).<br />
I think LVM is mainly useful to combine several smaller physical<br />
disks into one bigger pool (a volume group) which can then<br />
be used as if it was a single big disk.</p>
<h4 id="rpasche_commented_at_2016-11-10_0934"><img src="https://avatars.githubusercontent.com/u/12664472?u=7d93437b713d9a1a67b448b34f2c0a6576a0930e&v=4" width="50"><a href="https://github.com/rpasche">rpasche</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-259643384">2016-11-10 09:34</a>:<a class="headerlink" href="#rpasche_commented_at_2016-11-10_0934" title="Permanent link">&para;</a></h4>
<p>@jsmeix<br />
We also use a second disk if someone requires bigger "data", that has
nothing to do with the "OS". We use LVM to be able to resize the
filesystems. Also moving data from one filesystem on LVM to aonother
(via pvmove - on production running system) is also pretty cool.<br />
A second disk could also be placed on another datastore with - possibly
- better performance. Just one option.</p>
<h4 id="adrian987654321_commented_at_2016-11-10_0957"><img src="https://avatars.githubusercontent.com/u/23192859?v=4" width="50"><a href="https://github.com/Adrian987654321">Adrian987654321</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-259648234">2016-11-10 09:57</a>:<a class="headerlink" href="#adrian987654321_commented_at_2016-11-10_0957" title="Permanent link">&para;</a></h4>
<p>The info requested is as follows</p>
<p>lsscsi<br />
[0:0:0:0] disk VMware Virtual disk 1.0 /dev/sda<br />
[0:0:1:0] disk VMware Virtual disk 1.0 /dev/sdb<br />
[2:0:0:0] cd/dvd NECVMWar VMware IDE CDR10 1.00 /dev/sr0</p>
<p>‚Äãdmesg - see attached file</p>
<p>‚Äãlspci -- see file attached.</p>
<p>00:00.0 Host bridge: Intel Corporation 440BX/ZX/DX - 82443BX/ZX/DX Host
bridge (rev 01)<br />
Subsystem: VMware Virtual Machine Chipset<br />
Flags: bus master, medium devsel, latency 0<br />
Kernel driver in use: agpgart-intel</p>
<p>00:01.0 PCI bridge: Intel Corporation 440BX/ZX/DX - 82443BX/ZX/DX AGP
bridge (rev 01) (prog-if 00 [Normal decode])<br />
Flags: bus master, 66MHz, medium devsel, latency 0<br />
Bus: primary=00, secondary=01, subordinate=01, sec-latency=64<br />
Kernel modules: shpchp</p>
<p>00:07.0 ISA bridge: Intel Corporation 82371AB/EB/MB PIIX4 ISA (rev 08)<br />
Subsystem: VMware Virtual Machine Chipset<br />
Flags: bus master, medium devsel, latency 0</p>
<p>00:07.1 IDE interface: Intel Corporation 82371AB/EB/MB PIIX4 IDE (rev
01) (prog-if 8a [Master SecP PriP])<br />
Subsystem: VMware Virtual Machine Chipset<br />
Flags: bus master, medium devsel, latency 64<br />
[virtual] Memory at 000001f0 (32-bit, non-prefetchable) [size=8]<br />
[virtual] Memory at 000003f0 (type 3, non-prefetchable)<br />
[virtual] Memory at 00000170 (32-bit, non-prefetchable) [size=8]<br />
[virtual] Memory at 00000370 (type 3, non-prefetchable)<br />
I/O ports at 1060 [size=16]<br />
Kernel driver in use: ata_piix<br />
Kernel modules: ata_piix, pata_acpi, ata_generic</p>
<p>00:07.3 Bridge: Intel Corporation 82371AB/EB/MB PIIX4 ACPI (rev 08)<br />
Subsystem: VMware Virtual Machine Chipset<br />
Flags: medium devsel, IRQ 9<br />
Kernel modules: i2c_piix4</p>
<p>00:07.7 System peripheral: VMware Virtual Machine Communication
Interface (rev 10)<br />
Subsystem: VMware Virtual Machine Communication Interface<br />
Flags: bus master, medium devsel, latency 64, IRQ 16<br />
I/O ports at 1080 [size=64]<br />
Memory at febfe000 (64-bit, non-prefetchable) [size=8K]<br />
Capabilities: [40] MSI: Enable- Count=1/1 Maskable- 64bit+<br />
Capabilities: [58] MSI-X: Enable+ Count=2 Masked-<br />
Kernel driver in use: vmw_vmci<br />
Kernel modules: vmw_vmci</p>
<p>00:0f.0 VGA compatible controller: VMware SVGA II Adapter (prog-if 00
[VGA controller])<br />
Subsystem: VMware SVGA II Adapter<br />
Flags: bus master, medium devsel, latency 64, IRQ 16<br />
I/O ports at 1070 [size=16]<br />
Memory at ec000000 (32-bit, prefetchable) [size=64M]<br />
Memory at fe000000 (32-bit, non-prefetchable) [size=8M]<br />
[virtual] Expansion ROM at c0000000 [disabled] [size=32K]<br />
Capabilities: [40] Vendor Specific Information: Len=00 &lt;?&gt;<br />
Kernel driver in use: vmwgfx<br />
Kernel modules: vmwgfx</p>
<p>00:10.0 SCSI storage controller: LSI Logic / Symbios Logic 53c1030 PCI-X
Fusion-MPT Dual Ultra320 SCSI (rev 01)<br />
Subsystem: VMware LSI Logic Parallel SCSI Controller<br />
Flags: bus master, medium devsel, latency 64, IRQ 17<br />
I/O ports at 1400 [size=256]<br />
Memory at feba0000 (64-bit, non-prefetchable) [size=128K]<br />
Memory at febc0000 (64-bit, non-prefetchable) [size=128K]<br />
[virtual] Expansion ROM at c0008000 [disabled] [size=16K]<br />
Kernel driver in use: mptspi<br />
Kernel modules: mptspi</p>
<p>00:11.0 PCI bridge: VMware PCI bridge (rev 02) (prog-if 01 [Subtractive
decode])<br />
Flags: bus master, medium devsel, latency 64<br />
Bus: primary=00, secondary=02, subordinate=02, sec-latency=68<br />
I/O behind bridge: 00002000-00003fff<br />
Memory behind bridge: fd600000-fdffffff<br />
Prefetchable memory behind bridge: 00000000ebb00000-00000000ebffffff<br />
Capabilities: [40] Subsystem: VMware PCI bridge</p>
<p>00:15.0 PCI bridge: VMware PCI Express Root Port (rev 01) (prog-if 00
[Normal decode])<br />
Flags: bus master, fast devsel, latency 0<br />
Bus: primary=00, secondary=03, subordinate=03, sec-latency=0<br />
I/O behind bridge: 00004000-00004fff<br />
Memory behind bridge: fd500000-fd5fffff<br />
Prefetchable memory behind bridge: 00000000eba00000-00000000ebafffff<br />
Capabilities: [40] Subsystem: VMware PCI Express Root Port<br />
Capabilities: [48] Power Management version 3<br />
Capabilities: [50] Express Root Port (Slot+), MSI 00<br />
Capabilities: [8c] MSI: Enable+ Count=1/1 Maskable+ 64bit+<br />
Kernel driver in use: pcieport<br />
Kernel modules: shpchp</p>
<p>00:15.1 PCI bridge: VMware PCI Express Root Port (rev 01) (prog-if 00
[Normal decode])<br />
Flags: bus master, fast devsel, latency 0<br />
Bus: primary=00, secondary=04, subordinate=04, sec-latency=0<br />
I/O behind bridge: 00008000-00008fff<br />
Memory behind bridge: fd100000-fd1fffff<br />
Prefetchable memory behind bridge: 00000000eb600000-00000000eb6fffff<br />
Capabilities: [40] Subsystem: VMware PCI Express Root Port<br />
Capabilities: [48] Power Management version 3<br />
Capabilities: [50] Express Root Port (Slot+), MSI 00<br />
Capabilities: [8c] MSI: Enable+ Count=1/1 Maskable+ 64bit+<br />
Kernel driver in use: pcieport<br />
Kernel modules: shpchp</p>
<p>00:15.2 PCI bridge: VMware PCI Express Root Port (rev 01) (prog-if 00
[Normal decode])<br />
Flags: bus master, fast devsel, latency 0<br />
Bus: primary=00, secondary=05, subordinate=05, sec-latency=0<br />
I/O behind bridge: 0000c000-0000cfff<br />
Memory behind bridge: fcd00000-fcdfffff<br />
Prefetchable memory behind bridge: 00000000eb200000-00000000eb2fffff<br />
Capabilities: [40] Subsystem: VMware PCI Express Root Port<br />
Capabilities: [48] Power Management version 3<br />
Capabilities: [50] Express Root Port (Slot+), MSI 00<br />
Capabilities: [8c] MSI: Enable+ Count=1/1 Maskable+ 64bit+<br />
Kernel driver in use: pcieport<br />
Kernel modules: shpchp</p>
<p>00:15.3 PCI bridge: VMware PCI Express Root Port (rev 01) (prog-if 00
[Normal decode])<br />
Flags: bus master, fast devsel, latency 0<br />
Bus: primary=00, secondary=06, subordinate=06, sec-latency=0<br />
Memory behind bridge: fc900000-fc9fffff<br />
Prefetchable memory behind bridge: 00000000eae00000-00000000eaefffff<br />
Capabilities: [40] Subsystem: VMware PCI Express Root Port<br />
Capabilities: [48] Power Management version 3<br />
Capabilities: [50] Express Root Port (Slot+), MSI 00<br />
Capabilities: [8c] MSI: Enable+ Count=1/1 Maskable+ 64bit+<br />
Kernel driver in use: pcieport<br />
Kernel modules: shpchp</p>
<p>00:15.4 PCI bridge: VMware PCI Express Root Port (rev 01) (prog-if 00
[Normal decode])<br />
Flags: bus master, fast devsel, latency 0<br />
Bus: primary=00, secondary=07, subordinate=07, sec-latency=0<br />
Memory behind bridge: fc500000-fc5fffff<br />
Prefetchable memory behind bridge: 00000000eaa00000-00000000eaafffff<br />
Capabilities: [40] Subsystem: VMware PCI Express Root Port<br />
Capabilities: [48] Power Management version 3<br />
Capabilities: [50] Express Root Port (Slot+), MSI 00<br />
Capabilities: [8c] MSI: Enable+ Count=1/1 Maskable+ 64bit+<br />
Kernel driver in use: pcieport<br />
Kernel modules: shpchp</p>
<p>00:15.5 PCI bridge: VMware PCI Express Root Port (rev 01) (prog-if 00
[Normal decode])<br />
Flags: bus master, fast devsel, latency 0<br />
Bus: primary=00, secondary=08, subordinate=08, sec-latency=0<br />
Memory behind bridge: fc100000-fc1fffff<br />
Prefetchable memory behind bridge: 00000000ea600000-00000000ea6fffff<br />
Capabilities: [40] Subsystem: VMware PCI Express Root Port<br />
Capabilities: [48] Power Management version 3<br />
Capabilities: [50] Express Root Port (Slot+), MSI 00<br />
Capabilities: [8c] MSI: Enable+ Count=1/1 Maskable+ 64bit+<br />
Kernel driver in use: pcieport<br />
Kernel modules: shpchp</p>
<p>00:15.6 PCI bridge: VMware PCI Express Root Port (rev 01) (prog-if 00
[Normal decode])<br />
Flags: bus master, fast devsel, latency 0<br />
Bus: primary=00, secondary=09, subordinate=09, sec-latency=0<br />
Memory behind bridge: fbd00000-fbdfffff<br />
Prefetchable memory behind bridge: 00000000ea200000-00000000ea2fffff<br />
Capabilities: [40] Subsystem: VMware PCI Express Root Port<br />
Capabilities: [48] Power Management version 3<br />
Capabilities: [50] Express Root Port (Slot+), MSI 00<br />
Capabilities: [8c] MSI: Enable+ Count=1/1 Maskable+ 64bit+<br />
Kernel driver in use: pcieport<br />
Kernel modules: shpchp</p>
<p>00:15.7 PCI bridge: VMware PCI Express Root Port (rev 01) (prog-if 00
[Normal decode])<br />
Flags: bus master, fast devsel, latency 0<br />
Bus: primary=00, secondary=0a, subordinate=0a, sec-latency=0<br />
Memory behind bridge: fb900000-fb9fffff<br />
Prefetchable memory behind bridge: 00000000e9e00000-00000000e9efffff<br />
Capabilities: [40] Subsystem: VMware PCI Express Root Port<br />
Capabilities: [48] Power Management version 3<br />
Capabilities: [50] Express Root Port (Slot+), MSI 00<br />
Capabilities: [8c] MSI: Enable+ Count=1/1 Maskable+ 64bit+<br />
Kernel driver in use: pcieport<br />
Kernel modules: shpchp</p>
<p>00:16.0 PCI bridge: VMware PCI Express Root Port (rev 01) (prog-if 00
[Normal decode])<br />
Flags: bus master, fast devsel, latency 0<br />
Bus: primary=00, secondary=0b, subordinate=0b, sec-latency=0<br />
I/O behind bridge: 00005000-00005fff<br />
Memory behind bridge: fd400000-fd4fffff<br />
Prefetchable memory behind bridge: 00000000eb900000-00000000eb9fffff<br />
Capabilities: [40] Subsystem: VMware PCI Express Root Port<br />
Capabilities: [48] Power Management version 3<br />
Capabilities: [50] Express Root Port (Slot+), MSI 00<br />
Capabilities: [8c] MSI: Enable+ Count=1/1 Maskable+ 64bit+<br />
Kernel driver in use: pcieport<br />
Kernel modules: shpchp</p>
<p>00:16.1 PCI bridge: VMware PCI Express Root Port (rev 01) (prog-if 00
[Normal decode])<br />
Flags: bus master, fast devsel, latency 0<br />
Bus: primary=00, secondary=0c, subordinate=0c, sec-latency=0<br />
I/O behind bridge: 00009000-00009fff<br />
Memory behind bridge: fd000000-fd0fffff<br />
Prefetchable memory behind bridge: 00000000eb500000-00000000eb5fffff<br />
Capabilities: [40] Subsystem: VMware PCI Express Root Port<br />
Capabilities: [48] Power Management version 3<br />
Capabilities: [50] Express Root Port (Slot+), MSI 00<br />
Capabilities: [8c] MSI: Enable+ Count=1/1 Maskable+ 64bit+<br />
Kernel driver in use: pcieport<br />
Kernel modules: shpchp</p>
<p>00:16.2 PCI bridge: VMware PCI Express Root Port (rev 01) (prog-if 00
[Normal decode])<br />
Flags: bus master, fast devsel, latency 0<br />
Bus: primary=00, secondary=0d, subordinate=0d, sec-latency=0<br />
I/O behind bridge: 0000d000-0000dfff<br />
Memory behind bridge: fcc00000-fccfffff<br />
Prefetchable memory behind bridge: 00000000eb100000-00000000eb1fffff<br />
Capabilities: [40] Subsystem: VMware PCI Express Root Port<br />
Capabilities: [48] Power Management version 3<br />
Capabilities: [50] Express Root Port (Slot+), MSI 00<br />
Capabilities: [8c] MSI: Enable+ Count=1/1 Maskable+ 64bit+<br />
Kernel driver in use: pcieport<br />
Kernel modules: shpchp</p>
<p>00:16.3 PCI bridge: VMware PCI Express Root Port (rev 01) (prog-if 00
[Normal decode])<br />
Flags: bus master, fast devsel, latency 0<br />
Bus: primary=00, secondary=0e, subordinate=0e, sec-latency=0<br />
Memory behind bridge: fc800000-fc8fffff<br />
Prefetchable memory behind bridge: 00000000ead00000-00000000eadfffff<br />
Capabilities: [40] Subsystem: VMware PCI Express Root Port<br />
Capabilities: [48] Power Management version 3<br />
Capabilities: [50] Express Root Port (Slot+), MSI 00<br />
Capabilities: [8c] MSI: Enable+ Count=1/1 Maskable+ 64bit+<br />
Kernel driver in use: pcieport<br />
Kernel modules: shpchp</p>
<p>00:16.4 PCI bridge: VMware PCI Express Root Port (rev 01) (prog-if 00
[Normal decode])<br />
Flags: bus master, fast devsel, latency 0<br />
Bus: primary=00, secondary=0f, subordinate=0f, sec-latency=0<br />
Memory behind bridge: fc400000-fc4fffff<br />
Prefetchable memory behind bridge: 00000000ea900000-00000000ea9fffff<br />
Capabilities: [40] Subsystem: VMware PCI Express Root Port<br />
Capabilities: [48] Power Management version 3<br />
Capabilities: [50] Express Root Port (Slot+), MSI 00<br />
Capabilities: [8c] MSI: Enable+ Count=1/1 Maskable+ 64bit+<br />
Kernel driver in use: pcieport<br />
Kernel modules: shpchp</p>
<p>00:16.5 PCI bridge: VMware PCI Express Root Port (rev 01) (prog-if 00
[Normal decode])<br />
Flags: bus master, fast devsel, latency 0<br />
Bus: primary=00, secondary=10, subordinate=10, sec-latency=0<br />
Memory behind bridge: fc000000-fc0fffff<br />
Prefetchable memory behind bridge: 00000000ea500000-00000000ea5fffff<br />
Capabilities: [40] Subsystem: VMware PCI Express Root Port<br />
Capabilities: [48] Power Management version 3<br />
Capabilities: [50] Express Root Port (Slot+), MSI 00<br />
Capabilities: [8c] MSI: Enable+ Count=1/1 Maskable+ 64bit+<br />
Kernel driver in use: pcieport<br />
Kernel modules: shpchp</p>
<p>00:16.6 PCI bridge: VMware PCI Express Root Port (rev 01) (prog-if 00
[Normal decode])<br />
Flags: bus master, fast devsel, latency 0<br />
Bus: primary=00, secondary=11, subordinate=11, sec-latency=0<br />
Memory behind bridge: fbc00000-fbcfffff<br />
Prefetchable memory behind bridge: 00000000ea100000-00000000ea1fffff<br />
Capabilities: [40] Subsystem: VMware PCI Express Root Port<br />
Capabilities: [48] Power Management version 3<br />
Capabilities: [50] Express Root Port (Slot+), MSI 00<br />
Capabilities: [8c] MSI: Enable+ Count=1/1 Maskable+ 64bit+<br />
Kernel driver in use: pcieport<br />
Kernel modules: shpchp</p>
<p>00:16.7 PCI bridge: VMware PCI Express Root Port (rev 01) (prog-if 00
[Normal decode])<br />
Flags: bus master, fast devsel, latency 0<br />
Bus: primary=00, secondary=12, subordinate=12, sec-latency=0<br />
Memory behind bridge: fb800000-fb8fffff<br />
Prefetchable memory behind bridge: 00000000e9d00000-00000000e9dfffff<br />
Capabilities: [40] Subsystem: VMware PCI Express Root Port<br />
Capabilities: [48] Power Management version 3<br />
Capabilities: [50] Express Root Port (Slot+), MSI 00<br />
Capabilities: [8c] MSI: Enable+ Count=1/1 Maskable+ 64bit+<br />
Kernel driver in use: pcieport<br />
Kernel modules: shpchp</p>
<p>00:17.0 PCI bridge: VMware PCI Express Root Port (rev 01) (prog-if 00
[Normal decode])<br />
Flags: bus master, fast devsel, latency 0<br />
Bus: primary=00, secondary=13, subordinate=13, sec-latency=0<br />
I/O behind bridge: 00006000-00006fff<br />
Memory behind bridge: fd300000-fd3fffff<br />
Prefetchable memory behind bridge: 00000000eb800000-00000000eb8fffff<br />
Capabilities: [40] Subsystem: VMware PCI Express Root Port<br />
Capabilities: [48] Power Management version 3<br />
Capabilities: [50] Express Root Port (Slot+), MSI 00<br />
Capabilities: [8c] MSI: Enable+ Count=1/1 Maskable+ 64bit+<br />
Kernel driver in use: pcieport<br />
Kernel modules: shpchp</p>
<p>00:17.1 PCI bridge: VMware PCI Express Root Port (rev 01) (prog-if 00
[Normal decode])<br />
Flags: bus master, fast devsel, latency 0<br />
Bus: primary=00, secondary=14, subordinate=14, sec-latency=0<br />
I/O behind bridge: 0000a000-0000afff<br />
Memory behind bridge: fcf00000-fcffffff<br />
Prefetchable memory behind bridge: 00000000eb400000-00000000eb4fffff<br />
Capabilities: [40] Subsystem: VMware PCI Express Root Port<br />
Capabilities: [48] Power Management version 3<br />
Capabilities: [50] Express Root Port (Slot+), MSI 00<br />
Capabilities: [8c] MSI: Enable+ Count=1/1 Maskable+ 64bit+<br />
Kernel driver in use: pcieport<br />
Kernel modules: shpchp</p>
<p>00:17.2 PCI bridge: VMware PCI Express Root Port (rev 01) (prog-if 00
[Normal decode])<br />
Flags: bus master, fast devsel, latency 0<br />
Bus: primary=00, secondary=15, subordinate=15, sec-latency=0<br />
I/O behind bridge: 0000e000-0000efff<br />
Memory behind bridge: fcb00000-fcbfffff<br />
Prefetchable memory behind bridge: 00000000eb000000-00000000eb0fffff<br />
Capabilities: [40] Subsystem: VMware PCI Express Root Port<br />
Capabilities: [48] Power Management version 3<br />
Capabilities: [50] Express Root Port (Slot+), MSI 00<br />
Capabilities: [8c] MSI: Enable+ Count=1/1 Maskable+ 64bit+<br />
Kernel driver in use: pcieport<br />
Kernel modules: shpchp</p>
<p>00:17.3 PCI bridge: VMware PCI Express Root Port (rev 01) (prog-if 00
[Normal decode])<br />
Flags: bus master, fast devsel, latency 0<br />
Bus: primary=00, secondary=16, subordinate=16, sec-latency=0<br />
Memory behind bridge: fc700000-fc7fffff<br />
Prefetchable memory behind bridge: 00000000eac00000-00000000eacfffff<br />
Capabilities: [40] Subsystem: VMware PCI Express Root Port<br />
Capabilities: [48] Power Management version 3<br />
Capabilities: [50] Express Root Port (Slot+), MSI 00<br />
Capabilities: [8c] MSI: Enable+ Count=1/1 Maskable+ 64bit+<br />
Kernel driver in use: pcieport<br />
Kernel modules: shpchp</p>
<p>00:17.4 PCI bridge: VMware PCI Express Root Port (rev 01) (prog-if 00
[Normal decode])<br />
Flags: bus master, fast devsel, latency 0<br />
Bus: primary=00, secondary=17, subordinate=17, sec-latency=0<br />
Memory behind bridge: fc300000-fc3fffff<br />
Prefetchable memory behind bridge: 00000000ea800000-00000000ea8fffff<br />
Capabilities: [40] Subsystem: VMware PCI Express Root Port<br />
Capabilities: [48] Power Management version 3<br />
Capabilities: [50] Express Root Port (Slot+), MSI 00<br />
Capabilities: [8c] MSI: Enable+ Count=1/1 Maskable+ 64bit+<br />
Kernel driver in use: pcieport<br />
Kernel modules: shpchp</p>
<p>00:17.5 PCI bridge: VMware PCI Express Root Port (rev 01) (prog-if 00
[Normal decode])<br />
Flags: bus master, fast devsel, latency 0<br />
Bus: primary=00, secondary=18, subordinate=18, sec-latency=0<br />
Memory behind bridge: fbf00000-fbffffff<br />
Prefetchable memory behind bridge: 00000000ea400000-00000000ea4fffff<br />
Capabilities: [40] Subsystem: VMware PCI Express Root Port<br />
Capabilities: [48] Power Management version 3<br />
Capabilities: [50] Express Root Port (Slot+), MSI 00<br />
Capabilities: [8c] MSI: Enable+ Count=1/1 Maskable+ 64bit+<br />
Kernel driver in use: pcieport<br />
Kernel modules: shpchp</p>
<p>00:17.6 PCI bridge: VMware PCI Express Root Port (rev 01) (prog-if 00
[Normal decode])<br />
Flags: bus master, fast devsel, latency 0<br />
Bus: primary=00, secondary=19, subordinate=19, sec-latency=0<br />
Memory behind bridge: fbb00000-fbbfffff<br />
Prefetchable memory behind bridge: 00000000ea000000-00000000ea0fffff<br />
Capabilities: [40] Subsystem: VMware PCI Express Root Port<br />
Capabilities: [48] Power Management version 3<br />
Capabilities: [50] Express Root Port (Slot+), MSI 00<br />
Capabilities: [8c] MSI: Enable+ Count=1/1 Maskable+ 64bit+<br />
Kernel driver in use: pcieport<br />
Kernel modules: shpchp</p>
<p>00:17.7 PCI bridge: VMware PCI Express Root Port (rev 01) (prog-if 00
[Normal decode])<br />
Flags: bus master, fast devsel, latency 0<br />
Bus: primary=00, secondary=1a, subordinate=1a, sec-latency=0<br />
Memory behind bridge: fb700000-fb7fffff<br />
Prefetchable memory behind bridge: 00000000e9c00000-00000000e9cfffff<br />
Capabilities: [40] Subsystem: VMware PCI Express Root Port<br />
Capabilities: [48] Power Management version 3<br />
Capabilities: [50] Express Root Port (Slot+), MSI 00<br />
Capabilities: [8c] MSI: Enable+ Count=1/1 Maskable+ 64bit+<br />
Kernel driver in use: pcieport<br />
Kernel modules: shpchp</p>
<p>00:18.0 PCI bridge: VMware PCI Express Root Port (rev 01) (prog-if 00
[Normal decode])<br />
Flags: bus master, fast devsel, latency 0<br />
Bus: primary=00, secondary=1b, subordinate=1b, sec-latency=0<br />
I/O behind bridge: 00007000-00007fff<br />
Memory behind bridge: fd200000-fd2fffff<br />
Prefetchable memory behind bridge: 00000000eb700000-00000000eb7fffff<br />
Capabilities: [40] Subsystem: VMware PCI Express Root Port<br />
Capabilities: [48] Power Management version 3<br />
Capabilities: [50] Express Root Port (Slot+), MSI 00<br />
Capabilities: [8c] MSI: Enable+ Count=1/1 Maskable+ 64bit+<br />
Kernel driver in use: pcieport<br />
Kernel modules: shpchp</p>
<p>00:18.1 PCI bridge: VMware PCI Express Root Port (rev 01) (prog-if 00
[Normal decode])<br />
Flags: bus master, fast devsel, latency 0<br />
Bus: primary=00, secondary=1c, subordinate=1c, sec-latency=0<br />
I/O behind bridge: 0000b000-0000bfff<br />
Memory behind bridge: fce00000-fcefffff<br />
Prefetchable memory behind bridge: 00000000eb300000-00000000eb3fffff<br />
Capabilities: [40] Subsystem: VMware PCI Express Root Port<br />
Capabilities: [48] Power Management version 3<br />
Capabilities: [50] Express Root Port (Slot+), MSI 00<br />
Capabilities: [8c] MSI: Enable+ Count=1/1 Maskable+ 64bit+<br />
Kernel driver in use: pcieport<br />
Kernel modules: shpchp</p>
<p>00:18.2 PCI bridge: VMware PCI Express Root Port (rev 01) (prog-if 00
[Normal decode])<br />
Flags: bus master, fast devsel, latency 0<br />
Bus: primary=00, secondary=1d, subordinate=1d, sec-latency=0<br />
Memory behind bridge: fca00000-fcafffff<br />
Prefetchable memory behind bridge: 00000000eaf00000-00000000eaffffff<br />
Capabilities: [40] Subsystem: VMware PCI Express Root Port<br />
Capabilities: [48] Power Management version 3<br />
Capabilities: [50] Express Root Port (Slot+), MSI 00<br />
Capabilities: [8c] MSI: Enable+ Count=1/1 Maskable+ 64bit+<br />
Kernel driver in use: pcieport<br />
Kernel modules: shpchp</p>
<p>00:18.3 PCI bridge: VMware PCI Express Root Port (rev 01) (prog-if 00
[Normal decode])<br />
Flags: bus master, fast devsel, latency 0<br />
Bus: primary=00, secondary=1e, subordinate=1e, sec-latency=0<br />
Memory behind bridge: fc600000-fc6fffff<br />
Prefetchable memory behind bridge: 00000000eab00000-00000000eabfffff<br />
Capabilities: [40] Subsystem: VMware PCI Express Root Port<br />
Capabilities: [48] Power Management version 3<br />
Capabilities: [50] Express Root Port (Slot+), MSI 00<br />
Capabilities: [8c] MSI: Enable+ Count=1/1 Maskable+ 64bit+<br />
Kernel driver in use: pcieport<br />
Kernel modules: shpchp</p>
<p>00:18.4 PCI bridge: VMware PCI Express Root Port (rev 01) (prog-if 00
[Normal decode])<br />
Flags: bus master, fast devsel, latency 0<br />
Bus: primary=00, secondary=1f, subordinate=1f, sec-latency=0<br />
Memory behind bridge: fc200000-fc2fffff<br />
Prefetchable memory behind bridge: 00000000ea700000-00000000ea7fffff<br />
Capabilities: [40] Subsystem: VMware PCI Express Root Port<br />
Capabilities: [48] Power Management version 3<br />
Capabilities: [50] Express Root Port (Slot+), MSI 00<br />
Capabilities: [8c] MSI: Enable+ Count=1/1 Maskable+ 64bit+<br />
Kernel driver in use: pcieport<br />
Kernel modules: shpchp</p>
<p>00:18.5 PCI bridge: VMware PCI Express Root Port (rev 01) (prog-if 00
[Normal decode])<br />
Flags: bus master, fast devsel, latency 0<br />
Bus: primary=00, secondary=20, subordinate=20, sec-latency=0<br />
Memory behind bridge: fbe00000-fbefffff<br />
Prefetchable memory behind bridge: 00000000ea300000-00000000ea3fffff<br />
Capabilities: [40] Subsystem: VMware PCI Express Root Port<br />
Capabilities: [48] Power Management version 3<br />
Capabilities: [50] Express Root Port (Slot+), MSI 00<br />
Capabilities: [8c] MSI: Enable+ Count=1/1 Maskable+ 64bit+<br />
Kernel driver in use: pcieport<br />
Kernel modules: shpchp</p>
<p>00:18.6 PCI bridge: VMware PCI Express Root Port (rev 01) (prog-if 00
[Normal decode])<br />
Flags: bus master, fast devsel, latency 0<br />
Bus: primary=00, secondary=21, subordinate=21, sec-latency=0<br />
Memory behind bridge: fba00000-fbafffff<br />
Prefetchable memory behind bridge: 00000000e9f00000-00000000e9ffffff<br />
Capabilities: [40] Subsystem: VMware PCI Express Root Port<br />
Capabilities: [48] Power Management version 3<br />
Capabilities: [50] Express Root Port (Slot+), MSI 00<br />
Capabilities: [8c] MSI: Enable+ Count=1/1 Maskable+ 64bit+<br />
Kernel driver in use: pcieport<br />
Kernel modules: shpchp</p>
<p>00:18.7 PCI bridge: VMware PCI Express Root Port (rev 01) (prog-if 00
[Normal decode])<br />
Flags: bus master, fast devsel, latency 0<br />
Bus: primary=00, secondary=22, subordinate=22, sec-latency=0<br />
Memory behind bridge: fb600000-fb6fffff<br />
Prefetchable memory behind bridge: 00000000e9b00000-00000000e9bfffff<br />
Capabilities: [40] Subsystem: VMware PCI Express Root Port<br />
Capabilities: [48] Power Management version 3<br />
Capabilities: [50] Express Root Port (Slot+), MSI 00<br />
Capabilities: [8c] MSI: Enable+ Count=1/1 Maskable+ 64bit+<br />
Kernel driver in use: pcieport<br />
Kernel modules: shpchp</p>
<p>03:00.0 Ethernet controller: VMware VMXNET3 Ethernet Controller (rev
01)<br />
Subsystem: VMware VMXNET3 Ethernet Controller<br />
Physical Slot: 160<br />
Flags: bus master, fast devsel, latency 0, IRQ 18<br />
Memory at fd5fb000 (32-bit, non-prefetchable) [size=4K]<br />
Memory at fd5fc000 (32-bit, non-prefetchable) [size=4K]<br />
Memory at fd5fe000 (32-bit, non-prefetchable) [size=8K]<br />
I/O ports at 4000 [size=16]<br />
[virtual] Expansion ROM at fd500000 [disabled] [size=64K]<br />
Capabilities: [40] Power Management version 3<br />
Capabilities: [48] Express Endpoint, MSI 00<br />
Capabilities: [84] MSI: Enable- Count=1/1 Maskable- 64bit+<br />
Capabilities: [9c] MSI-X: Enable+ Count=25 Masked-<br />
Capabilities: [100] Device Serial Number ff-56-50-00-15-25-94-fe<br />
Kernel driver in use: vmxnet3<br />
Kernel modules: vmxnet3</p>
<h4 id="schabrolles_commented_at_2016-11-10_1021"><img src="https://avatars.githubusercontent.com/u/19491077?u=0021b16ab426902cbe676f6831f41607bbe4d441&v=4" width="50"><a href="https://github.com/schabrolles">schabrolles</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-259653769">2016-11-10 10:21</a>:<a class="headerlink" href="#schabrolles_commented_at_2016-11-10_1021" title="Permanent link">&para;</a></h4>
<p>@Adrian987654321</p>
<p>Could you please also run the following command:<br />
<code>lsblk -ro TYPE,NAME,SIZE,SERIAL | grep disk</code></p>
<h4 id="rpasche_commented_at_2016-11-10_1027"><img src="https://avatars.githubusercontent.com/u/12664472?u=7d93437b713d9a1a67b448b34f2c0a6576a0930e&v=4" width="50"><a href="https://github.com/rpasche">rpasche</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-259655010">2016-11-10 10:27</a>:<a class="headerlink" href="#rpasche_commented_at_2016-11-10_1027" title="Permanent link">&para;</a></h4>
<p>@Adrian987654321<br />
I don't see dmesg output right now, but from <code>lsscsi</code> this looks just
normal. 2 disks on one controller. Nothing special.<br />
Confused.</p>
<h4 id="adrian987654321_commented_at_2016-11-10_1036"><img src="https://avatars.githubusercontent.com/u/23192859?v=4" width="50"><a href="https://github.com/Adrian987654321">Adrian987654321</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-259656832">2016-11-10 10:36</a>:<a class="headerlink" href="#adrian987654321_commented_at_2016-11-10_1036" title="Permanent link">&para;</a></h4>
<p>Good questions. I'm new to Linux lots of experience with another OSes
so<br />
don't know all the answers.</p>
<p>Two disk are normally on two data stores in VMWare and possibly on two
or<br />
more SANs. There are lots of things you can do with LVM whihc makes it
very<br />
good to use.</p>
<p>Adrian</p>
<p>On 10 November 2016 at 09:21, Johannes Meixner
<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;">&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a><br />
wrote:</p>
<blockquote>
<p>@Adrian987654321
<a href="https://github.com/Adrian987654321">https://github.com/Adrian987654321</a><br />
I have a general question:<br />
In #1057 (comment)<br />
<a href="https://github.com/rear/rear/issues/1057#issue-186547940">https://github.com/rear/rear/issues/1057#issue-186547940</a><br />
you wrote</p>
<p>Running on a VM with two disks,<br />
one 50GiB and the other 80GiB.</p>
<p>I wonder why you have two virtual harddisks on that virtual machine.<br />
Why can't you simply use a single virtual 130GiB harddisk?<br />
Or more generally:<br />
Why LVM with virtual harddisks?<br />
Perhaps my question is stupid because I have no experience<br />
with LVM (except my few tetsing attempts above).<br />
I think LVM is mainly useful to combine several smaller physical<br />
disks into one bigger pool (a volume group) which can then<br />
be used as if it was a single big disk.</p>
<p>‚Äî<br />
You are receiving this because you were mentioned.<br />
Reply to this email directly, view it on GitHub<br />
<a href="https://github.com/rear/rear/issues/1057#issuecomment-259640399">https://github.com/rear/rear/issues/1057#issuecomment-259640399</a>,
or mute<br />
the thread<br />
<a href="https://github.com/notifications/unsubscribe-auth/AWHlG9TS1iQRyD6IMXvy0QIcLtjVLmT8ks5q8uIVgaJpZM4KmJm6">https://github.com/notifications/unsubscribe-auth/AWHlG9TS1iQRyD6IMXvy0QIcLtjVLmT8ks5q8uIVgaJpZM4KmJm6</a><br />
.</p>
<hr />
<p>This email is confidential and may contain copyright material of the
John Lewis Partnership.<br />
If you are not the intended recipient, please notify us immediately
and delete all copies of this message.<br />
(Please note that it is your responsibility to scan this message for
viruses). Email to and from the<br />
John Lewis Partnership is automatically monitored for operational and
lawful business reasons.</p>
<hr />
</blockquote>
<p>John Lewis plc<br />
Registered in England 233462<br />
Registered office 171 Victoria Street London SW1E 5NN</p>
<p>Websites: <a href="http://www.johnlewis.com">http://www.johnlewis.com</a><br />
<a href="http://www.waitrose.com">http://www.waitrose.com</a><br />
<a href="http://www.johnlewis.com/insurance">http://www.johnlewis.com/insurance</a><br />
<a href="http://www.johnlewispartnership.co.uk">http://www.johnlewispartnership.co.uk</a></p>
<hr />
<h4 id="adrian987654321_commented_at_2016-11-10_1239"><img src="https://avatars.githubusercontent.com/u/23192859?v=4" width="50"><a href="https://github.com/Adrian987654321">Adrian987654321</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-259679959">2016-11-10 12:39</a>:<a class="headerlink" href="#adrian987654321_commented_at_2016-11-10_1239" title="Permanent link">&para;</a></h4>
<p><a href="https://github.com/rear/rear/files/583348/dmesg.txt">dmesg.txt</a></p>
<h4 id="adrian987654321_commented_at_2016-11-10_1240"><img src="https://avatars.githubusercontent.com/u/23192859?v=4" width="50"><a href="https://github.com/Adrian987654321">Adrian987654321</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-259680142">2016-11-10 12:40</a>:<a class="headerlink" href="#adrian987654321_commented_at_2016-11-10_1240" title="Permanent link">&para;</a></h4>
<p>I've added the dmesg file. It doesn't like the file without an extension
so it's now dmesg.txt not just dmesg.</p>
<h4 id="adrian987654321_commented_at_2016-11-10_1241"><img src="https://avatars.githubusercontent.com/u/23192859?v=4" width="50"><a href="https://github.com/Adrian987654321">Adrian987654321</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-259680187">2016-11-10 12:40</a>:<a class="headerlink" href="#adrian987654321_commented_at_2016-11-10_1241" title="Permanent link">&para;</a></h4>
<p>lsblk -ro TYPE,NAME,SIZE,SERIAL | grep disk<br />
disk fd0 4K<br />
disk sda 50G<br />
disk sdb 70G</p>
<hr />
<p>Adrian Edwards<br />
Infrastructure and Security Partnership IT<br />
John Lewis Partnership<br />
123 Victoria Street, London, SW1E 6DW<br />
adrian.edwards@j
<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#97;&#100;&#114;&#105;&#97;&#110;&#46;&#101;&#100;&#119;&#97;&#114;&#100;&#115;&#64;&#112;&#97;&#114;&#116;&#110;&#101;&#114;&#115;&#104;&#105;&#112;&#115;&#101;&#114;&#118;&#105;&#99;&#101;&#115;&#46;&#99;&#111;&#46;&#117;&#107;&#111;&#104;&#110;&#108;&#101;&#105;&#119;&#115;&#46;&#99;&#111;&#46;&#117;&#107;">&#97;&#100;&#114;&#105;&#97;&#110;&#46;&#101;&#100;&#119;&#97;&#114;&#100;&#115;&#64;&#112;&#97;&#114;&#116;&#110;&#101;&#114;&#115;&#104;&#105;&#112;&#115;&#101;&#114;&#118;&#105;&#99;&#101;&#115;&#46;&#99;&#111;&#46;&#117;&#107;&#111;&#104;&#110;&#108;&#101;&#105;&#119;&#115;&#46;&#99;&#111;&#46;&#117;&#107;</a></p>
<p>On 10 November 2016 at 10:21, S√©bastien Chabrolles
&lt;<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;">&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a></p>
<blockquote>
<p>wrote:</p>
<p>@Adrian987654321
<a href="https://github.com/Adrian987654321">https://github.com/Adrian987654321</a></p>
<p>Could you please also run the following command:<br />
lsblk -ro TYPE,NAME,SIZE,SERIAL | grep disk</p>
<p>‚Äî<br />
You are receiving this because you were mentioned.<br />
Reply to this email directly, view it on GitHub<br />
<a href="https://github.com/rear/rear/issues/1057#issuecomment-259653769">https://github.com/rear/rear/issues/1057#issuecomment-259653769</a>,
or mute<br />
the thread<br />
<a href="https://github.com/notifications/unsubscribe-auth/AWHlG9fn8-gTYOJYEMtE3BIsR5XdRS0wks5q8vBFgaJpZM4KmJm6">https://github.com/notifications/unsubscribe-auth/AWHlG9fn8-gTYOJYEMtE3BIsR5XdRS0wks5q8vBFgaJpZM4KmJm6</a><br />
.</p>
<hr />
<p>This email is confidential and may contain copyright material of the
John Lewis Partnership.<br />
If you are not the intended recipient, please notify us immediately
and delete all copies of this message.<br />
(Please note that it is your responsibility to scan this message for
viruses). Email to and from the<br />
John Lewis Partnership is automatically monitored for operational and
lawful business reasons.</p>
<hr />
</blockquote>
<p>John Lewis plc<br />
Registered in England 233462<br />
Registered office 171 Victoria Street London SW1E 5NN</p>
<p>Websites: <a href="http://www.johnlewis.com">http://www.johnlewis.com</a><br />
<a href="http://www.waitrose.com">http://www.waitrose.com</a><br />
<a href="http://www.johnlewis.com/insurance">http://www.johnlewis.com/insurance</a><br />
<a href="http://www.johnlewispartnership.co.uk">http://www.johnlewispartnership.co.uk</a></p>
<hr />
<h4 id="rpasche_commented_at_2016-11-10_1317"><img src="https://avatars.githubusercontent.com/u/12664472?u=7d93437b713d9a1a67b448b34f2c0a6576a0930e&v=4" width="50"><a href="https://github.com/rpasche">rpasche</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-259687440">2016-11-10 13:17</a>:<a class="headerlink" href="#rpasche_commented_at_2016-11-10_1317" title="Permanent link">&para;</a></h4>
<p>@Adrian987654321<br />
I'm still confused. One more thing. Just to be sure. Please show output
of <code>lsscsi</code> within recovery. Just login with "root" but don't perform a
"rear recover"</p>
<p>This should list</p>
<pre><code>0:0:1:0   /dev/sda
0:0:0:0   /dev/sdb
</code></pre>
<h4 id="adrian987654321_commented_at_2016-11-10_1444"><img src="https://avatars.githubusercontent.com/u/23192859?v=4" width="50"><a href="https://github.com/Adrian987654321">Adrian987654321</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-259707612">2016-11-10 14:44</a>:<a class="headerlink" href="#adrian987654321_commented_at_2016-11-10_1444" title="Permanent link">&para;</a></h4>
<p>OK - will do but it isn't likely to happen until tomorrow.</p>
<h4 id="rpasche_commented_at_2016-11-10_1458"><img src="https://avatars.githubusercontent.com/u/12664472?u=7d93437b713d9a1a67b448b34f2c0a6576a0930e&v=4" width="50"><a href="https://github.com/rpasche">rpasche</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-259711230">2016-11-10 14:58</a>:<a class="headerlink" href="#rpasche_commented_at_2016-11-10_1458" title="Permanent link">&para;</a></h4>
<p>@Adrian987654321<br />
No problem. I just want to understand, what is happening on your system.
Your setup looks just as mine (VM disk setup) so this "problem" might
hit me too, one day.</p>
<h4 id="schabrolles_commented_at_2016-11-10_1514"><img src="https://avatars.githubusercontent.com/u/19491077?u=0021b16ab426902cbe676f6831f41607bbe4d441&v=4" width="50"><a href="https://github.com/schabrolles">schabrolles</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-259715601">2016-11-10 15:14</a>:<a class="headerlink" href="#schabrolles_commented_at_2016-11-10_1514" title="Permanent link">&para;</a></h4>
<p>@Adrian987654321<br />
Thanks, for running <code>lsblk</code> command, it seems it doesn't work with
virtual devices.</p>
<h4 id="adrian987654321_commented_at_2016-11-11_1139"><img src="https://avatars.githubusercontent.com/u/23192859?v=4" width="50"><a href="https://github.com/Adrian987654321">Adrian987654321</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-259940076">2016-11-11 11:39</a>:<a class="headerlink" href="#adrian987654321_commented_at_2016-11-11_1139" title="Permanent link">&para;</a></h4>
<p>The outoput from lsscsi command on boot is at attached in the image.</p>
<p>Note I've installed SLES12 SP2 in the hope that it might fix the issue.
Sadly it hasn't.<br />
<img alt="lsscsi_on_bootpng" src="https://cloud.githubusercontent.com/assets/23192859/20214022/7b898e74-a803-11e6-88e7-ca9e9489341b.PNG" /></p>
<h4 id="rpasche_commented_at_2016-11-11_1541"><img src="https://avatars.githubusercontent.com/u/12664472?u=7d93437b713d9a1a67b448b34f2c0a6576a0930e&v=4" width="50"><a href="https://github.com/rpasche">rpasche</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-259984760">2016-11-11 15:41</a>:<a class="headerlink" href="#rpasche_commented_at_2016-11-11_1541" title="Permanent link">&para;</a></h4>
<p>@Adrian987654321<br />
Now here is some kind of problem.<br />
You earlier wrote</p>
<blockquote>
<p>lsscsi<br />
[0:0:0:0] disk VMware Virtual disk 1.0 /dev/sda<br />
[0:0:1:0] disk VMware Virtual disk 1.0 /dev/sdb<br />
[2:0:0:0] cd/dvd NECVMWar VMware IDE CDR10 1.00 /dev/sr0</p>
</blockquote>
<p>This means, your <code>/dev/sda</code> in your running system is the 50 GB disk and
<code>/dev/sdb</code> must be your 70 GB disk.<br />
Now....in recovery, disk <code>[0:0:0:0]</code> should "still" be your 50 GB disk
and <code>[0:0:1:0]</code> must be your 70 GB disk. The <code>0:0</code> and <code>0:1</code> are the
SCSI ID. You can see these within the properties of the VM disks.</p>
<p>There is no way this can be switched by <code>rear</code>. Only way this can be
switched is within the VM properties (the assignment of the disks and
there SCSI IDs).</p>
<p>Are you using VMware snapshots to test this rear backup and recovery?</p>
<h4 id="adrian987654321_commented_at_2016-11-11_1702"><img src="https://avatars.githubusercontent.com/u/23192859?v=4" width="50"><a href="https://github.com/Adrian987654321">Adrian987654321</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-260003749">2016-11-11 17:02</a>:<a class="headerlink" href="#adrian987654321_commented_at_2016-11-11_1702" title="Permanent link">&para;</a></h4>
<p>Ah, I think i know why that is.</p>
<p>I have to ask someone in another team to recreate my test VM from a
template and then I run the rear process to create the ISO. I then
attach it to the VM reboot and go through the rear restore process which
fails. I couldn't restart the VM from the ISO image after the restore
failure. I spoke to our VM team this morning and they suggest changing
the boot options the be CD-ROM followed by hard disk.</p>
<p>Lesson learnt, don't change the boot options after creating the ISO
image. When everything is working normally that would never happen.</p>
<p>I'll change the boot options back and try again later.</p>
<h4 id="adrian987654321_commented_at_2016-11-11_1709"><img src="https://avatars.githubusercontent.com/u/23192859?v=4" width="50"><a href="https://github.com/Adrian987654321">Adrian987654321</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-260005417">2016-11-11 17:09</a>:<a class="headerlink" href="#adrian987654321_commented_at_2016-11-11_1709" title="Permanent link">&para;</a></h4>
<p>I've rebooted and set the boot order back to what it was.<br />
<img alt="10-lsscsi_on_boot" src="https://cloud.githubusercontent.com/assets/23192859/20223453/a863aa28-a831-11e6-8744-1a11c74e52be.PNG" /></p>
<h4 id="adrian987654321_commented_at_2016-11-11_1721"><img src="https://avatars.githubusercontent.com/u/23192859?v=4" width="50"><a href="https://github.com/Adrian987654321">Adrian987654321</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-260008042">2016-11-11 17:21</a>:<a class="headerlink" href="#adrian987654321_commented_at_2016-11-11_1721" title="Permanent link">&para;</a></h4>
<p>I've rerun the restore with the disks in the correct order. Looking
through the log the logical volumes are created correctly it seems to be
the last stage where the / filesystem is mount that is causing the
problem.</p>
<p>A WARNING of /dev/btrfs-control failed to open and at the end btrfs
subvolume set-default: too few arguements.</p>
<p>Not sure now what i should try.<br />
<img alt="12_bootlog" src="https://cloud.githubusercontent.com/assets/23192859/20223819/3a691092-a833-11e6-8c47-630f4ca95c47.PNG" /><br />
<img alt="11_bootlog" src="https://cloud.githubusercontent.com/assets/23192859/20223820/3a9d6bbc-a833-11e6-94d1-55d7d1b38489.PNG" /></p>
<h4 id="rpasche_commented_at_2016-11-11_1751"><img src="https://avatars.githubusercontent.com/u/12664472?u=7d93437b713d9a1a67b448b34f2c0a6576a0930e&v=4" width="50"><a href="https://github.com/rpasche">rpasche</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-260014582">2016-11-11 17:51</a>:<a class="headerlink" href="#rpasche_commented_at_2016-11-11_1751" title="Permanent link">&para;</a></h4>
<p>hmm...where the hell is the mail I sent as answer?</p>
<h4 id="rpasche_commented_at_2016-11-11_1752"><img src="https://avatars.githubusercontent.com/u/12664472?u=7d93437b713d9a1a67b448b34f2c0a6576a0930e&v=4" width="50"><a href="https://github.com/rpasche">rpasche</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-260014917">2016-11-11 17:52</a>:<a class="headerlink" href="#rpasche_commented_at_2016-11-11_1752" title="Permanent link">&para;</a></h4>
<p>No. Boot order "should" not be the problem.</p>
<p>My thinking was, that you "had" a setup with the first disk, 70 GB and
the second disk with 50. That state snapshotted. Then you switched the
disks (for whatever reason) and installed the system (first disk now 50
and second 70). Now you run rear mkbackup. But now, before you recover,
you revert back to the snapshot and boot from iso. This would result in
this problem.</p>
<p>But as you can imagine.. this is quite ugly testing</p>
<p>But the template thing might also be the problem. But as long as the VM
is setup and it does not change between backup and restore, this problem
should not occur.</p>
<h4 id="adrian987654321_commented_at_2016-11-14_0851"><img src="https://avatars.githubusercontent.com/u/23192859?v=4" width="50"><a href="https://github.com/Adrian987654321">Adrian987654321</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-260279911">2016-11-14 08:51</a>:<a class="headerlink" href="#adrian987654321_commented_at_2016-11-14_0851" title="Permanent link">&para;</a></h4>
<p>Thanks for the info. The two disks stay in the same order it was just
the boot order that was changed. As I've worked out how to get VMWare to
boot from the ISO multiple times the disks are back in the same order as
when the rear backup was taken.</p>
<h4 id="adrian987654321_commented_at_2016-11-16_1047"><img src="https://avatars.githubusercontent.com/u/23192859?v=4" width="50"><a href="https://github.com/Adrian987654321">Adrian987654321</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-260914387">2016-11-16 10:47</a>:<a class="headerlink" href="#adrian987654321_commented_at_2016-11-16_1047" title="Permanent link">&para;</a></h4>
<p>This is the full log of the lat restore run. It seems the issue is with
mounting the / filesystem but I'm not sure where to look. Any ideas?</p>
<h4 id="adrian987654321_commented_at_2016-11-16_1048"><img src="https://avatars.githubusercontent.com/u/23192859?v=4" width="50"><a href="https://github.com/Adrian987654321">Adrian987654321</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-260914539">2016-11-16 10:48</a>:<a class="headerlink" href="#adrian987654321_commented_at_2016-11-16_1048" title="Permanent link">&para;</a></h4>
<p><a href="https://github.com/rear/rear/files/594363/rear-ulvwasaw01.txt">rear-ulvwasaw01.txt</a></p>
<h4 id="adrian987654321_commented_at_2016-11-16_1058"><img src="https://avatars.githubusercontent.com/u/23192859?v=4" width="50"><a href="https://github.com/Adrian987654321">Adrian987654321</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-260916892">2016-11-16 10:58</a>:<a class="headerlink" href="#adrian987654321_commented_at_2016-11-16_1058" title="Permanent link">&para;</a></h4>
<p>This looks like it might be a candidate for the problem, near the bottom
of the log file.</p>
<p>The file /var/lib/rear/layout/fs_uuid_mapping doesn't exist.</p>
<p>+++ new_uuid=ca8d3ee8-ffa8-4f0c-89a7-e2c340c79f2a<br />
+++ '[' 464b2ed0-f4f1-4b21-b96d-88c378c6596f '!='
ca8d3ee8-ffa8-4f0c-89a7-e2c340c79f2a ']'<br />
+++ grep -q 464b2ed0-f4f1-4b21-b96d-88c378c6596f
/var/lib/rear/layout/fs_uuid_mapping<br />
grep: /var/lib/rear/layout/fs_uuid_mapping: No such file or directory</p>
<h4 id="adrian987654321_commented_at_2016-11-16_1111"><img src="https://avatars.githubusercontent.com/u/23192859?v=4" width="50"><a href="https://github.com/Adrian987654321">Adrian987654321</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-260919505">2016-11-16 11:11</a>:<a class="headerlink" href="#adrian987654321_commented_at_2016-11-16_1111" title="Permanent link">&para;</a></h4>
<p>One other thing that might be an issue is /tmp has noexec on the mount.
From /etc/fstab</p>
<p>/dev/mapper/system-lvtmp /tmp btrfs defaults,nodev,nosuid,noexec 1 2</p>
<p>Perhaps this is stopping the scripts from running correctly, don't know.</p>
<h4 id="jsmeix_commented_at_2016-11-16_1117"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-260920515">2016-11-16 11:17</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-11-16_1117" title="Permanent link">&para;</a></h4>
<p>@Adrian987654321<br />
your<br />
<a href="https://github.com/rear/rear/files/594363/rear-ulvwasaw01.txt">https://github.com/rear/rear/files/594363/rear-ulvwasaw01.txt</a><br />
ends with</p>
<pre>
+++ subvolumeID=
+++ btrfs subvolume set-default /mnt/local/
btrfs subvolume set-default: too few arguments
usage: btrfs subvolume set-default <subvolid> <path>
</pre>

<p>You do not have a btrfs default subvolume set<br />
where one is usually expected.</p>
<p>The matching code is in<br />
layout/prepare/GNU/Linux/130_include_mount_filesystem_code.sh<br />
which generates the code in the diskrestore.sh script<br />
and then the generated code in the diskrestore.sh script<br />
fails in your particular case.</p>
<p>I assume you did a manual btrfs setup and not<br />
a standard SUSE btrfs setup as it comes out of YaST?</p>
<p>Adapting<br />
/usr/share/rear/layout/prepare/GNU/Linux/130_include_mount_filesystem_code.sh<br />
as you need it in your particular case should help.</p>
<h4 id="adrian987654321_commented_at_2016-11-16_1157"><img src="https://avatars.githubusercontent.com/u/23192859?v=4" width="50"><a href="https://github.com/Adrian987654321">Adrian987654321</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-260928518">2016-11-16 11:57</a>:<a class="headerlink" href="#adrian987654321_commented_at_2016-11-16_1157" title="Permanent link">&para;</a></h4>
<p>Do you know how I can create a btrfs default subvolume?</p>
<h4 id="jsmeix_commented_at_2017-01-18_1306"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-273470463">2017-01-18 13:06</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-01-18_1306" title="Permanent link">&para;</a></h4>
<p>The error message in the above<br />
<a href="https://github.com/rear/rear/issues/1057#issuecomment-260920515">https://github.com/rear/rear/issues/1057#issuecomment-260920515</a><br />
is the same as in<br />
<a href="https://github.com/rear/rear/issues/1036#issuecomment-273049971">https://github.com/rear/rear/issues/1036#issuecomment-273049971</a><br />
so that this issue is basically a duplicate of<br />
<a href="https://github.com/rear/rear/issues/1036">https://github.com/rear/rear/issues/1036</a></p>
<h4 id="jsmeix_commented_at_2017-11-28_1245"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1057#issuecomment-347512645">2017-11-28 12:45</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-11-28_1245" title="Permanent link">&para;</a></h4>
<p>With
<a href="https://github.com/rear/rear/pull/1593">https://github.com/rear/rear/pull/1593</a>
merged<br />
"swaps disks /dev/sda &lt;==&gt; /dev/sdb"<br />
issues can an should be avoided.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2025 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2016-11-01.1057.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
