<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#421 Issue closed: Incremental backup options with rear - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#421 Issue closed: Incremental backup options with rear";
        var mkdocs_page_input_path = "issues/2014-06-04.421.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#421 Issue closed: Incremental backup options with rear</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="421_issue_closed_incremental_backup_options_with_rear"><a href="https://github.com/rear/rear/issues/421">#421 Issue</a> <code>closed</code>: Incremental backup options with rear<a class="headerlink" href="#421_issue_closed_incremental_backup_options_with_rear" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>support / question</code>, <code>fixed / solved / done</code></p>
<h4 id="bbeaver_opened_issue_at_2014-06-04_1737"><img src="https://avatars.githubusercontent.com/u/7350825?u=2ec61633eda874b17db7b1eb383363444e6064d6&v=4" width="50"><a href="https://github.com/bbeaver">bbeaver</a> opened issue at <a href="https://github.com/rear/rear/issues/421">2014-06-04 17:37</a>:<a class="headerlink" href="#bbeaver_opened_issue_at_2014-06-04_1737" title="Permanent link">&para;</a></h4>
<p>I'm testing with rear 1.16 and have not had any luck with incrementals.
I'm using the following config:</p>
<p>@cal-s with rear it is now possible to make incremental and full
backups:<br />
OUTPUT=ISO<br />
BACKUP=NETFS<br />
BACKUP_URL=nfs://lnx01/vol/lnx01/linux_images_dr/rear<br />
BACKUP_TYPE=incremental<br />
FULLBACKUPDAY="Mon"</p>
<p>I've run "rear mkbackuponly" three times in a row, modifying a few files
in between so I can check to see if only the incremental changes get
picked up. What appears to happen instead, is rear creates what appears
to be a full backup each time:</p>
<p>-rw-r--r--. 1 root root 2016177806 Jun 4 12:49
2014-06-04-1243-F.tar.gz<br />
-rw-r--r--. 1 root root 2014242030 Jun 4 12:59
2014-06-04-1253-I.tar.gz<br />
-rw-r--r--. 1 root root 2015048301 Jun 4 13:11 2014-06-04-1305-I.tar.gz</p>
<p>When I run the rear recover process, the first saved file is what gets
restored, (2014-06-04-1243-F.tar.gz). Should I be prompted during the
recovery process so that I can tell rear which bkup/incremental I want
applied? Thanks for your help - great program, I've just got to figure
incrementals out.</p>
<h4 id="gdha_commented_at_2014-06-05_0626"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/421#issuecomment-45184952">2014-06-05 06:26</a>:<a class="headerlink" href="#gdha_commented_at_2014-06-05_0626" title="Permanent link">&para;</a></h4>
<p>See also issue #399 - the incremental tar was an user donation and is
not yet fully working as it should</p>
<h4 id="bbeaver_commented_at_2014-06-05_1220"><img src="https://avatars.githubusercontent.com/u/7350825?u=2ec61633eda874b17db7b1eb383363444e6064d6&v=4" width="50"><a href="https://github.com/bbeaver">bbeaver</a> commented at <a href="https://github.com/rear/rear/issues/421#issuecomment-45212322">2014-06-05 12:20</a>:<a class="headerlink" href="#bbeaver_commented_at_2014-06-05_1220" title="Permanent link">&para;</a></h4>
<p>Ok - thank you for your quick response.</p>
<h4 id="gdha_commented_at_2014-06-20_1120"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/421#issuecomment-46668363">2014-06-20 11:20</a>:<a class="headerlink" href="#gdha_commented_at_2014-06-20_1120" title="Permanent link">&para;</a></h4>
<p>@bbeaver I think the problem has been fixed in the meantime by issue
#422<br />
Can you check and give me some feedback? You can download the latest rpm
(dated <code>20140619*</code> from OBS
(<a href="http://download.opensuse.org/repositories/Archiving:/Backup:/Rear:/Snapshot/">http://download.opensuse.org/repositories/Archiving:/Backup:/Rear:/Snapshot/</a>)</p>
<h4 id="bbeaver_commented_at_2014-06-20_1727"><img src="https://avatars.githubusercontent.com/u/7350825?u=2ec61633eda874b17db7b1eb383363444e6064d6&v=4" width="50"><a href="https://github.com/bbeaver">bbeaver</a> commented at <a href="https://github.com/rear/rear/issues/421#issuecomment-46704445">2014-06-20 17:27</a>:<a class="headerlink" href="#bbeaver_commented_at_2014-06-20_1727" title="Permanent link">&para;</a></h4>
<p>I've downloaded the latest rpm as suggested above and run the same tests
again. I've run "rear mkbackuponly" three times in a row, modifying data
between each run such that an incremental should have work to do. The
outcome - I get a full gzip'd tarfile on my NFS server every time I run
"rear mkbackuponly", (2014-06-20-1314-F.tar.gz). With this newer
version, the files are named with the "F" each time, suggesting full.
So, still not getting incremental bkups. How would rear know how to
generate an incremental bkup based on a previous full gzip'd tarfile?
Seems it would have to keep track of checksums somewhere, or use logic
similar to what rsync uses. Here are the relevant local.conf variables I
am using:</p>
<p>OUTPUT=ISO<br />
BACKUP=NETFS<br />
BACKUP_URL="nfs://10.10.10.10/NFS/"<br />
BACKUP_TYPE=incremental<br />
NETFS_KEEP_OLD_BACKUP_COPY=yes</p>
<p>Thanks</p>
<h4 id="gdha_commented_at_2014-06-25_1200"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/421#issuecomment-47091773">2014-06-25 12:00</a>:<a class="headerlink" href="#gdha_commented_at_2014-06-25_1200" title="Permanent link">&para;</a></h4>
<p>@bbeaver Try adding <code>FULLBACKUPDAY="Mon"</code> to the local.conf file (it
will help)</p>
<h4 id="bbeaver_commented_at_2014-07-28_1758"><img src="https://avatars.githubusercontent.com/u/7350825?u=2ec61633eda874b17db7b1eb383363444e6064d6&v=4" width="50"><a href="https://github.com/bbeaver">bbeaver</a> commented at <a href="https://github.com/rear/rear/issues/421#issuecomment-50374135">2014-07-28 17:58</a>:<a class="headerlink" href="#bbeaver_commented_at_2014-07-28_1758" title="Permanent link">&para;</a></h4>
<p>Sorry for the delay, just getting back to this. I've run a backup on a
client with hostname localhost using the following options:<br />
OUTPUT=ISO<br />
BACKUP=NETFS<br />
BACKUP_URL="nfs://10.10.10.10/NFS/"<br />
BACKUP_TYPE=incremental<br />
NETFS_KEEP_OLD_BACKUP_COPY=yes<br />
FULLBACKUPDAY="Mon"</p>
<p>This created the following files successfully on my NFS server:<br />
-rw-------. 1 root root 61659136 Jul 28 13:52 rear-localhost.iso<br />
-rw-------. 1 root root 304 Jul 28 13:52 VERSION<br />
-rw-------. 1 root root 202 Jul 28 13:52 README<br />
-rw-------. 1 root root 169158 Jul 28 13:52 rear.log<br />
-rw-------. 1 root root 2239630504 Jul 28 14:02
2014-07-28-1347-F.tar.gz<br />
-rw-------. 1 root root 13383371 Jul 28 14:03 backup.log</p>
<p>I will attempt another backup tomorrow, (Tuesday), and see if it
generates an incremental.</p>
<p>Thanks</p>
<h4 id="bbeaver_commented_at_2014-07-29_1300"><img src="https://avatars.githubusercontent.com/u/7350825?u=2ec61633eda874b17db7b1eb383363444e6064d6&v=4" width="50"><a href="https://github.com/bbeaver">bbeaver</a> commented at <a href="https://github.com/rear/rear/issues/421#issuecomment-50472507">2014-07-29 13:00</a>:<a class="headerlink" href="#bbeaver_commented_at_2014-07-29_1300" title="Permanent link">&para;</a></h4>
<p>Just ran another "rear -v mkbackup", and it did not produce an
incremental backup.</p>
<p>NFS Server contents:<br />
ls -lR<br />
total 8<br />
drwxr-x---. 2 root root 4096 Jul 29 09:00 localhost<br />
drwxr-x---. 2 root root 4096 Jul 29 08:49 localhost.old</p>
<p>./localhost:<br />
total 2312852<br />
-rw-------. 1 root root 2292877209 Jul 29 09:00
2014-07-29-0843-F.tar.gz<br />
-rw-------. 1 root root 13620162 Jul 29 09:00 backup.log<br />
-rw-------. 1 root root 202 Jul 29 08:49 README<br />
-rw-------. 1 root root 61667328 Jul 29 08:49 rear-localhost.iso<br />
-rw-------. 1 root root 168947 Jul 29 08:49 rear.log<br />
-rw-------. 1 root root 304 Jul 29 08:49 VERSION</p>
<p>./localhost.old:<br />
total 2260616<br />
-rw-------. 1 root root 2239630504 Jul 28 14:02
2014-07-28-1347-F.tar.gz<br />
-rw-------. 1 root root 13383371 Jul 28 14:03 backup.log<br />
-rw-r--r--. 1 root root 25 Jul 29 08:49 basebackup.txt<br />
-rw-------. 1 root root 202 Jul 28 13:52 README<br />
-rw-------. 1 root root 61659136 Jul 28 13:52 rear-localhost.iso<br />
-rw-------. 1 root root 169158 Jul 28 13:52 rear.log<br />
-rw-r--r--. 1 root root 11 Jul 29 08:49 timestamp.txt<br />
-rw-------. 1 root root 304 Jul 28 13:52 VERSION</p>
<p>cat localhost.old/basebackup.txt<br />
2014-07-29-0844-F.tar.gz</p>
<p>cat localhost.old/timestamp.txt<br />
2014-07-29</p>
<p>I'll run another backup tomorrow, (Wednesday), and see if I get an
incremental file produced.</p>
<p>Thanks</p>
<h4 id="gdha_commented_at_2014-07-29_1407"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/421#issuecomment-50479987">2014-07-29 14:07</a>:<a class="headerlink" href="#gdha_commented_at_2014-07-29_1407" title="Permanent link">&para;</a></h4>
<p>Try with commenting <code>NETFS_KEEP_OLD_BACKUP_COPY=yes</code> in local.conf file.
That is the reason.</p>
<h4 id="bbeaver_commented_at_2014-07-30_1639"><img src="https://avatars.githubusercontent.com/u/7350825?u=2ec61633eda874b17db7b1eb383363444e6064d6&v=4" width="50"><a href="https://github.com/bbeaver">bbeaver</a> commented at <a href="https://github.com/rear/rear/issues/421#issuecomment-50643182">2014-07-30 16:39</a>:<a class="headerlink" href="#bbeaver_commented_at_2014-07-30_1639" title="Permanent link">&para;</a></h4>
<p>Thanks - yes, this took care of it, and the backup is generating
incremental files now. Next step is to confirm restores work properly
begining with full through applying incrementals. REAR is a fantastic
utility.</p>
<h4 id="gdha_commented_at_2015-02-16_1804"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/421#issuecomment-74549280">2015-02-16 18:04</a>:<a class="headerlink" href="#gdha_commented_at_2015-02-16_1804" title="Permanent link">&para;</a></h4>
<p>added to the release notes so we can close this issue</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2024 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2014-06-04.421.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
