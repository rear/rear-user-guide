<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#663 Issue closed: How to create ISO image on s390x? - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#663 Issue closed: How to create ISO image on s390x?";
        var mkdocs_page_input_path = "issues/2015-09-30.663.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
      <li class="breadcrumb-item active">#663 Issue closed: How to create ISO image on s390x?</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="663_issue_closed_how_to_create_iso_image_on_s390x"><a href="https://github.com/rear/rear/issues/663">#663 Issue</a> <code>closed</code>: How to create ISO image on s390x?<a class="headerlink" href="#663_issue_closed_how_to_create_iso_image_on_s390x" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>waiting for info</code>, <code>support / question</code></p>
<h4 id="phracek_opened_issue_at_2015-09-30_0650"><img src="https://avatars.githubusercontent.com/u/3416672?u=8867c1fd5f4ffa568d781775ab6110624b2dccd4&v=4" width="50"><a href="https://github.com/phracek">phracek</a> opened issue at <a href="https://github.com/rear/rear/issues/663">2015-09-30 06:50</a>:<a class="headerlink" href="#phracek_opened_issue_at_2015-09-30_0650" title="Permanent link">&para;</a></h4>
<p>Rear works currently only in x86_64 architectures. The ISO file is not
created in s390x. ISO file is created in ppc64 and ppc64le, but it is
not bootable.</p>
<p>rear-1.17.2-1.el7.noarch</p>
<p>There is output of rear for s390x.</p>
<pre><code># rpm -q rear
rear-1.17.2-1.el7.noarch
# arch
s390x
#
# rear -v mkbackup
Relax-and-Recover 1.17.2 / Git
Using log file: /var/log/rear/rear-ibm-z10-73.log
Creating disk layout
Creating root filesystem layout
Copying files and directories
Copying binaries and libraries
Copying kernel modules
Creating initramfs
# echo $?
0
#
# cat /var/log/rear/rear-ibm-z10-73.log
...
2015-09-29 04:28:42 Including output/default/10_mount_output_path.sh
mkdir: created directory '/tmp/rear.2ps7DRj69iDcJz6/outputfs'
2015-09-29 04:28:42 Including output/default/15_save_copy_of_prefix_dir.sh
2015-09-29 04:28:42 Including output/default/20_make_boot_dir.sh
mkdir: created directory '/tmp/rear.2ps7DRj69iDcJz6/tmp/boot'
2015-09-29 04:28:42 Including output/default/20_make_prefix_dir.sh
mkdir: created directory '/tmp/rear.2ps7DRj69iDcJz6/outputfs/ibm-z10-73'

-----&gt;&gt; HERE IS START OF WRONG OUTPUT &lt;&lt;-----
         compared with right output

2015-09-29 04:28:42 Including output/default/25_create_lock.sh
2015-09-29 04:28:42 Including output/default/94_grub2_rescue.sh
2015-09-29 04:28:42 Including output/default/94_grub_rescue.sh
2015-09-29 04:28:42 Including output/default/95_copy_result_files.sh
2015-09-29 04:28:42 Including output/default/95_email_result_files.sh
2015-09-29 04:28:42 Including output/default/97_remove_lock.sh
2015-09-29 04:28:42 Including output/default/98_umount_output_dir.sh
2015-09-29 04:28:42 Finished running 'output' stage in 0 seconds
2015-09-29 04:28:42 Running 'backup' stage
2015-09-29 04:28:42 Including backup/default/00_valid_backup_methods.sh
2015-09-29 04:28:42 Finished running 'backup' stage in 0 seconds
2015-09-29 04:28:42 Finished running mkbackup workflow
2015-09-29 04:28:42 Running exit tasks.
rmdir: removing directory, '/tmp/rear.2ps7DRj69iDcJz6/outputfs'
rmdir: failed to remove '/tmp/rear.2ps7DRj69iDcJz6/outputfs': Directory not empty
2015-09-29 04:28:42 Finished in 13 seconds
2015-09-29 04:28:42 Removing build area /tmp/rear.2ps7DRj69iDcJz6
rmdir: removing directory, '/tmp/rear.2ps7DRj69iDcJz6'
2015-09-29 04:28:42 End of program reached
#
#
</code></pre>
<p>There is output of rear for ppc64 and ppc64le.</p>
<pre><code># rear -v mkbackup
Relax-and-Recover 1.17.2 / Git
Using log file: /var/log/rear/rear-ibm-p8-kvm-03-guest-04.log
Creating disk layout
Creating root filesystem layout
Copying files and directories
Copying binaries and libraries
Copying kernel modules
Creating initramfs
Making ISO image
Wrote ISO Image /var/lib/rear/output/rear-ibm-p8-kvm-03-guest-04.iso (64M)
#
# file /var/lib/rear/output/rear-ibm-p8-kvm-03-guest-04.iso 
/var/lib/rear/output/rear-ibm-p8-kvm-03-guest-04.iso: # ISO 9660 CD-ROM filesystem data 'RELAXRECOVER                    '
#
# isoinfo -d -i /var/lib/rear/output/rear-ibm-p8-kvm-03-guest-04.iso 
CD-ROM is in ISO 9660 format
System id: LINUX
Volume id: RELAXRECOVER
Volume set id: 
Publisher id: 
Data preparer id: 
Application id: GENISOIMAGE ISO 9660/HFS FILESYSTEM CREATOR (C) 1993 E.YOUNGDALE (C) 1997-2006 J.PEARSON/J.SCHILLING (C) 2006-2007 CDRKIT TEAM
Copyright File id: 
Abstract File id: 
Bibliographic File id: 
Volume set size is: 1
Volume set sequence number is: 1
Logical block size is: 2048
Volume size is: 32729
Joliet with UCS level 3 found
Rock Ridge signatures version 1 found
#
#
</code></pre>
<h4 id="gdha_commented_at_2015-09-30_0704"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/663#issuecomment-144309600">2015-09-30 07:04</a>:<a class="headerlink" href="#gdha_commented_at_2015-09-30_0704" title="Permanent link">&para;</a></h4>
<p>@mmitsugi @k0da Could you do me a favor and have a look if ISO booting
on ppc and ppc64le still works? According RedHat it is broken and I have
no HW to test with.<br />
Architecture s390x is still unsupported.</p>
<h4 id="schlomo_commented_at_2015-09-30_0923"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/663#issuecomment-144336523">2015-09-30 09:23</a>:<a class="headerlink" href="#schlomo_commented_at_2015-09-30_0923" title="Permanent link">&para;</a></h4>
<p>Architecture s390x sounds really cool. Please provide pull requests with
code for that. For obvious reasons we don't have one of those standing
under our desk :-)</p>
<h4 id="mmitsugi_commented_at_2015-10-06_0530"><img src="https://avatars.githubusercontent.com/u/13441201?v=4" width="50"><a href="https://github.com/mmitsugi">mmitsugi</a> commented at <a href="https://github.com/rear/rear/issues/663#issuecomment-145745194">2015-10-06 05:30</a>:<a class="headerlink" href="#mmitsugi_commented_at_2015-10-06_0530" title="Permanent link">&para;</a></h4>
<p>@gdha sorry for my late reply.<br />
Regarding the RHEL distro on Power, there are several versions with 2
architectures(ppc64 and ppc64le).</p>
<p>a RHEL6 / ppc64 (yaboot) : it should work. need to check<br />
b RHEL7 / ppc64 (grub) : not tested yet. still work in progress<br />
c RHEL7 / ppc64le (grub) : tested / worked when I did pull request. need
to check</p>
<p>@jayfurmanek could you please check that RHEL6 / ppc64 (you created)
still work on current version?</p>
<p>As for RHEL7 / ppc64le, it seems that there is no ppc64le rpm for
current version...<br />
so we need to patch of rear.spec for ppc64le rpm at first.<br />
I think ppc64le will be used for OpenSUSE and SLES12, we need to get
review from @k0da</p>
<h4 id="mmitsugi_commented_at_2015-10-06_0934"><img src="https://avatars.githubusercontent.com/u/13441201?v=4" width="50"><a href="https://github.com/mmitsugi">mmitsugi</a> commented at <a href="https://github.com/rear/rear/issues/663#issuecomment-145797975">2015-10-06 09:34</a>:<a class="headerlink" href="#mmitsugi_commented_at_2015-10-06_0934" title="Permanent link">&para;</a></h4>
<p>Regarding the RHEL7 / ppc64le, it works fine just by adding ppc64le arch
to rpm spec file.<br />
I've created the patch #665.<br />
Tested platform : PowerVM: RHEL7.1 LE</p>
<h4 id="mmitsugi_commented_at_2015-10-06_0940"><img src="https://avatars.githubusercontent.com/u/13441201?v=4" width="50"><a href="https://github.com/mmitsugi">mmitsugi</a> commented at <a href="https://github.com/rear/rear/issues/663#issuecomment-145799222">2015-10-06 09:40</a>:<a class="headerlink" href="#mmitsugi_commented_at_2015-10-06_0940" title="Permanent link">&para;</a></h4>
<p>@gdha After this patch is merged, it would be helpful if your team
upload ppc64le rpm into official site.<br />
Please let me know if additional verification or support is needed.</p>
<h4 id="gdha_commented_at_2015-10-06_1450"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/663#issuecomment-145880875">2015-10-06 14:50</a>:<a class="headerlink" href="#gdha_commented_at_2015-10-06_1450" title="Permanent link">&para;</a></h4>
<p>@mmitsugi On OpenSuse Build Service I've added <em>ppc64le</em><br />
Let us wait if it build correctly</p>
<h4 id="jsmeix_commented_at_2015-10-06_1525"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/663#issuecomment-145899713">2015-10-06 15:25</a>:<a class="headerlink" href="#jsmeix_commented_at_2015-10-06_1525" title="Permanent link">&para;</a></h4>
<p>FYI:<br />
currently OBS shows "RHEL_7 ppc64le excluded" because rear.spec is not
yet up to date in OBS (i.e. currently rear.spec still has
"ExclusiveArch: %ix86 x86_64 ppc ppc64").</p>
<h4 id="jayfurmanek_commented_at_2015-10-06_1718"><img src="https://avatars.githubusercontent.com/u/8660918?v=4" width="50"><a href="https://github.com/jayfurmanek">jayfurmanek</a> commented at <a href="https://github.com/rear/rear/issues/663#issuecomment-145932276">2015-10-06 17:18</a>:<a class="headerlink" href="#jayfurmanek_commented_at_2015-10-06_1718" title="Permanent link">&para;</a></h4>
<p>I just did a fresh checkout on RHEL6.6 ppc64</p>
<p>$ usr/sbin/rear -V<br />
Relax-and-Recover 1.17.2 / Git<br />
$ uname -a<br />
Linux free146219.austin.ibm.com 2.6.32-504.el6.ppc64 #1 SMP Tue Sep 16
01:52:45 EDT 2014 ppc64 ppc64 ppc64 GNU/Linux</p>
<p>$ cat /etc/redhat-release<br />
Red Hat Enterprise Linux Server release 6.6 (Santiago)</p>
<p>And it created a bootable ISO just fine. The backup and restore to NFS
works fine as well.</p>
<p>@phracek<br />
What issues are you seeing? The output of isoinfo on mine looks the same
as yours, but the ISO is indeed bootable.</p>
<h4 id="jayfurmanek_commented_at_2015-10-06_1836"><img src="https://avatars.githubusercontent.com/u/8660918?v=4" width="50"><a href="https://github.com/jayfurmanek">jayfurmanek</a> commented at <a href="https://github.com/rear/rear/issues/663#issuecomment-145958407">2015-10-06 18:36</a>:<a class="headerlink" href="#jayfurmanek_commented_at_2015-10-06_1836" title="Permanent link">&para;</a></h4>
<p>@phracek</p>
<p>I notice you running RHEL as a VM under KVM. The console may be a bit
different there than under PowerVM. I'll have to give that a shot.</p>
<p>There is one known console bug with RHEL6 when running under KVM on
Power (while using a virtual video card and VNC as the transport). The
console text displays very dark by default. Workarounds are discussed on
this page (Search for 'guest considerations')</p>
<p><a href="https://www.ibm.com/developerworks/community/wikis/home?lang=en#!/wiki/W51a7ffcf4dfd_4b40_9d82_446ebc23c550/page/IBM%20PowerKVM%202.1.1%20Known%20Issues%20and%20Readme">https://www.ibm.com/developerworks/community/wikis/home?lang=en#!/wiki/W51a7ffcf4dfd_4b40_9d82_446ebc23c550/page/IBM%20PowerKVM%202.1.1%20Known%20Issues%20and%20Readme</a></p>
<h4 id="phracek_commented_at_2015-10-13_0657"><img src="https://avatars.githubusercontent.com/u/3416672?u=8867c1fd5f4ffa568d781775ab6110624b2dccd4&v=4" width="50"><a href="https://github.com/phracek">phracek</a> commented at <a href="https://github.com/rear/rear/issues/663#issuecomment-147624452">2015-10-13 06:57</a>:<a class="headerlink" href="#phracek_commented_at_2015-10-13_0657" title="Permanent link">&para;</a></h4>
<p>I have a question, why rear use Arches (like Exclusive Arch).</p>
<p>I didn't see in code any language or arch specific issues.<br />
In RHEL 7 we are building rear like noarch. Maybe this is a trouble.</p>
<h4 id="phracek_commented_at_2015-10-13_0719"><img src="https://avatars.githubusercontent.com/u/3416672?u=8867c1fd5f4ffa568d781775ab6110624b2dccd4&v=4" width="50"><a href="https://github.com/phracek">phracek</a> commented at <a href="https://github.com/rear/rear/issues/663#issuecomment-147627285">2015-10-13 07:19</a>:<a class="headerlink" href="#phracek_commented_at_2015-10-13_0719" title="Permanent link">&para;</a></h4>
<p>After calling rear -v mkbackup on PPC64LE I see.</p>
<pre><code>2015-10-13 03:05:20 Including output/ISO/Linux-ppc64le/80_create_isofs.sh
2015-10-13 03:05:20 Copying kernel
'/boot/vmlinuz-3.10.0-229.ael7b.ppc64le' -&gt; '/tmp/rear.G5bzKw9sxJ94opD/tmp/kernel'
2015-10-13 03:05:20 Starting '/bin/mkisofs'
2015-10-13 03:05:20 Making ISO image
Warning: creating filesystem that does not conform to ISO-9660.
genisoimage 1.1.11 (Linux)
Scanning boot
Scanning boot/grub
Scanning ppc
  28   708 
  29   318 boot
  30   454 grub
  31   334 ppc
Cache hit for '/..'
      37    26431 initrd.cgz
   26432    35201 /tmp/rear.G5bzKw9sxJ94opD/tmp/kernel
Cache hit for 'grub/.'
   35202    35202 boot/grub/grub.cfg
   35203    35373 boot/grub/powerpc.elf
   35374    35374 ppc/bootinfo.txt
Creating 1 PReP boot partition(s)
CHRP boot partition 1
Writing:   HFS volume header                       Start Block 0
Done with: HFS volume header                       Block(s)    4
Writing:   Initial Padblock                        Start Block 4
Done with: Initial Padblock                        Block(s)    12
Writing:   Primary Volume Descriptor               Start Block 16
Done with: Primary Volume Descriptor               Block(s)    1
Writing:   Joliet Volume Descriptor                Start Block 17
Done with: Joliet Volume Descriptor                Block(s)    1
Writing:   End Volume Descriptor                   Start Block 18
Done with: End Volume Descriptor                   Block(s)    1
Writing:   Version block                           Start Block 19
Done with: Version block                           Block(s)    1
Writing:   Path table                              Start Block 20
Done with: Path table                              Block(s)    4
Writing:   Joliet path table                       Start Block 24
Done with: Joliet path table                       Block(s)    4
Writing:   Directory tree                          Start Block 28
Done with: Directory tree                          Block(s)    4
Writing:   Joliet directory tree                   Start Block 32
Done with: Joliet directory tree                   Block(s)    4
Writing:   Directory tree cleanup                  Start Block 36
Done with: Directory tree cleanup                  Block(s)    0
Writing:   Extension record                        Start Block 36
Done with: Extension record                        Block(s)    1
Writing:   The File(s)                             Start Block 37
Total extents scheduled to be written = 35525
 14.11% done, estimate finish Tue Oct 13 03:05:20 2015
 28.16% done, estimate finish Tue Oct 13 03:05:20 2015
 42.26% done, estimate finish Tue Oct 13 03:05:20 2015
 56.31% done, estimate finish Tue Oct 13 03:05:20 2015
 70.41% done, estimate finish Tue Oct 13 03:05:20 2015
 84.45% done, estimate finish Tue Oct 13 03:05:20 2015
 98.54% done, estimate finish Tue Oct 13 03:05:20 2015
Total translation table size: 0
Total rockridge attributes bytes: 1205
Total directory bytes: 6144
Path table size(bytes): 46
Done with: The File(s)                             Block(s)    35338
Writing:   Ending Padblock                         Start Block 35375
Done with: Ending Padblock                         Block(s)    150
Max brk space used 0
35525 extents written (69 MB)
2015-10-13 03:05:20 Including output/default/94_grub2_rescue.sh
2015-10-13 03:05:20 Including output/default/94_grub_rescue.sh
2015-10-13 03:05:20 Including output/default/95_copy_result_files.sh
2015-10-13 03:05:20 Copying resulting files to file location
2015-10-13 03:05:20 Copying files '/var/lib/rear/output/rear-ibm-p8-generic-01-le02.iso' to file location
'/var/lib/rear/output/rear-ibm-p8-generic-01-le02.iso' -&gt; '/home/phracek//ibm-p8-generic-01-le02/rear-ibm-p8-generic-01-le02.iso'
'/usr/share/rear/conf/templates/RESULT_usage_ISO.txt' -&gt; '/home/phracek//ibm-p8-generic-01-le02/README'
2015-10-13 03:05:20 Saved /var/log/rear/rear-ibm-p8-generic-01-le02.log as rear.log
</code></pre>
<p>ISO File:</p>
<pre><code># file rear-ibm-p8-generic-01-le02.iso 
rear-ibm-p8-generic-01-le02.iso: # ISO 9660 CD-ROM filesystem data 'RELAXRECOVER'
#
</code></pre>
<p>After mounting to /mnt it contains:</p>
<pre><code># ls -la
total 70339
dr-xr-xr-x.  4 root root     2048 Oct 13 03:05 .
dr-xr-xr-x. 18 root root     4096 Oct 13 03:04 ..
drwx------.  3 root root     2048 Oct 13 03:05 boot
-rw-r--r--.  1 root root 54055707 Oct 13 03:05 initrd.cgz
-rwxr-xr-x.  1 root root 17960344 Jan 30  2015 kernel
drwx------.  2 root root     2048 Oct 13 03:05 ppc
#
</code></pre>
<p>I have tried to mount it via libvirt and result is:</p>
<pre><code>Booting from DVD/CD
Booting failed: Could not read from CDROM (code 0004)
Booting from Hard Disk ...
Boot failed: not a bootable disk
</code></pre>
<h4 id="phracek_commented_at_2015-10-13_0721"><img src="https://avatars.githubusercontent.com/u/3416672?u=8867c1fd5f4ffa568d781775ab6110624b2dccd4&v=4" width="50"><a href="https://github.com/phracek">phracek</a> commented at <a href="https://github.com/rear/rear/issues/663#issuecomment-147627612">2015-10-13 07:21</a>:<a class="headerlink" href="#phracek_commented_at_2015-10-13_0721" title="Permanent link">&para;</a></h4>
<p>rear configuration which was used on PPC64LE:</p>
<pre><code># Default is to create Relax-and-Recover rescue media as ISO image
# set OUTPUT to change that
# set BACKUP to activate an automated (backup and) restore of your data
# Possible configuration values can be found in /usr/share/rear/conf/default.conf
#
# This file (local.conf) is intended for manual configuration. For configuration
# through packages and other automated means we recommend creating a new
# file named site.conf next to this file and to leave the local.conf as it is. 
# Our packages will never ship with a site.conf.

OUTPUT=ISO
BACKUP_URL="file:///root/"
</code></pre>
<h4 id="jsmeix_commented_at_2015-10-13_0733"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/663#issuecomment-147630027">2015-10-13 07:33</a>:<a class="headerlink" href="#jsmeix_commented_at_2015-10-13_0733" title="Permanent link">&para;</a></h4>
<p>@phracek<br />
regarding your question why rear use Arches (like Exclusive Arch) see
the comments in the rear upstream spec file packaging/rpm/rear.spec and
<a href="https://github.com/rear/rear/issues/629">https://github.com/rear/rear/issues/629</a></p>
<h4 id="jayfurmanek_commented_at_2015-10-13_1857"><img src="https://avatars.githubusercontent.com/u/8660918?v=4" width="50"><a href="https://github.com/jayfurmanek">jayfurmanek</a> commented at <a href="https://github.com/rear/rear/issues/663#issuecomment-147813784">2015-10-13 18:57</a>:<a class="headerlink" href="#jayfurmanek_commented_at_2015-10-13_1857" title="Permanent link">&para;</a></h4>
<p>@phracek<br />
It looks like you are testing RHEL7 (grub) ppc64le.<br />
I've reconfirmed that REAR does generate a bootable ISO for RHEL6
(yaboot). It also boots fine as a KVM guest - although there may be a
console fix that's needed for KVM.</p>
<p>@mmitsugi<br />
Have you tested the latest REAR version on RHEL7 (grub) ppc64le on KVM?</p>
<h4 id="mmitsugi_commented_at_2015-10-14_0812"><img src="https://avatars.githubusercontent.com/u/13441201?v=4" width="50"><a href="https://github.com/mmitsugi">mmitsugi</a> commented at <a href="https://github.com/rear/rear/issues/663#issuecomment-147969294">2015-10-14 08:12</a>:<a class="headerlink" href="#mmitsugi_commented_at_2015-10-14_0812" title="Permanent link">&para;</a></h4>
<p>@phracek<br />
I checked latest RHEL7 ppc64le (RHEL7.1 LE :
RHEL-LE-7.1-20150219.1-Server-ppc64le) on KVM, and it works fine in my
environment.<br />
Here is my create_isofs part</p>
<pre><code>2015-10-14 14:09:52 Including output/ISO/Linux-ppc64le/80_create_isofs.sh
2015-10-14 14:09:52 Copying kernel
'/boot/vmlinuz-3.10.0-229.ael7b.ppc64le' -&gt; '/tmp/rear.GcF6eCmHQe7JQgz/tmp/kernel'
2015-10-14 14:09:52 Starting '/bin/mkisofs'
2015-10-14 14:09:52 Making ISO image
Warning: creating filesystem that does not conform to ISO-9660.
genisoimage 1.1.11 (Linux)
Scanning boot
Scanning boot/grub
Scanning ppc
  28   708 
  29   318 boot
  30   454 grub
  31   334 ppc
Cache hit for '/..'
      37    23883 initrd.cgz
   23884    32653 /tmp/rear.GcF6eCmHQe7JQgz/tmp/kernel
Cache hit for 'grub/.'
   32654    32654 boot/grub/grub.cfg
   32655    32825 boot/grub/powerpc.elf
   32826    32826 ppc/bootinfo.txt
Creating 1 PReP boot partition(s)
CHRP boot partition 1
Writing:   HFS volume header                       Start Block 0
Done with: HFS volume header                       Block(s)    4
Writing:   Initial Padblock                        Start Block 4
Done with: Initial Padblock                        Block(s)    12
Writing:   Primary Volume Descriptor               Start Block 16
Done with: Primary Volume Descriptor               Block(s)    1
Writing:   Joliet Volume Descriptor                Start Block 17
Done with: Joliet Volume Descriptor                Block(s)    1
Writing:   End Volume Descriptor                   Start Block 18
Done with: End Volume Descriptor                   Block(s)    1
Writing:   Version block                           Start Block 19
Done with: Version block                           Block(s)    1
Writing:   Path table                              Start Block 20
Done with: Path table                              Block(s)    4
Writing:   Joliet path table                       Start Block 24
Done with: Joliet path table                       Block(s)    4
Writing:   Directory tree                          Start Block 28
Done with: Directory tree                          Block(s)    4
Writing:   Joliet directory tree                   Start Block 32
Done with: Joliet directory tree                   Block(s)    4
Writing:   Directory tree cleanup                  Start Block 36
Done with: Directory tree cleanup                  Block(s)    0
Writing:   Extension record                        Start Block 36
Done with: Extension record                        Block(s)    1
Writing:   The File(s)                             Start Block 37
Total extents scheduled to be written = 32977
 15.20% done, estimate finish Wed Oct 14 14:09:52 2015
 30.34% done, estimate finish Wed Oct 14 14:09:52 2015
 45.53% done, estimate finish Wed Oct 14 14:09:52 2015
 60.66% done, estimate finish Wed Oct 14 14:09:52 2015
 75.82% done, estimate finish Wed Oct 14 14:09:52 2015
 91.01% done, estimate finish Wed Oct 14 14:09:52 2015
Total translation table size: 0
Total rockridge attributes bytes: 1205
Total directory bytes: 6144
Path table size(bytes): 46
Done with: The File(s)                             Block(s)    32790
Writing:   Ending Padblock                         Start Block 32827
Done with: Ending Padblock                         Block(s)    150
Max brk space used 0
32977 extents written (64 MB)
</code></pre>
<p>file size seems to be slightly different, but almost same as yours.<br />
rear configuration is same as well.</p>
<p>libvirt xml description is like following:</p>
<pre><code>    &lt;disk type='file' device='cdrom'&gt;
      &lt;driver name='qemu' type='raw'/&gt;
      &lt;source file='/var/lib/libvirt/images/rear-mmRHEL71LEk.iso'/&gt;
      &lt;target dev='sdc' bus='scsi'/&gt;
      &lt;readonly/&gt;
      &lt;address type='drive' controller='0' bus='0' target='0' unit='2'/&gt;
    &lt;/disk&gt;
</code></pre>
<p>I have several questions:</p>
<ul>
<li>Could you provide the contents of ppc/bootinfo.txt in your iso?<br />
    The bootinfo.txt in my iso is following.</li>
</ul>
<!-- -->

<pre><code>&lt;chrp-boot&gt;
&lt;description&gt;Relax-and-Recover&lt;/description&gt;
&lt;os-name&gt;Linux&lt;/os-name&gt;
&lt;boot-script&gt;boot &amp;device;:\boot\grub\powerpc.elf&lt;/boot-script&gt;
&lt;/chrp-boot&gt;
</code></pre>
<ul>
<li>size of boot/grub/powerpc.elf in your env seems to be different from
    that in my env.<br />
    So could you let me know exact RHEL7.1 version you are using?</li>
</ul>
<h4 id="phracek_commented_at_2015-10-14_1222"><img src="https://avatars.githubusercontent.com/u/3416672?u=8867c1fd5f4ffa568d781775ab6110624b2dccd4&v=4" width="50"><a href="https://github.com/phracek">phracek</a> commented at <a href="https://github.com/rear/rear/issues/663#issuecomment-148031845">2015-10-14 12:22</a>:<a class="headerlink" href="#phracek_commented_at_2015-10-14_1222" title="Permanent link">&para;</a></h4>
<p>My ppc/bootinfo.txt is the same:</p>
<pre><code>&lt;chrp-boot&gt;
&lt;description&gt;Relax-and-Recover&lt;/description&gt;
&lt;os-name&gt;Linux&lt;/os-name&gt;
&lt;boot-script&gt;boot &amp;device;:\boot\grub\powerpc.elf&lt;/boot-script&gt;
&lt;/chrp-boot&gt;
</code></pre>
<p>Tested platform: 8 CPUs (virt Power8), 12 GB RAM, KVM guest<br />
System is RHEL-7.2, though</p>
<pre><code># cat /etc/redhat-release 
Red Hat Enterprise Linux Server release 7.2 Beta (Maipo)
#

# uname -a
Linux ibm-p8-generic-01-le02.lab.eng.brq.redhat.com 3.10.0-229.ael7b.ppc64le #1 SMP Fri Jan 30 12:03:50 EST 2015 ppc64le ppc64le ppc64le GNU/Linux
#
</code></pre>
<h4 id="mmitsugi_commented_at_2015-10-14_1526"><img src="https://avatars.githubusercontent.com/u/13441201?v=4" width="50"><a href="https://github.com/mmitsugi">mmitsugi</a> commented at <a href="https://github.com/rear/rear/issues/663#issuecomment-148084324">2015-10-14 15:26</a>:<a class="headerlink" href="#mmitsugi_commented_at_2015-10-14_1526" title="Permanent link">&para;</a></h4>
<p>@phracek<br />
Thanks for your quick answer. OK, I will check with RHEL7.2 LE Beta.</p>
<h4 id="mmitsugi_commented_at_2015-10-15_0759"><img src="https://avatars.githubusercontent.com/u/13441201?v=4" width="50"><a href="https://github.com/mmitsugi">mmitsugi</a> commented at <a href="https://github.com/rear/rear/issues/663#issuecomment-148310556">2015-10-15 07:59</a>:<a class="headerlink" href="#mmitsugi_commented_at_2015-10-15_0759" title="Permanent link">&para;</a></h4>
<p>@phracek<br />
I tested RHEL-7.2-20150820.0-Server-ppc64le and it seems to work fine.</p>
<pre><code># cat /etc/redhat-release 
Red Hat Enterprise Linux Server release 7.2 Beta (Maipo)

# uname -a
Linux mmR72LEbeta 3.10.0-306.0.1.el7.ppc64le #1 SMP Wed Aug 19 16:06:58 EDT 2015 ppc64le ppc64le ppc64le GNU/Linux
</code></pre>
<p>So it might be possible that your RHEL beta is too early and has a
problem...<br />
Please let me know if you have chance to try with other GA version like
7.1 LE and still have a problem.</p>
<h4 id="phracek_commented_at_2015-10-16_0750"><img src="https://avatars.githubusercontent.com/u/3416672?u=8867c1fd5f4ffa568d781775ab6110624b2dccd4&v=4" width="50"><a href="https://github.com/phracek">phracek</a> commented at <a href="https://github.com/rear/rear/issues/663#issuecomment-148641944">2015-10-16 07:50</a>:<a class="headerlink" href="#phracek_commented_at_2015-10-16_0750" title="Permanent link">&para;</a></h4>
<p>Well I will try it soon definitely.</p>
<p>And of course I will keep you inform.</p>
<h4 id="mmitsugi_commented_at_2015-10-20_0616"><img src="https://avatars.githubusercontent.com/u/13441201?v=4" width="50"><a href="https://github.com/mmitsugi">mmitsugi</a> commented at <a href="https://github.com/rear/rear/issues/663#issuecomment-149445549">2015-10-20 06:16</a>:<a class="headerlink" href="#mmitsugi_commented_at_2015-10-20_0616" title="Permanent link">&para;</a></h4>
<blockquote>
<blockquote>
<p>a RHEL6 / ppc64 (yaboot) : it should work. need to check<br />
b RHEL7 / ppc64 (grub) : not tested yet. still work in progress<br />
c RHEL7 / ppc64le (grub) : tested / worked when I did pull request.
need to check</p>
</blockquote>
</blockquote>
<p>Regarding the b RHEL7 / ppc64 (grub), I've created the pull request
#672 to support.</p>
<h4 id="gdha_commented_at_2015-11-13_0927"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/663#issuecomment-156375675">2015-11-13 09:27</a>:<a class="headerlink" href="#gdha_commented_at_2015-11-13_0927" title="Permanent link">&para;</a></h4>
<p>@phracek Any updates from your side?</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2023 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2015-09-30.663.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
