<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#2246 Issue closed: Integration REAR and NetBackup. I cannot restore differentials and fulls backups with NetBackup backup types standard, BMR or True Image Restore and "ALL_LOCAL_DRIVES" selection - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#2246 Issue closed: Integration REAR and NetBackup. I cannot restore differentials and fulls backups with NetBackup backup types standard, BMR or True Image Restore and \"ALL_LOCAL_DRIVES\" selection";
        var mkdocs_page_input_path = "issues/2019-10-04.2246.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_nas.html">Internal Backup with tar to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/rbme.html">External Backup using RBME</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/restic.html">External Backup using restic</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../development/squash-git-log-commments.html">How to squash git log comments into one line</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#2246 Issue closed: Integration REAR and NetBackup. I cannot restore differentials and fulls backups with NetBackup backup types standard, BMR or True Image Restore and "ALL_LOCAL_DRIVES" selection</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="2246_issue_closed_integration_rear_and_netbackup_i_cannot_restore_differentials_and_fulls_backups_with_netbackup_backup_types_standard_bmr_or_true_image_restore_and_all_local_drives_selection"><a href="https://github.com/rear/rear/issues/2246">#2246 Issue</a> <code>closed</code>: Integration REAR and NetBackup. I cannot restore differentials and fulls backups with NetBackup backup types standard, BMR or True Image Restore and "ALL_LOCAL_DRIVES" selection<a class="headerlink" href="#2246_issue_closed_integration_rear_and_netbackup_i_cannot_restore_differentials_and_fulls_backups_with_netbackup_backup_types_standard_bmr_or_true_image_restore_and_all_local_drives_selection" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>needs sponsorship</code>, <code>external tool</code>,
<code>no-issue-activity</code></p>
<h4 id="cge77_opened_issue_at_2019-10-04_1439"><img src="https://avatars.githubusercontent.com/u/55893275?v=4" width="50"><a href="https://github.com/cge77">cge77</a> opened issue at <a href="https://github.com/rear/rear/issues/2246">2019-10-04 14:39</a>:<a class="headerlink" href="#cge77_opened_issue_at_2019-10-04_1439" title="Permanent link">&para;</a></h4>
<h4 id="relax-and-recover_rear_issue_template">Relax-and-Recover (ReaR) Issue Template<a class="headerlink" href="#relax-and-recover_rear_issue_template" title="Permanent link">&para;</a></h4>
<p>Fill in the following items before submitting a new issue<br />
(quick response is not guaranteed with free support):</p>
<ul>
<li>
<p>ReaR version ("/usr/sbin/rear -V"): 2.4.</p>
</li>
<li>
<p>OS version ("cat /etc/rear/os.conf" or "lsb_release -a" or "cat
    /etc/os-release"): RHEL 7.7.</p>
</li>
<li>
<p>ReaR configuration files ("cat /etc/rear/site.conf" and/or "cat
    /etc/rear/local.conf"):</p>
</li>
</ul>
<!-- -->

<pre><code># Default is to create Relax-and-Recover rescue media as ISO image
# set OUTPUT to change that
# set BACKUP to activate an automated (backup and) restore of your data
# Possible configuration values can be found in /usr/share/rear/conf/default.conf
#
# This file (local.conf) is intended for manual configuration. For configuration
# through packages and other automated means we recommend creating a new
# file named site.conf next to this file and to leave the local.conf as it is.
# Our packages will never ship with a site.conf.

# To restore servers using multipath or not
AUTOEXCLUDE_MULTIPATH=y

# Recover data output to a ISO 
OUTPUT=ISO

# Location of the ISO
ISO_DIR=/tmp

# Backup type NetBackup
BACKUP=NBU

# Time synchronization
TIMESYNC=NTP

# Add programs to the iso image
PROGS=( ${PROGS[@]}
telnet )

# Add NetBackup Client files to the iso image
COPY_AS_IS=( ${COPY_AS_IS[@]}
/opt/Symantec
/opt/veritas
/opt/VRTSpbx
/etc/vx
/usr/openv
)

# Password to access using SSH to the rescue system
SSH_ROOT_PASSWORD=
</code></pre>
<ul>
<li>
<p>Hardware (PC or PowerNV BareMetal or ARM) or virtual machine (KVM
    guest or PoverVM LPAR): virtual machine.</p>
</li>
<li>
<p>System architecture (x86 compatible or PPC64/PPC64LE or what exact
    ARM device): x86.</p>
</li>
<li>
<p>Firmware (BIOS or UEFI or Open Firmware) and bootloader (GRUB or
    ELILO or Petitboot): BIOS and GRUB.</p>
</li>
<li>
<p>Storage (local disk or SSD) and/or SAN (FC or iSCSI or FCoE) and/or
    multipath (DM or NVMe): SAN FC.</p>
</li>
<li>
<p>Description of the issue (ideally so that others can reproduce it):</p>
</li>
</ul>
<p>I am using REAR with NetBackup 8.1.2.</p>
<p>If I restore BMR backups with "ALL_LOCAL_DRIVES" selection, I can only
restore full backups, Differential backups are not restored OK because
NetBackup restores all the data of the server from the date and time
answered in the REAR process question to the past: mix policies and do
not take in account the relation between the differentials and full
backups, etc. Basically, NetBackup restores all the data about the
server he finds. The server boots OK but the restore is not consistent.</p>
<p>If I restore Standard or TIR (True Image Restore) backups with
"ALL_LOCAL_DRIVES" selection the data restored it seems perfect but
the server does not boot OK, the server boots in the Emergency Mode and
with the dracut prompt (see the screens attached).</p>
<p>If I restore Standard or TIR (True Image Restore) backups selecting/mark
all the folders of the server but not with "ALL_LOCAL_DRIVES" option
and full and differential backups, the data restored is perfect and the
server boots OK. The problem is I cannot use the "ALL_LOCAL_DRIVES"
option and this is not operative.</p>
<p>I do not know what is the difference for REAR or NetBackup between use
the "ALL_LOCAL_DRIVES" option or mark all the folders of the servers
but it seems this is the key.</p>
<p>The ideal scenario for me it would be NetBackup backup type standard,
BMR or TIR and the "ALL_LOCAL_DRIVES" selection.</p>
<p>I have tried everything... Mainly in the "bprestore" command in the
"400_restore_with_nbu.sh” but I had not luck... I have tried in the
command the parameters TIR (-T), end time date (-e), start time date
(-s), policy (-p), etc.</p>
<p>I run out of ideas... I do not know what I can do more...</p>
<p>Many thanks.</p>
<ul>
<li>
<p>Workaround, if any:</p>
</li>
<li>
<p>Attachments, as applicable ("rear -D mkrescue/mkbackup/recover"
    debug log files):<br />
<img alt="1" src="https://user-images.githubusercontent.com/55893275/66215821-9dfb9580-e6c4-11e9-9b0d-7e1438fb546f.jpg" /><br />
<img alt="2" src="https://user-images.githubusercontent.com/55893275/66215822-9dfb9580-e6c4-11e9-9195-8bacd6d04e34.jpg" /></p>
</li>
</ul>
<p>To paste verbatim text like command output or file content,<br />
include it between a leading and a closing line of three backticks like</p>
<pre><code>verbatim content
</code></pre>
<h4 id="jsmeix_commented_at_2019-10-05_1244"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2246#issuecomment-538646732">2019-10-05 12:44</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-10-05_1244" title="Permanent link">&para;</a></h4>
<p>@cge77<br />
not that it actually helps you with this particular issue<br />
but in general see the section<br />
"Relax-and-Recover versus backup and restore" in<br />
<a href="https://en.opensuse.org/SDB:Disaster_Recovery">https://en.opensuse.org/SDB:Disaster_Recovery</a><br />
that reads in particular (excerpt)</p>
<pre><code>... Usually only basic support for the various backup tools
is implemented in ReaR (i.e. plain making a backup
during "rear mkbackup" and plain restore during "rear recover").
It is very different to what extent support for each individual
backup tool is implemented in ReaR because support for each
individual backup tool is implemented separated from each other.
Therefore for some particular backup tools the current support
in ReaR could be even only "very basic" ...
</code></pre>
<p>I guess what you ask for here</p>
<pre><code>NetBackup ... restore ... differentials and fulls backups
with NetBackup backup types standard, BMR
or True Image Restore and "ALL_LOCAL_DRIVES" selection
</code></pre>
<p>is perhaps not (yet) supported by the NetBackup code in ReaR.</p>
<p>In general regarding issues with third party backup tools:<br />
Usually there is nothing at all what we at ReaR upstream<br />
could do in case of issues with third-party backup tools<br />
because usually we do not have such software<br />
(in particular not when it is proprietary software<br />
according to
<a href="https://en.wikipedia.org/wiki/NetBackup">https://en.wikipedia.org/wiki/NetBackup</a>)<br />
so that we can neither test nor reproduce anything.<br />
Therefore for issues with third party backup tools<br />
you shoud also ask for help and support where<br />
you got your particular third party backup tool.</p>
<h4 id="cge77_commented_at_2019-10-07_0739"><img src="https://avatars.githubusercontent.com/u/55893275?v=4" width="50"><a href="https://github.com/cge77">cge77</a> commented at <a href="https://github.com/rear/rear/issues/2246#issuecomment-538876653">2019-10-07 07:39</a>:<a class="headerlink" href="#cge77_commented_at_2019-10-07_0739" title="Permanent link">&para;</a></h4>
<p>Hi jsmeix.</p>
<p>Thanks for the fast response.</p>
<p>Yes, I know and understand the support for third party tools as
NetBackup is limited here. I exposed my case here because I understand
some people is treating the integration of REAR and NetBackup and it is
possible they have encountered the same or similar problems.</p>
<p>In general, I see the integration of REAR and NetBackup is complex. As
you said, the basic functionalities work but if you want to do something
more advanced and professional, is difficult.</p>
<p>For example, you can restore the last full backup of a server perfectly
if the last backup of your server is a backup of all the data of the
server, if the last full backup of your server is a backup only of the
"/var" folder, REAR and NetBackup only will restore the "/var" folder.
Other topic is one of I mentioned in my first post, in many occasions
the restore does not take in account the relation between the
differentials and full backups and restore all the data about the server
he finds. Gives the impression you have to configure all in a determined
way to restore the server consistent.</p>
<p>Well, I continue with the fight :)</p>
<p>Thanks and regards.</p>
<h4 id="cge77_commented_at_2019-10-07_1222"><img src="https://avatars.githubusercontent.com/u/55893275?v=4" width="50"><a href="https://github.com/cge77">cge77</a> commented at <a href="https://github.com/rear/rear/issues/2246#issuecomment-538983965">2019-10-07 12:22</a>:<a class="headerlink" href="#cge77_commented_at_2019-10-07_1222" title="Permanent link">&para;</a></h4>
<p>Hi.</p>
<p>I am still in the fight :)</p>
<p>The data restore is OK but the server only boots with the rescue boot.
If I try a normal boot the server shows the message
"/dev/mapper/vg00-root does not exist" and the dracut shell. I am
investigating if it is possible to do any action in the rescue boot to
fix the normal boot of the server. Any help is appreciated :D</p>
<p>Thanks and regards.</p>
<h4 id="cge77_commented_at_2019-10-08_1108"><img src="https://avatars.githubusercontent.com/u/55893275?v=4" width="50"><a href="https://github.com/cge77">cge77</a> commented at <a href="https://github.com/rear/rear/issues/2246#issuecomment-539464236">2019-10-08 11:08</a>:<a class="headerlink" href="#cge77_commented_at_2019-10-08_1108" title="Permanent link">&para;</a></h4>
<p>Hi.</p>
<p>I got it :) We are able to restore BMR full and differential incremental
backups. The key is the "bprestore" command has to be as follows:</p>
<pre><code>bprestore_args="-B -H -L $TMP_DIR/bplog.restore -8 -R $TMP_DIR/nbu_change_file -t 0 -w 0 -e ${edate} -p &lt;policy_name&gt; -T -C ${NBU_CLIENT_SOURCE} -D ${NBU_CLIENT_NAME} -f $TMP_DIR/restore_fs_list"
</code></pre>
<p>The most important parameters of the "bprestore" command are:</p>
<p><code>-e ${edate}</code>: date and time of the backup we want to restore. The
parameter “-e” means "end date and time of the backup".</p>
<p><code>-p</code>: policy name of the backup we want to restore. This parameter is
useful to specify and control only we restore backups of this policy. It
is essential because without this parameter NetBackup restores other
policies that backup the server to restore.</p>
<p><code>-T</code>: restore a BMR backup. This parameter controls the relation between
the differential incremental backups and the full backups. As the
parameter "-p", the parameter "-T" is a control parameter to avoid
NetBackup restores all the data about the server he finds, without this
parameter, NetBackup do not take in account the relation between the
differential incremental backups and the full backups.</p>
<p>With this parameters, REAR and NetBackup restore full and differential
incremental backups in a consistent way.</p>
<p>One important topic, the NetBackup backups has to be BMR backups. The
backup data selection we use is "ALL_LOCAL_DRIVES".</p>
<p>I wanted to share with the community in case someone is fighting with
the integration of NetBackup and REAR and can help :D</p>
<p>Thanks and regards.</p>
<h4 id="cge77_commented_at_2019-10-08_1627"><img src="https://avatars.githubusercontent.com/u/55893275?v=4" width="50"><a href="https://github.com/cge77">cge77</a> commented at <a href="https://github.com/rear/rear/issues/2246#issuecomment-539594502">2019-10-08 16:27</a>:<a class="headerlink" href="#cge77_commented_at_2019-10-08_1627" title="Permanent link">&para;</a></h4>
<p>Hi again.</p>
<p>One essential topic I forgot comment in the last post. If the servers
does not boot in the Normal Mode, boot the server in the Rescue Mode and
execute this command:</p>
<pre><code>dracut --regenerate-all -f &amp;&amp; grub2-mkconfig -o /boot/grub2/grub.cfg
</code></pre>
<p>And then, boot the server in Normal Mode and the server is recovered. My
opinion is REAR and NetBackup touch the boot configurations as MBR,
GRUB, boot, kernels, etc; and we have to use the "dracut" command to fix
these configurations.</p>
<p>I have used Red Hat to do the tests.</p>
<p>Thanks and regards.</p>
<h4 id="jsmeix_commented_at_2019-10-09_1459"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2246#issuecomment-540041074">2019-10-09 14:59</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-10-09_1459" title="Permanent link">&para;</a></h4>
<p>@cge77<br />
can you post or attach your whole ReaR script here<br />
that contains your modified "bprestore" command<br />
so that I (as non NetBackup user) have at least a chance<br />
to understand what you are talking about.<br />
Thank you in advance!</p>
<h4 id="cge77_commented_at_2019-10-10_0653"><img src="https://avatars.githubusercontent.com/u/55893275?v=4" width="50"><a href="https://github.com/cge77">cge77</a> commented at <a href="https://github.com/rear/rear/issues/2246#issuecomment-540415416">2019-10-10 06:53</a>:<a class="headerlink" href="#cge77_commented_at_2019-10-10_0653" title="Permanent link">&para;</a></h4>
<p>Hi Jsmeix.</p>
<p>Yes, sure.</p>
<p>The script I edited is the
"/usr/share/rear/restore/NBU/default/400_restore_with_nbu.sh".
Basically, is the original script but with the first "bprestore" command
modified with these parameters: "-p &lt;nbu_backup_policy_name&gt;
-T".</p>
<pre><code># 400_restore_with_nbu.sh
# restore files with NBU

LogPrint "NetBackup: restoring / into $TARGET_FS_ROOT"

echo "change / to $TARGET_FS_ROOT" &gt; $TMP_DIR/nbu_change_file

# Do not use ARGS here because that is readonly in the rear main script.
# $TMP_DIR/restore_fs_list was made by 300_create_nbu_restore_fs_list.sh
if [ ${#NBU_ENDTIME[@]} -gt 0 ] ; then
    edate="${NBU_ENDTIME[@]}"
    bprestore_args="-B -H -L $TMP_DIR/bplog.restore -8 -R $TMP_DIR/nbu_change_file -t 0 -w 0 -e ${edate} **-p &lt;nbu_backup_policy_name&gt; -T** -C ${NBU_CLIENT_SOURCE} -D ${NBU_CLIENT_NAME} -f $TMP_DIR/restore_fs_list"
else
    bprestore_args="-B -H -L $TMP_DIR/bplog.restore -8 -R $TMP_DIR/nbu_change_file -t 0 -w 0 -C ${NBU_CLIENT_SOURCE} -D ${NBU_CLIENT_NAME} -f $TMP_DIR/restore_fs_list"
fi

LogPrint "RUN: /usr/openv/netbackup/bin/bprestore $bprestore_args"
LogPrint "Restore progress: see $TMP_DIR/bplog.restore"
LANG=C /usr/openv/netbackup/bin/bprestore $bprestore_args
rc=$?
if (( $rc &gt; 1 )) ; then
    Error "bprestore failed (return code = $rc)"
fi
</code></pre>
<p>With these 2 parameters and the parameter "-e ${edate}" you get the
next:</p>
<p><code>-e ${edate}</code>: date and time of the backup we want to restore. The
parameter “-e” means "end date and time of the backup".</p>
<p><code>-p</code>: policy name of the backup we want to restore. This parameter is
useful to specify and control only we restore backups of this policy. It
is essential because without this parameter NetBackup restores other
policies that backup the server to restore.</p>
<p><code>-T</code>: restore a BMR backup. This parameter controls the relation between
the differential incremental backups and the full backups. As the
parameter "-p", the parameter "-T" is a control parameter to avoid
NetBackup restores all the data about the server he finds, without this
parameter, NetBackup do not take in account the relation between the
differential incremental backups and the full backups.</p>
<p>With these parameters, REAR and NetBackup restore full and differential
incremental backups in a consistent way.</p>
<p>Other important topics are:</p>
<ul>
<li>
<p>The NetBackup backups must be BMR backups.</p>
</li>
<li>
<p>If after the recovery, the servers does not boot in the Normal Mode,
    boot the server in the Rescue Mode and execute this command:</p>
</li>
</ul>
<!-- -->

<pre><code>dracut --regenerate-all -f &amp;&amp; grub2-mkconfig -o /boot/grub2/grub.cfg
</code></pre>
<p>And then, boot the server in Normal Mode and the server is recovered. My
opinion is REAR and NetBackup touch the boot configurations as MBR,
GRUB, boot, kernels, etc; and we have to use the "dracut" command to fix
these configurations. I have used Red Hat to do the tests.</p>
<p>This is all. With this, you have fully integrated REAR with NetBackup at
less for Red Hat.</p>
<p>Thanks and regards.</p>
<p>P.D.: you have also touch other configuration files as, for example, the
"/etc/rear/local.conf" to load the NetBackup Client in the REAR ISO or
create a new script for the ISO to start the NetBackup PBX service, but
these are standard actions, it is easy to find in Internet how to do it.</p>
<h4 id="jsmeix_commented_at_2019-10-10_0751"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2246#issuecomment-540444775">2019-10-10 07:51</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-10-10_0751" title="Permanent link">&para;</a></h4>
<p>@cge77<br />
thank you for the information!</p>
<h4 id="cge77_commented_at_2019-10-11_1502"><img src="https://avatars.githubusercontent.com/u/55893275?v=4" width="50"><a href="https://github.com/cge77">cge77</a> commented at <a href="https://github.com/rear/rear/issues/2246#issuecomment-541101297">2019-10-11 15:02</a>:<a class="headerlink" href="#cge77_commented_at_2019-10-11_1502" title="Permanent link">&para;</a></h4>
<p>You are welcome! :D</p>
<h4 id="github-actions_commented_at_2020-06-26_0139"><img src="https://avatars.githubusercontent.com/in/15368?v=4" width="50"><a href="https://github.com/apps/github-actions">github-actions</a> commented at <a href="https://github.com/rear/rear/issues/2246#issuecomment-649900646">2020-06-26 01:39</a>:<a class="headerlink" href="#github-actions_commented_at_2020-06-26_0139" title="Permanent link">&para;</a></h4>
<p>Stale issue message</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2025 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2019-10-04.2246.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
