<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#2023 Issue closed: Question about disk layout limitations - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#2023 Issue closed: Question about disk layout limitations";
        var mkdocs_page_input_path = "issues/2019-01-23.2023.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#2023 Issue closed: Question about disk layout limitations</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="2023_issue_closed_question_about_disk_layout_limitations"><a href="https://github.com/rear/rear/issues/2023">#2023 Issue</a> <code>closed</code>: Question about disk layout limitations<a class="headerlink" href="#2023_issue_closed_question_about_disk_layout_limitations" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>support / question</code>, <code>fixed / solved / done</code></p>
<h4 id="jsmeix_opened_issue_at_2019-01-23_1027"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> opened issue at <a href="https://github.com/rear/rear/issues/2023">2019-01-23 10:27</a>:<a class="headerlink" href="#jsmeix_opened_issue_at_2019-01-23_1027" title="Permanent link">&para;</a></h4>
<p>I would like to know what the limitations of disk layout complexity
are<br />
where the disk layout can be recreated with our current layout code.</p>
<p>For what I mean with "disk layout complexity" have a look at the
section<br />
"Changes in the Partitioner UI to Unleash the Storage-ng Power" in<br />
<a href="https://lizards.opensuse.org/2018/10/09/yast-sprint-64/">https://lizards.opensuse.org/2018/10/09/yast-sprint-64/</a></p>
<p>The image therein<br />
<img alt="image" src="https://user-images.githubusercontent.com/1788608/51597951-c9569f80-1efc-11e9-90a1-04e6b425cad6.png" /><br />
shows an (intentional artificial) example of a complex disk layout<br />
that can be created in newest SLES15 with the so called "storage-ng"<br />
partitioner and the storage setup subsystem in YaST.</p>
<p>It contains in particular things like</p>
<ul>
<li>MD RAID that consists of full disks and partitions (e.g. /dev/md1
    consists of /dev/sdb and /dev/sda3)</li>
<li>MD RAID that contains partitions (e.g. /dev/md1 contains /dev/md1p1
    and /dev/md1p2)</li>
<li>A disk that is directly formatted with no partitions in between
    (e.g. there is an ext4 filesystem directly on /dev/sdc that is
    mounted at /data)</li>
</ul>
<p>That image shows an example of a higher stack of storage objects<br />
where one kind of storage object (partitions) appear on different
levels:</p>
<ul>
<li>mountpoint /home is on top of</li>
<li>filesystem ext4 that is on top of</li>
<li>partition /dev/md1p1 that is on top of</li>
<li>MD RAID /dev/md1 that is on top of two parents</li>
<li>disk /dev/sdb (that has no parent) and partition /dev/sda3 that is
    on top of</li>
<li>disk /dev/sda (that has no parent)</li>
</ul>
<p>Simply put, my question is if ReaR's current layout code is meant<br />
to support arbitrary big mesh-like stacks of storage objects<br />
('mesh-like' because a child can have more than one parent<br />
and 'stack' because there is a hierarchical top-down structure)<br />
or if there are currenly "built-in" limitations.</p>
<h4 id="jsmeix_commented_at_2019-01-23_1030"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2023#issuecomment-456750872">2019-01-23 10:30</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-01-23_1030" title="Permanent link">&para;</a></h4>
<p>@schlomo @gdha<br />
I hope you could answer my question.<br />
Perhaps you already experienced generic limitations in our current
layout code?</p>
<h4 id="jhoekx_commented_at_2019-01-23_1115"><img src="https://avatars.githubusercontent.com/u/783473?v=4" width="50"><a href="https://github.com/jhoekx">jhoekx</a> commented at <a href="https://github.com/rear/rear/issues/2023#issuecomment-456764118">2019-01-23 11:15</a>:<a class="headerlink" href="#jhoekx_commented_at_2019-01-23_1115" title="Permanent link">&para;</a></h4>
<p>The layout code was designed to handle the following setup (no picture
as nice as yours):</p>
<pre><code>HP RAID controller
  /dev/sda
    /dev/sda1
      /boot
    /dev/sda2
      pv
        lv /
        lv ...
        drbd
          pv
            lv /data1
            lv /data2
</code></pre>
<p>This means that it should be able to handle arbitrary setups as long as
the names of the things are unique. The dependencies between components
are used to create the devices in the right order.</p>
<h4 id="jsmeix_commented_at_2019-01-23_1621"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2023#issuecomment-456866405">2019-01-23 16:21</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-01-23_1621" title="Permanent link">&para;</a></h4>
<p>@jhoekx<br />
thank you very much for your prompt reply.</p>
<p>Now I will try out (as time permits) to set up such kind of<br />
(intentional artificial) examples of complex disk layout<br />
and see how it works with ReaR.</p>
<p><a href="https://github.com/rear/rear/issues/2086">https://github.com/rear/rear/issues/2086</a>
is a precondition<br />
for efficient testing ReaR with arbitrary disk layouts.</p>
<h4 id="schlomo_commented_at_2019-01-23_1703"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/2023#issuecomment-456883771">2019-01-23 17:03</a>:<a class="headerlink" href="#schlomo_commented_at_2019-01-23_1703" title="Permanent link">&para;</a></h4>
<p>@jsmeix IMHO ReaR should support that complexity as I don't see there
any new block device types.</p>
<p>If this "storage-ng" introduces a new storage layer with new block
devices then we would have to add support for this.</p>
<p>The best way to help ReaR in this context is to create an automated test
case that runs for example in a qemu VM.</p>
<h4 id="jsmeix_commented_at_2019-02-28_0843"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2023#issuecomment-468187071">2019-02-28 08:43</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-02-28_0843" title="Permanent link">&para;</a></h4>
<p>Independent of the disk layout complexity (i.e. the dependencies<br />
of parents and children in the mesh-like stack of storage objects)<br />
there are limitations what kind of storage objects ReaR can deal with.</p>
<p>Currently ReaR does not support</p>
<ul>
<li>
<p>One Btrfs filesystem on multiple storage objects (e.g. disks),<br />
    cf.
    <a href="https://github.com/rear/rear/issues/2028">https://github.com/rear/rear/issues/2028</a></p>
</li>
<li>
<p>Bcache storage objects e.g. <code>/dev/bcache0</code>,<br />
    cf.
    <a href="https://github.com/rear/rear/issues/2057">https://github.com/rear/rear/issues/2057</a></p>
</li>
</ul>
<h4 id="jsmeix_commented_at_2019-04-05_0723"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2023#issuecomment-480175037">2019-04-05 07:23</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-04-05_0723" title="Permanent link">&para;</a></h4>
<p><a href="https://github.com/rear/rear/issues/2087#issuecomment-477551079">https://github.com/rear/rear/issues/2087#issuecomment-477551079</a><br />
shows an example where the current layout code failed<br />
to get the right depencencies between storage objects.</p>
<h4 id="github-actions_commented_at_2020-06-28_0133"><img src="https://avatars.githubusercontent.com/in/15368?v=4" width="50"><a href="https://github.com/apps/github-actions">github-actions</a> commented at <a href="https://github.com/rear/rear/issues/2023#issuecomment-650665296">2020-06-28 01:33</a>:<a class="headerlink" href="#github-actions_commented_at_2020-06-28_0133" title="Permanent link">&para;</a></h4>
<p>Stale issue message</p>
<h4 id="jsmeix_commented_at_2020-06-29_0608"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2023#issuecomment-650939519">2020-06-29 06:08</a>:<a class="headerlink" href="#jsmeix_commented_at_2020-06-29_0608" title="Permanent link">&para;</a></h4>
<p>My question was sufficiently answered.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2024 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2019-01-23.2023.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
