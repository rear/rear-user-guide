<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#657 PR merged: ebiso support added - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#657 PR merged: ebiso support added";
        var mkdocs_page_input_path = "issues/2015-09-18.657.pr.merged.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_nas.html">Internal Backup with tar to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_rsync.html">Internal Backup with rsync to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/rbme.html">External Backup using RBME</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/restic.html">External Backup using restic</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../development/squash-git-log-commments.html">How to squash git log comments into one line</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#657 PR merged: ebiso support added</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="657_pr_merged_ebiso_support_added"><a href="https://github.com/rear/rear/pull/657">#657 PR</a> <code>merged</code>: ebiso support added<a class="headerlink" href="#657_pr_merged_ebiso_support_added" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code></p>
<h4 id="gozora_opened_issue_at_2015-09-18_0740"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> opened issue at <a href="https://github.com/rear/rear/pull/657">2015-09-18 07:40</a>:<a class="headerlink" href="#gozora_opened_issue_at_2015-09-18_0740" title="Permanent link">&para;</a></h4>
<p>Hello guys,<br />
Yesterday, I've release a small tool called ebiso
(<a href="https://github.com/gozora/ebiso">https://github.com/gozora/ebiso</a>),
which is capable of creating bootable UEFI ISO image (basically just to
cover gap on SLES11).</p>
<p>This patch integrates ebiso to rear, so maybe you can find it useful ...</p>
<p>I've did the testing on SLES11SP3 (with elilo) and Centos 6.7 (with
GRUB).</p>
<p>Hope it helps.</p>
<p>Best regards</p>
<p>Vlado</p>
<h4 id="schlomo_commented_at_2015-09-18_0935"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/pull/657#issuecomment-141400165">2015-09-18 09:35</a>:<a class="headerlink" href="#schlomo_commented_at_2015-09-18_0935" title="Permanent link">&para;</a></h4>
<p>Hi,</p>
<p>thanks - this is a very interesting thing. Could I kindly ask you to
change a few things to be more ReaR-like?</p>
<ul>
<li>Use <code>$()</code> instead of backticks</li>
<li>Create a function somewhere in <code>lib/</code>that will wrap your check if
    ebiso should be used? That we we need to change only one place in
    order to modify that detection code.</li>
<li>Improve the documentation to hint people with UEFI systems that they
    should install ebiso to get better results.</li>
<li>Add some info to <code>default.conf</code> to point out how to enable ebiso
    support.</li>
</ul>
<p>Another thought: Maybe the code will be easier to maintain if you have a
variable called for example ISO_USE_EBISO or something like that. IMHO
the code would be more explicit that way and you could also fail
properly if the user enables that feature but fails to install ebiso. It
would also make it really simple to auto-enable ebiso if the tool is
installed.</p>
<p>What do you think?</p>
<p>Kind Regards,<br />
Schlomo</p>
<h4 id="gozora_commented_at_2015-09-18_1040"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/pull/657#issuecomment-141414956">2015-09-18 10:40</a>:<a class="headerlink" href="#gozora_commented_at_2015-09-18_1040" title="Permanent link">&para;</a></h4>
<p>Hello,</p>
<p>No problem adapting backticks ...</p>
<p>For the detection point, my idea was to manually set variable
<code>ISO_MKISOFS_BIN</code> in /etc/rear (either <code>local.conf</code> or <code>site.conf</code>) to
<code>&lt;path_to_ebiso&gt;/ebiso</code> to trigger its use. But maybe I've just
misunderstood use of this variable ...<br />
Separate variable sounds alluring, but I think it might interfere with
existing <code>ISO_MKISOFS_BIN</code>.<br />
However you know much better anatomy of ReaR than I do, so can do the
implementation in whatever way you'd recommend.</p>
<p>I'll add some additional documentation directly to ebisio git site in
couple of days (didn't had much time for it until now) and I can add
information to rear docu as well.<br />
Is it OK for you if I add information about ebiso to
<code>05-integration.adoc</code>?</p>
<p>Best regards</p>
<p>Vlado</p>
<h4 id="schlomo_commented_at_2015-09-18_1528"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/pull/657#issuecomment-141482926">2015-09-18 15:28</a>:<a class="headerlink" href="#schlomo_commented_at_2015-09-18_1528" title="Permanent link">&para;</a></h4>
<p>I think the man page would be a good place. I did not find any good
place in the adoc files. I think in Configuration it would fit better
but I think that you can put it where you think it best.</p>
<p>About your other question: Looking at the code around UEFI_BOOTLOADER I
find it very complex (meaning that by reading it I don't understand
exactly what goes on there). That means that in any case I cannot really
judge your change and would kindly ask @gdha to take a look and to take
the final decision. He is much more EFI expert than me.</p>
<h4 id="gozora_commented_at_2015-09-18_1606"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/pull/657#issuecomment-141494542">2015-09-18 16:06</a>:<a class="headerlink" href="#gozora_commented_at_2015-09-18_1606" title="Permanent link">&para;</a></h4>
<p>man CONFIGURATION section looks reasonable , but first we should decide
how to integrate ebiso ;-).</p>
<p>Just to summarize for @gdha, to activate current implementation of patch
user needs manually specify in <code>/etc/rear/site.conf</code> or
<code>/etc/rear/local.conf</code>:<br />
<code>ISO_MKISOFS_BIN=&lt;path_to_ebiso&gt;/ebiso</code></p>
<p>V.</p>
<h4 id="gozora_commented_at_2015-09-18_1625"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/pull/657#issuecomment-141498592">2015-09-18 16:25</a>:<a class="headerlink" href="#gozora_commented_at_2015-09-18_1625" title="Permanent link">&para;</a></h4>
<p>I guess you have following section on your mind:</p>
<pre><code>if [[ $(basename ${UEFI_BOOTLOADER}) = "elilo.efi" ]]; then
      pushd $TMP_DIR/isofs/boot &gt;&amp;8
      $ISO_MKISOFS_BIN -o $ISO_DIR/$ISO_PREFIX.iso -e efiboot.img .
   else
      pushd $TMP_DIR/isofs &gt;&amp;8
      $ISO_MKISOFS_BIN -o $ISO_DIR/$ISO_PREFIX.iso -e boot/efiboot.img .
 fi
</code></pre>
<p>The idea behind is quite simple. By contrast to GRUB, elilo is not smart
enough to find kernel and initrd outside ISO virtual volume, so in
<code>25_polulate_efibootimg.sh</code>, I've created one more copy of kernel and
initrd inside <code>$TMP_DIR/mnt/EFI/BOOT/</code> if elilo is used on system.<br />
And root directory shift is done just to avoid copy "useless" data which
are not used during ISO boot.</p>
<p>Hope it clarifies ...</p>
<p>V.</p>
<h4 id="gozora_commented_at_2015-09-18_1626"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/pull/657#issuecomment-141498848">2015-09-18 16:26</a>:<a class="headerlink" href="#gozora_commented_at_2015-09-18_1626" title="Permanent link">&para;</a></h4>
<p>That thing with back-ticks was already addressed by @schlomo.<br />
I've already taken it into account ...</p>
<h4 id="schlomo_commented_at_2015-09-18_1629"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/pull/657#issuecomment-141499460">2015-09-18 16:29</a>:<a class="headerlink" href="#schlomo_commented_at_2015-09-18_1629" title="Permanent link">&para;</a></h4>
<p>@gozora Thanks for the clarification. If this is just to optimize a few
MB then I personally would rather optimize for code simplicity.</p>
<p>If elilo is "stupid" then I would - for the same reason of code
simplicity - tend to setup the stupid directory structure and use that
for both elilo and grub.</p>
<p>Just my 2ct of "code is written once and read many times" wisdom :-)
Meaning that if that optimization is important for somebody (having a
real-life use case for why those MB are worth to save), then of course
we should save them.</p>
<h4 id="gozora_commented_at_2015-09-18_1636"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/pull/657#issuecomment-141502126">2015-09-18 16:36</a>:<a class="headerlink" href="#gozora_commented_at_2015-09-18_1636" title="Permanent link">&para;</a></h4>
<p>@schlomo actually that shifted ROOT dir save 50% of ISO size, as not
shifting it would cause to have exact copy of initrd and kernel in two
separate places in ISO.<br />
But maybe I can adapt <code>80_create_isofs.sh</code> to avoid coping of
kernel/initrd if ebiso is used?<br />
That would allow to have non shifted ROOT dir and save space as well.</p>
<h4 id="gozora_commented_at_2015-09-18_1640"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/pull/657#issuecomment-141503553">2015-09-18 16:40</a>:<a class="headerlink" href="#gozora_commented_at_2015-09-18_1640" title="Permanent link">&para;</a></h4>
<p>@gdha OK, man page will stay untouched for now, and I'll add some info
to default.conf instead.<br />
That fight around mkisofs/genisoimage is something that could be filmed
in the future :-)</p>
<h4 id="gozora_commented_at_2015-09-20_0914"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/pull/657#issuecomment-141759825">2015-09-20 09:14</a>:<a class="headerlink" href="#gozora_commented_at_2015-09-20_0914" title="Permanent link">&para;</a></h4>
<p>Hope the patch it is better now!</p>
<h4 id="gdha_commented_at_2015-09-21_1348"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/pull/657#issuecomment-141983798">2015-09-21 13:48</a>:<a class="headerlink" href="#gdha_commented_at_2015-09-21_1348" title="Permanent link">&para;</a></h4>
<p>@gozora Looks very good - thanks.</p>
<h4 id="gozora_commented_at_2015-09-21_1349"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/pull/657#issuecomment-141984621">2015-09-21 13:49</a>:<a class="headerlink" href="#gozora_commented_at_2015-09-21_1349" title="Permanent link">&para;</a></h4>
<p>No problem ...</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2025 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2015-09-18.657.pr.merged.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
