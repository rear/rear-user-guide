<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#2692 Issue closed: Gentoo: mkisofs misses -e flag to create ISO for UEFI (using ebiso works) - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#2692 Issue closed: Gentoo: mkisofs misses -e flag to create ISO for UEFI (using ebiso works)";
        var mkdocs_page_input_path = "issues/2021-10-05.2692.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#2692 Issue closed: Gentoo: mkisofs misses -e flag to create ISO for UEFI (using ebiso works)</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="2692_issue_closed_gentoo_mkisofs_misses_-e_flag_to_create_iso_for_uefi_using_ebiso_works"><a href="https://github.com/rear/rear/issues/2692">#2692 Issue</a> <code>closed</code>: Gentoo: mkisofs misses -e flag to create ISO for UEFI (using ebiso works)<a class="headerlink" href="#2692_issue_closed_gentoo_mkisofs_misses_-e_flag_to_create_iso_for_uefi_using_ebiso_works" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>support / question</code>, <code>fixed / solved / done</code></p>
<h4 id="redglobuli_opened_issue_at_2021-10-05_0822"><img src="https://avatars.githubusercontent.com/u/71544926?v=4" width="50"><a href="https://github.com/redglobuli">redglobuli</a> opened issue at <a href="https://github.com/rear/rear/issues/2692">2021-10-05 08:22</a>:<a class="headerlink" href="#redglobuli_opened_issue_at_2021-10-05_0822" title="Permanent link">&para;</a></h4>
<h4 id="relax-and-recover_rear_issue_template">Relax-and-Recover (ReaR) Issue Template<a class="headerlink" href="#relax-and-recover_rear_issue_template" title="Permanent link">&para;</a></h4>
<p>Fill in the following items before submitting a new issue<br />
(quick response is not guaranteed with free support):</p>
<ul>
<li>ReaR version ("/usr/sbin/rear -V"):</li>
</ul>
<p>Relax-and-Recover 2.6 / Git</p>
<ul>
<li>OS version ("cat /etc/os-release" or "lsb_release -a" or "cat
    /etc/rear/os.conf"):</li>
</ul>
<p>Gentoo Base System release 2.7</p>
<ul>
<li>ReaR configuration files ("cat /etc/rear/site.conf" and/or "cat
    /etc/rear/local.conf"):</li>
</ul>
<p>BACKUP=BAREOS<br />
BAREOS_CLIENT=server-fd<br />
OUTPUT_URL=nfs://192.168.212.8/mnt/array1/rear</p>
<ul>
<li>Hardware vendor/product (PC or PowerNV BareMetal or ARM) or VM (KVM
    guest or PowerVM LPAR):</li>
</ul>
<p>Intel Server Bare Metal</p>
<ul>
<li>System architecture (x86 compatible or PPC64/PPC64LE or what exact
    ARM device):</li>
</ul>
<p>x86_64</p>
<ul>
<li>Firmware (BIOS or UEFI or Open Firmware) and bootloader (GRUB or
    ELILO or Petitboot):</li>
</ul>
<p>UEFI / Grub 2.06</p>
<ul>
<li>Storage (local disk or SSD) and/or SAN (FC or iSCSI or FCoE) and/or
    multipath (DM or NVMe):</li>
</ul>
<p>SSD / NVMe</p>
<ul>
<li>Storage layout ("lsblk -ipo
    NAME,KNAME,PKNAME,TRAN,TYPE,FSTYPE,SIZE,MOUNTPOINT"):</li>
</ul>
<p>/dev/sda 8:0 0 1.7T 0 disk<br />
|-/dev/sda1 8:1 0 256M 0 part /boot<br />
|-/dev/sda2 8:2 0 4G 0 part [SWAP]<br />
`-/dev/sda3 8:3 0 1.7T 0 part /</p>
<ul>
<li>Description of the issue (ideally so that others can reproduce it):</li>
</ul>
<p>trying to rear mkrescue and upload the iso to a nfs share.</p>
<p>stopping with the following error:</p>
<p>2021-10-05 09:40:20.341110953 Including ISO UEFI boot (as triggered by
USING_UEFI_BOOTLOADER=1)<br />
Bad Option '-e' (error -1 BADFLAG).<br />
Usage: mkisofs [options] [-find] file... [find expression]</p>
<p>mkisofs version: mkisofs 3.02a09 (x86_64-pc-linux-gnu) from
app-cdr/cdrtools-3.02_alpha09-r3</p>
<ul>
<li>Workaround, if any:</li>
</ul>
<p>none, yet</p>
<ul>
<li>Attachments, as applicable ("rear -D mkrescue/mkbackup/recover"
    debug log files):</li>
</ul>
<p>posting down below</p>
<p>To paste verbatim text like command output or file content,<br />
include it between a leading and a closing line of three backticks like</p>
<pre><code>```
Relax-and-Recover 2.6 / Git
Running rear mkrescue (PID 19872)
Using log file: /var/log/rear/rear-server.log
Running workflow mkrescue on the normal/original system
Found EFI system partition /dev/sda1 on /boot type vfat
Using UEFI Boot Loader for Linux (USING_UEFI_BOOTLOADER=1)
Using autodetected kernel '/boot/vmlinuz-5.10.68-gentoo-dist' as kernel in the recovery system
Creating disk layout
Overwriting existing disk layout file /var/lib/rear/layout/disklayout.conf
Using guessed bootloader 'EFI' (found in first bytes on /dev/nvme0n1)
Verifying that the entries in /var/lib/rear/layout/disklayout.conf are correct ...
Creating recovery system root filesystem skeleton layout
Handling network interface 'br0'
br0 is a bridge
br0 has lower interface bond0
Couldn't determine if network interface 'bond0' is a Team, skipping.
bond0 is a bond
bond0 has lower interface eno0
eno0 is a physical device
bond0 has lower interface enp26s0f1
enp26s0f1 is a physical device
br0 has lower interface vnet21
br0 has lower interface vnet23
br0 has lower interface vnet24
br0 has lower interface vnet27
br0 has lower interface vnet28
br0 has lower interface vnet29
br0 has lower interface vnet7
Handled network interface 'br0'
Skipping 'virbr0': not bound to any physical interface.
Trying to find what to use as UEFI bootloader...
Trying to find a 'well known file' to be used as UEFI bootloader...
Using '/boot/efi/gentoo/grubx64.efi' as UEFI bootloader file
Copying logfile /var/log/rear/rear-server.log into initramfs as '/tmp/rear-server-partial-2021-10-05T10:19:00+02:00.log'
Copying files and directories
Copying binaries and libraries
Copying all kernel modules in /lib/modules/5.10.68-gentoo-dist (MODULES contains 'all_modules')
Copying all files in /lib*/firmware/
Skip copying broken symlink '/etc/mtab' target '/proc/32207/mounts' on /proc/ /sys/ /dev/ or /run/
Symlink '/lib/modules/5.10.68-gentoo-dist/build' -&gt; '/usr/src/linux-5.10.68-gentoo-dist' refers to a non-existing directory on the recovery system.
It will not be copied by default. You can include '/usr/src/linux-5.10.68-gentoo-dist' via the 'COPY_AS_IS' configuration variable.
Symlink '/lib/modules/5.10.68-gentoo-dist/source' -&gt; '/usr/src/linux-5.10.68-gentoo-dist' refers to a non-existing directory on the recovery system.
It will not be copied by default. You can include '/usr/src/linux-5.10.68-gentoo-dist' via the 'COPY_AS_IS' configuration variable.
Testing that the recovery system in /tmp/rear.5qpEsuQcXMDtdIL/rootfs contains a usable system
There are binaries or libraries in the ReaR recovery system that need additional libraries
/usr/lib64/syslog-ng/loggen/libloggen_socket_plugin.so requires additional libraries
        libloggen_plugin-3.30.so.0 =&gt; not found
        libloggen_helper-3.30.so.0 =&gt; not found
/usr/lib64/syslog-ng/loggen/libloggen_ssl_plugin.so requires additional libraries
        libloggen_plugin-3.30.so.0 =&gt; not found
        libloggen_helper-3.30.so.0 =&gt; not found
ReaR recovery system in '/tmp/rear.5qpEsuQcXMDtdIL/rootfs' needs additional libraries, check /var/log/rear/rear-server.log for details
Creating recovery/rescue system initramfs/initrd initrd.cgz with gzip default compression
Created initrd.cgz with gzip default compression (127325554 bytes) in 21 seconds
GRUB2 modules to load: fat part_gpt
Making ISO image
ERROR: Could not create ISO image (with /usr/bin/mkisofs)
Some latest log messages since the last called script 820_create_iso_image.sh:
        -UDF                    Generate UDF file system
        -dvd-audio              Generate DVD-Audio compliant UDF file system
        -dvd-video              Generate DVD-Video compliant UDF file system
        -dvd-hybrid             Generate a hybrid (DVD-Audio/DVD-Video) compliant UDF file system
        -iso-level LEVEL        Set ISO9660 level (1..3) or 4 for ISO9660 v 2
        -V ID, -volid ID        Set Volume ID
        -graft-points           Allow to use graft points for filenames
        -M FILE, -prev-session FILE     Set path to previous session to merge
Aborting due to an error, check /var/log/rear/rear-server.log for details
Exiting rear mkrescue (PID 19872) and its descendant processes ...
Running exit tasks
You should also rm -Rf /tmp/rear.5qpEsuQcXMDtdIL
[1]    19872 terminated  rear -D mkrescue
```
</code></pre>
<h4 id="jsmeix_commented_at_2021-10-06_1122"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2692#issuecomment-936031572">2021-10-06 11:22</a>:<a class="headerlink" href="#jsmeix_commented_at_2021-10-06_1122" title="Permanent link">&para;</a></h4>
<p>Because you use UEFI it may work for you to use "ebiso" instead of
"mkisofs",<br />
see usr/share/rear/conf/default.conf about "ebiso" and for an example
see<br />
usr/share/rear/conf/examples/SLE11-SLE12-SAP-HANA-UEFI-example.conf<br />
but I cannot tell you where you could download "ebiso" binaries for
Gentoo.</p>
<p>Alternatively use another ISO creation tool that supports UEFI<br />
which is already ready-to-use provided by Gentoo<br />
and then you may have to adapt<br />
usr/share/rear/output/ISO/Linux-i386/820_create_iso_image.sh<br />
so that your particular ISO creation tool is called with appropriate<br />
command line options as needed for UEFI in your case.</p>
<h4 id="redglobuli_commented_at_2021-10-11_0827"><img src="https://avatars.githubusercontent.com/u/71544926?v=4" width="50"><a href="https://github.com/redglobuli">redglobuli</a> commented at <a href="https://github.com/rear/rear/issues/2692#issuecomment-939805382">2021-10-11 08:27</a>:<a class="headerlink" href="#redglobuli_commented_at_2021-10-11_0827" title="Permanent link">&para;</a></h4>
<p>thanks for your answer, i downloaded the centos rpm from here<br />
<a href="https://software.opensuse.org//download.html?project=Archiving%3ABackup%3ARear&amp;package=ebiso">https://software.opensuse.org//download.html?project=Archiving%3ABackup%3ARear&amp;package=ebiso</a><br />
and did:</p>
<p>rpm2targz ebiso-0.1.4-1.el6.x86_64.rpm<br />
tar xzfv ebiso-0.1.4-1.el6.x86_64.tar.gz<br />
mkdir /opt/ebiso<br />
mv usr/bin/ebiso /opt/ebiso/ebiso</p>
<p>and added the line</p>
<p>ISO_MKISOFS_BIN=/opt/ebiso/ebiso</p>
<p>to /etc/rear/local.conf</p>
<p>no complaining anymore and the iso is created and uploaded to my nfs
share.</p>
<p>I'll start testing the created image now.</p>
<p>thanks again.</p>
<p>edit: latest rpm from here<br />
<a href="https://software.opensuse.org//download.html?project=home%3Agozora&amp;package=ebiso">https://software.opensuse.org//download.html?project=home%3Agozora&amp;package=ebiso</a><br />
seems to work too.</p>
<h4 id="jsmeix_commented_at_2021-10-11_1024"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2692#issuecomment-939896120">2021-10-11 10:24</a>:<a class="headerlink" href="#jsmeix_commented_at_2021-10-11_1024" title="Permanent link">&para;</a></h4>
<p>@redgloboli<br />
thank you for your explanatory feedback<br />
what exact steps you did to make it work for you.<br />
This could be helpful for other Gentoo users.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2024 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2021-10-05.2692.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
