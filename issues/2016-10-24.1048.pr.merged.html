<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#1048 PR merged: Improvements in handling of encrypted Borg repositories - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#1048 PR merged: Improvements in handling of encrypted Borg repositories";
        var mkdocs_page_input_path = "issues/2016-10-24.1048.pr.merged.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_nas.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../development/squash-git-log-commments.html">How to squash git log comments into one line</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#1048 PR merged: Improvements in handling of encrypted Borg repositories</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="1048_pr_merged_improvements_in_handling_of_encrypted_borg_repositories"><a href="https://github.com/rear/rear/pull/1048">#1048 PR</a> <code>merged</code>: Improvements in handling of encrypted Borg repositories<a class="headerlink" href="#1048_pr_merged_improvements_in_handling_of_encrypted_borg_repositories" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>fixed / solved / done</code></p>
<h4 id="gozora_opened_issue_at_2016-10-24_0843"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> opened issue at <a href="https://github.com/rear/rear/pull/1048">2016-10-24 08:43</a>:<a class="headerlink" href="#gozora_opened_issue_at_2016-10-24_0843" title="Permanent link">&para;</a></h4>
<ul>
<li>introduced BORGBACKUP_PASSPHRASE, to send pass-phrase to Borg using
    environment variable</li>
<li>logic of Borg backup work-flow was reordered, now we are able to
    COPY_AS_IS_BORG keyfile to Relax-and-Recover rescue/recovery
    system</li>
<li>Introduced BORGBACKUP_REMOTE_PATH, which sets location of Borg
    binary on remote server. Borg can be now installed to arbitrary
    location</li>
<li>default encryption is now "none" (see
    <a href="https://github.com/rear/rear/pull/1045#issuecomment-255212839">comment</a>)</li>
</ul>
<h4 id="gozora_commented_at_2016-10-24_0845"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/pull/1048#issuecomment-255682360">2016-10-24 08:45</a>:<a class="headerlink" href="#gozora_commented_at_2016-10-24_0845" title="Permanent link">&para;</a></h4>
<p>Update of documentation will follow soon ...</p>
<h4 id="jsmeix_commented_at_2016-10-24_0936"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1048#issuecomment-255693441">2016-10-24 09:36</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-10-24_0936" title="Permanent link">&para;</a></h4>
<p>@gozora<br />
now you introduce some all-caps variables like<br />
OPT_COMPRESSION, OPT_PRUNE, OPT_REMOTE_PATH,<br />
and ARCHIVE_CACHE that I find nowhere else in current ReaR.</p>
<p>I assume these variables are currently only used for BORG<br />
but they look as if they are intended for a more general<br />
usage also for other backup methods because they<br />
have no "BORG_" prefix.</p>
<p>I would like to know how those variables are meant to be used.</p>
<h4 id="gozora_commented_at_2016-10-24_1021"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/pull/1048#issuecomment-255703173">2016-10-24 10:21</a>:<a class="headerlink" href="#gozora_commented_at_2016-10-24_1021" title="Permanent link">&para;</a></h4>
<blockquote>
<p>I assume these variables are currently only used for BORG</p>
</blockquote>
<p>Yes that is correct, scope for these variables is intended only for
Borg. The reason why they are all caps is that I've try to follow <a href="https://github.com/rear/rear/wiki/Coding-Style#variables">ReaR
conding
style</a>.<br />
<em>"All variables that are used in more than a single script must be
all-caps:"</em><br />
I've decided not to prefix them with <strong>BORGBACKUP_</strong> as they are not
intended to be configured by default.conf.</p>
<p>I can of course change them, so their use become more obvious.<br />
Do you have any preference?</p>
<p>Thanks</p>
<p>V.</p>
<h4 id="jsmeix_commented_at_2016-10-24_1118"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1048#issuecomment-255713645">2016-10-24 11:18</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-10-24_1118" title="Permanent link">&para;</a></h4>
<p>@gozora<br />
all-caps is fine for me - but because that indicates some kind<br />
of "global" usage (strictly speaking in more than one script)<br />
I would prefer a prefix when it is "not so much global"<br />
to indicate that it is only meant "global" for BORG.</p>
<p>For example we have already<br />
BACKUP_PROG_COMPRESS_OPTIONS<br />
and now the OPT_COMPRESSION may cause<br />
some confusion what each one is about.</p>
<p>In contrast when you use BORG_OPT_COMPRESSION<br />
or BORGBACKUP_OPT_COMPRESSION (as you like)<br />
the distinction is clear.</p>
<p>Only some offhanded thoughts for the future:</p>
<p>Alternatively one could perhaps use the existing<br />
BACKUP_PROG_COMPRESS_OPTIONS array<br />
also for other backup methods like Borg Backup?</p>
<p>But currently default.conf states that<br />
BACKUP_PROG_COMPRESS_OPTIONS<br />
belongs only to "internal BACKUP stuff".</p>
<p>Perhaps this could become a good example how one<br />
could use existing variables also for other backup methods?</p>
<p>If one likes to use BACKUP_PROG_COMPRESS_OPTIONS<br />
also for other backup methods one would first of all need to<br />
change ReaR so that the current default '--gzip' is no longer<br />
set in default.conf so that it is empty there.<br />
Then for each backup method its particular default<br />
could be set in a script of each backup method if
BACKUP_PROG_COMPRESS_OPTIONS is empty.<br />
For each backup method a comment in default.conf<br />
would tell about the default.</p>
<p>As far as I know currently the various backup methods<br />
are implemented mostly separated from each other.<br />
"Mostly" because e.g. 'tar' and 'rsync' both use<br />
e.g. BACKUP_PROG_COMPRESS_OPTIONS, cf.<br />
usr/share/rear/backup/NETFS/default/50_make_backup.sh</p>
<p>Perhaps it is better to keep different backup methods separated?<br />
(I.e. avoid RFC 1925 item 5 and keep separated things separated.)</p>
<p>Perhaps it is better to do common things via same variables?<br />
(E.g. see also
<a href="https://github.com/rear/rear/issues/823">https://github.com/rear/rear/issues/823</a>)</p>
<p>Currently I don't know...</p>
<h4 id="gozora_commented_at_2016-10-24_1133"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/pull/1048#issuecomment-255716136">2016-10-24 11:33</a>:<a class="headerlink" href="#gozora_commented_at_2016-10-24_1133" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Perhaps it is better to keep different backup methods separated?<br />
(I.e. avoid RFC 1925 item 5 and keep separated things separated.)</p>
<p>Perhaps it is better to do common things via same variables?<br />
(E.g. see also #823)</p>
</blockquote>
<p>In my opinion they should remain separated, it is maybe nicer to have
one variable for multiple backups but, this can cause some trouble
connected with introducing more and more complicated code when new
features will be build into ReaR.</p>
<p>For new variable names (OPT_COMPRESSION and co.) I'll prefix them with
BORGBACKUP_*, to avoid confusion.</p>
<h4 id="jsmeix_commented_at_2016-10-24_1143"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1048#issuecomment-255717833">2016-10-24 11:43</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-10-24_1143" title="Permanent link">&para;</a></h4>
<p>I also think it is better to keep separated things separated.</p>
<p>In particular keeping different backup methods separated<br />
is even more future proof, cf. "Multiple Backup Methods" in<br />
<a href="https://github.com/rear/rear/issues/769">https://github.com/rear/rear/issues/769</a><br />
"Multiple Backup Methods" require separated config<br />
variables for each backup method.</p>
<h4 id="jsmeix_commented_at_2016-10-25_0752"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1048#issuecomment-255962853">2016-10-25 07:52</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-10-25_0752" title="Permanent link">&para;</a></h4>
<p>@gozora<br />
please tell me when this pull request<br />
is complete to be merged.</p>
<h4 id="gozora_commented_at_2016-10-25_0759"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/pull/1048#issuecomment-255964438">2016-10-25 07:59</a>:<a class="headerlink" href="#gozora_commented_at_2016-10-25_0759" title="Permanent link">&para;</a></h4>
<p>@jsmeix sorry for my trashy development management!<br />
You can merge this one.<br />
(In next days I'll create one more, but that will be just introduction
of couple of Borg variables)</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2025 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2016-10-24.1048.pr.merged.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
