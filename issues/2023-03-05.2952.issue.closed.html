<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#2952 Issue closed: Confusing error about checksum mismatch after recovery - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#2952 Issue closed: Confusing error about checksum mismatch after recovery";
        var mkdocs_page_input_path = "issues/2023-03-05.2952.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#2952 Issue closed: Confusing error about checksum mismatch after recovery</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="2952_issue_closed_confusing_error_about_checksum_mismatch_after_recovery"><a href="https://github.com/rear/rear/issues/2952">#2952 Issue</a> <code>closed</code>: Confusing error about checksum mismatch after recovery<a class="headerlink" href="#2952_issue_closed_confusing_error_about_checksum_mismatch_after_recovery" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>fixed / solved / done</code></p>
<h4 id="schlomo_opened_issue_at_2023-03-05_0255"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> opened issue at <a href="https://github.com/rear/rear/issues/2952">2023-03-05 02:55</a>:<a class="headerlink" href="#schlomo_opened_issue_at_2023-03-05_0255" title="Permanent link">&para;</a></h4>
<p>Probably I missed the context, but I find it consuing to get a checksum
mismatch error during recovery:<br />
<img alt="image" src="https://user-images.githubusercontent.com/101384/222938620-30599b78-dd8f-4f73-a7c4-5d1cd012d634.png" /></p>
<p>While I understand the mechanics, I don't understand the purpose and I
don't understand which problem ReaR tries to solve here. Also, I find
this error not actionable.</p>
<p>I read through #2795 and I'm wondering if checking the
<code>CHECK_CONFIG_FILES</code> array via MD5 is maybe too much... Or maybe we
started to use that variable for too many purposes. For example, it
containt not only the disk layout related configs but also ReaR
configuration and even backup software configuration (for TSM,
FDRUPSTREAM and soon also GALAXY11).</p>
<p>As a result, I'd expect the majority of recoveries to show that error
even though there is no need to do anything because the disk layout
related files (that we wanted to check for missing ID changes, no?) .</p>
<p>Maybe we need to split <code>CHECK_CONFIG_FILES</code> into two arrays, or limit
the files that we check MD5 sums for? Also, maybe "checking if we should
run <code>mkrescue</code> again" is a completely different problem from "is there a
problem with the recovered system" so that we shouldn't use the same set
of checksums for that?</p>
<p>Some more examples where the MD5 checksums are sure to fail:</p>
<ul>
<li>mounting by hardware IDs, e.g. serial numbers, disk IDs or
    hardware-related paths</li>
<li>different network adapters</li>
<li>updates that happened between creating the backup and taking the
    mkrescue</li>
</ul>
<p>All of that is because we use the MD5 checksums stored in the <em>rescue</em>
image to check content of the <em>restored backup</em>, and they are in my
experience much less tightly coupled.</p>
<p>The purpose of this issue is to talk a bit about how to narrow down the
feature introduced by #2795 to reduce confusing error messages.</p>
<h4 id="jsmeix_commented_at_2023-03-06_1205"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2952#issuecomment-1456013067">2023-03-06 12:05</a>:<a class="headerlink" href="#jsmeix_commented_at_2023-03-06_1205" title="Permanent link">&para;</a></h4>
<p>The history behind:</p>
<p>It started with<br />
<a href="https://github.com/rear/rear/issues/2785">https://github.com/rear/rear/issues/2785</a><br />
that lead to<br />
<a href="https://github.com/rear/rear/issues/2787">https://github.com/rear/rear/issues/2787</a><br />
which is still open,<br />
i.e. we do not have a solution for that.</p>
<h4 id="jsmeix_commented_at_2023-03-07_0922"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2952#issuecomment-1457828809">2023-03-07 09:22</a>:<a class="headerlink" href="#jsmeix_commented_at_2023-03-07_0922" title="Permanent link">&para;</a></h4>
<p>In general the reason for this error message is that<br />
the user made a ReaR recovery system and a backup<br />
that do not match.</p>
<p>As far as I can imagine such a mismatch can only happen<br />
when the ReaR recovery system is made separated from the backup<br />
i.e. not via "rear mkbackup" but via "rear mkrescue" and<br />
"rear mkbackuponly" or by a third-party backup tool<br />
plus when something was changed between "rear mkrescue"<br />
and making the backup.</p>
<p>Here "do not match" means that for md5sums stored during<br />
"rear mkrescue" in var/lib/rear/layout/config/files.md5sum<br />
then during "rear recover" after the backup was restored<br />
a md5sum does not match for restored files that are<br />
listed in var/lib/rear/layout/config/files.md5sum<br />
which means the files where the md5sum does not match<br />
changed between "rear mkrescue" and making the backup.</p>
<p>The purpose of this error message is that<br />
the user is informed about a possible problem.</p>
<p>ReaR does not try to solve any problem here<br />
because ReaR cannot solve it during "rear recover"<br />
when the user made a ReaR recovery system<br />
and a backup that do not match.</p>
<p>Accordingly it is up to the user to evaluate<br />
what such reported inconsistencies mean for him<br />
and take some appropriate action to fix things<br />
if needed or ignore reported inconsistencies.</p>
<h4 id="jsmeix_commented_at_2023-03-07_0927"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2952#issuecomment-1457835871">2023-03-07 09:27</a>:<a class="headerlink" href="#jsmeix_commented_at_2023-03-07_0927" title="Permanent link">&para;</a></h4>
<p>@pcahyna<br />
I hope I described things sufficiently right in my above<br />
<a href="https://github.com/rear/rear/issues/2952#issuecomment-1457828809">https://github.com/rear/rear/issues/2952#issuecomment-1457828809</a><br />
if not please correct me.</p>
<h4 id="schlomo_commented_at_2023-03-07_0950"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/2952#issuecomment-1457867414">2023-03-07 09:50</a>:<a class="headerlink" href="#schlomo_commented_at_2023-03-07_0950" title="Permanent link">&para;</a></h4>
<p>@jsmeix that is exactly my point: All users of commercial backup
software will every only use <code>rear mkrescue</code> and the frequency of
running <code>mkrescue</code> is typically much more seldom (e.g. after software
and configuration rollouts) compared to the backup software taking a
backup (nightly).</p>
<p>A mismatch is therefore to be expected and that is why I'd like to
improve ReaR in a way that it won't show errors for expected situations.</p>
<h4 id="jsmeix_commented_at_2023-03-07_1046"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2952#issuecomment-1457950117">2023-03-07 10:46</a>:<a class="headerlink" href="#jsmeix_commented_at_2023-03-07_1046" title="Permanent link">&para;</a></h4>
<p>@schlomo<br />
in your particular case</p>
<pre><code>/etc/rear/local.conf
/etc/rear/os.conf
</code></pre>
<p>changed.</p>
<p>I don't know details when etc/rear/os.conf changes.<br />
I think this could be a false positive in your case<br />
but when really the OS or its version changed then<br />
it likely indicates severe problems with a recovered system<br />
when the ReaR recovery system was made on a different OS<br />
than what is in the backup.</p>
<p>When etc/rear/local.conf doesn't match it always indicates<br />
that there could be severe problems with a recovered system<br />
because the user may have changed something critical<br />
but only the user knows if this is really the case<br />
(perhaps he only added a comment).</p>
<p>Do you always get this errors or other errors of that kind?</p>
<p>In particular do you also get them when you did not change<br />
your etc/rear/local.conf between your "rear mkrescue" and<br />
making your backup (or vice versa)?</p>
<h4 id="jsmeix_commented_at_2023-03-07_1103"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2952#issuecomment-1457973233">2023-03-07 11:03</a>:<a class="headerlink" href="#jsmeix_commented_at_2023-03-07_1103" title="Permanent link">&para;</a></h4>
<p>@schlomo<br />
can you elaborate why you think</p>
<pre><code>... the MD5 checksums are sure to fail:

*  mounting by hardware IDs, e.g. serial numbers,
   disk IDs or hardware-related paths

*  different network adapters

*  updates that happened between creating the backup
   and taking the mkrescue
</code></pre>
<p>I don't see why failing MD5 checksums<br />
in those cases will always be false alarm.</p>
<p>See<br />
<a href="https://github.com/rear/rear/issues/2785#issuecomment-1091782697">https://github.com/rear/rear/issues/2785#issuecomment-1091782697</a><br />
and<br />
<a href="https://github.com/rear/rear/issues/2787#issue-1196066263">https://github.com/rear/rear/issues/2787#issue-1196066263</a></p>
<p>Summary (excerpts) from both:</p>
<pre><code>change the UUID of the ... partition
...
The rescue is built everytime the layout changes
...
But the /etc/fstab file that will be used
during the recover ... is still the one in the backup
thus the old one with old UUID.
And the patch will fail ... (without a warning :D).
And the system will not boot.
</code></pre>
<p>The crucial part therein is</p>
<pre><code>without a warning
</code></pre>
<p><a href="https://github.com/rear/rear/pull/2795">https://github.com/rear/rear/pull/2795</a><br />
implements such a "warning" but in compliance with<br />
<a href="https://schlomo.schapiro.org/2015/04/warning-is-waste-of-my-time.html">https://schlomo.schapiro.org/2015/04/warning-is-waste-of-my-time.html</a></p>
<h4 id="jsmeix_commented_at_2023-03-07_1233"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2952#issuecomment-1458094671">2023-03-07 12:33</a>:<a class="headerlink" href="#jsmeix_commented_at_2023-03-07_1233" title="Permanent link">&para;</a></h4>
<p>I think the main reason why this error message lines<br />
look confusing is that context is missing what it means<br />
in particular because it looks related to the<br />
"Recreating directories" step before.</p>
<p>So instead of</p>
<pre><code>Recreating directories ...
/etc/rear/local.conf: FAILED
/etc/rear/os.conf: FAILED
md5sum: WARNING: 2 computed checksums did NOT match
Error: Restored files do not match the recreated system in /mnt/local
Migrating disk-by-id mappings in certain restored files ...
</code></pre>
<p>a more comprehensible output could be like</p>
<pre><code>Recreating directories ...
Checking if restored files may not match the recreated system
/etc/rear/local.conf: FAILED
/etc/rear/os.conf: FAILED
md5sum: WARNING: 2 computed checksums did NOT match
Error: Restored files do not match the recreated system in /mnt/local
Migrating disk-by-id mappings in certain restored files ...
</code></pre>
<h4 id="jsmeix_commented_at_2023-03-07_1248"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2952#issuecomment-1458114247">2023-03-07 12:48</a>:<a class="headerlink" href="#jsmeix_commented_at_2023-03-07_1248" title="Permanent link">&para;</a></h4>
<p>See my initial proposal to make it<br />
at least look more comprehensible:<br />
<a href="https://github.com/rear/rear/pull/2954">https://github.com/rear/rear/pull/2954</a><br />
therein see<br />
<a href="https://github.com/rear/rear/pull/2954/commits/50885c1963d0787f1e45f14ad983141e61d12654">https://github.com/rear/rear/pull/2954/commits/50885c1963d0787f1e45f14ad983141e61d12654</a></p>
<h4 id="jsmeix_commented_at_2023-03-07_1327"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2952#issuecomment-1458171837">2023-03-07 13:27</a>:<a class="headerlink" href="#jsmeix_commented_at_2023-03-07_1327" title="Permanent link">&para;</a></h4>
<p>I made another proposal via<br />
<a href="https://github.com/rear/rear/pull/2954/commits/2507822e9841bae97fd4408f9dfc0087fe495fca">https://github.com/rear/rear/pull/2954/commits/2507822e9841bae97fd4408f9dfc0087fe495fca</a><br />
for better user messages in finalize/default/060_compare_files.sh</p>
<p>With this it should look like</p>
<pre><code>Recreating directories ...
Error: Restored files do not match the recreated system in /mnt/local
  /etc/rear/local.conf: FAILED
  /etc/rear/os.conf: FAILED
  md5sum: WARNING: 2 computed checksums did NOT match
Migrating disk-by-id mappings in certain restored files ...
</code></pre>
<p>This is not yet tested.</p>
<h4 id="pcahyna_commented_at_2023-03-08_1554"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2952#issuecomment-1460390410">2023-03-08 15:54</a>:<a class="headerlink" href="#pcahyna_commented_at_2023-03-08_1554" title="Permanent link">&para;</a></h4>
<p>Let me add more info about the purpose of the check (I believe I still
remember it quite well). I think @jsmeix is right here but perhaps not
clear enough.</p>
<p>@schlomo</p>
<blockquote>
<p>Also, maybe "checking if we should run <code>mkrescue</code> again" is a
completely different problem from "is there a problem with the
recovered system" so that we shouldn't use the same set of checksums
for that?</p>
</blockquote>
<p>The idea behind this check is to check for problems that may arise
because we should have run <code>mkrescue</code> again, but we have not. So it is
not a completely different problem - it is the same problem detected at
different times. That's why it uses the same set of checksums - it is
deliberate.</p>
<blockquote>
<p>Some more examples where the MD5 checksums are sure to fail:</p>
<ul>
<li>mounting by hardware IDs, e.g. serial numbers, disk IDs or
    hardware-related paths</li>
<li>different network adapters</li>
<li>updates that happened between creating the backup and taking the
    mkrescue</li>
</ul>
</blockquote>
<p>They should not fail in this case, because the check happens before
patching the files to change the hardware IDs to the new values (the
restored backup should contain the original values and the checksums
have also been calculated with the original values). Indeed, if the
check fails, it indicates that this subsequent patching of hardware IDs
in the files will fail (potentially serious problem! - as @jsmeix said)
and this was originally the main reason for introducing the check,
IIRC.<br />
Not sure about network adapters, but I think the same reasoning applies
(maybe the problem is less serious if detected, but should not normally
occur either).<br />
Concerning updates, I don't know, do they often lead to a checksum
mismatch in the files concerned?</p>
<blockquote>
<p>All of that is because we use the MD5 checksums stored in the rescue
image to check content of the restored backup, and they are in my
experience much less tightly coupled.</p>
</blockquote>
<p>Unfortunately they <em>are</em> coupled, because the restored files (from
backup) are to be patched using rules stored in the rescue image. That's
the point.</p>
<blockquote>
<p>All users of commercial backup software will every only use rear
mkrescue and the frequency of running mkrescue is typically much more
seldom (e.g. after software and configuration rollouts) compared to
the backup software taking a backup (nightly).</p>
<p>A mismatch is therefore to be expected and that is why I'd like to
improve ReaR in a way that it won't show errors for expected
situations.</p>
</blockquote>
<p>It may happen often in this situation, but it is not "expected" (in the
sense of being harmless) IMO. It indicated that one should have executed
"mkrescue" more often.</p>
<h4 id="pcahyna_commented_at_2023-03-08_1602"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2952#issuecomment-1460412708">2023-03-08 16:02</a>:<a class="headerlink" href="#pcahyna_commented_at_2023-03-08_1602" title="Permanent link">&para;</a></h4>
<blockquote>
<p>For example, it containt not only the disk layout related configs but
also ReaR configuration</p>
</blockquote>
<p>I believe this is because ReaR configuration may refer to disks (for
example, in the include/exclude rules), so it is also a "disk layout
related config".</p>
<blockquote>
<p>and even backup software configuration (for TSM, FDRUPSTREAM and soon
also GALAXY11).</p>
</blockquote>
<p>Not sure here, but isn't it a potential problem if the backup was
restored using a different backup software configuration than the one it
was made with?</p>
<h4 id="jsmeix_commented_at_2023-03-09_1224"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2952#issuecomment-1461950084">2023-03-09 12:24</a>:<a class="headerlink" href="#jsmeix_commented_at_2023-03-09_1224" title="Permanent link">&para;</a></h4>
<p>In particular regarding changed /etc/rear/* files:</p>
<p>I noticed my offhanded gut feeling reasoning at that time in<br />
<a href="https://github.com/rear/rear/pull/2795#issuecomment-1113124577">https://github.com/rear/rear/pull/2795#issuecomment-1113124577</a><br />
which mentiones in particular the section<br />
"Relax-and-Recover versus backup and restore" in<br />
<a href="https://en.opensuse.org/SDB:Disaster_Recovery">https://en.opensuse.org/SDB:Disaster_Recovery</a><br />
(excerpt)</p>
<pre><code>It is your task to ensure your backup is consistent.
First and foremost the files in your backup
must be consistent with the data that is stored
in your ReaR recovery system (in particular what
is stored to recreate the storage in files like
var/lib/rear/layout/disklayout.conf) because
ReaR will recreate the storage (disk partitions
with filesystems and mount points) with the data
that is stored in the ReaR recovery system and
then it restores the files from the backup into
the recreated storage which means in particular
restored config files must match the actually
recreated system (e.g. the contents of the
restored etc/fstab must match the actually
recreated disk layout).
Therefore after each change of the basic system
(in particular after a change of the disk layout)
"rear mkbackup" needs to be run to create
a new ReaR recovery system together with a
matching new backup of the files.
</code></pre>
<h4 id="jsmeix_commented_at_2023-03-16_1222"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2952#issuecomment-1471860338">2023-03-16 12:22</a>:<a class="headerlink" href="#jsmeix_commented_at_2023-03-16_1222" title="Permanent link">&para;</a></h4>
<p>With
<a href="https://github.com/rear/rear/pull/2954">https://github.com/rear/rear/pull/2954</a>
merged<br />
this issue should be solved at least to some reasonable extent<br />
which does not mean there cannot be further improvements but<br />
those should then happen as separated issues and pull requests.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2024 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2023-03-05.2952.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
