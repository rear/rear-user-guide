<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#2118 Issue closed: After booting from rear iso, it does not show testing server hard disk - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#2118 Issue closed: After booting from rear iso, it does not show testing server hard disk";
        var mkdocs_page_input_path = "issues/2019-04-12.2118.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
      <li class="breadcrumb-item active">#2118 Issue closed: After booting from rear iso, it does not show testing server hard disk</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="2118_issue_closed_after_booting_from_rear_iso_it_does_not_show_testing_server_hard_disk"><a href="https://github.com/rear/rear/issues/2118">#2118 Issue</a> <code>closed</code>: After booting from rear iso, it does not show testing server hard disk<a class="headerlink" href="#2118_issue_closed_after_booting_from_rear_iso_it_does_not_show_testing_server_hard_disk" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>support / question</code>, <code>special hardware or VM</code>,
<code>no-issue-activity</code></p>
<h4 id="samurdhi_opened_issue_at_2019-04-12_1913"><img src="https://avatars.githubusercontent.com/u/36687647?v=4" width="50"><a href="https://github.com/samurdhi">samurdhi</a> opened issue at <a href="https://github.com/rear/rear/issues/2118">2019-04-12 19:13</a>:<a class="headerlink" href="#samurdhi_opened_issue_at_2019-04-12_1913" title="Permanent link">&para;</a></h4>
<h4 id="relax-and-recover_rear_issue_template">Relax-and-Recover (ReaR) Issue Template<a class="headerlink" href="#relax-and-recover_rear_issue_template" title="Permanent link">&para;</a></h4>
<p>Fill in the following items before submitting a new issue<br />
(quick response is not guaranteed with free support):</p>
<ul>
<li>ReaR version ("/usr/sbin/rear -V"):</li>
</ul>
<!-- -->

<pre><code>[root@edda rear]# rear -V
Relax-and-Recover 2.4 / 2018-06-21
[root@edda rear]#
</code></pre>
<ul>
<li>OS version ("cat /etc/rear/os.conf" or "lsb_release -a" or "cat
    /etc/os-release"):</li>
</ul>
<!-- -->

<pre><code>[root@edda rear]# cat /etc/oracle-release 
Oracle Linux Server release 6.4
[root@edda rear]#
</code></pre>
<ul>
<li>ReaR configuration files ("cat /etc/rear/site.conf" and/or "cat
    /etc/rear/local.conf"):</li>
</ul>
<!-- -->

<pre><code>OUTPUT=ISO
OUTPUT_OPTIONS="nfsvers=3,nolock"
OUTPUT_URL=file:///home/rear

BACKUP=NETFS
BACKUP_OPTIONS="nfsvers=3,nolock"
BACKUP_URL=file:///home/rear

REQUIRED_PROGS=( "${REQUIRED_PROGS[@]}" lsblk vim )
BACKUP_PROG_EXCLUDE=( ${BACKUP_PROG_EXCLUDE[@]} '/home/rear/*' '/tmp/*' )
ONLY_INCLUDE_VG=( "vg_edda" )
EXCLUDE_COMPONENTS=( "${EXCLUDE_COMPONENTS[@]}" "fs:/dev/sdb" )
</code></pre>
<ul>
<li>Hardware (PC or PowerNV BareMetal or ARM) or virtual machine (KVM
    guest or PoverVM LPAR):</li>
</ul>
<p>Intel Physical Server: HP ProLiant DL380 Gen9</p>
<ul>
<li>System architecture (x86 compatible or PPC64/PPC64LE or what exact
    ARM device):</li>
</ul>
<p>x86</p>
<ul>
<li>Firmware (BIOS or UEFI or Open Firmware) and bootloader (GRUB or
    ELILO or Petitboot):</li>
</ul>
<p>UEFI</p>
<ul>
<li>Storage (local disk or SSD) and/or SAN (FC or iSCSI or FCoE) and/or
    multipath (DM or NVMe):</li>
</ul>
<p>Local Disk</p>
<ul>
<li>Description of the issue (ideally so that others can reproduce it):</li>
</ul>
<p>I can successfully run the rear backup of this server. Then the problem
happens when I'm going to test this backup in another physical test box
(Which I'm successfully testing lots of rear images of other servers).</p>
<p>When I'm booting this test box with rear image of the server, it failed
to recover.<br />
After running "rear recover" command it get failed because it says in
target system does not have /dev/sda but this problem does not come when
I'm mounting other servers rear images.</p>
<p><img alt="pic-01" src="https://user-images.githubusercontent.com/36687647/56060760-c027e280-5d35-11e9-808b-9cdb8f4f7d8f.jpg" /></p>
<p>When I type lsblk command to see local disk in test system, it does not
show anything.</p>
<p><img alt="pic-02" src="https://user-images.githubusercontent.com/36687647/56060766-c5852d00-5d35-11e9-9fc7-c15a5b9f6784.jpg" /></p>
<ul>
<li>
<p>Workaround, if any: Not yet</p>
</li>
<li>
<p>Attachments, as applicable ("rear -D mkrescue/mkbackup/recover"
    debug log files):</p>
</li>
</ul>
<h4 id="jsmeix_commented_at_2019-04-15_1017"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2118#issuecomment-483193976">2019-04-15 10:17</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-04-15_1017" title="Permanent link">&para;</a></h4>
<p>@samurdhi<br />
I have no real good idea what the reason could be<br />
when on a <code>Intel Physical Server: HP ProLiant DL380 Gen9</code><br />
its <code>Local Disk</code> is not available for the kernel.</p>
<p>I guess there is something special on HP ProLiant<br />
but I do not use or have any HP ProLiant system.</p>
<p>I think when there is no device node (like /dev/sda) for the local
disk<br />
that local disk needs a special kernel module to be loaded.</p>
<p>Usually kernel modules for local disks get loaded automatically<br />
provided the needed kernel modules are there.<br />
But by default the ReaR recovery system does not include all kernel
modules<br />
so that special kernel modules could be missing in the recovery system,
cf.<br />
<a href="https://github.com/rear/rear/issues/1202">https://github.com/rear/rear/issues/1202</a></p>
<p>In particular when you use the ReaR recovery system<br />
on not 100% compatible replacement hardware,<br />
cf. "Fully compatible replacement hardware is needed"<br />
in
<a href="https://en.opensuse.org/SDB:Disaster_Recovery">https://en.opensuse.org/SDB:Disaster_Recovery</a><br />
you usually need to specify in etc/rear/local.conf</p>
<pre><code>MODULES=( 'all_modules' )
</code></pre>
<p>see its documentation in usr/share/rear/conf/default.conf</p>
<p>By the way: <code>MODULES=( 'all_modules' )</code><br />
will be the default in the upcoming ReaR 2.5<br />
cf.
<a href="https://github.com/rear/rear/issues/2041">https://github.com/rear/rear/issues/2041</a><br />
and
<a href="https://github.com/rear/rear/pull/2069">https://github.com/rear/rear/pull/2069</a></p>
<h4 id="samurdhi_commented_at_2019-04-15_1439"><img src="https://avatars.githubusercontent.com/u/36687647?v=4" width="50"><a href="https://github.com/samurdhi">samurdhi</a> commented at <a href="https://github.com/rear/rear/issues/2118#issuecomment-483279474">2019-04-15 14:39</a>:<a class="headerlink" href="#samurdhi_commented_at_2019-04-15_1439" title="Permanent link">&para;</a></h4>
<p>@jsmeix</p>
<p>Thanks, Jsmeix for your reply.<br />
I have updated local.conf file and included line (MODULES=(
'all_modules' )) and then took a new rear image. Then I boot my
recovery testing server with this image and no luck.<br />
Still I'm unable to see any internal disks,</p>
<p><img alt="pic-01" src="https://user-images.githubusercontent.com/36687647/56141387-b76c2200-5f6a-11e9-8ff9-2cfe5e5cff48.JPG" /></p>
<h4 id="jsmeix_commented_at_2019-04-24_1000"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2118#issuecomment-486156645">2019-04-24 10:00</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-04-24_1000" title="Permanent link">&para;</a></h4>
<p>@samurdhi<br />
I am afraid, I have neither a further good idea what might help here<br />
nor can I imagine what the reason could be why there is<br />
no device node for the local disk in the ReaR recovery system.</p>
<p>In your initial description<br />
<a href="https://github.com/rear/rear/issues/2118#issue-432707046">https://github.com/rear/rear/issues/2118#issue-432707046</a><br />
you wrote that you have a <code>HP ProLiant DL380 Gen9</code>.<br />
I guess that is where your original system runs.<br />
But you did not write what exactly your <code>another physical test box</code>
is.<br />
Is that also a <code>HP ProLiant DL380 Gen9</code> or something different?<br />
If it is different, what exactly is that <code>another physical test box</code>?</p>
<p>Some blind shots into the dark:</p>
<p>When you boot another installation system on that
<code>another physical test box</code><br />
e.g. an Oracle Linux Server release 6.4 installation system<br />
or a Linux distribution installation system - preferably the matching
RHEL 6.4<br />
according to "Release history" in
<a href="https://en.wikipedia.org/wiki/Oracle_Linux">https://en.wikipedia.org/wiki/Oracle_Linux</a><br />
is then a device node for the local disk in those installation systems?</p>
<p>Because you are<br />
<code>successfully testing lots of rear images of other servers</code><br />
on that <code>another physical test box</code>:<br />
What Linux systems do you use on that <code>other servers</code>?</p>
<p>Perhaps it helps to enforce loading of all kernel modules that are
loaded<br />
on the original system where "rear mkbackup/mkrescue" was run<br />
also in the ReaR recovery system via</p>
<pre><code>MODULES_LOAD=( first_module second_module ... )
</code></pre>
<p>You may use a command like</p>
<pre><code># tac /proc/modules | cut -d ' ' -f1
</code></pre>
<p>to get the currently loaded modules in the right ordering<br />
for <code>MODULES_LOAD</code> i.e. the first loaded module first.<br />
But loading all kernel modules of the original system<br />
in the ReaR recovery system may totally fail when the<br />
ReaR recovery system hardware is too different compared<br />
to the original system hardware.</p>
<p>To better see what happens during ReaR recovery system startup<br />
add the kernel command line option <code>debug</code>.<br />
When you are in boot menu of the ReaR recovery system<br />
select the topmost entry</p>
<pre><code>Recover host_name_of_your_original_system
</code></pre>
<p>and then press the <code>Tab</code> key to edit the kernel command line<br />
where you can append <code>debug</code> (separated with a space).<br />
This lets the ReaR recovery system startup scripts<br />
run one by one (you need to press <code>Enter</code> to start each one)<br />
where each one is run with 'set -x' so that it prints the commands<br />
and their arguments as they are executed.<br />
Perhaps you can detect something suspicious?</p>
<p>My reasoning behind is:<br />
In the ReaR recovery system the exact same kernel is run as<br />
on the original system where "rear mkbackup/mkrescue" was run.<br />
With <code>MODULES=( 'all_modules' )</code> you get the exact same kernel<br />
and all its kernel modules in the ReaR recovery system as on the<br />
original system where "rear mkbackup/mkrescue" was run.<br />
When there is no device node for the local disk in the ReaR recovery
system<br />
on <code>another physical test box</code> it means - as far as I can imagine -
that<br />
the kernel with all its kernel modules from the original system<br />
does not work on that <code>another physical test box</code>.<br />
Accordingly I think the original system and that
<code>another physical test box</code><br />
must somehow differ so that the kernel with all its kernel modules from
the<br />
original system does not work on that <code>another physical test box</code>.</p>
<h4 id="github-actions_commented_at_2020-06-27_0133"><img src="https://avatars.githubusercontent.com/in/15368?v=4" width="50"><a href="https://github.com/apps/github-actions">github-actions</a> commented at <a href="https://github.com/rear/rear/issues/2118#issuecomment-650470498">2020-06-27 01:33</a>:<a class="headerlink" href="#github-actions_commented_at_2020-06-27_0133" title="Permanent link">&para;</a></h4>
<p>Stale issue message</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2023 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2019-04-12.2118.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
