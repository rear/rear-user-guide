<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#335 Issue closed: Error in a recover operation with Debian and rear 1.14 - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#335 Issue closed: Error in a recover operation with Debian and rear 1.14";
        var mkdocs_page_input_path = "issues/2013-11-22.335.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_nas.html">Internal Backup with tar to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_rsync.html">Internal Backup with rsync to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/rsync.html">External Backup using BACKUP=RSYNC method</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/rbme.html">External Backup using RBME</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/restic.html">External Backup using restic</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/duplicity.html">External Backup using duplicity</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../development/squash-git-log-commments.html">How to squash git log comments into one line</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#335 Issue closed: Error in a recover operation with Debian and rear 1.14</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="335_issue_closed_error_in_a_recover_operation_with_debian_and_rear_114"><a href="https://github.com/rear/rear/issues/335">#335 Issue</a> <code>closed</code>: Error in a recover operation with Debian and rear 1.14<a class="headerlink" href="#335_issue_closed_error_in_a_recover_operation_with_debian_and_rear_114" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>documentation</code></p>
<h4 id="vincentcegedim_opened_issue_at_2013-11-22_1126"><img src="https://avatars.githubusercontent.com/u/6009598?v=4" width="50"><a href="https://github.com/vincentCegedim">vincentCegedim</a> opened issue at <a href="https://github.com/rear/rear/issues/335">2013-11-22 11:26</a>:<a class="headerlink" href="#vincentcegedim_opened_issue_at_2013-11-22_1126" title="Permanent link">&para;</a></h4>
<p>Hi,<br />
I have a big trouble restoring a Debian 7.1 machine with rear 1.14;
partitionning the disk fails if destination disk is bigger than original
one. In this case, it seems that logical partition is made too small to
contain LVM one.<br />
If disk has the same size, it works fine.</p>
<p>But anyway, thank you for that wonderful piece of code that saves me
multiple times<br />
Vincent</p>
<h4 id="jhoekx_commented_at_2013-11-22_1147"><img src="https://avatars.githubusercontent.com/u/783473?v=4" width="50"><a href="https://github.com/jhoekx">jhoekx</a> commented at <a href="https://github.com/rear/rear/issues/335#issuecomment-29067008">2013-11-22 11:47</a>:<a class="headerlink" href="#jhoekx_commented_at_2013-11-22_1147" title="Permanent link">&para;</a></h4>
<p>Can you post the /var/lib/rear/layout/disklayout.conf file and the
<code>rear -D recover</code> logfile?</p>
<p>If the destination disk is smaller, then it's possible that LVM fails.
When it's larger, it should only increase the size.</p>
<h4 id="vincentcegedim_commented_at_2013-11-22_1229"><img src="https://avatars.githubusercontent.com/u/6009598?v=4" width="50"><a href="https://github.com/vincentCegedim">vincentCegedim</a> commented at <a href="https://github.com/rear/rear/issues/335#issuecomment-29068974">2013-11-22 12:29</a>:<a class="headerlink" href="#vincentcegedim_commented_at_2013-11-22_1229" title="Permanent link">&para;</a></h4>
<p>In my exemple, the new disk was much larger (25Go =&gt; 45Go)<br />
Here the disklayout file:</p>
<pre>
disk /dev/sda 26843545600 msdos
part /dev/sda 499122176 1048576 primary boot /dev/sda1
part /dev/sda 1024 501218304 extended none /dev/sda2
part /dev/sda 26341277696 501219328 logical lvm /dev/sda5
lvmdev /dev/vgroot /dev/sda5 XeeNbl-BV4G-Clgr-TWIn-7E1b-gP0c-uEiQyW 51447808
lvmgrp /dev/vgroot 4096 6280 25722880
lvmvol /dev/vgroot lvvar 953 7806976 
lvmvol /dev/vgroot lvhome 238 1949696 
lvmvol /dev/vgroot lvopt 715 5857280 
lvmvol /dev/vgroot lvtmp 384 3145728 
lvmvol /dev/vgroot lvswap 476 3899392 
lvmvol /dev/vgroot lvroot 1907 15622144 
fs /dev/mapper/vgroot-lvroot / ext4 uuid=bd61f8d4-b5d6-49e3-9b48-26788ab2965b label= blocksize=4096 reserved_blocks=4% max_mounts=-1 check_interval=0d bytes_per_inode=16368 options=rw,relatime,errors=remount-ro,user_xattr,barrier=1,data=ordered
fs /dev/sda1 /boot ext4 uuid=ddf5cb3d-d86b-4dfd-a8b1-ff9b7e445110 label= blocksize=1024 reserved_blocks=4% max_mounts=-1 check_interval=0d bytes_per_inode=4093 options=rw,relatime,user_xattr,barrier=1,data=ordered
fs /dev/mapper/vgroot-lvhome /home ext4 uuid=25bd415d-241a-4724-b6f9-4664352cf0a5 label= blocksize=4096 reserved_blocks=4% max_mounts=-1 check_interval=0d bytes_per_inode=16384 options=rw,relatime,user_xattr,barrier=1,data=ordered
fs /dev/mapper/vgroot-lvopt /opt ext4 uuid=af751048-859e-4de9-ae14-6d4b5123c69b label= blocksize=4096 reserved_blocks=5% max_mounts=-1 check_interval=0d bytes_per_inode=16363 options=rw,relatime,user_xattr,barrier=1,data=ordered
fs /dev/mapper/vgroot-lvtmp /tmp ext4 uuid=61f06855-c6de-46f9-b250-f3b8f37b314e label= blocksize=4096 reserved_blocks=4% max_mounts=-1 check_interval=0d bytes_per_inode=17623 options=rw,relatime,user_xattr,barrier=1,data=ordered
fs /dev/mapper/vgroot-lvvar /var ext4 uuid=727dc7e2-c49d-45f8-8362-a7549bdd3f7f label= blocksize=4096 reserved_blocks=4% max_mounts=-1 check_interval=0d bytes_per_inode=16360 options=rw,relatime,user_xattr,barrier=1,data=ordered
swap /dev/mapper/vgroot-lvswap uuid=b0048c2d-3360-477f-8136-f3f820099b3d label=
</pre>

<h4 id="vincentcegedim_commented_at_2013-11-22_1257"><img src="https://avatars.githubusercontent.com/u/6009598?v=4" width="50"><a href="https://github.com/vincentCegedim">vincentCegedim</a> commented at <a href="https://github.com/rear/rear/issues/335#issuecomment-29070424">2013-11-22 12:57</a>:<a class="headerlink" href="#vincentcegedim_commented_at_2013-11-22_1257" title="Permanent link">&para;</a></h4>
<p>And some logs</p>
<pre>
+++ echo '2013-11-22 13:45:26 Creating partitions for disk /dev/sda (msdos)'
2013-11-22 13:45:26 Creating partitions for disk /dev/sda (msdos)
+++ Print 'Creating partitions for disk /dev/sda (msdos)'
+++ test 1
+++ echo -e 'Creating partitions for disk /dev/sda (msdos)'
+++ parted -s /dev/sda mklabel msdos
+++ parted -s /dev/sda mkpart primary 32768B 499154943B
Warning: The resulting partition is not properly aligned for best performance.
+++ parted -s /dev/sda set 1 boot on
+++ parted -s /dev/sda mkpart extended 499159040B 48318382079B
Warning: The resulting partition is not properly aligned for best performance.
+++ parted -s /dev/sda mkpart logical 499163136B 2646646782B
Warning: The resulting partition is not properly aligned for best performance.
+++ parted -s /dev/sda set 5 lvm on
+++ partprobe -s /dev/sda
/dev/sda: msdos partitions 1 2 <5>
[...]
2013-11-22 13:45:36 Creating LVM PV /dev/sda5
+++ Print 'Creating LVM PV /dev/sda5'
+++ test 1
+++ echo -e 'Creating LVM PV /dev/sda5'
+++ lvm vgchange -a n vgroot
  Volume group "vgroot" not found
+++ true
+++ lvm pvcreate -ff --yes -v --uuid XeeNbl-BV4G-Clgr-TWIn-7E1b-gP0c-uEiQyW --norestorefile /dev/sda5
    Set up physical volume for "/dev/sda5" with 4194304 available sectors
  Writing physical volume data to disk "/dev/sda5"
  Physical volume "/dev/sda5" successfully created
+++ component_created pv:/dev/sda5 lvmdev
+++ local device=pv:/dev/sda5
+++ local type=lvmdev
+++ local touchfile=lvmdev-pv:-dev-sda5
+++ touch /tmp/rear.eOwfN97I2KNNYF8/tmp/touch/lvmdev-pv:-dev-sda5
+++ create_component /dev/vgroot lvmgrp
+++ local device=/dev/vgroot
+++ local type=lvmgrp
+++ local touchfile=lvmgrp--dev-vgroot
+++ '[' -e /tmp/rear.eOwfN97I2KNNYF8/tmp/touch/lvmgrp--dev-vgroot ']'
+++ return 0
+++ LogPrint 'Creating LVM VG vgroot'
+++ Log 'Creating LVM VG vgroot'
+++ test 1 -gt 0
++++ Stamp
++++ date '+%Y-%m-%d %H:%M:%S '
+++ echo '2013-11-22 13:45:36 Creating LVM VG vgroot'
2013-11-22 13:45:36 Creating LVM VG vgroot
+++ Print 'Creating LVM VG vgroot'
+++ test 1
+++ echo -e 'Creating LVM VG vgroot'
+++ '[' -e /dev/vgroot ']'
+++ rm -rf /dev/vgroot
+++ lvm vgcreate --physicalextentsize 4096k vgroot /dev/sda5
  Volume group "vgroot" successfully created
+++ lvm vgchange --available y vgroot
  0 logical volume(s) in volume group "vgroot" now active
+++ component_created /dev/vgroot lvmgrp
+++ local device=/dev/vgroot
+++ local type=lvmgrp
+++ local touchfile=lvmgrp--dev-vgroot
+++ touch /tmp/rear.eOwfN97I2KNNYF8/tmp/touch/lvmgrp--dev-vgroot
+++ create_component /dev/mapper/vgroot-lvvar lvmvol
+++ local device=/dev/mapper/vgroot-lvvar
+++ local type=lvmvol
+++ local touchfile=lvmvol--dev-mapper-vgroot-lvvar
+++ '[' -e /tmp/rear.eOwfN97I2KNNYF8/tmp/touch/lvmvol--dev-mapper-vgroot-lvvar ']'
+++ return 0
+++ LogPrint 'Creating LVM volume vgroot/lvvar'
+++ Log 'Creating LVM volume vgroot/lvvar'
+++ test 1 -gt 0
++++ Stamp
++++ date '+%Y-%m-%d %H:%M:%S '
+++ echo '2013-11-22 13:45:36 Creating LVM volume vgroot/lvvar'
2013-11-22 13:45:36 Creating LVM volume vgroot/lvvar
+++ Print 'Creating LVM volume vgroot/lvvar'
+++ test 1
+++ echo -e 'Creating LVM volume vgroot/lvvar'
+++ lvm lvcreate -l 953 -n lvvar vgroot
  Volume group "vgroot" has insufficient free space (511 extents): 953 required.
++ ((  1 == 0  ))
++ LogPrint 'An error occured during layout recreation.'
++ Log 'An error occured during layout recreation.'
++ test 1 -gt 0
+++ Stamp
+++ date '+%Y-%m-%d %H:%M:%S '
++ echo '2013-11-22 13:45:36 An error occured during layout recreation.'
2013-11-22 13:45:36 An error occured during layout recreation.
</pre>

<h4 id="gdha_commented_at_2013-11-22_1751"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/335#issuecomment-29093978">2013-11-22 17:51</a>:<a class="headerlink" href="#gdha_commented_at_2013-11-22_1751" title="Permanent link">&para;</a></h4>
<p>Strange, you did not get a question about disk migration?</p>
<h4 id="vincentcegedim_commented_at_2013-11-26_0954"><img src="https://avatars.githubusercontent.com/u/6009598?v=4" width="50"><a href="https://github.com/vincentCegedim">vincentCegedim</a> commented at <a href="https://github.com/rear/rear/issues/335#issuecomment-29279578">2013-11-26 09:54</a>:<a class="headerlink" href="#vincentcegedim_commented_at_2013-11-26_0954" title="Permanent link">&para;</a></h4>
<p>Yes, I think. I cannot write here the full log file, it is too large
(21253 lines). I don't know where to put it to give you acces. If you
have an idea...</p>
<h4 id="gdha_commented_at_2013-11-26_1000"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/335#issuecomment-29279945">2013-11-26 10:00</a>:<a class="headerlink" href="#gdha_commented_at_2013-11-26_1000" title="Permanent link">&para;</a></h4>
<p>you can use gist - <a href="https://gist.github.com/">https://gist.github.com/</a>
- to attach a large file</p>
<h4 id="vincentcegedim_commented_at_2013-11-26_1642"><img src="https://avatars.githubusercontent.com/u/6009598?v=4" width="50"><a href="https://github.com/vincentCegedim">vincentCegedim</a> commented at <a href="https://github.com/rear/rear/issues/335#issuecomment-29308470">2013-11-26 16:42</a>:<a class="headerlink" href="#vincentcegedim_commented_at_2013-11-26_1642" title="Permanent link">&para;</a></h4>
<p>OK. I had to cut the file in two parts (I did not find how to simply
upload a file, I am brand new to Github).<br />
<a href="https://gist.github.com/vincentCegedim/7661422">Part 1</a><br />
<a href="https://gist.github.com/vincentCegedim/7661554">Part 2</a></p>
<h4 id="gdha_commented_at_2013-11-27_1520"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/335#issuecomment-29392113">2013-11-27 15:20</a>:<a class="headerlink" href="#gdha_commented_at_2013-11-27_1520" title="Permanent link">&para;</a></h4>
<p>Thank you for the logs - it was very useful!<br />
see script <code>layout/prepare/default/40_autoresize_disks.sh</code> and a piece
out of the 2th log from you:</p>
<pre><code>new_size=$(echo "$partition_size $resizeable_space $available_space" | awk '{ printf "%d", ($1/$2)*$3; }')

++ for data in '"${partitions[@]}"'
++ name=/dev/sda5
++ partition_size=26341277696
+++ awk '{ printf "%d", ($1/$2)*$3; }'
+++ echo '26341277696 26341278720 47819259904'
++ new_size=2147483647

echo '26341277696 26341278720 47819259904' | awk '{ printf "%d", ($1/$2)*$3; }'
47819258045
</code></pre>
<p>As you can see the math calculated on your system is wrong (don't ask me
why). The awk version I used was <code>GNU Awk 3.1.8</code></p>
<p>@jhoekx have you ever seen such behavior before? I didn't</p>
<h4 id="jhoekx_commented_at_2013-11-27_1526"><img src="https://avatars.githubusercontent.com/u/783473?v=4" width="50"><a href="https://github.com/jhoekx">jhoekx</a> commented at <a href="https://github.com/rear/rear/issues/335#issuecomment-29392654">2013-11-27 15:26</a>:<a class="headerlink" href="#jhoekx_commented_at_2013-11-27_1526" title="Permanent link">&para;</a></h4>
<p>It looks like some overflow. I was using awk because bash couldn't
handle those large numbers.</p>
<p>What's the awk version you have? Is your OS 32 or 64 bit?</p>
<p>I checked on my system (4.1.0), RHEL 5 (3.1.5 i386) and RHEL 6 (3.1.7)
and all of them are doing it correctly.</p>
<h4 id="vincentcegedim_commented_at_2013-11-27_1534"><img src="https://avatars.githubusercontent.com/u/6009598?v=4" width="50"><a href="https://github.com/vincentCegedim">vincentCegedim</a> commented at <a href="https://github.com/rear/rear/issues/335#issuecomment-29393388">2013-11-27 15:34</a>:<a class="headerlink" href="#vincentcegedim_commented_at_2013-11-27_1534" title="Permanent link">&para;</a></h4>
<p>It is a debian 7.1 64 bits.<br />
awk =&gt; Version: 1:4.0.1+dfsg-2.1</p>
<h4 id="gdha_commented_at_2013-11-27_1538"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/335#issuecomment-29393723">2013-11-27 15:38</a>:<a class="headerlink" href="#gdha_commented_at_2013-11-27_1538" title="Permanent link">&para;</a></h4>
<p>@vincentCegedim could you execute the following please?</p>
<pre><code>echo '26341277696 26341278720 47819259904' | awk '{ printf "%d", ($1/$2)*$3; }'
awk --version
</code></pre>
<h4 id="vincentcegedim_commented_at_2013-11-27_1540"><img src="https://avatars.githubusercontent.com/u/6009598?v=4" width="50"><a href="https://github.com/vincentCegedim">vincentCegedim</a> commented at <a href="https://github.com/rear/rear/issues/335#issuecomment-29393947">2013-11-27 15:40</a>:<a class="headerlink" href="#vincentcegedim_commented_at_2013-11-27_1540" title="Permanent link">&para;</a></h4>
<pre>
# echo '26341277696 26341278720 47819259904' | awk '{ printf "%d", ($1/$2)*$3; }'
2147483647
# awk --version
awk: not an option: --version
# apt-cache show gawk
Package: gawk
Version: 1:4.0.1+dfsg-2.1
Installed-Size: 2269
Maintainer: Arthur Loiret <aloiret@debian.org>
Architecture: amd64
Provides: awk
Pre-Depends: libc6 (>= 2.11), libreadline6 (>= 6.0), libsigsegv2
Suggests: gawk-doc
Description-en: GNU awk, a pattern scanning and processing language
 `awk', a program that you can use to select particular records in a
 file and perform operations upon them.
 .
 Gawk is the GNU Project's implementation of the AWK programming language.
 It conforms to the definition of the language in the POSIX 1003.2 Command
 Language And Utilities Standard. This version in turn is based on the
 description in The AWK Programming Language, by Aho, Kernighan, and
 Weinberger, with the additional features defined in the System V Release
 4 version of UNIX awk. Gawk also provides more recent Bell Labs awk
 extensions, and some GNU-specific extensions.
Multi-Arch: foreign
Homepage: http://www.gnu.org/software/gawk/
Description-md5: 0dce81fe543994c3caea814e2777732e
Tag: devel::interpreter, implemented-in::c, interface::commandline,
 role::program, scope::utility, suite::gnu, use::converting,
 use::filtering, use::scanning, works-with::text
Section: interpreters
Priority: optional
Filename: pool/main/g/gawk/gawk_4.0.1+dfsg-2.1_amd64.deb
Size: 971710
MD5sum: 984730ae49afce4befd7e31c0298a5a7
SHA1: 4d6065666181a430b961a0a6393db2562f908038
SHA256: 3e5be94893eb76d9c396e111111cf40fee63b351166e4b9735e36c4c64974540
</pre>

<h4 id="vincentcegedim_commented_at_2013-11-27_1548"><img src="https://avatars.githubusercontent.com/u/6009598?v=4" width="50"><a href="https://github.com/vincentCegedim">vincentCegedim</a> commented at <a href="https://github.com/rear/rear/issues/335#issuecomment-29394572">2013-11-27 15:48</a>:<a class="headerlink" href="#vincentcegedim_commented_at_2013-11-27_1548" title="Permanent link">&para;</a></h4>
<p>I just try an <code>apt-get install gawk</code> before retrying the
test. Here is the result</p>
<pre>
# echo '26341277696 26341278720 47819259904' | awk '{ printf "%d", ($1/$2)*$3; }'
47819258045
</pre>

<p>I do a new cycle mkrescure/recover and tell you the result.<br />
Thank you.</p>
<h4 id="gdha_commented_at_2013-11-27_1551"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/335#issuecomment-29394796">2013-11-27 15:51</a>:<a class="headerlink" href="#gdha_commented_at_2013-11-27_1551" title="Permanent link">&para;</a></h4>
<p>@vincentCegedim Did you install a new version of <code>gawk</code> ? if yes, where
was the previous <code>awk</code> coming from??</p>
<h4 id="vincentcegedim_commented_at_2013-11-27_1603"><img src="https://avatars.githubusercontent.com/u/6009598?v=4" width="50"><a href="https://github.com/vincentCegedim">vincentCegedim</a> commented at <a href="https://github.com/rear/rear/issues/335#issuecomment-29395898">2013-11-27 16:03</a>:<a class="headerlink" href="#vincentcegedim_commented_at_2013-11-27_1603" title="Permanent link">&para;</a></h4>
<p>YES ! That was it.<br />
Thank you very much for your coding expertise !</p>
<h4 id="vincentcegedim_commented_at_2013-11-27_1611"><img src="https://avatars.githubusercontent.com/u/6009598?v=4" width="50"><a href="https://github.com/vincentCegedim">vincentCegedim</a> commented at <a href="https://github.com/rear/rear/issues/335#issuecomment-29396567">2013-11-27 16:11</a>:<a class="headerlink" href="#vincentcegedim_commented_at_2013-11-27_1611" title="Permanent link">&para;</a></h4>
<p>I don't know where that awk comes from; here is what I can found on a
fresh installed debian box...</p>
<pre>
# ls -l /usr/bin/awk 
lrwxrwxrwx 1 root root 21 oct.   3 11:55 /usr/bin/awk -> /etc/alternatives/awk
# ls -l /etc/alternatives/awk
lrwxrwxrwx 1 root root 13 oct.   3 11:55 /etc/alternatives/awk -> /usr/bin/<bold>mawk</bold>
</pre>

<p>and on the gawk one</p>
<pre>
# ls -l /usr/bin/awk 
lrwxrwxrwx 1 root root 21 Nov 19 16:03 /usr/bin/awk -> /etc/alternatives/awk
# ls -l /etc/alternatives/awk
lrwxrwxrwx 1 root root 13 Nov 27 16:46 /etc/alternatives/awk -> /usr/bin/gawk
</pre>

<h4 id="schlomo_commented_at_2013-11-27_2130"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/335#issuecomment-29421718">2013-11-27 21:30</a>:<a class="headerlink" href="#schlomo_commented_at_2013-11-27_2130" title="Permanent link">&para;</a></h4>
<p>That is why we love Debian :-) Maybe we should be calling gawk instead
of<br />
awk? And depend on the package? After all we also depend on bash and
don't<br />
support dash...</p>
<p>On 27 November 2013 17:11, vincentCegedim <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;">&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a>
wrote:</p>
<blockquote>
<p>I don't know where that awk comes from; here is what I can found on
a<br />
fresh installed debian box...</p>
<h1 id="ls_-l_usrbinawk">ls -l /usr/bin/awk<a class="headerlink" href="#ls_-l_usrbinawk" title="Permanent link">&para;</a></h1>
<p>lrwxrwxrwx 1 root root 21 oct. 3 11:55 /usr/bin/awk -&gt;
/etc/alternatives/awk</p>
<h1 id="ls_-l_etcalternativesawk">ls -l /etc/alternatives/awk<a class="headerlink" href="#ls_-l_etcalternativesawk" title="Permanent link">&para;</a></h1>
<p>lrwxrwxrwx 1 root root 13 oct. 3 11:55 /etc/alternatives/awk -&gt;
/usr/bin/mawk</p>
<p>and on the gawk one</p>
<h1 id="ls_-l_usrbinawk_1">ls -l /usr/bin/awk<a class="headerlink" href="#ls_-l_usrbinawk_1" title="Permanent link">&para;</a></h1>
<p>lrwxrwxrwx 1 root root 21 Nov 19 16:03 /usr/bin/awk -&gt;
/etc/alternatives/awk</p>
<h1 id="ls_-l_etcalternativesawk_1">ls -l /etc/alternatives/awk<a class="headerlink" href="#ls_-l_etcalternativesawk_1" title="Permanent link">&para;</a></h1>
<p>lrwxrwxrwx 1 root root 13 Nov 27 16:46 /etc/alternatives/awk -&gt;
/usr/bin/gawk</p>
<p>—<br />
Reply to this email directly or view it on
GitHubhttps://github.com/rear/rear/issues/335#issuecomment-29396567<br />
.</p>
</blockquote>
<h4 id="gdha_commented_at_2013-11-28_0724"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/335#issuecomment-29444417">2013-11-28 07:24</a>:<a class="headerlink" href="#gdha_commented_at_2013-11-28_0724" title="Permanent link">&para;</a></h4>
<p>submitted a case at
<a href="https://code.google.com/p/original-mawk/issues/detail?id=23">https://code.google.com/p/original-mawk/issues/detail?id=23</a>
(mawk maintainer for this issue)</p>
<p>answer from mawk member:</p>
<pre><code>This is a known limitation: mawk's format for %d is limited by the format.
The limitation is done to improve performance.

You can get more precision using one of the floating formats (and can construct
one which prints like a %d, e.g., by putting a ".0" on the end of the format).
</code></pre>
<h4 id="gdha_commented_at_2013-12-10_0811"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/335#issuecomment-30206473">2013-12-10 08:11</a>:<a class="headerlink" href="#gdha_commented_at_2013-12-10_0811" title="Permanent link">&para;</a></h4>
<p>@schlomo should we add the following the spec file?</p>
<pre><code>### Dependencies on all distributions
Requires: gawk
</code></pre>
<h4 id="schlomo_commented_at_2013-12-10_0900"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/335#issuecomment-30208950">2013-12-10 09:00</a>:<a class="headerlink" href="#schlomo_commented_at_2013-12-10_0900" title="Permanent link">&para;</a></h4>
<p>IMHO yes as we need GNU awk and not any other</p>
<p>On 10 December 2013 09:11, gdha <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;">&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a> wrote:</p>
<blockquote>
<p>@schlomo <a href="https://github.com/schlomo">https://github.com/schlomo</a>
should we add the following the<br />
spec file?</p>
<h3 id="dependencies_on_all_distributions">Dependencies on all distributions<a class="headerlink" href="#dependencies_on_all_distributions" title="Permanent link">&para;</a></h3>
<p>Requires: gawk</p>
<p>—<br />
Reply to this email directly or view it on
GitHubhttps://github.com/rear/rear/issues/335#issuecomment-30206473<br />
.</p>
</blockquote>
<h4 id="gdha_commented_at_2014-06-06_0729"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/335#issuecomment-45310096">2014-06-06 07:29</a>:<a class="headerlink" href="#gdha_commented_at_2014-06-06_0729" title="Permanent link">&para;</a></h4>
<p>Just for completeness
<a href="https://code.google.com/p/original-mawk/issues/detail?id=23">https://code.google.com/p/original-mawk/issues/detail?id=23</a>
status changed to "wont fix"</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2025 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2013-11-22.335.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
