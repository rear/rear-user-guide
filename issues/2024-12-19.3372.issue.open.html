<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#3372 Issue open: Invalid partition? - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#3372 Issue open: Invalid partition?";
        var mkdocs_page_input_path = "issues/2024-12-19.3372.issue.open.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#3372 Issue open: Invalid partition?</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="3372_issue_open_invalid_partition"><a href="https://github.com/rear/rear/issues/3372">#3372 Issue</a> <code>open</code>: Invalid partition?<a class="headerlink" href="#3372_issue_open_invalid_partition" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>support / question</code></p>
<h4 id="frustratedsignup_opened_issue_at_2024-12-19_2014"><img src="https://avatars.githubusercontent.com/u/192264279?v=4" width="50"><a href="https://github.com/frustratedsignup">frustratedsignup</a> opened issue at <a href="https://github.com/rear/rear/issues/3372">2024-12-19 20:14</a>:<a class="headerlink" href="#frustratedsignup_opened_issue_at_2024-12-19_2014" title="Permanent link">&para;</a></h4>
<!-- Relax-and-Recover (ReaR) Issue Template
Fill in the following items when submitting a new issue.
Use GitHub Markdown, see "Basic writing and formatting syntax" on
https://docs.github.com/en/get-started/writing-on-github
Support is voluntary without guarantee/warranty/liability -->

<ul>
<li>
<p>ReaR version ("/usr/sbin/rear -V"):<br />
    Relax-and-Recover 2.7 / Git</p>
</li>
<li>
<p>If your ReaR version is not the current version, explain why you
    can't upgrade:</p>
</li>
<li>
<p>OS version ("cat /etc/os-release" or "lsb_release -a" or "cat
    /etc/rear/os.conf"):<br />
    Red Hat Enterprise Linux Server release 6.6 (Santiago)</p>
</li>
<li>
<p>ReaR configuration files ("cat /etc/rear/site.conf" and/or "cat
    /etc/rear/local.conf"):<br />
    OUTPUT=USB<br />
    BACKUP=NBU</p>
</li>
</ul>
<h3 id="write_rescue_image_to_the_device_labeled_rear-000">write rescue image to the device labeled REAR-000<a class="headerlink" href="#write_rescue_image_to_the_device_labeled_rear-000" title="Permanent link">&para;</a></h3>
<p>BACKUP_URL=usb:///dev/disk/by-label/REAR-000</p>
<ul>
<li>
<p>Hardware vendor/product (PC or PowerNV BareMetal or ARM) or VM (KVM
    guest or PowerVM LPAR):<br />
    VMware VM</p>
</li>
<li>
<p>System architecture (x86 compatible or PPC64/PPC64LE or what exact
    ARM device):<br />
    x86_64</p>
</li>
<li>
<p>Firmware (BIOS or UEFI or Open Firmware) and bootloader (GRUB or
    ELILO or Petitboot):<br />
    Should be a BIOS boot with grub</p>
</li>
<li>
<p>Storage (local disk or SSD) and/or SAN (FC or iSCSI or FCoE) and/or
    multipath (DM or NVMe):<br />
    Virtual hard drive</p>
</li>
<li>
<p>Storage layout ("lsblk -ipo
    NAME,KNAME,PKNAME,TRAN,TYPE,FSTYPE,LABEL,SIZE,MOUNTPOINT"):<br />
    My copy of lsblk does not support the '-p' option.</p>
</li>
<li>
<p>Description of the issue (ideally so that others can reproduce
    it):<br />
    Unable to do a mkrescue operation. Output is as follows:</p>
</li>
</ul>
<p>[root@sas02 rear-master]# more var/log/rear/rear-sas02.log<br />
2024-12-19 13:07:25.107859736 Relax-and-Recover 2.7 / Git<br />
2024-12-19 13:07:25.110085451 Running rear mkrescue (PID 2906 date
2024-12-19 13:07:24)<br />
2024-12-19 13:07:25.112386877 Using log file:
/home/CTCC/drsmith/src/rear-master/var/log/rear/rear-sas02.log<br />
2024-12-19 13:07:25.124259441 Including conf/Linux-i386.conf<br />
2024-12-19 13:07:25.126598355 Including conf/GNU/Linux.conf<br />
2024-12-19 13:07:25.152753100 Including
/home/CTCC/drsmith/src/rear-master/etc/rear/site.conf<br />
2024-12-19 13:07:25.156282201 Including
/home/CTCC/drsmith/src/rear-master/etc/rear/local.conf<br />
2024-12-19 13:07:25.159899381 ======================<br />
2024-12-19 13:07:25.162038281 Running 'init' stage<br />
2024-12-19 13:07:25.164174317 ======================<br />
2024-12-19 13:07:25.170762594 Including
init/default/001_verify_config_arrays.sh<br />
2024-12-19 13:07:25.569947922 Including
init/default/002_check_rear_recover_mode.sh<br />
2024-12-19 13:07:25.572606618 Running workflow mkrescue on the
normal/original system<br />
2024-12-19 13:07:25.576675230 Including
init/default/010_EFISTUB_check.sh<br />
2024-12-19 13:07:25.580698053 Including
init/default/010_set_drlm_env.sh<br />
2024-12-19 13:07:25.584710260 Including
init/default/030_update_recovery_system.sh<br />
2024-12-19 13:07:25.591197897 Including
init/default/100_check_stale_nfs_mounts.sh<br />
2024-12-19 13:07:25.602321822 Including
init/default/950_check_missing_programs.sh<br />
2024-12-19 13:07:25.609178003 Including
init/default/998_dump_variables.sh<br />
2024-12-19 13:07:25.614792161 Finished running 'init' stage in 0
seconds<br />
2024-12-19 13:07:25.618884617 Running mkrescue workflow<br />
2024-12-19 13:07:25.621292472 ======================<br />
2024-12-19 13:07:25.623515102 Running 'prep' stage<br />
2024-12-19 13:07:25.625722643 ======================<br />
2024-12-19 13:07:25.632862979 Including
prep/default/005_remove_workflow_conf.sh<br />
2024-12-19 13:07:25.637974940 Including
prep/default/020_translate_url.sh<br />
2024-12-19 13:07:25.642085132 Including
prep/default/030_translate_tape.sh<br />
2024-12-19 13:07:25.647480445 Including
prep/default/035_valid_backup_methods.sh<br />
2024-12-19 13:07:25.651533160 Including
prep/default/036_valid_output_methods.sh<br />
2024-12-19 13:07:25.655884156 Including
prep/default/040_check_backup_and_output_scheme.sh<br />
2024-12-19 13:07:25.663350164 Including
prep/USB/default/040_set_NETFS_requirements.sh<br />
2024-12-19 13:07:25.667841339 Including
prep/default/050_check_keep_old_output_copy_var.sh<br />
2024-12-19 13:07:25.672120319 Including
prep/USB/default/060_set_usb_device.sh<br />
2024-12-19 13:07:25.681060256 Including
prep/default/100_init_workflow_conf.sh<br />
2024-12-19 13:07:25.686015820 Including
prep/GNU/Linux/200_include_getty.sh<br />
2024-12-19 13:07:25.709732240 Including
prep/GNU/Linux/200_include_serial_console.sh<br />
2024-12-19 13:07:25.715973644 Including
prep/GNU/Linux/210_include_dhclient.sh<br />
2024-12-19 13:07:25.744163978 No DHCP client could be auto-detected:
DHCP will not be enabled on the rescue system<br />
2024-12-19 13:07:25.748475812 Including
prep/GNU/Linux/220_include_lvm_tools.sh<br />
2024-12-19 13:07:25.751735683 Device mapper found enabled. Including LVM
tools.<br />
2024-12-19 13:07:25.816136398 Including
prep/GNU/Linux/230_include_md_tools.sh<br />
2024-12-19 13:07:25.821153849 Including
prep/GNU/Linux/240_include_multipath_tools.sh<br />
2024-12-19 13:07:25.825496094 Including
prep/GNU/Linux/280_include_systemd.sh<br />
2024-12-19 13:07:25.837224592 Including
prep/GNU/Linux/280_include_virtualbox.sh<br />
2024-12-19 13:07:25.850743188 Including
prep/GNU/Linux/280_include_vmware_tools.sh<br />
2024-12-19 13:07:25.855906379 Including
prep/GNU/Linux/290_include_drbd.sh<br />
2024-12-19 13:07:25.861042375 Including
prep/GNU/Linux/300_check_backup_and_output_url.sh<br />
2024-12-19 13:07:25.870428880 Including
prep/GNU/Linux/300_include_grub_tools.sh<br />
2024-12-19 13:07:25.875287746 Including
prep/GNU/Linux/310_include_cap_utils.sh<br />
2024-12-19 13:07:25.879653209 Including
prep/default/320_include_uefi_env.sh<br />
2024-12-19 13:07:25.893707478 Including
prep/default/321_EFISTUB_check_uefi_env.sh<br />
2024-12-19 13:07:25.898016588 Including
prep/default/330_include_uefi_tools.sh<br />
2024-12-19 13:07:25.902348800 Including
prep/Linux-i386/330_set_efi_arch.sh<br />
2024-12-19 13:07:25.906836158 Including
prep/USB/Linux-i386/340_find_mbr_bin.sh<br />
2024-12-19 13:07:25.926904414 ERROR: Unsupported USB disk partition
table type '' (neither 'msdos' nor 'gpt')<br />
2024-12-19 13:07:25.931993697 Exiting rear mkrescue (PID 2906) and its
descendant processes ...<br />
2024-12-19 13:07:25.939570567 rear,2906 usr/sbin/rear -v mkrescue<br />
<code>-rear,4334 usr/sbin/rear -v mkrescue</code>-pstree,4335 -Aplau 2906<br />
2024-12-19 13:07:25.955205050 Running exit tasks<br />
2024-12-19 13:07:25.958780302 Finished rear mkrescue in 1 seconds<br />
2024-12-19 13:07:25.961162000 Removing build area
/var/tmp/rear.YSE8FyyGdpcF2dd<br />
2024-12-19 13:07:25.965783578 End of program 'rear' reached<br />
[root@sas02 rear-master]#</p>
<p>When I examine the partitions, /dev/sdb is of the correct type:</p>
<p>[root@sas02 rear-master]# parted --list /dev/sdb<br />
Model: VMware Virtual disk (scsi)<br />
Disk /dev/sda: 107GB<br />
Sector size (logical/physical): 512B/512B<br />
Partition Table: msdos</p>
<p>Number Start End Size Type File system Flags<br />
1 1049kB 525MB 524MB primary ext4 boot<br />
2 525MB 107GB 107GB primary lvm</p>
<p>Model: VMware Virtual disk (scsi)<br />
Disk /dev/sdb: 17.2GB<br />
Sector size (logical/physical): 512B/512B<br />
Partition Table: gpt</p>
<p>Number Start End Size File system Name Flags<br />
1 24.6kB 8389kB 8364kB primary bios_grub<br />
2 8389kB 1082MB 1074MB fat32 primary boot<br />
3 1082MB 17.2GB 16.1GB ext3 primary legacy_boot</p>
<p>I'm uncertain if I've chosen the wrong output type or if I'm missing a
dependency. Is there documentation on how to use each of the OUTPUT
types? For instance, I could write this out as an ISO instead and then
attach that file to the virtual CDROM device. I have no idea how RAWDISK
is supposed to be used.</p>
<p>Any assistance would be much appreciated.</p>
<ul>
<li>
<p>Workaround, if any:</p>
</li>
<li>
<p>Attachments, as applicable ("rear -D mkrescue/mkbackup/recover"
    debug log files):</p>
</li>
</ul>
<p>You can drag-drop log files into this editor to create an attachment<br />
or paste verbatim text like command output or file content<br />
by including it between a leading and a closing line of<br />
three backticks like this:</p>
<pre><code>verbatim content
</code></pre>
<h4 id="pcahyna_commented_at_2024-12-20_0953"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/3372#issuecomment-2556655026">2024-12-20 09:53</a>:<a class="headerlink" href="#pcahyna_commented_at_2024-12-20_0953" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Red Hat Enterprise Linux Server release 6.6</p>
</blockquote>
<p>I am afraid that current ReaR will not support it - the last working
version on RHEL 6 was ReaR 2.4, according to @didacog .</p>
<h4 id="pcahyna_commented_at_2024-12-20_0955"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/3372#issuecomment-2556658525">2024-12-20 09:55</a>:<a class="headerlink" href="#pcahyna_commented_at_2024-12-20_0955" title="Permanent link">&para;</a></h4>
<p>By the way, have you formatted the disk using <code>rear format</code> before? Is
there anything at <code>/dev/disk/by-label/REAR-000</code> ?</p>
<h4 id="frustratedsignup_commented_at_2024-12-20_1501"><img src="https://avatars.githubusercontent.com/u/192264279?v=4" width="50"><a href="https://github.com/frustratedsignup">frustratedsignup</a> commented at <a href="https://github.com/rear/rear/issues/3372#issuecomment-2557174921">2024-12-20 15:01</a>:<a class="headerlink" href="#frustratedsignup_commented_at_2024-12-20_1501" title="Permanent link">&para;</a></h4>
<p>I did format the disk according to the getting started section of the
README. It did throw an error the first time around, but I then compiled
sgdisk for the system and added it to the path. After that, the format
succeeded with a warning that it used sgdisk as a fallback.</p>
<p>I basically created a 16GB virtual disk on the VM and then proceeded
with the quick start. Are there any directives that need to be changed?
Anything I'm doing wrong here?</p>
<p>I can try the older version and see if that succeeds. I would really
like to get this working because doing bare metal the old way is very
time consuming. I appreciate the effort.</p>
<p>I asked in my prior submission about the various output formats. Is
there any documentation on how to use RAWDISK or the other output
formats?</p>
<pre><code>[root@sas02 rear-master]#  ls /dev/disk/by-label/R
REAR-000                   REAR-EFI                   RHEL-6.6\x20Server.x86_64
[root@sas02 rear-master]#  ls -al /dev/disk/by-label/REAR-000
lrwxrwxrwx 1 root root 10 Dec 19 13:00 /dev/disk/by-label/REAR-000 -&gt; ../../sdb3
[root@sas02 rear-master]#
</code></pre>
<h4 id="pcahyna_commented_at_2024-12-20_1555"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/3372#issuecomment-2557267533">2024-12-20 15:55</a>:<a class="headerlink" href="#pcahyna_commented_at_2024-12-20_1555" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Are there any directives that need to be changed? Anything I'm doing
wrong here?</p>
</blockquote>
<p>I don't think so, looks good at first glance (you are using <code>BACKUP=NBU</code>
so you will of course need proper NBU backups, but that's not the issue
here).</p>
<p>Your problem is caused by a too old lsblk that does not support
<code>PKNAME</code> - you can try to set <code>USB_DEVICE_PARTED_LABEL=gpt</code> as a
workaround, but I suspect you will hit other issues.</p>
<h4 id="gdha_commented_at_2024-12-24_1523"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/3372#issuecomment-2561229446">2024-12-24 15:23</a>:<a class="headerlink" href="#gdha_commented_at_2024-12-24_1523" title="Permanent link">&para;</a></h4>
<p>@frustratedsignup You could try the old git code of
<code>https://github.com/rear/rear/tree/rear-2.4</code> and do a checkout of that
branch and give it a shot directly from the git code as
<code>sudo usr/sbin/rear -v mkrecscue</code>. Do not forget to edit the
<code>etc/rear/local.conf</code> file before kicking off rear.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2024 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2024-12-19.3372.issue.open.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
