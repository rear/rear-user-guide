<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#2818 Issue closed: EFI rescue system automatically boots into host last saved (leaving no choice between different hosts) - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#2818 Issue closed: EFI rescue system automatically boots into host last saved (leaving no choice between different hosts)";
        var mkdocs_page_input_path = "issues/2022-06-07.2818.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#2818 Issue closed: EFI rescue system automatically boots into host last saved (leaving no choice between different hosts)</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="2818_issue_closed_efi_rescue_system_automatically_boots_into_host_last_saved_leaving_no_choice_between_different_hosts"><a href="https://github.com/rear/rear/issues/2818">#2818 Issue</a> <code>closed</code>: EFI rescue system automatically boots into host last saved (leaving no choice between different hosts)<a class="headerlink" href="#2818_issue_closed_efi_rescue_system_automatically_boots_into_host_last_saved_leaving_no_choice_between_different_hosts" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>support / question</code>, <code>fixed / solved / done</code></p>
<h4 id="guru4712_opened_issue_at_2022-06-07_1306"><img src="https://avatars.githubusercontent.com/u/54933978?v=4" width="50"><a href="https://github.com/guru4712">guru4712</a> opened issue at <a href="https://github.com/rear/rear/issues/2818">2022-06-07 13:06</a>:<a class="headerlink" href="#guru4712_opened_issue_at_2022-06-07_1306" title="Permanent link">&para;</a></h4>
<h4 id="relax-and-recover_rear_issue_template">Relax-and-Recover (ReaR) Issue Template<a class="headerlink" href="#relax-and-recover_rear_issue_template" title="Permanent link">&para;</a></h4>
<p>Fill in the following items before submitting a new issue<br />
(quick response is not guaranteed with free support):</p>
<ul>
<li>
<p>ReaR version ("/usr/sbin/rear -V"): 2.6-4</p>
</li>
<li>
<p>OS version ("cat /etc/os-release" or "lsb_release -a" or "cat
    /etc/rear/os.conf"):<br />
    RHEL 8.4</p>
</li>
<li>
<p>ReaR configuration files ("cat /etc/rear/site.conf" and/or "cat
    /etc/rear/local.conf"):</p>
</li>
</ul>
<!-- -->

<pre><code>OUTPUT=USB
USB_DEVICE_FILESYSTEM_LABEL='REAR-2.6.4'
USB_DEVICE=/dev/disk/by-label/$USB_DEVICE_FILESYSTEM_LABEL

AUTOSHRINK_DISK_SIZE_LIMIT_PERCENTAGE=70
AUTOINCREASE_DISK_SIZE_THRESHOLD_PERCENTAGE=200
USE_DHCLIENT=NO
USE_STATIC_NETWORKING=YES
USE_RESOLV_CONF=( NO )
PROGS+=( lsusb more )
</code></pre>
<ul>
<li>
<p>Hardware vendor/product (PC or PowerNV BareMetal or ARM) or VM (KVM
    guest or PowerVM LPAR):<br />
    Server Fujitsu TX1330S4</p>
</li>
<li>
<p>System architecture (x86 compatible or PPC64/PPC64LE or what exact
    ARM device):<br />
    X86_64</p>
</li>
<li>
<p>Firmware (BIOS or UEFI or Open Firmware) and bootloader (GRUB or
    ELILO or Petitboot):<br />
    UEFI - GRUB2</p>
</li>
<li>
<p>Storage (local disk or SSD) and/or SAN (FC or iSCSI or FCoE) and/or
    multipath (DM or NVMe):<br />
    SSD</p>
</li>
<li>
<p>Storage layout ("lsblk -ipo
    NAME,KNAME,PKNAME,TRAN,TYPE,FSTYPE,LABEL,SIZE,MOUNTPOINT"):</p>
</li>
</ul>
<!-- -->

<pre><code>SYSTEM
======
/dev/sda                        /dev/sda                   disk                        223,1G
|-/dev/sda1                     /dev/sda1 /dev/sda         part vfat                     550M /boot/efi
|-/dev/sda2                     /dev/sda2 /dev/sda         part xfs                     1000M /boot
`-/dev/sda3                     /dev/sda3 /dev/sda         part LVM2_member            221,6G
  |-/dev/mapper/sina-sina--root /dev/dm-0 /dev/sda3        lvm  xfs                      206G /
  `-/dev/mapper/sina-sina--swap /dev/dm-1 /dev/sda3        lvm  swap                    15,6G [SWAP]

BOOT STICK
==========
/dev/sdb                        /dev/sdb            usb    disk                          3,7G
|-/dev/sdb1                     /dev/sdb1 /dev/sdb         part vfat        REAR-EFI     400M
`-/dev/sdb2                     /dev/sdb2 /dev/sdb         part ext3        REAR-2.6.4   3,3G
</code></pre>
<ul>
<li>Description of the issue (ideally so that others can reproduce it):</li>
</ul>
<p>Formatted USB-stick for UEFI using above local.conf:</p>
<pre><code>rear -D -c `pwd` format -- --efi /dev/sdb
</code></pre>
<p><a href="https://github.com/rear/rear/files/8853346/rear-sm01-gneu_format.log">rear-sm01-gneu_format.log</a></p>
<p>Prepared rescue system on first host and another one</p>
<pre><code>rear -D -c `pwd` mkrescue
</code></pre>
<p><a href="https://github.com/rear/rear/files/8853350/rear-sm01-gneu_mkrescue.log">rear-sm01-gneu_mkrescue.log</a><br />
<a href="https://github.com/rear/rear/files/8853351/rear-sm02-gneu_mkrescue.log">rear-sm02-gneu_mkrescue.log</a></p>
<p>Booting from stick always runs automatically into the rescue system
prepared by the last host saved.<br />
But I exspected to be prompted for a choice between all the hosts saved!</p>
<p>This choice used to appear with version 2.5-1 on RHEL 7.6 (bios MBR).<br />
The structure of actual ../rear/syslinux.conf is identical to that
produced by version 2.5-1 mentioned above.<br />
But behavior is different!<br />
<a href="https://github.com/rear/rear/files/8853357/syslinux.cfg.txt">syslinux.cfg.txt</a></p>
<ul>
<li>Workaround, if any:</li>
</ul>
<p>Produce ISO boot file on each server and copy on demand to usb-stick.</p>
<h4 id="pcahyna_commented_at_2022-06-07_1321"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2818#issuecomment-1148666170">2022-06-07 13:21</a>:<a class="headerlink" href="#pcahyna_commented_at_2022-06-07_1321" title="Permanent link">&para;</a></h4>
<blockquote>
<p>This choice used to appear with version 2.5-1 on RHEL 7.6 (bios
MBR).<br />
The structure of actual ../rear/syslinux.conf is identical to that
produced by version 2.5-1 mentioned above.<br />
But behavior is different!</p>
</blockquote>
<p>I think this is because with EFI, one boots using GRUB and syslinux.conf
is not even used. This is unfortunate, we have other cases where the
GRUB menu does not offer the same functionality as the SYSLINUX/ISOLINUX
one.</p>
<h4 id="jsmeix_commented_at_2022-06-07_1346"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2818#issuecomment-1148699548">2022-06-07 13:46</a>:<a class="headerlink" href="#jsmeix_commented_at_2022-06-07_1346" title="Permanent link">&para;</a></h4>
<p>On first glance this issue here seems to be<br />
same or at least similar to item '(b)' in<br />
<a href="https://github.com/rear/rear/issues/2666">https://github.com/rear/rear/issues/2666</a></p>
<p>See also<br />
<a href="https://github.com/rear/rear/issues/2648">https://github.com/rear/rear/issues/2648</a></p>
<p>In current master code we have GRUB2_DEFAULT_BOOT<br />
in default.conf which is currently online at<br />
<a href="https://github.com/rear/rear/blob/master/usr/share/rear/conf/default.conf#L3329">https://github.com/rear/rear/blob/master/usr/share/rear/conf/default.conf#L3329</a><br />
but I don't know if that is also used for UEFI<br />
and/or if it is of any use for this issue here.</p>
<h4 id="guru4712_commented_at_2022-06-15_0753"><img src="https://avatars.githubusercontent.com/u/54933978?v=4" width="50"><a href="https://github.com/guru4712">guru4712</a> commented at <a href="https://github.com/rear/rear/issues/2818#issuecomment-1156120673">2022-06-15 07:53</a>:<a class="headerlink" href="#guru4712_commented_at_2022-06-15_0753" title="Permanent link">&para;</a></h4>
<p>@jsmeix: Yes, you may regard this issue as a duplicate to item '(b)' in
#2666.</p>
<p>And imho GRUB2_DEFAULT_BOOT seems to be of no relevance to the goal to
open a "second level menu" for choosing one of multiple hosts after
choosing between unsecure or secure boot from rear.</p>
<h4 id="jsmeix_commented_at_2022-07-07_0638"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2818#issuecomment-1177152775">2022-07-07 06:38</a>:<a class="headerlink" href="#jsmeix_commented_at_2022-07-07_0638" title="Permanent link">&para;</a></h4>
<p>I think this issue is sufficiently answered<br />
so I close it as "done" (we don't have a "duplicate" label)<br />
because this issue is as duplicate of item '(b)' in<br />
<a href="https://github.com/rear/rear/issues/2666">https://github.com/rear/rear/issues/2666</a><br />
which is intended to get implemented for ReaR 2.8</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2024 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2022-06-07.2818.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
