<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#378 Issue closed: Ability to perform manual Netbackup restore instead of automated? - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#378 Issue closed: Ability to perform manual Netbackup restore instead of automated?";
        var mkdocs_page_input_path = "issues/2014-03-12.378.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#378 Issue closed: Ability to perform manual Netbackup restore instead of automated?</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="378_issue_closed_ability_to_perform_manual_netbackup_restore_instead_of_automated"><a href="https://github.com/rear/rear/issues/378">#378 Issue</a> <code>closed</code>: Ability to perform manual Netbackup restore instead of automated?<a class="headerlink" href="#378_issue_closed_ability_to_perform_manual_netbackup_restore_instead_of_automated" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>won't fix / can't fix / obsolete</code></p>
<h4 id="andyeff_opened_issue_at_2014-03-12_1211"><img src="https://avatars.githubusercontent.com/u/3918580?u=d189126a7636b458acf7f1a50a5f766810b282ab&v=4" width="50"><a href="https://github.com/andyeff">andyeff</a> opened issue at <a href="https://github.com/rear/rear/issues/378">2014-03-12 12:11</a>:<a class="headerlink" href="#andyeff_opened_issue_at_2014-03-12_1211" title="Permanent link">&para;</a></h4>
<p>Hi there,</p>
<p>I'm running Rear with the ISO + NBU (Netbackup) restore method, and am
wondering if there is a way to have the restore process allow the
restore engineer to send a selective Netbackup restore operation to the
server, rather than use the automatic system currently in place.</p>
<p>For example: I boot a server from ISO, and run 'rear recover'. I press
Enter twice to confirm I am restoring to the same machine and that I
want to use the latest backup set.</p>
<p>REAR will then (as I understand it) query backups from 5 days ago, and
start restoring from them. HOWEVER, due to the way the backup tapes are
handled, this is unfortunately a bit inflexible for me, as some backup
tapes may not be available. What I would want to do instead is to stop
the automatic netbackup from running, and pause the scripts so I can
send a more specific restore operation to the server.</p>
<p>For example, commenting out / removing lines 66-71 from the relevant
script:<br />
<a href="https://github.com/rear/rear/blob/79f5c64a3e8e12beeb4b924c6e6ccfd9bae70720/usr/share/rear/restore/NBU/default/40_restore_with_nbu.sh#L66-L71">https://github.com/rear/rear/blob/79f5c64a3e8e12beeb4b924c6e6ccfd9bae70720/usr/share/rear/restore/NBU/default/40_restore_with_nbu.sh#L66-L71</a></p>
<p>And having the rear recover operation pause while I restore manually,
then resume its finishing operations after the recovery is complete
(replace the commented-out lines with: read -p "Press Enter to continue"
for example.</p>
<p>Is there a way to do something like this with certain parameters in
local.conf ? Or would I best need to alter the existing scripts on the
machine before running the initial 'rear mkrescue' and generating the
ISO?</p>
<h4 id="andyeff_commented_at_2014-03-12_1629"><img src="https://avatars.githubusercontent.com/u/3918580?u=d189126a7636b458acf7f1a50a5f766810b282ab&v=4" width="50"><a href="https://github.com/andyeff">andyeff</a> commented at <a href="https://github.com/rear/rear/issues/378#issuecomment-37430177">2014-03-12 16:29</a>:<a class="headerlink" href="#andyeff_commented_at_2014-03-12_1629" title="Permanent link">&para;</a></h4>
<p>I actually ran into some oddities while doing a manual restore - it
looks to be a problem with the Netbackup side rather than Relax and
Recover.</p>
<p>As an aside - The netbackup restore sequence prompts to either use the
current backup (passes the -s parameter to bprestore), or from an
'earlier than' date (passes the -e parameter to bprestore).</p>
<p>Is there an easy way to either be prompted for both, or use both
parameters? For example my test Full backup that I was using to restore
from is dated 03/11/2014 15:50:20 , so if I manually specify -s
03/11/2014 15:50:19 and -e 03/11/2014 15:50:21 , it will force Netbackup
to only use that Full backup set, and ignore any earlier backups, and
any later incremental backups.</p>
<h4 id="gdha_commented_at_2014-03-13_1927"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/378#issuecomment-37576263">2014-03-13 19:27</a>:<a class="headerlink" href="#gdha_commented_at_2014-03-13_1927" title="Permanent link">&para;</a></h4>
<p>@andyeff not sure in which way I can help you as I do not consider
myself a NBU specialist?</p>
<h4 id="andyeff_commented_at_2014-03-13_1944"><img src="https://avatars.githubusercontent.com/u/3918580?u=d189126a7636b458acf7f1a50a5f766810b282ab&v=4" width="50"><a href="https://github.com/andyeff">andyeff</a> commented at <a href="https://github.com/rear/rear/issues/378#issuecomment-37577942">2014-03-13 19:44</a>:<a class="headerlink" href="#andyeff_commented_at_2014-03-13_1944" title="Permanent link">&para;</a></h4>
<p>@gdha Ah, no problem - I was thinking about this today while doing some
test backup + restores.</p>
<p>The verify script that runs during a Netbackup restore (
<a href="https://github.com/rear/rear/blob/master/usr/share/rear/verify/NBU/default/39_request_point_in_time_restore_parameters.sh">https://github.com/rear/rear/blob/master/usr/share/rear/verify/NBU/default/39_request_point_in_time_restore_parameters.sh</a>
) only prompts for date to use with the -e parameter. This sets a date
that netbackup won't go later than to restore backups.</p>
<p>What I decided on was altering this script and also the one used during
restore (
<a href="https://github.com/rear/rear/blob/master/usr/share/rear/restore/NBU/default/40_restore_with_nbu.sh">https://github.com/rear/rear/blob/master/usr/share/rear/restore/NBU/default/40_restore_with_nbu.sh</a>
) to also be able to prompt and store a date that can be passed to
netbackup as a -s parameter. This let me then specify a date range of
backup sets to restore from, which avoided the problem of older or newer
backups not being present in the tape library of Netbackup.</p>
<p>Admittedly this alteration was mostly just to prove that
Relax-and-Recover works for our requirements (and it does - we had a
mailbox server back up and running in approx 15 minutes!), but it seems
like it might be a useful extra feature for Netbackup users.</p>
<p>I don't have the edits handy at the moment unfortunately, but tomorrow
morning I will upload the changes as gists so I can better explain. It
is really allowing the ability to enter either a "to" date ( -e
parameter with bprestore, which the NBU restore method currently
supports), a "from" date ( -s parameter with bprestore, which the NBU
restore method does by default if no date is entered, it generates a
date 5 days before todays date and passes that as the -s param), and
also a to AND from date (passing both a -s and -e parameter to bprestore
to restrict restoring backups from between the two date/times given).</p>
<h4 id="schlomo_commented_at_2014-03-13_2148"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/378#issuecomment-37591117">2014-03-13 21:48</a>:<a class="headerlink" href="#schlomo_commented_at_2014-03-13_2148" title="Permanent link">&para;</a></h4>
<p>​I am trying to understand what you say:</p>
<p>Do you want to give NBU a "restore window", e.g. a time span from which
to<br />
pick the restore?</p>
<p>Can it be that the actual problem with the current code is that if you<br />
specify a date on which no backup was made then NBU won't simply take
the<br />
next best thing but fail? Maybe you can tell NBU how to interpret this<br />
single date to mean "last backup at or before DATE" instead of "backup
from<br />
DATE or fail"?</p>
<h4 id="andyeff_commented_at_2014-03-13_2201"><img src="https://avatars.githubusercontent.com/u/3918580?u=d189126a7636b458acf7f1a50a5f766810b282ab&v=4" width="50"><a href="https://github.com/andyeff">andyeff</a> commented at <a href="https://github.com/rear/rear/issues/378#issuecomment-37592457">2014-03-13 22:01</a>:<a class="headerlink" href="#andyeff_commented_at_2014-03-13_2201" title="Permanent link">&para;</a></h4>
<p>Hi @schlomo , my understanding is that there are two options that can be
used for the NBU restore.</p>
<ol>
<li>Do not specify a date/time - and just press Enter when prompted. In
    40_restore_with_nbu.sh, this will cause REAR to set -s (the start
    date/time of restore window) to be 5 days ago. If there are any
    backups dated from up to 5 days ago, they will be restored in
    sequence, up until the latest backup. I think in general this is
    probably appropriate behaviour for most cases.</li>
<li>Specify a date/time. This will pass the date/time to NBU as the end
    date to restore to, so for example if you wanted to restore from
    backups to a moment in time 3 days ago, but no later, this would be
    useful. But it does not include a start time this way, so NBU will
    attempt to restore from the very first available backup, which could
    be several weeks or maybe even months ago depending on how long
    backup sets are retained for.</li>
</ol>
<p>My desire would be for a third option so two sets of dates could be
specified, which would pass both the -e and -s times to NBU, restricting
the restores to a range, to avoid either trying to restore from very old
and unnecessary backups, or to also skip all but the most recent backups
(For example, if backups are taken every day, perhaps you only want to
restore the previous days' backup and not all 5 days prior).</p>
<h4 id="schlomo_commented_at_2014-03-13_2233"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/378#issuecomment-37595281">2014-03-13 22:33</a>:<a class="headerlink" href="#schlomo_commented_at_2014-03-13_2233" title="Permanent link">&para;</a></h4>
<p>I see. Basically we need to work around NBUs lack of a consolidated
backup<br />
like TSM has. There you set a point in time and it will simply take
each<br />
file from whatever backup set it needs to do what you meant.</p>
<p>Not beeing an NBU expert I might ask something silly. Would it be
possible<br />
to ask NBU for the backup scheme in use and then make a smarter
automatic<br />
choice?</p>
<p>On 13 March 2014 23:01, Andy Eff <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;">&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a> wrote:</p>
<blockquote>
<p>Hi @schlomo <a href="https://github.com/schlomo">https://github.com/schlomo</a> ,
my understanding is that there<br />
are two options that can be used for the NBU restore.</p>
<ol>
<li></li>
</ol>
<p>Do not specify a date/time - and just press Enter when prompted. In<br />
40_restore_with_nbu.sh, this will cause REAR to set -s (the start
date/time<br />
of restore window) to be 5 days ago. If there are any backups dated
from up<br />
to 5 days ago, they will be restored in sequence, up until the
latest<br />
backup. I think in general this is probably appropriate behaviour for
most<br />
cases.<br />
2.</p>
<p>Specify a date/time. This will pass the date/time to NBU as the end<br />
date to restore to, so for example if you wanted to restore from
backups to<br />
a moment in time 3 days ago, but no later, this would be useful. But
it<br />
does not include a start time this way, so NBU will attempt to restore
from<br />
the very first available backup, which could be several weeks or maybe
even<br />
months ago depending on how long backup sets are retained for.</p>
<p>My desire would be for a third option so two sets of dates could be<br />
specified, which would pass both the -e and -s times to NBU,
restricting<br />
the restores to a range, to avoid either trying to restore from very
old<br />
and unnecessary backups, or to also skip all but the most recent
backups<br />
(For example, if backups are taken every day, perhaps you only want
to<br />
restore the previous days' backup and not all 5 days prior).</p>
<p>—<br />
Reply to this email directly or view it on
GitHubhttps://github.com/rear/rear/issues/378#issuecomment-37592457<br />
.</p>
</blockquote>
<h4 id="andyeff_commented_at_2014-03-13_2240"><img src="https://avatars.githubusercontent.com/u/3918580?u=d189126a7636b458acf7f1a50a5f766810b282ab&v=4" width="50"><a href="https://github.com/andyeff">andyeff</a> commented at <a href="https://github.com/rear/rear/issues/378#issuecomment-37595863">2014-03-13 22:40</a>:<a class="headerlink" href="#andyeff_commented_at_2014-03-13_2240" title="Permanent link">&para;</a></h4>
<p>Hmm unfortunately I am not that familiar with Netbackup myself - I have
only really been using it in the last few weeks after I was tasked with
creating a process to allow my team to be able to do full bare-metal
restores for servers that weren't being backed up through a vmware
method.</p>
<p>I will take a closer look tomorrow at the schemes in use and whether any
of the other binaries in the Netbackup client can help with this and
reply back as soon as possible. Thank you for your patience so far!</p>
<h4 id="andyeff_commented_at_2014-03-19_1648"><img src="https://avatars.githubusercontent.com/u/3918580?u=d189126a7636b458acf7f1a50a5f766810b282ab&v=4" width="50"><a href="https://github.com/andyeff">andyeff</a> commented at <a href="https://github.com/rear/rear/issues/378#issuecomment-38076146">2014-03-19 16:48</a>:<a class="headerlink" href="#andyeff_commented_at_2014-03-19_1648" title="Permanent link">&para;</a></h4>
<p>Sorry for the delay in getting back to you both.<br />
@schlomo Regarding NBU's backup scheme, we're using a very standard
'normal' backup, where we take one Full backup a week, and then daily
incrementals. After considering how to best deal with this, I believe
the only change I would request is changing the default '5 day lookback'
to be a 7 day lookback, so that a Full backup set can still be found if
a restore is needed on the same day that a new Full backup set would
otherwise be taken. (e.g. the server has a fatal crash in the morning,
before the evening backup has a chance to run, and the most recent
backup set to recover from is 7 days old)</p>
<p>This would I think involve changing the "-s" parameter on Line 21:
<a href="https://github.com/rear/rear/blob/master/usr/share/rear/restore/NBU/default/40_restore_with_nbu.sh#L21">https://github.com/rear/rear/blob/master/usr/share/rear/restore/NBU/default/40_restore_with_nbu.sh#L21</a><br />
from:</p>
<pre><code>Recent_Month_Hour=`LANG=C /usr/openv/netbackup/bin/bplist -C ${NBU_CLIENT_SOURCE} -l -s \`date -d "-5 days" "+%m/%d/%Y"\` $1 2&gt;&amp;8 | head -n 1 | awk '{print $5,$6,$7}'`
</code></pre>
<p>to:</p>
<pre><code>Recent_Month_Hour=`LANG=C /usr/openv/netbackup/bin/bplist -C ${NBU_CLIENT_SOURCE} -l -s \`date -d "-7 days" "+%m/%d/%Y"\` $1 2&gt;&amp;8 | head -n 1 | awk '{print $5,$6,$7}'`

I'm also happy to change the script on my deployed servers after installing, if you'd prefer to keep the 5 day setting instead.
</code></pre>
<h4 id="schlomo_commented_at_2014-03-19_1904"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/378#issuecomment-38093272">2014-03-19 19:04</a>:<a class="headerlink" href="#schlomo_commented_at_2014-03-19_1904" title="Permanent link">&para;</a></h4>
<p>I can live with the 7 day setting. Please post to the mailing list and
if<br />
nobody disagrees then we will just change it.</p>
<p>On 19 March 2014 17:48, Andy Eff <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;">&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a> wrote:</p>
<blockquote>
<p>Sorry for the delay in getting back to you both.<br />
@schlomo <a href="https://github.com/schlomo">https://github.com/schlomo</a>
Regarding NBU's backup scheme,<br />
we're using a very standard 'normal' backup, where we take one Full
backup<br />
a week, and then daily incrementals. After considering how to best
deal<br />
with this, I believe the only change I would request is changing the<br />
default '5 day lookback' to be a 7 day lookback, so that a Full backup
set<br />
can still be found if a restore is needed on the same day that a new
Full<br />
backup set would otherwise be taken. (e.g. the server has a fatal
crash in<br />
the morning, before the evening backup has a chance to run, and the
most<br />
recent backup set to recover from is 7 days old)</p>
<p>This would I think involve changing the "-s" parameter on Line 21:<br />
<a href="https://github.com/rear/rear/blob/master/usr/share/rear/restore/NBU/default/40_restore_with_nbu.sh#L21">https://github.com/rear/rear/blob/master/usr/share/rear/restore/NBU/default/40_restore_with_nbu.sh#L21</a><br />
from:</p>
<p>Recent_Month_Hour=<code>LANG=C /usr/openv/netbackup/bin/bplist -C ${NBU_CLIENT_SOURCE} -l -s \</code>date
-d "-5 days"
"+%m/%d/%Y"<code>$1 2&gt;&amp;8 | head -n 1 | awk '{print $5,$6,$7}'</code></p>
<p>to:</p>
<p>Recent_Month_Hour=<code>LANG=C /usr/openv/netbackup/bin/bplist -C ${NBU_CLIENT_SOURCE} -l -s \</code>date
-d "-7 days"
"+%m/%d/%Y"<code>$1 2&gt;&amp;8 | head -n 1 | awk '{print $5,$6,$7}'</code></p>
<p>I'm also happy to change the script on my deployed servers after
installing, if you'd prefer to keep the 5 day setting instead.</p>
<p>—<br />
Reply to this email directly or view it on
GitHubhttps://github.com/rear/rear/issues/378#issuecomment-38076146<br />
.</p>
</blockquote>
<h4 id="roseswe_commented_at_2014-03-19_1914"><img src="https://avatars.githubusercontent.com/u/3810660?v=4" width="50"><a href="https://github.com/roseswe">roseswe</a> commented at <a href="https://github.com/rear/rear/issues/378#issuecomment-38094443">2014-03-19 19:14</a>:<a class="headerlink" href="#roseswe_commented_at_2014-03-19_1914" title="Permanent link">&para;</a></h4>
<p>Why not adding a new variable to local.conf, defaulting to 7 days, so<br />
everybody can change it if need, without touching the sources?</p>
<p>Maybe this can be done more generic so other backup solutions can use<br />
this setting(s) too?</p>
<p>BR,<br />
Ralph</p>
<p>Am 19.03.2014 20:04, schrieb Schlomo Schapiro:</p>
<blockquote>
<p>I can live with the 7 day setting. Please post to the mailing list and
if<br />
nobody disagrees then we will just change it.</p>
<p>::</p>
<blockquote>
<p>Recent_Month_Hour=<code>LANG=C /usr/openv/netbackup/bin/bplist -C ${NBU_CLIENT_SOURCE} -l -s \</code>date
-d "-5 days"
"+%m/%d/%Y"<code>$1 2&gt;&amp;8 | head -n 1 | awk '{print $5,$6,$7}'</code></p>
<p>to:</p>
<p>Recent_Month_Hour=<code>LANG=C /usr/openv/netbackup/bin/bplist -C ${NBU_CLIENT_SOURCE} -l -s \</code>date
-d "-7 days"
"+%m/%d/%Y"<code>$1 2&gt;&amp;8 | head -n 1 | awk '{print $5,$6,$7}'</code></p>
</blockquote>
</blockquote>
<h4 id="schlomo_commented_at_2014-03-20_0922"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/378#issuecomment-38147490">2014-03-20 09:22</a>:<a class="headerlink" href="#schlomo_commented_at_2014-03-20_0922" title="Permanent link">&para;</a></h4>
<p>Sounds like a good idea. Who will do the patch? I can't test it.</p>
<p>On 19 March 2014 20:14, Ralph Roth <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;">&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a> wrote:</p>
<blockquote>
<p>Why not adding a new variable to local.conf, defaulting to 7 days,
so<br />
everybody can change it if need, without touching the sources?</p>
<p>Maybe this can be done more generic so other backup solutions can
use<br />
this setting(s) too?</p>
<p>BR,<br />
Ralph</p>
<p>Am 19.03.2014 20:04, schrieb Schlomo Schapiro:</p>
<blockquote>
<p>I can live with the 7 day setting. Please post to the mailing list
and if<br />
nobody disagrees then we will just change it.</p>
<p>::</p>
<blockquote>
<p>Recent_Month_Hour=<code>LANG=C /usr/openv/netbackup/bin/bplist -C ${NBU_CLIENT_SOURCE} -l -s \</code>date
-d "-5 days"
"+%m/%d/%Y"<code>$1 2&gt;&amp;8 | head -n 1 | awk '{print $5,$6,$7}'</code></p>
<p>to:</p>
<p>Recent_Month_Hour=<code>LANG=C /usr/openv/netbackup/bin/bplist -C ${NBU_CLIENT_SOURCE} -l -s \</code>date
-d "-7 days"
"+%m/%d/%Y"<code>$1 2&gt;&amp;8 | head -n 1 | awk '{print $5,$6,$7}'</code></p>
</blockquote>
</blockquote>
<p>—</p>
<p>Reply to this email directly or view it on
GitHubhttps://github.com/rear/rear/issues/378#issuecomment-38094443<br />
.</p>
</blockquote>
<h4 id="gdha_commented_at_2014-04-16_1211"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/378#issuecomment-40591373">2014-04-16 12:11</a>:<a class="headerlink" href="#gdha_commented_at_2014-04-16_1211" title="Permanent link">&para;</a></h4>
<p>What is the proposed variable name? <code>RESTORE_LOOKBACK_DAYS</code> ??</p>
<h4 id="gdha_commented_at_2015-01-25_1717"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/378#issuecomment-71381797">2015-01-25 17:17</a>:<a class="headerlink" href="#gdha_commented_at_2015-01-25_1717" title="Permanent link">&para;</a></h4>
<p>@andyeff @schlomo @rear/contributors Maybe <code>RESTORE_NR_DAYS</code> seems a
better name for the variable. OK?</p>
<h4 id="andyeff_commented_at_2015-01-25_1717"><img src="https://avatars.githubusercontent.com/u/3918580?u=d189126a7636b458acf7f1a50a5f766810b282ab&v=4" width="50"><a href="https://github.com/andyeff">andyeff</a> commented at <a href="https://github.com/rear/rear/issues/378#issuecomment-71381821">2015-01-25 17:17</a>:<a class="headerlink" href="#andyeff_commented_at_2015-01-25_1717" title="Permanent link">&para;</a></h4>
<p>Sounds good!</p>
<h4 id="schlomo_commented_at_2015-01-25_1932"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/378#issuecomment-71387743">2015-01-25 19:32</a>:<a class="headerlink" href="#schlomo_commented_at_2015-01-25_1932" title="Permanent link">&para;</a></h4>
<p>If this variable is specific to NBU it <strong>must</strong> start with NBU_ because
only then will <code>rear dump</code> actually show it.</p>
<h4 id="gdha_commented_at_2015-02-06_1950"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/378#issuecomment-73301005">2015-02-06 19:50</a>:<a class="headerlink" href="#gdha_commented_at_2015-02-06_1950" title="Permanent link">&para;</a></h4>
<p>The whole discussion is not needed any more as commit
<a href="https://github.com/rear/rear/commit/45717daf09ce05e53fcf27827299f7d8678adb98#diff-9df2ad19942f62489ef3385c320f4bfc">https://github.com/rear/rear/commit/45717daf09ce05e53fcf27827299f7d8678adb98#diff-9df2ad19942f62489ef3385c320f4bfc</a>
removed the Get_Start_Date function.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2024 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2014-03-12.378.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
