<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#1532 Issue closed: Cannot create USB ReaR dir: no space on device - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#1532 Issue closed: Cannot create USB ReaR dir: no space on device";
        var mkdocs_page_input_path = "issues/2017-10-12.1532.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../development/squash-git-log-commments.html">How to squash git log comments into one line</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#1532 Issue closed: Cannot create USB ReaR dir: no space on device</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="1532_issue_closed_cannot_create_usb_rear_dir_no_space_on_device"><a href="https://github.com/rear/rear/issues/1532">#1532 Issue</a> <code>closed</code>: Cannot create USB ReaR dir: no space on device<a class="headerlink" href="#1532_issue_closed_cannot_create_usb_rear_dir_no_space_on_device" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>support / question</code>, <code>fixed / solved / done</code></p>
<h4 id="glenhenshaw_opened_issue_at_2017-10-12_0112"><img src="https://avatars.githubusercontent.com/u/19539769?v=4" width="50"><a href="https://github.com/GlenHenshaw">GlenHenshaw</a> opened issue at <a href="https://github.com/rear/rear/issues/1532">2017-10-12 01:12</a>:<a class="headerlink" href="#glenhenshaw_opened_issue_at_2017-10-12_0112" title="Permanent link">&para;</a></h4>
<h4 id="relax-and-recover_rear_issue_template">Relax-and-Recover (ReaR) Issue Template<a class="headerlink" href="#relax-and-recover_rear_issue_template" title="Permanent link">&para;</a></h4>
<p>Fill in the following items before submitting a new issue<br />
(quick response is not guaranteed with free support):</p>
<ul>
<li>
<p>rear version (/usr/sbin/rear -V):</p>
<p>Relax-and-Recover 2.2 / 2017-07-20</p>
</li>
<li>
<p>OS version (cat /etc/rear/os.conf or lsb_release -a):</p>
<p>No LSB modules are available.<br />
Distributor ID: Debian<br />
Description: Debian GNU/Linux 9.2 (stretch)<br />
Release: 9.2<br />
Codename: stretch</p>
</li>
<li>
<p>rear configuration files (cat /etc/rear/site.conf or cat
    /etc/rear/local.conf):<br />
    cat /etc/rear/local.conf:</p>
</li>
</ul>
<pre>
BACKUP=NETFS
OUTPUT=USB
USB_DEVICE=/dev/disk/by-uuid/cb17c608-fbf4-4c75-b230-9eaafa372b14
</pre>

<p>cat /etc/rear/site.conf:</p>
<pre>
export TMPDIR=/media/bighdd/tmp/rear
</pre>

<ul>
<li>
<p>Are you using legacy BIOS or UEFI boot?<br />
    UEFI</p>
</li>
<li>
<p>Brief description of the issue:</p>
</li>
</ul>
<pre>
$ sudo rear mkbackup
ERROR: Could not create USB ReaR dir [/media/bighdd/tmp/rear/rear.sEQIyr5CRMAMnod/outputfs/rear/glen-server/20171011.2108] !
Aborting due to an error, check /var/log/rear/rear-glen-server.log for details
</pre>

<p>Looking at the end of the log file reports:</p>
<pre>
mkdir: cannot create directory '/media/bighdd/tmp/rear/rear.sEQIyr5CRMAMnod/outputfs/rear/glen-server/20171011.2108': No space left on device
2017-10-11 21:08:58.350146600 ERROR: Could not create USB ReaR dir [/media/bighdd/tmp/rear/rear.sEQIyr5CRMAMnod/outputfs/rear/glen-server/20171011.2108] !
</pre>

<p>...but /media/bighdd has plenty of space:</p>
<pre>
$ df /media/bighdd
Filesystem     1K-blocks     Used Available Use% Mounted on
/dev/sdb1      961302560 77093604 835354496   9% /media/bighdd
</pre>

<p>and it also has plenty of inodes:</p>
<pre>
$ df -i /media/bighdd
Filesystem       Inodes  IUsed    IFree IUse% Mounted on
/dev/sdb1      61054976 217236 60837740    1% /media/bighdd
</pre>

<p>So what gives?<br />
BTW,<br />
I can change TMPDIR to any folder on any storage<br />
device I have, and I get exactly the same error.</p>
<h4 id="jsmeix_commented_at_2017-10-12_0748"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1532#issuecomment-336048848">2017-10-12 07:48</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-10-12_0748" title="Permanent link">&para;</a></h4>
<p>The code that errors out in ReaR is in<br />
usr/share/rear/output/USB/Linux-i386/300_create_extlinux.sh</p>
<pre>
USB_REAR_DIR="$BUILD_DIR/outputfs/$USB_PREFIX"
if [ ! -d "$USB_REAR_DIR" ]; then
    mkdir -p $v "$USB_REAR_DIR" >/dev/null
    StopIfError "Could not create USB ReaR dir [$USB_REAR_DIR] !"
fi
</pre>

<p>Right now I cannot see how it could be an issue inside ReaR<br />
when the 'mkdir' fails so that from my current point of view<br />
as far as I currently understand the issue, the root cause<br />
is not inside ReaR so that I close the issue accordingly.<br />
Nevertheless you could still add comments to this issue<br />
to provide more information that indicates why in this case<br />
the root cause is actually inside ReaR.</p>
<p>In general:</p>
<p>When a software itself reports an "Error" it shows that<br />
this condition is already handled within the software<br />
and that it is intentionally regarded to be an "Error".</p>
<p>Usually "Error" messages from a software do not mean<br />
a bug inside the software but the opposite:<br />
Something outside of the software is wrong and<br />
that is reported by the software as an "Error".</p>
<p>I.e. usually an issue like "foo aborts with error 'bar'"<br />
is not a bug within foo but something in the environment<br />
where foo runs is wrong or insufficient to run foo so that<br />
all what foo can do is to abort with an error message.</p>
<p>For example think about "foo aborts with 'out of disk space'"<br />
then it is initially unlikely that the root cause is in foo itself.<br />
E.g. the root cause could be too litte space in /tmp/<br />
(or some obscure quota limitation or whatever else) but<br />
foo must create a temporary file there to be able to run<br />
so that all what foo can do in this case is to abort.<br />
Nevertheless an in-depth analysis might later show the root cause<br />
is actually in foo (e.g. if foo runs mad and fills up the disk).</p>
<h4 id="glenhenshaw_commented_at_2017-10-12_1343"><img src="https://avatars.githubusercontent.com/u/19539769?v=4" width="50"><a href="https://github.com/GlenHenshaw">GlenHenshaw</a> commented at <a href="https://github.com/rear/rear/issues/1532#issuecomment-336141125">2017-10-12 13:43</a>:<a class="headerlink" href="#glenhenshaw_commented_at_2017-10-12_1343" title="Permanent link">&para;</a></h4>
<p>I hear what you're saying, but here's the thing: when I run , e.g., a
sudo mktemp /media/bighdd manually from the terminal, it succeeds.</p>
<p>If there was some external issue that was causing straightforward errors
when attempting to create files on all of my hard drives, I would expect
my entire system to exhibit very strange behaviors. But it doesn't. It's
a brand-new Debian install, literally less than a week old, and
everything else is working fine. The only program that fails to run the
way I expect is ReaR.</p>
<p>And, as I indicated, 90% of the space on my 1 Tb hard drive is free, as
are 99% of the inodes. And also, as I said above: I have tried to move
the ReaR tmp directory around to several different storage devices, and
it fails in exactly the same way on all of them. Both hard drives and
SSDs.</p>
<p>If you can give me <em>any</em> other ideas for why this might be failing, I'd
love to hear them because I'm at a loss.</p>
<h4 id="gozora_commented_at_2017-10-12_1353"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1532#issuecomment-336144093">2017-10-12 13:53</a>:<a class="headerlink" href="#gozora_commented_at_2017-10-12_1353" title="Permanent link">&para;</a></h4>
<p>Hello @GlenHenshaw,</p>
<p>Did you
<a href="https://github.com/rear/rear/blob/master/doc/user-guide/04-scenarios.adoc#preparing-your-usb-storage-device">format</a>
your USB device ?</p>
<p>I can't tell you from top of my head exact command for UEFI, but it can
be something like this:<br />
<code>rear -v format -- --efi &lt;/dev/disk&gt;</code>.</p>
<p>If you did format your disk, can you please attach your ReaR log output
from <code>rear -d -D mkbackup</code>.</p>
<p>Thanks</p>
<p>V.</p>
<h4 id="glenhenshaw_commented_at_2017-10-12_1408"><img src="https://avatars.githubusercontent.com/u/19539769?v=4" width="50"><a href="https://github.com/GlenHenshaw">GlenHenshaw</a> commented at <a href="https://github.com/rear/rear/issues/1532#issuecomment-336148680">2017-10-12 14:08</a>:<a class="headerlink" href="#glenhenshaw_commented_at_2017-10-12_1408" title="Permanent link">&para;</a></h4>
<p>I did format it, and in fact I successfully ran ReaR using the same USB
device three days ago. So something changed between Monday and today.</p>
<p>I assume you don't have to reformat the USB device every time you run
ReaR using it, right?</p>
<p>The only other thing that has changed on my system is the installation
of some packages that, as far as I know, have nothing to do with ReaR:
netatalk, python3, some julia packages (DifferentialEquations and
NLOpt), some octave packages, and some docs packages.</p>
<p>I'm at work, and can't get the ReaR output file. I will post that this
evening.</p>
<h4 id="gozora_commented_at_2017-10-12_1413"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1532#issuecomment-336150061">2017-10-12 14:13</a>:<a class="headerlink" href="#gozora_commented_at_2017-10-12_1413" title="Permanent link">&para;</a></h4>
<blockquote>
<p>I assume you don't have to reformat the USB device every time you run
ReaR using it, right?</p>
</blockquote>
<p>Yes, you need to format it just once ...</p>
<p>If ReaR was working for you before, then @jsmeix was most probably right
and this is not a ReaR issue.</p>
<p>Anyhow, I'll take a look on your debug output once you've uploaded it,
then hopefully we will know for sure what is actually wrong.</p>
<p>V.</p>
<h4 id="glenhenshaw_commented_at_2017-10-12_2335"><img src="https://avatars.githubusercontent.com/u/19539769?v=4" width="50"><a href="https://github.com/GlenHenshaw">GlenHenshaw</a> commented at <a href="https://github.com/rear/rear/issues/1532#issuecomment-336309800">2017-10-12 23:35</a>:<a class="headerlink" href="#glenhenshaw_commented_at_2017-10-12_2335" title="Permanent link">&para;</a></h4>
<p>OK, here is the command line output:</p>
<pre><code>$ sudo rear -v mkbackup
Relax-and-Recover 2.2 / 2017-07-20
Using log file: /var/log/rear/rear-glen-server.log
Using backup archive '/media/bighdd/tmp/rear.1nvAk65Zt0gsoEc/outputfs/rear/glen-server/20171012.1932/backup.tar.gz'
Creating disk layout
Using guessed bootloader 'GRUB'
Creating root filesystem layout
Copying logfile /var/log/rear/rear-glen-server.log into initramfs as '/tmp/rear-glen-server-partial-2017-10-12T19:33:00-04:00.log'
Copying files and directories
Copying binaries and libraries
Copying kernel modules
Copying all files in /lib*/firmware/
Creating recovery/rescue system initramfs/initrd initrd.cgz with gzip default compression
Created initrd.cgz with gzip default compression (76440726 bytes) in 8 seconds
ERROR: Could not create USB ReaR dir [/media/bighdd/tmp/rear.1nvAk65Zt0gsoEc/outputfs/rear/glen-server/20171012.1932] !
Aborting due to an error, check /var/log/rear/rear-glen-server.log for details
</code></pre>
<p>The log file is attached.</p>
<h4 id="glenhenshaw_commented_at_2017-10-12_2336"><img src="https://avatars.githubusercontent.com/u/19539769?v=4" width="50"><a href="https://github.com/GlenHenshaw">GlenHenshaw</a> commented at <a href="https://github.com/rear/rear/issues/1532#issuecomment-336309874">2017-10-12 23:35</a>:<a class="headerlink" href="#glenhenshaw_commented_at_2017-10-12_2336" title="Permanent link">&para;</a></h4>
<p>Log file<br />
<a href="https://github.com/rear/rear/files/1381046/rear-glen-server.log">rear-glen-server.log</a></p>
<h4 id="glenhenshaw_commented_at_2017-10-12_2342"><img src="https://avatars.githubusercontent.com/u/19539769?v=4" width="50"><a href="https://github.com/GlenHenshaw">GlenHenshaw</a> commented at <a href="https://github.com/rear/rear/issues/1532#issuecomment-336310938">2017-10-12 23:42</a>:<a class="headerlink" href="#glenhenshaw_commented_at_2017-10-12_2342" title="Permanent link">&para;</a></h4>
<p>So it appears to be choking on</p>
<pre><code> mkdir /media/bighdd/tmp/rear.1nvAk65Zt0gsoEc/outputfs/rear/glen-server/20171012.1932
</code></pre>
<p>but if I execute that command manually, it succeeds. So I'm kind of
stumped about what the problem might be. My best guess at this point is
that even though the logfile shows the tmp directory is on my 1 Tb hard
drive (/media/bighdd/tmp), maybe that is erroneous and it's actually
trying to create the system image on my root partition, in my normal
/tmp directory. That volume has only 12 Gb of 30 Gb free.</p>
<h4 id="glenhenshaw_commented_at_2017-10-13_0036"><img src="https://avatars.githubusercontent.com/u/19539769?v=4" width="50"><a href="https://github.com/GlenHenshaw">GlenHenshaw</a> commented at <a href="https://github.com/rear/rear/issues/1532#issuecomment-336318284">2017-10-13 00:36</a>:<a class="headerlink" href="#glenhenshaw_commented_at_2017-10-13_0036" title="Permanent link">&para;</a></h4>
<p>...I took a shot and reformatted my USB drive, and it appears to be
working now.</p>
<p>Which confuses me - this drive had already been formatted, and I had
used ReaR to make a backup volume on it earlier this week. And the error
message also confuses me - even if the USB drive wasn't formatted, why
would ReaR hang on trying to make a directory on a completely different
drive?</p>
<p>But anyway - it's working now.</p>
<h4 id="gozora_commented_at_2017-10-13_0609"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1532#issuecomment-336359586">2017-10-13 06:09</a>:<a class="headerlink" href="#gozora_commented_at_2017-10-13_0609" title="Permanent link">&para;</a></h4>
<p>Really strange,</p>
<p>Currently there two possible causes on my mind that can cause this.</p>
<ol>
<li>Some HW problem with your "bighdd"</li>
<li>Location of your TMPDIR</li>
</ol>
<p>To eliminate option no. 1 just try to run backup on some other USB
device if issue occurs again.</p>
<p>For option no. 2 I'm not sure how ReaR behaves if TMPDIR is located at
destination backup medium. So again if this issue should raise again,
just try to change TMPDIR to some location on your local disk.</p>
<p>V.</p>
<h4 id="jsmeix_commented_at_2017-10-13_0727"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1532#issuecomment-336373165">2017-10-13 07:27</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-10-13_0727" title="Permanent link">&para;</a></h4>
<p>@gozora<br />
many thanks for your valuable help here!<br />
Frankly I had hoped you would have a look here because<br />
you often help much with such "mission impossible" issues :-)</p>
<h4 id="jsmeix_commented_at_2017-10-13_0815"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1532#issuecomment-336383117">2017-10-13 08:15</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-10-13_0815" title="Permanent link">&para;</a></h4>
<p>@GlenHenshaw<br />
as always sleeping over it helped so that I have now at least<br />
an idea how one could debug such issues in general.</p>
<p>The problem here is that within a "rear mkbackup" run<br />
a command fails that "just works" outside of ReaR<br />
on plain command line.</p>
<p>This behaviour indicates that within the "rear mkbackup" run<br />
ReaR itself changes its environment into something where<br />
that command no longer works which could further indicate<br />
a bug inside ReaR - or the root cause is still outside of ReaR<br />
and the isssue gets only triggered by something in ReaR.</p>
<p>How to debug such issues in general:</p>
<ol>
<li></li>
</ol>
<p>Find the ReaR script where it fails, e.g. use the debug options<br />
like "rear -d -D mkbackup" and inspect the log file or<br />
search all ReaR scripts for the error message like</p>
<pre>
find usr/sbin/rear usr/share/rear/ | xargs grep -l 'error message'
</pre>

<p>In this case it is the 'mkdir' in<br />
usr/share/rear/output/USB/Linux-i386/300_create_extlinux.sh</p>
<pre>
USB_REAR_DIR="$BUILD_DIR/outputfs/$USB_PREFIX"
if [ ! -d "$USB_REAR_DIR" ]; then
    mkdir -p $v "$USB_REAR_DIR" >/dev/null
    StopIfError "Could not create USB ReaR dir [$USB_REAR_DIR] !"
fi
</pre>

<ol>
<li></li>
</ol>
<p>In the ReaR script where the command fails add a</p>
<pre>
rear_shell
</pre>

<p>call directly before the command that fails<br />
which would be in this case</p>
<pre>
USB_REAR_DIR="$BUILD_DIR/outputfs/$USB_PREFIX"
if [ ! -d "$USB_REAR_DIR" ]; then
    rear_shell
    mkdir -p $v "$USB_REAR_DIR" >/dev/null
    StopIfError "Could not create USB ReaR dir [$USB_REAR_DIR] !"
fi
</pre>

<p>For details about 'rear_shell' see
usr/share/rear/lib/linux-functions.sh</p>
<ol>
<li></li>
</ol>
<p>Now run "rear -d -D mkbackup" again and it will run a shell<br />
inside the ReaR script environment where the command fails<br />
directly before that command.<br />
In this shell you can now inspect the environment and try<br />
to find out why that command fails in the ReaR script environment.</p>
<h4 id="jsmeix_commented_at_2017-10-13_0850"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1532#issuecomment-336391381">2017-10-13 08:50</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-10-13_0850" title="Permanent link">&para;</a></h4>
<p>@GlenHenshaw<br />
some blind guesses:</p>
<p>Do you perhaps use btrfs as filesystem for that USB drive?<br />
I ask because btrfs is know to run out of disk space<br />
in traditionally unexpected ways (the reason is the<br />
different way how btrfs actually stores things which<br />
leads to false output of traditional commands that<br />
show free space - one must use btrfs tools for that).</p>
<p>Could it be that you happen to have a <a href="https://wiki.archlinux.org/index.php/Advanced_Format#How_to_determine_if_HDD_employ_a_4k_sector">4k
drive</a>?<br />
Cf.
<a href="https://github.com/rear/rear/issues/1439">https://github.com/rear/rear/issues/1439</a></p>
<h4 id="glenhenshaw_commented_at_2017-10-13_2326"><img src="https://avatars.githubusercontent.com/u/19539769?v=4" width="50"><a href="https://github.com/GlenHenshaw">GlenHenshaw</a> commented at <a href="https://github.com/rear/rear/issues/1532#issuecomment-336589679">2017-10-13 23:26</a>:<a class="headerlink" href="#glenhenshaw_commented_at_2017-10-13_2326" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Do you perhaps use btrfs as filesystem for that USB drive?</p>
</blockquote>
<p>No, in fact it was ext4 (the first time). I will admit that I didn't
format it using ReaR, I used GParted. THe second time around I formatted
it as ext3 using ReaR.</p>
<blockquote>
<p>Could it be that you happen to have a 4k drive?</p>
</blockquote>
<p>Well, not that I know of... I have two storage devices. The main device,
where my normal /tmp folder resides, is a Samsung EVO3 SSD. The other
device, the one that I was trying to use as shown above in the log
files, is a WD Gold 1 Tb hard drive I just bought. Both are formatted
ext4.</p>
<p>As for the USB drive I'm backing up to, I have no idea. How can you
tell?</p>
<h4 id="glenhenshaw_commented_at_2017-10-13_2329"><img src="https://avatars.githubusercontent.com/u/19539769?v=4" width="50"><a href="https://github.com/GlenHenshaw">GlenHenshaw</a> commented at <a href="https://github.com/rear/rear/issues/1532#issuecomment-336590068">2017-10-13 23:29</a>:<a class="headerlink" href="#glenhenshaw_commented_at_2017-10-13_2329" title="Permanent link">&para;</a></h4>
<p>OK, this is getting strange again. I just re-ran ReaR, again making a
backup volume on my USB drive. The same drive as yesterday. Backing up
using the exact same configuration, of the exact same system - I have
literally done nothing to this computer since the last time I used ReaR.
And now it fails, giving me the original error message.</p>
<p>It seems that ReaR, in this case, can only back up to a pristine, newly
formatted USB drive. Is this expected behavior?</p>
<h4 id="glenhenshaw_commented_at_2017-10-13_2341"><img src="https://avatars.githubusercontent.com/u/19539769?v=4" width="50"><a href="https://github.com/GlenHenshaw">GlenHenshaw</a> commented at <a href="https://github.com/rear/rear/issues/1532#issuecomment-336591267">2017-10-13 23:41</a>:<a class="headerlink" href="#glenhenshaw_commented_at_2017-10-13_2341" title="Permanent link">&para;</a></h4>
<p>So I took jsmeix's advice and inserted a rear_shell command in the
script, where it fails. Then, I do:</p>
<pre><code>rear&gt; df /media/bighdd/tmp/rear.jY5PjRNzPMZrcrO/outputfs
Filesystem     1K-blocks     Used Available Use% Mounted on
/dev/sde1       30788604 30788604         0 100% /media/bighdd/tmp/rear.jY5PjRNzPMZrcrO/outputfs
</code></pre>
<p>My HDD isn't on /dev/sde1. It's on /dev/sdb1. The USB I'm backing up to
is what is on /dev/sde1. So "outputfs" is a mount point for the target
USB drive, which ReaR then uses as the rsync target (or something), yes?</p>
<p>Is this telling me is that ReaR thinks it can't backup over an old
existing backup?</p>
<h4 id="jsmeix_commented_at_2017-10-14_1131"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1532#issuecomment-336628997">2017-10-14 11:31</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-10-14_1131" title="Permanent link">&para;</a></h4>
<p>@GlenHenshaw<br />
without a detailed analsysis from plain looking at your<br />
<a href="https://github.com/rear/rear/issues/1532#issuecomment-336591267">https://github.com/rear/rear/issues/1532#issuecomment-336591267</a><br />
I understand it that your original system is on /dev/sdb1<br />
and you like to get the backup written onto /dev/sde1<br />
but on /dev/sde1 there is no space left on device.<br />
If yes, everything works as it should.</p>
<p>You need to use something with already sufficient free space<br />
whereto ReaR can write its data (the ISO image and the backup).<br />
ReaR will not delete any old backup automatically.<br />
You must delete no longer needed old backups on your own,<br />
cf.
<a href="https://github.com/rear/rear/issues/800#issuecomment-297126780">https://github.com/rear/rear/issues/800#issuecomment-297126780</a><br />
and see "Relax-and-Recover versus backup and restore" in<br />
<a href="https://en.opensuse.org/SDB:Disaster_Recovery">https://en.opensuse.org/SDB:Disaster_Recovery</a></p>
<p>I would recommend for backup on USB to use something like</p>
<pre>
BACKUP_URL=usb:///dev/disk/by-label/REAR-000
</pre>

<p>or</p>
<pre>
USB_DEVICE=/dev/disk/by-label/REAR-000
</pre>

<p>to ensure the specific "rear format" formatted device is used<br />
(and not accidentally anything else).</p>
<h4 id="jsmeix_commented_at_2017-10-14_1139"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1532#issuecomment-336629430">2017-10-14 11:39</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-10-14_1139" title="Permanent link">&para;</a></h4>
<p>@GlenHenshaw<br />
see also
<a href="https://github.com/rear/rear/issues/1164">https://github.com/rear/rear/issues/1164</a><br />
and
<a href="https://github.com/rear/rear/pull/1165">https://github.com/rear/rear/pull/1165</a><br />
and see USB_SUFFIX in default.conf<br />
<a href="https://raw.githubusercontent.com/rear/rear/master/usr/share/rear/conf/default.conf">https://raw.githubusercontent.com/rear/rear/master/usr/share/rear/conf/default.conf</a></p>
<p>I guess with an appropriate USB_SUFFIX setting<br />
things will work for you as you expect.</p>
<h4 id="glenhenshaw_commented_at_2017-10-14_1403"><img src="https://avatars.githubusercontent.com/u/19539769?v=4" width="50"><a href="https://github.com/GlenHenshaw">GlenHenshaw</a> commented at <a href="https://github.com/rear/rear/issues/1532#issuecomment-336636830">2017-10-14 14:03</a>:<a class="headerlink" href="#glenhenshaw_commented_at_2017-10-14_1403" title="Permanent link">&para;</a></h4>
<p>OK. This makes sense now. I will set USB_SUFFIX in my local.conf to a
fixed value, so I only ever get one copy of the restore volume, and a
new version will overwrite the old one. That is exactly what I want.</p>
<blockquote>
<p>I would recommend for backup on USB to use something like</p>
<p>BACKUP_URL=usb:///dev/disk/by-label/REAR-000</p>
</blockquote>
<p>Yes. I had been doing it by UUID, but that changes every time you
reformat the device, and is an opportunity for error.</p>
<p>Thanks for the help guys.</p>
<h4 id="glenhenshaw_commented_at_2017-10-14_1619"><img src="https://avatars.githubusercontent.com/u/19539769?v=4" width="50"><a href="https://github.com/GlenHenshaw">GlenHenshaw</a> commented at <a href="https://github.com/rear/rear/issues/1532#issuecomment-336645928">2017-10-14 16:19</a>:<a class="headerlink" href="#glenhenshaw_commented_at_2017-10-14_1619" title="Permanent link">&para;</a></h4>
<p>With that change, it seems to be working as expected. Again, thanks for
all the help.</p>
<h4 id="gozora_commented_at_2017-10-14_1742"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1532#issuecomment-336651414">2017-10-14 17:42</a>:<a class="headerlink" href="#gozora_commented_at_2017-10-14_1742" title="Permanent link">&para;</a></h4>
<p>Just a short add from my site.<br />
When using USB backup with EFI, <code>rear format</code> (by default) creates 2
partitions.</p>
<ol>
<li>EFI system partition (ESP) for booting (I guess you've wrongly used
    this partition for storing backups)</li>
<li>for backup storage</li>
</ol>
<p>You can change default configuration options (filesystem type, partition
sizes, ESP size ...) by overriding appropriate values in
<a href="https://github.com/rear/rear/blob/master/usr/share/rear/conf/default.conf#L362">default.conf</a></p>
<p>V.</p>
<h4 id="glenhenshaw_commented_at_2017-10-14_2014"><img src="https://avatars.githubusercontent.com/u/19539769?v=4" width="50"><a href="https://github.com/GlenHenshaw">GlenHenshaw</a> commented at <a href="https://github.com/rear/rear/issues/1532#issuecomment-336663844">2017-10-14 20:14</a>:<a class="headerlink" href="#glenhenshaw_commented_at_2017-10-14_2014" title="Permanent link">&para;</a></h4>
<p>Well, at this point all I'm doing is a <code>rear format</code> followed by a
<code>rear mkbackup</code>. My local.conf is:</p>
<pre><code>BACKUP=NETFS
OUTPUT=USB
USB_DEVICE=/dev/disk/by-label/REAR-000
USB_SUFFIX=CURRENT
</code></pre>
<p>Am I using the partitions wrong?</p>
<h4 id="gozora_commented_at_2017-10-14_2019"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1532#issuecomment-336664313">2017-10-14 20:19</a>:<a class="headerlink" href="#gozora_commented_at_2017-10-14_2019" title="Permanent link">&para;</a></h4>
<p>Looks good (more/less) ;-)</p>
<p>But try to replace</p>
<pre><code>USB_DEVICE=/dev/disk/by-label/REAR-000
</code></pre>
<p>with</p>
<pre><code>BACKUP_URL=usb:///dev/disk/by-label/REAR-000
</code></pre>
<p>V.</p>
<h4 id="glenhenshaw_commented_at_2017-10-14_2312"><img src="https://avatars.githubusercontent.com/u/19539769?v=4" width="50"><a href="https://github.com/GlenHenshaw">GlenHenshaw</a> commented at <a href="https://github.com/rear/rear/issues/1532#issuecomment-336673879">2017-10-14 23:12</a>:<a class="headerlink" href="#glenhenshaw_commented_at_2017-10-14_2312" title="Permanent link">&para;</a></h4>
<p>OK. Looking at the local.conf documentation, there doesn't seem to be a
difference. What's the difference?</p>
<h4 id="gozora_commented_at_2017-10-15_0740"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1532#issuecomment-336692657">2017-10-15 07:40</a>:<a class="headerlink" href="#gozora_commented_at_2017-10-15_0740" title="Permanent link">&para;</a></h4>
<p>Reading
<a href="https://github.com/rear/rear/blob/master/usr/share/rear/conf/default.conf#L350">default.conf</a></p>
<pre><code># The device to use, set automatically by BACKUP=NETFS and BACKUP_URL=usb:///dev/sdb1
USB_DEVICE=
</code></pre>
<p>and I'm not 100% sure, but BACKUP_URL is mandatory for <code>rear recover</code></p>
<p>V.</p>
<h4 id="jsmeix_commented_at_2017-10-16_0751"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1532#issuecomment-336807778">2017-10-16 07:51</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-10-16_0751" title="Permanent link">&para;</a></h4>
<p>@GlenHenshaw<br />
FYI an addedum regarding your<br />
<a href="https://github.com/rear/rear/issues/1532#issuecomment-336591267">https://github.com/rear/rear/issues/1532#issuecomment-336591267</a><br />
where it seems you use a disk that is already 100% full.</p>
<p>When a disk is 100% full, I would assume<br />
something that was run before had badly failed<br />
because I think in practice it does not happen<br />
that a disk gets exactly 100% full and everything<br />
is stored correctly on that disk.<br />
I mean when a disk is 100% full, it indicates that<br />
something was not completely stored on that disk.</p>
<p>In particular when you do backups on a disk that gets 100% full<br />
I would assume some backup data is incomplete on that disk.</p>
<p>Bottom line:<br />
Check what went wrong so that your disk got 100% filled up.</p>
<h4 id="jsmeix_commented_at_2017-10-16_0803"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1532#issuecomment-336810460">2017-10-16 08:03</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-10-16_0803" title="Permanent link">&para;</a></h4>
<p>@gozora<br />
regarding your<br />
<a href="https://github.com/rear/rear/issues/1532#issuecomment-336692657">https://github.com/rear/rear/issues/1532#issuecomment-336692657</a><br />
"BACKUP_URL is mandatory"</p>
<p>It is not mandatory in general, see "man rear":</p>
<pre>
An example to use TSM for backup and ISO for output
would be to add these lines to /etc/rear/local.conf
(no need to define a BACKUP_URL when using
an external backup solution):
    BACKUP=TSM
    OUTPUT=ISO
</pre>

<p>But I think BACKUP_URL is "more or less mandatory"<br />
for BACKUP=NETFS, see "man rear":</p>
<pre>
When using BACKUP=NETFS you should provide the backup
target location through the BACKUP_URL variable.
</pre>

<p>where "should provide" equals "more or less mandatory" ;-)</p>
<p>In general for testing mandatory variables cf.<br />
<a href="https://github.com/rear/rear/pull/1440#issuecomment-323736213">https://github.com/rear/rear/pull/1440#issuecomment-323736213</a></p>
<h4 id="glenhenshaw_commented_at_2017-10-16_2256"><img src="https://avatars.githubusercontent.com/u/19539769?v=4" width="50"><a href="https://github.com/GlenHenshaw">GlenHenshaw</a> commented at <a href="https://github.com/rear/rear/issues/1532#issuecomment-337067637">2017-10-16 22:56</a>:<a class="headerlink" href="#glenhenshaw_commented_at_2017-10-16_2256" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Bottom line:<br />
Check what went wrong so that your disk got 100% filled up.</p>
</blockquote>
<p>The size of my root partition is 30 Gb of which 12 are free. The size of
the USB device I am backing up to is 32 Gb. After a (supposedly)
successful <code>rear mkbackup</code>, the USB target has 31.5 Gb used.</p>
<p>ReaR <em>does not</em> complain about the disk being full, if I run it as
described above. But I assume that I should probably invest in a bigger
thumb drive...</p>
<h4 id="jsmeix_commented_at_2017-10-26_1039"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1532#issuecomment-339625278">2017-10-26 10:39</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-10-26_1039" title="Permanent link">&para;</a></h4>
<p>FYI:<br />
With only that in local.conf</p>
<pre>
OUTPUT=USB
USB_DEVICE=/dev/sdb1
BACKUP=NETFS
</pre>

<p>I get on /dev/sdb1</p>
<pre>
# mount /dev/sdb1 /tmp/sdb1

# find /tmp/sdb1                  
/tmp/sdb1
/tmp/sdb1/rear
/tmp/sdb1/rear/syslinux.cfg
/tmp/sdb1/rear/e205
/tmp/sdb1/rear/e205/20171026.1217
/tmp/sdb1/rear/e205/20171026.1217/syslinux.cfg
/tmp/sdb1/rear/e205/20171026.1217/kernel
/tmp/sdb1/rear/e205/20171026.1217/rear-e205.log
/tmp/sdb1/rear/e205/20171026.1217/initrd.cgz
/tmp/sdb1/rear/e205/20171026.1217/backup.log
/tmp/sdb1/rear/e205/20171026.1217/backup.tar.gz
/tmp/sdb1/e205
/tmp/sdb1/e205/rear-e205.log
/tmp/sdb1/e205/VERSION
/tmp/sdb1/e205/.lockfile
/tmp/sdb1/e205/README
/tmp/sdb1/boot
/tmp/sdb1/boot/syslinux
/tmp/sdb1/boot/syslinux/pci.ids
/tmp/sdb1/boot/syslinux/ldlinux.sys
/tmp/sdb1/boot/syslinux/config.c32
/tmp/sdb1/boot/syslinux/extlinux.conf
/tmp/sdb1/boot/syslinux/poweroff.com
/tmp/sdb1/boot/syslinux/disk.c32
/tmp/sdb1/boot/syslinux/cmd.c32
/tmp/sdb1/boot/syslinux/sysdump.c32
/tmp/sdb1/boot/syslinux/chain.c32
/tmp/sdb1/boot/syslinux/hdt.c32
/tmp/sdb1/boot/syslinux/cat.c32
/tmp/sdb1/boot/syslinux/reboot.c32
/tmp/sdb1/boot/syslinux/cpuid.c32
/tmp/sdb1/boot/syslinux/menu.c32
/tmp/sdb1/boot/syslinux/rosh.c32
/tmp/sdb1/boot/syslinux/ls.c32
/tmp/sdb1/boot/syslinux/host.c32
/tmp/sdb1/boot/syslinux/rear.help
/tmp/sdb1/boot/syslinux/message
/tmp/sdb1/boot/syslinux/vesamenu.c32
/tmp/sdb1/boot/syslinux/lua.c32
/tmp/sdb1/boot/syslinux/kbdmap.c32
</pre>

<p>i.e. it seems one does not need a BACKUP_URL<br />
in case of BACKUP=NETFS together with OUTPUT=USB<br />
but in this case "rear recover" fails:</p>
<pre>
RESCUE e205:~ # rear -d -D recover
Relax-and-Recover 2.2 / Git
Using log file: /var/log/rear/rear-e205.log
Running workflow recover within the ReaR rescue/recovery system
ERROR: You must specify either BACKUP_URL or BACKUP_MOUNTCMD and BACKUP_UMOUNTCMD !
Aborting due to an error, check /var/log/rear/rear-e205.log for details
</pre>

<p>I changed in the recovery sytem /etc/rear/local.conf to</p>
<pre>
OUTPUT=USB
USB_DEVICE=/dev/sdb1
BACKUP=NETFS
BACKUP_URL=usb:///dev/sdb1
</pre>

<p>and now "rear recover" works so that in practice<br />
a BACKUP_URL is actually required.</p>
<h4 id="gdha_commented_at_2017-10-26_1123"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/1532#issuecomment-339634967">2017-10-26 11:23</a>:<a class="headerlink" href="#gdha_commented_at_2017-10-26_1123" title="Permanent link">&para;</a></h4>
<p>@jsmeix the man page of rear mentions that <code>BACKUP=NETFS</code> requires a
backup target location through variable <code>BACKUP_URL</code>. I would say the
odd variable is <code>USB_DEVICE=/dev/sdb1</code>, but that had probably historical
reasons (implemented by Dag and Jeroen).</p>
<h4 id="jsmeix_commented_at_2017-10-26_1126"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1532#issuecomment-339635561">2017-10-26 11:26</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-10-26_1126" title="Permanent link">&para;</a></h4>
<p>@gdha<br />
the man page of rear does not "require"<br />
a BACKUP_URL for BACKUP=NETFS,<br />
it only reads "should provide".<br />
I will correct that.</p>
<h4 id="jsmeix_commented_at_2017-10-26_1132"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1532#issuecomment-339636769">2017-10-26 11:32</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-10-26_1132" title="Permanent link">&para;</a></h4>
<p>Fixed via<br />
<a href="https://github.com/rear/rear/pull/1549/commits/49b534ebb177b7c9a49731b2535bdb001a9b0085">https://github.com/rear/rear/pull/1549/commits/49b534ebb177b7c9a49731b2535bdb001a9b0085</a><br />
in
<a href="https://github.com/rear/rear/pull/1549">https://github.com/rear/rear/pull/1549</a></p>
<h4 id="jsmeix_commented_at_2017-10-26_1150"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1532#issuecomment-339640844">2017-10-26 11:50</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-10-26_1150" title="Permanent link">&para;</a></h4>
<p>I verified that with only</p>
<pre>
OUTPUT=USB
BACKUP=NETFS
BACKUP_URL=usb:///dev/sdb1
</pre>

<p>both "rear mkbackup" and "rear recover" work well for me.</p>
<p>With only</p>
<pre>
OUTPUT=USB
USB_DEVICE=/dev/sdb1
BACKUP=NETFS
</pre>

<p>it errors out now:</p>
<pre>
# usr/sbin/rear -d -D mkbackup
...
ERROR: BACKUP=NETFS requires a BACKUP_URL backup target location
Aborting due to an error, check /root/rear.master/var/log/rear/rear-e205.log for details
</pre>

<h4 id="jsmeix_commented_at_2017-10-26_1159"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1532#issuecomment-339642945">2017-10-26 11:59</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-10-26_1159" title="Permanent link">&para;</a></h4>
<p>With
<a href="https://github.com/rear/rear/pull/1549">https://github.com/rear/rear/pull/1549</a>
merged<br />
this issue should now be completely fixed.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2025 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2017-10-12.1532.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
