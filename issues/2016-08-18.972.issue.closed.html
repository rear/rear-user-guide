<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#972 Issue closed: cryptsetup fails on restore due to missing cracklib dictionaries - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#972 Issue closed: cryptsetup fails on restore due to missing cracklib dictionaries";
        var mkdocs_page_input_path = "issues/2016-08-18.972.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
      <li class="breadcrumb-item active">#972 Issue closed: cryptsetup fails on restore due to missing cracklib dictionaries</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="972_issue_closed_cryptsetup_fails_on_restore_due_to_missing_cracklib_dictionaries"><a href="https://github.com/rear/rear/issues/972">#972 Issue</a> <code>closed</code>: cryptsetup fails on restore due to missing cracklib dictionaries<a class="headerlink" href="#972_issue_closed_cryptsetup_fails_on_restore_due_to_missing_cracklib_dictionaries" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>support / question</code>, <code>fixed / solved / done</code></p>
<h4 id="nikbarron_opened_issue_at_2016-08-18_0935"><img src="https://avatars.githubusercontent.com/u/21100372?v=4" width="50"><a href="https://github.com/nikbarron">nikbarron</a> opened issue at <a href="https://github.com/rear/rear/issues/972">2016-08-18 09:35</a>:<a class="headerlink" href="#nikbarron_opened_issue_at_2016-08-18_0935" title="Permanent link">&para;</a></h4>
<p>Please fill in the following items before submitting a new issue:</p>
<ul>
<li>rear version (/usr/sbin/rear -V): 1.17.2 / Git</li>
<li>OS version (cat /etc/rear/os.conf or lsb_release -a): CentOS 7
    (reports as RedHatEnterpriseServer/7)</li>
<li>rear configuration files (cat /etc/rear/site.conf or cat
    /etc/rear/local.conf):</li>
</ul>
<p>OUTPUT=ISO<br />
BACKUP=NETFS<br />
BACKUP_URL=cifs://swss-nas3/REAR_Backups<br />
BACKUP_OPTIONS="cred=/etc/rear/cifs"</p>
<ul>
<li>Brief description of the issue</li>
</ul>
<p>There is an issue with restoring a system that uses LUKS encryption,
which fails as shown in the attached screenshot with "An error occurred
during layout recreation" immediately after the first password prompt to
recreate the LUKS volume:</p>
<p><img alt="rear-001" src="https://cloud.githubusercontent.com/assets/21100372/17769059/d88ed8c6-652e-11e6-823a-59942016fcb0.jpg" /></p>
<p>Digging into this further I found that the issue is caused by the
password quality check on cryptsetyp, which requires the cracklib
dictionaries, which appear to be missing from the restore media:</p>
<p><img alt="rear-002" src="https://cloud.githubusercontent.com/assets/21100372/17769060/d88fb69c-652e-11e6-8593-78a8c91752c8.jpg" /></p>
<p>The system the ISO was generated from has the cracklib packages
installed, so I guess the ISO creation process needs to be amended to
include them?</p>
<ul>
<li>Work-around, if any</li>
</ul>
<p>There's a simple workaround, edit the restore script and add the
--force-password switch to the cryptsetup command(s), which skips the
password quality check. The restore process then runs fine and restores
as expected.</p>
<h4 id="jsmeix_commented_at_2016-08-18_1059"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/972#issuecomment-240691186">2016-08-18 10:59</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-08-18_1059" title="Permanent link">&para;</a></h4>
<p>In general when something special is not automatically<br />
included in the rescue/recovery system, you can<br />
specify whatever you want to get it included<br />
by using in /etc/rear/local.conf things like</p>
<pre>
REQUIRED_PROGS=( "${REQUIRED_PROGS[@]}" progam1 program2 )
COPY_AS_IS=( "${COPY_AS_IS[@]}" file1 file2 directory1 directory2 )
</pre>

<p>for an example see<br />
/usr/share/rear/conf/examples/SLE12-SP1-btrfs-example.conf<br />
and in general for what you can configure<br />
see /usr/share/rear/conf/default.conf</p>
<h4 id="gdha_commented_at_2016-08-18_1203"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/972#issuecomment-240703099">2016-08-18 12:03</a>:<a class="headerlink" href="#gdha_commented_at_2016-08-18_1203" title="Permanent link">&para;</a></h4>
<p>Issue #679 is about the same - see the solution provided - it will be
included in 1.18<br />
If this is sufficient for you then close this issue please?</p>
<h4 id="nikbarron_commented_at_2016-08-18_1215"><img src="https://avatars.githubusercontent.com/u/21100372?v=4" width="50"><a href="https://github.com/nikbarron">nikbarron</a> commented at <a href="https://github.com/rear/rear/issues/972#issuecomment-240705458">2016-08-18 12:15</a>:<a class="headerlink" href="#nikbarron_commented_at_2016-08-18_1215" title="Permanent link">&para;</a></h4>
<p>Hi,</p>
<p>Sure, it was more of a heads-up, thought it should probably include the
cryptlib by default as it includes LUKS support.</p>
<p>Happy to close, awesome work on REAR btw, off to donate now!</p>
<h4 id="gdha_commented_at_2016-08-18_1323"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/972#issuecomment-240721216">2016-08-18 13:23</a>:<a class="headerlink" href="#gdha_commented_at_2016-08-18_1323" title="Permanent link">&para;</a></h4>
<p>@nikbarron Thank you for your kind donation - it makes my day ;-)</p>
<h4 id="nikbarron_commented_at_2016-08-18_1326"><img src="https://avatars.githubusercontent.com/u/21100372?v=4" width="50"><a href="https://github.com/nikbarron">nikbarron</a> commented at <a href="https://github.com/rear/rear/issues/972#issuecomment-240722039">2016-08-18 13:26</a>:<a class="headerlink" href="#nikbarron_commented_at_2016-08-18_1326" title="Permanent link">&para;</a></h4>
<p>You’re most welcome!</p>
<p>From: gdha [mailto:<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;">&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a>]<br />
Sent: 18 August 2016 14:23<br />
To: rear/rear <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#114;&#101;&#97;&#114;&#64;&#110;&#111;&#114;&#101;&#112;&#108;&#121;&#46;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;">&#114;&#101;&#97;&#114;&#64;&#110;&#111;&#114;&#101;&#112;&#108;&#121;&#46;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a><br />
Cc: Nik Barron <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#110;&#105;&#99;&#107;&#46;&#98;&#97;&#114;&#114;&#111;&#110;&#64;&#112;&#101;&#110;&#110;&#97;&#110;&#116;&#112;&#108;&#99;&#46;&#99;&#111;&#46;&#117;&#107;">&#110;&#105;&#99;&#107;&#46;&#98;&#97;&#114;&#114;&#111;&#110;&#64;&#112;&#101;&#110;&#110;&#97;&#110;&#116;&#112;&#108;&#99;&#46;&#99;&#111;&#46;&#117;&#107;</a>; Mention
<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#109;&#101;&#110;&#116;&#105;&#111;&#110;&#64;&#110;&#111;&#114;&#101;&#112;&#108;&#121;&#46;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;">&#109;&#101;&#110;&#116;&#105;&#111;&#110;&#64;&#110;&#111;&#114;&#101;&#112;&#108;&#121;&#46;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a><br />
Subject: Re: [rear/rear] cryptsetup fails on restore due to missing
cracklib dictionaries (#972)</p>
<p>@nikbarronhttps://github.com/nikbarron Thank you for your kind donation
- it makes my day ;-)</p>
<p>—<br />
You are receiving this because you were mentioned.<br />
Reply to this email directly, view it on
GitHubhttps://github.com/rear/rear/issues/972#issuecomment-240721216,
or mute the
threadhttps://github.com/notifications/unsubscribe-auth/AUH3VAKmpmZIgGmYH6mHdz-9q7e9J0mlks5qhFzKgaJpZM4JnTms.</p>
<hr />
<p>This email has been scanned by the Symantec Email Security.cloud
service.<br />
For more information please visit
<a href="http://www.symanteccloud.com">http://www.symanteccloud.com</a></p>
<hr />
<hr />
<p>This email has been scanned by the Symantec Email Security.cloud
service.<br />
For more information please visit
<a href="http://www.symanteccloud.com">http://www.symanteccloud.com</a></p>
<hr />
<h4 id="jsmeix_commented_at_2016-08-18_1425"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/972#issuecomment-240739377">2016-08-18 14:25</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-08-18_1425" title="Permanent link">&para;</a></h4>
<p>@nikbarron<br />
only FYI if you like to try out the currently<br />
newest rear GitHub master code:</p>
<p>In general regarding how to test the currently<br />
newest rear GitHub master code:<br />
Basically "git clone" it into a directory and<br />
then run rear from within that directory.</p>
<pre>
# git clone https://github.com/rear/rear.git
# cd rear
# vi etc/rear/local.conf
# usr/sbin/rear -d -D mkbackup
</pre>

<h4 id="nikbarron_commented_at_2016-08-18_1447"><img src="https://avatars.githubusercontent.com/u/21100372?v=4" width="50"><a href="https://github.com/nikbarron">nikbarron</a> commented at <a href="https://github.com/rear/rear/issues/972#issuecomment-240746491">2016-08-18 14:47</a>:<a class="headerlink" href="#nikbarron_commented_at_2016-08-18_1447" title="Permanent link">&para;</a></h4>
<p>Thanks, will give that a try</p>
<p>Nik</p>
<p>Sent from my Android phone using Symantec TouchDown
(<a href="http://www.symantec.com">www.symantec.com</a>)</p>
<p>-----Original Message-----<br />
From: Johannes Meixner [<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;">&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a>]<br />
Received: Thursday, 18 Aug 2016, 15:25<br />
To: rear/rear [<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#114;&#101;&#97;&#114;&#64;&#110;&#111;&#114;&#101;&#112;&#108;&#121;&#46;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;">&#114;&#101;&#97;&#114;&#64;&#110;&#111;&#114;&#101;&#112;&#108;&#121;&#46;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a>]<br />
CC: Nik Barron [<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#110;&#105;&#99;&#107;&#46;&#98;&#97;&#114;&#114;&#111;&#110;&#64;&#112;&#101;&#110;&#110;&#97;&#110;&#116;&#112;&#108;&#99;&#46;&#99;&#111;&#46;&#117;&#107;">&#110;&#105;&#99;&#107;&#46;&#98;&#97;&#114;&#114;&#111;&#110;&#64;&#112;&#101;&#110;&#110;&#97;&#110;&#116;&#112;&#108;&#99;&#46;&#99;&#111;&#46;&#117;&#107;</a>]; Mention
[<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#109;&#101;&#110;&#116;&#105;&#111;&#110;&#64;&#110;&#111;&#114;&#101;&#112;&#108;&#121;&#46;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;">&#109;&#101;&#110;&#116;&#105;&#111;&#110;&#64;&#110;&#111;&#114;&#101;&#112;&#108;&#121;&#46;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a>]<br />
Subject: Re: [rear/rear] cryptsetup fails on restore due to missing
cracklib dictionaries (#972)</p>
<p>@nikbarronhttps://github.com/nikbarron<br />
only FYI if you like to try out the currently<br />
newest rear GitHub master code:</p>
<p>In general regarding how to test the currently<br />
newest rear GitHub master code:<br />
Basically "git clone" it into a directory and<br />
then run rear from within that directory.</p>
<h1 id="git_clone_httpsgithubcomrearreargit">git clone <a href="https://github.com/rear/rear.git">https://github.com/rear/rear.git</a><a class="headerlink" href="#git_clone_httpsgithubcomrearreargit" title="Permanent link">&para;</a></h1>
<h1 id="cd_rear">cd rear<a class="headerlink" href="#cd_rear" title="Permanent link">&para;</a></h1>
<h1 id="vi_etcrearlocalconf">vi etc/rear/local.conf<a class="headerlink" href="#vi_etcrearlocalconf" title="Permanent link">&para;</a></h1>
<h1 id="usrsbinrear_-d_-d_mkbackup">usr/sbin/rear -d -D mkbackup<a class="headerlink" href="#usrsbinrear_-d_-d_mkbackup" title="Permanent link">&para;</a></h1>
<p>—<br />
You are receiving this because you were mentioned.<br />
Reply to this email directly, view it on
GitHubhttps://github.com/rear/rear/issues/972#issuecomment-240739377,
or mute the
threadhttps://github.com/notifications/unsubscribe-auth/AUH3VEqdbduMEVm1tuI9WpditJdkfyqpks5qhGtigaJpZM4JnTms.</p>
<hr />
<p>This email has been scanned by the Symantec Email Security.cloud
service.<br />
For more information please visit
<a href="http://www.symanteccloud.com">http://www.symanteccloud.com</a></p>
<hr />
<hr />
<p>This email has been scanned by the Symantec Email Security.cloud
service.<br />
For more information please visit
<a href="http://www.symanteccloud.com">http://www.symanteccloud.com</a></p>
<hr />
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2023 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2016-08-18.972.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
