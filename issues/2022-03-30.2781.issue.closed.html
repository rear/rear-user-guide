<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#2781 Issue closed: Missing /usr/share/rear/output/PXE/default/820_copy_to_net.sh and PXE output fails with rsync protocol - DRLM issue 189 - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#2781 Issue closed: Missing /usr/share/rear/output/PXE/default/820_copy_to_net.sh and PXE output fails with rsync protocol - DRLM issue 189";
        var mkdocs_page_input_path = "issues/2022-03-30.2781.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#2781 Issue closed: Missing /usr/share/rear/output/PXE/default/820_copy_to_net.sh and PXE output fails with rsync protocol - DRLM issue 189</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="2781_issue_closed_missing_usrsharerearoutputpxedefault820_copy_to_netsh_and_pxe_output_fails_with_rsync_protocol_-_drlm_issue_189"><a href="https://github.com/rear/rear/issues/2781">#2781 Issue</a> <code>closed</code>: Missing /usr/share/rear/output/PXE/default/820_copy_to_net.sh and PXE output fails with rsync protocol - DRLM issue 189<a class="headerlink" href="#2781_issue_closed_missing_usrsharerearoutputpxedefault820_copy_to_netsh_and_pxe_output_fails_with_rsync_protocol_-_drlm_issue_189" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>cleanup</code>, <code>fixed / solved / done</code></p>
<h4 id="didacog_opened_issue_at_2022-03-30_0843"><img src="https://avatars.githubusercontent.com/u/5380209?u=163f1571e6b9c9c7df94e2c6ca152b0a7406b52d&v=4" width="50"><a href="https://github.com/didacog">didacog</a> opened issue at <a href="https://github.com/rear/rear/issues/2781">2022-03-30 08:43</a>:<a class="headerlink" href="#didacog_opened_issue_at_2022-03-30_0843" title="Permanent link">&para;</a></h4>
<h4 id="relax-and-recover_rear_issue_template">Relax-and-Recover (ReaR) Issue Template<a class="headerlink" href="#relax-and-recover_rear_issue_template" title="Permanent link">&para;</a></h4>
<p>Fill in the following items before submitting a new issue<br />
(quick response is not guaranteed with free support):</p>
<ul>
<li>
<p>ReaR version ("/usr/sbin/rear -V"): 2.6</p>
</li>
<li>
<p>OS version ("cat /etc/os-release" or "lsb_release -a" or "cat
    /etc/rear/os.conf"): RHEL 8.5</p>
</li>
<li>
<p>ReaR configuration files ("cat /etc/rear/site.conf" and/or "cat
    /etc/rear/local.conf"): DRLM managed</p>
</li>
<li>
<p>Hardware vendor/product (PC or PowerNV BareMetal or ARM) or VM (KVM
    guest or PowerVM LPAR): PowerVM LPAR</p>
</li>
<li>
<p>System architecture (x86 compatible or PPC64/PPC64LE or what exact
    ARM device): ppc64le</p>
</li>
<li>
<p>Firmware (BIOS or UEFI or Open Firmware) and bootloader (GRUB or
    ELILO or Petitboot):</p>
</li>
<li>
<p>Storage (local disk or SSD) and/or SAN (FC or iSCSI or FCoE) and/or
    multipath (DM or NVMe): SAN</p>
</li>
<li>
<p>Storage layout ("lsblk -ipo
    NAME,KNAME,PKNAME,TRAN,TYPE,FSTYPE,LABEL,SIZE,MOUNTPOINT"):</p>
</li>
<li>
<p>Description of the issue (ideally so that others can reproduce it):</p>
</li>
</ul>
<p>The initrd and kernel files of the PXE ouput are not being copied
properly on OUTPUT_PREFIX using RSYNC</p>
<ul>
<li>Workaround, if any:</li>
</ul>
<p>put back the /usr/share/rear/output/PXE/default/820_copy_to_net.sh in
place to do it properly</p>
<ul>
<li>Attachments, as applicable ("rear -D mkrescue/mkbackup/recover"
    debug log files):</li>
</ul>
<p>see:
<a href="https://github.com/brainupdaters/drlm/issues/189">https://github.com/brainupdaters/drlm/issues/189</a></p>
<p>To paste verbatim text like command output or file content,<br />
include it between a leading and a closing line of three backticks like</p>
<pre><code>```
verbatim content
```
</code></pre>
<h4 id="pcahyna_commented_at_2022-03-30_0901"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1082813056">2022-03-30 09:01</a>:<a class="headerlink" href="#pcahyna_commented_at_2022-03-30_0901" title="Permanent link">&para;</a></h4>
<blockquote>
<ul>
<li>ReaR version ("/usr/sbin/rear -V"): 2.6</li>
</ul>
</blockquote>
<p>The file is there in 2.6, so I suppose you are using the current
development version, or the 2.6 version provided with RHEL 8.5 ?</p>
<p>The file was removed by me in 14a9a61d62b02a27f55495320f2d0e1090a72c30 -
I will check why it is still needed. I suppose the relevant
configuration file is
<a href="https://github.com/brainupdaters/drlm/issues/189#issuecomment-1081634198">https://github.com/brainupdaters/drlm/issues/189#issuecomment-1081634198</a>
?</p>
<h4 id="didacog_commented_at_2022-03-30_0909"><img src="https://avatars.githubusercontent.com/u/5380209?u=163f1571e6b9c9c7df94e2c6ca152b0a7406b52d&v=4" width="50"><a href="https://github.com/didacog">didacog</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1082820370">2022-03-30 09:09</a>:<a class="headerlink" href="#didacog_commented_at_2022-03-30_0909" title="Permanent link">&para;</a></h4>
<p>is still needed by PXE output with rsync proto, if not is not sending
properly the PXE required files in OUTPUT PREFIX location.</p>
<h4 id="pcahyna_commented_at_2022-03-30_0933"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1082843812">2022-03-30 09:33</a>:<a class="headerlink" href="#pcahyna_commented_at_2022-03-30_0933" title="Permanent link">&para;</a></h4>
<p>I checked the ReaR debug log. It reads</p>
<pre><code>2022-03-28 08:26:39.624312668 Copying files '/var/lib/rear/output/&lt;censored-host&gt;.kernel /var/lib/rear/output/&lt;censored-host&gt;.initrd.cgz /var/lib/rear/output/&lt;censored-host&gt;.message /var/lib/rear/output/rear-&lt;censored-host&gt;' to rsync://&lt;censored-host&gt;@&lt;censored-subnet&gt;.123/&lt;censored-host&gt;_default/PXE/ location
++ cp -v /var/lib/rear/output/&lt;censored-host&gt;.kernel /var/lib/rear/output/&lt;censored-host&gt;.initrd.cgz /var/lib/rear/output/&lt;censored-host&gt;.message /var/lib/rear/output/rear-&lt;censored-host&gt; /tmp/rear.edPhWcoyMoFm3zO/tmp/rsync//
'/var/lib/rear/output/&lt;censored-host&gt;.kernel' -&gt; '/tmp/rear.edPhWcoyMoFm3zO/tmp/rsync/&lt;censored-host&gt;.kernel'
'/var/lib/rear/output/&lt;censored-host&gt;.initrd.cgz' -&gt; '/tmp/rear.edPhWcoyMoFm3zO/tmp/rsync/&lt;censored-host&gt;.initrd.cgz'
'/var/lib/rear/output/&lt;censored-host&gt;.message' -&gt; '/tmp/rear.edPhWcoyMoFm3zO/tmp/rsync/&lt;censored-host&gt;.message'
'/var/lib/rear/output/rear-&lt;censored-host&gt;' -&gt; '/tmp/rear.edPhWcoyMoFm3zO/tmp/rsync/rear-&lt;censored-host&gt;'
++ echo '
Relax-and-Recover 2.6 / 2020-06-17

Relax-and-Recover comes with ABSOLUTELY NO WARRANTY; for details see
the GNU General Public License at: http://www.gnu.org/licenses/gpl.html

Host &lt;censored-host&gt; using Backup RSYNC and Output PXE
Build date: Mon, 28 Mar 2022 08:25:42 +0200
'
+++ get_template RESULT_usage_PXE.txt
+++ [[ -e /etc/rear/templates/RESULT_usage_PXE.txt ]]
+++ echo /usr/share/rear/conf/templates/RESULT_usage_PXE.txt
++ cp -v /usr/share/rear/conf/templates/RESULT_usage_PXE.txt /tmp/rear.edPhWcoyMoFm3zO/tmp/rsync//README
'/usr/share/rear/conf/templates/RESULT_usage_PXE.txt' -&gt; '/tmp/rear.edPhWcoyMoFm3zO/tmp/rsync//README'
++ cat /var/log/rear/rear-&lt;censored-host&gt;.log
++ case $RSYNC_PROTO in
++ Log 'rsync -a /tmp/rear.edPhWcoyMoFm3zO/tmp/rsync// --sparse --archive --hard-links --numeric-ids --stats --devices --acls --xattrs rsync://&lt;censored-host&gt;@&lt;censored-subnet&gt;.123:873/&lt;censored-host&gt;_default//'
++ echo '2022-03-28 08:26:39.669531306 rsync -a /tmp/rear.edPhWcoyMoFm3zO/tmp/rsync// --sparse --archive --hard-links --numeric-ids --stats --devices --acls --xattrs rsync://&lt;censored-host&gt;@&lt;censored-subnet&gt;.123:873/&lt;censored-host&gt;_default//'
2022-03-28 08:26:39.669531306 rsync -a /tmp/rear.edPhWcoyMoFm3zO/tmp/rsync// --sparse --archive --hard-links --numeric-ids --stats --devices --acls --xattrs rsync://&lt;censored-host&gt;@&lt;censored-subnet&gt;.123:873/&lt;censored-host&gt;_default//
++ rsync -a /tmp/rear.edPhWcoyMoFm3zO/tmp/rsync// --sparse --archive --hard-links --numeric-ids --stats --devices --acls --xattrs rsync://&lt;censored-host&gt;@&lt;censored-subnet&gt;.123:873/&lt;censored-host&gt;_default//
DRLM server 2.4.1

Number of files: 9 (reg: 7, dir: 2)
Number of created files: 7 (reg: 7)
Number of deleted files: 0
Number of regular files transferred: 7
Total file size: 137,041,987 bytes
Total transferred file size: 137,041,987 bytes
Literal data: 137,041,987 bytes
Matched data: 0 bytes
File list size: 0
File list generation time: 0.001 seconds
File list transfer time: 0.000 seconds
Total bytes sent: 137,076,084
Total bytes received: 165

sent 137,076,084 bytes  received 165 bytes  54,830,499.60 bytes/sec
total size is 137,041,987  speedup is 1.00
</code></pre>
<p>So the files <code>&lt;censored-host&gt;.initrd.cgz</code> and <code>&lt;censored-host&gt;.kernel</code>
were copied to
<code>rsync://&lt;censored-host&gt;@&lt;censored-subnet&gt;.123:873/&lt;censored-host&gt;_default//</code>
(by <code>output/RSYNC/default/900_copy_result_files.sh</code>). Now I don't
understand why they are missing.</p>
<h4 id="gdha_commented_at_2022-03-30_0957"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1082879718">2022-03-30 09:57</a>:<a class="headerlink" href="#gdha_commented_at_2022-03-30_0957" title="Permanent link">&para;</a></h4>
<p>@pcahyna this was I got from the git history:</p>
<pre><code>$ git log -- 820_copy_to_net.sh
commit 14a9a61d62b02a27f55495320f2d0e1090a72c30
Author: Pavel Cahyna &lt;pcahyna@redhat.com&gt;
Date:   Fri Jun 18 13:10:56 2021 +0200

    Revert "add script from Andreas Lemke to xfer to PXE server"

    This reverts commit d850c4094238a03c9b926b88d7e1582ecd28af52.

    The script probably made sense when it was submitted, but in the
    meantime generic handling of transfer of output files got implemented
    ( a8fdc44 ), which made it redundant when it was committed.
</code></pre>
<h4 id="pcahyna_commented_at_2022-03-30_1001"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1082883821">2022-03-30 10:01</a>:<a class="headerlink" href="#pcahyna_commented_at_2022-03-30_1001" title="Permanent link">&para;</a></h4>
<p>@gdha indeed, and the file that is supposed to replace it has this:<br />
<a href="https://github.com/rear/rear/blob/14a9a61d62b02a27f55495320f2d0e1090a72c30/usr/share/rear/output/default/950_copy_result_files.sh#L132">https://github.com/rear/rear/blob/14a9a61d62b02a27f55495320f2d0e1090a72c30/usr/share/rear/output/default/950_copy_result_files.sh#L132</a><br />
so the copying there gets skipped, because</p>
<blockquote>
<p><code># If BACKUP = RSYNC output/RSYNC/default/900_copy_result_files.sh took care of it:</code></p>
</blockquote>
<p>and indeed, according to the log provided by the user,
<code>output/RSYNC/default/900_copy_result_files.sh</code> took care of it. So I
don't understand yet what's the problem....</p>
<h4 id="pcahyna_commented_at_2022-03-30_1019"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1082901473">2022-03-30 10:19</a>:<a class="headerlink" href="#pcahyna_commented_at_2022-03-30_1019" title="Permanent link">&para;</a></h4>
<p>It seems that the underlying problem is that
<a href="https://github.com/rear/rear/blob/14a9a61d62b02a27f55495320f2d0e1090a72c30/usr/share/rear/prep/RSYNC/default/100_check_rsync.sh">https://github.com/rear/rear/blob/14a9a61d62b02a27f55495320f2d0e1090a72c30/usr/share/rear/prep/RSYNC/default/100_check_rsync.sh</a>
sets the various <code>RSYNC_</code> variables according to <code>BACKUP_URL</code>, but the
results are used also in the output stage, so if
<code>OUTPUT_URL != BACKUP_URL</code> (which is the case here), the output files
get uploaded to <code>BACKUP_URL</code> instead of <code>OUTPUT_URL</code>.</p>
<p>That's quite a confusion and I think that my removal of that script is
not the only place that exposes the problem. See also
<code>usr/share/rear/output/RSYNC/default/900_copy_result_files.sh</code>, I think
it has been also placing output files to <code>BACKUP_URL</code>.</p>
<h4 id="pcahyna_commented_at_2022-03-30_1033"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1082917186">2022-03-30 10:33</a>:<a class="headerlink" href="#pcahyna_commented_at_2022-03-30_1033" title="Permanent link">&para;</a></h4>
<p>Sorry for causing you this problem. You may be the only one who sets
<code>BACKUP_URL</code> different from <code>OUTPUT_URL</code> in the case of rsync and in
your case the PXE script was circumventing the problem until I removed
it.</p>
<h4 id="pcahyna_commented_at_2022-03-30_1035"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1082922461">2022-03-30 10:35</a>:<a class="headerlink" href="#pcahyna_commented_at_2022-03-30_1035" title="Permanent link">&para;</a></h4>
<p>I believe that using global <code>RSYNC_</code> variables is a bad idea. Any code
that needs them should set local variables for this purpose and decide
itself if it needs to set them according to <code>BACKUP_URL</code> or
<code>OUTPUT_URL</code>.</p>
<h4 id="didacog_commented_at_2022-03-30_1229"><img src="https://avatars.githubusercontent.com/u/5380209?u=163f1571e6b9c9c7df94e2c6ca152b0a7406b52d&v=4" width="50"><a href="https://github.com/didacog">didacog</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1083080054">2022-03-30 12:29</a>:<a class="headerlink" href="#didacog_commented_at_2022-03-30_1229" title="Permanent link">&para;</a></h4>
<p>I agree, we must stick to BACKUP_URL / OUTPUT_URL vars to avoid
strange behavior like this.</p>
<h4 id="github-actions_commented_at_2022-06-01_0352"><img src="https://avatars.githubusercontent.com/in/15368?v=4" width="50"><a href="https://github.com/apps/github-actions">github-actions</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1143087285">2022-06-01 03:52</a>:<a class="headerlink" href="#github-actions_commented_at_2022-06-01_0352" title="Permanent link">&para;</a></h4>
<p>Stale issue message</p>
<h4 id="didacog_commented_at_2022-06-01_0908"><img src="https://avatars.githubusercontent.com/u/5380209?u=163f1571e6b9c9c7df94e2c6ca152b0a7406b52d&v=4" width="50"><a href="https://github.com/didacog">didacog</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1143336067">2022-06-01 09:08</a>:<a class="headerlink" href="#didacog_commented_at_2022-06-01_0908" title="Permanent link">&para;</a></h4>
<p>@pcahyna do you have any PR pending to solve this issue? how can we help
to get rid of this issue before 2.7 release?</p>
<h4 id="pcahyna_commented_at_2022-06-01_1120"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1143475241">2022-06-01 11:20</a>:<a class="headerlink" href="#pcahyna_commented_at_2022-06-01_1120" title="Permanent link">&para;</a></h4>
<p>@didacog not yet, but I am about to start working on this issue and have
it resolved by 2.7, either by cleaning up the URL use with rsync or, if
this proves too difficult, at least by restoring the old script
temporarily.</p>
<h4 id="didacog_commented_at_2022-06-01_1124"><img src="https://avatars.githubusercontent.com/u/5380209?u=163f1571e6b9c9c7df94e2c6ca152b0a7406b52d&v=4" width="50"><a href="https://github.com/didacog">didacog</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1143479749">2022-06-01 11:24</a>:<a class="headerlink" href="#didacog_commented_at_2022-06-01_1124" title="Permanent link">&para;</a></h4>
<p>ok, perfect. let us know if something is needed from us.</p>
<h4 id="pcahyna_commented_at_2022-06-01_1549"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1143782552">2022-06-01 15:49</a>:<a class="headerlink" href="#pcahyna_commented_at_2022-06-01_1549" title="Permanent link">&para;</a></h4>
<p>Reproducer for the underlying issue:</p>
<pre><code>BACKUP=RSYNC
BACKUP_PROG_EXCLUDE+=( '/home/reartestuser/rsync' )
BACKUP_URL=rsync://reartestuser@localhost/home/reartestuser/rsync/backup/
OUTPUT_URL=rsync://reartestuser@localhost/home/reartestuser/rsync/output/
</code></pre>
<p>and</p>
<pre><code>mkdir -p /home/reartestuser/rsync/backup/
mkdir -p /home/reartestuser/rsync/output/
chown reartestuser /home/reartestuser/rsync/backup/ /home/reartestuser/rsync/output/
rear mkbackup
</code></pre>
<p>After that, <code>/home/reartestuser/rsync/backup/*</code> contains both <code>backup</code>
and <code>rear-*.iso</code>, while <code>/home/reartestuser/rsync/output</code> is empty.</p>
<h4 id="jsmeix_commented_at_2022-06-09_0841"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1150840721">2022-06-09 08:41</a>:<a class="headerlink" href="#jsmeix_commented_at_2022-06-09_0841" title="Permanent link">&para;</a></h4>
<p>I marked this issue as 'blocker' for ReaR 2.7<br />
because it seems to be a regression which<br />
should be solved or avoided for ReaR 2.7.</p>
<h4 id="pcahyna_commented_at_2022-06-20_0900"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1160172273">2022-06-20 09:00</a>:<a class="headerlink" href="#pcahyna_commented_at_2022-06-20_0900" title="Permanent link">&para;</a></h4>
<p>Hi @didacog</p>
<p>when working on a generic solution for the rsync URL oddities, I
realized that there was an irregularity in how the URL was handled in
the (now removed)
<code>usr/share/rear/output/PXE/default/820_copy_to_net.sh script</code>. The
script had</p>
<pre><code>case "$scheme" in
...
    (rsync)
...
            rsync -a $v "$result_file" "$OUTPUT_URL"
</code></pre>
<p>What I am trying to do is to make the more generic script
<code>share/rear/output/RSYNC/default/900_copy_result_files.sh</code> take care of
it (it already uploads the files, but to <code>$BACKUP_URL</code> instead of
<code>$OUTPUT_URL</code>). The problem is, the structure of the destination is
different. <code>share/rear/output/RSYNC/default/900_copy_result_files.sh</code>
creates a directory <code>${RSYNC_PREFIX}</code> (defaults to hostname) under the
specified URL and puts the output files there. In contrast,
<code>usr/share/rear/output/PXE/default/820_copy_to_net.sh script</code> puts the
files directly under <code>$OUTPUT_URL</code>. So, in ReaR 2.6, the files were
under <code>$OUTPUT_URL</code>, after my fix, they will be under
<code>$OUTPUT_URL/$RSYNC_PREFIX</code>, so, still a change in behavior. Is that
acceptable for you?</p>
<p>This is only one of the many irregularities surrounding the use of
rsync, and the regression that you encountered merely exposes it. The
same irregularity has been always present in the most generic output
script <code>usr/share/rear/output/default/950_copy_result_files.sh</code>:</p>
<pre><code>case "$scheme" in
...
    (rsync)
        # If BACKUP = RSYNC output/RSYNC/default/900_copy_result_files.sh took care of it:
        test "$BACKUP" = "RSYNC" &amp;&amp; return 0
...
        rsync -a $v "${RESULT_FILES[@]}" "${host}:${path}" || Error "Problem transferring result files to $OUTPUT_URL"
</code></pre>
<p>Yes, if <code>BACKUP = RSYNC</code>,
<code>output/RSYNC/default/900_copy_result_files.sh</code> takes care of it, but
differently: even if we suppose that <code>$OUTPUT_URL == $BACKUP_URL</code> ,
<code>output/RSYNC/default/900_copy_result_files.sh</code> puts the files under
<code>$RSYNC_PREFIX</code>, while this file puts them directly under <code>$OUTPUT_URL</code>.
I don't see why the structure of output directories should depend on the
value of <code>BACKUP</code>, which is conceptually independent on the output
code.<br />
(The same difference is actually present in other output URLs: URL
schemes that use a filesystem directly, like <code>file://</code> and <code>nfs://</code>, put
the files under <code>$OUTPUT_PREFIX</code> (which is distinct from
<code>$RSYNC_PREFIX</code>, but fulfills the same function), while schemes using a
transfer program (in practice, <code>lftp</code>) store output directly under
<code>$OUTPUT_URL</code>, and for rsync we have both.)</p>
<p>The current code ( both
<code>usr/share/rear/output/default/950_copy_result_files.sh</code> and
<code>usr/share/rear/output/PXE/default/820_copy_to_net.sh script</code> ) has also
the problem that it won't allow the use of rsync over ssh, because it
passes the <code>rsync://</code> URL directly to <code>rsync</code>, which is valid only if
using a rsync daemon connection.</p>
<h4 id="pcahyna_commented_at_2022-06-20_0916"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1160190079">2022-06-20 09:16</a>:<a class="headerlink" href="#pcahyna_commented_at_2022-06-20_0916" title="Permanent link">&para;</a></h4>
<p>Actually, I see that in the original issue, <code>RSYNC_PREFIX=</code>, so the
difference should not affect the original bug reporter. I don't know
whether that's always the case for DRLM, though (is the config file
user-supplied or generated by DRLM?).</p>
<h4 id="pcahyna_commented_at_2022-06-20_0928"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1160202693">2022-06-20 09:28</a>:<a class="headerlink" href="#pcahyna_commented_at_2022-06-20_0928" title="Permanent link">&para;</a></h4>
<p>Ignoring <code>$RSYNC_PREFIX</code> / <code>$OUTPUT_PREFIX</code> in the output structure
should be in practice quite harmless, because the output files are
distinguished by <code>$RAMDISK_SUFFIX</code> and, in the case of ISO image,
<code>$ISO_PREFIX</code> (both embed the hostname by default), so there should be
no collision, even if multiple machines upload their outputs to a single
backup location. Still, one wonders why the difference.</p>
<h4 id="didacog_commented_at_2022-06-20_0959"><img src="https://avatars.githubusercontent.com/u/5380209?u=163f1571e6b9c9c7df94e2c6ca152b0a7406b52d&v=4" width="50"><a href="https://github.com/didacog">didacog</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1160235318">2022-06-20 09:59</a>:<a class="headerlink" href="#didacog_commented_at_2022-06-20_0959" title="Permanent link">&para;</a></h4>
<p>Hi @pcahyna</p>
<p><strong>after my fix, they will be under <code>$OUTPUT_URL/$RSYNC_PREFIX</code>, so,
still a change in behavior. Is that acceptable for you?</strong><br />
Yes, this is ok for us.</p>
<p><strong>(is the config file user-supplied or generated by DRLM?).</strong><br />
The config is setup by the user on DRLM, then rear on run get the config
by https from DRLM api, but are all rear configs adjusted to our
supported rear backup methods. see:
<a href="https://docs.drlm.org/en/latest/client_config_default.html">https://docs.drlm.org/en/latest/client_config_default.html</a></p>
<p>We simplified some config options to be easier for the user, but are
translated to proper ReaR configs.</p>
<h4 id="pcahyna_commented_at_2022-06-20_1057"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1160301168">2022-06-20 10:57</a>:<a class="headerlink" href="#pcahyna_commented_at_2022-06-20_1057" title="Permanent link">&para;</a></h4>
<p>@didacog I don't see <code>RSYNC_PREFIX</code> in that document. Does DRLM always
set it to empty? Anyway, if you are ok with the change, the only
question is whether the change is not too disruptive for users - @jsmeix
what do you think? I feel that making the code and behavior more regular
is worth it, but one will pay some price in terms of incompatibility in
the case of simultaneous <code>OUTPUT=PXE</code> and <code>OUTPUT_URL=rsync://...</code>.</p>
<h4 id="jsmeix_commented_at_2022-06-20_1113"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1160314912">2022-06-20 11:13</a>:<a class="headerlink" href="#jsmeix_commented_at_2022-06-20_1113" title="Permanent link">&para;</a></h4>
<p>@pcahyna<br />
personally I neither use PXE nor rsync<br />
so I have no personal experience with it.</p>
<p>I think @gdha has more personal experience with it<br />
so perhaps he can better answer questions about<br />
incompatibility in the case of simultaneous<br />
OUTPUT=PXE and OUTPUT_URL=rsync://...</p>
<p>In general we can change things in ReaR from version to version<br />
in particular to improve things so in general I appreciate<br />
making the code and behavior more regular when this<br />
can be done without major regressions.</p>
<p>I consider it no major regression when users need to adapt<br />
their settings in /etc/rear/local.conf to achieve basically<br />
the same outcome as before.<br />
For example see my changed behaviour and changed default<br />
in ReaR 2.5 how the MODULES config variable works at<br />
<a href="https://github.com/rear/rear/blob/master/doc/rear-release-notes.txt#L924">https://github.com/rear/rear/blob/master/doc/rear-release-notes.txt#L924</a><br />
which caused "a minor backward incompatible change"<br />
<a href="https://github.com/rear/rear/blob/master/doc/rear-release-notes.txt#L936">https://github.com/rear/rear/blob/master/doc/rear-release-notes.txt#L936</a></p>
<p>In contrast I would consider it a major regression if something<br />
that has worked before would not at all work any longer.</p>
<h4 id="didacog_commented_at_2022-06-20_1402"><img src="https://avatars.githubusercontent.com/u/5380209?u=163f1571e6b9c9c7df94e2c6ca152b0a7406b52d&v=4" width="50"><a href="https://github.com/didacog">didacog</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1160488047">2022-06-20 14:02</a>:<a class="headerlink" href="#didacog_commented_at_2022-06-20_1402" title="Permanent link">&para;</a></h4>
<p>Hi @pcahyna</p>
<blockquote>
<p>@didacog I don't see <code>RSYNC_PREFIX</code> in that document. Does DRLM always
set it to empty? Anyway, if you are ok with the change, the only
question is whether the change is not too disruptive for users -
@jsmeix what do you think? I feel that making the code and behavior
more regular is worth it, but one will pay some price in terms of
incompatibility in the case of simultaneous <code>OUTPUT=PXE</code> and
<code>OUTPUT_URL=rsync://...</code>.</p>
</blockquote>
<p>We see no problems on <code>OUTPUT=PXE</code> and <code>OUTPUT_URL=rsync://...</code> combo.
we use it without any issue. see:
<a href="https://github.com/brainupdaters/drlm/blob/b95ef8061f1cbd56d685b9e5c569db24e1044ea1/usr/share/drlm/www/drlm-api/client.go#L299">https://github.com/brainupdaters/drlm/blob/b95ef8061f1cbd56d685b9e5c569db24e1044ea1/usr/share/drlm/www/drlm-api/client.go#L299</a></p>
<p>We know well that there are different variables for each type of setup
so we simplified the config on DRLM side to avoid users to miss config
stuff...</p>
<p>And yes, we set <code>RSYNC_PREFIX</code> to empty, so the backup and output files
will be where the config setup needs.</p>
<p>Regards,<br />
Didac</p>
<h4 id="pcahyna_commented_at_2022-06-21_0956"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1161527507">2022-06-21 09:56</a>:<a class="headerlink" href="#pcahyna_commented_at_2022-06-21_0956" title="Permanent link">&para;</a></h4>
<p>Hi @didacog</p>
<p>sorry, I found yet another anomaly that will have an impact on
<code>OUTPUT=PXE</code> if the issue is fixed the way I intend.</p>
<p><code>usr/share/rear/prep/RSYNC/default/100_check_rsync.sh</code> has this
explanation of <code>BACKUP_URL</code>:</p>
<pre><code>#### OLD STYLE:
# BACKUP_URL=[USER@]HOST:PATH           # using ssh (no rsh)
#
# with rsync protocol PATH is a MODULE name defined in remote /etc/rsyncd.conf file
# BACKUP_URL=[USER@]HOST::PATH          # using rsync
# BACKUP_URL=rsync://[USER@]HOST[:PORT]/PATH    # using rsync (is not compatible with new style!!!)

#### NEW STYLE:
# BACKUP_URL=rsync://[USER@]HOST[:PORT]/PATH    # using ssh
# BACKUP_URL=rsync://[USER@]HOST[:PORT]::/PATH  # using rsync
</code></pre>
<p>So, <code>rsync://[USER@]HOST[:PORT]/PATH</code> form (that you are using for
<code>OUTPUT_URL</code>) means to use rsync over ssh in the new style, but rsync
daemon in the old style. It seems that everything interprets the URLs in
the new style, except for
<code>usr/share/rear/output/PXE/default/820_copy_to_net.sh</code> that passes
<code>$OUTPUT_URL</code> directly to rsync, which interprets it in the old style.<br />
My intent is to remove this irregularity, <code>OUTPUT_URL</code> will be always
interpreted in the new style, but in your case it will lead to output
file uploads going over ssh instead of using the rsync daemon, and thus
possibly ending in a different place than you expect.</p>
<p>I realized that this irregularity may have been the very reason why you
have introduced an <code>OUTPUT_URL</code> different from <code>BACKUP_URL</code> in the first
place (you seem to want to use the rsync daemon for both, but the syntax
is different in the two cases).</p>
<p>I am not sure how to fix it in a different way than to introduce this
incompatibility, I believe this irregularity should not stay in ReaR
forever.</p>
<p>Regards, Pavel</p>
<h4 id="pcahyna_commented_at_2022-06-28_0726"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1168338079">2022-06-28 07:26</a>:<a class="headerlink" href="#pcahyna_commented_at_2022-06-28_0726" title="Permanent link">&para;</a></h4>
<p>@didacog can you please try a fixed build? Packages for RHEL 8 can be
downloaded here:
<a href="https://koji.fedoraproject.org/koji/taskinfo?taskID=88547667">https://koji.fedoraproject.org/koji/taskinfo?taskID=88547667</a>
, the source is here :
<a href="https://github.com/pcahyna/rear/tree/rsync-output-backup-url">https://github.com/pcahyna/rear/tree/rsync-output-backup-url</a></p>
<h4 id="didacog_commented_at_2022-06-28_0749"><img src="https://avatars.githubusercontent.com/u/5380209?u=163f1571e6b9c9c7df94e2c6ca152b0a7406b52d&v=4" width="50"><a href="https://github.com/didacog">didacog</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1168363028">2022-06-28 07:49</a>:<a class="headerlink" href="#didacog_commented_at_2022-06-28_0749" title="Permanent link">&para;</a></h4>
<p>@pcahyna sorry for not answering last week, we are preparing OpenExpo'22
conference in Madrid while working on the running projects, so we are
pretty busy until the end of this week. We'll test it ASAP and update
this issue.</p>
<h4 id="pcahyna_commented_at_2022-06-28_0803"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1168376897">2022-06-28 08:03</a>:<a class="headerlink" href="#pcahyna_commented_at_2022-06-28_0803" title="Permanent link">&para;</a></h4>
<p>@didacog no problem! I know that it takes time and lots of work to test
a change of one component in a complex environment. If you can't test
the change now, please have a look at the description of intended
behavior changes in
<a href="https://github.com/rear/rear/issues/2781#issuecomment-1161527507">https://github.com/rear/rear/issues/2781#issuecomment-1161527507</a>
first (the code to test implements this change).</p>
<h4 id="jsmeix_commented_at_2022-06-28_1143"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1168613472">2022-06-28 11:43</a>:<a class="headerlink" href="#jsmeix_commented_at_2022-06-28_1143" title="Permanent link">&para;</a></h4>
<p>Only FYI:<br />
Because of<br />
<a href="https://github.com/rear/rear/issues/2781#issuecomment-1168363028">https://github.com/rear/rear/issues/2781#issuecomment-1168363028</a><br />
I postponed the ReaR 2.7 release date to<br />
beginning of July, see<br />
<a href="https://github.com/rear/rear/issues/2751#issuecomment-1168557804">https://github.com/rear/rear/issues/2751#issuecomment-1168557804</a></p>
<h4 id="pcahyna_commented_at_2022-06-28_1147"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1168617248">2022-06-28 11:47</a>:<a class="headerlink" href="#pcahyna_commented_at_2022-06-28_1147" title="Permanent link">&para;</a></h4>
<p>@jsmeix thanks for taking it into consideration. Note though that I
won't be available in the first two weeks of July. If all goes well, it
would not be a problem (I have done extensive tests of the changes and
now I need only to add comments to the code and I can submit a PR).</p>
<h4 id="jsmeix_commented_at_2022-06-28_1207"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1168637153">2022-06-28 12:07</a>:<a class="headerlink" href="#jsmeix_commented_at_2022-06-28_1207" title="Permanent link">&para;</a></h4>
<p>@pcahyna<br />
could you please create a regular pull request<br />
(with the added comments in the code)<br />
so I could "just merge" that when @didacog agrees<br />
or if needed even fix something together with @didacog<br />
(provided I understand what I do).</p>
<h4 id="jsmeix_commented_at_2022-06-29_1200"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1169894521">2022-06-29 12:00</a>:<a class="headerlink" href="#jsmeix_commented_at_2022-06-29_1200" title="Permanent link">&para;</a></h4>
<p>@didacog<br />
please test<br />
<a href="https://github.com/rear/rear/pull/2831">https://github.com/rear/rear/pull/2831</a><br />
as soon as you have time for it.<br />
Many thanks in advance for your testing!</p>
<h4 id="pcahyna_commented_at_2022-06-29_1724"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1170266975">2022-06-29 17:24</a>:<a class="headerlink" href="#pcahyna_commented_at_2022-06-29_1724" title="Permanent link">&para;</a></h4>
<p>@didacog since the proposed change will suffer from an ambiguity of
interpretation of a <code>rsync://[USER@]HOST[:PORT]/PATH</code>-form in
<code>OUTPUT_URL</code> (interpreted as using the rsync protocol in ReaR 2.6, but
rsync over ssh after the change), I propose to use the alternate
old-style form <code>[USER@]HOST::PATH</code> (without the <code>rsync://</code> part and with
double <code>::</code>). This should be unambiguous: both old and new code should
treat is as the rsync protocol.<br />
I also don't intend to make the change in RHEL 8, which was the original
concern: I will probably just restore the old file, because the change
looks too disruptive.</p>
<h4 id="didacog_commented_at_2022-07-04_1443"><img src="https://avatars.githubusercontent.com/u/5380209?u=163f1571e6b9c9c7df94e2c6ca152b0a7406b52d&v=4" width="50"><a href="https://github.com/didacog">didacog</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1173899375">2022-07-04 14:43</a>:<a class="headerlink" href="#didacog_commented_at_2022-07-04_1443" title="Permanent link">&para;</a></h4>
<p>@pcahyna we are testing it and we are not able to set PXE output in a
separated folder than backup data as we used to do previously. We are
used to put backup data in <code>backup</code> subfolder and pxe files in <code>PXE</code>
subfolder and is not working with the updated code.</p>
<p>this is the config we set:</p>
<pre><code>OUTPUT=PXE
OUTPUT_PREFIX_PXE="debcli1/pxe/PXE"
OUTPUT_URL="rsync://debcli1@192.168.123.132/debcli1_pxe/PXE/"
BACKUP=RSYNC
RSYNC_PREFIX=
BACKUP_URL="rsync://debcli1@192.168.123.132::/debcli1_pxe"
BACKUP_RSYNC_OPTIONS+=( --devices --acls --xattrs )
</code></pre>
<p>Regards,<br />
Didac</p>
<h4 id="pcahyna_commented_at_2022-07-04_1656"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1174005471">2022-07-04 16:56</a>:<a class="headerlink" href="#pcahyna_commented_at_2022-07-04_1656" title="Permanent link">&para;</a></h4>
<p>@didacog thank you for testing. Per your config file above, the output
pxe files should end up under <code>/debcli1_pxe/PXE/</code> on the server. Is that
not the case? Note that an URL of the form
<code>rsync://debcli1@192.168.123.132/debcli1_pxe/PXE/</code> is now interpreted as
an rsync-over-ssh destination, so modules defined in the server's
rsyncd.conf will have no effect. Could that be the problem?</p>
<h4 id="pcahyna_commented_at_2022-07-04_1658"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1174006199">2022-07-04 16:58</a>:<a class="headerlink" href="#pcahyna_commented_at_2022-07-04_1658" title="Permanent link">&para;</a></h4>
<p>Oh and the latest code is at #2831</p>
<h4 id="didacog_commented_at_2022-07-05_0538"><img src="https://avatars.githubusercontent.com/u/5380209?u=163f1571e6b9c9c7df94e2c6ca152b0a7406b52d&v=4" width="50"><a href="https://github.com/didacog">didacog</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1174636217">2022-07-05 05:38</a>:<a class="headerlink" href="#didacog_commented_at_2022-07-05_0538" title="Permanent link">&para;</a></h4>
<blockquote>
<p>@didacog thank you for testing. Per your config file above, the output
pxe files should end up under <code>/debcli1_pxe/PXE/</code> on the server. Is
that not the case? Note that an URL of the form
<code>rsync://debcli1@192.168.123.132/debcli1_pxe/PXE/</code> is now interpreted
as an rsync-over-ssh destination, so modules defined in the server's
rsyncd.conf will have no effect. Could that be the problem?</p>
</blockquote>
<p>Yes, it may be the problem, so should we use
<code>rsync://debcli1@192.168.123.132::/debcli1_pxe/PXE/</code> in the OUTPUT_URL?</p>
<h4 id="didacog_commented_at_2022-07-05_0729"><img src="https://avatars.githubusercontent.com/u/5380209?u=163f1571e6b9c9c7df94e2c6ca152b0a7406b52d&v=4" width="50"><a href="https://github.com/didacog">didacog</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1174714679">2022-07-05 07:29</a>:<a class="headerlink" href="#didacog_commented_at_2022-07-05_0729" title="Permanent link">&para;</a></h4>
<p>@pcahyna we tested all the possible options and no one creates the PXE
sub-folder in the destination to put the output files there as used to
do. Neither rsync_over_ssh or rsync_server, so please can you tell us
what config is supposed to work the same as before with your changes in
the config for SSH and rsync, please.</p>
<p>Regards,<br />
Didac</p>
<h4 id="pcahyna_commented_at_2022-07-05_1416"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1175114257">2022-07-05 14:16</a>:<a class="headerlink" href="#pcahyna_commented_at_2022-07-05_1416" title="Permanent link">&para;</a></h4>
<blockquote>
<blockquote>
<p>@didacog thank you for testing. Per your config file above, the
output pxe files should end up under <code>/debcli1_pxe/PXE/</code> on the
server. Is that not the case? Note that an URL of the form
<code>rsync://debcli1@192.168.123.132/debcli1_pxe/PXE/</code> is now
interpreted as an rsync-over-ssh destination, so modules defined in
the server's rsyncd.conf will have no effect. Could that be the
problem?</p>
</blockquote>
<p>Yes, it may be the problem, so should we use
<code>rsync://debcli1@192.168.123.132::/debcli1_pxe/PXE/</code> in the
OUTPUT_URL?</p>
</blockquote>
<p>That should be it. Doesn't it work? Where do the files go then, or are
they just lost?</p>
<h4 id="pcahyna_commented_at_2022-07-05_1600"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1175226505">2022-07-05 16:00</a>:<a class="headerlink" href="#pcahyna_commented_at_2022-07-05_1600" title="Permanent link">&para;</a></h4>
<p>I think I know what's wrong... the code does not handle rsync server
URLs with multiple path components or trailing slashes, like your
<code>/debcli1_pxe/PXE/</code>. The original code before my change has this issue
too for <code>BACKUP_URL</code>, but because you are using a one-component path for
<code>BACKUP_URL</code>, you have not encountered it. I believe that if you used
another level of directories at the server, say
<code>BACKUP_URL="rsync://debcli1@192.168.123.132::/debcli1_pxe/foo"</code>, you
would have seen the problem.</p>
<h4 id="didacog_commented_at_2022-07-06_0859"><img src="https://avatars.githubusercontent.com/u/5380209?u=163f1571e6b9c9c7df94e2c6ca152b0a7406b52d&v=4" width="50"><a href="https://github.com/didacog">didacog</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1175968132">2022-07-06 08:59</a>:<a class="headerlink" href="#didacog_commented_at_2022-07-06_0859" title="Permanent link">&para;</a></h4>
<p>@pcahyna we may found the problem:</p>
<p><a href="https://github.com/rear/rear/blob/bd484848eeed0c2a761f3244e4ab5e96396257af/usr/share/rear/output/RSYNC/default/200_make_prefix_dir.sh">https://github.com/rear/rear/blob/bd484848eeed0c2a761f3244e4ab5e96396257af/usr/share/rear/output/RSYNC/default/200_make_prefix_dir.sh</a></p>
<p>here is creating $RSYNC_PREFIX and $RSYNC_PREFIX/backup, but there is
nothing in rear code creating $RSYNC_PREFIX/output or
$RSYNC_PREFIX/$OUTPUT_PREFIX or similar to set the dest folder of
OUTPUT_URL if differs from BACKUP_URL. I think that just creating
this:</p>
<pre><code>mkdir -p $v -m0755 "${TMP_DIR}/rsync/${RSYNC_PREFIX}/$OUTPUT_PREFIX" &gt;&amp;2 || Error "Could not mkdir '${TMP_DIR}/rsync/${RSYNC_PREFIX}/$OUTPUT_PREFIX'"
</code></pre>
<p>in the proper place will solve the whole problem.</p>
<p>see this<br />
<a href="https://github.com/rear/rear/blob/bd484848eeed0c2a761f3244e4ab5e96396257af/usr/share/rear/output/default/200_make_prefix_dir.sh">https://github.com/rear/rear/blob/bd484848eeed0c2a761f3244e4ab5e96396257af/usr/share/rear/output/default/200_make_prefix_dir.sh</a><br />
is doing it also for NETFS ... so i think sholud be done also for RSYNC
and that's all</p>
<p>Regards,<br />
Didac</p>
<h4 id="pcahyna_commented_at_2022-07-07_0911"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1177291025">2022-07-07 09:11</a>:<a class="headerlink" href="#pcahyna_commented_at_2022-07-07_0911" title="Permanent link">&para;</a></h4>
<p>@didacog are you sure? <code>OUTPUT_PREFIX</code> has never been respected for
<code>rsync://</code> URLs. <code>RSYNC_PREFIX</code> is used instead (since both default to
<code>$HOSTNAME</code>, you would get a duplicate entry in the path, like
<code>"${TMP_DIR}/rsync/$HOSTNAME/$HOSTNAME"</code>). Have you tested your
suggestion? By the way, do you have logs with <code>-D</code> of your unsuccessful
attempts? It would be good to see how does rsync get actually invoked
and where does it try to put the files.</p>
<h4 id="didacog_commented_at_2022-07-07_1247"><img src="https://avatars.githubusercontent.com/u/5380209?u=163f1571e6b9c9c7df94e2c6ca152b0a7406b52d&v=4" width="50"><a href="https://github.com/didacog">didacog</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1177558312">2022-07-07 12:47</a>:<a class="headerlink" href="#didacog_commented_at_2022-07-07_1247" title="Permanent link">&para;</a></h4>
<p>@pcahyna we found the root problem. is in the <strong>rsync_path</strong> and
<strong>rsync_remote_base</strong> functions:</p>
<pre><code>function rsync_path () {
    local url="$1"
    local host
    local path

    host=$(url_host "$url")
    path=$(url_path "$url")  &lt;----- you are using this $path in the case (rsync), and it only works properly using $url or it removes part of the path with the else always!!!
    local tmp2="${host#*@}"

    case "$(rsync_proto "$url")" in

        (rsync)
            # path=/gdhaese1@witsbebelnx02::backup or path=/backup
            if grep -q '::' &lt;&lt;&lt; $path ; then   &lt;--- never gets this!!
                echo "${path##*::}"
            else
                # XXX what if path=/backup/sub/directory ? Should we remove
                # longest prefix?
                echo "${path##*/}"  &lt;--- removes the path!!!
            fi
            ;;
        (ssh)
            echo "$path"
            ;;

    esac
}
</code></pre>
<p>So this function should be using :</p>
<pre><code> (rsync)
            # path=/gdhaese1@witsbebelnx02::backup or path=/backup
            if grep -q '::' &lt;&lt;&lt; $url ; then   
                echo "${url##*::}"
            else
                # XXX what if path=/backup/sub/directory ? Should we remove
                # longest prefix?
                echo "${url##*/}"  
            fi
            ;;
</code></pre>
<p>or simply ans maybe better:</p>
<pre><code>(rsync)
          echo $path
</code></pre>
<p>as url_path is getting the proper path with <code>::</code> or without.</p>
<p>the <strong>rsync_remote_base</strong> in line 140:</p>
<pre><code>            echo "rsync://${user}@${host}:${port}/"
</code></pre>
<p>must be:</p>
<pre><code>            echo "rsync://${user}@${host}:${port}"
</code></pre>
<p>and with these changes everything is working properly!</p>
<p>kind regards,<br />
Didac</p>
<h4 id="pcahyna_commented_at_2022-07-07_1325"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1177610963">2022-07-07 13:25</a>:<a class="headerlink" href="#pcahyna_commented_at_2022-07-07_1325" title="Permanent link">&para;</a></h4>
<p>Thank you @didacog, we have narrowed it to the same piece of code -
after I wrote
<a href="https://github.com/rear/rear/issues/2781#issuecomment-1175226505">https://github.com/rear/rear/issues/2781#issuecomment-1175226505</a>
, I saw that the problem should lie there. But note that because the
routines have to handle multiple URL formats, it will take some time to
test the changes - I am a bit afraid that the proposed changes might
break other stuff.</p>
<p>By the way, when you say "with these changes everything is working
properly!", what is the config file that it is working properly with? In
particular, what do you set <code>OUTPUT_URL</code> to?</p>
<h4 id="didacog_commented_at_2022-07-07_1349"><img src="https://avatars.githubusercontent.com/u/5380209?u=163f1571e6b9c9c7df94e2c6ca152b0a7406b52d&v=4" width="50"><a href="https://github.com/didacog">didacog</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1177647158">2022-07-07 13:49</a>:<a class="headerlink" href="#didacog_commented_at_2022-07-07_1349" title="Permanent link">&para;</a></h4>
<p>@pcahyna here is an example:</p>
<pre><code>OUTPUT_URL="rsync://debcli1@192.168.123.132::/debcli1_pxe/PXE"
</code></pre>
<p>and the result files properly in place:</p>
<p><img alt="image" src="https://user-images.githubusercontent.com/5380209/177789522-1f57d56d-fc07-4f5b-baa5-8cd6cdc0b9cd.png" /><br />
<img alt="image" src="https://user-images.githubusercontent.com/5380209/177789594-2ed92c9f-0bf7-4120-8f97-bea00c1df2b5.png" /></p>
<h4 id="pcahyna_commented_at_2022-07-08_1817"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1179251267">2022-07-08 18:17</a>:<a class="headerlink" href="#pcahyna_commented_at_2022-07-08_1817" title="Permanent link">&para;</a></h4>
<p>Thanks @didacog for the information, I updated the PR with a commit that
should fix it, please retest.</p>
<h4 id="didacog_commented_at_2022-07-11_1035"><img src="https://avatars.githubusercontent.com/u/5380209?u=163f1571e6b9c9c7df94e2c6ca152b0a7406b52d&v=4" width="50"><a href="https://github.com/didacog">didacog</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1180233302">2022-07-11 10:35</a>:<a class="headerlink" href="#didacog_commented_at_2022-07-11_1035" title="Permanent link">&para;</a></h4>
<p>@pcahyna, retested and now is working well.<br />
Thanks!</p>
<h4 id="pcahyna_commented_at_2022-07-12_0853"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1181499877">2022-07-12 08:53</a>:<a class="headerlink" href="#pcahyna_commented_at_2022-07-12_0853" title="Permanent link">&para;</a></h4>
<p>@didacog thanks for the test! If you are using
<code>rsync://debcli1@192.168.123.132::/debcli1_pxe/PXE/</code> for OUTPUT_URL, I
suggest to try the form <code>debcli1@192.168.123.132::/debcli1_pxe/PXE/</code>
both with the old (before the removal of
<code>/usr/share/rear/output/PXE/default/820_copy_to_net.sh</code>) and the
proposed code. That is, if you are interested in a format that is
equally supported both by the old and the new code without needing a
configuration file change.</p>
<h4 id="jsmeix_commented_at_2022-07-12_1058"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1181617916">2022-07-12 10:58</a>:<a class="headerlink" href="#jsmeix_commented_at_2022-07-12_1058" title="Permanent link">&para;</a></h4>
<p>@didacog @pcahyna<br />
for ReaR 2.7 the old and the new style rsync URLs will be supported.</p>
<p>BUT:<br />
Because I get more and more annoyed by the complications of the<br />
old style rsync URLs (horrible subtle working fragile code<br />
that nobody can maintain with reasonable effort over a long time)<br />
cf.
<a href="https://github.com/rear/rear/pull/2831#discussion_r918762882">https://github.com/rear/rear/pull/2831#discussion_r918762882</a><br />
I may lose my patience and "simply remove" support for the<br />
old style rsync URLs in ReaR 2.8 or in a later version.<br />
Whether or not this happens mainly depends on how many<br />
further issues will appear with ReaR and rsync.<br />
If things work sufficiently OK (except minor issues)<br />
I won't touch the rsync code.<br />
But when a generic cleanup is the only reasonable way out<br />
in practice I would mercilessly clean it up<br />
to make it simple and straightforward.</p>
<h4 id="jsmeix_commented_at_2022-07-12_1200"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1181673067">2022-07-12 12:00</a>:<a class="headerlink" href="#jsmeix_commented_at_2022-07-12_1200" title="Permanent link">&para;</a></h4>
<p>With
<a href="https://github.com/rear/rear/pull/2831">https://github.com/rear/rear/pull/2831</a>
merged<br />
this issue is fixed.</p>
<h4 id="pcahyna_commented_at_2022-07-12_1348"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1181783807">2022-07-12 13:48</a>:<a class="headerlink" href="#pcahyna_commented_at_2022-07-12_1348" title="Permanent link">&para;</a></h4>
<blockquote>
<p>I may lose my patience and "simply remove" support for the<br />
old style rsync URLs in ReaR 2.8 or in a later version.</p>
</blockquote>
<p>I understand, but in addition to compatibility, the value of old-style
URLs it that they should allow remote paths not starting with <code>/</code> (there
is a difference between <code>user@host:path</code> and <code>user@host:/path</code>, because
the former is rooted at <code>user</code>'s $HOME and there is no way to get this
with a new-style URL, AFAICT).</p>
<h4 id="jsmeix_commented_at_2022-07-12_1427"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1181829455">2022-07-12 14:27</a>:<a class="headerlink" href="#jsmeix_commented_at_2022-07-12_1427" title="Permanent link">&para;</a></h4>
<p>I think that because <code>user</code> is a static known value<br />
its home directory is also a static known value<br />
so I assume one can specify a full path URL like</p>
<pre><code>user@host:/full/path/to/user/home/directory/subdir
</code></pre>
<p>instead of <code>user@host:subdir</code>?<br />
Or is there something why the full path URL cannot work?<br />
(I am not a rsync user so I don't know rsync special stuff.)</p>
<h4 id="pcahyna_commented_at_2022-07-12_1433"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1181837422">2022-07-12 14:33</a>:<a class="headerlink" href="#pcahyna_commented_at_2022-07-12_1433" title="Permanent link">&para;</a></h4>
<p>This should work, yes. I felt it was an artificial gap, as rsync itself
allows relative paths. But since nobody has AFAIK complained about it,
probably users can live without it and expand to a full path if
needed.<br />
Another argument for keeping the old syntax for some time is if it is
the only way to have the same URL format that works with PXE both in
ReaR 2.6 and ReaR 2.7.</p>
<h4 id="pcahyna_commented_at_2022-07-12_1435"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1181839443">2022-07-12 14:35</a>:<a class="headerlink" href="#pcahyna_commented_at_2022-07-12_1435" title="Permanent link">&para;</a></h4>
<p>(the last argument is not valid if it is a ReaR version that
intentionally stops being compatible with many other configuration
options. I would call it 3.0 in that case, though.)</p>
<h4 id="jsmeix_commented_at_2022-07-12_1437"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1181842455">2022-07-12 14:37</a>:<a class="headerlink" href="#jsmeix_commented_at_2022-07-12_1437" title="Permanent link">&para;</a></h4>
<p>If there is real value in the old style rsync URLs<br />
we keep them of course because</p>
<pre><code>(1)  It Has To Work.
</code></pre>
<p><a href="https://datatracker.ietf.org/doc/html/rfc1925">https://datatracker.ietf.org/doc/html/rfc1925</a></p>
<h4 id="pcahyna_commented_at_2022-07-12_1441"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2781#issuecomment-1181846541">2022-07-12 14:41</a>:<a class="headerlink" href="#pcahyna_commented_at_2022-07-12_1441" title="Permanent link">&para;</a></h4>
<p>I am not sure myself, because I am merely testing the rsync stuff, and
only since quite recently. I will try to ask others if the time for the
decision comes.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2024 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2022-03-30.2781.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
