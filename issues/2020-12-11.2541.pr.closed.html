<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#2541 PR closed: Avoid that *_ROOT_PASSWORD values are shown in debugscript mode - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#2541 PR closed: Avoid that *_ROOT_PASSWORD values are shown in debugscript mode";
        var mkdocs_page_input_path = "issues/2020-12-11.2541.pr.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#2541 PR closed: Avoid that *_ROOT_PASSWORD values are shown in debugscript mode</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="2541_pr_closed_avoid_that_root_password_values_are_shown_in_debugscript_mode"><a href="https://github.com/rear/rear/pull/2541">#2541 PR</a> <code>closed</code>: Avoid that *_ROOT_PASSWORD values are shown in debugscript mode<a class="headerlink" href="#2541_pr_closed_avoid_that_root_password_values_are_shown_in_debugscript_mode" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>bug</code></p>
<h4 id="jsmeix_opened_issue_at_2020-12-11_0909"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> opened issue at <a href="https://github.com/rear/rear/pull/2541">2020-12-11 09:09</a>:<a class="headerlink" href="#jsmeix_opened_issue_at_2020-12-11_0909" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>Type: <strong>Bug Fix</strong></p>
</li>
<li>
<p>Reference to related issue (URL):<br />
<a href="https://github.com/rear/rear/issues/2540">https://github.com/rear/rear/issues/2540</a></p>
</li>
<li>
<p>Brief description of the changes in this pull request:<br />
    Use <code>{ confidential_command ; } 2&gt;/dev/null</code><br />
    cf. the comment for the <code>UserInput</code> function in<br />
    lib/_input-output-functions.sh</p>
</li>
</ul>
<h4 id="jsmeix_commented_at_2020-12-11_1328"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/2541#issuecomment-743192864">2020-12-11 13:28</a>:<a class="headerlink" href="#jsmeix_commented_at_2020-12-11_1328" title="Permanent link">&para;</a></h4>
<p>Now things work reasonably well for me both<br />
with <code>SSH_ROOT_PASSWORD='qqqq'</code> in etc/rear/local.conf<br />
and without SSH_ROOT_PASSWORD in etc/rear/local.conf but with</p>
<pre><code># export SSH_ROOT_PASSWORD='qqqq'
# usr/sbin/rear -D mkrescue
</code></pre>
<p>that password is set in the recovery system<br />
without a trace about its value in the log.</p>
<h4 id="jsmeix_commented_at_2020-12-11_1330"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/2541#issuecomment-743193750">2020-12-11 13:30</a>:<a class="headerlink" href="#jsmeix_commented_at_2020-12-11_1330" title="Permanent link">&para;</a></h4>
<p>I like to sleep over it over the weekend and if it still looks OK to me
on Monday<br />
and if there are no objections I would like to merge it on Monday.</p>
<h4 id="olivero2_commented_at_2020-12-11_1410"><img src="https://avatars.githubusercontent.com/u/4660803?v=4" width="50"><a href="https://github.com/OliverO2">OliverO2</a> commented at <a href="https://github.com/rear/rear/pull/2541#issuecomment-743213158">2020-12-11 14:10</a>:<a class="headerlink" href="#olivero2_commented_at_2020-12-11_1410" title="Permanent link">&para;</a></h4>
<p>Two remarks from my point of view regarding <code>SSH_ROOT_PASSWORD</code> in
<code>default.conf</code>:</p>
<ol>
<li>The comment advising against password exposure takes much time to
    read. In conjunction with other comments in <code>default.conf</code> it
    increases the risk of overlooking important hints. I'd very much
    favor a simple single-line comment in <code>default.conf</code> about possibly
    exposing passwords, and more elaborate explanations in the Wiki.</li>
<li>A conditional initialization in <code>default.conf</code> could in principle be
    done for every variable. Unless there is a convincing use case, I
    would advise against this as it makes finding the variables in
    <code>default.conf</code> much harder. I don't see a sound use case for an
    environment variable <code>SSH_ROOT_PASSWORD</code> as long as one sticks with
    password hashes. Setting the variable setting outside of rear would
    just move the problem elsewhere. In the worst case, the password
    hash ends up in an unprivileged user's shell history files
    (<code>SSH_ROOT_PASSWORD='...' sudo --preserve-env rear mkrescue</code>).</li>
</ol>
<h4 id="schlomo_commented_at_2020-12-11_1417"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/pull/2541#issuecomment-743217373">2020-12-11 14:17</a>:<a class="headerlink" href="#schlomo_commented_at_2020-12-11_1417" title="Permanent link">&para;</a></h4>
<p>We once had a principle that every variable <strong>must</strong> be initialized in
<code>default.conf</code>(hence the name). I think that this is a good principle
for us to keep. If - for whatever reason - configuration needs to be
passed in via <strong>environment variables</strong>, then it should be done
<strong>explicitly</strong> and those environment variables should be prefixed with
<code>REAR_</code> in my humble opinion.</p>
<p>About the increasing amount of comments: I also agree with the
suggestion to keep those explanations somewhere else and would like to
suggest the ReaR website for this. It is easily accessible.</p>
<h4 id="jsmeix_commented_at_2020-12-11_1437"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/2541#issuecomment-743228766">2020-12-11 14:37</a>:<a class="headerlink" href="#jsmeix_commented_at_2020-12-11_1437" title="Permanent link">&para;</a></h4>
<p>I will never ever fix outdated comments somewhere else because<br />
I will basically always forget to search for stuff somewhere else.<br />
I will leave that job to those who prefer the comments elsewhere.</p>
<p>Feel free to move or remove as many comments as you like<br />
but then never ask me if you don't understand something.</p>
<p>Furthermore I will no longer deal with issues<br />
where I do not easily understand the code "as is".<br />
I will leave such issues completely to others.<br />
Not my own code =&gt; not my problem.</p>
<h4 id="olivero2_commented_at_2020-12-11_1523"><img src="https://avatars.githubusercontent.com/u/4660803?v=4" width="50"><a href="https://github.com/OliverO2">OliverO2</a> commented at <a href="https://github.com/rear/rear/pull/2541#issuecomment-743257152">2020-12-11 15:23</a>:<a class="headerlink" href="#olivero2_commented_at_2020-12-11_1523" title="Permanent link">&para;</a></h4>
<p>@jsmeix<br />
No one wants to make your life any harder, so let's try to find a
solution that makes you happy, too.</p>
<p>We already have references to GitHub issues in the comments. So what if
we'd have a comment referencing a section in the User Guide
(<code>doc/user-guide/03-configuration.adoc</code>)? Such a section on how to set
passwords could contain stuff like</p>
<ul>
<li>Avoid plain text passwords.</li>
<li>Avoid exposing passwords in debugscript mode.</li>
<li>Prevent password hacking by generating cryptographically strong
    password hashes (prefer <code>openssl passwd -6</code>).</li>
<li>Remember proper quotes as password hashes contain <code>$</code> characters.</li>
</ul>
<p>In this case, a comment in <code>default.conf</code> could be like</p>
<pre><code># SSH_ROOT_PASSWORD defines a password for remote access to the recovery system as 'root' via SSH
# without requiring a public/private key pair. This password is valid only while the recovery system
# is running and will not allow access afterwards to the restored target system.
# SSH_ROOT_PASSWORD is ignored when SSH_FILES is set to a 'false' value.
# Please see the section 'Setting Passwords' in 'doc/user-guide/03-configuration.adoc'.
SSH_ROOT_PASSWORD=
</code></pre>
<p>As everything would be in the same repository, it would be searchable in
one step. Would that make it work for you?</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2024 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2020-12-11.2541.pr.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
