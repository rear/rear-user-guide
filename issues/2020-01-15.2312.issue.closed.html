<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#2312 Issue closed: Provide complete basic network migration functionality during "rear recover" - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#2312 Issue closed: Provide complete basic network migration functionality during \"rear recover\"";
        var mkdocs_page_input_path = "issues/2020-01-15.2312.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#2312 Issue closed: Provide complete basic network migration functionality during "rear recover"</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="2312_issue_closed_provide_complete_basic_network_migration_functionality_during_rear_recover"><a href="https://github.com/rear/rear/issues/2312">#2312 Issue</a> <code>closed</code>: Provide complete basic network migration functionality during "rear recover"<a class="headerlink" href="#2312_issue_closed_provide_complete_basic_network_migration_functionality_during_rear_recover" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>discuss / RFC</code>, <code>needs sponsorship</code>,
<code>no-issue-activity</code></p>
<h4 id="jsmeix_opened_issue_at_2020-01-15_1043"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> opened issue at <a href="https://github.com/rear/rear/issues/2312">2020-01-15 10:43</a>:<a class="headerlink" href="#jsmeix_opened_issue_at_2020-01-15_1043" title="Permanent link">&para;</a></h4>
<p>Currently ReaR provides only a few limited specific<br />
adaptions of the network configuration during "rear recover"<br />
in particular for IP and MAC addresses and routing<br />
via some /etc/rear/mappings/ files, cf.<br />
<a href="https://github.com/rear/rear/tree/master/doc/mappings">https://github.com/rear/rear/tree/master/doc/mappings</a></p>
<p>But other basic network migration functionality is missing<br />
for example the hostname, cf.<br />
<a href="https://github.com/rear/rear/issues/2310#issuecomment-574592858">https://github.com/rear/rear/issues/2310#issuecomment-574592858</a><br />
where @tumbajamba wrote (excerpt):</p>
<pre><code>an idea btw. suggestion for a new feature
"changing hostname for target machine".
Since you've already implemented features like:

mappings/ip_addresses
mappings/routes
...

So it would just make sense to implement a function:
mappings/hostname

Which would complete the processes of
deploying a new server out of the existing machine
based on REAR-Software.
</code></pre>
<p>I think providing complete networking migration and/or setup<br />
functionality during "rear recover" for basically all and everything<br />
what can be set up for networking is (at least currently)<br />
out of scope of what ReaR is meant for.</p>
<p>But I think providing functionality to migrate and/or setup<br />
only the basic networking functionality during "rear recover"<br />
so that after "rear recover" the new (re)-created machine<br />
has a correct new basic network setup is what ReaR could do.</p>
<h4 id="jsmeix_commented_at_2020-01-15_1052"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2312#issuecomment-574606451">2020-01-15 10:52</a>:<a class="headerlink" href="#jsmeix_commented_at_2020-01-15_1052" title="Permanent link">&para;</a></h4>
<p>@rmetrich @gdha<br />
what do you think about this enhancement proposal?</p>
<p>Would it make sense?<br />
I.e. does the term "basic network setup" actually make sense<br />
or is network setup actually an unlimited complex beast<br />
where one cannot separate "basic network setup"<br />
from "advanced network setup" in a reasonable way.</p>
<p>If it makes sense, would it be doable with reasonable effort?</p>
<p>Perhaps a simple and generically working basic method<br />
to set up networking at the end of "rear recover" could be<br />
something like NETWORKING_PREPARATION_COMMANDS<br />
<a href="https://github.com/rear/rear/blob/master/usr/share/rear/conf/default.conf#L2604">https://github.com/rear/rear/blob/master/usr/share/rear/conf/default.conf#L2604</a><br />
e.g. a new TARGET_SYSTEM_NETWORK_SETUP_COMMANDS<br />
where the user can specify his particular comands to set up<br />
networking at the end of "rear recover" as he needs it?<br />
On the other had we already have POST_RECOVERY_SCRIPT<br />
as a generic basic method where the user could do whatever<br />
is needed at the end of "rear recover".<br />
But POST_RECOVERY_SCRIPT runs within the ReaR recovery system, cf.<br />
<a href="https://github.com/rear/rear/blob/master/usr/share/rear/wrapup/default/500_post_recovery_script.sh">https://github.com/rear/rear/blob/master/usr/share/rear/wrapup/default/500_post_recovery_script.sh</a><br />
while networking setup comands for the new (re)-created machine<br />
should be run within that new (re)-created target system i.e. within<br />
a <code>chroot $TARGET_FS_ROOT</code> environment so a separated<br />
new TARGET_SYSTEM_NETWORK_SETUP_COMMANDS<br />
where that happens automatically would make sense.</p>
<p>See also</p>
<pre><code>some first ideas how to provide generic functionality in ReaR
</code></pre>
<p>in<br />
<a href="https://github.com/rear/rear/issues/2310#issuecomment-575043164">https://github.com/rear/rear/issues/2310#issuecomment-575043164</a></p>
<h4 id="rmetrich_commented_at_2020-01-15_1107"><img src="https://avatars.githubusercontent.com/u/1163635?u=36b5e32e1dd55f1ce77cad431a5683fce40a7934&v=4" width="50"><a href="https://github.com/rmetrich">rmetrich</a> commented at <a href="https://github.com/rear/rear/issues/2312#issuecomment-574611892">2020-01-15 11:07</a>:<a class="headerlink" href="#rmetrich_commented_at_2020-01-15_1107" title="Permanent link">&para;</a></h4>
<p>@jsmeix Hello, network setup is just a beast, it will be extremely
difficult to have something work among all distros.<br />
Even setting the hostname is not that easy (unless systemd is used).<br />
I would definitely let the admin do what he wants.</p>
<h4 id="tumbajamba_commented_at_2020-01-15_1158"><img src="https://avatars.githubusercontent.com/u/59883016?v=4" width="50"><a href="https://github.com/tumbajamba">tumbajamba</a> commented at <a href="https://github.com/rear/rear/issues/2312#issuecomment-574628731">2020-01-15 11:58</a>:<a class="headerlink" href="#tumbajamba_commented_at_2020-01-15_1158" title="Permanent link">&para;</a></h4>
<p>@rmetrich<br />
According to this link, setting up hostname doesn't look that difficult
to implement, even though you are completely right, that the procedure
of setting up the hostname across different distributions might
differ.<br />
<a href="https://www.tecmint.com/set-hostname-permanently-in-linux/">https://www.tecmint.com/set-hostname-permanently-in-linux/</a></p>
<p>Basically we have three options here:</p>
<pre><code>/etc/hostname
/etc/sysconfig/network
hostnamectl on systemD
</code></pre>
<h4 id="jsmeix_commented_at_2020-03-05_0912"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2312#issuecomment-595114382">2020-03-05 09:12</a>:<a class="headerlink" href="#jsmeix_commented_at_2020-03-05_0912" title="Permanent link">&para;</a></h4>
<p>I added "needs sponsorship" because since<br />
<a href="https://github.com/rear/rear/issues/2310#issuecomment-594591924">https://github.com/rear/rear/issues/2310#issuecomment-594591924</a><br />
it does no longer look as if I could do that alone in a reasonable way.</p>
<h4 id="github-actions_commented_at_2020-06-26_0139"><img src="https://avatars.githubusercontent.com/in/15368?v=4" width="50"><a href="https://github.com/apps/github-actions">github-actions</a> commented at <a href="https://github.com/rear/rear/issues/2312#issuecomment-649900613">2020-06-26 01:39</a>:<a class="headerlink" href="#github-actions_commented_at_2020-06-26_0139" title="Permanent link">&para;</a></h4>
<p>Stale issue message</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2024 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2020-01-15.2312.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
