<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#3 Issue closed: Rewrite network configuration abstraction - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#3 Issue closed: Rewrite network configuration abstraction";
        var mkdocs_page_input_path = "issues/2012-03-21.3.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#3 Issue closed: Rewrite network configuration abstraction</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="3_issue_closed_rewrite_network_configuration_abstraction"><a href="https://github.com/rear/rear/issues/3">#3 Issue</a> <code>closed</code>: Rewrite network configuration abstraction<a class="headerlink" href="#3_issue_closed_rewrite_network_configuration_abstraction" title="Permanent link">&para;</a></h1>
<h4 id="dagwieers_opened_issue_at_2012-03-21_1225"><img src="https://avatars.githubusercontent.com/u/388198?u=0732dee3fe5002278cfbf40359ec431bdcf5f06c&v=4" width="50"><a href="https://github.com/dagwieers">dagwieers</a> opened issue at <a href="https://github.com/rear/rear/issues/3">2012-03-21 12:25</a>:<a class="headerlink" href="#dagwieers_opened_issue_at_2012-03-21_1225" title="Permanent link">&para;</a></h4>
<p>As discussed in rear-users at:
<a href="http://sourceforge.net/mailarchive/message.php?msg_id=28515321">http://sourceforge.net/mailarchive/message.php?msg_id=28515321</a></p>
<p>it would be nice if the network configuration can be instructed at
boot-time.</p>
<p>Options could be to:</p>
<ul>
<li>skip network configuration</li>
<li>use DHCP</li>
<li>use the original configuration.</li>
</ul>
<p>There's also the possibility:</p>
<ul>
<li>to force network configurations on different hardware (addresses)</li>
<li>to detect if any of the given network configurations in fact work on
    a certain interface (e.g. do an arping to the gateway)</li>
<li>to expect the same hardware to be available</li>
</ul>
<p>As much as possible should work out of the box...</p>
<h4 id="schlomo_commented_at_2012-03-21_1232"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/3#issuecomment-4616245">2012-03-21 12:32</a>:<a class="headerlink" href="#schlomo_commented_at_2012-03-21_1232" title="Permanent link">&para;</a></h4>
<p>+1</p>
<p>Is there any boot command line syntax we should mimic? E.g. from
anaconda or other OS installers?</p>
<h4 id="gdha_commented_at_2012-03-21_1348"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/3#issuecomment-4617533">2012-03-21 13:48</a>:<a class="headerlink" href="#gdha_commented_at_2012-03-21_1348" title="Permanent link">&para;</a></h4>
<p>+1<br />
The "dhcp" and "noip" are already in-place. Partial the code for this is
already written and lives at<br />
/usr/share/rear/skel/default/etc/scripts/system-setup.d/20-check-boot-options.sh</p>
<p>However, the script to actually activate the device with this IP address
has not yet be written.<br />
Currently, debugging Fedora 17 lvm locking issues ...</p>
<h4 id="dagwieers_commented_at_2012-03-30_0725"><img src="https://avatars.githubusercontent.com/u/388198?u=0732dee3fe5002278cfbf40359ec431bdcf5f06c&v=4" width="50"><a href="https://github.com/dagwieers">dagwieers</a> commented at <a href="https://github.com/rear/rear/issues/3#issuecomment-4837640">2012-03-30 07:25</a>:<a class="headerlink" href="#dagwieers_commented_at_2012-03-30_0725" title="Permanent link">&para;</a></h4>
<p>The TODO file contained the following related information:</p>
<h2 id="wait_for_feedback">Wait for feedback<a class="headerlink" href="#wait_for_feedback" title="Permanent link">&para;</a></h2>
<ul>
<li>Write network migration code for all other distributions<ul>
<li>some work has been done in the meantime, but not sure if it is<br />
    sufficient enough to cover all</li>
<li>waiting on customer feedback</li>
</ul>
</li>
<li>Support dhcp for network migration<ul>
<li>has been added in 1.9.0</li>
<li>waiting on customer feedback</li>
</ul>
</li>
</ul>
<h4 id="dagwieers_commented_at_2012-04-12_1317"><img src="https://avatars.githubusercontent.com/u/388198?u=0732dee3fe5002278cfbf40359ec431bdcf5f06c&v=4" width="50"><a href="https://github.com/dagwieers">dagwieers</a> commented at <a href="https://github.com/rear/rear/issues/3#issuecomment-5090650">2012-04-12 13:17</a>:<a class="headerlink" href="#dagwieers_commented_at_2012-04-12_1317" title="Permanent link">&para;</a></h4>
<p>Implementation needs to address <strong>bonding (LACP)</strong> and <strong>vlan tagging</strong>
support !</p>
<p>Obviously if it detects known MAC addresses it can assume that it is a
restore to the same system and can continue with configuring the network
setup exactly as it was. But in case this is not the case, there are a
few things it could do (which we can do identically for VLAN tagging).
After configuring an interface it could test whether the configuration
in fact works (e.g. arping the gateway) if that does not work we have to
ask the user to what interface to map.</p>
<p>Obviously with LACP this is not going to be easy, since doing a
bruteforce on every combination of interfaces might be problematic (but
we could opt to only test/run with a single interface for LACP. But
during recovery we don't need HA.</p>
<p>What is needed is similar to what we implemented for the storage layout,
i.e. writing out an abstraction of the configuration that is active on
the system and then restoring the configuration from that abstract
network configuration file. And that network configuration file should
have dependencies between "interfaces" as well as support for bonding
(LACP or other), VLAN tagging and possible other stuff...</p>
<h4 id="gdha_commented_at_2014-10-23_0658"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/3#issuecomment-60199712">2014-10-23 06:58</a>:<a class="headerlink" href="#gdha_commented_at_2014-10-23_0658" title="Permanent link">&para;</a></h4>
<p>VLAN tagging has been added in the meantime. The abstraction layer of
network interfaces: I'm not convinced it is worth the time spending on
it as from experience moving to another HW type will cause many issues
anyway...<br />
Changing milestone move from 1.17 to future...</p>
<h4 id="gdha_commented_at_2015-01-07_1209"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/3#issuecomment-69013904">2015-01-07 12:09</a>:<a class="headerlink" href="#gdha_commented_at_2015-01-07_1209" title="Permanent link">&para;</a></h4>
<p>will close this one and if required (on demand) a new issue can be
openend</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2024 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2012-03-21.3.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
