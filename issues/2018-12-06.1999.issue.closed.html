<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#1999 Issue closed: Serial console does not show automatic recovery scripts - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#1999 Issue closed: Serial console does not show automatic recovery scripts";
        var mkdocs_page_input_path = "issues/2018-12-06.1999.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_nas.html">Internal Backup with tar to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_rsync.html">Internal Backup with rsync to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/rsync.html">External Backup using BACKUP=RSYNC method</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/rbme.html">External Backup using RBME</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/restic.html">External Backup using restic</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/duplicity.html">External Backup using duplicity</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../development/squash-git-log-commments.html">How to squash git log comments into one line</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#1999 Issue closed: Serial console does not show automatic recovery scripts</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="1999_issue_closed_serial_console_does_not_show_automatic_recovery_scripts"><a href="https://github.com/rear/rear/issues/1999">#1999 Issue</a> <code>closed</code>: Serial console does not show automatic recovery scripts<a class="headerlink" href="#1999_issue_closed_serial_console_does_not_show_automatic_recovery_scripts" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>waiting for info</code>, <code>support / question</code>,
<code>no-issue-activity</code></p>
<h4 id="signum_opened_issue_at_2018-12-06_1555"><img src="https://avatars.githubusercontent.com/u/36562?v=4" width="50"><a href="https://github.com/Signum">Signum</a> opened issue at <a href="https://github.com/rear/rear/issues/1999">2018-12-06 15:55</a>:<a class="headerlink" href="#signum_opened_issue_at_2018-12-06_1555" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>ReaR version ("/usr/sbin/rear -V"): Relax-and-Recover 2.4 /
    2018-06-21</p>
</li>
<li>
<p>OS version ("cat /etc/rear/os.conf" or "lsb_release -a" or "cat
    /etc/os-release"): Debian 9</p>
</li>
<li>
<p>ReaR configuration files ("cat /etc/rear/site.conf" and/or "cat
    /etc/rear/local.conf"):</p>
<pre><code>OUTPUT=ISO
GRUB_RESCUE=y
BACKUP=BORG
…
</code></pre>
</li>
<li>
<p>Hardware (PC or PowerNV BareMetal or ARM) or virtual machine (KVM
    guest or PoverVM LPAR): Occurs on a Virtualbox VM and on an HP DL
    380 G7.</p>
</li>
<li>
<p>System architecture (x86 compatible or PPC64/PPC64LE or what exact
    ARM device): AMD64</p>
</li>
<li>
<p>Firmware (BIOS or UEFI or Open Firmware) and bootloader (GRUB or
    ELILO or Petitboot): BIOS/GRUB</p>
</li>
<li>
<p>Storage (lokal disk or SSD) and/or SAN (FC or iSCSI or FCoE) and/or
    multipath (DM or NVMe): Local, virtualized, /dev/sda.</p>
</li>
<li>
<p>Description of the issue (ideally so that others can reproduce it):</p>
<ul>
<li>Attach a serial console.</li>
<li>Create a recovery boot medium as ISO.</li>
<li>Boot from the ISO.</li>
<li>Choose "Automatic recovery" from the GRUB menu.</li>
<li>The VGA console shows the beginning of the automatic recovery.
    However the serial console stops the output right after the
    kernel messages.</li>
</ul>
</li>
</ul>
<p>Yes, this sounds a bit like
<a href="https://github.com/rear/rear/issues/878">https://github.com/rear/rear/issues/878</a>
but either it's something different or a regression.</p>
<p>And this only happens when booting from the ISO image. It does not occur
when using the GRUB menu entry "Relax-and-Recover" that can be added by
<em>GRUB_RESCUE=y</em>.</p>
<p>/etc/default/grub has these options set:</p>
<pre><code>GRUB_CMDLINE_LINUX_DEFAULT=""
GRUB_CMDLINE_LINUX="console=tty1 console=ttyS0,115200"
GRUB_TERMINAL="console serial"
GRUB_SERIAL_COMMAND="serial --speed=115200 --unit=0 --word=8 --parity=no --stop=1"
</code></pre>
<p>Please let me know how I can further track that down.</p>
<ul>
<li>
<p>Workaround, if any: None known. Only the VGA console can be used.</p>
</li>
<li>
<p>Attachments, as applicable ("rear -D mkrescue/mkbackup/recover"
    debug log files):</p>
</li>
</ul>
<p>Output on the serial console:</p>
<p><a href="https://github.com/rear/rear/files/2653736/serial-console.txt">serial-console.txt</a></p>
<p>Output on the VGA console:</p>
<p><img alt="rear-bug-serial-01" src="https://user-images.githubusercontent.com/36562/49594700-bf8dd280-f976-11e8-8e95-aad70006b299.png" /><br />
<img alt="rear-bug-serial-02" src="https://user-images.githubusercontent.com/36562/49594704-c1579600-f976-11e8-926c-7b6ac21b6504.png" /><br />
<img alt="rear-bug-serial-03" src="https://user-images.githubusercontent.com/36562/49594705-c288c300-f976-11e8-8b8f-8785faac8a3d.png" /></p>
<h4 id="gozora_commented_at_2018-12-06_1853"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1999#issuecomment-444985949">2018-12-06 18:53</a>:<a class="headerlink" href="#gozora_commented_at_2018-12-06_1853" title="Permanent link">&para;</a></h4>
<p>Hello @Signum,</p>
<p>When you are in boot menu of your ISO (ReaR recovery system), assuming
your are booting with isolinux (syslinux) press <strong>F2</strong> for edit boot
entry you wish to boot and try to manually add
<code>console=tty1 console=ttyS0,115200</code> maybe it will help ...</p>
<p>V.</p>
<h4 id="jsmeix_commented_at_2018-12-07_0906"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1999#issuecomment-445168172">2018-12-07 09:06</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-12-07_0906" title="Permanent link">&para;</a></h4>
<p>@Signum<br />
I do not use serial console myself but I guess you need to play around
with<br />
the USE_SERIAL_CONSOLE and KERNEL_CMDLINE config variables<br />
to get it work in your particular case.</p>
<p>Every now and then we get issue reports related to the serial console<br />
in the recovery system (which usually "just works") but as far as I
noticed<br />
things could get really weird if the serial console does not "just
work".<br />
I think often the root cause is not actually inside the ReaR recovery
system<br />
but the hardware or virtual machine setup that is related to serial
console.</p>
<p>For details what really happens you need to inspect the scripts<br />
that deal with the USE_SERIAL_CONSOLE config variable:<br />
usr/share/rear/rescue/GNU/Linux/400_use_serial_console.sh<br />
usr/share/rear/prep/GNU/Linux/200_include_serial_console.sh<br />
usr/share/rear/output/USB/Linux-i386/300_create_extlinux.sh<br />
usr/share/rear/lib/bootloader-functions.sh</p>
<p>Run <code>rear -s mkrescue</code> to see which of those scripts are run<br />
in your particular case.</p>
<h4 id="signum_commented_at_2018-12-07_1320"><img src="https://avatars.githubusercontent.com/u/36562?v=4" width="50"><a href="https://github.com/Signum">Signum</a> commented at <a href="https://github.com/rear/rear/issues/1999#issuecomment-445230724">2018-12-07 13:20</a>:<a class="headerlink" href="#signum_commented_at_2018-12-07_1320" title="Permanent link">&para;</a></h4>
<p>@gozora</p>
<blockquote>
<p>When you are in boot menu of your ISO (ReaR recovery system), assuming
your are booting with isolinux (syslinux) press <strong>F2</strong> for edit boot
entry you wish to boot and try to manually add
<code>console=tty1 console=ttyS0,115200</code> maybe it will help ...</p>
</blockquote>
<p>It seems to be "Tab" rather than "F2". But, no, that doesn't work. The
default grub commandline is:</p>
<pre><code>┌──────────────────────────────────────────────────────────┐
│                  Relax-and-Recover v2.4                  │
├──────────────────────────────────────────────────────────┤
│ Recover reartest                                         │
│ Automatic Recover reartest                               │
│                                                          │
│ Other actions                                            │
│ Help for Relax-and-Recover                               │
│ Boot First Local disk (hd0)                              │
│ Boot Second Local disk (hd1)                             │
│ Boot Next device                                         │
│ Hardware Detection Tool                                  │
│ ReBoot system                                            │
│                                                          │
│                                                          │
└──────────────────────────────────────────────────────────┘

&gt; kernel initrd=initrd.cgz root=/dev/ram0 vga=normal rw selinux=0 console=ttyS0,115200 console=tty0 auto_recover
</code></pre>
<h4 id="gozora_commented_at_2018-12-07_1324"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1999#issuecomment-445231663">2018-12-07 13:24</a>:<a class="headerlink" href="#gozora_commented_at_2018-12-07_1324" title="Permanent link">&para;</a></h4>
<p>can you try to change to <code>onsole=ttyS1,115200 console=tty1</code> virtual
console console on your Proliant might be configured on COM1 ...</p>
<p>V.</p>
<h4 id="signum_commented_at_2018-12-07_1342"><img src="https://avatars.githubusercontent.com/u/36562?v=4" width="50"><a href="https://github.com/Signum">Signum</a> commented at <a href="https://github.com/rear/rear/issues/1999#issuecomment-445236320">2018-12-07 13:42</a>:<a class="headerlink" href="#signum_commented_at_2018-12-07_1342" title="Permanent link">&para;</a></h4>
<p>@gozora<br />
Thanks for the suggestions. But COM1/ttyS0 is the correct port. After
all I get the GRUB menu and all kernel boot messages. Just on automatic
recovery I don't see any output from the REAR scripts that is sent to
tty0 only.</p>
<h4 id="jsmeix_commented_at_2018-12-07_1415"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1999#issuecomment-445245126">2018-12-07 14:15</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-12-07_1415" title="Permanent link">&para;</a></h4>
<p>@Signum<br />
do you mean that with non-automatic recovery (i.e. when you<br />
select <code>Recover reartest</code> instead of <code>Automatic Recover reartest</code>)<br />
then you see the output from the ReaR scripts on your serial console?</p>
<h4 id="signum_commented_at_2018-12-07_1431"><img src="https://avatars.githubusercontent.com/u/36562?v=4" width="50"><a href="https://github.com/Signum">Signum</a> commented at <a href="https://github.com/rear/rear/issues/1999#issuecomment-445249831">2018-12-07 14:31</a>:<a class="headerlink" href="#signum_commented_at_2018-12-07_1431" title="Permanent link">&para;</a></h4>
<p>@jsmeix<br />
Yes, exactly. As long as I login as <em>root</em> through the manual recovery
all is fine. So I guess the grub/kernel start line makes login shells
work. But the automatic recovery doesn't require a login and seems to
start in a different way (that I have not understood yet).</p>
<p>Please take a look what appears on my serial console in case of <em>manual</em>
recovery:</p>
<pre><code>ISOLINUX 6.03 20171018  Copyright (C) 1994-2014 H. Peter Anvin et al

          ┌──────────────────────────────────────────────────────────┐
          │                  Relax-and-Recover v2.4                  │
          ├──────────────────────────────────────────────────────────┤
          │ Recover reartest                                         │
          │ Automatic Recover reartest                               │
          │                                                          │
          │ Other actions                                            │
          │ Help for Relax-and-Recover                               │
          │ Boot First Local disk (hd0)                              │
          │ Boot Second Local disk (hd1)                             │
          │ Boot Next device                                         │
          │ Hardware Detection Tool                                  │
          │ ReBoot system                                            │
          │                                                          │
          │                                                          │
          └──────────────────────────────────────────────────────────┘

          Press [Tab] to edit, [F2] for help, [F1] for version info



Rescue image kernel 4.9.0-8-amd64  Fri, 07 Dec 2018 14:16:02 +0100
BACKUP=REQUESTRESTORE OUTPUT=ISO 
Loading kernel... ok
Loading initrd.cgz...ok
[   000000000] Linux version 4.9.0-8-amd64((eeiinn-krree@@iists.debian.org) (gcc version 6.3.0 20170516 (Debian 6.3.0-18+deb9u1) ) #1 SMP Debian 4.9.130-2 (2018-10-27)
[    0.000000] Command line: BOOT_IMAGE=kernel initrd=initrd.cgz root=/dev/ram0 vga=normal rw selinux=0 console=ttyS0,115200ccnnsole=tty0
[    0.000000] x8//pp::SSupporting XSAVE feature 0x001: 'x87 floating point registers'
[...]
[   16.598586] x86/mm: Checked W+X mappings: passed, no W+X pages found.
[   16.728924] ip_tables: (C) 2000-2006 Netfilter Core Team
[   16.805222] random: systemd: uninitialized urandom read (16 bytes read)
[   16.835884] random: systemd: uninitialized urandom read (16 bytes read)
[   17.062305] systemd[1]: systemd 232 running in system mode. (+PAM +AUDIT +SELINUX +IMA +APPARMOR +SMACK +SYSVINIT +UTMP +LIBCRYPTSETUP +GCRYPT +GNUTLS +ACL +XZ +LZ4 +SECCOMP +BLKID +ELFUTILS +KMOD +IDN)
[   17.265860] random: systemd: uninitialized urandom read (16 bytes read)



Relax-and-Recover 2.4 / 2018-06-21

Relax-and-Recover comes with ABSOLUTELY NO WARRANTY; for details see
the GNU General Public License at: http://www.gnu.org/licenses/gpl.html

Host reartest using Backup REQUESTRESTORE and Output ISO
Build date: Fri, 07 Dec 2018 14:15:35 +0100


Debian GNU/Linux 9 reartest ttyS0

reartest login: root
root

Welcome to Relax-and-Recover. Run "rear recover" to restore your system !

RESCUE reartest:~ #
</code></pre>
<p>In <em>automatic</em> recovery mode the output stops right before
"Relax-and-Recover 2.4 / 2018-06-21".</p>
<h4 id="jsmeix_commented_at_2018-12-07_1449"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1999#issuecomment-445254842">2018-12-07 14:49</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-12-07_1449" title="Permanent link">&para;</a></h4>
<p>@Signum<br />
I have absolutely no idea what the root cause could be here.</p>
<p>The recovery system startup script that implements<br />
automatic (and unattended) recovery mode is<br />
usr/share/rear/skel/default/etc/scripts/system-setup<br />
e.g. the current one online at<br />
<a href="https://raw.githubusercontent.com/rear/rear/master/usr/share/rear/skel/default/etc/scripts/system-setup">https://raw.githubusercontent.com/rear/rear/master/usr/share/rear/skel/default/etc/scripts/system-setup</a></p>
<p>Note my comment therein before the <code>sleep 1</code><br />
i.e. I already had inexplicable issues with missing output.</p>
<p>Likely a useless attempt:<br />
Add the kernel command line option <code>debug</code> as in<br />
<a href="https://github.com/rear/rear/issues/1999#issuecomment-444985949">https://github.com/rear/rear/issues/1999#issuecomment-444985949</a><br />
which let's the recovery system startup scripts run with 'set -x'<br />
but I assume you won't get any output on your serial console<br />
because you get none after the last kernel message.</p>
<p>The difference between non-automatic recovery (the default case) and<br />
automatic recovery is that in case of automatic (and unattended)
recovery<br />
the script usr/share/rear/skel/default/etc/scripts/system-setup<br />
is not finished - i.e. automatic (and unattended) recovery are run<br />
as "rear recover" calls within that script's environment and<br />
I guess that within this environment there is no output on your<br />
serial console - but I have no idea why.</p>
<p>Your<br />
<a href="https://github.com/rear/rear/issues/1999#issuecomment-445249831">https://github.com/rear/rear/issues/1999#issuecomment-445249831</a><br />
indicates that there is no output on your serial console while<br />
usr/share/rear/skel/default/etc/scripts/system-setup runs<br />
(it runs as /etc/scripts/system-setup in the recovery system)<br />
because there are none of the messages from that script like</p>
<pre>
Configuring Relax-and-Recover rescue system
</pre>

<p>(see the <code>echo</code> commands in that script).</p>
<h4 id="jsmeix_commented_at_2018-12-07_1535"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1999#issuecomment-445269447">2018-12-07 15:35</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-12-07_1535" title="Permanent link">&para;</a></h4>
<p>Only a blind guess:<br />
Perhaps something is missing to get serial console output<br />
in the systemd unit files in the recovery system<br />
that run /etc/scripts/system-setup like<br />
usr/share/rear/skel/default/usr/lib/systemd/system/sysinit.service<br />
usr/share/rear/skel/default/usr/lib/systemd/system/run-system-setup.service<br />
or whatever script it actually is that executes
/etc/scripts/system-setup<br />
in a particular recovery system?</p>
<h4 id="signum_commented_at_2018-12-09_1053"><img src="https://avatars.githubusercontent.com/u/36562?v=4" width="50"><a href="https://github.com/Signum">Signum</a> commented at <a href="https://github.com/rear/rear/issues/1999#issuecomment-445527334">2018-12-09 10:53</a>:<a class="headerlink" href="#signum_commented_at_2018-12-09_1053" title="Permanent link">&para;</a></h4>
<p>@jsmeix<br />
I will look into that later today. But it appears that the systemd
service is just sending output to the console (tty1) by default. systemd
services can be told to use other devices, but not both tty1 and ttyS0
at the same time. Maybe if I understand how the kernel bot option
"console=ttyS0" leads to also getting a getty on ttyS0 then I can copy
that.</p>
<h4 id="jsmeix_commented_at_2018-12-14_1255"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1999#issuecomment-447317113">2018-12-14 12:55</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-12-14_1255" title="Permanent link">&para;</a></h4>
<p>@Signum<br />
are no news good news?</p>
<p>If you somehow solved it (or found a usable workaround)<br />
we would appreciate feedback how you did it in your case<br />
because that helps us to deal with similar issues in the future.</p>
<p>If you found a solution please provide it to us as GitHub pull request<br />
even if your solution is perhaps not yet the "last word in wisdom"<br />
we would appreciate to learn about any intermediate step forward.</p>
<h4 id="signum_commented_at_2018-12-14_1427"><img src="https://avatars.githubusercontent.com/u/36562?v=4" width="50"><a href="https://github.com/Signum">Signum</a> commented at <a href="https://github.com/rear/rear/issues/1999#issuecomment-447340932">2018-12-14 14:27</a>:<a class="headerlink" href="#signum_commented_at_2018-12-14_1427" title="Permanent link">&para;</a></h4>
<p>@jsmeix Sorry for the delay. I had to shift my focus because we were
facing massive troubles at work on a different topic. I hope I can come
up with a proposal beginning of next week.<br />
I was thinking about the difference of login shells (that are started on
ttyS0 correctly) and the systemd-induced automatic recovery job… Would
it be an option to always make the user login first and then run either
"rear recover" as before or "rear autorecover" for a fully automated
experience?</p>
<h4 id="jsmeix_commented_at_2018-12-14_1511"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1999#issuecomment-447353643">2018-12-14 15:11</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-12-14_1511" title="Permanent link">&para;</a></h4>
<p>@Signum<br />
I don't know how to automatically login as 'root' during startup<br />
of the recovery system and how to let the auto-logged-in 'root'<br />
automatically type <code>rear recover</code> and afterwards <code>reboot</code><br />
(depending whether or not if 'rear recover' was successful)<br />
to keep the same automated experience as we have now.</p>
<p>I fear any scripted call of <code>rear recover</code> and afterwards <code>reboot</code><br />
might behave different compared to a real interactive shell<br />
but I am not at all an expert in this area - in particular not<br />
when systemd is involved...</p>
<h4 id="gdha_commented_at_2018-12-14_1514"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/1999#issuecomment-447354603">2018-12-14 15:14</a>:<a class="headerlink" href="#gdha_commented_at_2018-12-14_1514" title="Permanent link">&para;</a></h4>
<p>@Signum perhaps have a look at
<a href="https://github.com/gdha/rear-automated-testing">https://github.com/gdha/rear-automated-testing</a>
?</p>
<h4 id="github-actions_commented_at_2020-06-28_0133"><img src="https://avatars.githubusercontent.com/in/15368?v=4" width="50"><a href="https://github.com/apps/github-actions">github-actions</a> commented at <a href="https://github.com/rear/rear/issues/1999#issuecomment-650665319">2020-06-28 01:33</a>:<a class="headerlink" href="#github-actions_commented_at_2020-06-28_0133" title="Permanent link">&para;</a></h4>
<p>Stale issue message</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2025 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2018-12-06.1999.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
