<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#3436 PR closed: Fix for simulation mode in sbin/rear - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#3436 PR closed: Fix for simulation mode in sbin/rear";
        var mkdocs_page_input_path = "issues/2025-03-24.3436.pr.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_nas.html">Internal Backup with tar to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../scenarios/netfs_rsync.md">Internal Backup with rsync to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/rbme.html">External Backup using RBME</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/restic.html">External Backup using restic</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../development/squash-git-log-commments.html">How to squash git log comments into one line</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#3436 PR closed: Fix for simulation mode in sbin/rear</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="3436_pr_closed_fix_for_simulation_mode_in_sbinrear"><a href="https://github.com/rear/rear/pull/3436">#3436 PR</a> <code>closed</code>: Fix for simulation mode in sbin/rear<a class="headerlink" href="#3436_pr_closed_fix_for_simulation_mode_in_sbinrear" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>bug</code>, <code>won't fix / can't fix / obsolete</code></p>
<h4 id="jsmeix_opened_issue_at_2025-03-24_0928"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> opened issue at <a href="https://github.com/rear/rear/pull/3436">2025-03-24 09:28</a>:<a class="headerlink" href="#jsmeix_opened_issue_at_2025-03-24_0928" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>Type: <strong>Bug Fix</strong></p>
</li>
<li>
<p>Impact: <strong>Normal</strong></p>
</li>
<li>
<p>Reference to related issue (URL):</p>
</li>
</ul>
<p><a href="https://github.com/rear/rear/pull/3424#issuecomment-2747079736">https://github.com/rear/rear/pull/3424#issuecomment-2747079736</a></p>
<ul>
<li>How was this pull request tested?</li>
</ul>
<p>With the change 'rear -s ...' works again for me.</p>
<ul>
<li>Description of the changes in this pull request:</li>
</ul>
<p>In sbin/rear in simulation mode the workflow scripts<br />
<code>$SHARE_DIR/lib/[a-z]*-workflow.sh</code> need to be executed (sourced)<br />
to get the WORKFLOW_... functions defined,<br />
otherwise sbin/rear could not run the requested workflow.</p>
<p>In simulation mode a WORKFLOW_... function is run<br />
but its called scripts are not executed by the Source function.</p>
<h4 id="pcahyna_commented_at_2025-03-24_1049"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/pull/3436#issuecomment-2747696678">2025-03-24 10:49</a>:<a class="headerlink" href="#pcahyna_commented_at_2025-03-24_1049" title="Permanent link">&para;</a></h4>
<p>Thanks for the prompt fix, @jsmeix, but wouldn't it be better to revert
to use <code>source</code> here unconditionally, instead of complicating the code?
It looks like <code>Source</code> and <code>source</code> have a bit different semantics (the
former skips the actual sourcing in simulation mode) and in the case of
loading library function we actually want the semantics of the latter
instead of the former (the former looks better suited for actual code
execution, i.e. executing scripts, not loading function definitions).</p>
<p>Note that the commit message of 7df7dc6499b7703b98d7293fbbf5de4d514a29ac
says:</p>
<blockquote>
<p>... we can use Source to source our normal scripts<br />
in usr/share/rear/lib</p>
</blockquote>
<p>but it does not say why should we use it (merely that we can use it).</p>
<h4 id="jsmeix_commented_at_2025-03-24_1352"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/3436#issuecomment-2748210435">2025-03-24 13:52</a>:<a class="headerlink" href="#jsmeix_commented_at_2025-03-24_1352" title="Permanent link">&para;</a></h4>
<p>Both 'source' and 'Source' seem to work in practice.</p>
<p>'source' is proven to work in practice because we used that<br />
all the time at that specific code place only in sbin/rear<br />
until 2 weeks ago when I did<br />
<a href="https://github.com/rear/rear/commit/7df7dc6499b7703b98d7293fbbf5de4d514a29ac">https://github.com/rear/rear/commit/7df7dc6499b7703b98d7293fbbf5de4d514a29ac</a></p>
<p>On the other hand 'Source' is explicitly meant<br />
to source ReaR scripts and ReaR config files<br />
(it provides additional functionality and safeguards)<br />
and this is also proven to work in practice because<br />
we use that all the time at several code places.</p>
<p>I think 'source' was used at that code place in sbin/rear<br />
because before
<a href="https://github.com/rear/rear/pull/3424">https://github.com/rear/rear/pull/3424</a><br />
the 'Source' function was not yet available<br />
at that code place because the 'Source' function<br />
was defined in /usr/share/rear/lib/framework-functions.sh<br />
so I think plain 'source' was used at that code place<br />
basically as some kind of "makeshift" because<br />
the actually right function to source ReaR scripts<br />
and ReaR config files was just not yet available.<br />
But I cannot prove why 'source' was used at that code<br />
place in sbin/rear without a comment at that code<br />
which explains the WHY.</p>
<p>With my more complicated code here I intend to use<br />
the 'Source' function for what I think it is meant<br />
to be used in normal use cases so in the special use case<br />
of the simulation mode I need additional exceptional code.</p>
<p>Compare how much code was executed in simulation mode before<br />
with how much code is executed in simulation mode now with<br />
the changes in this pull request - I mean when we call<br />
that stuff "simulation mode" we should avoid executing<br />
code which is not needed for the simulation.</p>
<p>By the way:<br />
I do not enjoy those endless special case code<br />
and exceptional stuff handling and whatnot.<br />
I know "good old times" when computing had been much simpler<br />
with much less features and all was much less user friendly ;-)<br />
What really annoys me is that rather often underlying foundations<br />
behave unpredictably, unreliably, insecure, crude, rude,...<br />
so higher level programmers must endlessly implement<br />
tons of additional rather complicated makeshift code<br />
to somehow mitigate shortcomings in underlying foundations.</p>
<h4 id="pcahyna_commented_at_2025-03-24_1549"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/pull/3436#issuecomment-2748597176">2025-03-24 15:49</a>:<a class="headerlink" href="#pcahyna_commented_at_2025-03-24_1549" title="Permanent link">&para;</a></h4>
<blockquote>
<p>I do not enjoy those endless special case code<br />
and exceptional stuff handling and whatnot.<br />
I know "good old times" when computing had been much simpler<br />
with much less features and all was much less user friendly ;-)<br />
What really annoys me is that rather often underlying foundations<br />
behave unpredictably, unreliably, insecure, crude, rude,...<br />
so higher level programmers must endlessly implement<br />
tons of additional rather complicated makeshift code<br />
to somehow mitigate shortcomings in underlying foundations.</p>
</blockquote>
<p>In my experience the "complicated makeshift code" and shortcomings in
underlying foundations is often not the fault of the code, but of the
specification - i.e. the problem has not been introduced at the coding
phase but at the design phase - it was not well specified what the code
actually should do and thus how one should implement it and what other
code can expect from it.</p>
<p>Consider this case: to me it is not exactly clear what is the intended
difference of <code>Source</code> vs. <code>source</code> (your wrapper introduced in ReaR).
You write that <code>Source</code> provides additional functionality and
safeguards, but safeguards are introduced in your <code>source</code> wrapper
already. Regarding the additional functionality, it needs to be
specified for which use it is intended (e.g. because in this case the
functionality is indeed the problem). You write that</p>
<blockquote>
<p>'Source' is explicitly meant to source ReaR scripts and ReaR config
files"</p>
</blockquote>
<p>and that you think</p>
<blockquote>
<p>plain 'source' was used at that code place basically as some kind of
"makeshift" because the actually right function to source ReaR scripts
and ReaR config files was just not yet available.</p>
</blockquote>
<p>I am not sure that this was the original intent though. To me it seems
rather that <code>Source</code> has had the more restricted purpose of sourcing the
scripts in the scripting framework stages (from<code>SourceStage</code>), so
reading libraries and configuration files would not be included and this
would explain why to use <code>source</code> here.</p>
<p>Have a look what <code>Source</code> is doing:</p>
<pre><code>    # Simulate sourcing the scripts in $SHARE_DIR
    if test "$SIMULATE" &amp;&amp; expr "$source_file" : "$SHARE_DIR" &gt;/dev/null; then
        LogPrint "Source $relname"
        return
    fi
</code></pre>
<p>Is this intended for reading configuration files? What about
configuration files under <code>usr/share/rear/conf</code> ? To me it looks like
they will get skipped - thus simulation mode will work without default
values of variables defined - is that intended? I have never used
simulation mode, but to me it looks like the steps in the simulation
could be quite different from the actual run, which defeats the purpose
of the simulation.</p>
<p>you write:</p>
<blockquote>
<p>But I cannot prove why 'source' was used at that code<br />
place in sbin/rear without a comment at that code<br />
which explains the WHY.</p>
</blockquote>
<p>and I agree, I think we should take this (otherwise quite trivial) PR as
an opportunity to better specify the intended use of the <code>source</code>
wrapper vs. <code>Source</code>.</p>
<p>P.S. I am of course also guilty here - I should have noticed the shift
in meaning of <code>Source</code> in the review of the PR where you made the
changes.</p>
<h4 id="jsmeix_commented_at_2025-03-24_1615"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/3436#issuecomment-2748682856">2025-03-24 16:15</a>:<a class="headerlink" href="#jsmeix_commented_at_2025-03-24_1615" title="Permanent link">&para;</a></h4>
<p>My main point why I am thinking that 'Source' is explicitly<br />
meant to source ReaR scripts and ReaR config files is that<br />
we use 'Source' in sbin/rear to source ReaR config files<br />
and in 'SourceStage' to source ReaR scripts so I assumed<br />
that also our usr/share/rear/lib/*.sh scripts are meant<br />
to be sourced via 'Source'?</p>
<h4 id="jsmeix_commented_at_2025-03-25_1338"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/3436#issuecomment-2751294301">2025-03-25 13:38</a>:<a class="headerlink" href="#jsmeix_commented_at_2025-03-25_1338" title="Permanent link">&para;</a></h4>
<p>This pull request cannot proceed as intended<br />
because its root cause(s) are way off-topic,<br />
cf.
<a href="https://github.com/rear/rear/issues/3438">https://github.com/rear/rear/issues/3438</a><br />
which is a bigger task for the future as time permits.</p>
<p>What I will do to fix things for our current simulation mode<br />
is to simply revert my<br />
<a href="https://github.com/rear/rear/commit/7df7dc6499b7703b98d7293fbbf5de4d514a29ac">https://github.com/rear/rear/commit/7df7dc6499b7703b98d7293fbbf5de4d514a29ac</a><br />
to just make things working again as they did before.</p>
<h4 id="jsmeix_commented_at_2025-03-25_1351"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/3436#issuecomment-2751335981">2025-03-25 13:51</a>:<a class="headerlink" href="#jsmeix_commented_at_2025-03-25_1351" title="Permanent link">&para;</a></h4>
<p>Done via<br />
<a href="https://github.com/rear/rear/commit/1128f1b616b370e49ac7be7f0ae0fa5ab04bc638">https://github.com/rear/rear/commit/1128f1b616b370e49ac7be7f0ae0fa5ab04bc638</a></p>
<h4 id="jsmeix_commented_at_2025-03-25_1358"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/3436#issuecomment-2751359312">2025-03-25 13:58</a>:<a class="headerlink" href="#jsmeix_commented_at_2025-03-25_1358" title="Permanent link">&para;</a></h4>
<p>This pull request also<br />
revealed that currently it is not clear<br />
when 'source' versus 'Source' should be used in ReaR<br />
so that area needs to be sorted out and cleaned up.<br />
This is a bigger task for the future as time permits via<br />
<a href="https://github.com/rear/rear/issues/3439">https://github.com/rear/rear/issues/3439</a></p>
<h4 id="pcahyna_commented_at_2025-03-25_1633"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/pull/3436#issuecomment-2751858143">2025-03-25 16:33</a>:<a class="headerlink" href="#pcahyna_commented_at_2025-03-25_1633" title="Permanent link">&para;</a></h4>
<blockquote>
<p>My main point why I am thinking that 'Source' is explicitly<br />
meant to source ReaR scripts and ReaR config files is that<br />
we use 'Source' in sbin/rear to source ReaR config files</p>
</blockquote>
<p>My bad - I thought that using <code>Source</code> for ReaR config files is a recent
change, but in fact it has been like this since the beginning. I also
thought that <code>Source</code> is used for <code>usr/share/rear/conf/default.conf</code>,
but it is not (and this is an irregularity, but it prevents what I
wrote:</p>
<blockquote>
<p>What about configuration files under usr/share/rear/conf ? To me it
looks like they will get skipped - thus simulation mode will work
without default values of variables defined - is that intended?</p>
</blockquote>
<p>)<br />
<a href="https://github.com/rear/rear/blob/a61075364b8f0d92c62d63be71467a31e0d4a39d/usr/sbin/rear#L414">https://github.com/rear/rear/blob/a61075364b8f0d92c62d63be71467a31e0d4a39d/usr/sbin/rear#L414</a></p>
<p>The other platform-specific configuration defaults are read using
<code>Source</code> though:<br />
<a href="https://github.com/rear/rear/blob/a61075364b8f0d92c62d63be71467a31e0d4a39d/usr/sbin/rear#L798">https://github.com/rear/rear/blob/a61075364b8f0d92c62d63be71467a31e0d4a39d/usr/sbin/rear#L798</a><br />
so simulation mode will work without values defined there. We agreed
that this is a bug.</p>
<p>Therefore, I would not claim anymore that <code>Source</code> is not intended for
reading library files, as it is indeed intended for configuration files
(so not just for code snippets under stages). For library files we can
use it or avoid it as we decide.</p>
<h4 id="jsmeix_commented_at_2025-03-26_1225"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/3436#issuecomment-2754231401">2025-03-26 12:25</a>:<a class="headerlink" href="#jsmeix_commented_at_2025-03-26_1225" title="Permanent link">&para;</a></h4>
<p>We cannot use 'Source' in sbin/rear to source default.conf<br />
because we need to source default.conf before we source<br />
_framework-setup-and-functions.sh where 'Source' gets defind.<br />
The comments in sbin/rear hopefully explain why we do it this way.</p>
<h4 id="jsmeix_commented_at_2025-03-26_1240"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/3436#issuecomment-2754268634">2025-03-26 12:40</a>:<a class="headerlink" href="#jsmeix_commented_at_2025-03-26_1240" title="Permanent link">&para;</a></h4>
<p>In general regarding 'Source' versus 'source' in simulation mode:</p>
<p>See my above<br />
<a href="https://github.com/rear/rear/pull/3436#issuecomment-2748210435">https://github.com/rear/rear/pull/3436#issuecomment-2748210435</a><br />
excerpt</p>
<pre><code>... I mean when we call
that stuff "simulation mode" we should avoid executing
code which is not needed for the simulation
</code></pre>
<p>In contrast to default.conf that is not meant to be<br />
modified by the user, the user config files are meant<br />
for the user to also (as needed) execute what he likes, see<br />
<a href="https://github.com/rear/rear/blob/rear-2.9/etc/rear/local.conf">https://github.com/rear/rear/blob/rear-2.9/etc/rear/local.conf</a></p>
<pre><code># Because 'source' executes the content as a bash script you can run commands
# within your configuration files, in particular commands to set different
# configuration values depending on certain conditions as you need like
# CONDITION_COMMAND &amp;&amp; VARIABLE="special_value" || VARIABLE="usual_value"
# but that means such commands get always executed when 'rear' is run.
# You must ensure commands in configuration files work always without errors
# regardless in which environment your commands will be run, in particular
# on your original system (i.e. during "rear mkrescue" or "rear mkbackup")
# and also within the ReaR recovery system (i.e. during "rear recover").
</code></pre>
<p>By pure luck my wording<br />
"such commands get always executed when 'rear' is run"<br />
includes also the simulation mode so we are safe<br />
from a technical point of view<br />
"dear user, you have been told so"<br />
but on the other hand my wording<br />
"You must ensure commands in configuration files<br />
work always without errors"<br />
is not yet sufficiently safe so it shoud better read<br />
something like<br />
"You must ensure commands in configuration files<br />
work always without errors or side effects"<br />
because a user is likely not so happy when things<br />
get modified in his system in simulation mode because<br />
his commands were also executed in simulation mode.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2025 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2025-03-24.3436.pr.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
