<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>2023 03 01.2950.pr.merged - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "2023 03 01.2950.pr.merged";
        var mkdocs_page_input_path = "issues/2023-03-01.2950.pr.merged.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/rust.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', '366986045', 'auto');
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
      <li>2023 03 01.2950.pr.merged</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="2950_pr_merged_rear_in_docker_for_development_fix_package_dependencies"><a href="https://github.com/rear/rear/pull/2950">#2950 PR</a> <code>merged</code>: ReaR in Docker for development &amp; fix package dependencies<a class="headerlink" href="#2950_pr_merged_rear_in_docker_for_development_fix_package_dependencies" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>fixed / solved / done</code>, <code>ReaR Project</code></p>
<h4 id="schlomo_opened_issue_at_2023-03-01_1753"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> opened issue at <a href="https://github.com/rear/rear/pull/2950">2023-03-01 17:53</a>:<a class="headerlink" href="#schlomo_opened_issue_at_2023-03-01_1753" title="Permanent link">&para;</a></h4>
<p>Tooling to quickly run commands or ReaR via Docker in all "officially
supported" Linux distros and fixes for package dependencies</p>
<p>@rear/contributors happy to hear your thoughts on how to make
<code>tools/run-in-docker</code> even more useful for you.</p>
<p>Quick intro:</p>
<ol>
<li>run <code>tools/run-in-docker -- --patch</code> to prepare the Docker images
    for ReaR</li>
<li>run <code>tools/run-in-docker --</code> to check Bash version</li>
<li>run <code>tools/run-in-docker -- usr/sbin/rear dump</code> to check ReaR on all
    distros</li>
</ol>
<p>Use <code>run-in-docker -a amd64 --</code> to choose architecture different from
your host (e.g. for working on M1 Mac)</p>
<p>Use <code>run-in-docker suse --</code> to limit to matching subset of Docker images
- or specify completely different Docker image</p>
<p>WIP, currently works for Ubuntu, Debian and SUSE</p>
<p>@jsmeix I couldn't find a working Docker image of SLES12 with repos that
work for software installation so I used Leap 42 that seems to be
similar (e.g. using <code>asciidoc</code> instead of <code>asciidoctor</code>)</p>
<h4 id="jsmeix_commented_at_2023-03-02_1255"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/2950#issuecomment-1451824417">2023-03-02 12:55</a>:<a class="headerlink" href="#jsmeix_commented_at_2023-03-02_1255" title="Permanent link">&para;</a></h4>
<p>@schlomo<br />
regarding a SLES12 Docker image with repos for software installation:</p>
<p>It was a rather long time ago (I guess about two years ago)<br />
when I had worked a bit with Docker only to try out something.<br />
At that time I used only SLE15 and openSUSE Leap 15.1 and 15.2.<br />
Because all those stuff is currently continuously developing<br />
I cannot provide you right now what works for SLE12.<br />
I will try to play around with it as time permits.<br />
Feel free to skip SLE12 - at least for now.</p>
<p>Perhaps SUSE's "Container Guide" may help you:<br />
<a href="https://documentation.suse.com/container/all/pdf/SLES-container_color_en.pdf#book-sles-docker">https://documentation.suse.com/container/all/pdf/SLES-container_color_en.pdf#book-sles-docker</a></p>
<h4 id="schlomo_commented_at_2023-03-02_1258"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/pull/2950#issuecomment-1451828081">2023-03-02 12:58</a>:<a class="headerlink" href="#schlomo_commented_at_2023-03-02_1258" title="Permanent link">&para;</a></h4>
<p>@jsmeix do you think that Leap 42 is sufficiently similar to SLES12 to
allow using it for testing, or is it too far away and there is no value
in testing something on Leap 42?</p>
<p>The problem seems to be the lack of publicly available SLES12 repos</p>
<h4 id="jsmeix_commented_at_2023-03-02_1437"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/2950#issuecomment-1451969494">2023-03-02 14:37</a>:<a class="headerlink" href="#jsmeix_commented_at_2023-03-02_1437" title="Permanent link">&para;</a></h4>
<p>I can use a public accessible SLE12-SP5 image repository<br />
but there are no RPM package repopsitories defined in it<br />
and what is installed by default is too minimal:</p>
<pre><code># docker run -it --name testing registry.suse.com/suse/sles12sp5:latest /bin/bash
Unable to find image 'registry.suse.com/suse/sles12sp5:latest' locally
latest: Pulling from suse/sles12sp5
4ffd95c779b8: Pull complete 
Digest: sha256:21777cc4d43d15a7964e63a0aa03d1dc7cf9982f4890b4394c9e05b7f737ec23
Status: Downloaded newer image for registry.suse.com/suse/sles12sp5:latest

e32e3327832d:/ # zypper lr  
Refreshing service 'container-suseconnect-zypp'.
Problem retrieving the repository index file for service 'container-suseconnect-zypp':
[container-suseconnect-zypp|file:/usr/lib/zypp/plugins/services/container-suseconnect-zypp] 
Warning: Skipping service 'container-suseconnect-zypp' because of the above error.
Warning: No repositories defined.
Use the 'zypper addrepo' command to add one or more repositories.

e32e3327832d:/ # type -a bc
bash: type: bc: not found
</code></pre>
<p>Now I found my (SUSE internal) documentation from the time<br />
when I had worked a bit with Docker to try out something.<br />
It contains (excerpt):</p>
<pre><code>I did this very first proof of concept test on Leap 15.2
because for SLE15 there are no public accessible
online software repositories which would make it
needlessly hard ...
... a ... Docker container is run that is based
on a Leap 15.2 base container image
...
The following Dockerfile
...
FROM registry.opensuse.org/opensuse/leap
MAINTAINER jsmeix
ADD etc/zypp/* /etc/zypp/
RUN zypper -v refs &amp;&amp; zypper -v refresh
# in particular with online repositories it seems reasonable
# to first update the basic system to an up-to-date state
# before installing newer packages into it:
RUN zypper -v --non-interactive up
# netcat and less are nice to have when running bash inside the container:
RUN zypper -v --non-interactive in netcat less
...
</code></pre>
<p>I also got stuck at the same problem<br />
which I avoided by using Leap.</p>
<p>So I suggest to use Leap instead of SLE<br />
to avoid issues with SLE restrictions<br />
e.g. like</p>
<pre><code># docker run -it --name testing2 registry.opensuse.org/opensuse/leap:latest /bin/bash
...

22f4fd0505a6:/ # zypper lr -E
Repository priorities are without effect.
All enabled repositories share the same priority.
repo-backports-update | Update repository of openSUSE Backports
repo-non-oss          | Non-OSS Repository
repo-oss              | Main Repository
repo-sle-update       | Update repository with updates from SUSE Linux Enterprise 15
repo-update           | Main Update Repository
repo-update-non-oss   | Update Repository (Non-Oss)

22f4fd0505a6:/ # zypper refs &amp;&amp; zypper -v refresh
...

22f4fd0505a6:/ # zypper --non-interactive up
...

22f4fd0505a6:/ # type -a bc
bash: type: bc: not found

22f4fd0505a6:/ # zypper --non-interactive in bc
...

22f4fd0505a6:/ # type -a bc
bc is /usr/bin/bc
</code></pre>
<p>Regarding SLE12 vs. Leap 42:</p>
<p>Because Leap 42.1 is based on SLE12-SP1<br />
it is perfectly OK to use Leap &gt;= 42.1<br />
as a substitute for SLE12.</p>
<p>On<br />
<a href="https://registry.opensuse.org/cgi-bin/cooverview">https://registry.opensuse.org/cgi-bin/cooverview</a><br />
I found only 42 and 42.3 (under "leap")</p>
<p>I get:</p>
<pre><code># docker run -it --name testing3 registry.opensuse.org/opensuse/leap:42 /bin/bash

Unable to find image 'registry.opensuse.org/opensuse/leap:42' locally
42: Pulling from opensuse/leap
868a4212e7d9: Pull complete 
Digest: sha256:6ff4db34f99ba6f374b724077405de1eaf25ad1aa8c4e1e3197fc158d5d7f4ce
Status: Downloaded newer image for registry.opensuse.org/opensuse/leap:42

b77e78fb6c47:/ # zypper lr -E
Repository priorities are without effect. All enabled repositories share the same priority.
# | Alias          | Name           | Enabled | GPG Check | Refresh
--+----------------+----------------+---------+-----------+--------
1 | NON OSS        | NON OSS        | Yes     | ( p) Yes  | Yes    
2 | NON OSS Update | NON OSS Update | Yes     | ( p) Yes  | Yes    
3 | OSS            | OSS            | Yes     | ( p) Yes  | Yes    
4 | OSS Update     | OSS Update     | Yes     | ( p) Yes  | Yes

b77e78fb6c47:/ # cat /etc/os-release 
NAME="openSUSE Leap"
VERSION="42.3"
ID=opensuse
ID_LIKE="suse"
VERSION_ID="42.3"
PRETTY_NAME="openSUSE Leap 42.3"
ANSI_COLOR="0;32"
CPE_NAME="cpe:/o:opensuse:leap:42.3"
BUG_REPORT_URL="https://bugs.opensuse.org"
HOME_URL="https://www.opensuse.org/"

b77e78fb6c47:/ # zypper refs                  
All services have been refreshed.

b77e78fb6c47:/ # zypper --non-interactive refresh
Repository 'NON OSS' is up to date.                                                                                                                     
Repository 'NON OSS Update' is up to date.                                                                                                              
Repository 'OSS' is up to date.                                                                                                                         
Retrieving repository 'OSS Update' metadata ------------------------[\]
...
Signature verification failed for file 'repomd.xml' from repository 'OSS Update'. Continue? [yes/no] (no): no
Retrieving repository 'OSS Update' metadata .................[error]
...
Skipping repository 'OSS Update' because of the above error.
Some of the repositories have not been refreshed because of an error.

b77e78fb6c47:/ # zypper --non-interactive up
Retrieving repository 'OSS Update' metadata --------------------------[\]
Signature verification failed for file 'repomd.xml' from repository 'OSS Update'.
...
Warning: Repository 'NON OSS Update' appears to be outdated. Consider using a different mirror or server.
Reading installed packages...
Nothing to do.

b77e78fb6c47:/ # type -a bc
bash: type: bc: not found

b77e78fb6c47:/ # zypper --non-interactive in bc
Retrieving repository 'OSS Update' metadata ------------------------[|]
Signature verification failed for file 'repomd.xml' from repository 'OSS Update'.
...
The following NEW package is going to be installed:
  bc
...
Continue? [y/n/...? shows all options] (y): y
Retrieving package bc-1.06.95-11.13.x86_64                                                                         (1/1), 112.4 KiB (253.8 KiB unpacked)
Retrieving: bc-1.06.95-11.13.x86_64.rpm ........................[done]
Checking for file conflicts: ...................................[done]
(1/1) Installing: bc-1.06.95-11.13.x86_64 ......................[done]

b77e78fb6c47:/ # type -a bc
bc is /usr/bin/bc
</code></pre>
<h4 id="schlomo_commented_at_2023-04-01_2041"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/pull/2950#issuecomment-1493112418">2023-04-01 20:41</a>:<a class="headerlink" href="#schlomo_commented_at_2023-04-01_2041" title="Permanent link">&para;</a></h4>
<p>@rear/contributors I'd like to merge this branch within the next couple
of days. Currently Debian doesn't work because of some strange problem
with their repos, but I consider this a minor problem as long as Ubuntu
does work.</p>
<p>I heavily reworked the <code>Makefile</code> here to support building without
writing so much to the source tree and to base all the distro builds off
the generated <code>dist</code> archive.</p>
<h4 id="jsmeix_commented_at_2023-04-04_1227"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/2950#issuecomment-1495886766">2023-04-04 12:27</a>:<a class="headerlink" href="#jsmeix_commented_at_2023-04-04_1227" title="Permanent link">&para;</a></h4>
<p><a href="https://github.com/rear/rear/pull/2950/files">https://github.com/rear/rear/pull/2950/files</a><br />
shows several "No newline at end of file" marks.<br />
I didn't check if this is actually true or only false alarm.</p>
<h4 id="schlomo_commented_at_2023-04-04_1330"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/pull/2950#issuecomment-1495981327">2023-04-04 13:30</a>:<a class="headerlink" href="#schlomo_commented_at_2023-04-04_1330" title="Permanent link">&para;</a></h4>
<p>I only found one worth fixing and fixed that in #2965.</p>
<p>FYI, I use <code>pcregrep -LMr '\n\Z' .</code> to find problematic files.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2022 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2023-03-01.2950.pr.merged.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
