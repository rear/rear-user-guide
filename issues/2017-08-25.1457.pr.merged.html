<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#1457 PR merged: Enhance MOUNTPOINTS_TO_RESTORE into DIRECTORIES_TO_CREATE - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#1457 PR merged: Enhance MOUNTPOINTS_TO_RESTORE into DIRECTORIES_TO_CREATE";
        var mkdocs_page_input_path = "issues/2017-08-25.1457.pr.merged.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_nas.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../development/squash-git-log-commments.html">How to squash git log comments into one line</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#1457 PR merged: Enhance MOUNTPOINTS_TO_RESTORE into DIRECTORIES_TO_CREATE</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="1457_pr_merged_enhance_mountpoints_to_restore_into_directories_to_create"><a href="https://github.com/rear/rear/pull/1457">#1457 PR</a> <code>merged</code>: Enhance MOUNTPOINTS_TO_RESTORE into DIRECTORIES_TO_CREATE<a class="headerlink" href="#1457_pr_merged_enhance_mountpoints_to_restore_into_directories_to_create" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>cleanup</code>, <code>fixed / solved / done</code></p>
<h4 id="jsmeix_opened_issue_at_2017-08-25_1456"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> opened issue at <a href="https://github.com/rear/rear/pull/1457">2017-08-25 14:56</a>:<a class="headerlink" href="#jsmeix_opened_issue_at_2017-08-25_1456" title="Permanent link">&para;</a></h4>
<p>Now restore/default/900_create_missing_directories.sh<br />
recreates by default some generic directories in any case<br />
if they do not exist, namely:<br />
mnt proc run sys dev/pts dev/shm tmp var/tmp<br />
and<br />
MOUNTPOINTS_TO_RESTORE was renamed<br />
into DIRECTORIES_TO_CREATE<br />
but all should be fully backward compatible - in particular<br />
if exists MOUNTPOINTS_TO_RESTORE is still also used.</p>
<h4 id="jsmeix_commented_at_2017-08-25_1631"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1457#issuecomment-324971285">2017-08-25 16:31</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-08-25_1631" title="Permanent link">&para;</a></h4>
<p>@schlomo<br />
regarding your<br />
<a href="https://github.com/rear/rear/issues/1455#issuecomment-324953959">https://github.com/rear/rear/issues/1455#issuecomment-324953959</a><br />
"I am against storing multi-word strings in a Bash array<br />
(wrong tool for the job)"</p>
<p>I am puzzled.</p>
<p>For me a bash array is perfectly right to store<br />
several strings (a string can have several words or be empty).<br />
For me a bash array is exactly there to solve<br />
the problem how to store several strings.<br />
If I have to store only several words,<br />
a bash string would be sufficient.<br />
E.g.</p>
<pre>
things=( 'first thing' '' 'third thing' ' ' 'last thing' )
for thing in "${things[@]}" ; do
    test "$thing" && echo $thing || echo nothing
done
</pre>

<p>What is a better tool for such a job?</p>
<h4 id="schlomo_commented_at_2017-08-26_2000"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/pull/1457#issuecomment-325158681">2017-08-26 20:00</a>:<a class="headerlink" href="#schlomo_commented_at_2017-08-26_2000" title="Permanent link">&para;</a></h4>
<p>@jsmeix What we would want to have is a multi-dimensional dictionary
like</p>
<pre><code>directories = {
  "/tmp" = {
    "mode" = 1777,
    "owner" = "root",
    "group" = "root",
  }
}
</code></pre>
<p>But Bash of course doesn't have this. So we already have this file that
has this data in table form which I think is a better (= less ambiguous
and confusing) place than a bash array with multi word content. Reason
is that people don't expect such complex data structures in a Bash
array.</p>
<p>If you must use the Bash array to keep that kind of data than please
make it gracefully fall back to sane defaults for mode, owner and group
so that one can add just directories if the default mode of 755 and
root:root are OK.</p>
<h4 id="jsmeix_commented_at_2017-08-28_1019"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1457#issuecomment-325316820">2017-08-28 10:19</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-08-28_1019" title="Permanent link">&para;</a></h4>
<p>@schlomo<br />
I guess with "we already have this file that has this data in table
form"<br />
you mean the mountpoint_permissions file?</p>
<p>If yes I think there is a misunderstanding:<br />
I do not want to replace the mountpoint_permissions file<br />
with a bash array.<br />
I want to use a bash array in default.conf to specify<br />
the defaults and give the user a way to specify additional<br />
durectories as he needs to get (re)created.<br />
Therefore my question would be:<br />
What else than a bash array should/could I use<br />
in default.conf to specify such kind of defaults?</p>
<p>In general regarding a file that has data in table form:</p>
<p>Caution with that!</p>
<p>From my experience it does not "just solve"<br />
the words versus strings issue because<br />
the usual field separator for data in table form<br />
is tab or space i.e. essentially the same as $IFS.</p>
<p>Accordingly data in table form where fields can be strings<br />
also need special care and special handling - in particular<br />
because 'read' separates fields by $IFS by default.</p>
<p>E.g. simple 'read' does not work for strings:</p>
<pre>
# echo "'first value' '' 'third value' ' ' 'fifth value'" >/tmp/data_file

# read first second third fourth fifth junk &lt;/tmp/data_file

# echo "first=$first" ; echo "second=$second" ; echo "third=$third" ; echo "fourth=$fourth" ; echo "fifth=$fifth" ; echo "junk=$junk"
first='first
second=value'
third=''
fourth='third
fifth=value'
junk=' ' 'fifth value'
</pre>

<p>We already had severe issues in ReaR because disklayout.conf<br />
is such kind of file where read is used to input words.<br />
These issues had a related but somewhat different cause:<br />
The cause was that empty fields are not possible with simple 'read'.<br />
Some error in code that created disklayout.conf had missed<br />
to write a field and then the 'read' assigned wrong vaules<br />
to wrong variables (i.e. field mismatch because of an empty field)<br />
and as consequence subsequent code in ReaR run mad and<br />
failed at a totally unexpected place with a totally unexpected<br />
error message "More than 128 partitions is not supported".</p>
<h4 id="schlomo_commented_at_2017-08-28_1030"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/pull/1457#issuecomment-325318887">2017-08-28 10:30</a>:<a class="headerlink" href="#schlomo_commented_at_2017-08-28_1030" title="Permanent link">&para;</a></h4>
<p>Yes, I see your point. I guess that deep in my heart I think that this
is a fine example of software complexity exceeding the powers of Bash.
If we want to stay with Bash (we discussed this before and the bottom
line was that ReaR should be easily understandable and extensible by
admins who are supposedly most familiar with Bash) then I would ask: How
can we reduce the complexity of this topic?</p>
<p>So in the meantime, I'd be very happy if our configuration variables can
be used also in a simple mode. If you provide only the path then mode
and owner/group should be "sane" defaults.</p>
<h4 id="jsmeix_commented_at_2017-08-28_1052"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1457#issuecomment-325322538">2017-08-28 10:52</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-08-28_1052" title="Permanent link">&para;</a></h4>
<p>Let me code something and then I think I can show<br />
how bash arrays (regardless of their limitations)<br />
are good enough for us to sufficiently fulfill<br />
both simplicity for the default case and<br />
if needed also support additional complexity.</p>
<p>Personally I think when there is real complexity<br />
nothing can make that go away or even less complex<br />
in particular no tool or "better programming language"<br />
can reduce real complexity.</p>
<p>I even think that "powerful" programming languages could<br />
make programmers too easily introduce needless complexity<br />
by needless complex code (like pointers to pointers to pointers<br />
to pointers ... or classes of classes of classes of classes ...)<br />
which is in the end again my favourite ultimate root cause<br />
of 90% of software problems:<br />
"It is always possible to add another level of indirection."<br />
(RFC 1925 item 6a), see also<br />
<a href="https://github.com/rear/rear/pull/1449#issuecomment-324874100">https://github.com/rear/rear/pull/1449#issuecomment-324874100</a></p>
<h4 id="jsmeix_commented_at_2017-08-28_1147"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1457#issuecomment-325331804">2017-08-28 11:47</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-08-28_1147" title="Permanent link">&para;</a></h4>
<p>I will merge this on soon because it is a small step forward<br />
which can be merged right now regardless that it is not yet<br />
the final solution.</p>
<p>Then I will make a separated new pull request with a<br />
"grand cleanup and enhancement"<br />
of the whole "directories to be (re)-created" functionality.</p>
<h4 id="jsmeix_commented_at_2017-08-29_1413"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1457#issuecomment-325677155">2017-08-29 14:13</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-08-29_1413" title="Permanent link">&para;</a></h4>
<p>With
<a href="https://github.com/rear/rear/pull/1459">https://github.com/rear/rear/pull/1459</a>
merged<br />
the whole "directories to be (re)-created" functionality<br />
got overhauled and enhanced.</p>
<p>Of course if new issues appear now, I will fix them.</p>
<h4 id="olivero2_commented_at_2017-09-05_2043"><img src="https://avatars.githubusercontent.com/u/4660803?v=4" width="50"><a href="https://github.com/OliverO2">OliverO2</a> commented at <a href="https://github.com/rear/rear/pull/1457#issuecomment-327297502">2017-09-05 20:43</a>:<a class="headerlink" href="#olivero2_commented_at_2017-09-05_2043" title="Permanent link">&para;</a></h4>
<p>@jsmeix Have just tried that code
(b213ae4ef488c60dc6bd435f93b6c04854b573a2). Some observations:</p>
<ul>
<li>Running <code>900_create_missing_directories.sh</code> without having a backup
    configured (<code>BACKUP=REQUESTRESTORE</code>) brings up lots of errors
    "Failed to chown ..." as <code>/bin/bash</code> is missing on the target file
    system.</li>
<li>Running IntelliJ IDEA's inspections on
    <code>900_create_missing_directories.sh</code> shows several warnings, which
    make sense to me:<ul>
<li><em>'local' must be used in a function</em> (appears 4 times)</li>
<li><em>variables are used without any quotes</em> (appears 22 times, first
    example is <code>$directory_permissions_owner_group</code> which is quoted
    in line 18, but not in line 22)</li>
</ul>
</li>
</ul>
<h4 id="jsmeix_commented_at_2017-09-06_1020"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1457#issuecomment-327441371">2017-09-06 10:20</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-09-06_1020" title="Permanent link">&para;</a></h4>
<p>@OliverO2<br />
what is your use-case to run "rear recover"<br />
without restoring at least a minimal system<br />
(i.e. even without /bin/bash on the target file system)?</p>
<p>Regarding IntelliJ IDEA's inspections:</p>
<p>The "'local' must be used in a function" is right<br />
but it is plain wrong that something is wrong here<br />
because the scripts are sourced by the<br />
Source() function in lib/framework-functions.sh<br />
so those 'local' variables are used in a function<br />
(there are tons of 'local' variables in other ReaR scripts).</p>
<p>Regarding variables that are used without any quotes:<br />
Please be helpful and do not let me search and guess<br />
what that "22 times" might be.<br />
At least the directory_permissions_owner_group looks<br />
perfectly o.k. to me in particular because I have an<br />
explanatory comment there why I don't use quotes<br />
so IntelliJ IDEA might need to understand my comments<br />
before it reports false stuff ;-)</p>
<p>Finally I have no idea what<br />
<a href="https://github.com/rear/rear/commit/b213ae4ef488c60dc6bd435f93b6c04854b573a2">https://github.com/rear/rear/commit/b213ae4ef488c60dc6bd435f93b6c04854b573a2</a><br />
has to do with<br />
restore/default/900_create_missing_directories.sh</p>
<h4 id="olivero2_commented_at_2017-09-06_1132"><img src="https://avatars.githubusercontent.com/u/4660803?v=4" width="50"><a href="https://github.com/OliverO2">OliverO2</a> commented at <a href="https://github.com/rear/rear/pull/1457#issuecomment-327455922">2017-09-06 11:32</a>:<a class="headerlink" href="#olivero2_commented_at_2017-09-06_1132" title="Permanent link">&para;</a></h4>
<p>@jsmeix<br />
My use case was initial testing before setting up a full restore. More
specifically, I was just verifying that partitions are set up as
intended. So I chose the option <code>BACKUP=REQUESTRESTORE</code> in line with
this comment in <code>default.conf</code>:</p>
<pre><code>##
# BACKUP=REQUESTRESTORE stuff
##
# This mode stops the restore after formatting and mounting the filesystems and expects
# the backup data to appear by miracle (e.g. you doing something).
# I use this mode with DMZ servers that are saved with RBME (RSYNC BACKUP MADE EASY) and
# the magical restore is just me pushing the files back via rsync/ssh. That is the reason why
# Relax-and-Recover includes an SSH server for your convenience.
</code></pre>
<p>I would also use <code>REQUESTRESTORE</code> when restoring a system manually from
a historic backup which might not be available in the standard backup
repository. We use an internally developed backup/restore solution which
usually communicates with a central repository server, but can use
repositories on directly attached media, too. So the idea is to
incorporate the standard (automatic) way of restoring into one rear
image, and a non-standard manual restore option into a second rear
image.</p>
<p>Thanks for explaining the use of <code>local</code>, I wasn't aware of the
interdependencies. And blame me (not IntelliJ) for not having read your
comment about the unquoted variable use. Regarding the other places,
IntelliJ unfortunately has no easy way of exporting the information, so
I'll try to paste this from IntelliJ-generated HTML. Hope that helps:</p>
<pre><code>Simple variable usage (at line 21)
Simple variable usage (at line 25)
Simple variable usage (at line 32)
Simple variable usage (at line 44)
Simple variable usage (at line 45)
Simple variable usage (at line 48)
Simple variable usage (at line 48)
Simple variable usage (at line 53)
Simple variable usage (at line 53)
Simple variable usage (at line 53)
Simple variable usage (at line 57)
Simple variable usage (at line 57)
Simple variable usage (at line 58)
Simple variable usage (at line 58)
Simple variable usage (at line 62)
Simple variable usage (at line 63)
Simple variable usage (at line 63)
Simple variable usage (at line 63)
Simple variable usage (at line 66)
Simple variable usage (at line 69)
Simple variable usage (at line 69)
Simple variable usage (at line 78)
</code></pre>
<p>b213ae4ef488c60dc6bd435f93b6c04854b573a2 was just referring to the
commit I was using.</p>
<h4 id="jsmeix_commented_at_2017-09-06_1400"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1457#issuecomment-327492288">2017-09-06 14:00</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-09-06_1400" title="Permanent link">&para;</a></h4>
<p>With BACKUP=REQUESTRESTORE I can perfectly<br />
reproduce what happens during "rear recover" (excerpt)</p>
<pre>
RESCUE e205:~ # rear -d -D recover
.
.
.
Disk layout created.
Please start the restore process on your backup host.

Make sure that you restore the data into /mnt/local (by default '/mnt/local')
instead of '/' because the hard disks of the recovered system are mounted there.

Please restore your backup in the provided shell and, when finished, type exit
in the shell to continue recovery.

Welcome to Relax-and-Recover.

rear> exit
Did you restore the backup to /mnt/local ? Are you ready to continue recovery ? y
exit
Recreating directories (with permissions) from /var/lib/rear/recovery/directories_permissions_owner_group
Failed to 'chown root:root sys' 
Failed to 'chown root:root proc' 
Failed to 'chown root:root dev' 
Failed to 'chown root:root dev/shm' 
Failed to 'chown root:root dev/pts' 
Failed to 'chown root:root run' 
Failed to 'chown root:root dev/mqueue' 
Failed to 'chown root:root dev/hugepages' 
Failed to 'chown root:root run/user/0' 
Failed to 'chown root:root bin' 
Failed to 'chown root:root boot' 
Failed to 'chown root:root etc' 
Failed to 'chown root:root etc/opt' 
Failed to 'chown root:root etc/X11' 
Failed to 'chown root:root home' 
Failed to 'chown root:root lib' 
Failed to 'chown root:root lib64' 
Failed to 'chown root:root mnt' 
Failed to 'chown root:root opt' 
Failed to 'chown root:root root' 
Failed to 'chown root:root sbin' 
Failed to 'chown root:root srv' 
Failed to 'chown root:root tmp' 
Failed to 'chown root:root usr' 
Failed to 'chown root:root usr/bin' 
Failed to 'chown root:root usr/include' 
Failed to 'chown root:root usr/lib' 
Failed to 'chown root:root usr/lib64' 
Failed to 'chown root:root usr/local' 
Failed to 'chown root:root usr/sbin' 
Failed to 'chown root:root usr/share' 
Failed to 'chown root:root usr/src' 
Failed to 'chown root:root usr/X11R6' 
Failed to 'chown root:root var' 
Failed to 'chown root:root var/cache' 
Failed to 'chown root:root var/lib' 
Failed to 'chown root:root var/log' 
Failed to 'chown root:root var/opt' 
Failed to 'chown root:root var/spool' 
Failed to 'chown root:root var/spool/mail' 
Failed to 'chown root:root var/tmp' 
Failed to 'chown lp:sys path/to/mytmpdir' 
Updating udev configuration (70-persistent-net.rules)
ERROR: Could not copy '/etc/udev/rules.d/70-persistent-net.rules' -> '/mnt/local//etc/udev/rules.d/70-persistent-net.rules'
Aborting due to an error, check /var/log/rear/rear-e205.log for details
Terminated
RESCUE e205:~ #
</pre>

<p>Things like that are expected on an empty target system.</p>
<p>The various "Simple variable usage" are all false alarm<br />
as far as I see because I used unquoted $variable when<br />
its value cannot contain a space because the entries in<br />
$VAR_DIR/recovery/directories_permissions_owner_group<br />
must consist of words for directory mode owner group,<br />
see also
<a href="https://github.com/rear/rear/issues/1372">https://github.com/rear/rear/issues/1372</a></p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2025 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2017-08-25.1457.pr.merged.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
