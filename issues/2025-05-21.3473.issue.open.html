<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#3473 Issue open: ReaR automatisms overwrite sacrosanct user specified values - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#3473 Issue open: ReaR automatisms overwrite sacrosanct user specified values";
        var mkdocs_page_input_path = "issues/2025-05-21.3473.issue.open.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_nas.html">Internal Backup with tar to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/rbme.html">External Backup using RBME</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/restic.html">External Backup using restic</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../development/squash-git-log-commments.html">How to squash git log comments into one line</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#3473 Issue open: ReaR automatisms overwrite sacrosanct user specified values</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="3473_issue_open_rear_automatisms_overwrite_sacrosanct_user_specified_values"><a href="https://github.com/rear/rear/issues/3473">#3473 Issue</a> <code>open</code>: ReaR automatisms overwrite sacrosanct user specified values<a class="headerlink" href="#3473_issue_open_rear_automatisms_overwrite_sacrosanct_user_specified_values" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>bug</code></p>
<h4 id="jsmeix_opened_issue_at_2025-05-21_1312"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> opened issue at <a href="https://github.com/rear/rear/issues/3473">2025-05-21 13:12</a>:<a class="headerlink" href="#jsmeix_opened_issue_at_2025-05-21_1312" title="Permanent link">&para;</a></h4>
<p>By accident I found at least one case where<br />
ReaR autmatisms overwrite sacrosanct user specified values:</p>
<p>See<br />
<a href="https://github.com/rear/rear/pull/3471#discussion_r2100254872">https://github.com/rear/rear/pull/3471#discussion_r2100254872</a></p>
<h2 id="fullquote_of_that_comment">Fullquote of that comment:<a class="headerlink" href="#fullquote_of_that_comment" title="Permanent link">&para;</a></h2>
<p>I found one case where disk mappings are applied<br />
to sacrosanct user config variable values:</p>
<p>It happens during "rear recover" for WRITE_PROTECTED_IDS<br />
by calling the apply_layout_mappings() function for the<br />
autogenerated ReaR config file 'rescue.conf' in<br />
layout/prepare/default/320_apply_mappings.sh<br />
via</p>
<pre><code>for file_to_migrate in "$LAYOUT_FILE" "$original_disk_space_usage_file" "$rescue_config_file" ; do
...
    ... apply_layout_mappings "$file_to_migrate" ...
</code></pre>
<p>where WRITE_PROTECTED_IDS from the original system<br />
had been written there during "rear mkrescue" in<br />
prep/default/490_store_write_protect_settings.sh<br />
via</p>
<pre><code>{
...
    echo "WRITE_PROTECTED_IDS=( ${WRITE_PROTECTED_IDS[*]} )"
...
} &gt;&gt; "$ROOTFS_DIR/etc/rear/rescue.conf"
</code></pre>
<p>The likely plain wrong thing in this case here is<br />
that in sbin/rear /etc/rear/local.conf is sourced<br />
before /etc/rear/rescue.conf</p>
<pre><code># User configuration files, last thing is to overwrite variables if we are in the rescue system:
for config in site local rescue ; do
...
    ... Source "$CONFIG_DIR/$config.conf" ...
</code></pre>
<p>so as the comment states sbin/rear intentionally overwrites<br />
sacrosanct user specified values in /etc/rear/local.conf<br />
by autogenerated ReaR values in /etc/rear/rescue.conf<br />
here in particular any user specified WRITE_PROTECTED_IDS<br />
in his /etc/rear/local.conf will get completey replaced<br />
by autogenerated ReaR's WRITE_PROTECTED_IDS=( ... )<br />
in /etc/rear/rescue.conf so the user would have to adapt<br />
/etc/rear/rescue.conf instead of /etc/rear/local.conf<br />
but this may not help him because later during "rear recover"<br />
his WRITE_PROTECTED_IDS in /etc/rear/rescue.conf may get<br />
again modified by the apply_layout_mappings() function<br />
in layout/prepare/default/320_apply_mappings.sh</p>
<p>WHAT A HORRIBLE PILE OF INCONSISTENT MESSY MESS!</p>
<hr />
<p>End of fullquote of that comment.</p>
<p>Addendum:</p>
<p>In particular /etc/rear/rescue.conf is not mentioned<br />
in "man rear" as a user config file because currently<br />
"man rear" reads:</p>
<pre><code>FILES
       ...

       /etc/rear/local.conf
           System specific configuration can be set here.

       /etc/rear/site.conf
           Site specific configuration can be set here
           (not created by default).
</code></pre>
<p>so only /etc/rear/local.conf and /etc/rear/site.conf<br />
are meant to be user config files.</p>
<h4 id="jsmeix_commented_at_2025-05-21_1323"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/3473#issuecomment-2897958402">2025-05-21 13:23</a>:<a class="headerlink" href="#jsmeix_commented_at_2025-05-21_1323" title="Permanent link">&para;</a></h4>
<p>My above<br />
"WHAT A HORRIBLE PILE OF INCONSISTENT MESSY MESS!"<br />
is not meant as a complaint or accusation.</p>
<p>It is meant as helpless cry how unsolvable things are in practice.</p>
<p>I do understand why for ReaR by default</p>
<pre><code>last thing is to overwrite variables if we are in the rescue system
</code></pre>
<p>as an attempt to automatically make things "just work"<br />
for the user when things are different in the rescue system<br />
compared to the original system.<br />
BUT<br />
At the same time this totally contradicts that<br />
ReaR should provide "final power to the user"<br />
which means it should work that the user adapts<br />
his config variable values in his /etc/rear/local.conf<br />
in his ReaR recovery system before he runs "rear recover"<br />
and then ReaR obeys what his user had told it to do, cf.<br />
<a href="https://github.com/rear/rear/pull/3471#discussion_r2100010738">https://github.com/rear/rear/pull/3471#discussion_r2100010738</a></p>
<p>So the dilemma is how to do both<br />
make things automatically "just work" for the user<br />
and still provide "final power to the user".</p>
<p>Currently I have no good idea how to solve that<br />
in practice with reasonable effort.<br />
Therefore I set the milestone to 'ReaR 999 (future)'<br />
"Those issues need more discussion, or are not tied into a specific
release."</p>
<h4 id="pcahyna_commented_at_2025-05-21_1345"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/3473#issuecomment-2898030954">2025-05-21 13:45</a>:<a class="headerlink" href="#pcahyna_commented_at_2025-05-21_1345" title="Permanent link">&para;</a></h4>
<p>quote of my reply:</p>
<p>@jsmeix I actually thought the opposite - I thought that mappings are
being applied to configuration values at more places, I am now surprised
that there is only one.<br />
I would actually argue for applying them more consistently to more
values. What is the value of being able to specify <code>DISKS_TO_BE_WIPED</code>,
for example, if you don't know what will the names will look like in the
rescue system? You tell ReaR during rescue image creation that it should
wipe <code>/dev/sda</code>, this gets embedded into the rescue image, but when the
image boots, the devices swap and ReaR now wipes what you thought was
<code>/dev/sdb</code> instead, as it has become <code>/dev/sda</code> now. Oops.</p>
<blockquote>
<p>because the user can adapt his config variable values in
/etc/rear/local.conf in the ReaR recovery system before he runs "rear
recover"</p>
</blockquote>
<p>is a valid argument for sure, but not very convincing to me. How often
do users want do do this? Usually they want to automate, which means to
configure stuff during (or before) rescue image creation, not during
recovery.<br />
More importantly, the mappings get applied to the layout file (that's
the main point of mappings) before starting the recovery process. What
if the user has edited the layout file in the rescue image before
running "rear recover"? The user's values will now get mapped as well,
yet we don't mind.</p>
<blockquote>
<p>during "rear recover"<br />
his WRITE_PROTECTED_IDS in /etc/rear/rescue.conf may get<br />
again modified by the apply_layout_mappings() function<br />
in layout/prepare/default/320_apply_mappings.sh</p>
</blockquote>
<p>And what if "rear recover" fails and the user reruns it? Will
<code>rescue.conf</code> get mapped AGAIN? :) So what was originally <code>/dev/sda</code>
will get first mapped to <code>/dev/sdb</code>, but in the second run will get
mapped again to <code>/dev/sda</code> if <code>/dev/sda</code> swaps with <code>/dev/sdb</code> ?</p>
<h4 id="jsmeix_commented_at_2025-05-21_1453"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/3473#issuecomment-2898257250">2025-05-21 14:53</a>:<a class="headerlink" href="#jsmeix_commented_at_2025-05-21_1453" title="Permanent link">&para;</a></h4>
<p>@pcahyna<br />
I did not test what happens in such cases.<br />
I only tested "usual known cases".<br />
I fear anything may happen when "rear recover" is rerun.</p>
<p>In particular because the apply_layout_mappings() function<br />
is "just run" on the original file (via 'sed -i')<br />
and no backup of the original file is made<br />
so after the apply_layout_mappings() function was run<br />
one cannot tell by looking at e.g. /etc/rear/local.conf<br />
if it is still the original one or a changed one<br />
because there is only one /etc/rear/local.conf</p>
<p>According to my personal experience in practice<br />
it often fails in weird ways when "rear recover" is rerun<br />
depending on how things are after "rear recover" failed.<br />
So in practice when "rear recover" failed<br />
it is usually more simple and straightforward<br />
to find out why "rear recover" failed,<br />
then reboot the ReaR recovery system anew<br />
and adapt things as needed in the rebooted ReaR recovery system<br />
before starting "rear recover".<br />
What can help in sufficiently simple cases<br />
to successfully run "rear recover" again<br />
in the same ReaR recovery system is<br />
to umount all on /mnt/local and<br />
to sufficiently wipe the target system disks<br />
but in complicated cases this is not enough.</p>
<h4 id="jsmeix_commented_at_2025-05-22_0630"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/3473#issuecomment-2900069322">2025-05-22 06:30</a>:<a class="headerlink" href="#jsmeix_commented_at_2025-05-22_0630" title="Permanent link">&para;</a></h4>
<p>Currently I think the only generic way out is<br />
to set all user config variables 'readonly'<br />
in /sbin/rear after the user config files were sourced<br />
to ensure that ReaR cannot change what his user specified<br />
and from the user config variable values ReaR must set<br />
its own ReaR-internal variables which ReaR can change as needed.</p>
<p>I.e. user config variables are owned by the user<br />
and user property must be sacrosanct for ReaR.</p>
<p>When ReaR uses its own ReaR-internal variables<br />
it only helps to be able to know at any time<br />
while ReaR is running what the user had specified<br />
but it cannot help against that ReaR may behave<br />
different (via its own ReaR-internal variables)<br />
than what his user had specified.</p>
<h4 id="jsmeix_commented_at_2025-05-22_0718"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/3473#issuecomment-2900173272">2025-05-22 07:18</a>:<a class="headerlink" href="#jsmeix_commented_at_2025-05-22_0718" title="Permanent link">&para;</a></h4>
<p>FYI how often we modify user config variables in ReaR:</p>
<pre><code># USER_OWNED_VARIABLES=( $( grep -v '^[[:space:]]*#' usr/share/rear/conf/default.conf | grep -o '[A-Z][[:alnum:]_]*=' | cut -d '=' -f1 | sort -u ) )

# for v in "${USER_OWNED_VARIABLES[@]}" ; \
  do echo -n "$v " ; \
    find usr/sbin/rear usr/share/rear/ -type f \
    | xargs egrep -w "$v=|$v+=" \
    | egrep -v ': *#|usr/share/rear/conf/' \
    | wc -l ; \
  done | grep -v ' 0$' | sort -n -k2 -r

BACKUP_URL 15
UEFI_BOOTLOADER 11
MIGRATION_MODE 11
OUTPUT_URL 10
KERNEL_FILE 8
BACKUP 8
OUTPUT 7
LD_LIBRARY_PATH_FOR_BACKUP_TOOL 7
YUM_BACKUP_FILES 6
USB_DEVICE 6
OS_VERSION 6
USE_SERIAL_CONSOLE 5
NSRSERVER 5
FIRMWARE_FILES 5
YUM_BACKUP_SELINUX_CONTEXTS 4
USE_DHCLIENT 4
TMPDIR 4
KERNEL_VERSION 4
BACKUP_PROG_COMPRESS_SUFFIX 4
USB_UEFI_PART_SIZE 3
USB_PARTITION_ALIGN_BLOCK_SIZE 3
USB_DEVICE_PARTED_LABEL 3
USB_DEVICE_FILESYSTEM_LABEL 3
USB_DEVICE_BOOT_LABEL 3
TRUSTED_PATHS 3
REQUIRED_PROGS 3
PROGS 3
GRUB2_SEARCH_ROOT_COMMAND 3
BAREOS_CLIENT 3
BACKUP_PROG 3
BACKUP_OPTIONS 3
SSH_FILES 2
RBME_BACKUP 2
PXE_TFTP_IP 2
PPDM_RESTORE_PIT 2
OUTPUT_UMOUNTCMD 2
OUTPUT_OPTIONS 2
OUTPUT_MOUNTCMD 2
OS_VENDOR 2
OPAL_PBA_UNLOCK_MODE 2
NSR_RETENTION_TIME 2
NETFS_RESTORE_CAPABILITIES 2
NBKDC_DIR 2
MODULES 2
KERNEL_CMDLINE 2
KEEP_BUILD_DIR 2
ISO_ISOLINUX_BIN 2
GRUB2_SET_ROOT_COMMAND 2
GALAXY7_BACKUPSET 2
GALAXY11_PIT_RECOVERY 2
GALAXY11_BACKUPSET 2
GALAXY10_BACKUPSET 2
EXCLUDE_RUNTIME_LOGFILE 2
DUPLY_PROFILE 2
DISKS_TO_BE_WIPED 2
BORGBACKUP_RESTORE_ARCHIVES_SHOW_MAX 2
BAREOS_RESTORE_JOB 2
BAREOS_FILESET 2
BACULA_CONF_DIR 2
BACULA_BIN_DIR 2
BACKUP_RSYNC_OPTIONS 2
BACKUP_PROG_SUFFIX 2
BACKUP_PROG_CRYPT_KEY 2
BACKUP_PROG_COMPRESS_OPTIONS 2
WRITE_PROTECTED_IDS 1
WRITE_PROTECTED_FS_LABEL_PATTERNS 1
WAIT_SECS 1
VEEAM_BACKUPID 1
USING_UEFI_BOOTLOADER 1
USE_RESOLV_CONF 1
USE_RAMDISK 1
USB_DEVICE_FILESYSTEM_PERCENTAGE 1
USB_DEVICE_FILESYSTEM 1
USB_BOOT_PART_SIZE 1
USB_BOOTLOADER 1
TSM_RESULT_FILE_PATH 1
TSM_LD_LIBRARY_PATH 1
TRUSTED_OWNERS 1
SSH_UNPROTECTED_PRIVATE_KEYS 1
SSH_ROOT_PASSWORD 1
SECURE_BOOT_BOOTLOADER 1
RSYNC_PROTOCOL_VERSION 1
RESULT_MAILSUBJECT 1
RESULT_FILES 1
REBUILD_INITRAMFS 1
REAR_INITRD_COMPRESSION 1
RAWDISK_INSTALL_GPT_PARTITION_NAME 1
RAWDISK_IMAGE_NAME 1
RAWDISK_IMAGE_COMPRESSION_COMMAND 1
RAWDISK_GPT_PARTITION_NAME 1
RAWDISK_FAT_VOLUME_LABEL 1
PXE_TFTP_UPLOAD_URL 1
PXE_HTTP_DOWNLOAD_URL 1
PPDM_ASSETS_AND_SSIDS 1
OPAL_PBA_TKNPATH 1
OPAL_PBA_TKNOFFSET 1
OPAL_PBA_TKNKEY 1
OPAL_PBA_TKNDBG 1
OPAL_PBA_TKNBIND 1
OPAL_PBA_TKN2FAMAXTRIES 1
OPAL_PBA_TKN2FAFAILWIPE 1
OPAL_PBA_SBWARN 1
OPAL_PBA_NOSUCCESSMSG 1
OPAL_PBA_DEBUG_PASSWORD 1
OPAL_PBA_DEBUG_DEVICE_COUNT 1
NETFS_PREFIX 1
NETFS_KEEP_OLD_BACKUP_COPY 1
ISO_FILE_SIZE_LIMIT 1
ISO_DEFAULT 1
HOSTNAME 1
GALAXY_PORT 1
GALAXY_LOGONID 1
GALAXY_INSTANCE 1
GALAXY_COMMCELL 1
GALAXY_BACKUPSET 1
GALAXY11_TEMP_DIRECTORY 1
GALAXY11_LOG_DIRECTORY 1
GALAXY11_JOBS_RESULTS_DIRECTORY 1
GALAXY11_HOME_DIRECTORY 1
GALAXY11_CORE_DIRECTORY 1
FULLBACKUP_OUTDATED_DAYS 1
FORMAT_DASDS 1
ELILO_BIN 1
EFI_STUB_EFIBOOTMGR_ARGS 1
EFI_STUB 1
COPY_AS_IS 1
CLONE_ALL_USERS_GROUPS 1
BORGBACKUP_PRUNE_SHOW_STATS 1
BORGBACKUP_PRUNE_SHOW_RC 1
BORGBACKUP_PRUNE_SHOW_PROGRESS 1
BORGBACKUP_PRUNE_SHOW_LIST 1
BORGBACKUP_EXTRACT_SHOW_RC 1
BORGBACKUP_EXTRACT_SHOW_PROGRESS 1
BORGBACKUP_EXTRACT_SHOW_LIST 1
BORGBACKUP_CREATE_SHOW_STATS 1
BORGBACKUP_CREATE_SHOW_RC 1
BORGBACKUP_CREATE_SHOW_PROGRESS 1
BORGBACKUP_CREATE_SHOW_LIST 1
BOOTLOADER 1
BLOCKCLONE_STRICT_PARTITIONING 1
BEXTRACT_VOLUME 1
BACKUP_UMOUNTCMD 1
BACKUP_PROG_OPTIONS 1
BACKUP_MOUNTCMD 1
</code></pre>
<p>There are very many false positives like<br />
<code>BLOCKCLONE_STRICT_PARTITIONING=</code> in a message text<br />
usr/share/rear/layout/prepare/GNU/Linux/100_include_partition_code.sh:</p>
<pre><code>        echo "# If you want avoid this, set BLOCKCLONE_STRICT_PARTITIONING=\"no\""
</code></pre>
<p>or<br />
<code>CLONE_ALL_USERS_GROUPS=</code> in a trailing comment<br />
usr/share/rear/prep/BACULA/default/400_prep_bacula.sh:</p>
<pre><code>CLONE_GROUPS+=( bacula ) # default CLONE_ALL_USERS_GROUPS="true" in default.conf, but just in case...
</code></pre>
<p>or<br />
<code>MIGRATION_MODE='true'</code><br />
at several places in
usr/share/rear/layout/prepare/default/250_compare_disks.sh<br />
to let ReaR set it when the user has not specified it.</p>
<p>I think there are only a few exceptional cases<br />
where ReaR overwrites what his user specified<br />
because otherwise we should have got user reports<br />
when ReaR does not behave as specified so I think<br />
in practice things work reasonably well.</p>
<p>Currently I don't have a good idea how to find<br />
those exceptional cases where ReaR overwrites<br />
what his user has specified.</p>
<h4 id="jsmeix_commented_at_2025-05-26_1543"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/3473#issuecomment-2910138642">2025-05-26 15:43</a>:<a class="headerlink" href="#jsmeix_commented_at_2025-05-26_1543" title="Permanent link">&para;</a></h4>
<p><a href="https://github.com/rear/rear/issues/2181">https://github.com/rear/rear/issues/2181</a><br />
is a somewhat related issue where apply_layout_mappings()<br />
was not called for some files that need to get migrated<br />
but it seems those few cases were only the tip of the iceberg</p>
<h4 id="jsmeix_commented_at_2025-06-03_0731"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/3473#issuecomment-2933893835">2025-06-03 07:31</a>:<a class="headerlink" href="#jsmeix_commented_at_2025-06-03_0731" title="Permanent link">&para;</a></h4>
<p>Regarding<br />
<a href="https://github.com/rear/rear/issues/3473#issuecomment-2898030954">https://github.com/rear/rear/issues/3473#issuecomment-2898030954</a></p>
<pre><code>mappings are being applied to configuration values at more places
</code></pre>
<p>I created the new separated issue<br />
<a href="https://github.com/rear/rear/issues/3477">https://github.com/rear/rear/issues/3477</a></p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2025 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2025-05-21.3473.issue.open.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
