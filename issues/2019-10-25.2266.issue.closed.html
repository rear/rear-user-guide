<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#2266 Issue closed: In CentOS 7.7 and 8.0 certain programs (e.g. dhclient) require additional libraries - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#2266 Issue closed: In CentOS 7.7 and 8.0 certain programs (e.g. dhclient) require additional libraries";
        var mkdocs_page_input_path = "issues/2019-10-25.2266.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#2266 Issue closed: In CentOS 7.7 and 8.0 certain programs (e.g. dhclient) require additional libraries</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="2266_issue_closed_in_centos_77_and_80_certain_programs_eg_dhclient_require_additional_libraries"><a href="https://github.com/rear/rear/issues/2266">#2266 Issue</a> <code>closed</code>: In CentOS 7.7 and 8.0 certain programs (e.g. dhclient) require additional libraries<a class="headerlink" href="#2266_issue_closed_in_centos_77_and_80_certain_programs_eg_dhclient_require_additional_libraries" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>documentation</code>, <code>fixed / solved / done</code></p>
<h4 id="damanin_opened_issue_at_2019-10-25_1631"><img src="https://avatars.githubusercontent.com/u/37876601?u=832a55ad26fa192d411932dcf7a9f13187d79380&v=4" width="50"><a href="https://github.com/DamaniN">DamaniN</a> opened issue at <a href="https://github.com/rear/rear/issues/2266">2019-10-25 16:31</a>:<a class="headerlink" href="#damanin_opened_issue_at_2019-10-25_1631" title="Permanent link">&para;</a></h4>
<h4 id="relax-and-recover_rear_issue_template">Relax-and-Recover (ReaR) Issue Template<a class="headerlink" href="#relax-and-recover_rear_issue_template" title="Permanent link">&para;</a></h4>
<p>Fill in the following items before submitting a new issue<br />
(quick response is not guaranteed with free support):</p>
<ul>
<li>ReaR version ("/usr/sbin/rear -V"):</li>
</ul>
<p>Relax-and-Recover 2.5 / Git</p>
<ul>
<li>OS version ("cat /etc/rear/os.conf" or "lsb_release -a" or "cat
    /etc/os-release"):</li>
</ul>
<p>CentOS Linux release 7.7.1908 (Core)</p>
<ul>
<li>ReaR configuration files ("cat /etc/rear/site.conf" and/or "cat
    /etc/rear/local.conf"):</li>
</ul>
<p>OUTPUT=ISO<br />
BACKUP=CDM</p>
<ul>
<li>Hardware (PC or PowerNV BareMetal or ARM) or virtual machine (KVM
    guest or PoverVM LPAR):</li>
</ul>
<p>vSphere Virtual Machine</p>
<ul>
<li>System architecture (x86 compatible or PPC64/PPC64LE or what exact
    ARM device):</li>
</ul>
<p>x86 compatible</p>
<ul>
<li>Firmware (BIOS or UEFI or Open Firmware) and bootloader (GRUB or
    ELILO or Petitboot):</li>
</ul>
<p>UEFI and Grub</p>
<ul>
<li>Storage (local disk or SSD) and/or SAN (FC or iSCSI or FCoE) and/or
    multipath (DM or NVMe):</li>
</ul>
<p>vSphere virtual disks.</p>
<ul>
<li>Description of the issue (ideally so that others can reproduce it):</li>
</ul>
<p>When <code>rear mkrescue</code> is run on a CentOS 7.7 system as a pre-script in
Rubrik CDM it exits with a return code of 15. The logs indicate that the
<code>libisc-export.so.169</code> and <code>libdns-export.so.1102</code> libraries needed for
<code>/bin/dhclient</code> are not found. I looked for <code>/bin/dhclient</code> on this
system but found that it does not exist. Instead, there is a
<code>/sbin/dhclinet</code>. Further analysis of the logs shows that Rear copies
<code>/sbin/dhclient</code> to <code>/tmp/rear.vOpjUNKmz87uhqQ/rootfs/bin/dhclient</code>. I
assume this is where <code>dhclient</code> is being tested for libraries with
<code>ldd</code>.</p>
<p>When I tested <code>/sbin/dhclient</code> using <code>ldd</code> the <code>libisc-export.so.169</code>
and <code>libdns-export.so.1102</code> libraries were found. They are, however,
listed as being in <code>/usr/lib64//bind9-export/</code> which is different than
<code>/lib64</code> where the other libraries are. I also noticed that the path has
<code>//</code> in it. This may be causing ReaR some issues. I then copied
<code>/sbin/dhclient</code> to <code>/tmp/bin/dhclient</code> and tested it there. <code>ldd</code> still
found the same thing.</p>
<p>I tried adding <code>/usr/lib64//bind9-export/</code> to <code>COPY_AS_IS</code> and
<code>COPY_AS_IS_CDM</code> but this still resulted in the same error. If I run
<code>rear mkrescue</code> from the OS command line it completes successfully. It
seems that there's some issue with the environment that CDM's pre-script
runs in but I'm not sure what that may be or how to proceed. I did see
the notes in #1562 about setting the <code>LD_LIBRARY_PATH</code>, however,
<code>dhclient</code> is not a CDM binary but an OS one.</p>
<ul>
<li>Workaround, if any:</li>
</ul>
<p>None</p>
<ul>
<li>Attachments, as applicable ("rear -D mkrescue/mkbackup/recover"
    debug log files):</li>
</ul>
<p>Error in CDM:</p>
<pre><code>Failed executing pre-backup script for Fileset 'dn-allthethings-with-rear(dn-rear-centos-77)'. Script finished with error code '15'
</code></pre>
<p>Error in ReaR log:</p>
<pre><code>2019-10-25 05:40:48.452331193 Testing 'ldd /bin/bash' to ensure 'ldd' works for the subsequent 'ldd' tests within the recovery system
        linux-vdso.so.1 =&gt;  (0x00007ffecf323000)
        libtinfo.so.5 =&gt; /lib64/libtinfo.so.5 (0x00007f9dd2c81000)
        libdl.so.2 =&gt; /lib64/libdl.so.2 (0x00007f9dd2a7d000)
        libc.so.6 =&gt; /lib64/libc.so.6 (0x00007f9dd26af000)
        /lib64/ld-linux-x86-64.so.2 (0x00007f9dd2eab000)
2019-10-25 05:40:48.464352730 Testing each binary (except links) with ldd and look for 'not found' libraries within the recovery system
2019-10-25 05:41:09.717055114 There are binaries or libraries in the ReaR recovery system that need additional libraries
2019-10-25 05:41:09.721113715 /bin/dhclient requires additional libraries (fatal error)
2019-10-25 05:41:09.731578550   linux-vdso.so.1 =&gt;  (0x00007ffd98ddd000)
        libomapi.so.0 =&gt; /lib64/libomapi.so.0 (0x00007fd3e8ab6000)
        libcap-ng.so.0 =&gt; /lib64/libcap-ng.so.0 (0x00007fd3e88b0000)
        libdns-export.so.1102 =&gt; not found
        libgssapi_krb5.so.2 =&gt; /lib64/libgssapi_krb5.so.2 (0x00007fd3e8663000)
        libkrb5.so.3 =&gt; /lib64/libkrb5.so.3 (0x00007fd3e837a000)
        libk5crypto.so.3 =&gt; /lib64/libk5crypto.so.3 (0x00007fd3e8147000)
        libcom_err.so.2 =&gt; /lib64/libcom_err.so.2 (0x00007fd3e7f43000)
        libisc-export.so.169 =&gt; not found
        libcrypto.so.10 =&gt; /lib64/libcrypto.so.10 (0x00007fd3e7ae0000)
        libcap.so.2 =&gt; /lib64/libcap.so.2 (0x00007fd3e78db000)
        libsystemd-daemon.so.0 =&gt; /lib64/libsystemd-daemon.so.0 (0x00007fd3e76d4000)
        liblber-2.4.so.2 =&gt; /lib64/liblber-2.4.so.2 (0x00007fd3e74c5000)
        libldap-2.4.so.2 =&gt; /lib64/libldap-2.4.so.2 (0x00007fd3e7270000)
        libc.so.6 =&gt; /lib64/libc.so.6 (0x00007fd3e6ea2000)
        /lib64/ld-linux-x86-64.so.2 (0x00007fd3e8f44000)
        libkrb5support.so.0 =&gt; /lib64/libkrb5support.so.0 (0x00007fd3e6c92000)
        libdl.so.2 =&gt; /lib64/libdl.so.2 (0x00007fd3e6a8e000)
        libkeyutils.so.1 =&gt; /lib64/libkeyutils.so.1 (0x00007fd3e688a000)
        libresolv.so.2 =&gt; /lib64/libresolv.so.2 (0x00007fd3e6671000)
        libpthread.so.0 =&gt; /lib64/libpthread.so.0 (0x00007fd3e6455000)
        libz.so.1 =&gt; /lib64/libz.so.1 (0x00007fd3e623f000)
        libattr.so.1 =&gt; /lib64/libattr.so.1 (0x00007fd3e603a000)
        librt.so.1 =&gt; /lib64/librt.so.1 (0x00007fd3e5e32000)
        libm.so.6 =&gt; /lib64/libm.so.6 (0x00007fd3e5b30000)
        libdw.so.1 =&gt; /lib64/libdw.so.1 (0x00007fd3e58df000)
        libgcc_s.so.1 =&gt; /lib64/libgcc_s.so.1 (0x00007fd3e56c9000)
        libsasl2.so.3 =&gt; /lib64/libsasl2.so.3 (0x00007fd3e54ac000)
        libssl.so.10 =&gt; /lib64/libssl.so.10 (0x00007fd3e523a000)
        libssl3.so =&gt; /lib64/libssl3.so (0x00007fd3e4fe1000)
        libsmime3.so =&gt; /lib64/libsmime3.so (0x00007fd3e4db9000)
        libnss3.so =&gt; /lib64/libnss3.so (0x00007fd3e4a8a000)
        libnssutil3.so =&gt; /lib64/libnssutil3.so (0x00007fd3e485a000)
        libplds4.so =&gt; /lib64/libplds4.so (0x00007fd3e4656000)
        libplc4.so =&gt; /lib64/libplc4.so (0x00007fd3e4451000)
        libnspr4.so =&gt; /lib64/libnspr4.so (0x00007fd3e4213000)
        libselinux.so.1 =&gt; /lib64/libselinux.so.1 (0x00007fd3e3fec000)
        libelf.so.1 =&gt; /lib64/libelf.so.1 (0x00007fd3e3dd4000)
        liblzma.so.5 =&gt; /lib64/liblzma.so.5 (0x00007fd3e3bae000)
        libbz2.so.1 =&gt; /lib64/libbz2.so.1 (0x00007fd3e399e000)
        libcrypt.so.1 =&gt; /lib64/libcrypt.so.1 (0x00007fd3e3767000)
        libpcre.so.1 =&gt; /lib64/libpcre.so.1 (0x00007fd3e3505000)
        libfreebl3.so =&gt; /lib64/libfreebl3.so (0x00007fd3e3302000)
2019-10-25 05:41:09.736426108 ReaR recovery system in '/tmp/rear.vOpjUNKmz87uhqQ/rootfs' needs additional libraries, check /var/log/rear/rear-dn-rear-centos-77.log for details
2019-10-25 05:41:09.738604320 Build area /tmp/rear.vOpjUNKmz87uhqQ will be removed
.
.
.
2019-10-25 05:41:10.813700090 ERROR: ReaR recovery system in '/tmp/rear.vOpjUNKmz87uhqQ/rootfs' not usable (required libraries are missing)
===== Stack trace =====
Trace 0: /usr/sbin/rear:541 main
Trace 1: /usr/share/rear/lib/mkrescue-workflow.sh:18 WORKFLOW_mkrescue
Trace 2: /usr/share/rear/lib/framework-functions.sh:116 SourceStage
Trace 3: /usr/share/rear/lib/framework-functions.sh:56 Source
Trace 4: /usr/share/rear/build/default/990_verify_rootfs.sh:214 source
=== End stack trace ===
2019-10-25 05:41:10.824754683 Exiting rear mkrescue (PID 23414) and its descendant processes ...
/usr/share/rear/lib/_input-output-functions.sh: line 122: pstree: command not found
2019-10-25 05:41:13.855986910   PID COMMAND
  PID COMMAND
21556 /bin/bash /usr/sbin/rear -v mkrescue
/usr/share/rear/lib/_input-output-functions.sh: line 151: kill: (21562) - No such process
2019-10-25 05:41:13.878009219 Running exit tasks
2019-10-25 05:41:13.880200300 Finished in 53 seconds
2019-10-25 05:41:13.882141581 Removing build area /tmp/rear.vOpjUNKmz87uhqQ
removed directory: '/tmp/rear.vOpjUNKmz87uhqQ'
2019-10-25 05:41:14.367021766 End of program reached
</code></pre>
<p>The output of <code>ldd /sbin/dhclient</code> from the OS prompt:</p>
<pre><code>ldd /sbin/dhclient
    linux-vdso.so.1 =&gt;  (0x00007ffc60345000)
    libomapi.so.0 =&gt; /lib64/libomapi.so.0 (0x00007f79a07bb000)
    libcap-ng.so.0 =&gt; /lib64/libcap-ng.so.0 (0x00007f79a05b5000)
    libdns-export.so.1102 =&gt; /usr/lib64//bind9-export/libdns-export.so.1102 (0x00007f79a0187000)
    libgssapi_krb5.so.2 =&gt; /lib64/libgssapi_krb5.so.2 (0x00007f799ff3a000)
    libkrb5.so.3 =&gt; /lib64/libkrb5.so.3 (0x00007f799fc51000)
    libk5crypto.so.3 =&gt; /lib64/libk5crypto.so.3 (0x00007f799fa1e000)
    libcom_err.so.2 =&gt; /lib64/libcom_err.so.2 (0x00007f799f81a000)
    libisc-export.so.169 =&gt; /usr/lib64//bind9-export/libisc-export.so.169 (0x00007f799f5af000)
    libcrypto.so.10 =&gt; /lib64/libcrypto.so.10 (0x00007f799f14c000)
    libcap.so.2 =&gt; /lib64/libcap.so.2 (0x00007f799ef47000)
    libsystemd-daemon.so.0 =&gt; /lib64/libsystemd-daemon.so.0 (0x00007f799ed40000)
    liblber-2.4.so.2 =&gt; /lib64/liblber-2.4.so.2 (0x00007f799eb31000)
    libldap-2.4.so.2 =&gt; /lib64/libldap-2.4.so.2 (0x00007f799e8dc000)
    libc.so.6 =&gt; /lib64/libc.so.6 (0x00007f799e50e000)
    /lib64/ld-linux-x86-64.so.2 (0x00007f79a0c49000)
    libkrb5support.so.0 =&gt; /lib64/libkrb5support.so.0 (0x00007f799e2fe000)
    libdl.so.2 =&gt; /lib64/libdl.so.2 (0x00007f799e0fa000)
    libkeyutils.so.1 =&gt; /lib64/libkeyutils.so.1 (0x00007f799def6000)
    libresolv.so.2 =&gt; /lib64/libresolv.so.2 (0x00007f799dcdd000)
    libpthread.so.0 =&gt; /lib64/libpthread.so.0 (0x00007f799dac1000)
    libz.so.1 =&gt; /lib64/libz.so.1 (0x00007f799d8ab000)
    libattr.so.1 =&gt; /lib64/libattr.so.1 (0x00007f799d6a6000)
    librt.so.1 =&gt; /lib64/librt.so.1 (0x00007f799d49e000)
    libm.so.6 =&gt; /lib64/libm.so.6 (0x00007f799d19c000)
    libdw.so.1 =&gt; /lib64/libdw.so.1 (0x00007f799cf4b000)
    libgcc_s.so.1 =&gt; /lib64/libgcc_s.so.1 (0x00007f799cd35000)
    libsasl2.so.3 =&gt; /lib64/libsasl2.so.3 (0x00007f799cb18000)
    libssl.so.10 =&gt; /lib64/libssl.so.10 (0x00007f799c8a6000)
    libssl3.so =&gt; /lib64/libssl3.so (0x00007f799c64d000)
    libsmime3.so =&gt; /lib64/libsmime3.so (0x00007f799c425000)
    libnss3.so =&gt; /lib64/libnss3.so (0x00007f799c0f6000)
    libnssutil3.so =&gt; /lib64/libnssutil3.so (0x00007f799bec6000)
    libplds4.so =&gt; /lib64/libplds4.so (0x00007f799bcc2000)
    libplc4.so =&gt; /lib64/libplc4.so (0x00007f799babd000)
    libnspr4.so =&gt; /lib64/libnspr4.so (0x00007f799b87f000)
    libselinux.so.1 =&gt; /lib64/libselinux.so.1 (0x00007f799b658000)
    libelf.so.1 =&gt; /lib64/libelf.so.1 (0x00007f799b440000)
    liblzma.so.5 =&gt; /lib64/liblzma.so.5 (0x00007f799b21a000)
    libbz2.so.1 =&gt; /lib64/libbz2.so.1 (0x00007f799b00a000)
    libcrypt.so.1 =&gt; /lib64/libcrypt.so.1 (0x00007f799add3000)
    libpcre.so.1 =&gt; /lib64/libpcre.so.1 (0x00007f799ab71000)
    libfreebl3.so =&gt; /lib64/libfreebl3.so (0x00007f799a96e000)
</code></pre>
<h4 id="damanin_commented_at_2019-10-30_0417"><img src="https://avatars.githubusercontent.com/u/37876601?u=832a55ad26fa192d411932dcf7a9f13187d79380&v=4" width="50"><a href="https://github.com/DamaniN">DamaniN</a> commented at <a href="https://github.com/rear/rear/issues/2266#issuecomment-547732552">2019-10-30 04:17</a>:<a class="headerlink" href="#damanin_commented_at_2019-10-30_0417" title="Permanent link">&para;</a></h4>
<p>I was able to fix this by adding this line to the <code>/etc/rear/local.conf</code>
file:</p>
<pre><code>export LD_LIBRARY_PATH="$LD_LIBRARY_PATH:/usr/lib64/bind9-export"
</code></pre>
<p>I was also able to resolve a similar issue with CentOS 8.0 by adding
this line to the <code>/etc/rear/local.conf</code> file:</p>
<pre><code>export LD_LIBRARY_PATH="$LD_LIBRARY_PATH:/usr/lib64/bind9-export:/usr/lib64/eog:/usr/lib64/python3.6/site-packages:/usr/lib64/samba:/usr/lib64/firefox"
</code></pre>
<p>I'll update the CDM documentation for this.</p>
<h4 id="jsmeix_commented_at_2019-11-04_1250"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2266#issuecomment-549338943">2019-11-04 12:50</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-11-04_1250" title="Permanent link">&para;</a></h4>
<p>I think this is not an issue only for CDM<br />
but a generic issue with CentOS 7.7 and 8.0.</p>
<p>I am not a CentOS user so I cannot reproduce issues with CentOS<br />
but I guess <code>export LD_LIBRARY_PATH="$LD_LIBRARY_PATH:..."</code><br />
is not how things are done on original CentOS 7.7 and 8.0 systems<br />
so I guess <code>export LD_LIBRARY_PATH="$LD_LIBRARY_PATH:..."</code><br />
is not yet the right solution but only a workaround for now, cf.<br />
<a href="https://github.com/rear/rear/pull/2270#issuecomment-549336774">https://github.com/rear/rear/pull/2270#issuecomment-549336774</a></p>
<h4 id="gdha_commented_at_2019-11-04_1357"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/2266#issuecomment-549364847">2019-11-04 13:57</a>:<a class="headerlink" href="#gdha_commented_at_2019-11-04_1357" title="Permanent link">&para;</a></h4>
<p>@jsmeix perhaps <code>ldconfig -p</code> could of be some use to find the correct
paths of the missing libraries?</p>
<h4 id="jsmeix_commented_at_2019-11-04_1439"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2266#issuecomment-549383698">2019-11-04 14:39</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-11-04_1439" title="Permanent link">&para;</a></h4>
<p>My probably too optimistic expectation was that<br />
running <code>ldconfig</code> in the recovery system via</p>
<pre><code>ldconfig $v -r "$ROOTFS_DIR
</code></pre>
<p>in<br />
<a href="https://github.com/rear/rear/blob/master/usr/share/rear/build/GNU/Linux/390_copy_binaries_libraries.sh#L116">https://github.com/rear/rear/blob/master/usr/share/rear/build/GNU/Linux/390_copy_binaries_libraries.sh#L116</a><br />
would do "the right things" so that normal programs in the recovery
system<br />
could find their libraries in the recovery system.</p>
<h4 id="jsmeix_commented_at_2019-11-18_1117"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2266#issuecomment-554971616">2019-11-18 11:17</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-11-18_1117" title="Permanent link">&para;</a></h4>
<p>@DamaniN<br />
I am neither a CentOS user so I cannot reproduce your issue<br />
nor am I a dynamic linker expert so I cannot provide really<br />
authoritative instructions how to debug dynamic linker issues<br />
so all I can do is some naive info how the dynamic linker config<br />
looks on my openSUSE Leap 15.0 system as an example<br />
what you could do on your CentOS system to find out how<br />
the dynamic linker config looks there that may finally help<br />
to see what is special with the dynamic linker config on your<br />
CentOS system that leads to this issue in the ReaR recovery system:</p>
<p>On my openSUSE Leap 15.0 system I have:</p>
<pre><code># type -a dhclient
dhclient is /sbin/dhclient

# ldd /sbin/dhclient
        linux-vdso.so.1 (0x00007ffcc78eb000)
        libc.so.6 =&gt; /lib64/libc.so.6 (0x00007f1cc270a000)
        /lib64/ld-linux-x86-64.so.2 (0x00007f1cc2eb5000)

# rpm -qf /sbin/dhclient
dhcp-client-4.3.5-lp150.5.3.1.x86_64

# rpm -qi dhcp-client
...
URL         : http://www.isc.org/software/dhcp
Summary     : ISC DHCP Client
Description :
This is an alternative DHCP client, the ISC DHCP client for Linux.
Like "dhcpcd" (the client that is installed by default) ...
</code></pre>
<p>so <code>dhclient</code> on my openSUSE Leap 15.0 system<br />
does not need any special libraries.</p>
<p>General dynamic linker things on my openSUSE Leap 15.0 system:</p>
<pre><code># ldconfig -v 2&gt;/dev/null | grep ':$'
/usr/local/lib64:
/usr/local/lib:
/usr/lib64/graphviz:
/lib:
/lib64:
/usr/lib:
/usr/lib64:
</code></pre>
<p>those are the directories that are used by the run-time linker<br />
to look for libraries.</p>
<p>The whole <code>ldconfig -v</code> output shows all those libraries<br />
so that you could use a command like</p>
<pre><code>ldconfig -v 2&gt;/dev/null | egrep ':$|libdns-export|libisc-export'
</code></pre>
<p>to see where the run-time linker would find the<br />
libraries libdns-export and libisc-export that are needed<br />
by /sbin/dhclient on your CentOS system.</p>
<p>For example on my openSUSE Leap 15.0 system<br />
where the run-time linker would find libparted<br />
that is needed by /usr/sbin/parted</p>
<pre><code># ldd /usr/sbin/parted | grep parted
        libparted.so.2 =&gt; /usr/lib64/libparted.so.2 (0x00007f3c972d6000)

# ldconfig -v 2&gt;/dev/null | egrep ':$|libparted'
/usr/local/lib64:
/usr/local/lib:
/usr/lib64/graphviz:
/lib:
/lib64:
/usr/lib:
/usr/lib64:
        libparted.so.2 -&gt; libparted.so.2.0.1

g243:~ # find /usr/lib64 -ls | grep libparted
... lrwxrwxrwx ... /usr/lib64/libparted.so.2 -&gt; libparted.so.2.0.1
... -rwxr-xr-x ... /usr/lib64/libparted.so.2.0.1
</code></pre>
<p>What directories are used by <code>ldconfig</code> are set in config files<br />
like /etc/ld.so.conf and /etc/ld.so.conf.d/*.conf<br />
for example on my openSUSE Leap 15.0 system</p>
<pre><code># cat /etc/ld.so.conf

/usr/local/lib64
/usr/local/lib
include /etc/ld.so.conf.d/*.conf
# /lib64, /lib, /usr/lib64 and /usr/lib gets added
# automatically by ldconfig after parsing this file.
# So, they do not need to be listed.
</code></pre>
<p>and because of the <code>include /etc/ld.so.conf.d/*.conf</code>:</p>
<pre><code># find /etc/ld.so.conf.d/
/etc/ld.so.conf.d/
/etc/ld.so.conf.d/graphviz.conf

# cat /etc/ld.so.conf.d/graphviz.conf
/usr/lib64/graphviz
/usr/lib64/graphviz/sharp
/usr/lib64/graphviz/java
/usr/lib64/graphviz/perl
/usr/lib64/graphviz/php
/usr/lib64/graphviz/ocaml
/usr/lib64/graphviz/python
/usr/lib64/graphviz/lua
/usr/lib64/graphviz/tcl
/usr/lib64/graphviz/guile
/usr/lib64/graphviz/ruby
</code></pre>
<p>but because actually there is none of the directories<br />
listed in /etc/ld.so.conf.d/graphviz.conf<br />
calling <code>ldconfig -v</code> reports them on its stderr</p>
<pre><code># ldconfig -v 1&gt;/dev/null
ldconfig: Can't stat /usr/lib64/graphviz/sharp: No such file or directory
ldconfig: Can't stat /usr/lib64/graphviz/java: No such file or directory
ldconfig: Can't stat /usr/lib64/graphviz/perl: No such file or directory
ldconfig: Can't stat /usr/lib64/graphviz/php: No such file or directory
ldconfig: Can't stat /usr/lib64/graphviz/ocaml: No such file or directory
ldconfig: Can't stat /usr/lib64/graphviz/python: No such file or directory
ldconfig: Can't stat /usr/lib64/graphviz/lua: No such file or directory
ldconfig: Can't stat /usr/lib64/graphviz/tcl: No such file or directory
ldconfig: Can't stat /usr/lib64/graphviz/guile: No such file or directory
ldconfig: Can't stat /usr/lib64/graphviz/ruby: No such file or directory
</code></pre>
<p>but that is not a real error.</p>
<p>The first thing what I would like to know is how the config<br />
of the run-time linker for <code>/sbin/dhclient</code> looks like<br />
on your original CentOS system.</p>
<p>I guess there is something "unusual" with that.</p>
<p>The second thing what I would like to know is how the config<br />
of the run-time linker for <code>/sbin/dhclient</code> looks like<br />
inside your ReaR recovery system.</p>
<p>To inspect things inside the ReaR recovery system<br />
set in your /etc/rear/local.conf</p>
<pre><code>KEEP_BUILD_DIR="yes"
</code></pre>
<p>then create the recovery system with "rear -D mkrescue"<br />
and finally <code>chroot</code> into your recovery system in<br />
<code>$TMPDIR/rear.XXXXXXXXXXXXXXX/rootfs/</code><br />
and run commands like the above to find out<br />
how the config of the run-time linker for <code>/sbin/dhclient</code><br />
looks like inside your recovery system.</p>
<h4 id="damanin_commented_at_2019-11-23_0315"><img src="https://avatars.githubusercontent.com/u/37876601?u=832a55ad26fa192d411932dcf7a9f13187d79380&v=4" width="50"><a href="https://github.com/DamaniN">DamaniN</a> commented at <a href="https://github.com/rear/rear/issues/2266#issuecomment-557760919">2019-11-23 03:15</a>:<a class="headerlink" href="#damanin_commented_at_2019-11-23_0315" title="Permanent link">&para;</a></h4>
<p>Re-submitted the old solution as a #2284.</p>
<p>I'll still research a new solution that doesn't use <code>LD_LIBRARY_PATH</code> as
time allows.</p>
<h4 id="jsmeix_commented_at_2020-01-21_0931"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2266#issuecomment-576594859">2020-01-21 09:31</a>:<a class="headerlink" href="#jsmeix_commented_at_2020-01-21_0931" title="Permanent link">&para;</a></h4>
<p>With
<a href="https://github.com/rear/rear/pull/2284">https://github.com/rear/rear/pull/2284</a>
merged via<br />
<a href="https://github.com/rear/rear/commit/5e52c99ee8cf22a8d043bc304a74c3504c0e7d62">https://github.com/rear/rear/commit/5e52c99ee8cf22a8d043bc304a74c3504c0e7d62</a><br />
this issue and possible (dirty) workarounds via LD_LIBRARY_PATH<br />
cf.
<a href="https://github.com/rear/rear/pull/2270#issuecomment-551832257">https://github.com/rear/rear/pull/2270#issuecomment-551832257</a><br />
is at least documented as one of the "Known Issues" in<br />
<a href="https://github.com/rear/rear/blob/master/doc/user-guide/16-Rubrik-CDM.adoc">https://github.com/rear/rear/blob/master/doc/user-guide/16-Rubrik-CDM.adoc</a></p>
<h4 id="jsmeix_commented_at_2022-01-26_1303"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2266#issuecomment-1022177529">2022-01-26 13:03</a>:<a class="headerlink" href="#jsmeix_commented_at_2022-01-26_1303" title="Permanent link">&para;</a></h4>
<p>This issue is likely avoided via
<a href="https://github.com/rear/rear/pull/2747">https://github.com/rear/rear/pull/2747</a><br />
but the actual root cause might be related to<br />
<a href="https://github.com/rear/rear/issues/2743#issuecomment-1022133392">https://github.com/rear/rear/issues/2743#issuecomment-1022133392</a><br />
on the other hand when the whole /usr/lib64 is included<br />
there should be nothing missing in /usr/lib64</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2025 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2019-10-25.2266.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
