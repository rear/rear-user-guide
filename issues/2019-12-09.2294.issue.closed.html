<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>2019 12 09.2294.issue.closed - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "2019 12 09.2294.issue.closed";
        var mkdocs_page_input_path = "issues/2019-12-09.2294.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/rust.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', '366986045', 'auto');
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
      <li>2019 12 09.2294.issue.closed</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="2294_issue_closed_suse_12_ppc64le_patch_level_4_os_backup_restore_through_rear_utility_on_ibm_power_system"><a href="https://github.com/rear/rear/issues/2294">#2294 Issue</a> <code>closed</code>: SUSE 12 (ppc64le) Patch level 4 OS Backup &amp; restore through rear utility on IBM Power system<a class="headerlink" href="#2294_issue_closed_suse_12_ppc64le_patch_level_4_os_backup_restore_through_rear_utility_on_ibm_power_system" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>support / question</code>, <code>fixed / solved / done</code></p>
<h4 id="ajju1_opened_issue_at_2019-12-09_0408"><img src="https://avatars.githubusercontent.com/u/58676304?v=4" width="50"><a href="https://github.com/Ajju1">Ajju1</a> opened issue at <a href="https://github.com/rear/rear/issues/2294">2019-12-09 04:08</a>:<a class="headerlink" href="#ajju1_opened_issue_at_2019-12-09_0408" title="Permanent link">&para;</a></h4>
<h4 id="relax-and-recover_rear_issue_template">Relax-and-Recover (ReaR) Issue Template<a class="headerlink" href="#relax-and-recover_rear_issue_template" title="Permanent link">&para;</a></h4>
<p>Fill in the following items before submitting a new issue<br />
(quick response is not guaranteed with free support):</p>
<ul>
<li>
<p>ReaR version ("/usr/sbin/rear -V"):<br />
    Relax-and-Recover 2.4 / Git</p>
</li>
<li>
<p>OS version ("cat /etc/rear/os.conf" or "lsb_release -a" or "cat
    /etc/os-release"):<br />
    SUSE Linux Enterprise Server 12 (ppc64le)</p>
</li>
</ul>
<!-- -->

<pre><code>VERSION = 12
PATCHLEVEL = 4
# This file is deprecated and will be removed in a future service pack or release.
# Please check /etc/os-release for details about this release.
 cat /etc/rear/os.conf
OS_VENDOR=SUSE_LINUX
OS_VERSION=12
</code></pre>
<ul>
<li>ReaR configuration files ("cat /etc/rear/site.conf" and/or "cat
    /etc/rear/local.conf"):<br />
    cat /etc/rear/local.conf</li>
</ul>
<!-- -->

<pre><code># Default is to create Relax-and-Recover rescue media as ISO image
# set OUTPUT to change that
# set BACKUP to activate an automated (backup and) restore of your data
# Possible configuration values can be found in /usr/share/rear/conf/default.conf
#
# This file (local.conf) is intended for manual configuration. For configuration
# through packages and other automated means we recommend creating a new
# file named site.conf next to this file and to leave the local.conf as it is.
# Our packages will never ship with a site.conf.
BOOT_FROM_SAN=y
OUTPUT=ISO
OUTPUT_URL=nfs://10.3.3.101/mksysb/suse_bkp
BACKUP=NETFS
BACKUP_URL=nfs://10.3.3.101/mksysb/suse_bkp
#BACKUP_OPTIONS="nfsvers=3,nolock"
AUTOEXCLUDE_MULTIPATH=n
#ONLY_INCLUDE_VG=( "system" )
EXCLUDE_COMPONENTS=(/dev/mapper/36005076305ffd1f40000000000005a01 /dev/mapper/36005076305ffd1f40000000000005a02 /dev/mapper/36005076305ffd1f40000000000005a03 /dev/mapper/36005076305ffd1f40000000000005a04 /dev/mapper/36005076305ffd1f40000000000005a05 /dev/mapper/36005076305ffd1f40000000000005a06 /dev/mapper/36005076305ffd1f40000000000005a07 /dev/mapper/36005076305ffd1f40000000000005a08 /dev/mapper/36005076305ffd1f40000000000005b00 /dev/mapper/36005076305ffd1f40000000000005b01 /dev/mapper/36005076305ffd1f40000000000005b02 /dev/mapper/36005076305ffd1f40000000000005b03 /dev/mapper/36005076305ffd1f40000000000005b04 /dev/mapper/36005076305ffd1f40000000000005b05 /dev/mapper/36005076305ffd1f40000000000005b06 /dev/mapper/36005076305ffd1f40000000000005b07)
#EXCLUDE_DEVICE_MAPPING=( "loop*" "ram*" )
BACKUP_PROG_INCLUDE=('/' '/var/log' '/tmp' '/srv' '/boot/grub2/powerpc-ieee1275' '/.snapshots' '/home' '/var/lib/mailman' '/var/cache' '/var/crash' '/var/lib/machines' '/var/lib/named' '/var/lib/pgsql' '/var/opt' '/var/lib/libvirt/images' '/var/lib/mysql' '/usr/local' '/opt' '/var/lib/mariadb' '/var/tmp' '/var/spool' )
</code></pre>
<ul>
<li>
<p>Hardware (PC or PowerNV BareMetal or ARM) or virtual machine (KVM
    guest or PoverVM LPAR):<br />
    PowerVM Lpar on IBM Power 9 Server</p>
</li>
<li>
<p>System architecture (x86 compatible or PPC64/PPC64LE or what exact
    ARM device):<br />
    ppc64le</p>
</li>
<li>
<p>Firmware (BIOS or UEFI or Open Firmware) and bootloader (GRUB or
    ELILO or Petitboot):<br />
    bootloader: Grub</p>
</li>
<li>
<p>Storage (local disk or SSD) and/or SAN (FC or iSCSI or FCoE) and/or
    multipath (DM or NVMe):<br />
    San bootable and multipathing</p>
</li>
<li>
<p>Description of the issue (ideally so that others can reproduce it):</p>
</li>
</ul>
<p>We are taking only system/rootvg backup from source and trying to
restore on another lpar for restoration testing. During the restoration
we are changing IP of the target system after booting from ISO file
created by rear backup of source through HMC and then map the disk only
for system vg.</p>
<p>Since, we have to just restore the system vg/rootvg only, so we have
assigned the same size disk to destination VG and rest disks required
for datavg are not assigned.</p>
<p>To achieve this we have done some configuration in the source system
/etc/rear/local.conf file for excluding the mapping of disk other than
system VG.</p>
<p>While restoring the disk mapping is getting failed and thus results in
restoration failure.</p>
<p>Few more things regarding the environment.<br />
The systems are same hardware but different lpar on IBM Power server<br />
Nfs is used for taking backup and restoration of data<br />
Booting lpar in SMS mode through iso file created by the rear backup of
source system and then assigning different IP<br />
After assigning new IP, we are using rear -d D restore command<br />
PFA are files of source configuration, rear local.conf file and rear
backup log; along with the destination steps followed and logs.</p>
<ul>
<li>
<p>Workaround, if any:</p>
</li>
<li>
<p>Attachments, as applicable ("rear -D mkrescue/mkbackup/recover"
    debug log files):<br />
<a href="https://github.com/rear/rear/files/3937831/rear.backup.zip">rear
    backup.zip</a></p>
</li>
</ul>
<p>To paste verbatim text like command output or file content,<br />
include it between a leading and a closing line of three backticks like</p>
<pre><code>```
verbatim content
```
</code></pre>
<h4 id="jsmeix_commented_at_2019-12-09_0927"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2294#issuecomment-563142611">2019-12-09 09:27</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-12-09_0927" title="Permanent link">&para;</a></h4>
<p>@Ajju1<br />
Your log is only <code>rear -d -v recover</code> but usually<br />
we need full debug logs i.e. with the <code>-D</code> option.</p>
<p>In your ...hmciecchdb02s-target.log<br />
the diskrestore.sh script fails at its beginning with</p>
<pre><code>2019-12-05 06:55:16.328139872 Start system layout restoration.
  WARNING: Failed to connect to lvmetad. Falling back to device scanning.
  Logical volume system/root contains a filesystem in use.
  Can't deactivate volume group "system" with 1 open logical volume(s)
+++ create_component /dev/mapper/36005076305ffd1f40000000000000001 multipath
+++ local device=/dev/mapper/36005076305ffd1f40000000000000001
+++ local type=multipath
+++ local touchfile=multipath--dev-mapper-36005076305ffd1f40000000000000001
+++ '[' -e /tmp/rear.3k6jeleDwzKz3CJ/tmp/touch/multipath--dev-mapper-36005076305ffd1f40000000000000001 ']'
+++ return 0
+++ LogPrint 'Creating partitions for disk /dev/mapper/36005076305ffd1f40000000000000001 (msdos)'
+++ Log 'Creating partitions for disk /dev/mapper/36005076305ffd1f40000000000000001 (msdos)'
++++ date '+%Y-%m-%d %H:%M:%S.%N '
+++ local 'timestamp=2019-12-05 06:55:16.572869572 '
+++ test 1 -gt 0
+++ echo '2019-12-05 06:55:16.572869572 Creating partitions for disk /dev/mapper/36005076305ffd1f40000000000000001 (msdos)'
2019-12-05 06:55:16.572869572 Creating partitions for disk /dev/mapper/36005076305ffd1f40000000000000001 (msdos)
+++ Print 'Creating partitions for disk /dev/mapper/36005076305ffd1f40000000000000001 (msdos)'
+++ test 1
+++ echo -e 'Creating partitions for disk /dev/mapper/36005076305ffd1f40000000000000001 (msdos)'
+++ my_udevsettle
+++ has_binary udevadm
+++ for bin in '$@'
+++ type udevadm
+++ return 0
+++ udevadm settle
+++ return 0
+++ parted -s /dev/mapper/36005076305ffd1f40000000000000001 mklabel msdos
Error: Partition(s) 2 on /dev/mapper/36005076305ffd1f40000000000000001
have been written, but we have been unable to inform the kernel of the change,
probably because it/they are in use. As a result, the old partition(s) will
remain in use. You should reboot now before making further changes.
...
2019-12-05 06:55:18.796366577 The disk layout recreation script failed
</code></pre>
<p>but I cannot imagine what the actual root cause behind is.</p>
<p>Could it be that you did something in the running ReaR recovery system<br />
before you started "rear recover" and what you did results that the<br />
target system storage components logical volume system/root<br />
and/or dev/mapper/36005076305ffd1f40000000000000001<br />
are actually in use (e.g. is something perhaps even mounted)?</p>
<p>For example after a previous (possibly failed) run of "rear recover"<br />
some target system filesystems could be mounted under <code>/mnt/local</code><br />
so you need to umount whatever is mounted below <code>/mnt/local</code><br />
before you could re-run "rear recover".</p>
<p>In your ...hmciecchdb02s-target.log I see lots of lines<br />
about <code>btrfsmountedsubvol</code> which indicate you use SLES12<br />
with its (rather complicated) default btrfs structure<br />
but I don't see in your etc/rear/local.conf the matching<br />
entries for the SLES12 default btrfs structure,<br />
cf. the SLE12*btrfs example config files in ReaR<br />
<a href="https://github.com/rear/rear/tree/master/usr/share/rear/conf/examples">https://github.com/rear/rear/tree/master/usr/share/rear/conf/examples</a></p>
<p>So when you use SLES12 with its default btrfs structure<br />
you need first and foremost a matching etc/rear/local.conf<br />
see also our SLE12-HA documentation Administration Guide<br />
the section about "Disaster Recovery with Relax-and-Recover (Rear)"<br />
<a href="https://documentation.suse.com/sle-ha/12-SP4/html/SLE-HA-all/cha-ha-rear.html">https://documentation.suse.com/sle-ha/12-SP4/html/SLE-HA-all/cha-ha-rear.html</a><br />
that reads (excerpt)</p>
<pre><code>Limitations with Btrfs
...
Your SLE12 System Needs Matching Rear Configuration

The setup in SLE12 GA, SLE12 SP1, and SLE12 SP2
have several incompatible Btrfs default structures.
As such, it is crucial to use a matching Rear
configuration file. See the example files
/usr/share/rear/conf/examples/SLE12*-btrfs-example.conf.
</code></pre>
<p>Provided your etc/rear/local.conf is right for your SLES12 system<br />
and "rear recover" still fails in your case, we need for further<br />
analysis full debug logs i.e. with the <code>-D</code> option:<br />
<code>rear -D mkrescue/mkbackup</code> and <code>rear -D recover</code><br />
for the latter cf. "Debugging issues with Relax-and-Recover" in<br />
<a href="https://en.opensuse.org/SDB:Disaster_Recovery">https://en.opensuse.org/SDB:Disaster_Recovery</a></p>
<p>Furthermore (also see that section) we would like to get<br />
in particular your <code>/var/lib/rear/layout/disklayout.conf</code><br />
and your <code>/var/lib/rear/layout/diskrestore.sh</code> files.</p>
<p>Additionally to get an easier overview about your storage layout<br />
please provide on your original system the output of the command</p>
<pre><code>lsblk -ipo NAME,KNAME,PKNAME,TRAN,TYPE,FSTYPE,SIZE,MOUNTPOINT
</code></pre>
<h4 id="ajju1_commented_at_2019-12-13_1122"><img src="https://avatars.githubusercontent.com/u/58676304?v=4" width="50"><a href="https://github.com/Ajju1">Ajju1</a> commented at <a href="https://github.com/rear/rear/issues/2294#issuecomment-565406253">2019-12-13 11:22</a>:<a class="headerlink" href="#ajju1_commented_at_2019-12-13_1122" title="Permanent link">&para;</a></h4>
<p>Hi Johannes</p>
<p>Please find the attached<br />
<a href="https://github.com/rear/rear/files/3960478/Logs.updated.zip">Logs
updated.zip</a><br />
log. I also updated the local.conf file as you suggested, but still no
luck</p>
<h4 id="jsmeix_commented_at_2019-12-16_1523"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2294#issuecomment-566107358">2019-12-16 15:23</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-12-16_1523" title="Permanent link">&para;</a></h4>
<p>Follow what I had written in<br />
<a href="https://github.com/rear/rear/issues/2294#issuecomment-563142611">https://github.com/rear/rear/issues/2294#issuecomment-563142611</a><br />
in particular (excerpts):</p>
<p>When you use SLES12 with its default btrfs structure<br />
you need first and foremost a matching etc/rear/local.conf<br />
... it is crucial to use a matching Rear configuration file.<br />
See the example files<br />
<code>/usr/share/rear/conf/examples/SLE12*-btrfs-example.conf</code></p>
<p>Provided your etc/rear/local.conf is right for your SLES12 system<br />
and "rear recover" still fails in your case ... we need for further
analysis ...<br />
<code>rear -D mkrescue/mkbackup</code> and <code>rear -D recover</code><br />
(we need both - really).</p>
<p>Furthermore ... we would like to get<br />
... your <code>/var/lib/rear/layout/disklayout.conf</code><br />
and your <code>/var/lib/rear/layout/diskrestore.sh</code> files<br />
(both files from one same <code>rear mkrescue/recover</code>).</p>
<p>Additionally to get an easier overview about your storage layout<br />
please provide on your original system the output of the command</p>
<pre><code>lsblk -ipo NAME,KNAME,PKNAME,TRAN,TYPE,FSTYPE,SIZE,MOUNTPOINT
</code></pre>
<p>(that command as is - not split up into pieces).</p>
<h4 id="ajju1_commented_at_2019-12-23_1107"><img src="https://avatars.githubusercontent.com/u/58676304?v=4" width="50"><a href="https://github.com/Ajju1">Ajju1</a> commented at <a href="https://github.com/rear/rear/issues/2294#issuecomment-568444538">2019-12-23 11:07</a>:<a class="headerlink" href="#ajju1_commented_at_2019-12-23_1107" title="Permanent link">&para;</a></h4>
<p>Hi Johannes</p>
<p>Please find the attached logs<br />
<a href="https://github.com/rear/rear/files/3994700/Logs.updated.zip">Logs
updated.zip</a></p>
<h4 id="jsmeix_commented_at_2020-01-09_1446"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2294#issuecomment-572593280">2020-01-09 14:46</a>:<a class="headerlink" href="#jsmeix_commented_at_2020-01-09_1446" title="Permanent link">&para;</a></h4>
<p>@Ajju1<br />
in your latest<br />
<a href="https://github.com/rear/rear/files/3994700/Logs.updated.zip">https://github.com/rear/rear/files/3994700/Logs.updated.zip</a><br />
therein your rear-D-mkbackup_hmciecchdb02s.log still contains</p>
<pre><code>+ source /etc/rear/local.conf
++ BOOT_FROM_SAN=y
++ OUTPUT=ISO
++ OUTPUT_URL=nfs://10.3.3.101/mksysb/suse_bkp
++ BACKUP=NETFS
++ BACKUP_URL=nfs://10.3.3.101/mksysb/suse_bkp
++ AUTOEXCLUDE_MULTIPATH=n
++ EXCLUDE_COMPONENTS=(/dev/mapper/36005076305ffd1f40000000000005a01 /dev/mapper/36005076305ffd1f40000000000005a02 /dev/mapper/36005076305ffd1f40000000000005a03 /dev/mapper/36005076305ffd1f40000000000005a04 /dev/mapper/36005076305ffd1f40000000000005a05 /dev/mapper/36005076305ffd1f40000000000005a06 /dev/mapper/36005076305ffd1f40000000000005a07 /dev/mapper/36005076305ffd1f40000000000005a08 /dev/mapper/36005076305ffd1f40000000000005b00 /dev/mapper/36005076305ffd1f40000000000005b01 /dev/mapper/36005076305ffd1f40000000000005b02 /dev/mapper/36005076305ffd1f40000000000005b03 /dev/mapper/36005076305ffd1f40000000000005b04 /dev/mapper/36005076305ffd1f40000000000005b05 /dev/mapper/36005076305ffd1f40000000000005b06 /dev/mapper/36005076305ffd1f40000000000005b07)
++ BACKUP_PROG_INCLUDE=(/var/log /tmp /srv /boot/grub2/powerpc-ieee1275 /home /var/lib/mailman /var/cache /var/lib/machines /var/lib/named /var/lib/pgsql /var/opt /var/lib/libvirt/images /var/lib/mysql /usr/local /opt /var/lib/mariadb /var/tmp /var/spool)
</code></pre>
<p>which is still insufficient for SLE12 with btrfs.</p>
<p>For SLE12 SP2 and later with btrfs start with the template in<br />
<a href="https://raw.githubusercontent.com/rear/rear/master/usr/share/rear/conf/examples/SLE12-SP2-btrfs-example.conf">https://raw.githubusercontent.com/rear/rear/master/usr/share/rear/conf/examples/SLE12-SP2-btrfs-example.conf</a><br />
and adapt is as needed to make your specific /etc/rear/local.conf file<br />
provided you had initially installed your system as SLE12 SP2 or later.</p>
<p>If you had initially installed your system as SLE12 SP1 with btrfs<br />
you would have to make your specific /etc/rear/local.conf file based
on<br />
<a href="https://raw.githubusercontent.com/rear/rear/master/usr/share/rear/conf/examples/SLE12-SP1-btrfs-example.conf">https://raw.githubusercontent.com/rear/rear/master/usr/share/rear/conf/examples/SLE12-SP1-btrfs-example.conf</a></p>
<p>If you had initially installed your system as SLE12 GA (SP0) with
btrfs<br />
you would have to make your specific /etc/rear/local.conf file based
on<br />
<a href="https://raw.githubusercontent.com/rear/rear/master/usr/share/rear/conf/examples/SLE12-btrfs-example.conf">https://raw.githubusercontent.com/rear/rear/master/usr/share/rear/conf/examples/SLE12-btrfs-example.conf</a></p>
<p>For the reason behind why different SLE12 service packs need<br />
different /etc/rear/local.conf files depending on what SLE12 service
pack<br />
was initially installed (i.e. depending on what SLE12 service pack did
the<br />
disk layout and btrfs structure setup) see<br />
<a href="https://github.com/rear/rear/issues/1368#issuecomment-302410707">https://github.com/rear/rear/issues/1368#issuecomment-302410707</a></p>
<p>Regarding</p>
<pre><code>Error: Partition(s) 2 on /dev/mapper/36005076305ffd1f40000000000000001
have been written, but we have been unable to inform the kernel of the change,
probably because it/they are in use
</code></pre>
<p>the reason could be that you use perhaps an already used disk<br />
where old partitioning and LVM meta-data is still on the disk, cf.<br />
"Prepare replacement hardware for disaster recovery" at<br />
<a href="https://en.opensuse.org/SDB:Disaster_Recovery">https://en.opensuse.org/SDB:Disaster_Recovery</a><br />
that reads in particular (excerpt)</p>
<pre><code>When your replacement storage is not pristine new storage
(i.e. when it had been ever used before), you must completely
zero out your replacement storage.
Otherwise when you try to reinstall your system ... on a disk
that had been used before, various kind of unexpected
weird issues could get in your way because of whatever
kind of remainder data on an already used disk
(for example remainders of RAID
or partition-table signatures and other kind of
"magic strings" like LVM metadata and whatever else).
</code></pre>
<p>For some more details and background information see<br />
<a href="https://github.com/rear/rear/issues/799">https://github.com/rear/rear/issues/799</a></p>
<h4 id="jsmeix_commented_at_2020-01-09_1505"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2294#issuecomment-572601996">2020-01-09 15:05</a>:<a class="headerlink" href="#jsmeix_commented_at_2020-01-09_1505" title="Permanent link">&para;</a></h4>
<p>I know I had seen such an parted/partprobe <code>inform the kernel</code><br />
error message before and - voila! - here you are:<br />
<a href="https://github.com/rear/rear/issues/793#issue-139355299">https://github.com/rear/rear/issues/793#issue-139355299</a></p>
<h4 id="jsmeix_commented_at_2020-06-24_1129"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2294#issuecomment-648763987">2020-06-24 11:29</a>:<a class="headerlink" href="#jsmeix_commented_at_2020-06-24_1129" title="Permanent link">&para;</a></h4>
<p>Because "no news is good news" I assume this issue can be closed.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2022 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2019-12-09.2294.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
