<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#2925 Issue closed: "rear mkrescue" does not error out when COPY_AS_IS="/some/dir" results broken recovery system - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#2925 Issue closed: \"rear mkrescue\" does not error out when COPY_AS_IS=\"/some/dir\" results broken recovery system";
        var mkdocs_page_input_path = "issues/2023-02-13.2925.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_nas.html">Internal Backup with tar to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/rbme.html">External Backup using RBME</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../development/squash-git-log-commments.html">How to squash git log comments into one line</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#2925 Issue closed: "rear mkrescue" does not error out when COPY_AS_IS="/some/dir" results broken recovery system</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="2925_issue_closed_rear_mkrescue_does_not_error_out_when_copy_as_issomedir_results_broken_recovery_system"><a href="https://github.com/rear/rear/issues/2925">#2925 Issue</a> <code>closed</code>: "rear mkrescue" does not error out when COPY_AS_IS="/some/dir" results broken recovery system<a class="headerlink" href="#2925_issue_closed_rear_mkrescue_does_not_error_out_when_copy_as_issomedir_results_broken_recovery_system" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>support / question</code>, <code>fixed / solved / done</code></p>
<h4 id="scooty-puff-jr_opened_issue_at_2023-02-13_1657"><img src="https://avatars.githubusercontent.com/u/124938481?v=4" width="50"><a href="https://github.com/Scooty-Puff-Jr">Scooty-Puff-Jr</a> opened issue at <a href="https://github.com/rear/rear/issues/2925">2023-02-13 16:57</a>:<a class="headerlink" href="#scooty-puff-jr_opened_issue_at_2023-02-13_1657" title="Permanent link">&para;</a></h4>
<h4 id="relax-and-recover_rear_issue_template">Relax-and-Recover (ReaR) Issue Template<a class="headerlink" href="#relax-and-recover_rear_issue_template" title="Permanent link">&para;</a></h4>
<p>Fill in the following items before submitting a new issue<br />
(quick response is not guaranteed with free support):</p>
<ul>
<li>
<p>ReaR version: 2.6</p>
</li>
<li>
<p>OS version: RHEL 8.5</p>
</li>
<li>
<p>ReaR configuration files:<br />
    OUTPUT=USB<br />
    OUTPUT_URL="usb:///dev/disk/by-label/REAR-000"<br />
    BACKUP=NETFS<br />
    BACKUP_URL="usb:///dev/disk/by-label/REAR-000"<br />
    BACKUP_SELINUX_DISABLE=1<br />
    CLONE_ALL_USERS=y<br />
    USE_SERIAL_CONSOLE=n<br />
    SSH_ROOT_PASSWORD=<br />
    USE_SERIAL_CONSOLE=n<br />
    COPY_AS_IS="/usr/src/kernals/4.18.0-348.el8.x86_64"<br />
    USB_UEFI_PART_SIZE="650"<br />
    EOF</p>
</li>
<li>
<p>Hardware vendor/product (PC or PowerNV BareMetal or ARM) or VM (KVM
    guest or PowerVM LPAR):</p>
</li>
<li>
<p>System architecture (x86 compatible or PPC64/PPC64LE or what exact
    ARM device):</p>
</li>
<li>
<p>Firmware: GRUB</p>
</li>
<li>
<p>Storage: SSD</p>
</li>
<li>
<p>Description of the issue: So I was able create a mkBACKUP on a
    external lockable SSD that I had available. I am able to boot to the
    drive by plugging the device and the SSD into a docking station to
    keep the lockable ssd powered so it won't auto lock during the
    reboot process, however once booted to the drive and it enters ReaR
    the drive umounts and instantly locks after loading into rear. Once
    ReaR loads and asks for the login, I do that and attempt a rear
    recover, but says it can't find /bin/rear to find the default.conf
    file. I unlock the drive, do a lsblk to make sure that it shows that
    it is mounted on the system, but I get the same result.</p>
</li>
</ul>
<p>Is it impossible to use a lockable drive as the USB device or am I
missing something to make this work correctly?<br />
<img alt="20230213_100912" src="https://user-images.githubusercontent.com/124938481/218521634-7aa509b6-c216-46db-8ed0-2248dd87636f.jpg" /></p>
<h4 id="schlomo_commented_at_2023-02-13_1832"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/2925#issuecomment-1428455531">2023-02-13 18:32</a>:<a class="headerlink" href="#schlomo_commented_at_2023-02-13_1832" title="Permanent link">&para;</a></h4>
<p>Can you please use version 2.7? We can't support older version, sorry.</p>
<p>Also, how did you install ReaR? @jsmeix do we have RHEL 8 repos with
current packages somewhere?</p>
<p>Is there a specific reason for copying a kernel <em>source</em> to the rescue
system? What would you do with that during recovery?</p>
<p>IMHO the lockable USB storage device should not make a difference as
long as it is unlocked. The rescue systems runs completely out of a RAM
disk (created by the <code>initrd</code> so that at this moment nothing should be
mounted in any case.</p>
<p>Bottom line: This looks like an installation gone wrong or a very
unusual system layout. After upgrading to 2.7 please try again and also
provide us the log file from the <code>rear mkrescue</code> and the output of
<code>rear dump</code></p>
<h4 id="scooty-puff-jr_commented_at_2023-02-13_1938"><img src="https://avatars.githubusercontent.com/u/124938481?v=4" width="50"><a href="https://github.com/Scooty-Puff-Jr">Scooty-Puff-Jr</a> commented at <a href="https://github.com/rear/rear/issues/2925#issuecomment-1428548991">2023-02-13 19:38</a>:<a class="headerlink" href="#scooty-puff-jr_commented_at_2023-02-13_1938" title="Permanent link">&para;</a></h4>
<p>I can try the newer version. Didn't realize I was using an older
version.</p>
<p>yum install rear</p>
<p>I had to do the copy as is with that kernel because the mkbackup kept
erroring out with that specific line as the cause, when I went looking
for solutions that copy as is line was what I found and once I included
it, I could at the very least create the backup.</p>
<p>That makes sense, but why would it reach out for the default.conf file
during that phase?</p>
<p>This was a second go round, I uninstalled rear and all of the packages
with it. Reinstalled it and had the same error at the same point.</p>
<p>I will attempt with the newer version and try again.</p>
<h4 id="schlomo_commented_at_2023-02-13_1946"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/2925#issuecomment-1428557656">2023-02-13 19:46</a>:<a class="headerlink" href="#schlomo_commented_at_2023-02-13_1946" title="Permanent link">&para;</a></h4>
<p><code>/usr/share/rear/conf/default.conf</code> is always read by <code>rear</code>, which btw
is copied in its entirety into the rescue system.</p>
<p>The fact that it is missing shows that there is some fundamental
problem.</p>
<p>Please try with a recent version and als show us the output and log of
<code>rear dump</code>, <code>rear -v mkrescue</code> or <code>rear -v mkbackup</code>, whatever you
used.</p>
<h4 id="schlomo_commented_at_2023-02-13_1947"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/2925#issuecomment-1428558454">2023-02-13 19:47</a>:<a class="headerlink" href="#schlomo_commented_at_2023-02-13_1947" title="Permanent link">&para;</a></h4>
<p>BTW, you can configure SSH for the rescue system to make your life
simpler.</p>
<h4 id="jsmeix_commented_at_2023-02-14_0752"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2925#issuecomment-1429279754">2023-02-14 07:52</a>:<a class="headerlink" href="#jsmeix_commented_at_2023-02-14_0752" title="Permanent link">&para;</a></h4>
<p>The cause is</p>
<pre><code>COPY_AS_IS="/usr/src/kernals/4.18.0-348.el8.x86_64"
</code></pre>
<p>in etc/rear/local.conf (or etc/rear/site.conf)<br />
because this overwrites</p>
<pre><code>COPY_AS_IS=( $SHARE_DIR $VAR_DIR )
</code></pre>
<p>in usr/share/rear/conf/default.conf that is sourced in usr/sbin/rear<br />
before etc/rear/local.conf and etc/rear/site.conf get sourced<br />
so nothing in usr/share/rear/ and var/lib/rear/ gets copied<br />
into the ReaR rescue/recovery system.</p>
<p>Use</p>
<pre><code>COPY_AS_IS+=( /usr/src/kernals/4.18.0-348.el8.x86_64 )
</code></pre>
<p>instead.</p>
<p>Note that COPY_AS_IS is an array,<br />
see the initial comments in our ReaR 2.6 upstream<br />
usr/share/rear/conf/default.conf<br />
<a href="https://github.com/rear/rear/blob/rear-2.6/usr/share/rear/conf/default.conf">https://github.com/rear/rear/blob/rear-2.6/usr/share/rear/conf/default.conf</a></p>
<p>See also the comments in our original<br />
ReaR 2.6 upstream etc/rear/local.conf<br />
<a href="https://github.com/rear/rear/blob/rear-2.6/etc/rear/local.conf">https://github.com/rear/rear/blob/rear-2.6/etc/rear/local.conf</a></p>
<p>By the way:<br />
Is it really '/usr/src/kernals/' and not '/usr/src/kernels/'?</p>
<h4 id="jsmeix_commented_at_2023-02-14_0800"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2925#issuecomment-1429289615">2023-02-14 08:00</a>:<a class="headerlink" href="#jsmeix_commented_at_2023-02-14_0800" title="Permanent link">&para;</a></h4>
<p>In the openSUSE Build Service (OBS)<br />
there is no RHEL 8 repository avialable for building on<br />
<a href="https://build.opensuse.org/projects/Archiving:Backup:Rear/distributions/new">https://build.opensuse.org/projects/Archiving:Backup:Rear/distributions/new</a><br />
Login at OBS is needed to see that - without login at OBS one gets<br />
"Sorry, you are not authorized to update this project."</p>
<h4 id="schlomo_commented_at_2023-02-14_0809"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/2925#issuecomment-1429300939">2023-02-14 08:09</a>:<a class="headerlink" href="#schlomo_commented_at_2023-02-14_0809" title="Permanent link">&para;</a></h4>
<p>Nice catch @jsmeix!</p>
<p>Maybe some day we can do a simple check for such common mistakes by
validating that variables that should be an array are actually still an
array, or at least the ones where we always expect more than one value
in them, like this <code>COPY_AS_IS</code>.</p>
<h4 id="jsmeix_commented_at_2023-02-14_0838"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2925#issuecomment-1429332830">2023-02-14 08:38</a>:<a class="headerlink" href="#jsmeix_commented_at_2023-02-14_0838" title="Permanent link">&para;</a></h4>
<p>Interestingly "rear mkrescue" does not error out with</p>
<pre><code>COPY_AS_IS="/some/directory"
</code></pre>
<p>I tested it right now on a test VM with</p>
<pre><code>COPY_AS_IS="/home/johannes"
</code></pre>
<p>I would have expected that something fails with that.<br />
But it looks to the user as if it had "just worked" ok:</p>
<pre><code># usr/sbin/rear -D mkrescue
Relax-and-Recover 2.6 / Git
Running rear mkrescue (PID 2369)
Using log file: /root/rear.github.master/var/log/rear/rear-localhost.log
Running workflow mkrescue on the normal/original system
Using autodetected kernel '/boot/vmlinuz-5.14.21-150400.22-default' as kernel in the recovery system
Creating disk layout
Overwriting existing disk layout file /root/rear.github.master/var/lib/rear/layout/disklayout.conf
Using sysconfig bootloader 'grub2'
Verifying that the entries in /root/rear.github.master/var/lib/rear/layout/disklayout.conf are correct ...
Creating recovery system root filesystem skeleton layout
Handling network interface 'eth0'
eth0 is a physical device
Handled network interface 'eth0'
Copying logfile /root/rear.github.master/var/log/rear/rear-localhost.log into initramfs as '/tmp/rear-localhost-partial-2023-02-14T09:18:32+01:00.log'
Copying files and directories
Copying binaries and libraries
Copying only currently loaded kernel modules (MODULES contains 'loaded_modules')
Omit copying files in /lib*/firmware/ (FIRMWARE_FILES='no')
Skip copying broken symlink '/etc/resolv.conf' target '/run/netconfig/resolv.conf' on /proc/ /sys/ /dev/ or /run/
Skip copying broken symlink '/etc/mtab' target '/proc/13197/mounts' on /proc/ /sys/ /dev/ or /run/
Broken symlink '/usr/share/rear' in recovery system because 'readlink' cannot determine its link target
Testing that the recovery system in /tmp/rear.BaBizTjSCHecwck/rootfs contains a usable system
Skipped ldd test for '/home/johannes/.xinitrc.template' (owner 'johannes' not in TRUSTED_FILE_OWNERS)
Creating recovery/rescue system initramfs/initrd initrd.cgz with gzip default compression
Created initrd.cgz with gzip default compression (63550540 bytes) in 12 seconds
Making ISO image
Wrote ISO image: /root/rear.github.master/var/lib/rear/output/rear-localhost.iso (74M)
Copying resulting files to nfs location
Saving /root/rear.github.master/var/log/rear/rear-localhost.log as rear-localhost.log to nfs location
Copying result files '/root/rear.github.master/var/lib/rear/output/rear-localhost.iso /tmp/rear.BaBizTjSCHecwck/tmp/VERSION /tmp/rear.BaBizTjSCHecwck/tmp/README /tmp/rear.BaBizTjSCHecwck/tmp/rear-localhost.log' to /tmp/rear.BaBizTjSCHecwck/outputfs/localhost at nfs location
Exiting rear mkrescue (PID 2369) and its descendant processes ...
Running exit tasks
You should also rm -Rf /tmp/rear.BaBizTjSCHecwck
</code></pre>
<p>I think I will enhance<br />
usr/share/rear/build/default/990_verify_rootfs.sh<br />
to verify that 'rear' can be run inside the recovery system<br />
e.g. by calling</p>
<pre><code>rear dump 1&gt;/dev/null
</code></pre>
<p>or something similar.</p>
<p>When I call this inside the ReaR recovery system<br />
with 'COPY_AS_IS="/some/directory"' I get</p>
<pre><code># chroot /tmp/rear.BaBizTjSCHecwck/rootfs/

bash-4.4# rear dump 1&gt;/dev/null
/sbin/rear: line 312: /usr/share/rear/conf/default.conf: No such file or directory
/sbin/rear: line 377: /usr/share/rear/lib/_input-output-functions.sh: No such file or directory
/sbin/rear: line 384: : No such file or directory
/sbin/rear: line 390: : No such file or directory
/sbin/rear: line 407: LogPrint: command not found
/sbin/rear: line 408: LogPrint: command not found
/sbin/rear: line 409: Log: command not found
/sbin/rear: line 410: LogPrint: command not found
/sbin/rear: line 424: Debug: command not found
/sbin/rear: line 425: Debug: command not found
/sbin/rear: line 430: Debug: command not found
/sbin/rear: line 433: Source: command not found
/sbin/rear: line 435: SetOSVendorAndVersion: command not found
/sbin/rear: line 447: Source: command not found
/sbin/rear: line 447: Source: command not found
/sbin/rear: line 509: SourceStage: command not found
/sbin/rear: line 528: QuietAddExitTask: command not found
/sbin/rear: line 529: Log: command not found
/sbin/rear: line 537: has_binary: command not found
/sbin/rear: line 544: LogPrintError: command not found
/sbin/rear: line 576: LogToSyslog: command not found

bash-4.4# echo $?
1
</code></pre>
<p>For now I prefer a simple test for what is actually needed<br />
inside the ReaR recovery system over a more abstract<br />
verification of config variable settings because currently<br />
I don't have a good idea how to implement that with reasonable<br />
effort (which does of course not mean a general verification<br />
of config variables cannot be implemented at a later time).</p>
<h4 id="schlomo_commented_at_2023-02-14_0946"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/2925#issuecomment-1429432172">2023-02-14 09:46</a>:<a class="headerlink" href="#schlomo_commented_at_2023-02-14_0946" title="Permanent link">&para;</a></h4>
<p>Should we keep this issue open till we actually add a sanity check?</p>
<p>I was thinking along the lines of parsing <code>default.conf</code> to find all
variables that should be an array:<br />
<img width="639" alt="image" src="https://user-images.githubusercontent.com/101384/218696832-de042698-99ac-4b62-bd7e-902ecf5904be.png"></p>
<p>And then we can add a check like this to validate that all those
variables are actually still arrays:</p>
<pre><code>[[ "$(declare -p EXCLUDE_BACKUP)" =~ "declare -a" ]] &amp;&amp; echo array
</code></pre>
<p>(and this code is not very robust, see
<a href="https://stackoverflow.com/a/42877229">https://stackoverflow.com/a/42877229</a>
for the probably most "correct" implementation)</p>
<p>What do you think. Should I add that to ReaR?</p>
<h4 id="jsmeix_commented_at_2023-02-14_1034"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2925#issuecomment-1429498441">2023-02-14 10:34</a>:<a class="headerlink" href="#jsmeix_commented_at_2023-02-14_1034" title="Permanent link">&para;</a></h4>
<p>I did<br />
<a href="https://github.com/rear/rear/issues/2930">https://github.com/rear/rear/issues/2930</a><br />
for the generic test to have things separated.</p>
<p>By the way:</p>
<pre><code>COPY_AS_IS=( /some/directory )
</code></pre>
<p>would be syntactically correct but still results<br />
the same useless recovery system.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2025 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2023-02-13.2925.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
