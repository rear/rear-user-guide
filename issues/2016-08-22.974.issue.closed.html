<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#974 Issue closed: No Real Incremental Backups - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#974 Issue closed: No Real Incremental Backups";
        var mkdocs_page_input_path = "issues/2016-08-22.974.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#974 Issue closed: No Real Incremental Backups</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="974_issue_closed_no_real_incremental_backups"><a href="https://github.com/rear/rear/issues/974">#974 Issue</a> <code>closed</code>: No Real Incremental Backups<a class="headerlink" href="#974_issue_closed_no_real_incremental_backups" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>documentation</code>, <code>support / question</code>,
<code>fixed / solved / done</code></p>
<h4 id="dcz01_opened_issue_at_2016-08-22_0750"><img src="https://avatars.githubusercontent.com/u/20817288?v=4" width="50"><a href="https://github.com/dcz01">dcz01</a> opened issue at <a href="https://github.com/rear/rear/issues/974">2016-08-22 07:50</a>:<a class="headerlink" href="#dcz01_opened_issue_at_2016-08-22_0750" title="Permanent link">&para;</a></h4>
<ul>
<li>rear version (/usr/sbin/rear -V): 1.18 / Git</li>
<li>OS version (cat /etc/rear/os.conf or lsb_release -a):</li>
</ul>
<!-- -->

<pre><code>OS_VENDOR=RedHatEnterpriseServer
OS_VERSION=6
</code></pre>
<ul>
<li>rear configuration files (cat /etc/rear/site.conf or cat
    /etc/rear/local.conf):</li>
</ul>
<!-- -->

<pre><code>OUTPUT=ISO
OUTPUT_URL=file:///opt/brp/rear
BACKUP=NETFS
BACKUP_PROG=tar
#BACKUP_PROG_CRYPT_ENABLED=1
#BACKUP_PROG_CRYPT_KEY=brpbackup123
#BACKUP_PROG_CRYPT_OPTIONS="/usr/bin/openssl aes256 -salt -k"
#BACKUP_PROG_DECRYPT_OPTIONS="/usr/bin/openssl aes256 -d -k"
#BACKUP_URL=nfs://
BACKUP_URL=cifs://notesrechte/BRP-Backup
BACKUP_OPTIONS="cred=/etc/rear/cifs"
BACKUP_TYPE=incremental
FULLBACKUPDAY="Sat"
BACKUP_PROG_EXCLUDE=( '/tmp/*' '/dev/shm/*' $VAR_DIR/output/\* '/mnt/*' '/media/*' '/var/lib/pgsql/9.3/data/base/*' '/var/lib/pgsql/9.3/data/global/*' '/var/lib/pgsql/9.3/data/pg*/*' )
</code></pre>
<p>I found a little bug in the incremental solution of rear.<br />
rear is actual working with differential backups based on the last full
backup. so it needs only to restore the last full and the newest
differential.<br />
this is not the right incremental backup and restore because rear is so
backing up every day a lot more than needed.<br />
is this so intended?</p>
<p>because we are backing up every day an postgres database (which does an
self full backup every day) so that the backup every day gets to large
to transmit it from the client to the data center.</p>
<p>here i found some info about that if needed:<br />
<a href="http://typesofbackup.com/incremental-vs-differential-vs-full-backup/">http://typesofbackup.com/incremental-vs-differential-vs-full-backup/</a><br />
<a href="http://paulwhippconsulting.com/blog/using-tar-for-full-and-incremental-backups/">http://paulwhippconsulting.com/blog/using-tar-for-full-and-incremental-backups/</a></p>
<h4 id="dcz01_commented_at_2016-08-30_1254"><img src="https://avatars.githubusercontent.com/u/20817288?v=4" width="50"><a href="https://github.com/dcz01">dcz01</a> commented at <a href="https://github.com/rear/rear/issues/974#issuecomment-243428718">2016-08-30 12:54</a>:<a class="headerlink" href="#dcz01_commented_at_2016-08-30_1254" title="Permanent link">&para;</a></h4>
<p>@gdha @jsmeix Or maybe you could change the comparison in the file
<code>/usr/share/rear/prep/NETFS/default/07_set_backup_archive.sh</code> from</p>
<pre><code>if [ -f "${BUILD_DIR}/outputfs/${NETFS_PREFIX}/timestamp.txt" ]; then
backuparchive="${BUILD_DIR}/outputfs/${NETFS_PREFIX}/$(date +"%Y-%m-%d-%H%M")-I${BACKUP_PROG_SUFFIX}${BACKUP_PROG_COMPRESS_SUFFIX}"
BACKUP_PROG_X_OPTIONS="$BACKUP_PROG_X_OPTIONS --newer=$(cat ${BUILD_DIR}/outputfs/${NETFS_PREFIX}/timestamp.txt)"
BACKUP_PROG_X_OPTIONS="$BACKUP_PROG_X_OPTIONS -V $(cat ${BUILD_DIR}/outputfs/${NETFS_PREFIX}/basebackup.txt)"
Log "Performing Incremental-Backup $backuparchive"
</code></pre>
<p>to something of that to backup only files newer than the last backup
<code>date +%Y-%m-%d -d yesterday</code> <code>--newer-mtime '1 days ago'</code></p>
<h4 id="gdha_commented_at_2016-09-22_0919"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/974#issuecomment-248851517">2016-09-22 09:19</a>:<a class="headerlink" href="#gdha_commented_at_2016-09-22_0919" title="Permanent link">&para;</a></h4>
<p>@dcz01 The code is now made that it only needs to restore one <strong>full
backup</strong> and <strong>one incremental</strong> backup (an incremental since last full
backup - it would perhaps be better if we called it <em>differential</em>
instead of incremental).<br />
We have no intention to change this in the near future.</p>
<h4 id="jsmeix_commented_at_2016-09-22_1021"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/974#issuecomment-248863588">2016-09-22 10:21</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-09-22_1021" title="Permanent link">&para;</a></h4>
<p>@dcz01<br />
in your
<a href="https://github.com/rear/rear/issues/974#issue-172388615">https://github.com/rear/rear/issues/974#issue-172388615</a><br />
I noticed "we are backing up every day an postgres database".</p>
<p>FYI regarding huge backup because it contains huge files<br />
like databases you may have a look at my personal opinion in<br />
<a href="https://github.com/rear/rear/issues/1006#issuecomment-248862040">https://github.com/rear/rear/issues/1006#issuecomment-248862040</a></p>
<h4 id="jsmeix_commented_at_2016-09-22_1049"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/974#issuecomment-248868389">2016-09-22 10:49</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-09-22_1049" title="Permanent link">&para;</a></h4>
<p>@gdha<br />
regarding your "it would perhaps be better if we called<br />
it differential instead of incremental)":<br />
Do you intend to enhance the documentation?</p>
<p>If not I could try to to it.</p>
<p>If I do it I would not change any code<br />
(e.g. I would keep things like "BACKUP_TYPE=incremental")<br />
but I would try to make it clear in the documentation<br />
that "incremental" actually is "differential".</p>
<p>Or should I even try to also adapt the code e.g.<br />
change "BACKUP_TYPE=incremental"<br />
to "BACKUP_TYPE=differential"<br />
or - if needed - keep it backward compatible<br />
that BACKUP_TYPE could be "incremental" or "differential"<br />
and both lead to the same result?</p>
<h4 id="jsmeix_commented_at_2016-09-22_1253"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/974#issuecomment-248895101">2016-09-22 12:53</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-09-22_1253" title="Permanent link">&para;</a></h4>
<p>I have a plan:</p>
<p>I will only enhance the documentation to make it clear<br />
that currently "BACKUP_TYPE=incremental" functionality<br />
actually implements differential backup behaviour.</p>
<p>This way the "BACKUP_TYPE=incremental" functionality<br />
can be enhanced at a later time by a contributor to actually<br />
implement real incremental backup behaviour.</p>
<h4 id="jsmeix_commented_at_2016-09-22_1404"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/974#issuecomment-248913018">2016-09-22 14:04</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-09-22_1404" title="Permanent link">&para;</a></h4>
<p>Have a look at my pull request
<a href="https://github.com/rear/rear/pull/1007">https://github.com/rear/rear/pull/1007</a><br />
whether or not it is o.k. for you this way.</p>
<h4 id="jsmeix_commented_at_2016-09-23_0755"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/974#issuecomment-249126761">2016-09-23 07:55</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-09-23_0755" title="Permanent link">&para;</a></h4>
<p>With
<a href="https://github.com/rear/rear/issues/974#issuecomment-248851517">https://github.com/rear/rear/issues/974#issuecomment-248851517</a><br />
plus the merged
<a href="https://github.com/rear/rear/pull/1007">https://github.com/rear/rear/pull/1007</a><br />
I close this issue as "fixed".</p>
<p>@dcz01<br />
That "we have no intention to change this in the near future"<br />
does of course not mean that another contributor (e.g. you)<br />
could not enhance the current "BACKUP_TYPE=incremental"<br />
functionality to actually implement real incremental backup.</p>
<p>FYI:<br />
In general regarding contributing to Relax-and-Recover see<br />
<a href="http://relax-and-recover.org/development/">http://relax-and-recover.org/development/</a><br />
and the section<br />
"How to contribute to Relax-and-Recover" in<br />
<a href="https://en.opensuse.org/SDB:Disaster_Recovery">https://en.opensuse.org/SDB:Disaster_Recovery</a></p>
<h4 id="jsmeix_commented_at_2016-09-23_0827"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/974#issuecomment-249133115">2016-09-23 08:27</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-09-23_0827" title="Permanent link">&para;</a></h4>
<p>Typo correction in my
<a href="https://github.com/rear/rear/issues/974#issuecomment-249126761">https://github.com/rear/rear/issues/974#issuecomment-249126761</a><br />
I meant:</p>
<p>That "we have no intention to change this in the near future"<br />
does of course not mean that another contributor (e.g. you)<br />
could <em>not</em> enhance the current "BACKUP_TYPE=incremental"<br />
functionality to actually implement real incremental backup.</p>
<p>I.e. of course we do appreciate GitHub pull requests<br />
that enhance Relax-and-Recover functionality.</p>
<h4 id="jsmeix_commented_at_2016-11-21_1221"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/974#issuecomment-261922688">2016-11-21 12:21</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-11-21_1221" title="Permanent link">&para;</a></h4>
<p>With<br />
<a href="https://github.com/rear/rear/pull/1071">https://github.com/rear/rear/pull/1071</a><br />
merged, there is now support for multiple restore archives<br />
which is a precondition to support real incremental backups<br />
so that there is now support for real incremantal backups<br />
and still support for differential backups.</p>
<p>There is a small behavioural change:<br />
Now BACKUP_TYPE=incremental means real incremental backup<br />
and the new BACKUP_TYPE=differential means what it tells.<br />
This is all described in default.conf</p>
<p>With that above pull request merged<br />
I consider this issue to be really fixed now.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2024 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2016-08-22.974.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
