<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>2014 09 09.457.issue.closed - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "2014 09 09.457.issue.closed";
        var mkdocs_page_input_path = "issues/2014-09-09.457.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/rust.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', '366986045', 'auto');
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
      <li>2014 09 09.457.issue.closed</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="457_issue_closed_cant_recover_my_oracle_linux_server_with_netbackup_nbu_using_rear"><a href="https://github.com/rear/rear/issues/457">#457 Issue</a> <code>closed</code>: Can't recover my Oracle Linux server with Netbackup (NBU) using Rear.<a class="headerlink" href="#457_issue_closed_cant_recover_my_oracle_linux_server_with_netbackup_nbu_using_rear" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>support / question</code></p>
<h4 id="kichoc_opened_issue_at_2014-09-09_0317"><img src="https://avatars.githubusercontent.com/u/8703994?v=4" width="50"><a href="https://github.com/kichoc">kichoc</a> opened issue at <a href="https://github.com/rear/rear/issues/457">2014-09-09 03:17</a>:<a class="headerlink" href="#kichoc_opened_issue_at_2014-09-09_0317" title="Permanent link">&para;</a></h4>
<p>Hello<br />
I’m having issues recovering an Oracle Linux server with Rear and NBU.<br />
I have no issues recovering this same Oracle Linux server with Rear and
Netfs but when I try with NBU the recover process seems to work (see
below)</p>
<p>08:36:06 (67385.001) chmod 555 /mnt/local/usr/share/empty to reset
permissions.<br />
08:36:07 (67385.001) chmod 511 /mnt/local/var/run/cups/certs to reset
permissions.<br />
08:36:07 (67385.001) chmod 600 /mnt/local/var/opt/VRTSsfmh/vea to reset
permissions.<br />
08:36:07 (67385.001) chmod 600 /mnt/local/var/opt/VRTSsfmh/veaintf to
reset permissions.<br />
08:36:21 (67385.001) INF - TAR EXITING WITH STATUS = 0<br />
08:36:21 (67385.001) INF - TAR RESTORED 139769 OF 139769 FILES
SUCCESSFULLY<br />
08:36:21 (67385.001) INF - TAR KEPT 0 EXISTING FILES<br />
08:36:21 (67385.001) INF - TAR PARTIALLY RESTORED 0 FILES<br />
08:36:22 (67385.001) Status of restore from image created 08/26/14
15:34:39 = the requested operation was successfully completed<br />
08:36:24 (67385.xxx) INF - Status = the requested operation was
successfully completed.</p>
<p>But when I go to reboot the server it does not boot with the below
errors.</p>
<p><img alt="a" src="https://cloud.githubusercontent.com/assets/8703994/4196161/d99363da-37cd-11e4-8305-d4dcfe0561c1.png" /><br />
<img alt="b" src="https://cloud.githubusercontent.com/assets/8703994/4196178/2391819c-37ce-11e4-8ee5-e21f701e0bf7.png" /><br />
<img alt="c" src="https://cloud.githubusercontent.com/assets/8703994/4196185/3843ab74-37ce-11e4-9052-1cde0f6e6988.png" /></p>
<p>There is no console login prompt after the reboot and can’t ping the
server so it doesn’t seem to restore networking etc.<br />
Has anyone seen this before?</p>
<p>I’m running<br />
rear-1.16.1-1<br />
Netbackup server 6.5.5<br />
Netbackup client 6.5<br />
Oracle Linux Server release 5.7</p>
<p>Also tried it on:<br />
Netbackup server 7.5<br />
Netbackup client 7.0<br />
using rear-1.16.1-1<br />
and has the same result.</p>
<p>Here is my local.conf<br />
OUTPUT=ISO<br />
BACKUP=NBU<br />
COPY_AS_IS_NBU=( /usr/openv/bin/vnetd /usr/openv/bin/vopied
/usr/openv/lib /usr/openv/netbackup /usr/openv/var/auth/[mn]<em>.txt )<br />
COPY_AS_IS_EXCLUDE_NBU=( "/usr/openv/netbackup/logs/</em>"
"/usr/openv/netbackup/bin/bpjava*" "/usr/openv/netbackup/bin/xbp" )<br />
PROGS_NBU=( )<br />
PROGS=( "${PROGS[@]}"<br />
lsof<br />
ssh-keygen )</p>
<p>I’m trying to recover from a Netbackup full backup including /boot and
/.<br />
I have also tried performing the backup using “ALL_LOCAL_DRIVES” and
/boot which exhibits the same problem.<br />
I can restore single files onto this client through bprestore so I know
netbackup is working as it should.<br />
One thing I have noticed is that there is no relabeling performed when I
recover with NBU compared to Netfs which always performs a relabel on
initial reboot after the recover.<br />
Not sure if this should be the case or not?<br />
Any help will be appreciated as I don’t think I will get anywhere with
Symantec as they will try and push me to use their BMR which is too
complicated and cumbersome compared to Rear.</p>
<p>Thanks.</p>
<h4 id="gdha_commented_at_2014-09-09_0716"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/457#issuecomment-54933145">2014-09-09 07:16</a>:<a class="headerlink" href="#gdha_commented_at_2014-09-09_0716" title="Permanent link">&para;</a></h4>
<p>Hi - see issue #454 to get some insight in the problems you have
encountered. I believe they are the same. Is there any reason why you
added NBU stuff into the <code>local.conf</code> file? That is not necessary as
rear should have sufficient knowledge what to pull in. If not, then let
us know.</p>
<h4 id="kichoc_commented_at_2014-09-10_0549"><img src="https://avatars.githubusercontent.com/u/8703994?v=4" width="50"><a href="https://github.com/kichoc">kichoc</a> commented at <a href="https://github.com/rear/rear/issues/457#issuecomment-55073730">2014-09-10 05:49</a>:<a class="headerlink" href="#kichoc_commented_at_2014-09-10_0549" title="Permanent link">&para;</a></h4>
<p>Hi,<br />
Thanks for your reply but unfortunately i don't think issue 454 is the
problem here.<br />
There are no incrementals setup for the policy i am using to restore
from, only full backups are performed.<br />
In regards to the NBU stuff in my local.conf i added that in one of the
attempts to get this thing to work so will remove as it made no
difference.<br />
Rear works great over netfs on both my test servers but i just can't get
it to work with Netbackup on two different versions 6.5 and 7.5.</p>
<h4 id="wzwei_commented_at_2014-09-10_0851"><img src="https://avatars.githubusercontent.com/u/8639538?v=4" width="50"><a href="https://github.com/wzwei">wzwei</a> commented at <a href="https://github.com/rear/rear/issues/457#issuecomment-55087559">2014-09-10 08:51</a>:<a class="headerlink" href="#wzwei_commented_at_2014-09-10_0851" title="Permanent link">&para;</a></h4>
<p>Hi,</p>
<p>the server cannot start all the needed services. But it does boot
partially. So there should be a /var/log/messages file containing hints
what it is missing. Could you boot the machine from some Live CD and get
the messages log file from the servers disk.</p>
<h4 id="gdha_commented_at_2014-09-10_1127"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/457#issuecomment-55102302">2014-09-10 11:27</a>:<a class="headerlink" href="#gdha_commented_at_2014-09-10_1127" title="Permanent link">&para;</a></h4>
<p>@kichoc You could use the rear iso to boot from to further investigate
your <code>/</code> file system. Inspect the log file of rear to find out if
selinux tagging was performed or not?</p>
<h4 id="kichoc_commented_at_2014-09-11_0417"><img src="https://avatars.githubusercontent.com/u/8703994?v=4" width="50"><a href="https://github.com/kichoc">kichoc</a> commented at <a href="https://github.com/rear/rear/issues/457#issuecomment-55217565">2014-09-11 04:17</a>:<a class="headerlink" href="#kichoc_commented_at_2014-09-11_0417" title="Permanent link">&para;</a></h4>
<p>Hi,<br />
Haven't have a chance to run this again and check the logs today but i
can tell you that there definitely was NO selinux tagging occurring as
this requires an extra reboot after the recover. I wrote this in my
initial post as i asked the question should it occur on both NBU and
netfs recovers as it only occurs with netfs here.</p>
<h4 id="kichoc_commented_at_2014-09-17_0105"><img src="https://avatars.githubusercontent.com/u/8703994?v=4" width="50"><a href="https://github.com/kichoc">kichoc</a> commented at <a href="https://github.com/rear/rear/issues/457#issuecomment-55836093">2014-09-17 01:05</a>:<a class="headerlink" href="#kichoc_commented_at_2014-09-17_0105" title="Permanent link">&para;</a></h4>
<p>Tested this again and no .autorelabel file is created under /mnt/local
as there is with netfs.<br />
Created one after the netbackup restored completed but still didn't work
but would not boot at all.<br />
Giving up with using NBU and will stick with netfs.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2022 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2014-09-09.457.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
