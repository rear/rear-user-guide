<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#2942 Issue closed: '-c' and '-C' options are ignored with 'automatic/auto_recover' and 'unattended' modes - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#2942 Issue closed: \u0027-c\u0027 and \u0027-C\u0027 options are ignored with \u0027automatic/auto_recover\u0027 and \u0027unattended\u0027 modes";
        var mkdocs_page_input_path = "issues/2023-02-21.2942.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_nas.html">Internal Backup with tar to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_rsync.html">Internal Backup with rsync to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/rsync.html">Internal Backup using BACKUP=RSYNC method</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/rbme.html">External Backup using RBME</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/restic.html">External Backup using restic</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../development/squash-git-log-commments.html">How to squash git log comments into one line</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#2942 Issue closed: '-c' and '-C' options are ignored with 'automatic/auto_recover' and 'unattended' modes</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="2942_issue_closed_-c_and_-c_options_are_ignored_with_automaticauto_recover_and_unattended_modes"><a href="https://github.com/rear/rear/issues/2942">#2942 Issue</a> <code>closed</code>: '-c' and '-C' options are ignored with 'automatic/auto_recover' and 'unattended' modes<a class="headerlink" href="#2942_issue_closed_-c_and_-c_options_are_ignored_with_automaticauto_recover_and_unattended_modes" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>fixed / solved / done</code></p>
<h4 id="jsmeix_opened_issue_at_2023-02-21_1319"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> opened issue at <a href="https://github.com/rear/rear/issues/2942">2023-02-21 13:19</a>:<a class="headerlink" href="#jsmeix_opened_issue_at_2023-02-21_1319" title="Permanent link">&para;</a></h4>
<p>I found an issue with our current '-c' and '-C' options:</p>
<p>The 'automatic/auto_recover' and 'unattended' modes<br />
currently call only</p>
<pre><code>rear $rear_debug_options recover
</code></pre>
<p>see<br />
<a href="https://github.com/rear/rear/blob/rear-2.7/usr/share/rear/skel/default/etc/scripts/system-setup#L155">https://github.com/rear/rear/blob/rear-2.7/usr/share/rear/skel/default/etc/scripts/system-setup#L155</a><br />
and<br />
<a href="https://github.com/rear/rear/blob/rear-2.7/usr/share/rear/skel/default/etc/scripts/system-setup#L192">https://github.com/rear/rear/blob/rear-2.7/usr/share/rear/skel/default/etc/scripts/system-setup#L192</a></p>
<p>So '-c' and '-C' are ignored / not possible<br />
with our current 'automatic/auto_recover' and 'unattended' modes<br />
which is an issue that needs to be fixed.</p>
<p>Cf.<br />
<a href="https://github.com/rear/rear/issues/2936#issuecomment-1438462224">https://github.com/rear/rear/issues/2936#issuecomment-1438462224</a></p>
<p>Latest results and findings:</p>
<p>With <a href="https://github.com/rear/rear/pull/3499">https://github.com/rear/rear/pull/3499</a> merged<br />
it is now described in doc/user-guide/11-multiple-backups.adoc</p>
<pre><code>How to recover with multiple backups in 'auto_recover'/'automatic' or 'unattended' mode
</code></pre>
<p>by specifying the RECOVERY_COMMANDS array, see<br />
<a href="https://github.com/rear/rear/blob/master/doc/user-guide/11-multiple-backups.adoc#how-to-recover-with-multiple-backups-in-auto_recoverautomatic-or-unattended-mode">https://github.com/rear/rear/blob/master/doc/user-guide/11-multiple-backups.adoc#how-to-recover-with-multiple-backups-in-auto_recoverautomatic-or-unattended-mode</a><br />
see below<br />
<a href="https://github.com/rear/rear/issues/2942#issuecomment-3132413245">https://github.com/rear/rear/issues/2942#issuecomment-3132413245</a></p>
<p>The '-c' option does not at all work inside the ReaR recovery system<br />
see <a href="https://github.com/rear/rear/issues/512#issuecomment-68051604">https://github.com/rear/rear/issues/512#issuecomment-68051604</a><br />
so there is no need to implement '-c' support for<br />
'automatic/auto_recover' and 'unattended' modes, see<br />
<a href="https://github.com/rear/rear/pull/3070#discussion_r2238864312">https://github.com/rear/rear/pull/3070#discussion_r2238864312</a><br />
and below<br />
<a href="https://github.com/rear/rear/issues/2942#issuecomment-3132425914">https://github.com/rear/rear/issues/2942#issuecomment-3132425914</a></p>
<h4 id="jsmeix_commented_at_2023-02-21_1328"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2942#issuecomment-1438493332">2023-02-21 13:28</a>:<a class="headerlink" href="#jsmeix_commented_at_2023-02-21_1328" title="Permanent link">&para;</a></h4>
<p>My current offhanded idea how to fix that generically<br />
is to store the whole 'rear [options] workflow' command line<br />
of each last called workflow in the ReaR recovery system.</p>
<p>Because only "rear mkrescue" and "rear mkbackup" create<br />
a ReaR recovery system only those workflows can store<br />
their command line in the ReaR recovery system.</p>
<p>So some "rear special_option mkbackuponly" cannot<br />
store its command line in the ReaR recovery system.</p>
<p>Cf.<br />
<a href="https://github.com/rear/rear/issues/2936#issuecomment-1438475287">https://github.com/rear/rear/issues/2936#issuecomment-1438475287</a></p>
<h4 id="schlomo_commented_at_2023-02-21_1959"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/2942#issuecomment-1439021298">2023-02-21 19:59</a>:<a class="headerlink" href="#schlomo_commented_at_2023-02-21_1959" title="Permanent link">&para;</a></h4>
<p>FYI, we copy the directory specified by <code>-c</code> (and stored as
<code>CONFIG_DIR</code>) into the rescue system as <code>/etc/rear</code> so that there would
be no point to remember and use <code>-c</code> for <code>rear recover</code>:<br />
<a href="https://github.com/rear/rear/blob/ea900c4ec9589c7acb3d90c01f75ad7781fbdd8c/usr/share/rear/build/GNU/Linux/100_copy_as_is.sh#L165">https://github.com/rear/rear/blob/ea900c4ec9589c7acb3d90c01f75ad7781fbdd8c/usr/share/rear/build/GNU/Linux/100_copy_as_is.sh#L165</a></p>
<p>It seems like primarily <code>-C</code> remains a problem and I totally agree with
the goal that automated recovery should also work for <code>-C</code> users. My
suggestion would be to use <code>CONFIG_APPEND_FILES_PATHS</code> in order to set
<code>CONFIG_APPEND_FILES</code> in <code>rescue.conf</code> to again load the same files that
<strong>had been loaded successfully</strong> and do that during the <code>rescue</code> stage.
That way this will only happen for ReaR runs that actually generate a
rescue image and not for others.</p>
<p>I can code that up quickly if we agree on the concept.</p>
<h4 id="jsmeix_commented_at_2023-02-22_0908"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2942#issuecomment-1439662565">2023-02-22 09:08</a>:<a class="headerlink" href="#jsmeix_commented_at_2023-02-22_0908" title="Permanent link">&para;</a></h4>
<p>@schlomo<br />
please be patient.<br />
There is zero time pressure here.<br />
Basically nobody uses '-c' or '-C' plus<br />
'automatic/auto_recover' or 'unattended'<br />
because the current state is since it was introduced<br />
and I cannot remember any user report about it.<br />
Since a very long time I didn't use any of '-c' or '-C'<br />
or 'automatic/auto_recover' or 'unattended'.</p>
<p>I need time to understand how '-c' and '-C' behave<br />
when used with different values for different workflows, cf.<br />
<a href="https://github.com/rear/rear/issues/2936#issuecomment-1434304552">https://github.com/rear/rear/issues/2936#issuecomment-1434304552</a><br />
which is in particular how '-C' is primarily meant to be used, see<br />
<a href="https://github.com/rear/rear/blob/master/doc/user-guide/11-multiple-backups.adoc">https://github.com/rear/rear/blob/master/doc/user-guide/11-multiple-backups.adoc</a></p>
<p>Then I can make educated statements in this area<br />
and agree or disagree on your proposal.</p>
<p>It is not about quick coding.<br />
We have already way too much quickly implemented code in ReaR<br />
for limited purpose that poorly integrates with the rest of ReaR<br />
(e.g. the whole OUTPUT=USB functionality is an endless annoyance).</p>
<h4 id="jsmeix_commented_at_2023-02-23_1241"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2942#issuecomment-1441705014">2023-02-23 12:41</a>:<a class="headerlink" href="#jsmeix_commented_at_2023-02-23_1241" title="Permanent link">&para;</a></h4>
<p>The primary use case for '-C' as described in<br />
<a href="https://github.com/rear/rear/blob/master/doc/user-guide/11-multiple-backups.adoc">https://github.com/rear/rear/blob/master/doc/user-guide/11-multiple-backups.adoc</a><br />
is to specify things in</p>
<pre><code>/etc/rear/local.conf
/etc/rear/basic_system.conf
/etc/rear/home_backup.conf
/etc/rear/opt_backup.conf
</code></pre>
<p>then run on the original system</p>
<pre><code># rear mkrescue
# rear -C basic_system mkbackuponly
# rear -C home_backup mkbackuponly
# rear -C opt_backup mkbackuponly
</code></pre>
<p>and to recreate that on replacement hardware<br />
run there in the ReaR recovery system</p>
<pre><code># rear -C basic_system recover
# rear -C home_backup restoreonly
# rear -C opt_backup restoreonly
</code></pre>
<p>Currently I have no idea how to automatically<br />
run those commands in the ReaR recovery system<br />
i.e. how to automatically find out<br />
while on the original system plain</p>
<pre><code># rear mkrescue
</code></pre>
<p>is run (which is the only comand that creates<br />
or that can modify the ReaR recovery system)<br />
that later for disaster recovery<br />
in the ReaR recovery system something like</p>
<pre><code># rear -C basic_system recover &amp;&amp; rear -C home_backup restoreonly &amp;&amp; rear -C opt_backup restoreonly
</code></pre>
<p>should be run.</p>
<h4 id="jsmeix_commented_at_2023-02-23_1249"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2942#issuecomment-1441716696">2023-02-23 12:49</a>:<a class="headerlink" href="#jsmeix_commented_at_2023-02-23_1249" title="Permanent link">&para;</a></h4>
<p>@schlomo<br />
I think why your proposal<br />
<a href="https://github.com/rear/rear/issues/2942#issuecomment-1439021298">https://github.com/rear/rear/issues/2942#issuecomment-1439021298</a><br />
cannot work in general is that according to your</p>
<pre><code>again load the same files that had been loaded successfully
</code></pre>
<p>it seems you implicitly assume there is always<br />
a single recovery command (usually 'rear recover')<br />
to recreate a system so it would be sufficient to<br />
source (actually there is no such thing as 'load' a config file)<br />
a single sequence of config files during recovery.</p>
<h4 id="jsmeix_commented_at_2023-02-23_1255"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2942#issuecomment-1441725396">2023-02-23 12:55</a>:<a class="headerlink" href="#jsmeix_commented_at_2023-02-23_1255" title="Permanent link">&para;</a></h4>
<p>I have an idea how to make a sequence of recovery commands<br />
possible with 'automatic/auto_recover' and 'unattended' modes<br />
but that won't happen automatically but must be setup manually<br />
by the user.</p>
<p>My reasoning is:<br />
The (experienced) user who set up the "mkbackup" procedure<br />
knows what sequence of recovery commands (with right options)<br />
are needed to recreate things properly so he can manually<br />
specify the right sequence of recovery commands.<br />
Then even an unexperienced user can do the recovery.</p>
<h4 id="jsmeix_commented_at_2023-03-01_1328"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2942#issuecomment-1450156152">2023-03-01 13:28</a>:<a class="headerlink" href="#jsmeix_commented_at_2023-03-01_1328" title="Permanent link">&para;</a></h4>
<p>Mainly for my own information:</p>
<p>How to wait for several simultaneously running background jobs<br />
and show some info what happened to them:</p>
<pre><code># ( sleep 1 ; echo 1 started ; sleep 9 ; echo 1 succeeded ) &amp; \
  ( sleep 2 ; echo 2 started ; sleep 6 ; echo 2 failed ; exit 2 ) &amp; \
  ( sleep 3 ; echo 3 started ; sleep 3 ; echo 3 failed ; exit 3 ) &amp; \
  while jobs % &amp;&gt;/dev/null ; \
  do echo waiting for a job to finish ; \
     wait -n &amp;&amp; echo a job succeeded || echo a job failed with $? ; \
  done ; \
  echo all finished

[1] 27123
[2] 27124
[3] 27125
waiting for a job to finish
1 started
2 started
3 started
3 failed
[3]+  Exit 3                  ( sleep 3; echo 3 started; sleep 3; echo 3 failed; exit 3 )
a job failed with 3
waiting for a job to finish
2 failed
[2]+  Exit 2                  ( sleep 2; echo 2 started; sleep 6; echo 2 failed; exit 2 )
a job failed with 2
waiting for a job to finish
1 succeeded
[1]+  Done                    ( sleep 1; echo 1 started; sleep 9; echo 1 succeeded )
a job succeeded
all finished
</code></pre>
<p>So the above shown recovery command</p>
<pre><code># rear -C basic_system recover &amp;&amp; \
  rear -C home_backup restoreonly &amp;&amp; \
  rear -C opt_backup restoreonly
</code></pre>
<p>could be run with the two 'restoreonly' workflows in parallel like</p>
<pre><code># if rear -C basic_system recover ; \
  then rear -C home_backup restoreonly &amp; \
       rear -C opt_backup restoreonly &amp; \
       wait ; \
  fi
</code></pre>
<p>where the plain wait for the background jobs<br />
could be generically enhanced to show some info<br />
what happened to the background jobs like</p>
<pre><code># if rear -C basic_system recover ; \
  then rear -C home_backup restoreonly &amp; \
       rear -C opt_backup restoreonly &amp; \
       while jobs % &amp;&gt;/dev/null ; \
       do echo Waiting for a restoreonly workflow to finish ; \
          wait -n || echo ERROR: A restoreonly workflow failed with $? ; \
       done ; \
  fi
</code></pre>
<h4 id="github-actions_commented_at_2023-05-01_0221"><img src="https://avatars.githubusercontent.com/in/15368?v=4" width="50"><a href="https://github.com/apps/github-actions">github-actions</a> commented at <a href="https://github.com/rear/rear/issues/2942#issuecomment-1529265630">2023-05-01 02:21</a>:<a class="headerlink" href="#github-actions_commented_at_2023-05-01_0221" title="Permanent link">&para;</a></h4>
<p>Stale issue message</p>
<h4 id="github-actions_commented_at_2023-07-02_0252"><img src="https://avatars.githubusercontent.com/in/15368?v=4" width="50"><a href="https://github.com/apps/github-actions">github-actions</a> commented at <a href="https://github.com/rear/rear/issues/2942#issuecomment-1616317485">2023-07-02 02:52</a>:<a class="headerlink" href="#github-actions_commented_at_2023-07-02_0252" title="Permanent link">&para;</a></h4>
<p>Stale issue message</p>
<h4 id="github-actions_commented_at_2023-09-02_0159"><img src="https://avatars.githubusercontent.com/in/15368?v=4" width="50"><a href="https://github.com/apps/github-actions">github-actions</a> commented at <a href="https://github.com/rear/rear/issues/2942#issuecomment-1703642582">2023-09-02 01:59</a>:<a class="headerlink" href="#github-actions_commented_at_2023-09-02_0159" title="Permanent link">&para;</a></h4>
<p>Stale issue message</p>
<h4 id="github-actions_commented_at_2023-11-04_0203"><img src="https://avatars.githubusercontent.com/in/15368?v=4" width="50"><a href="https://github.com/apps/github-actions">github-actions</a> commented at <a href="https://github.com/rear/rear/issues/2942#issuecomment-1793299424">2023-11-04 02:03</a>:<a class="headerlink" href="#github-actions_commented_at_2023-11-04_0203" title="Permanent link">&para;</a></h4>
<p>Stale issue message</p>
<h4 id="jsmeix_commented_at_2023-11-20_1246"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2942#issuecomment-1819001753">2023-11-20 12:46</a>:<a class="headerlink" href="#jsmeix_commented_at_2023-11-20_1246" title="Permanent link">&para;</a></h4>
<p>To avoid that it gets forgotten where it currently is<br />
here a copy from<br />
<a href="https://github.com/rear/rear/pull/3070#discussion_r1397363473">https://github.com/rear/rear/pull/3070#discussion_r1397363473</a></p>
<pre><code>... I am thinking about a new
RECOVERY_COMMANDS array to specify the command(s)
that should be run to recover the system
in automated or unattended modes
which is by default "rear recover".
This way the user can specify the right commands
for his particular usage of '-C'.

Automation of this might happen at a later time
(if it is possible at all) by someone who likes
to contribute it.
</code></pre>
<h4 id="jsmeix_commented_at_2023-12-06_1351"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2942#issuecomment-1842929410">2023-12-06 13:51</a>:<a class="headerlink" href="#jsmeix_commented_at_2023-12-06_1351" title="Permanent link">&para;</a></h4>
<p>I will document how to use RECOVERY_COMMANDS<br />
when '-C' is used for<br />
"Using Multiple Backups for Relax-and-Recover"<br />
<a href="https://github.com/rear/rear/blob/master/doc/user-guide/11-multiple-backups.adoc">https://github.com/rear/rear/blob/master/doc/user-guide/11-multiple-backups.adoc</a></p>
<p>Regarding '-c' see my current (mis?)understanding<br />
<a href="https://github.com/rear/rear/pull/3070#discussion_r1402057092">https://github.com/rear/rear/pull/3070#discussion_r1402057092</a></p>
<h4 id="github-actions_commented_at_2024-02-05_0207"><img src="https://avatars.githubusercontent.com/in/15368?v=4" width="50"><a href="https://github.com/apps/github-actions">github-actions</a> commented at <a href="https://github.com/rear/rear/issues/2942#issuecomment-1926097717">2024-02-05 02:07</a>:<a class="headerlink" href="#github-actions_commented_at_2024-02-05_0207" title="Permanent link">&para;</a></h4>
<p>Stale issue message</p>
<h4 id="github-actions_commented_at_2024-04-07_0206"><img src="https://avatars.githubusercontent.com/in/15368?v=4" width="50"><a href="https://github.com/apps/github-actions">github-actions</a> commented at <a href="https://github.com/rear/rear/issues/2942#issuecomment-2041276247">2024-04-07 02:06</a>:<a class="headerlink" href="#github-actions_commented_at_2024-04-07_0206" title="Permanent link">&para;</a></h4>
<p>Stale issue message</p>
<h4 id="github-actions_commented_at_2024-06-08_0211"><img src="https://avatars.githubusercontent.com/in/15368?v=4" width="50"><a href="https://github.com/apps/github-actions">github-actions</a> commented at <a href="https://github.com/rear/rear/issues/2942#issuecomment-2155759150">2024-06-08 02:11</a>:<a class="headerlink" href="#github-actions_commented_at_2024-06-08_0211" title="Permanent link">&para;</a></h4>
<p>Stale issue message</p>
<h4 id="gdha_commented_at_2024-09-05_0721"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/2942#issuecomment-2330790542">2024-09-05 07:21</a>:<a class="headerlink" href="#gdha_commented_at_2024-09-05_0721" title="Permanent link">&para;</a></h4>
<p>@jsmeix milestone is still 'ReaR v2.8' - please adjust as you think it
best fits (v3.0 or v3.1). Thanks.</p>
<h4 id="jsmeix_commented_at_2024-09-05_0753"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2942#issuecomment-2330851394">2024-09-05 07:53</a>:<a class="headerlink" href="#jsmeix_commented_at_2024-09-05_0753" title="Permanent link">&para;</a></h4>
<p>Postponed to ReaR v3.1 milestone<br />
because there is now RECOVERY_COMMANDS<br />
so the user can specify the right commands<br />
for his particular usage of '-C', cf.<br />
<a href="https://github.com/rear/rear/issues/2942#issuecomment-1819001753">https://github.com/rear/rear/issues/2942#issuecomment-1819001753</a></p>
<p>What is missing is documenation, cf.<br />
<a href="https://github.com/rear/rear/issues/2942#issuecomment-1842929410">https://github.com/rear/rear/issues/2942#issuecomment-1842929410</a><br />
so this could be done for ReaR v3.1 as time permits.</p>
<h4 id="github-actions_commented_at_2025-02-19_0235"><img src="https://avatars.githubusercontent.com/in/15368?v=4" width="50"><a href="https://github.com/apps/github-actions">github-actions</a> commented at <a href="https://github.com/rear/rear/issues/2942#issuecomment-2667370151">2025-02-19 02:35</a>:<a class="headerlink" href="#github-actions_commented_at_2025-02-19_0235" title="Permanent link">&para;</a></h4>
<p>Stale issue message</p>
<h4 id="github-actions_commented_at_2025-04-23_0251"><img src="https://avatars.githubusercontent.com/in/15368?v=4" width="50"><a href="https://github.com/apps/github-actions">github-actions</a> commented at <a href="https://github.com/rear/rear/issues/2942#issuecomment-2822926113">2025-04-23 02:51</a>:<a class="headerlink" href="#github-actions_commented_at_2025-04-23_0251" title="Permanent link">&para;</a></h4>
<p>Stale issue message</p>
<h4 id="github-actions_commented_at_2025-06-24_0307"><img src="https://avatars.githubusercontent.com/in/15368?v=4" width="50"><a href="https://github.com/apps/github-actions">github-actions</a> commented at <a href="https://github.com/rear/rear/issues/2942#issuecomment-2998638899">2025-06-24 03:07</a>:<a class="headerlink" href="#github-actions_commented_at_2025-06-24_0307" title="Permanent link">&para;</a></h4>
<p>Stale issue message</p>
<h4 id="jsmeix_commented_at_2025-07-28_0841"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2942#issuecomment-3126162113">2025-07-28 08:41</a>:<a class="headerlink" href="#jsmeix_commented_at_2025-07-28_0841" title="Permanent link">&para;</a></h4>
<p><a href="https://github.com/rear/rear/pull/3499">https://github.com/rear/rear/pull/3499</a><br />
intends to implement<br />
<a href="https://github.com/rear/rear/issues/2942#issuecomment-1842929410">https://github.com/rear/rear/issues/2942#issuecomment-1842929410</a></p>
<h4 id="jsmeix_commented_at_2025-07-29_1254"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2942#issuecomment-3132413245">2025-07-29 12:54</a>:<a class="headerlink" href="#jsmeix_commented_at_2025-07-29_1254" title="Permanent link">&para;</a></h4>
<p>With <a href="https://github.com/rear/rear/pull/3499">https://github.com/rear/rear/pull/3499</a> merged<br />
it is now described in doc/user-guide/11-multiple-backups.adoc</p>
<pre><code>How to recover with multiple backups in 'auto_recover'/'automatic' or 'unattended' mode
</code></pre>
<p>by specifying the RECOVERY_COMMANDS array, see<br />
<a href="https://github.com/rear/rear/blob/master/doc/user-guide/11-multiple-backups.adoc#how-to-recover-with-multiple-backups-in-auto_recoverautomatic-or-unattended-mode">https://github.com/rear/rear/blob/master/doc/user-guide/11-multiple-backups.adoc#how-to-recover-with-multiple-backups-in-auto_recoverautomatic-or-unattended-mode</a></p>
<h4 id="jsmeix_commented_at_2025-07-29_1257"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2942#issuecomment-3132425914">2025-07-29 12:57</a>:<a class="headerlink" href="#jsmeix_commented_at_2025-07-29_1257" title="Permanent link">&para;</a></h4>
<p>Regarding '-c' see my current understanding in<br />
<a href="https://github.com/rear/rear/pull/3070#discussion_r2238864312">https://github.com/rear/rear/pull/3070#discussion_r2238864312</a><br />
excerpts</p>
<pre><code>When a ReaR recovery system was made e.g. by

# rear -c /etc/rear_this mkbackup

then the ReaR recovery system is usually specific
for the configuration in /etc/rear_this
...

So "rear recover" only works when it is called as

# rear -c /etc/rear_this recover

but then it does not make sense to have
/etc/rear_this and /etc/rear_that
in the ReaR recovery system.

So the contents of /etc/rear_this get stored
in the ReaR recovery system in /etc/rear
and "rear recover" does not work with '-c'.

Currently it is not sufficiently documented
how '-c' is meant to work.
Additionally "rear -c DIRECTORY WORKFLOW"
should abort with a meaningful error message
for all workflows when it is run inside
the ReaR recovery system.
</code></pre>
<h4 id="jsmeix_commented_at_2025-07-29_1303"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2942#issuecomment-3132447458">2025-07-29 13:03</a>:<a class="headerlink" href="#jsmeix_commented_at_2025-07-29_1303" title="Permanent link">&para;</a></h4>
<p>I think I can implement for ReaR 3.0 the missing pieces</p>
<ul>
<li>document how '-c' is meant to work</li>
<li>abort when '-c' is used inside the ReaR recovery system</li>
</ul>
<p>so I moved the milestone from ReaR 3.1 to ReaR 3.0</p>
<h4 id="jsmeix_commented_at_2025-07-30_1456"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2942#issuecomment-3136723385">2025-07-30 14:56</a>:<a class="headerlink" href="#jsmeix_commented_at_2025-07-30_1456" title="Permanent link">&para;</a></h4>
<p><a href="https://github.com/rear/rear/pull/3500">https://github.com/rear/rear/pull/3500</a><br />
implements the above item</p>
<ul>
<li>abort when '-c' is used inside the ReaR recovery system</li>
</ul>
<h4 id="jsmeix_commented_at_2025-08-01_1041"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2942#issuecomment-3144119735">2025-08-01 10:41</a>:<a class="headerlink" href="#jsmeix_commented_at_2025-08-01_1041" title="Permanent link">&para;</a></h4>
<p>With <a href="https://github.com/rear/rear/pull/3500">https://github.com/rear/rear/pull/3500</a> merged<br />
the above item</p>
<ul>
<li>abort when '-c' is used inside the ReaR recovery system</li>
</ul>
<p>is implemented.<br />
See<br />
<a href="https://github.com/rear/rear/pull/3500#issuecomment-3143974480">https://github.com/rear/rear/pull/3500#issuecomment-3143974480</a><br />
why '-c' is not supported within the ReaR recovery system.</p>
<h4 id="jsmeix_commented_at_2025-08-01_1055"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2942#issuecomment-3144161169">2025-08-01 10:55</a>:<a class="headerlink" href="#jsmeix_commented_at_2025-08-01_1055" title="Permanent link">&para;</a></h4>
<p>Regarding the remaining item</p>
<ul>
<li>document how '-c' is meant to work</li>
</ul>
<p>While working on this issue here I did some "archaeology"<br />
to find out how '-c' is meant to work but I found nothing except<br />
<a href="https://github.com/rear/rear/issues/512#issuecomment-68051604">https://github.com/rear/rear/issues/512#issuecomment-68051604</a></p>
<p>Support for '-c' was introduced via<br />
<a href="https://github.com/rear/rear/commit/28bac7ad4e6ab67e4e955fec27fc3556082c896e">https://github.com/rear/rear/commit/28bac7ad4e6ab67e4e955fec27fc3556082c896e</a><br />
but I found nothing there which tells how '-c' is meant to work<br />
(no comment, no linked issue, no release notes entry).</p>
<p>Currently I am somewhat frustrated with '-c'<br />
so I give up here for now and close this issue<br />
because I think the current state in master code<br />
is (hopefully) sufficiently OK.</p>
<p>Perhaps over time I may get some experience how '-c' is used<br />
in practice out there by our users so that then I could<br />
learn from that how '-c' is meant to work.</p>
<h4 id="jsmeix_commented_at_2025-08-01_1112"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2942#issuecomment-3144208221">2025-08-01 11:12</a>:<a class="headerlink" href="#jsmeix_commented_at_2025-08-01_1112" title="Permanent link">&para;</a></h4>
<p>Regarding<br />
<a href="https://github.com/rear/rear/issues/512#issuecomment-68051604">https://github.com/rear/rear/issues/512#issuecomment-68051604</a><br />
the subsequent<br />
<a href="https://github.com/rear/rear/issues/512#issuecomment-75543135">https://github.com/rear/rear/issues/512#issuecomment-75543135</a><br />
"added to the release notes"<br />
happened here in the GitHub 'rear/rear' repository via<br />
<a href="https://github.com/rear/rear/commit/86009877e7ae15d768d9eb3b6d0e660118dfdf42">https://github.com/rear/rear/commit/86009877e7ae15d768d9eb3b6d0e660118dfdf42</a><br />
where this part was added to ReaR 1.17.0 doc/rear-release-notes.txt</p>
<pre><code>Using rear -v -c /etc/rear/mydir mkbackup works fine in production,
but when you try (once booted from rescue image)
rear -v -c /etc/rear/mydir recover it will fail.

  â€¢ Workaround:

The configuration files are copied to /etc/rear/ into the rescue image,
so you simply need to type: rear -v recover
See issue #512
</code></pre>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2025 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2023-02-21.2942.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
