<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#2712 Issue closed: Restore boots to prompt instead of coming up with menu - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#2712 Issue closed: Restore boots to prompt instead of coming up with menu";
        var mkdocs_page_input_path = "issues/2021-11-15.2712.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#2712 Issue closed: Restore boots to prompt instead of coming up with menu</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="2712_issue_closed_restore_boots_to_prompt_instead_of_coming_up_with_menu"><a href="https://github.com/rear/rear/issues/2712">#2712 Issue</a> <code>closed</code>: Restore boots to prompt instead of coming up with menu<a class="headerlink" href="#2712_issue_closed_restore_boots_to_prompt_instead_of_coming_up_with_menu" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>support / question</code>, <code>needs sponsorship</code></p>
<h4 id="exedor_opened_issue_at_2021-11-15_2355"><img src="https://avatars.githubusercontent.com/u/6391864?u=f29593e509021c433bdf23c37efbe71f8ced8a6e&v=4" width="50"><a href="https://github.com/exedor">exedor</a> opened issue at <a href="https://github.com/rear/rear/issues/2712">2021-11-15 23:55</a>:<a class="headerlink" href="#exedor_opened_issue_at_2021-11-15_2355" title="Permanent link">&para;</a></h4>
<h4 id="relax-and-recover_rear_issue_template">Relax-and-Recover (ReaR) Issue Template<a class="headerlink" href="#relax-and-recover_rear_issue_template" title="Permanent link">&para;</a></h4>
<p>Fill in the following items before submitting a new issue<br />
(quick response is not guaranteed with free support):</p>
<ul>
<li>
<p>ReaR version ("/usr/sbin/rear -V"):<br />
    2.6 / 2020-06-17</p>
</li>
<li>
<p>OS version ("cat /etc/os-release" or "lsb_release -a" or "cat
    /etc/rear/os.conf"):<br />
    Fedora 34</p>
</li>
<li>
<p>ReaR configuration files ("cat /etc/rear/site.conf" and/or "cat
    /etc/rear/local.conf"):</p>
</li>
</ul>
<!-- -->

<pre><code>OUTPUT=ISO
BACKUP=NETFS
BACKUP_URL=iso:///backup
OUTPUT_URL=null
ISO_DIR=/home/sim/release-1-9-43/devel/install/images/
ISO_MAX_SIZE=4400
</code></pre>
<ul>
<li>
<p>Hardware vendor/product (PC or PowerNV BareMetal or ARM) or VM (KVM
    guest or PowerVM LPAR):<br />
    PC</p>
</li>
<li>
<p>System architecture (x86 compatible or PPC64/PPC64LE or what exact
    ARM device):<br />
    x86_64</p>
</li>
<li>
<p>Firmware (BIOS or UEFI or Open Firmware) and bootloader (GRUB or
    ELILO or Petitboot):<br />
    UEFI</p>
</li>
<li>
<p>Storage (local disk or SSD) and/or SAN (FC or iSCSI or FCoE) and/or
    multipath (DM or NVMe):<br />
    SSD</p>
</li>
<li>
<p>Storage layout ("lsblk -ipo
    NAME,KNAME,PKNAME,TRAN,TYPE,FSTYPE,SIZE,MOUNTPOINT"):</p>
</li>
</ul>
<!-- -->

<pre><code>/dev/sda                             8:0    0 74.5G  0 disk
|-/dev/sda1                          8:1    0  600M  0 part /boot/efi
|-/dev/sda2                          8:2    0    1G  0 part /boot
`-/dev/sda3                          8:3    0 72.9G  0 part
  `-/dev/mapper/fedora_fedora-root 253:0    0   15G  0 lvm  /
/dev/sdb                             8:16   1 14.4G  0 disk
`-/dev/sdb1                          8:17   1 14.4G  0 part
/dev/zram0                         252:0    0  3.7G  0 disk [SWAP]
</code></pre>
<ul>
<li>
<p>Description of the issue (ideally so that others can reproduce
    it):<br />
    ISO image is created. I write it a USB stick with
    <code>dd if=&lt;image_file&gt; of=/dev/sdb</code><br />
    I need these ISO images stored and shared via cloud storage so
    writing directly to USB doesn't help,<br />
    in case anyone was wondering. The image gets written to the USB
    drive and the USB drive is bootable,<br />
    but it just boots to a prompt. I can login as root without a
    password and then manually start a restore<br />
    but I've always seen a menu come up that shows the backups and the
    option for automated<br />
    (well sort of) restore. I'm wondering what I'm doing or have done
    that is causing this behavior.</p>
</li>
<li>
<p>Workaround, if any:</p>
</li>
<li>
<p>Attachments, as applicable ("rear -D mkrescue/mkbackup/recover"
    debug log files):</p>
</li>
</ul>
<p><a href="https://github.com/rear/rear/files/7542297/rear-fedora.log">rear-fedora.log</a></p>
<h4 id="jsmeix_commented_at_2021-11-17_1223"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2712#issuecomment-971530186">2021-11-17 12:23</a>:<a class="headerlink" href="#jsmeix_commented_at_2021-11-17_1223" title="Permanent link">&para;</a></h4>
<p>@exedor<br />
I think in general it does not work<br />
(or when something works it is more by luck)<br />
to plain write an 'OUTPUT=ISO' image with 'dd' onto a disk,<br />
see
<a href="https://github.com/rear/rear/issues/2210">https://github.com/rear/rear/issues/2210</a><br />
and
<a href="https://github.com/rear/rear/issues/2668">https://github.com/rear/rear/issues/2668</a><br />
in the latter see in particular<br />
<a href="https://github.com/rear/rear/issues/2668#issuecomment-899985890">https://github.com/rear/rear/issues/2668#issuecomment-899985890</a></p>
<p>Alternatively you may have a look at the OUTPUT=RAWDISK method,<br />
see usr/share/rear/conf/default.conf and<br />
<a href="https://github.com/rear/rear/blob/master/doc/user-guide/13-tcg-opal-support.adoc">https://github.com/rear/rear/blob/master/doc/user-guide/13-tcg-opal-support.adoc</a></p>
<p>Furthermore when you use UEFI you may need something like</p>
<pre><code>ISO_MKISOFS_BIN=/usr/bin/ebiso
</code></pre>
<p>i.e. specify the right tool that makes an UEFI bootable ISO image,<br />
see usr/share/rear/conf/default.conf and<br />
<a href="https://github.com/rear/rear/blob/master/usr/share/rear/conf/examples/SLE11-SLE12-SAP-HANA-UEFI-example.conf">https://github.com/rear/rear/blob/master/usr/share/rear/conf/examples/SLE11-SLE12-SAP-HANA-UEFI-example.conf</a></p>
<h4 id="exedor_commented_at_2021-12-02_0543"><img src="https://avatars.githubusercontent.com/u/6391864?u=f29593e509021c433bdf23c37efbe71f8ced8a6e&v=4" width="50"><a href="https://github.com/exedor">exedor</a> commented at <a href="https://github.com/rear/rear/issues/2712#issuecomment-984311922">2021-12-02 05:43</a>:<a class="headerlink" href="#exedor_commented_at_2021-12-02_0543" title="Permanent link">&para;</a></h4>
<p>Well I get identical behavior when using the UEFI backup. If I backup
direct to USB and then boot the USB, the same thing happens. The system
being used to test restore, boots to a login prompt. I can enter root as
the username and then I get a prompt telling me I can run rear recover.
Sure, after I do that manually, it starts to look like it did before.
All of this was automated with a nice menu previously. What happened to
that? I'm getting identical behavior between the USB boot and the ISO
boot burnt to DVD.</p>
<h4 id="github-actions_commented_at_2022-02-01_0212"><img src="https://avatars.githubusercontent.com/in/15368?v=4" width="50"><a href="https://github.com/apps/github-actions">github-actions</a> commented at <a href="https://github.com/rear/rear/issues/2712#issuecomment-1026412853">2022-02-01 02:12</a>:<a class="headerlink" href="#github-actions_commented_at_2022-02-01_0212" title="Permanent link">&para;</a></h4>
<p>Stale issue message</p>
<h4 id="pcahyna_commented_at_2022-02-01_1011"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2712#issuecomment-1026674509">2022-02-01 10:11</a>:<a class="headerlink" href="#pcahyna_commented_at_2022-02-01_1011" title="Permanent link">&para;</a></h4>
<p>I believe it depends on whether the rescue image uses SYSLINUX or GRUB
as bootloader. The menu is a feature of SYSLINUX only. And UEFI boot
uses GRUB. I would also like to have the UX more unified (although the
UI will probably not be the exactly the same).</p>
<h4 id="exedor_commented_at_2022-02-01_1614"><img src="https://avatars.githubusercontent.com/u/6391864?u=f29593e509021c433bdf23c37efbe71f8ced8a6e&v=4" width="50"><a href="https://github.com/exedor">exedor</a> commented at <a href="https://github.com/rear/rear/issues/2712#issuecomment-1027018953">2022-02-01 16:14</a>:<a class="headerlink" href="#exedor_commented_at_2022-02-01_1614" title="Permanent link">&para;</a></h4>
<p>Ahhhhh, that makes sense! Our use case is one in which I create the
backups and a much less technical user does the restores on a very
regular basis. I've already returned to the BIOS boot and OS install to
overcome this, and other issues but that is extremely helpful. Thank
you!!!! I agree, the UI should be unified. Perhaps at some point, I'll
be able to give back to this project as much as I've given.</p>
<h4 id="jsmeix_commented_at_2022-02-02_0812"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2712#issuecomment-1027682583">2022-02-02 08:12</a>:<a class="headerlink" href="#jsmeix_commented_at_2022-02-02_0812" title="Permanent link">&para;</a></h4>
<p>@pcahyna<br />
thank you for you analysis!</p>
<p>We have too many different boot methods for the ReaR recovery system<br />
which should be unified and cleaned up, cf.<br />
<a href="https://github.com/rear/rear/issues/764">https://github.com/rear/rear/issues/764</a></p>
<p>The current state was provided by various contributors to ReaR over a
long time<br />
and we at ReaR upstream will likely not find the time to unify and clean
up all that<br />
at least not as far as I see in the foreseeable future, e.g. see<br />
<a href="https://github.com/rear/rear/issues/2391">https://github.com/rear/rear/issues/2391</a></p>
<p>I remember that I had tested OUTPUT=USB with BIOS and GRUB2 as
bootloader<br />
and I had a menue there but there are still some enhancements needed
there, cf.<br />
<a href="https://github.com/rear/rear/issues/2666">https://github.com/rear/rear/issues/2666</a></p>
<p>I never tested OUTPUT=USB with UEFI - see also<br />
<a href="https://github.com/rear/rear/issues/2648">https://github.com/rear/rear/issues/2648</a></p>
<p>This issue here is about OUTPUT=ISO with UEFI where the bootloader
setup<br />
of the ReaR recovery system is impemented separated and different<br />
than for OUTPUT=USB.</p>
<p>Additionally ("tertium datur" - always - sigh!) we have the bootloader
setup<br />
of the ReaR recovery system in case of GRUB_RESCUE=y - see<br />
<a href="https://github.com/rear/rear/issues/2545">https://github.com/rear/rear/issues/2545</a></p>
<h4 id="pcahyna_commented_at_2022-02-09_2233"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/2712#issuecomment-1034267309">2022-02-09 22:33</a>:<a class="headerlink" href="#pcahyna_commented_at_2022-02-09_2233" title="Permanent link">&para;</a></h4>
<p>Of course the SYSLINUX menu is useful for a "less technical user", but
the usefulness goes far beyond that. One is then able to select what
entry should be the default in the menu when booting the rescue image
via a variable like <code>ISO_DEFAULT="automatic"</code>, which is very useful in
an automated setting. And because of the boot method differences, this
does not always work (there is no matching <code>USB_DEFAULT</code>, and
<code>ISO_DEFAULT</code> works in SYSLINUX only, so not with UEFI or PowerPC
OpenFirmware). Although the integration of this kind of boot parameter
with the menu is an implementation choice, and arguably could be done
even without the menu support, but that's how it is currently done.</p>
<p>@antonvoznia here's a ToDo for you: implement <code>ISO_DEFAULT</code> also for
GRUB, and corresponding *_DEFAULT options for other boot methods (at
least, USB). Perhaps via adding menu support to GRUB at the same time.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2024 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2021-11-15.2712.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
