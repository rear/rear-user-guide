<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#626 Issue closed: module scsi_debug auto load at rhel 7.1 - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#626 Issue closed: module scsi_debug auto load at rhel 7.1";
        var mkdocs_page_input_path = "issues/2015-07-25.626.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_nas.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../development/squash-git-log-commments.html">How to squash git log comments into one line</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#626 Issue closed: module scsi_debug auto load at rhel 7.1</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="626_issue_closed_module_scsi_debug_auto_load_at_rhel_71"><a href="https://github.com/rear/rear/issues/626">#626 Issue</a> <code>closed</code>: module scsi_debug auto load at rhel 7.1<a class="headerlink" href="#626_issue_closed_module_scsi_debug_auto_load_at_rhel_71" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>support / question</code>, <code>fixed / solved / done</code></p>
<h4 id="tbsky_opened_issue_at_2015-07-25_0858"><img src="https://avatars.githubusercontent.com/u/9283275?v=4" width="50"><a href="https://github.com/tbsky">tbsky</a> opened issue at <a href="https://github.com/rear/rear/issues/626">2015-07-25 08:58</a>:<a class="headerlink" href="#tbsky_opened_issue_at_2015-07-25_0858" title="Permanent link">&para;</a></h4>
<p>hi:<br />
the situation comes with rhel 7.1 (or rhel 7.0 with recent updates).
rear will load "scsi_debug" module automatically when restore. and that
module will create a 8MB /sev/sda. the restore procedure will have
trouble if the original system also have harddisk named /dev/sda.</p>
<p>I now use "EXCLUDE_MODULES" to exclude it. but I think maybe we can
exclude it globally. I saw "scsi_debug" module at thel 6.6 also, but
rear under rhel 6.6 won't auto load it, I don't know why rear under rhel
7.1 load it automatically.</p>
<h4 id="jsmeix_commented_at_2015-07-27_0830"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/626#issuecomment-125125263">2015-07-27 08:30</a>:<a class="headerlink" href="#jsmeix_commented_at_2015-07-27_0830" title="Permanent link">&para;</a></h4>
<p>I had this issue some time ago on a Suse Linux machine (I guess it was a
SLES11 system but I don't remember well).</p>
<p>But it happened only on one particular laptop that I used for a test. It
did not happen in general.</p>
<p>In gereral I noticed at that time that in the rear recovery system I had
more than 100 kernel modules loaded while in my original system I had
something about 40 kernel modules loaded.</p>
<p>From my point of view this indicates that there is something wrong in
general in the rear recovery system that it has much more kernel modules
loaded than in the original system - I guess it is something in udev
(nowadays included in systemd).</p>
<p>My generic workaround is the following (that helped me in the past for
any kind of wrong kernel modules in the rear recovery system) in
/etc/rear/local.conf:</p>
<pre>
# Have all modules of the original system also in the recovery system
# using the output of lsmod | tail -n +2 | cut -d ' ' -f 1 | tac | tr -s '[:space:]' ' '
MODULES_LOAD=( ... )
</pre>

<p>I.e. I run in the original system</p>
<pre>
lsmod | tail -n +2 | cut -d ' ' -f 1 | tac | tr -s '[:space:]' ' '
</pre>

<p>and have that output as value for MODULES_LOAD</p>
<h4 id="tbsky_commented_at_2015-07-27_0903"><img src="https://avatars.githubusercontent.com/u/9283275?v=4" width="50"><a href="https://github.com/tbsky">tbsky</a> commented at <a href="https://github.com/rear/rear/issues/626#issuecomment-125135692">2015-07-27 09:03</a>:<a class="headerlink" href="#tbsky_commented_at_2015-07-27_0903" title="Permanent link">&para;</a></h4>
<p>hi jsmeix:</p>
<p>thanks for your hint! yes it is something related to systemd-udev. I
don't mind if there are many modules loaded when recovery. but this
module prevent the recovery process.</p>
<p>I saw commit which may fix the systemd-udev problem. this issue maybe
fixed also. I prefer my recovery media to have many modules in case I
need to restore the system in different hardware..</p>
<h4 id="jsmeix_commented_at_2015-07-27_0941"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/626#issuecomment-125147604">2015-07-27 09:41</a>:<a class="headerlink" href="#jsmeix_commented_at_2015-07-27_0941" title="Permanent link">&para;</a></h4>
<p>I feel at least a bit usafe when the recovery system has different
kernel modules loaded than the original system.</p>
<p>Perhaps for "normal recovery cases" it could be a safe default to load
only those kernel modules that have been loaded in the original system?</p>
<p>With "normal recovery case" I mean that the hardware where recovery
happens is fully compatible with the hardware of the original system.</p>
<p>With "fully compatible hardware" I mean that same kernel modules will
work (e.g. one cannot have a replacement NIC in the recovery hardware
that needs a different kernel module).</p>
<p>Obviously this restricts on what hardware recovery can work but on the
other hand it could make recovery on fully compatible hardware work more
reliably.</p>
<p>I assume the basic question is what the default use-case is for rear.</p>
<p>Recovery on same or fully compatible replacement hardware or recovery on
"sufficiently similar" replacement hardware?</p>
<p>In the latter case one would need to define what "sufficiently similar"
actually means.</p>
<p>For example replacing a single harddisk with another single harddisk
with at least the original size could be sufficiently similar but
replacing one traditional spinning 1TB harddisk with two SSDs where each
SSD has 600GB is probably not sufficiently similar.</p>
<h4 id="gdha_commented_at_2015-08-10_1454"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/626#issuecomment-129481139">2015-08-10 14:54</a>:<a class="headerlink" href="#gdha_commented_at_2015-08-10_1454" title="Permanent link">&para;</a></h4>
<p>According
<a href="http://sg.danny.cz/sg/sdebug26.html">http://sg.danny.cz/sg/sdebug26.html</a>
it seems safe to exclude the scsi_debug module in recovery mode.</p>
<h4 id="gdha_commented_at_2015-11-04_0929"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/626#issuecomment-153654859">2015-11-04 09:29</a>:<a class="headerlink" href="#gdha_commented_at_2015-11-04_0929" title="Permanent link">&para;</a></h4>
<p>@tbsky Could you see what the effect is of the new script?</p>
<h4 id="tbsky_commented_at_2015-11-04_0953"><img src="https://avatars.githubusercontent.com/u/9283275?v=4" width="50"><a href="https://github.com/tbsky">tbsky</a> commented at <a href="https://github.com/rear/rear/issues/626#issuecomment-153664454">2015-11-04 09:53</a>:<a class="headerlink" href="#tbsky_commented_at_2015-11-04_0953" title="Permanent link">&para;</a></h4>
<p>hi:<br />
the scripts seems try to unload scsi_debug if it is loaded? I have not
test it, but it seems too late to unload unless the script can unload
the module before loading real harddisk.</p>
<p>since the major problem of this module is it will occupy /dev/sda, so
the real harddisk will become /dev/sdb. even the module is unloaded, I
think the real harddisk will still remain /dev/sdb.</p>
<p>I now just exclude the module so it won't copy to recovery image hence
it has no chance to load..</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2025 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2015-07-25.626.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
