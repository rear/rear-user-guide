<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#3313 Issue closed: testing-farm:fedora-39-x86_64 issue with the backup &amp; recovery tests - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#3313 Issue closed: testing-farm:fedora-39-x86_64 issue with the backup \u0026amp; recovery tests";
        var mkdocs_page_input_path = "issues/2024-09-06.3313.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#3313 Issue closed: testing-farm:fedora-39-x86_64 issue with the backup &amp; recovery tests</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="3313_issue_closed_testing-farmfedora-39-x86_64_issue_with_the_backup_recovery_tests"><a href="https://github.com/rear/rear/issues/3313">#3313 Issue</a> <code>closed</code>: testing-farm:fedora-39-x86_64 issue with the backup &amp; recovery tests<a class="headerlink" href="#3313_issue_closed_testing-farmfedora-39-x86_64_issue_with_the_backup_recovery_tests" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>ReaR Project</code></p>
<h4 id="gdha_opened_issue_at_2024-09-06_1358"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> opened issue at <a href="https://github.com/rear/rear/issues/3313">2024-09-06 13:58</a>:<a class="headerlink" href="#gdha_opened_issue_at_2024-09-06_1358" title="Permanent link">&para;</a></h4>
<!-- Relax-and-Recover (ReaR) Issue Template
Fill in the following items when submitting a new issue.
Use GitHub Markdown, see "Basic writing and formatting syntax" on
https://docs.github.com/en/get-started/writing-on-github
Support is voluntary without guarantee/warranty/liability -->

<ul>
<li>
<p>ReaR version ("/usr/sbin/rear -V"): master branch</p>
</li>
<li>
<p>OS version ("cat /etc/os-release" or "lsb_release -a" or "cat
    /etc/rear/os.conf"): Fedora 39</p>
</li>
<li>
<p>ReaR configuration files ("cat /etc/rear/site.conf" and/or "cat
    /etc/rear/local.conf"):</p>
</li>
</ul>
<!-- -->

<pre><code>OUTPUT=ISO
SSH_FILES=no
FIRMWARE_FILES=( no )
BACKUP=NETFS
BACKUP_URL=iso:///backup
OUTPUT_URL=null
USER_INPUT_TIMEOUT=10
# 4gb backup limit
PRE_RECOVERY_SCRIPT=("mkdir /tmp/mnt;" "mount /dev/nvme0n1p5 -o subvol=/root /tmp/mnt/;" "modprobe brd rd_nr=1 rd_size=2097152;" "dd if=/tmp/mnt/var/lib/rear/output/rear-ip-172-31-31-150.iso of=/dev/ram0;" "umount /tmp/mnt/;")
ISO_FILE_SIZE_LIMIT=4294967296
ISO_DEFAULT=automatic
ISO_RECOVER_MODE=unattended
</code></pre>
<ul>
<li>
<p>Hardware vendor/product (PC or PowerNV BareMetal or ARM) or VM (KVM
    guest or PowerVM LPAR): vm</p>
</li>
<li>
<p>System architecture (x86 compatible or PPC64/PPC64LE or what exact
    ARM device): x86_64</p>
</li>
<li>
<p>Firmware (BIOS or UEFI or Open Firmware) and bootloader (GRUB or
    ELILO or Petitboot): UEFI</p>
</li>
<li>
<p>Storage (local disk or SSD) and/or SAN (FC or iSCSI or FCoE) and/or
    multipath (DM or NVMe): <code>nvme0n1</code></p>
</li>
<li>
<p>Storage layout ("lsblk -ipo
    NAME,KNAME,PKNAME,TRAN,TYPE,FSTYPE,LABEL,SIZE,MOUNTPOINT"):</p>
</li>
</ul>
<!-- -->

<pre><code>NAME        MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
zram0       252:0    0  3.7G  0 disk [SWAP]
nvme0n1     259:0    0  100G  0 disk 
├─nvme0n1p1 259:1    0    1M  0 part 
├─nvme0n1p2 259:2    0 1000M  0 part /boot
├─nvme0n1p3 259:3    0  100M  0 part /boot/efi
├─nvme0n1p4 259:4    0    4M  0 part 
└─nvme0n1p5 259:5    0 98.9G  0 part /home
                                     /
</code></pre>
<ul>
<li>
<p>Description of the issue (ideally so that others can reproduce it):
    See log file of failed test
    <a href="https://artifacts.dev.testing-farm.io/65b3200a-9a0f-43fe-96f1-9e3131bbe274/">https://artifacts.dev.testing-farm.io/65b3200a-9a0f-43fe-96f1-9e3131bbe274/</a></p>
</li>
<li>
<p>Workaround, if any: please have package <code>grub2-efi-x64-modules</code>
    installed on the test Fedora VM prior of running ReaR<br />
    As @pcahyna is a RH person I assign this issue directly to you.</p>
</li>
</ul>
<h4 id="pcahyna_commented_at_2024-09-06_1558"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/3313#issuecomment-2334367356">2024-09-06 15:58</a>:<a class="headerlink" href="#pcahyna_commented_at_2024-09-06_1558" title="Permanent link">&para;</a></h4>
<p>@gdha if the Fedora test VMs switched to UEFI, there is no way to make
the tests work in them. I need to find a way to switch the VMs to BIOS
booting instead.</p>
<h4 id="lzaoral_commented_at_2024-09-06_1738"><img src="https://avatars.githubusercontent.com/u/48823770?v=4" width="50"><a href="https://github.com/lzaoral">lzaoral</a> commented at <a href="https://github.com/rear/rear/issues/3313#issuecomment-2334528216">2024-09-06 17:38</a>:<a class="headerlink" href="#lzaoral_commented_at_2024-09-06_1738" title="Permanent link">&para;</a></h4>
<p>@pcahyna It is possible to schedule TF tests both for BIOS and UEFI? It
shouldn't be that hard to extend the current tests and <code>rear</code> combined
with EFI isn't that uncommon set-up. GRUB2 is able to mount ISO images
and chainload EFI executables (hopefully, that is enough to simulate
real EFI environment):
<a href="https://wiki.gentoo.org/wiki/GRUB/Chainloading#Dual-booting_Windows_on_UEFI_with_GPT">https://wiki.gentoo.org/wiki/GRUB/Chainloading#Dual-booting_Windows_on_UEFI_with_GPT</a>
What do you think about this idea?</p>
<h4 id="pcahyna_commented_at_2024-09-06_1820"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/3313#issuecomment-2334594911">2024-09-06 18:20</a>:<a class="headerlink" href="#pcahyna_commented_at_2024-09-06_1820" title="Permanent link">&para;</a></h4>
<p>@lzaoral</p>
<blockquote>
<p>It is possible to schedule TF tests both for BIOS and UEFI?</p>
</blockquote>
<p>I am trying to do BIOS in #3314 , so far no luck. I suppose one can
find a way to test with UEFI, but this would require some new test
development and I would like to fix the current test runs first.</p>
<h4 id="pcahyna_commented_at_2024-09-09_1803"><img src="https://avatars.githubusercontent.com/u/26300485?u=9105d243bc9f7ade463a3e52e8dd13fa67837158&v=4" width="50"><a href="https://github.com/pcahyna">pcahyna</a> commented at <a href="https://github.com/rear/rear/issues/3313#issuecomment-2338763441">2024-09-09 18:03</a>:<a class="headerlink" href="#pcahyna_commented_at_2024-09-09_1803" title="Permanent link">&para;</a></h4>
<p>As there is apparently no way currently to tell the infrastructure to
give the test the environment that it needs, I am going to disable the
problematic test (#3317) . I also plan to merge the change in
configuration that requests BIOS (
<a href="https://github.com/rear/rear/pull/3314">https://github.com/rear/rear/pull/3314</a>
). It does not do anything yet, but it will make the tests ready when
Testing Farm is enhanced to support that, plus it does not hurt to be
more explicit about what the tests need.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2024 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2024-09-06.3313.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
