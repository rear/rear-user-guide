<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#1699 Issue closed: Rear with Borg - no umask variable. - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#1699 Issue closed: Rear with Borg - no umask variable.";
        var mkdocs_page_input_path = "issues/2018-01-21.1699.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#1699 Issue closed: Rear with Borg - no umask variable.</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="1699_issue_closed_rear_with_borg_-_no_umask_variable"><a href="https://github.com/rear/rear/issues/1699">#1699 Issue</a> <code>closed</code>: Rear with Borg - no umask variable.<a class="headerlink" href="#1699_issue_closed_rear_with_borg_-_no_umask_variable" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>fixed / solved / done</code></p>
<h4 id="pavl00_opened_issue_at_2018-01-21_2213"><img src="https://avatars.githubusercontent.com/u/15629355?v=4" width="50"><a href="https://github.com/pavl00">pavl00</a> opened issue at <a href="https://github.com/rear/rear/issues/1699">2018-01-21 22:13</a>:<a class="headerlink" href="#pavl00_opened_issue_at_2018-01-21_2213" title="Permanent link">&para;</a></h4>
<p>Relax-and-Recover 2.3 / 2017-12-20<br />
borg 1.1.4</p>
<p>When using Borg there is no option to set umask variable.<br />
Default it is 077, so there is a problem when few users try use one borg
repository.</p>
<p>To resolve this issue:<br />
add new variable: BORGBACKUP_UMASK<br />
and set it correctly in borg_set_vars function.</p>
<h4 id="gozora_commented_at_2018-01-22_0743"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1699#issuecomment-359346978">2018-01-22 07:43</a>:<a class="headerlink" href="#gozora_commented_at_2018-01-22_0743" title="Permanent link">&para;</a></h4>
<p>Just a guess, but did you try to set <em>umask</em> in your <em>local.conf</em> ?</p>
<p>V.</p>
<h4 id="pavl00_commented_at_2018-01-22_0821"><img src="https://avatars.githubusercontent.com/u/15629355?v=4" width="50"><a href="https://github.com/pavl00">pavl00</a> commented at <a href="https://github.com/rear/rear/issues/1699#issuecomment-359353524">2018-01-22 08:21</a>:<a class="headerlink" href="#pavl00_commented_at_2018-01-22_0821" title="Permanent link">&para;</a></h4>
<p>Yes. I tried to set BORGBACKUP_UMASK="0007" and a few more combinations
(including system environment variables) but I see that rear uses only a
few BORGBACKUP_XXX variables to compose borg command line options.<br />
When borg is run without --umask option it uses default 077 and moreover
it is passing it to borge serve (if run through ssh). And it doesn't
matter if borg backup repository was created with different umask</p>
<h4 id="gozora_commented_at_2018-01-22_0857"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1699#issuecomment-359360651">2018-01-22 08:57</a>:<a class="headerlink" href="#gozora_commented_at_2018-01-22_0857" title="Permanent link">&para;</a></h4>
<p>OK, I see your point now.<br />
I'll write a patch for this.</p>
<p>V.</p>
<h4 id="gozora_commented_at_2018-01-22_1832"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1699#issuecomment-359519945">2018-01-22 18:32</a>:<a class="headerlink" href="#gozora_commented_at_2018-01-22_1832" title="Permanent link">&para;</a></h4>
<p>@pavl00 feel free to test
<a href="https://github.com/gozora/rear/tree/borg_umask">https://github.com/gozora/rear/tree/borg_umask</a>,
for changes related to Borg umask ...</p>
<p>If there will be no objections, this code will be merged in couple of
days into ReaRs upstream.</p>
<p>V.</p>
<h4 id="pavl00_commented_at_2018-01-22_2349"><img src="https://avatars.githubusercontent.com/u/15629355?v=4" width="50"><a href="https://github.com/pavl00">pavl00</a> commented at <a href="https://github.com/rear/rear/issues/1699#issuecomment-359614140">2018-01-22 23:49</a>:<a class="headerlink" href="#pavl00_commented_at_2018-01-22_2349" title="Permanent link">&para;</a></h4>
<p>Yes it works with borg create.<br />
But as I can see now --umask must be used in all repo related borg
commands, here in rear: create,prune, init(probably).</p>
<h4 id="gozora_commented_at_2018-01-23_0645"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1699#issuecomment-359692007">2018-01-23 06:45</a>:<a class="headerlink" href="#gozora_commented_at_2018-01-23_0645" title="Permanent link">&para;</a></h4>
<p>Hmm, I've forgotten about <code>borg prune ...</code>, thanks for reminding me!<br />
I'll add it later today.</p>
<p>V.</p>
<h4 id="gozora_commented_at_2018-01-23_1545"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1699#issuecomment-359831896">2018-01-23 15:45</a>:<a class="headerlink" href="#gozora_commented_at_2018-01-23_1545" title="Permanent link">&para;</a></h4>
<p>@pavl00 I've added <em>BORGBACKUP_UMASK</em> for <code>borg prune ...</code>.</p>
<p>I'll wait ~24 hours and do the merge, if no other issues arise.</p>
<p>V.</p>
<h4 id="pavl00_commented_at_2018-01-23_2247"><img src="https://avatars.githubusercontent.com/u/15629355?v=4" width="50"><a href="https://github.com/pavl00">pavl00</a> commented at <a href="https://github.com/rear/rear/issues/1699#issuecomment-359957984">2018-01-23 22:47</a>:<a class="headerlink" href="#pavl00_commented_at_2018-01-23_2247" title="Permanent link">&para;</a></h4>
<p>ok, it works properly now. Thanks!</p>
<h4 id="gozora_commented_at_2018-01-24_1900"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1699#issuecomment-360238295">2018-01-24 19:00</a>:<a class="headerlink" href="#gozora_commented_at_2018-01-24_1900" title="Permanent link">&para;</a></h4>
<p>With #1700 merged, this issue can be closed.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2024 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2018-01-21.1699.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
