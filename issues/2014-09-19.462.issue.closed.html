<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#462 Issue closed: Disk layout creation failed with error "An error occurred during layout recreation." at the time of restoring RHEL6 on different hardware. - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#462 Issue closed: Disk layout creation failed with error \"An error occurred during layout recreation.\" at the time of restoring RHEL6 on different hardware.";
        var mkdocs_page_input_path = "issues/2014-09-19.462.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#462 Issue closed: Disk layout creation failed with error "An error occurred during layout recreation." at the time of restoring RHEL6 on different hardware.</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="462_issue_closed_disk_layout_creation_failed_with_error_an_error_occurred_during_layout_recreation_at_the_time_of_restoring_rhel6_on_different_hardware"><a href="https://github.com/rear/rear/issues/462">#462 Issue</a> <code>closed</code>: Disk layout creation failed with error "An error occurred during layout recreation." at the time of restoring RHEL6 on different hardware.<a class="headerlink" href="#462_issue_closed_disk_layout_creation_failed_with_error_an_error_occurred_during_layout_recreation_at_the_time_of_restoring_rhel6_on_different_hardware" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>support / question</code>, <code>fixed / solved / done</code></p>
<h4 id="pramodbiradar89_opened_issue_at_2014-09-19_0635"><img src="https://avatars.githubusercontent.com/u/8360055?v=4" width="50"><a href="https://github.com/pramodbiradar89">pramodbiradar89</a> opened issue at <a href="https://github.com/rear/rear/issues/462">2014-09-19 06:35</a>:<a class="headerlink" href="#pramodbiradar89_opened_issue_at_2014-09-19_0635" title="Permanent link">&para;</a></h4>
<p>Steps i followed:</p>
<p>1.Using rear took backup of a laptop(LENOVO h/w) which was having RHEL6
&amp; LVM configured.<br />
2.Backup out was USB .<br />
3.Tried to recover a different hardware machine DELL, using the USB .<br />
4.Then at the time of recovering machine got the error saying <em>An error
occurred during layout recreation</em>.</p>
<p>Additional notes:<br />
1.Target machine was having less space i.e. ~250 GB as compared to
source machine ~260 GB.<br />
2.Also tried to recover on VM having size 300GB but still faced same
issue.</p>
<p>find rear log file for more info.</p>
<pre><code>2014-09-19 10:23:11 Relax-and-Recover 1.16.1 / Git
2014-09-19 10:23:11 Command line options: /bin/rear recover
2014-09-19 10:23:11 Using log file: /var/log/rear/rear-RHEL6.log
2014-09-19 10:23:12 Including /etc/rear/os.conf
2014-09-19 10:23:12 Including conf/Linux-i386.conf
2014-09-19 10:23:12 Including conf/GNU/Linux.conf
2014-09-19 10:23:12 Including /etc/rear/local.conf
2014-09-19 10:23:12 Including /etc/rear/rescue.conf
2014-09-19 10:23:12 Using build area '/tmp/rear.fEzKk3KJu1KjUF3'
mkdir: created directory `/tmp/rear.fEzKk3KJu1KjUF3/rootfs'
mkdir: created directory `/tmp/rear.fEzKk3KJu1KjUF3/tmp'
2014-09-19 10:23:12 Running recover workflow
2014-09-19 10:23:12 Running 'setup' stage
2014-09-19 10:23:12 Including setup/default/01_pre_recovery_script.sh
2014-09-19 10:23:12 Finished running 'setup' stage in 0 seconds
2014-09-19 10:23:12 Running 'verify' stage
2014-09-19 10:23:13 Including verify/default/02_cciss_scsi_engage.sh
2014-09-19 10:23:13 Including verify/default/02_translate_url.sh
2014-09-19 10:23:13 Including verify/default/03_translate_tape.sh
2014-09-19 10:23:13 Including verify/default/04_validate_variables.sh
2014-09-19 10:23:13 Including verify/NETFS/default/05_check_NETFS_requirements.sh
2014-09-19 10:23:13 Skipping ping test
2014-09-19 10:23:14 Including verify/GNU/Linux/05_sane_recovery_check.sh
2014-09-19 10:23:14 Including verify/NETFS/default/06_mount_NETFS_path.sh
mkdir: created directory `/tmp/rear.fEzKk3KJu1KjUF3/outputfs'
2014-09-19 10:23:14 Mounting with 'mount -v -t nfs -o rw,noatime,nolock 10.31.199.183:/NFS_DATA /tmp/rear.fEzKk3KJu1KjUF3/outputfs'
mount.nfs: mount(2): Operation not permitted
mount.nfs: trying 10.31.199.183 prog 100003 vers 3 prot TCP port 2049
mount.nfs: trying 10.31.199.183 prog 100005 vers 3 prot UDP port 818
mount.nfs: timeout set for Fri Sep 19 10:25:14 2014
mount.nfs: trying text-based options 'nolock,vers=4,addr=10.31.199.183,clientaddr=10.31.199.181'
mount.nfs: trying text-based options 'nolock,addr=10.31.199.183'
mount.nfs: prog 100003, trying vers=3, prot=6
mount.nfs: prog 100005, trying vers=3, prot=17
10.31.199.183:/NFS_DATA on /tmp/rear.fEzKk3KJu1KjUF3/outputfs type nfs (rw,noatime,nolock)
2014-09-19 10:23:16 Including verify/NETFS/default/07_set_backup_archive.sh
/usr/share/rear/verify/NETFS/default/07_set_backup_archive.sh: line 13: [: ==: unary operator expected
2014-09-19 10:23:16 Including verify/NETFS/default/08_start_required_daemons.sh
2014-09-19 10:23:18 Including verify/NETFS/default/09_set_readonly_options.sh
2014-09-19 10:23:18 Including verify/GNU/Linux/23_storage_and_network_modules.sh
find: `/lib/modules/2.6.32-71.el6.x86_64/kernel/drivers/ide': No such file or directory
find: `/lib/modules/2.6.32-71.el6.x86_64/extra': No such file or directory
find: `/lib/modules/2.6.32-71.el6.x86_64/weak-updates': No such file or directory
2014-09-19 10:23:19 Including verify/GNU/Linux/26_recovery_storage_drivers.sh
find: `/tmp/rear.fEzKk3KJu1KjUF3/tmp/dev': No such file or directory
--- /var/lib/rear/recovery/storage_drivers  2014-09-17 14:50:36.000000000 +0530
+++ /tmp/rear.fEzKk3KJu1KjUF3/tmp/storage_drivers   2014-09-19 10:23:19.882368355 +0530
@@ -1,10 +1,7 @@
 ata_generic
 ata_piix
-mptbase
-mptscsih
-mptspi
 pata_acpi
-scsi_transport_spi
 sd_mod
 sg
 sr_mod
+vmw_pvscsi
2014-09-19 10:23:20 NOTICE: Will do driver migration
2014-09-19 10:23:20 Including verify/NETFS/default/55_check_backup_archive.sh
/usr/share/rear/verify/NETFS/default/55_check_backup_archive.sh: line 10: [: ==: unary operator expected
2014-09-19 10:23:20 Calculating backup archive size
2014-09-19 10:23:20 Backup archive size is 1.1G /tmp/rear.fEzKk3KJu1KjUF3/outputfs/RHEL6/backup.tar.gz (compressed)
2014-09-19 10:23:20 Including verify/NETFS/default/60_check_encryption_key.sh
2014-09-19 10:23:20 Including verify/NETFS/default/98_umount_NETFS_dir.sh
2014-09-19 10:23:20 Unmounting '/tmp/rear.fEzKk3KJu1KjUF3/outputfs'
10.31.199.183:/NFS_DATA umounted
rmdir: removing directory, `/tmp/rear.fEzKk3KJu1KjUF3/outputfs'
2014-09-19 10:23:20 Finished running 'verify' stage in 8 seconds
2014-09-19 10:23:20 Running 'layout/prepare' stage
2014-09-19 10:23:21 Including layout/prepare/default/01_prepare_files.sh
2014-09-19 10:23:21 Including layout/prepare/GNU/Linux/10_include_partition_code.sh
2014-09-19 10:23:21 Including layout/prepare/GNU/Linux/11_include_lvm_code.sh
2014-09-19 10:23:22 Including layout/prepare/GNU/Linux/12_include_raid_code.sh
2014-09-19 10:23:22 Including layout/prepare/GNU/Linux/13_include_filesystem_code.sh
2014-09-19 10:23:22 Including layout/prepare/GNU/Linux/14_include_swap_code.sh
2014-09-19 10:23:22 Including layout/prepare/GNU/Linux/15_include_drbd_code.sh
2014-09-19 10:23:22 Including layout/prepare/GNU/Linux/16_include_luks_code.sh
2014-09-19 10:23:22 Including layout/prepare/GNU/Linux/17_include_hpraid_code.sh
2014-09-19 10:23:22 Including layout/prepare/default/20_recreate_hpraid.sh
2014-09-19 10:23:22 Including layout/prepare/GNU/Linux/21_load_multipath.sh
2014-09-19 10:23:22 Including layout/prepare/default/25_compare_disks.sh
2014-09-19 10:23:22 Comparing disks.
2014-09-19 10:23:22 Looking for sda...
2014-09-19 10:23:22 Device sda exists.
2014-09-19 10:23:22 Device sda has size 304942678016, 17179869184 expected
2014-09-19 10:23:22 Switching to manual disk layout configuration.
2014-09-19 10:23:22 Including layout/prepare/default/30_map_disks.sh
2014-09-19 10:23:23 Original disk /dev/sda does not exist in the target system. Please choose an appropriate replacement.
2014-09-19 10:23:28 This is the disk mapping table:
2014-09-19 10:23:28     /dev/sda /dev/sda
2014-09-19 10:23:28 Including layout/prepare/default/31_remove_exclusions.sh
2014-09-19 10:23:28 Including layout/prepare/default/32_apply_mappings.sh
2014-09-19 10:23:28 Including layout/prepare/default/40_autoresize_disks.sh
2014-09-19 10:23:28 Total resize of 287762808832B
2014-09-19 10:23:28 Searching for resizeable partitions on disk /dev/sda (304942678016B)
Usage: grep [OPTION]... PATTERN [FILE]...
Try `grep --help' for more information.
2014-09-19 10:23:28 No resizeable partitions found.
2014-09-19 10:23:28 Including layout/prepare/default/50_confirm_layout.sh
2014-09-19 10:23:28 Please confirm that '/var/lib/rear/layout/disklayout.conf' is as you expect.
2014-09-19 10:23:32 User selected: 5) Continue recovery
2014-09-19 10:23:32 Including layout/prepare/default/51_list_dependencies.sh
2014-09-19 10:23:32 Including layout/prepare/default/52_exclude_components.sh
2014-09-19 10:23:32 Including layout/prepare/default/54_generate_device_code.sh
2014-09-19 10:23:32 Including layout/prepare/default/55_finalize_script.sh
2014-09-19 10:23:32 Including layout/prepare/default/60_show_unprocessed.sh
2014-09-19 10:23:32 Including layout/prepare/default/61_exclude_from_restore.sh
2014-09-19 10:23:32 Finished running 'layout/prepare' stage in 12 seconds
2014-09-19 10:23:32 Running 'layout/recreate' stage
2014-09-19 10:23:33 Including layout/recreate/default/10_ask_confirmation.sh
2014-09-19 10:23:33 Please confirm that '/var/lib/rear/layout/diskrestore.sh' is as you expect.
2014-09-19 10:23:35 User selected: 5) Continue recovery
2014-09-19 10:23:35 Including layout/recreate/default/20_run_script.sh
2014-09-19 10:23:35 Start system layout restoration.
  No volume groups found
+++ create_component /dev/sda disk
+++ local device=/dev/sda
+++ local type=disk
+++ local touchfile=disk--dev-sda
+++ '[' -e /tmp/rear.fEzKk3KJu1KjUF3/tmp/touch/disk--dev-sda ']'
+++ return 0
+++ Log 'Erasing MBR of disk /dev/sda'
+++ test 1 -gt 0
++++ Stamp
++++ date '+%Y-%m-%d %H:%M:%S '
+++ echo '2014-09-19 10:23:37 Erasing MBR of disk /dev/sda'
2014-09-19 10:23:37 Erasing MBR of disk /dev/sda
+++ dd if=/dev/zero of=/dev/sda bs=512 count=1
1+0 records in
1+0 records out
512 bytes (512 B) copied, 0.0932551 s, 5.5 kB/s
+++ sync
+++ LogPrint 'Creating partitions for disk /dev/sda (msdos)'
+++ Log 'Creating partitions for disk /dev/sda (msdos)'
+++ test 1 -gt 0
++++ Stamp
++++ date '+%Y-%m-%d %H:%M:%S '
+++ echo '2014-09-19 10:23:37 Creating partitions for disk /dev/sda (msdos)'
2014-09-19 10:23:37 Creating partitions for disk /dev/sda (msdos)
+++ Print 'Creating partitions for disk /dev/sda (msdos)'
+++ test 1
+++ echo -e 'Creating partitions for disk /dev/sda (msdos)'
+++ parted -s /dev/sda mklabel msdos
+++ sleep 1
+++ parted -s /dev/sda mkpart '"primary"' 32768B 524320767B
Warning: The resulting partition is not properly aligned for best performance.
+++ sleep 1
+++ parted -s /dev/sda set 1 boot on
+++ parted -s /dev/sda mkpart '"primary"' 524324864B 17178857471B
Warning: The resulting partition is not properly aligned for best performance.
+++ sleep 1
+++ parted -s /dev/sda set 2 lvm on
+++ partprobe -s /dev/sda
/dev/sda: msdos partitions 1 2
+++ sleep 10
+++ my_udevtrigger
+++ has_binary udevadm
+++ for bin in '$@'
+++ type udevadm
+++ return 0
+++ udevadm trigger
+++ my_udevsettle
+++ has_binary udevadm
+++ for bin in '$@'
+++ type udevadm
+++ return 0
+++ udevadm settle
+++ component_created /dev/sda disk
+++ local device=/dev/sda
+++ local type=disk
+++ local touchfile=disk--dev-sda
+++ touch /tmp/rear.fEzKk3KJu1KjUF3/tmp/touch/disk--dev-sda
+++ create_component /dev/sda1 part
+++ local device=/dev/sda1
+++ local type=part
+++ local touchfile=part--dev-sda1
+++ '[' -e /tmp/rear.fEzKk3KJu1KjUF3/tmp/touch/part--dev-sda1 ']'
+++ return 0
+++ component_created /dev/sda1 part
+++ local device=/dev/sda1
+++ local type=part
+++ local touchfile=part--dev-sda1
+++ touch /tmp/rear.fEzKk3KJu1KjUF3/tmp/touch/part--dev-sda1
+++ create_component /dev/sda2 part
+++ local device=/dev/sda2
+++ local type=part
+++ local touchfile=part--dev-sda2
+++ '[' -e /tmp/rear.fEzKk3KJu1KjUF3/tmp/touch/part--dev-sda2 ']'
+++ return 0
+++ component_created /dev/sda2 part
+++ local device=/dev/sda2
+++ local type=part
+++ local touchfile=part--dev-sda2
+++ touch /tmp/rear.fEzKk3KJu1KjUF3/tmp/touch/part--dev-sda2
+++ create_component pv:/dev/sda2 lvmdev
+++ local device=pv:/dev/sda2
+++ local type=lvmdev
+++ local touchfile=lvmdev-pv:-dev-sda2
+++ '[' -e /tmp/rear.fEzKk3KJu1KjUF3/tmp/touch/lvmdev-pv:-dev-sda2 ']'
+++ return 0
+++ LogPrint 'Creating LVM PV /dev/sda2'
+++ Log 'Creating LVM PV /dev/sda2'
+++ test 1 -gt 0
++++ Stamp
++++ date '+%Y-%m-%d %H:%M:%S '
+++ echo '2014-09-19 10:24:03 Creating LVM PV /dev/sda2'
2014-09-19 10:24:03 Creating LVM PV /dev/sda2
+++ Print 'Creating LVM PV /dev/sda2'
+++ test 1
+++ echo -e 'Creating LVM PV /dev/sda2'
+++ lvm vgchange -a n vg_RHEL6
  Volume group "vg_RHEL6" not found
+++ true
+++ lvm pvcreate -ff --yes -v --uuid kfW8hC-cod6-KpJI-KBCR-CB3D-QYgc-Q8vz6L /dev/sda2
  --restorefile is required with --uuid
  Run `pvcreate --help' for more information.
2014-09-19 10:24:03 An error occurred during layout recreation.
2014-09-19 10:25:10 User selected: 6) Abort Relax-and-Recover
2014-09-19 10:25:10 Error detected during restore.
2014-09-19 10:25:10 Restoring backup of /var/lib/rear/layout/disklayout.conf
2014-09-19 10:25:10 ERROR: There was an error restoring the system layout. See /var/log/rear/rear-RHEL6.log for details.
=== Stack trace ===
Trace 0: /bin/rear:249 main
Trace 1: /usr/share/rear/lib/recover-workflow.sh:30 WORKFLOW_recover
Trace 2: /usr/share/rear/lib/framework-functions.sh:81 SourceStage
Trace 3: /usr/share/rear/lib/framework-functions.sh:42 Source
Trace 4: /usr/share/rear/layout/recreate/default/20_run_script.sh:63 source
Message: There was an error restoring the system layout. See /var/log/rear/rear-RHEL6.log for details.
===================
2014-09-19 10:25:10 Running exit tasks.
2014-09-19 10:25:10 Finished in 123 seconds
2014-09-19 10:25:10 Removing build area /tmp/rear.fEzKk3KJu1KjUF3
rmdir: removing directory, `/tmp/rear.fEzKk3KJu1KjUF3'
2014-09-19 10:25:10 End of program reached
</code></pre>
<h4 id="gdha_commented_at_2014-09-19_0653"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/462#issuecomment-56141654">2014-09-19 06:53</a>:<a class="headerlink" href="#gdha_commented_at_2014-09-19_0653" title="Permanent link">&para;</a></h4>
<p>@pramodbiradar89 it would be nice to view a debug session. The <code>grep</code>
error is quite interesting to find out what exactly went wrong. Also,
the files under <code>/var/lib/rear/layout</code> directory would be nice to view
and the script which was generated
<code>/usr/share/rear/layout/recreate/default/20_run_script.sh</code> (is an auto
generated script so you won't find it if you do not run <code>rear recover</code></p>
<p>PS: you can dump files at gist.github.com</p>
<h4 id="pramodbiradar89_commented_at_2014-09-19_0821"><img src="https://avatars.githubusercontent.com/u/8360055?v=4" width="50"><a href="https://github.com/pramodbiradar89">pramodbiradar89</a> commented at <a href="https://github.com/rear/rear/issues/462#issuecomment-56149721">2014-09-19 08:21</a>:<a class="headerlink" href="#pramodbiradar89_commented_at_2014-09-19_0821" title="Permanent link">&para;</a></h4>
<p>@gdha</p>
<p>Please find the link for debug session logs</p>
<p><a href="https://gist.github.com/pramodbiradar89/257012b2d32f06935915">https://gist.github.com/pramodbiradar89/257012b2d32f06935915</a></p>
<h4 id="pramodbiradar89_commented_at_2014-09-19_0832"><img src="https://avatars.githubusercontent.com/u/8360055?v=4" width="50"><a href="https://github.com/pramodbiradar89">pramodbiradar89</a> commented at <a href="https://github.com/rear/rear/issues/462#issuecomment-56150654">2014-09-19 08:32</a>:<a class="headerlink" href="#pramodbiradar89_commented_at_2014-09-19_0832" title="Permanent link">&para;</a></h4>
<p>@gdha Please find the files under /var/lib/rear/layout dir:</p>
<p><a href="https://gist.github.com/pramodbiradar89/b4363d764a5852c3c8df">https://gist.github.com/pramodbiradar89/b4363d764a5852c3c8df</a></p>
<h4 id="pramodbiradar89_commented_at_2014-09-19_0836"><img src="https://avatars.githubusercontent.com/u/8360055?v=4" width="50"><a href="https://github.com/pramodbiradar89">pramodbiradar89</a> commented at <a href="https://github.com/rear/rear/issues/462#issuecomment-56151034">2014-09-19 08:36</a>:<a class="headerlink" href="#pramodbiradar89_commented_at_2014-09-19_0836" title="Permanent link">&para;</a></h4>
<p>@gdha Also the
/usr/share/rear/layout/recreate/default/20_run_script.sh :</p>
<p><a href="https://gist.github.com/pramodbiradar89/51e3a5669592be9fe9f5">https://gist.github.com/pramodbiradar89/51e3a5669592be9fe9f5</a></p>
<h4 id="gdha_commented_at_2014-09-20_0215"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/462#issuecomment-56254222">2014-09-20 02:15</a>:<a class="headerlink" href="#gdha_commented_at_2014-09-20_0215" title="Permanent link">&para;</a></h4>
<p>@pramodbiradar89</p>
<pre><code>+++ lvm pvcreate -ff --yes -v --uuid kfW8hC-cod6-KpJI-KBCR-CB3D-QYgc-Q8vz6L /dev/sda2
  --restorefile is required with --uuid
</code></pre>
<p>Could you compare <code>11_include_lvm_code.sh</code> with this one
<a href="https://github.com/rear/rear/blob/master/usr/share/rear/layout/prepare/GNU/Linux/11_include_lvm_code.sh">https://github.com/rear/rear/blob/master/usr/share/rear/layout/prepare/GNU/Linux/11_include_lvm_code.sh</a>
? We should have the option <code>--norestorefile</code> I think after the <code>uuid</code></p>
<h4 id="pramodbiradar89_commented_at_2014-09-21_1615"><img src="https://avatars.githubusercontent.com/u/8360055?v=4" width="50"><a href="https://github.com/pramodbiradar89">pramodbiradar89</a> commented at <a href="https://github.com/rear/rear/issues/462#issuecomment-56303692">2014-09-21 16:15</a>:<a class="headerlink" href="#pramodbiradar89_commented_at_2014-09-21_1615" title="Permanent link">&para;</a></h4>
<p>@gdha i compared this file with the file you given &amp; found it similar.<br />
Still i am attaching this file for your reference.</p>
<p><a href="https://gist.github.com/pramodbiradar89/c05b1e4a3a2a71798c19">https://gist.github.com/pramodbiradar89/c05b1e4a3a2a71798c19</a></p>
<h4 id="pramodbiradar89_commented_at_2014-09-22_1012"><img src="https://avatars.githubusercontent.com/u/8360055?v=4" width="50"><a href="https://github.com/pramodbiradar89">pramodbiradar89</a> commented at <a href="https://github.com/rear/rear/issues/462#issuecomment-56353580">2014-09-22 10:12</a>:<a class="headerlink" href="#pramodbiradar89_commented_at_2014-09-22_1012" title="Permanent link">&para;</a></h4>
<p>@gdha Request you to please let me know your comments/findings on this
so that this issue gets resolved asap.</p>
<p>Any updates .</p>
<h4 id="gdha_commented_at_2014-09-23_1355"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/462#issuecomment-56522905">2014-09-23 13:55</a>:<a class="headerlink" href="#gdha_commented_at_2014-09-23_1355" title="Permanent link">&para;</a></h4>
<p>@pramodbiradar89 what is the output of <code>lvm version</code>?</p>
<h4 id="pramodbiradar89_commented_at_2014-09-23_1633"><img src="https://avatars.githubusercontent.com/u/8360055?v=4" width="50"><a href="https://github.com/pramodbiradar89">pramodbiradar89</a> commented at <a href="https://github.com/rear/rear/issues/462#issuecomment-56549177">2014-09-23 16:33</a>:<a class="headerlink" href="#pramodbiradar89_commented_at_2014-09-23_1633" title="Permanent link">&para;</a></h4>
<p>@gdha I think ,it is having lvm2 as version.</p>
<p>So is it like for lvm2 it will fail ?</p>
<h4 id="gdha_commented_at_2014-09-24_0742"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/462#issuecomment-56635449">2014-09-24 07:42</a>:<a class="headerlink" href="#gdha_commented_at_2014-09-24_0742" title="Permanent link">&para;</a></h4>
<p>@pramodbiradar89 if the <code>lvm version</code> shows a version higher then listed
below then</p>
<pre><code>if version_newer "$lvm_version" 2.02.73 ; then
FEATURE_LVM_RESTOREFILE="y"
fi
</code></pre>
<p>then the <code>norestorefile</code> option will be added. that was the reason why I
would like to see the exact version of your lvm</p>
<h4 id="pramodbiradar89_commented_at_2014-09-24_1249"><img src="https://avatars.githubusercontent.com/u/8360055?v=4" width="50"><a href="https://github.com/pramodbiradar89">pramodbiradar89</a> commented at <a href="https://github.com/rear/rear/issues/462#issuecomment-56664586">2014-09-24 12:49</a>:<a class="headerlink" href="#pramodbiradar89_commented_at_2014-09-24_1249" title="Permanent link">&para;</a></h4>
<p>@gdha Please find screenshot which shows the details about the LVM
version.</p>
<p><img alt="image" src="https://cloud.githubusercontent.com/assets/8360055/4388253/df9b1d5a-43e8-11e4-8f18-214a5b2747a3.png" /></p>
<p>Also if you need any other extra logs then please ping me.</p>
<p>Thanks,<br />
Pramod</p>
<h4 id="gdha_commented_at_2014-09-25_0947"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/462#issuecomment-56796651">2014-09-25 09:47</a>:<a class="headerlink" href="#gdha_commented_at_2014-09-25_0947" title="Permanent link">&para;</a></h4>
<p>@pramodbiradar89 what is the exact version of RHEL6 you are using?
<code>cat /etc/issue.net</code><br />
A possible solution would be upgrading lvm or you could try to change
the line in file
<code>/usr/share/rear/layout/prepare/GNU/Linux/11_include_lvm_code.sh</code>:<br />
<code>if version_newer "$lvm_version" 2.02.73 ; then</code> into
<code>if version_newer "$lvm_version" 2.02.71 ; then</code><br />
Then, try it again and let me know how it worked out.</p>
<h4 id="pramodbiradar89_commented_at_2014-09-25_1127"><img src="https://avatars.githubusercontent.com/u/8360055?v=4" width="50"><a href="https://github.com/pramodbiradar89">pramodbiradar89</a> commented at <a href="https://github.com/rear/rear/issues/462#issuecomment-56805541">2014-09-25 11:27</a>:<a class="headerlink" href="#pramodbiradar89_commented_at_2014-09-25_1127" title="Permanent link">&para;</a></h4>
<p>@gdha<br />
Please find the output of /etc/issue</p>
<p><img alt="image" src="https://cloud.githubusercontent.com/assets/8360055/4403532/89904bbc-44a4-11e4-88a3-86e68f7ea2af.png" /></p>
<p>Also i tried by changing if version_newer "$lvm_version" 2.02.71 ;
then i got following error:</p>
<p><img alt="image" src="https://cloud.githubusercontent.com/assets/8360055/4403688/b47d2fa0-44a6-11e4-852e-d3f3f0a58ac8.png" /></p>
<p><img alt="image" src="https://cloud.githubusercontent.com/assets/8360055/4403681/954425c6-44a6-11e4-90bb-0e3b7a7553bc.png" /></p>
<p>Also attaching the log file in debug mode for your reference:</p>
<p><a href="https://gist.github.com/pramodbiradar89/aab16c513178143083be">https://gist.github.com/pramodbiradar89/aab16c513178143083be</a></p>
<h4 id="gdha_commented_at_2014-09-25_1159"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/462#issuecomment-56808517">2014-09-25 11:59</a>:<a class="headerlink" href="#gdha_commented_at_2014-09-25_1159" title="Permanent link">&para;</a></h4>
<p>@pramodbiradar89 OK, thanks, so now <code>pvcreate</code> works fine. The error you
are seeing:</p>
<pre><code>+++ lvm lvcreate -l 12800 -n lv_root vg_dellrhelqa2
Insufficient free extents (3970) in volume group vg_dellrhelqa2: 12800 required
</code></pre>
<p>just means that you do not have enough disk space to recreate your lvol.
You should edit the <code>diskrestore.sh</code> file and change the number 12800
into 3970 and retry. However, keep in mind that the lvol might be too
small to fit the data. Just that you know this is not a issue of rear,
but of the end-user if he wishes to restore on a smaller disk.<br />
I will reflect your test into our code and change the requirement of
2.02.73 into 2.02.71</p>
<h4 id="exedor_commented_at_2014-12-20_1743"><img src="https://avatars.githubusercontent.com/u/6391864?u=f29593e509021c433bdf23c37efbe71f8ced8a6e&v=4" width="50"><a href="https://github.com/exedor">exedor</a> commented at <a href="https://github.com/rear/rear/issues/462#issuecomment-67743468">2014-12-20 17:43</a>:<a class="headerlink" href="#exedor_commented_at_2014-12-20_1743" title="Permanent link">&para;</a></h4>
<p>I am getting the exact same error during restore on fedora 20 with
standard partitions. Here is the layout:</p>
<p>Filesystem Size Used Avail Use% Mounted on<br />
/dev/sda3 67G 19G 46G 29% /<br />
devtmpfs 896M 0 896M 0% /dev<br />
tmpfs 906M 0 906M 0% /dev/shm<br />
tmpfs 906M 520K 905M 1% /run<br />
tmpfs 906M 0 906M 0% /sys/fs/cgroup<br />
tmpfs 906M 8.0K 906M 1% /tmp<br />
/dev/sda1 2.9G 72M 2.7G 3% /boot</p>
<p>I noticed the generated scripts are using specific byte values for
partition recreation. Any particular reason why? Wouldn't sticking to
percentages and letting parted figure out the best byte boundary for the
partition be a better option?</p>
<p>This was with the latest checkout of the master branch which I assume
has the fix mentioned in this ticket?</p>
<h4 id="gdha_commented_at_2014-12-20_1759"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/462#issuecomment-67744109">2014-12-20 17:59</a>:<a class="headerlink" href="#gdha_commented_at_2014-12-20_1759" title="Permanent link">&para;</a></h4>
<p>did you look in the log file of rear where the error happened?</p>
<p>On Sat, Dec 20, 2014 at 6:43 PM, jb <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;">&#110;&#111;&#116;&#105;&#102;&#105;&#99;&#97;&#116;&#105;&#111;&#110;&#115;&#64;&#103;&#105;&#116;&#104;&#117;&#98;&#46;&#99;&#111;&#109;</a> wrote:</p>
<blockquote>
<p>I am getting the exact same error during restore on fedora 20 with<br />
standard partitions. Here is the layout:</p>
<p>Filesystem Size Used Avail Use% Mounted on<br />
/dev/sda3 67G 19G 46G 29% /<br />
devtmpfs 896M 0 896M 0% /dev<br />
tmpfs 906M 0 906M 0% /dev/shm<br />
tmpfs 906M 520K 905M 1% /run<br />
tmpfs 906M 0 906M 0% /sys/fs/cgroup<br />
tmpfs 906M 8.0K 906M 1% /tmp<br />
/dev/sda1 2.9G 72M 2.7G 3% /boot</p>
<p>I noticed the generated scripts are using specific byte values for<br />
partition recreation. Any particular reason why? Wouldn't sticking
to<br />
percentages and letting parted figure out the best byte boundary for
the<br />
partition be a better option?</p>
<p>—<br />
Reply to this email directly or view it on GitHub<br />
<a href="https://github.com/rear/rear/issues/462#issuecomment-67743468">https://github.com/rear/rear/issues/462#issuecomment-67743468</a>.</p>
</blockquote>
<h4 id="exedor_commented_at_2014-12-20_1842"><img src="https://avatars.githubusercontent.com/u/6391864?u=f29593e509021c433bdf23c37efbe71f8ced8a6e&v=4" width="50"><a href="https://github.com/exedor">exedor</a> commented at <a href="https://github.com/rear/rear/issues/462#issuecomment-67745421">2014-12-20 18:42</a>:<a class="headerlink" href="#exedor_commented_at_2014-12-20_1842" title="Permanent link">&para;</a></h4>
<p>Yes briefly just after posting (granted should have been before) and it
looks like it actually has nothing to do with the partition size. The
last executed command is udevadm settle which has the following output
to the console just before the rear abort option menu shows up:</p>
<p>Creating partitions for disk /dev/sda (msdos)</p>
<p>udevadm settle - timeout of 120 seconds reached, the event queue
contains:<br />
/sys/devices/system/cpu/cpu0 (1162)<br />
/sys/devices/system/cpu/cpu1 (1163)<br />
/sys/devices/system/cpu/cpu2 (1164)<br />
/sys/devices/system/cpu/cpu3 (1165)<br />
/sys/devices/system/cpu/cpu0 (2095)<br />
/sys/devices/system/cpu/cpu1 (2096)<br />
/sys/devices/system/cpu/cpu2 (2097)<br />
/sys/devices/system/cpu/cpu3 (2098)<br />
An error occurred during layout creation.</p>
<p>Something else must be failing that is causing udev events to be stuck.
It's an SSD drive with a relatively straight forward partition scheme so
I'm surprised something would be taking this long or getting stuck.</p>
<p>Actually upon closer examination, it may have absolutely nothing to do
with rear at all. I'm seeing a lot of history online about problems with
programs executing udevadm --settle at boot and USB stick booting
causing problems with it timing out.</p>
<h4 id="gdha_commented_at_2015-02-11_1101"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/462#issuecomment-73864216">2015-02-11 11:01</a>:<a class="headerlink" href="#gdha_commented_at_2015-02-11_1101" title="Permanent link">&para;</a></h4>
<p>@exedor Sorry did not saw your last posting from Dec 20, 2014. Most
likely your issue will be fixed in rear-1.17 as udev related things were
drastically adapted, modified and tested by SuSe and myself. We have
spend long time on it. See #533 for more details.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2025 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2014-09-19.462.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
