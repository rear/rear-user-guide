<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#1063 Issue closed: Let "rear recover" check first if the same disks exists based on HW IDs - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#1063 Issue closed: Let \"rear recover\" check first if the same disks exists based on HW IDs";
        var mkdocs_page_input_path = "issues/2016-11-10.1063.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#1063 Issue closed: Let "rear recover" check first if the same disks exists based on HW IDs</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="1063_issue_closed_let_rear_recover_check_first_if_the_same_disks_exists_based_on_hw_ids"><a href="https://github.com/rear/rear/issues/1063">#1063 Issue</a> <code>closed</code>: Let "rear recover" check first if the same disks exists based on HW IDs<a class="headerlink" href="#1063_issue_closed_let_rear_recover_check_first_if_the_same_disks_exists_based_on_hw_ids" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>bug</code>, <code>needs sponsorship</code>,
<code>no-issue-activity</code></p>
<h4 id="jsmeix_opened_issue_at_2016-11-10_0850"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> opened issue at <a href="https://github.com/rear/rear/issues/1063">2016-11-10 08:50</a>:<a class="headerlink" href="#jsmeix_opened_issue_at_2016-11-10_0850" title="Permanent link">&para;</a></h4>
<p>See<br />
<a href="https://github.com/rear/rear/issues/1057#issuecomment-259460160">https://github.com/rear/rear/issues/1057#issuecomment-259460160</a><br />
where @schabrolles wrote</p>
<pre>
I think we should check first if the same disk exists
based on HW ID,
If we can't find the same HW ID, use the size
to get the best candidate disk (like rear is doing today)

When restoring on same hardware, we should keep
exactly the same disks.
When restoring on different hardware, find the best disk
to map based on size.
</pre>

<p>Background information:<br />
First and foremost "rear recover" is intended to work<br />
on replacement hardware where any hardware specific IDs<br />
are usually different compared to the original system where<br />
"rear mkbackup" was run so that in general hardware specific IDs<br />
cannot be used during "rear recover".<br />
Therefore "rear recover" uses usually the plain kernel device nodes<br />
like /dev/sda and /dev/sdb (in particular on new replacement disks<br />
there are usually no labels that can be used - only the plain empty<br />
disks exists).<br />
Using plain kernel device nodes works sufficiently well in most cases<br />
except exceptional cases where kernel device nodes like /dev/sda<br />
and /dev/sdb could get interchanged on replacement hardware<br />
compared to the original system, cf.<br />
<a href="https://github.com/rear/rear/issues/1057">https://github.com/rear/rear/issues/1057</a></p>
<h4 id="jsmeix_commented_at_2016-11-10_0907"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1063#issuecomment-259637669">2016-11-10 09:07</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-11-10_0907" title="Permanent link">&para;</a></h4>
<p>This enhancement request requires major<br />
implementation work.</p>
<p>The intent behind the following implementation proposal<br />
is to only add functionality to ReaR and to avoid to change<br />
what currently works o.k. in ReaR so that there are no<br />
incompatible behavioural changes in ReaR:</p>
<ol>
<li></li>
</ol>
<p>During "rear mkbackup" hardware specific IDs<br />
must be collected and stored in disklayout.conf.</p>
<ol>
<li></li>
</ol>
<p>During "rear recover" each hardware specific ID<br />
in disklayout.conf must be checked if exists and<br />
if yes the matching kernel device node must be noted<br />
otherwise some fallback mechanism (e.g. disk size)<br />
must be used to deterime the kernel device node.<br />
E.g. think about recovery on a system with two same disks<br />
/dev/sda and /dev/sdb where one disk got damaged and<br />
was replaced by a new one (e.g /dev/sdb was replaced<br />
by a new and bigger one).<br />
In such a case "rear recover" should detect that /dev/sda<br />
is still the same and only /dev/sdb is new.</p>
<ol>
<li></li>
</ol>
<p>disklayout.conf must be adapted to use the currently<br />
right kernel device nodes that were determined in step 2.</p>
<p>Now the rest can work as before (using kernel device nodes)<br />
i.e. the diskrestore.sh script will still use kernel device nodes<br />
as it worked all the time before (but now it uses the currently<br />
right kernel device nodes that were determined in step 2.)</p>
<h4 id="jsmeix_commented_at_2016-11-10_0910"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1063#issuecomment-259638200">2016-11-10 09:10</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-11-10_0910" title="Permanent link">&para;</a></h4>
<p>I set "looking for sponsorship" because I think in the<br />
foreseeable future I will not find time to implement that myself.</p>
<p>Therefore I would very much appreciate if a ReaR contributor<br />
could contibute a first usable implementation as GitHub<br />
pull request so that we have a reasonable starting point.</p>
<p>Then it is much more likely that I find some time to further<br />
adapt and enhace that initial starting point.</p>
<h4 id="jsmeix_commented_at_2016-11-10_0913"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1063#issuecomment-259638725">2016-11-10 09:13</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-11-10_0913" title="Permanent link">&para;</a></h4>
<p>I assign it to me which does not mean I will implement it myself<br />
but it means I will keep having a look what goes on here...</p>
<h4 id="github-actions_commented_at_2020-07-02_0133"><img src="https://avatars.githubusercontent.com/in/15368?v=4" width="50"><a href="https://github.com/apps/github-actions">github-actions</a> commented at <a href="https://github.com/rear/rear/issues/1063#issuecomment-652727937">2020-07-02 01:33</a>:<a class="headerlink" href="#github-actions_commented_at_2020-07-02_0133" title="Permanent link">&para;</a></h4>
<p>Stale issue message</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2024 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2016-11-10.1063.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
