<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>2015 12 07.733.issue.closed - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "2015 12 07.733.issue.closed";
        var mkdocs_page_input_path = "issues/2015-12-07.733.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/rust.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', '366986045', 'auto');
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
      <li>2015 12 07.733.issue.closed</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="733_issue_closed_rear_not_backing_up_all_lvm_volumes"><a href="https://github.com/rear/rear/issues/733">#733 Issue</a> <code>closed</code>: REAR not backing up all LVM volumes<a class="headerlink" href="#733_issue_closed_rear_not_backing_up_all_lvm_volumes" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>support / question</code>,
<code>won't fix / can't fix / obsolete</code></p>
<h4 id="razorfish-sl_opened_issue_at_2015-12-07_2222"><img src="https://avatars.githubusercontent.com/u/4497476?v=4" width="50"><a href="https://github.com/razorfish-sl">razorfish-sl</a> opened issue at <a href="https://github.com/rear/rear/issues/733">2015-12-07 22:22</a>:<a class="headerlink" href="#razorfish-sl_opened_issue_at_2015-12-07_2222" title="Permanent link">&para;</a></h4>
<p>It seems that lvm volumes that contain block images do not restore
correctly.</p>
<p>multiple LVM volumes over:<br />
sda, 20gb<br />
sdb , 350gb block image</p>
<p>Installed rear 1.17.2<br />
setup NAS via NFS<br />
dropped down to:<br />
Init1<br />
reconfigured missing network interface for ethernet<br />
rear -v mkbackup</p>
<p>Total backup gz only 20gb</p>
<p>moved to secondary system, booted from iso</p>
<p>rear restore</p>
<p>sda restored<br />
sdb MISSING....</p>
<h4 id="gdha_commented_at_2015-12-08_1317"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/733#issuecomment-162876529">2015-12-08 13:17</a>:<a class="headerlink" href="#gdha_commented_at_2015-12-08_1317" title="Permanent link">&para;</a></h4>
<p>@razorfish-sl could you paste the content of
<code>/var/lib/rear/layout/disklayout.conf</code> file?</p>
<h4 id="razorfish-sl_commented_at_2015-12-09_0930"><img src="https://avatars.githubusercontent.com/u/4497476?v=4" width="50"><a href="https://github.com/razorfish-sl">razorfish-sl</a> commented at <a href="https://github.com/rear/rear/issues/733#issuecomment-163161714">2015-12-09 09:30</a>:<a class="headerlink" href="#razorfish-sl_commented_at_2015-12-09_0930" title="Permanent link">&para;</a></h4>
<p><a href="https://github.com/rear/rear/files/56565/disklayout.conf.zip">disklayout.conf.zip</a></p>
<h4 id="gdha_commented_at_2015-12-09_0940"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/733#issuecomment-163163913">2015-12-09 09:40</a>:<a class="headerlink" href="#gdha_commented_at_2015-12-09_0940" title="Permanent link">&para;</a></h4>
<p>@razorfish-sl According the disklayout no Lvol from /dev/cinder-volumes
was mounted at the time rear was running. Can you confirm this? If that
is the case then this is how rear has been designed. Only deal with
mounted FS, Lvols (of active Vgs).</p>
<h4 id="razorfish-sl_commented_at_2015-12-10_1307"><img src="https://avatars.githubusercontent.com/u/4497476?v=4" width="50"><a href="https://github.com/razorfish-sl">razorfish-sl</a> commented at <a href="https://github.com/rear/rear/issues/733#issuecomment-163608298">2015-12-10 13:07</a>:<a class="headerlink" href="#razorfish-sl_commented_at_2015-12-10_1307" title="Permanent link">&para;</a></h4>
<p>[root@core ~]# cd /dev/cinder-volumes<br />
[root@core cinder-volumes]# ls -la<br />
total 0<br />
drwxr-xr-x. 2 root root 60 Dec 7 12:49 .<br />
drwxr-xr-x. 21 root root 3340 Dec 9 01:30 ..<br />
lrwxrwxrwx. 1 root root 7 Dec 7 12:49
volume-7bf54f60-5e6e-421b-851c-849b3c2908c2 -&gt; ../dm-2<br />
[root@core cinder-volumes]#</p>
<p>but it is 'not' formally mounted to a mount point as in 'mount
/dev/mapper/centos-spare /spare'</p>
<p>it cannot be because the partitions are for use only by the internal
virtualized systems, they are block devices only, their internal
structure might not even be readable by the host os.</p>
<p>You 'could' virtualize those block devices as 'files' in the host , but
then you would have potential issues with fragmentation.</p>
<h4 id="gdha_commented_at_2015-12-11_0914"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/733#issuecomment-163882732">2015-12-11 09:14</a>:<a class="headerlink" href="#gdha_commented_at_2015-12-11_0914" title="Permanent link">&para;</a></h4>
<p>@razorfish-sl So, to me, rear does what it needs to do - archiving the
root disk; from your explanation it wouldn't make sense anyway to
archive the cinder-volumes.<br />
I don't know what your expectation are, but I have no clue how you need
to backup the cinder-volumes without risking the backup is worthless?</p>
<h4 id="razorfish-sl_commented_at_2015-12-13_0704"><img src="https://avatars.githubusercontent.com/u/4497476?v=4" width="50"><a href="https://github.com/razorfish-sl">razorfish-sl</a> commented at <a href="https://github.com/rear/rear/issues/733#issuecomment-164233614">2015-12-13 07:04</a>:<a class="headerlink" href="#razorfish-sl_commented_at_2015-12-13_0704" title="Permanent link">&para;</a></h4>
<p>how can the backup be worthless if I issued an init 1?<br />
cinder storage is fixed block storage for the instances, backing it up
is no different than doing a "dd' to a zip/tar file</p>
<h4 id="gdha_commented_at_2015-12-24_1050"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/733#issuecomment-167091487">2015-12-24 10:50</a>:<a class="headerlink" href="#gdha_commented_at_2015-12-24_1050" title="Permanent link">&para;</a></h4>
<p>@razorfish-sl Ok understood - just mount it for the sake of rear before
running mkbackup then it will be taken into account.</p>
<h4 id="razorfish-sl_commented_at_2015-12-25_0343"><img src="https://avatars.githubusercontent.com/u/4497476?v=4" width="50"><a href="https://github.com/razorfish-sl">razorfish-sl</a> commented at <a href="https://github.com/rear/rear/issues/733#issuecomment-167188937">2015-12-25 03:43</a>:<a class="headerlink" href="#razorfish-sl_commented_at_2015-12-25_0343" title="Permanent link">&para;</a></h4>
<p>That may be problematic, since you would have to know &amp; mount each block
volume listed.<br />
and since it is a 'cloud' you cannot really know what is or is not there
until backup time.<br />
Which would make it a manual process, uinless there is a "mount with
'*' functionality".</p>
<h4 id="gdha_commented_at_2016-02-10_1559"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/733#issuecomment-182444967">2016-02-10 15:59</a>:<a class="headerlink" href="#gdha_commented_at_2016-02-10_1559" title="Permanent link">&para;</a></h4>
<p>@razorfish-sl is this feature request? Be able to include block volumes
which are not mounted? Are how do you see it?</p>
<h4 id="razorfish-sl_commented_at_2016-02-11_2311"><img src="https://avatars.githubusercontent.com/u/4497476?v=4" width="50"><a href="https://github.com/razorfish-sl">razorfish-sl</a> commented at <a href="https://github.com/rear/rear/issues/733#issuecomment-183095780">2016-02-11 23:11</a>:<a class="headerlink" href="#razorfish-sl_commented_at_2016-02-11_2311" title="Permanent link">&para;</a></h4>
<p>Hi,<br />
Yes it would be useful in a cloud setup.<br />
Don't get me wrong I love 'REAR', but missing this sort of thing without
warning is a major problem...</p>
<p>With this "openstack" setup,some volumes are not 'physically' mounted to
prevent the OS fighting over them.<br />
The device is accessed directly from within open-stack , even though it
can be mounted externally by the OS and contains a valid filesystem,<br />
This device is accessed from within a VM with a different user setup, if
you pull it into a normal linux setup with the users not present, it
causes all sorts of 'rights' issues if you try to do an internal file
backup.<br />
so it makes far more sense to do a "block" backup and not care about the
internal content.</p>
<h4 id="schlomo_commented_at_2016-02-12_0702"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/733#issuecomment-183205395">2016-02-12 07:02</a>:<a class="headerlink" href="#schlomo_commented_at_2016-02-12_0702" title="Permanent link">&para;</a></h4>
<p>@razorfish-sl this is a very interesting use case you are bringing up
here.</p>
<p>Please keep in mind that ReaR was designed for a different purpose: Bare
metal disaster recovery of a single server using an external backup
solution.</p>
<p>The internal NFS-based backup was added much later as a tool for quick
testing and it is much less powerul as a backup solution than real
backup software.</p>
<p>By design ReaR operates on the filesystem level. That means that
anything not mounted is out of scope for ReaR.</p>
<p>The design goal of ReaR was to take a backup / layout snapshot of a
running system so we never even considered thinking about doing an
<code>init 1</code> for ReaR.</p>
<p>ReaR also has a very clear separation between structural information
(e.g. LVM configurations) and file contents. The nice thing about
structural information is that it does not change so fast while the
system runs so that is perfectly OK to record it without any kind of
quiescing. Filesystems and block blobs are the opposite: If you want to
get a consistent backup then you must think about quiescing or you must
have a system where it does not matter if the first 100 files/blocks are
recorded 2 hourse before the last 100 files/blocks.</p>
<p>With the system area of a server this is for most cases an acceptable
risk. For a database filesystem this is certain death. @gdha was
alluding to this issue when he wondered about the backup beeing
worthless.</p>
<p>We have already had other users who wanted to recovery Oracle data
partitions etc. Or who wanted to include shared storage devices that
where not mounted etc.</p>
<p>That said, we will be most happy to get a pull request for new
functionality and of course also help you develop it.</p>
<p>Maybe backup concepts for cinder are yet to be developed.</p>
<h4 id="jsmeix_commented_at_2016-02-12_1000"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/733#issuecomment-183258144">2016-02-12 10:00</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-02-12_1000" title="Permanent link">&para;</a></h4>
<p>@schlomo<br />
many thanks for your explanatory information about<br />
fundamental design ideas behind rear.<br />
That helps so much!</p>
<p>I think this is not yet sufficiently explained in the rear<br />
documentation. I mean it is not yet explicitly spelled out<br />
in the current rear documentation.</p>
<p>I think it would help if 09-design-concepts.adoc<br />
was updated and enhanced.</p>
<h4 id="jsmeix_commented_at_2016-02-12_1028"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/733#issuecomment-183263811">2016-02-12 10:28</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-02-12_1028" title="Permanent link">&para;</a></h4>
<p>I think
<a href="https://github.com/rear/rear/issues/733#issuecomment-183205395">https://github.com/rear/rear/issues/733#issuecomment-183205395</a>
explains sufficiently why this particular issue currently contradicts
the basic design of rear.</p>
<p>Therefore I close this particular issue for now as "won't fix" which
actually means "cannot fix" because it would require major design<br />
changes in rear.</p>
<p>For the future I filed
<a href="https://github.com/rear/rear/issues/769">https://github.com/rear/rear/issues/769</a>
"Brainstorming about fundamental enhancements for the backup".</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2022 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2015-12-07.733.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
