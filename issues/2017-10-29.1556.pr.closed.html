<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#1556 PR closed: choose relative link-target for lib-dirs - fixes #1555 - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#1556 PR closed: choose relative link-target for lib-dirs - fixes #1555";
        var mkdocs_page_input_path = "issues/2017-10-29.1556.pr.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#1556 PR closed: choose relative link-target for lib-dirs - fixes #1555</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="1556_pr_closed_choose_relative_link-target_for_lib-dirs_-_fixes_1555"><a href="https://github.com/rear/rear/pull/1556">#1556 PR</a> <code>closed</code>: choose relative link-target for lib-dirs - fixes #1555<a class="headerlink" href="#1556_pr_closed_choose_relative_link-target_for_lib-dirs_-_fixes_1555" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>bug</code>, <code>won't fix / can't fix / obsolete</code></p>
<h4 id="efwe_opened_issue_at_2017-10-29_0850"><img src="https://avatars.githubusercontent.com/u/139730?u=fa428e3e1a382f042bd6283a137dd20fe4f6f8a8&v=4" width="50"><a href="https://github.com/efwe">efwe</a> opened issue at <a href="https://github.com/rear/rear/pull/1556">2017-10-29 08:50</a>:<a class="headerlink" href="#efwe_opened_issue_at_2017-10-29_0850" title="Permanent link">&para;</a></h4>
<p>Hello @gozora,</p>
<p>as today is really awful weather I looked around the rear-source.<br />
There I found this script which creates the lib-environment.<br />
I'm not sure what else breaks with this - so this PR is more meant
like<br />
a question/pointer start of discussion than a real merge-request.</p>
<p>But with this fix my chrooted rootfs looks better (for /usr/lib64 at
least)</p>
<pre><code>RESCUE osa:/usr # ls -l /usr
total 0
lrwxrwxrwx 1 root root    6 Oct 29 08:36 bin -&gt; ../bin
drwxr-xr-x 2 root root   60 Oct 27 18:13 include
drwxr-xr-x 8 root root 4340 Oct 29 08:36 lib
lrwxrwxrwx 1 root root    3 Oct 29 08:36 lib64 -&gt; lib
lrwxrwxrwx 1 root root    6 Oct 29 08:36 sbin -&gt; ../bin
drwxr-xr-x 8 root root  180 Oct 29 08:36 share
</code></pre>
<p>and the <code>ldd</code> of course also works now.<br />
Maybe this helps, greetings<br />
Frank</p>
<h4 id="gozora_commented_at_2017-10-29_0908"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/pull/1556#issuecomment-340247359">2017-10-29 09:08</a>:<a class="headerlink" href="#gozora_commented_at_2017-10-29_0908" title="Permanent link">&para;</a></h4>
<p>Yep, hell of a weather here as well.<br />
I'm installing Arch right now :-).<br />
I know about that script, problem is that such approach would most
probably introduce some regression, so we must be 100% sure that other
distros will not suffer with such change.</p>
<h4 id="gozora_commented_at_2017-10-29_0913"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/pull/1556#issuecomment-340247597">2017-10-29 09:13</a>:<a class="headerlink" href="#gozora_commented_at_2017-10-29_0913" title="Permanent link">&para;</a></h4>
<p>ReaR can distinguish between distros and can run some scripts if it
matches. (see e.g. <em>/rear/usr/share/rear/build/Debian</em>).So I think this
might be a way to go ...</p>
<p>V.</p>
<h4 id="gozora_commented_at_2017-10-29_1200"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/pull/1556#issuecomment-340256900">2017-10-29 12:00</a>:<a class="headerlink" href="#gozora_commented_at_2017-10-29_1200" title="Permanent link">&para;</a></h4>
<p>Hello @efwe,</p>
<p>I've created PR
<a href="https://github.com/efwe/rear/pull/1">https://github.com/efwe/rear/pull/1</a>,
can you check if it works better ?</p>
<p>V.</p>
<h4 id="gozora_commented_at_2017-10-29_1207"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/pull/1556#issuecomment-340257523">2017-10-29 12:07</a>:<a class="headerlink" href="#gozora_commented_at_2017-10-29_1207" title="Permanent link">&para;</a></h4>
<p>@efwe<br />
Your patch have some side effects:</p>
<pre><code>++ target=usr/lib
++ [[ ! -e /tmp/rear.ninx3H9jappyoDX/rootfsusr/lib ]]
++ mkdir -v -p /tmp/rear.ninx3H9jappyoDX/rootfsusr/lib
mkdir: created directory '/tmp/rear.ninx3H9jappyoDX/rootfsusr'
mkdir: created directory '/tmp/rear.ninx3H9jappyoDX/rootfsusr/lib'
</code></pre>
<p>Which creates some directories <em>rootfsusr and rootfsusr/lib</em> which are
not desired.<br />
I did not study it further but this might be the recursion I was talking
about earlier.</p>
<p>Btw. forget about my
<a href="https://github.com/rear/rear/pull/1556#issuecomment-340247597">https://github.com/rear/rear/pull/1556#issuecomment-340247597</a>,
this is certainly a bug which can affect any distro, so we should not
cover but fix it instead ...</p>
<p>V.</p>
<h4 id="efwe_commented_at_2017-10-29_1238"><img src="https://avatars.githubusercontent.com/u/139730?u=fa428e3e1a382f042bd6283a137dd20fe4f6f8a8&v=4" width="50"><a href="https://github.com/efwe">efwe</a> commented at <a href="https://github.com/rear/rear/pull/1556#issuecomment-340259438">2017-10-29 12:38</a>:<a class="headerlink" href="#efwe_commented_at_2017-10-29_1238" title="Permanent link">&para;</a></h4>
<p>Hello @gozora,</p>
<p>I tested with your patch and no errors during copy. The <code>lib64</code> links
looks great and no errors for <code>ldd</code> later of course. But I haven't
booted or restored from it yet.<br />
Especially because I now have other warnings</p>
<pre><code>2017-10-29 13:27:52.630054166 There are binaries or libraries in the ReaR recovery system that need additional libraries
2017-10-29 13:27:52.635411950 /usr/lib/systemd/systemd-journal-remote requires additional libraries
2017-10-29 13:27:52.650156793   linux-vdso.so.1 (0x00007ffd78fee000)
        libpthread.so.0 =&gt; /usr/lib/libpthread.so.0 (0x00007fb680f9a000)
        libc.so.6 =&gt; /usr/lib/libc.so.6 (0x00007fb680be3000)
        libsystemd-shared-235.so =&gt; /usr/lib/systemd/libsystemd-shared-235.so (0x00007fb6807b1000)
        libmicrohttpd.so.12 =&gt; not found
</code></pre>
<p>but I will investigate first and open another ticket if needed.</p>
<p>So should I close this PR here and you can double check with someone
else and use your patch? Thanks for the prompt effort. Very tough
response time :)</p>
<p>Have a nice weekend,<br />
~fw</p>
<h4 id="gozora_commented_at_2017-10-29_1250"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/pull/1556#issuecomment-340260124">2017-10-29 12:50</a>:<a class="headerlink" href="#gozora_commented_at_2017-10-29_1250" title="Permanent link">&para;</a></h4>
<p>Hello @efwe</p>
<blockquote>
<p>Especially because I now have other warnings</p>
</blockquote>
<p>AFAIK we don't have many Arch users, so ReaR is not heavily tested here,
hence you might run into some difficulties for sure ;-).</p>
<blockquote>
<p>but I will investigate first and open another ticket if needed.</p>
</blockquote>
<p>Sure, do so, If we know we help ;-)</p>
<blockquote>
<p>So should I close this PR</p>
</blockquote>
<p>Yes, please close it, I'm very far from being GIT guru and I really
don't how to handle such situation correctly. So best would be to close
this PR and I'll create new one with my changes and ask for review of
other members.</p>
<blockquote>
<p>Thanks for the prompt effort. Very tough response time :)</p>
</blockquote>
<p>Anytime.</p>
<blockquote>
<p>Have a nice weekend,</p>
</blockquote>
<p>Have a nice weekend too.</p>
<p>V.</p>
<h4 id="gozora_commented_at_2017-10-29_1401"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/pull/1556#issuecomment-340264514">2017-10-29 14:01</a>:<a class="headerlink" href="#gozora_commented_at_2017-10-29_1401" title="Permanent link">&para;</a></h4>
<p>Hello @efwe,</p>
<p>Just came across same problem. Solved by <code>pacman -S libmicrohttpd</code> ...</p>
<p>V.</p>
<h4 id="jsmeix_commented_at_2017-11-06_1222"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1556#issuecomment-342133056">2017-11-06 12:22</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-11-06_1222" title="Permanent link">&para;</a></h4>
<p>Superseded by<br />
<a href="https://github.com/rear/rear/pull/1557">https://github.com/rear/rear/pull/1557</a></p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2023 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2017-10-29.1556.pr.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
