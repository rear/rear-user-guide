<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#2042 Issue closed: Unable to restore to SLES12 SP4 on Power using Rear - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#2042 Issue closed: Unable to restore to SLES12 SP4 on Power using Rear";
        var mkdocs_page_input_path = "issues/2019-02-14.2042.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#2042 Issue closed: Unable to restore to SLES12 SP4 on Power using Rear</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="2042_issue_closed_unable_to_restore_to_sles12_sp4_on_power_using_rear"><a href="https://github.com/rear/rear/issues/2042">#2042 Issue</a> <code>closed</code>: Unable to restore to SLES12 SP4 on Power using Rear<a class="headerlink" href="#2042_issue_closed_unable_to_restore_to_sles12_sp4_on_power_using_rear" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>support / question</code>, <code>won't fix / can't fix / obsolete</code></p>
<h4 id="ccjung_opened_issue_at_2019-02-14_1547"><img src="https://avatars.githubusercontent.com/u/29214472?u=58ae98d864664297a19702de40bf4767338e396b&v=4" width="50"><a href="https://github.com/ccjung">ccjung</a> opened issue at <a href="https://github.com/rear/rear/issues/2042">2019-02-14 15:47</a>:<a class="headerlink" href="#ccjung_opened_issue_at_2019-02-14_1547" title="Permanent link">&para;</a></h4>
<p>Is SLES12 SP4 supported for Rear?</p>
<p>This is our only SLES12 SP4 LPAR so we don't have all the information to
gather.</p>
<h4 id="relax-and-recover_rear_issue_template">Relax-and-Recover (ReaR) Issue Template<a class="headerlink" href="#relax-and-recover_rear_issue_template" title="Permanent link">&para;</a></h4>
<p>Fill in the following items before submitting a new issue<br />
(quick response is not guaranteed with free support):</p>
<ul>
<li>
<p>ReaR version ("/usr/sbin/rear -V"):<br />
    Relax-and-Recover 2.4-git.0.6ec9075.unknown / 2018-12-05</p>
</li>
<li>
<p>OS version ("cat /etc/rear/os.conf" or "lsb_release -a" or "cat
    /etc/os-release"):SLES12 SP4</p>
</li>
<li>
<p>ReaR configuration files ("cat /etc/rear/site.conf" and/or "cat
    /etc/rear/local.conf"):</p>
</li>
<li>
<p>Hardware (PC or PowerNV BareMetal or ARM) or virtual machine (KVM
    guest or PoverVM LPAR): PowerVM LPAR</p>
</li>
<li>
<p>System architecture (x86 compatible or PPC64/PPC64LE or what exact
    ARM device): PPC64LE</p>
</li>
<li>
<p>Firmware (BIOS or UEFI or Open Firmware) and bootloader (GRUB or
    ELILO or Petitboot): GRUB</p>
</li>
<li>
<p>Storage (lokal disk or SSD) and/or SAN (FC or iSCSI or FCoE) and/or
    multipath (DM or NVMe): SAN XIV</p>
</li>
<li>
<p>Description of the issue (ideally so that others can reproduce
    it):<br />
    We are unable to restore using Rear on SLES12 SP4 on Power.</p>
</li>
</ul>
<p>Is SLES12 SP4 supported for Rear?</p>
<p>This is our only SLES12 SP4 LPAR so we don't have all the information to
gather.</p>
<ul>
<li>
<p>Workaround, if any:</p>
</li>
<li>
<p>Attachments, as applicable ("rear -D mkrescue/mkbackup/recover"
    debug log files):<br />
<a href="https://github.com/rear/rear/files/2865735/Rear.Restore.SLES.12.SP4.txt">Rear Restore SLES 12
    SP4.txt</a></p>
</li>
</ul>
<h4 id="jsmeix_commented_at_2019-02-15_1011"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2042#issuecomment-463982323">2019-02-15 10:11</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-02-15_1011" title="Permanent link">&para;</a></h4>
<p>@suseusr168<br />
see "Supported Operating Systems" at<br />
<a href="http://relax-and-recover.org/documentation/release-notes-2-4">http://relax-and-recover.org/documentation/release-notes-2-4</a><br />
and "rear / rear116 / rear1172a / rear118a / rear23a" at<br />
<a href="https://en.opensuse.org/SDB:Disaster_Recovery">https://en.opensuse.org/SDB:Disaster_Recovery</a></p>
<p>Your
<a href="https://github.com/rear/rear/files/2865735/Rear.Restore.SLES.12.SP4.txt">https://github.com/rear/rear/files/2865735/Rear.Restore.SLES.12.SP4.txt</a><br />
contains (excerpts):</p>
<pre><code>Configuring Relax-and-Recover rescue system
...
Running 55-migrate-network-devices.sh...
Cannot migrate network interface setup because there is no usable MAC address on this system
Running 58-start-dhclient.sh...
Running 60-network-devices.sh...
Cannot find device "eth0"
...
Cannot find device "eth1"
Running 62-routing.sh...
Cannot find device "eth0"
Cannot find device "eth1"

...

Running workflow recover within the ReaR rescue/recovery system
A symlink '/dev/disk/by-label/RELAXRECOVER' is required that points to the device with the ReaR ISO image
Create symlink '/dev/disk/by-label/RELAXRECOVER' that points to the ReaR ISO image device
1) /dev/cdrom is where the ISO is attached to
2) /dev/sr0 is where the ISO is attached to
3) /dev/sr1 is where the ISO is attached to
4) Use Relax-and-Recover shell and return back to here
5) Continue 'rear recover'
6) Abort 'rear recover'
</code></pre>
<p>See in usr/share/rear/lib/global-functions.sh<br />
the mount_url() function therein the (iso) case, e.g. online at<br />
<a href="https://github.com/rear/rear/blob/master/usr/share/rear/lib/global-functions.sh#L376">https://github.com/rear/rear/blob/master/usr/share/rear/lib/global-functions.sh#L376</a><br />
that explains the reason behind and URLs to other issues like<br />
<a href="https://github.com/rear/rear/issues/1891">https://github.com/rear/rear/issues/1891</a><br />
that was from you and seems to be the same one as this issue here,<br />
in particular there also networking issues were mentioned.</p>
<p>Perhaps without networking the mount_url() function cannot work<br />
in your case but I don't know where the ISO is attached to in your case.</p>
<h4 id="jsmeix_commented_at_2019-02-15_1024"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2042#issuecomment-463986885">2019-02-15 10:24</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-02-15_1024" title="Permanent link">&para;</a></h4>
<p>Only a blind shot in the dark<br />
(@suseusr168 why did you not provide your ReaR configuration file?)<br />
cf.<br />
<a href="https://github.com/rear/rear/pull/1894#issuecomment-411766357">https://github.com/rear/rear/pull/1894#issuecomment-411766357</a></p>
<pre><code>I need MODULES=( 'all_modules' ) because without it
I get on my SLES12 x86_64 KVM system
...
  mount: unknown filesystem type 'iso9660'
...
where mount: unknown filesystem type 'iso9660'
is exactly my example for https://github.com/rear/rear/issues/1202
see also https://github.com/rear/rear/issues/1891#issuecomment-410757405
</code></pre>
<p>Regarding <code>MODULES=( 'all_modules' )</code> see also<br />
<a href="https://github.com/rear/rear/issues/2041">https://github.com/rear/rear/issues/2041</a></p>
<h4 id="ccjung_commented_at_2019-02-15_1325"><img src="https://avatars.githubusercontent.com/u/29214472?u=58ae98d864664297a19702de40bf4767338e396b&v=4" width="50"><a href="https://github.com/ccjung">ccjung</a> commented at <a href="https://github.com/rear/rear/issues/2042#issuecomment-464049642">2019-02-15 13:25</a>:<a class="headerlink" href="#ccjung_commented_at_2019-02-15_1325" title="Permanent link">&para;</a></h4>
<p>The reason why the /etc/rear/local.conf wasn't included was that we
couldn't restore the ISO backup and the system cannot get booted up.</p>
<p>In hindsight, we could have gotten the local.conf if we access the
Rescue shell. We were in panic mode.</p>
<p>The question we have is:<br />
Is Rear supported for SLES12 SP4 on Power?</p>
<p>We would need to do more testing on a system that was migrated from
SLES12 SP3 to SLES12 SP4 to see if we can restore at SLES12 SP4 level .</p>
<p>Here is the background of the problem:</p>
<ol>
<li>System built from base SLES12 SP4 DVD ISO<br />
    Cannot restore using Rear and and and the workaround in #2019
    didn't work.</li>
</ol>
<!-- -->

<pre><code>##    rear&gt; udevadm control --reload-rules
##    rear&gt; udevadm trigger
##    rear&gt; multipath -r
##     create: 200173800348802b2 undef IBM,2810XIV
##     size=112G features='1 queue_if_no_path' hwhandler='0' wp=undef
##     `-+- policy='service-time 0' prio=50 status=undef
##       |- 2:0:0:1 sda 8:0  undef ready running
##       |- 2:0:1:1 sdb 8:16 undef ready running
##       |- 3:0:0:1 sdc 8:32 undef ready running
##       `- 3:0:1:1 sdd 8:48 undef ready running
##   NOTE:  If no ouput from multipath -r re-run the 2 udevadm commands
##          Also, there might not always be 4 paths
</code></pre>
<ol>
<li>Restore SLES12 SP3 Rear backup and migrated to SLES12 SP4 to get the
    system up since the Rear backup of SLES12 SP4 didn't work. We need
    to test if this restore from a SLES12 SP4 migrated system will work.</li>
</ol>
<p>Here are the info gathered from the system that was migrated from SLES12
SP3 to SLES12 SP4:<br />
The /etc/rear/local.conf was the same file we used on a base SLES12 SP4
system and a migrated SLES12 SP4 system:</p>
<h4 id="relax-and-recover_rear_issue_template_1">Relax-and-Recover (ReaR) Issue Template<a class="headerlink" href="#relax-and-recover_rear_issue_template_1" title="Permanent link">&para;</a></h4>
<p>Fill in the following items before submitting a new issue<br />
(quick response is not guaranteed with free support):</p>
<ul>
<li>
<p>ReaR version ("/usr/sbin/rear -V"):<br />
    Relax-and-Recover 2.4-git.0.e9f9d4b.unknown / 2018-12-20</p>
</li>
<li>
<p>OS version ("cat /etc/rear/os.conf" or "lsb_release -a" or "cat
    /etc/os-release"):</p>
</li>
</ul>
<!-- -->

<pre><code>SLES12 SP4
NAME="SLES"
VERSION="12-SP4"
VERSION_ID="12.4"
PRETTY_NAME="SUSE Linux Enterprise Server 12 SP4"
ID="sles"
ANSI_COLOR="0;32"
CPE_NAME="cpe:/o:suse:sles_sap:12:sp4"
</code></pre>
<ul>
<li>ReaR configuration files ("cat /etc/rear/site.conf" and/or "cat
    /etc/rear/local.conf"):</li>
</ul>
<!-- -->

<pre><code># Default is to create Relax-and-Recover rescue media as ISO image
# set OUTPUT to change that
# set BACKUP to activate an automated (backup and) restore of your data
# Possible configuration values can be found in /usr/share/rear/conf/default.conf
#
# This file (local.conf) is intended for manual configuration. For configuration
# through packages and other automated means we recommend creating a new
# file named site.conf next to this file and to leave the local.conf as it is.
# Our packages will never ship with a site.conf.
AUTOEXCLUDE_MULTIPATH=n
BOOT_OVER_SAN=y
REAR_INITRD_COMPRESSION=lzma
OUTPUT=ISO
ISO_MAX_SIZE=4000
BACKUP=NETFS
BACKUP_URL=iso:///iso_fs/REAR_BACKUP
ISO_DIR=/iso_fs/REAR_ISO
TMPDIR=/iso_fs/REAR_TEMP
OUTPUT_URL=null
BOOT_FROM_SAN=y
EXCLUDE_MOUNTPOINTS=( /iso_fs /opt/IBM/ITM /cv /opt/splunkforwarder /opt/teamquest /var/opt/BESClient /usr/sap /hana/data /hana/log /hana/shared /usr/sap/basis /usr/sap/srm /PA_backup )
EXCLUDE_COMPONENTS=( /dev/mapper/20017380034880218 /dev/mapper/20017380034880219 /dev/mapper/2001738003488021a /dev/mapper/2001738003488021b /dev/mapper/2001738003488021c /dev/mapper/2001738003488021d /dev/mapper/2001738003488021e /dev/mapper/2001738003488021f /dev/mapper/20017380034880220 /dev/mapper/20017380034880221 /dev/mapper/20017380034880222 /dev/mapper/20017380034880223 /dev/mapper/200173800348802ac /dev/mapper/200173800348802ad /dev/mapper/200173800348802ae /dev/mapper/200173800348802af )
</code></pre>
<ul>
<li>
<p>Hardware (PC or PowerNV BareMetal or ARM) or virtual machine (KVM
    guest or PoverVM LPAR):<br />
    PowerVM LPAR</p>
</li>
<li>
<p>System architecture (x86 compatible or PPC64/PPC64LE or what exact
    ARM device):<br />
    PPC64LE</p>
</li>
<li>
<p>Firmware (BIOS or UEFI or Open Firmware) and bootloader (GRUB or
    ELILO or Petitboot):<br />
    GRUB</p>
</li>
<li>
<p>Storage (lokal disk or SSD) and/or SAN (FC or iSCSI or FCoE) and/or
    multipath (DM or NVMe):<br />
    SAN XIV</p>
</li>
<li>
<p>Description of the issue (ideally so that others can reproduce
    it):<br />
    We are unable to restore using Rear on SLES12 SP4 on Power.</p>
</li>
</ul>
<h4 id="ccjung_commented_at_2019-02-19_1624"><img src="https://avatars.githubusercontent.com/u/29214472?u=58ae98d864664297a19702de40bf4767338e396b&v=4" width="50"><a href="https://github.com/ccjung">ccjung</a> commented at <a href="https://github.com/rear/rear/issues/2042#issuecomment-465203149">2019-02-19 16:24</a>:<a class="headerlink" href="#ccjung_commented_at_2019-02-19_1624" title="Permanent link">&para;</a></h4>
<p>Updates made to ticket 2019. C.losing this ticket.</p>
<h4 id="jsmeix_commented_at_2019-02-20_0908"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2042#issuecomment-465488123">2019-02-20 09:08</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-02-20_0908" title="Permanent link">&para;</a></h4>
<p>This issue here is continued in
<a href="https://github.com/rear/rear/issues/2019">https://github.com/rear/rear/issues/2019</a><br />
therein starting at<br />
<a href="https://github.com/rear/rear/issues/2019#issuecomment-465122332">https://github.com/rear/rear/issues/2019#issuecomment-465122332</a></p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2024 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2019-02-14.2042.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
