<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>2019 07 01.2169.issue.closed - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "2019 07 01.2169.issue.closed";
        var mkdocs_page_input_path = "issues/2019-07-01.2169.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/rust.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', '366986045', 'auto');
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
      <li>2019 07 01.2169.issue.closed</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="2169_issue_closed_cron_job_recovery_media_not_available"><a href="https://github.com/rear/rear/issues/2169">#2169 Issue</a> <code>closed</code>: Cron Job Recovery Media not available<a class="headerlink" href="#2169_issue_closed_cron_job_recovery_media_not_available" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>documentation</code>, <code>support / question</code>,
<code>fixed / solved / done</code>, <code>minor bug</code></p>
<h4 id="dcz01_opened_issue_at_2019-07-01_1322"><img src="https://avatars.githubusercontent.com/u/20817288?v=4" width="50"><a href="https://github.com/dcz01">dcz01</a> opened issue at <a href="https://github.com/rear/rear/issues/2169">2019-07-01 13:22</a>:<a class="headerlink" href="#dcz01_opened_issue_at_2019-07-01_1322" title="Permanent link">&para;</a></h4>
<h4 id="relax-and-recover_rear_issue_template">Relax-and-Recover (ReaR) Issue Template<a class="headerlink" href="#relax-and-recover_rear_issue_template" title="Permanent link">&para;</a></h4>
<p>Fill in the following items before submitting a new issue<br />
(quick response is not guaranteed with free support):</p>
<ul>
<li>ReaR version ("/usr/sbin/rear -V"):<br />
<code>Relax-and-Recover 2.5 / 2019-05-10</code></li>
<li>OS version ("cat /etc/rear/os.conf" or "lsb_release -a" or "cat
    /etc/os-release"):</li>
</ul>
<!-- -->

<pre><code>OS_VENDOR=RedHatEnterpriseServer
OS_VERSION=6.10
</code></pre>
<ul>
<li>ReaR configuration files ("cat /etc/rear/site.conf" and/or "cat
    /etc/rear/local.conf"):</li>
</ul>
<!-- -->

<pre><code>OUTPUT=ISO
OUTPUT_URL=file:///tmp/rear
#BACKUP=NETFS
BACKUP=TSM
#BACKUP_PROG=tar
#BACKUP_PROG_CRYPT_ENABLED=1
#BACKUP_PROG_CRYPT_KEY=&lt;Verschluesselungskennwort&gt;
#BACKUP_PROG_CRYPT_OPTIONS="/usr/bin/openssl aes256 -salt -k"
#BACKUP_PROG_DECRYPT_OPTIONS="/usr/bin/openssl aes256 -d -k"
#BACKUP_URL=nfs://&lt;IP-Adresse oder DNS-Name&gt;/&lt;Freigabepfad&gt;
#BACKUP_URL=cifs://&lt;Server&gt;/&lt;Freigabe&gt;
#BACKUP_OPTIONS="cred=/etc/rear/cifs,sec=ntlmsspi"
#BACKUP_TYPE=incremental
#FULLBACKUPDAY="Sat"
#BACKUP_PROG_EXCLUDE=( '/tmp/*' '/dev/shm/*' $VAR_DIR/output/\* '/opt/tivoli/tsm/rear/*' '/mnt/*' '/media/*' '/var/lib/pgsql/*/data/base/*' '/var/lib/pgsql/*/data/global/*' '/var/lib/pgsql/*/data/pg*/*' )
SSH_ROOT_PASSWORD='$1$HGjk3XUV$lid3Nd3k01Kht1mpMscLw1'
NON_FATAL_BINARIES_WITH_MISSING_LIBRARY='/opt/tivoli/tsm/client/ba/bin/libvixMntapi.so.1.1.0'
</code></pre>
<ul>
<li>Hardware (PC or PowerNV BareMetal or ARM) or virtual machine (KVM
    guest or PoverVM LPAR):<br />
<code>Virtual Machine on VMware</code></li>
<li>System architecture (x86 compatible or PPC64/PPC64LE or what exact
    ARM device):<br />
<code>x86_64</code></li>
<li>Firmware (BIOS or UEFI or Open Firmware) and bootloader (GRUB or
    ELILO or Petitboot):<br />
<code>BIOS and GRUB</code></li>
<li>Storage (local disk or SSD) and/or SAN (FC or iSCSI or FCoE) and/or
    multipath (DM or NVMe):<br />
<code>Local Storage/Local Disk</code></li>
<li>Description of the issue (ideally so that others can reproduce it):</li>
</ul>
<!-- -->

<pre><code>The cron job from rear has been removed since the update from rear 2.4 to 2.5.
But how to automate the check for newer recovery media in an older system like RHEL6?
</code></pre>
<ul>
<li>Workaround, if any:<br />
<code>Create a own cron job to do this, but is also not working anymore.</code></li>
</ul>
<!-- -->

<pre><code>0 3 * * * root ls /tmp/rear/$HOSTNAME/*.iso || /usr/sbin/rear mkrescue
10 3 * * * root ls /tmp/rear/$HOSTNAME/*.iso &amp;&amp; chmod -R 755 /tmp/rear
#0 5 * * * root /usr/sbin/rear mkbackuponly
#0 4 * * * root mount -t nfs &lt;IP-Adresse oder DNS-Name&gt;:&lt;Freigabepfad&gt; &lt;Pfad&gt; &amp;&amp; /usr/bin/find &lt;Pfad&gt; -mtime +30 -name '*tar.gz' -delete &amp;&amp; umount &lt;Pfad&gt;
#0 4 * * * root mount -o cred=/etc/rear/cifs,sec=ntlmsspi //&lt;Server&gt;/&lt;Freigabe&gt; &lt;Pfad&gt; &amp;&amp; /usr/bin/find &lt;Pfad&gt; -mtime +30 -name '*tar.gz' -delete &amp;&amp; umount &lt;Pfad&gt;
</code></pre>
<ul>
<li>Attachments, as applicable ("rear -D mkrescue/mkbackup/recover"
    debug log files):</li>
</ul>
<h4 id="jsmeix_commented_at_2019-07-01_1625"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2169#issuecomment-507335024">2019-07-01 16:25</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-07-01_1625" title="Permanent link">&para;</a></h4>
<p>FYI:<br />
The cron job in /etc/cron.d/rear was removed intentionally via<br />
<a href="https://github.com/rear/rear/commit/89a8f18ec402b439caf4800421644f5bf5d174e5">https://github.com/rear/rear/commit/89a8f18ec402b439caf4800421644f5bf5d174e5</a><br />
see also
<a href="https://github.com/rear/rear/issues/1892">https://github.com/rear/rear/issues/1892</a><br />
and
<a href="https://github.com/rear/rear/issues/2139">https://github.com/rear/rear/issues/2139</a></p>
<h4 id="gdha_commented_at_2019-07-02_1505"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/2169#issuecomment-507718307">2019-07-02 15:05</a>:<a class="headerlink" href="#gdha_commented_at_2019-07-02_1505" title="Permanent link">&para;</a></h4>
<p>@dcz01 you can also try to automate rear via ansible, puppet or chef.
This way you can install, configure whatever you like and in a uniform
way</p>
<h4 id="dcz01_commented_at_2019-07-03_0712"><img src="https://avatars.githubusercontent.com/u/20817288?v=4" width="50"><a href="https://github.com/dcz01">dcz01</a> commented at <a href="https://github.com/rear/rear/issues/2169#issuecomment-507970703">2019-07-03 07:12</a>:<a class="headerlink" href="#dcz01_commented_at_2019-07-03_0712" title="Permanent link">&para;</a></h4>
<p>@jsmeix @gdha<br />
So we need to create our own cron job if we use an operating system
without systemd?<br />
There will be no fix?</p>
<h4 id="jsmeix_commented_at_2019-07-03_0858"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2169#issuecomment-508006217">2019-07-03 08:58</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-07-03_0858" title="Permanent link">&para;</a></h4>
<p>@dcz01<br />
what is the problem with creating a cron job as you need it<br />
for your particular use case in your particular environment?</p>
<p>Such things belong to the admin and are within the admin's own realm.</p>
<p>E.g. how should we know that just</p>
<pre><code>30 1 * * * root /usr/sbin/rear checklayout || /usr/sbin/rear mkrescue
</code></pre>
<p>is what the admin needs for his use case in his environment?</p>
<p>We (i.e. ReaR upstream) should not mess around with the admin's own
realm.<br />
Since ReaR 2.5 we do no longer mess around with the admin's own realm<br />
so what was wrong before is now fixed.<br />
Cf. the comments in
<a href="https://github.com/rear/rear/issues/1892">https://github.com/rear/rear/issues/1892</a></p>
<h4 id="dcz01_commented_at_2019-07-03_0930"><img src="https://avatars.githubusercontent.com/u/20817288?v=4" width="50"><a href="https://github.com/dcz01">dcz01</a> commented at <a href="https://github.com/rear/rear/issues/2169#issuecomment-508017686">2019-07-03 09:30</a>:<a class="headerlink" href="#dcz01_commented_at_2019-07-03_0930" title="Permanent link">&para;</a></h4>
<p>@jsmeix<br />
Ah ok, now i understand.<br />
Well then we fix it ourself and provide the old cron job for the rear
checklayout.</p>
<h4 id="jsmeix_commented_at_2019-07-03_1215"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2169#issuecomment-508067805">2019-07-03 12:15</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-07-03_1215" title="Permanent link">&para;</a></h4>
<p>@dcz01<br />
yes, that's how cron jobs should be set up since ReaR 2.5.</p>
<h4 id="jsmeix_commented_at_2019-07-03_1225"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2169#issuecomment-508071048">2019-07-03 12:25</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-07-03_1225" title="Permanent link">&para;</a></h4>
<p>@gdha<br />
in the Release Notes for Relax-and-Recover version 2.5 at<br />
<a href="http://relax-and-recover.org/documentation/release-notes-2-5">http://relax-and-recover.org/documentation/release-notes-2-5</a><br />
the "Product Features" section falsely still contains the item</p>
<pre><code>cron job to check changes in disk layout and trigger rear mkrescue if required
</code></pre>
<p>I removed that item in the Release Notes for Relax-and-Recover version
2.6 via<br />
<a href="https://github.com/rear/rear.github.com/commit/4a7a14cffb64dc9692d7b498ec2776e8923c29ef">https://github.com/rear/rear.github.com/commit/4a7a14cffb64dc9692d7b498ec2776e8923c29ef</a></p>
<p>Would it work when I remove it also in the<br />
Release Notes for Relax-and-Recover version 2.5<br />
source at<br />
<a href="https://github.com/rear/rear.github.com/blob/master/documentation/release-notes-2-5.md">https://github.com/rear/rear.github.com/blob/master/documentation/release-notes-2-5.md</a><br />
or would that be useless now after ReaR 2.5 was already released?</p>
<h4 id="gdha_commented_at_2019-07-03_1407"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/2169#issuecomment-508108421">2019-07-03 14:07</a>:<a class="headerlink" href="#gdha_commented_at_2019-07-03_1407" title="Permanent link">&para;</a></h4>
<p>@jsmeix</p>
<blockquote>
<p>Would it work when I remove it also in the<br />
Release Notes for Relax-and-Recover version 2.5<br />
source at<br />
<a href="https://github.com/rear/rear.github.com/blob/master/documentation/release-notes-2-5.md">https://github.com/rear/rear.github.com/blob/master/documentation/release-notes-2-5.md</a><br />
or would that be useless now after ReaR 2.5 was already released?</p>
</blockquote>
<p>Yes, as it has been removed we better remove that line as well in the
release notes of 2.5. Thanks for pointing this out!</p>
<h4 id="jsmeix_commented_at_2019-07-04_0911"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2169#issuecomment-508406328">2019-07-04 09:11</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-07-04_0911" title="Permanent link">&para;</a></h4>
<p>I removed the "cron job" item from the "Product Features" section<br />
in the Release Notes for Relax-and-Recover version 2.5 via<br />
<a href="https://github.com/rear/rear.github.com/commit/46ad71e716f8a0e9731741c5cd493cdbc4b4e7cc">https://github.com/rear/rear.github.com/commit/46ad71e716f8a0e9731741c5cd493cdbc4b4e7cc</a></p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2022 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2019-07-01.2169.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
