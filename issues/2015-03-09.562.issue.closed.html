<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#562 Issue closed: What to do if server has failed and NFS is not working - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#562 Issue closed: What to do if server has failed and NFS is not working";
        var mkdocs_page_input_path = "issues/2015-03-09.562.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#562 Issue closed: What to do if server has failed and NFS is not working</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="562_issue_closed_what_to_do_if_server_has_failed_and_nfs_is_not_working"><a href="https://github.com/rear/rear/issues/562">#562 Issue</a> <code>closed</code>: What to do if server has failed and NFS is not working<a class="headerlink" href="#562_issue_closed_what_to_do_if_server_has_failed_and_nfs_is_not_working" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>waiting for info</code>, <code>support / question</code></p>
<h4 id="cocampbe_opened_issue_at_2015-03-09_1429"><img src="https://avatars.githubusercontent.com/u/2211329?u=4cd2be2e33c0e225dd2ffa8fe52fc0015c498af1&v=4" width="50"><a href="https://github.com/cocampbe">cocampbe</a> opened issue at <a href="https://github.com/rear/rear/issues/562">2015-03-09 14:29</a>:<a class="headerlink" href="#cocampbe_opened_issue_at_2015-03-09_1429" title="Permanent link">&para;</a></h4>
<p>This post is for brain storming ideas. Currently I have rear setup to
take a new backup weekly. Occasionally I test a restore to make sure
things are still working. After awhile of patching and updating the OS,
I notice that NFS connectivity breaks in rear. I wil try different nfs
options to no avail. One idea I was thinking about was booting from a
recovery cd, mounting the rear iso, and then running rear recover. I am
not sure how well this would work. I am also curious if anyone has run
into this issue and has a good workaround.</p>
<h4 id="bbeaver_commented_at_2015-03-09_1919"><img src="https://avatars.githubusercontent.com/u/7350825?u=2ec61633eda874b17db7b1eb383363444e6064d6&v=4" width="50"><a href="https://github.com/bbeaver">bbeaver</a> commented at <a href="https://github.com/rear/rear/issues/562#issuecomment-77922878">2015-03-09 19:19</a>:<a class="headerlink" href="#bbeaver_commented_at_2015-03-09_1919" title="Permanent link">&para;</a></h4>
<p>You mention running a test restore - when you do this, are you able to
boot off the stored kernel image, but then your recover fails due to
some type of NFS error? If so, from the ReaR prompt after booting up the
kernel image, you could try "showmount -e NFSSERVER" to confirm the NFS
mounts are properly exported and available. And if they are, then try to
manually perform an NFS mount and see what happens.</p>
<h4 id="cocampbe_commented_at_2015-03-09_1924"><img src="https://avatars.githubusercontent.com/u/2211329?u=4cd2be2e33c0e225dd2ffa8fe52fc0015c498af1&v=4" width="50"><a href="https://github.com/cocampbe">cocampbe</a> commented at <a href="https://github.com/rear/rear/issues/562#issuecomment-77923761">2015-03-09 19:24</a>:<a class="headerlink" href="#cocampbe_commented_at_2015-03-09_1924" title="Permanent link">&para;</a></h4>
<p>You are correct. Rear boots. the rpc services are running. Showmount did
work in this. But kept getting the error "protocol not supported". I
have seen threads that talk about NFSv4, but that was not the case here.
I tried mounting different shares from other servers. And I still got
the "protocol not supported error". I also changed the mount options to
nfsvers=3,nolock an nfsvers=2,nolock. But no go. Once I updated rear to
a newer version, it worked fine.</p>
<p>Another option I have is to update rear more frequently and test more
frequently.</p>
<h4 id="schlomo_commented_at_2015-03-09_2152"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/562#issuecomment-77951377">2015-03-09 21:52</a>:<a class="headerlink" href="#schlomo_commented_at_2015-03-09_2152" title="Permanent link">&para;</a></h4>
<p>It for sure is good to use a recent ReaR version if you update the OS.</p>
<p>What OS and ReaR version are we talking here about?</p>
<h4 id="jsmeix_commented_at_2015-03-10_0818"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/562#issuecomment-78011552">2015-03-10 08:18</a>:<a class="headerlink" href="#jsmeix_commented_at_2015-03-10_0818" title="Permanent link">&para;</a></h4>
<p>Only FYI a generic side note regarding<br />
"patching and updating the OS":</p>
<p>See "Version upgrades" at<br />
<a href="https://en.opensuse.org/SDB:Disaster_Recovery">https://en.opensuse.org/SDB:Disaster_Recovery</a><br />
that reads (excerpt):</p>
<pre>
For each rear version upgrade you must carefully re-validate that
your particular disaster recovery procedure still works for you.
...
When you have a working disaster recovery procedure running
and you upgrade software that is related to the basic system or
you do other changes in your basic system, you must also
carefully re-validate that your particular disaster recovery
procedure still works for you. 
</pre>

<p>In other words:<br />
There are often somewhat hidden/unexpected interdependencies between the
Linux distribution and its version and the rear version.</p>
<h4 id="gdha_commented_at_2015-03-10_0928"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/562#issuecomment-78020266">2015-03-10 09:28</a>:<a class="headerlink" href="#gdha_commented_at_2015-03-10_0928" title="Permanent link">&para;</a></h4>
<p>Perhaps, read issue #547 - was the <code>portmap</code> daemon running?</p>
<h4 id="bbeaver_commented_at_2015-03-10_1420"><img src="https://avatars.githubusercontent.com/u/7350825?u=2ec61633eda874b17db7b1eb383363444e6064d6&v=4" width="50"><a href="https://github.com/bbeaver">bbeaver</a> commented at <a href="https://github.com/rear/rear/issues/562#issuecomment-78062520">2015-03-10 14:20</a>:<a class="headerlink" href="#bbeaver_commented_at_2015-03-10_1420" title="Permanent link">&para;</a></h4>
<p>Just an fyi - testing with the showmount command will confirm whether or
not portmap is running. @cocambe mentioned showmount returned properly.
Should be able to isolate NFS issues outside of ReaR, using showmount
and manually attempting to mount, (mkdir /mnt/a;mount
NFSSERVERIP:/sharename_from_showmount /mnt/a;umount if it mounted;then
rmdir /mnt/a), after booting up the ReaR kernel image.</p>
<h4 id="cocampbe_commented_at_2015-03-10_1429"><img src="https://avatars.githubusercontent.com/u/2211329?u=4cd2be2e33c0e225dd2ffa8fe52fc0015c498af1&v=4" width="50"><a href="https://github.com/cocampbe">cocampbe</a> commented at <a href="https://github.com/rear/rear/issues/562#issuecomment-78064333">2015-03-10 14:29</a>:<a class="headerlink" href="#cocampbe_commented_at_2015-03-10_1429" title="Permanent link">&para;</a></h4>
<p>@schlomo The happened recently. I am running OEL6. Most are at 6.6. I
have a few at 6.5. The last rear push I had was
rear-1.13.0-56.git201209050817. I know it's old. I need to do a better
job of keeping up to date. I just updated all my dev/test hosts to
1.16.1-git201503061713.</p>
<p>@jsmeix Very good point.</p>
<p>@gdha Unfortunately, I did not check portmap. I felt pressured to get
things working, so I only went so far in the troubleshooting process. I
assumed a newer rear version would resolve the issue.</p>
<h4 id="gdha_commented_at_2015-03-10_1451"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/562#issuecomment-78069639">2015-03-10 14:51</a>:<a class="headerlink" href="#gdha_commented_at_2015-03-10_1451" title="Permanent link">&para;</a></h4>
<p>@cocampbe yes rear -1.16.1-git201503061713 should contain the fix for
your problem. Please give feedback if it doesn't</p>
<h4 id="gdha_commented_at_2015-06-30_1025"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/562#issuecomment-117116497">2015-06-30 10:25</a>:<a class="headerlink" href="#gdha_commented_at_2015-06-30_1025" title="Permanent link">&para;</a></h4>
<p>I'll close this issue - if it comes back a new case will be made (I'm
sure of it)</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2024 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2015-03-09.562.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
