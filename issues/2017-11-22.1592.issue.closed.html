<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#1592 Issue closed: Restore from burned ISO fails at or soon after "Running mkinitrd" - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#1592 Issue closed: Restore from burned ISO fails at or soon after \"Running mkinitrd\"";
        var mkdocs_page_input_path = "issues/2017-11-22.1592.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#1592 Issue closed: Restore from burned ISO fails at or soon after "Running mkinitrd"</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="1592_issue_closed_restore_from_burned_iso_fails_at_or_soon_after_running_mkinitrd"><a href="https://github.com/rear/rear/issues/1592">#1592 Issue</a> <code>closed</code>: Restore from burned ISO fails at or soon after "Running mkinitrd"<a class="headerlink" href="#1592_issue_closed_restore_from_burned_iso_fails_at_or_soon_after_running_mkinitrd" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>support / question</code>, <code>won't fix / can't fix / obsolete</code></p>
<h4 id="exedor_opened_issue_at_2017-11-22_0410"><img src="https://avatars.githubusercontent.com/u/6391864?u=f29593e509021c433bdf23c37efbe71f8ced8a6e&v=4" width="50"><a href="https://github.com/exedor">exedor</a> opened issue at <a href="https://github.com/rear/rear/issues/1592">2017-11-22 04:10</a>:<a class="headerlink" href="#exedor_opened_issue_at_2017-11-22_0410" title="Permanent link">&para;</a></h4>
<h4 id="relax-and-recover_rear_issue_template">Relax-and-Recover (ReaR) Issue Template<a class="headerlink" href="#relax-and-recover_rear_issue_template" title="Permanent link">&para;</a></h4>
<p>Fill in the following items before submitting a new issue<br />
(quick response is not guaranteed with free support):</p>
<ul>
<li>
<p>rear version (/usr/sbin/rear -V): 2.1 through latest github</p>
</li>
<li>
<p>OS version (cat /etc/rear/os.conf or lsb_release -a): Fedora 26</p>
</li>
<li>
<p>rear configuration files (cat /etc/rear/site.conf or cat
    /etc/rear/local.conf):<br />
    /etc/rear/local.conf:<br />
    OUTPUT=ISO<br />
    BACKUP=NETFS<br />
    BACKUP_URL=iso://backup<br />
    OUTPUT_URL=file:///home/exedor/images/<br />
    ISO_MAX_SIZE=4400<br />
    BACKUP_PROG_EXCLUDE=( "${BACKUP_PROG_EXCLUDE[@]}"<br />
    '/backup'<br />
    '/home/exedor/images' )<br />
    COPY_AS_IS_EXCLUDE=( ${copy_as_is_exclude[@]}<br />
    '/backup'<br />
    '/home/exedor/images' )</p>
</li>
<li>
<p>Are you using legacy BIOS or UEFI boot?<br />
    Legacy BIOS</p>
</li>
<li>
<p>Brief description of the issue:<br />
    The ISO image is created. When I burn it to disk and then try and
    use it, the restore process gets to "Running mkinitrd..." and then
    gets stuck and does not proceed. There is no activity of any kind
    from system LEDs. It just gets stuck. I left it that way for a half
    hour, just to be sure.</p>
</li>
<li>
<p>Work-around, if any:<br />
    USB backup and restore works flawlessly so right now, that's the
    work around.</p>
</li>
</ul>
<h4 id="gdha_commented_at_2017-11-22_0726"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/1592#issuecomment-346265248">2017-11-22 07:26</a>:<a class="headerlink" href="#gdha_commented_at_2017-11-22_0726" title="Permanent link">&para;</a></h4>
<p>@exedor Could you see in a second window what it was doing at that time?
And, could you paste the last lines from the rear.log?</p>
<h4 id="gdha_commented_at_2017-11-29_1908"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/1592#issuecomment-347963626">2017-11-29 19:08</a>:<a class="headerlink" href="#gdha_commented_at_2017-11-29_1908" title="Permanent link">&para;</a></h4>
<p>I just restored a fedora 26:</p>
<pre><code>Restored 3543 MiB in 191 seconds [avg. 18997 KiB/sec]
Restoring finished.
Recreating directories (with permissions) from /var/lib/rear/recovery/directories_permissions_owner_group
Patching '/mnt/local/etc/default/grub' instead of 'etc/sysconfig/grub'
Running mkinitrd...
Updated initrd with new drivers for kernel 4.11.12-100.fc24.x86_64+debug.
Running mkinitrd...
Updated initrd with new drivers for kernel 4.11.12-100.fc24.x86_64.
Running mkinitrd...
Updated initrd with new drivers for kernel 4.13.15-100.fc25.x86_64+debug.
Running mkinitrd...
Updated initrd with new drivers for kernel 4.13.15-100.fc25.x86_64.
Running mkinitrd...
Updated initrd with new drivers for kernel 4.13.15-200.fc26.x86_64+debug.
Running mkinitrd...
Updated initrd with new drivers for kernel 4.13.15-200.fc26.x86_64.
Skip installing GRUB Legacy boot loader because GRUB 2 is installed (grub-probe or grub2-probe exist).
Installing GRUB2 boot loader
Finished recovering your system. You can explore it under '/mnt/local'.
</code></pre>
<p>without any problems.</p>
<h4 id="gdha_commented_at_2018-02-23_0949"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/1592#issuecomment-367961390">2018-02-23 09:49</a>:<a class="headerlink" href="#gdha_commented_at_2018-02-23_0949" title="Permanent link">&para;</a></h4>
<p>We could not reproduce this problem the user had. No further feedback
received - closing it - if needed it can be re-opened.</p>
<h4 id="exedor_commented_at_2018-05-29_0513"><img src="https://avatars.githubusercontent.com/u/6391864?u=f29593e509021c433bdf23c37efbe71f8ced8a6e&v=4" width="50"><a href="https://github.com/exedor">exedor</a> commented at <a href="https://github.com/rear/rear/issues/1592#issuecomment-392654839">2018-05-29 05:13</a>:<a class="headerlink" href="#exedor_commented_at_2018-05-29_0513" title="Permanent link">&para;</a></h4>
<p>OK, I'm finally getting back to this. I'm still having the same problem
on several of the systems I'm trying to restore to. I have other systems
with older Biostar motherboards and everything works fine. However I
still get this behavior on a bunch of systems. The USB works great, but
the ISO fails every time and hangs on this mkinitrd step. I have tried
grabbing an alternate console and am unable to do so. What is the trick
to making that work?</p>
<p>I can hit Ctrl-C and it tries to run mkinitrd again. Then I hit Ctrl-C
again and then it finally stops. I've looked at the log before exiting
and I'm not finding much that is useful. Can we re-open this?</p>
<h4 id="jcarter3d_commented_at_2019-03-18_1902"><img src="https://avatars.githubusercontent.com/u/48693522?v=4" width="50"><a href="https://github.com/jcarter3d">jcarter3d</a> commented at <a href="https://github.com/rear/rear/issues/1592#issuecomment-474057649">2019-03-18 19:02</a>:<a class="headerlink" href="#jcarter3d_commented_at_2019-03-18_1902" title="Permanent link">&para;</a></h4>
<p>I'm hitting this while trying to "rear recover" RHEL 7.6 images (on 10
machines).<br />
Is there a work-around I can run after "rear recover" hangs on the
"Running mkinitrd..." screen?</p>
<p>The previously mentioned work-arounds seem to be for those who which to
build a new image. I'm just hoping to recover the images I already have
for now.</p>
<h4 id="exedor_commented_at_2019-03-20_1906"><img src="https://avatars.githubusercontent.com/u/6391864?u=f29593e509021c433bdf23c37efbe71f8ced8a6e&v=4" width="50"><a href="https://github.com/exedor">exedor</a> commented at <a href="https://github.com/rear/rear/issues/1592#issuecomment-474986804">2019-03-20 19:06</a>:<a class="headerlink" href="#exedor_commented_at_2019-03-20_1906" title="Permanent link">&para;</a></h4>
<p>I'm happy someone else is finally running into this. We have gone to
strictly USB image backup and restore and abandoned the much more cost
effective option of using DVD disks. That at least kept us running while
we work to address other far more pressing issues. Ever time I think I
can get back to this to find root cause and provide more/better
troubleshooting info to the devs, I get blind sided by some other urgent
crisis :(</p>
<h4 id="jsmeix_commented_at_2019-03-21_0856"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1592#issuecomment-475152275">2019-03-21 08:56</a>:<a class="headerlink" href="#jsmeix_commented_at_2019-03-21_0856" title="Permanent link">&para;</a></h4>
<p>@exedor<br />
FYI two side notes regarding "USB image backup and restore":</p>
<ol>
<li></li>
</ol>
<p>See what the description about <code>MIGRATION_MODE</code> in default.conf<br />
<a href="https://raw.githubusercontent.com/rear/rear/master/usr/share/rear/conf/default.conf">https://raw.githubusercontent.com/rear/rear/master/usr/share/rear/conf/default.conf</a><br />
reads about "an ultimate disaster" that could happen when your USB
disk<br />
with your backup has same size as your target system harddisk, see<br />
<a href="https://github.com/rear/rear/issues/1271">https://github.com/rear/rear/issues/1271</a><br />
This issue is mitigated since ReaR 2.3 because since ReaR 2.3 there is<br />
improved MIGRATION_MODE autodetection when the disk layout looks
ambiguous<br />
so that ReaR 2.3 is more fail-safe against recreating on a possibly
wrong disk, cf.<br />
<a href="http://relax-and-recover.org/documentation/release-notes-2-4">http://relax-and-recover.org/documentation/release-notes-2-4</a></p>
<ol>
<li></li>
</ol>
<p>There is a general problem when the ReaR recovery system<br />
was booted from a normal disk device like a USB disk, see<br />
<a href="https://github.com/rear/rear/issues/1854">https://github.com/rear/rear/issues/1854</a></p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2024 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2017-11-22.1592.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
