<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#1662 PR merged: Initial Arm Support - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#1662 PR merged: Initial Arm Support";
        var mkdocs_page_input_path = "issues/2017-12-25.1662.pr.merged.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#1662 PR merged: Initial Arm Support</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="1662_pr_merged_initial_arm_support"><a href="https://github.com/rear/rear/pull/1662">#1662 PR</a> <code>merged</code>: Initial Arm Support<a class="headerlink" href="#1662_pr_merged_initial_arm_support" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>cleanup</code>, <code>fixed / solved / done</code></p>
<h4 id="lukey3332_opened_issue_at_2017-12-25_1232"><img src="https://avatars.githubusercontent.com/u/17516425?v=4" width="50"><a href="https://github.com/Lukey3332">Lukey3332</a> opened issue at <a href="https://github.com/rear/rear/pull/1662">2017-12-25 12:32</a>:<a class="headerlink" href="#lukey3332_opened_issue_at_2017-12-25_1232" title="Permanent link">&para;</a></h4>
<p>#1197<br />
This PR adds support for Arm Devices (and improves compatibility for all
Architectures). It should work with Raspberry Pis, most TI and Allwinner
Devices.<br />
Currently only OUTPUT=PXE is supported and you'll need to manually craft
an bootable Disk with the Kernel and Initrd. Also Automatic Bootloader
detection is not implemented and you'll need to set BOOTLOADER to either
"ARM", which is just an Dummy and does nothing, or "ARM-ALLWINNER" which
will backup and restore the Allwinner Bootloader. For Raspberry and most
TI Devices it should be enough to include the first fat partition
(containing the MLO or bootcode.bin) in the Backup to Backup the
Bootloader.<br />
This has been tested on an Allwinner pcduino. Testing for other Devices
welcome!</p>
<h4 id="schlomo_commented_at_2017-12-31_1356"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/pull/1662#issuecomment-354605204">2017-12-31 13:56</a>:<a class="headerlink" href="#schlomo_commented_at_2017-12-31_1356" title="Permanent link">&para;</a></h4>
<p>Thanks a lot @Lukey3332 for starting to work on ARM support. It seems to
me that there are actually 3 topics included in your PR:</p>
<ol>
<li>add support for MMCBLK (great idea!)</li>
<li>clean up and consolidate the kernel guessing code (another great
    idea!)</li>
<li>add support for ARM ALLWINNER (nice!)</li>
</ol>
<p>IMHO 1) and 3) look fine, 2) looks to me like it could benefit from a
little bit more work, as now the kernel guessing happens twice: once in
one of the <code>300_copy_kernel.sh</code> scripts and then once more in
<code>400_guess_kernel.sh</code> I am wondering if you can simplify the code even
more and if those <code>300_copy_kernel.sh</code> scripts are actually still
necessary, especially since none of them actually *<em>copies</em> * the
kernel. @rear/contributors what do you think?</p>
<p>About 3) the allwinner scripts, could you kindly move them to a suitable
architecture dependant sub-folder? <code>rear dump</code> will show you which ones
you can use.</p>
<p>Finally, could you kindly provide us a <code>rear dump</code> here for reference so
that we can see how ReaR reads your system? Thanks a lot!</p>
<h4 id="lukey3332_commented_at_2018-01-08_1856"><img src="https://avatars.githubusercontent.com/u/17516425?v=4" width="50"><a href="https://github.com/Lukey3332">Lukey3332</a> commented at <a href="https://github.com/rear/rear/pull/1662#issuecomment-356059950">2018-01-08 18:56</a>:<a class="headerlink" href="#lukey3332_commented_at_2018-01-08_1856" title="Permanent link">&para;</a></h4>
<p>Hi,<br />
The <code>400_guess_kernel.sh</code> was intended as fallback, if the current
Architecture has no Kernel selection/guessing Code. I already thought
about moving the Allwinner Bootloader Code to an architecture folder,
but on arm the output of <code>uname -m</code> is inconsistent, so far I've seen
<code>armv[45678][lb]</code>, <code>aarch64</code> and <code>aarch64_be</code>.<br />
The output of <code>rear dump</code> is below.</p>
<pre><code>Relax-and-Recover 2.3 / Git
Using log file: /var/log/rear/rear-lukasduino.log.lockless
Dumping out configuration and system information
System definition:
                                    ARCH = Linux-armv7l
                                      OS = GNU/Linux
                        OS_MASTER_VENDOR = 
                       OS_MASTER_VERSION = 9
                   OS_MASTER_VENDOR_ARCH = armv7l
                OS_MASTER_VENDOR_VERSION = 9
           OS_MASTER_VENDOR_VERSION_ARCH = 9/armv7l
                               OS_VENDOR = Debian
                              OS_VERSION = 9
                          OS_VENDOR_ARCH = Debian/armv7l
                       OS_VENDOR_VERSION = Debian/9
                  OS_VENDOR_VERSION_ARCH = Debian/9/armv7l
Configuration tree:
                       Linux-armv7l.conf : missing/empty
                          GNU/Linux.conf : OK
                             armv7l.conf : missing/empty
                                  9.conf : missing/empty
                           9/armv7l.conf : missing/empty
                             Debian.conf : missing/empty
                      Debian/armv7l.conf : missing/empty
                           Debian/9.conf : missing/empty
                    Debian/9/armv7l.conf : missing/empty
                               site.conf : missing/empty
                              local.conf : OK
Backup with NETFS
              NETFS_KEEP_OLD_BACKUP_COPY = 1
                            NETFS_PREFIX = lukasduino
              NETFS_RESTORE_CAPABILITIES = No
                  BACKUP_INTEGRITY_CHECK = 
                         BACKUP_MOUNTCMD = 
                     BACKUP_ONLY_EXCLUDE = no
                     BACKUP_ONLY_INCLUDE = no
                          BACKUP_OPTIONS = user=xxx,cache=strict,password=xxx,noperm
      BACKUP_RESTORE_MOVE_AWAY_DIRECTORY = /var/lib/rear/moved_away_after_backup_restore/
          BACKUP_RESTORE_MOVE_AWAY_FILES = 
                    BACKUP_RSYNC_OPTIONS = --sparse --archive --hard-links --numeric-ids --stats
                  BACKUP_SELINUX_DISABLE = 1
                             BACKUP_TYPE = 
                        BACKUP_UMOUNTCMD = 
                              BACKUP_URL = cifs://xxx/pcduino/
Backup program is 'tar':
                             BACKUP_PROG = tar
                     BACKUP_PROG_ARCHIVE = backup
            BACKUP_PROG_COMPRESS_OPTIONS = -I lzop
             BACKUP_PROG_COMPRESS_SUFFIX = .lzop
               BACKUP_PROG_CRYPT_ENABLED = 0
                   BACKUP_PROG_CRYPT_KEY = 
               BACKUP_PROG_CRYPT_OPTIONS = /usr/bin/openssl des3 -salt -k 
             BACKUP_PROG_DECRYPT_OPTIONS = /usr/bin/openssl des3 -d -k 
                     BACKUP_PROG_EXCLUDE = /tmp/* /dev/shm/* /var/lib/rear/output/*
                     BACKUP_PROG_INCLUDE = 
                     BACKUP_PROG_OPTIONS = --anchored
      BACKUP_PROG_OPTIONS_CREATE_ARCHIVE = 
     BACKUP_PROG_OPTIONS_RESTORE_ARCHIVE = 
                      BACKUP_PROG_SUFFIX = .tar
       BACKUP_PROG_WARN_PARTIAL_TRANSFER = 1
Output to PXE
                   PXE_CONFIG_GRUB_STYLE = 
                         PXE_CONFIG_PATH = /var/lib/rear/output
                       PXE_CONFIG_PREFIX = rear-
                          PXE_CONFIG_URL = 
                        PXE_CREATE_LINKS = MAC
                        PXE_RECOVER_MODE = 
                    PXE_REMOVE_OLD_LINKS = 
                             PXE_TFTP_IP = 
                           PXE_TFTP_PATH = /var/lib/rear/output
                         PXE_TFTP_PREFIX = lukasduino.
                            PXE_TFTP_URL = 
                         OUTPUT_MOUNTCMD = 
                          OUTPUT_OPTIONS = 
                           OUTPUT_PREFIX = lukasduino
                       OUTPUT_PREFIX_PXE = 
                        OUTPUT_UMOUNTCMD = 
                              OUTPUT_URL = file:///root
                           RESULT_MAILTO =

/usr/share/rear/lib/validated/Debian/9/armv7l.txt
Your system is not yet validated. Please carefully check all functions
and create a validation record with 'rear validate'. This will help others
to know about the validation status of Relax-and-Recover on this system.
Saving /var/log/rear/rear-lukasduino.log.lockless as /var/log/rear/rear-lukasduino.log
</code></pre>
<h4 id="lukey3332_commented_at_2018-01-14_1919"><img src="https://avatars.githubusercontent.com/u/17516425?v=4" width="50"><a href="https://github.com/Lukey3332">Lukey3332</a> commented at <a href="https://github.com/rear/rear/pull/1662#issuecomment-357534656">2018-01-14 19:19</a>:<a class="headerlink" href="#lukey3332_commented_at_2018-01-14_1919" title="Permanent link">&para;</a></h4>
<p>@ArnoutVerbeken<br />
Did you see this already? It would be cool to have this Tested on an
Raspberry Pi.</p>
<h4 id="gdha_commented_at_2018-01-27_1203"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/pull/1662#issuecomment-360980346">2018-01-27 12:03</a>:<a class="headerlink" href="#gdha_commented_at_2018-01-27_1203" title="Permanent link">&para;</a></h4>
<p>@schlomo @jsmeix @gozora @schabrolles Please have a look at this PR.
Would be nice to merge.</p>
<h4 id="lukey3332_commented_at_2018-02-06_1859"><img src="https://avatars.githubusercontent.com/u/17516425?v=4" width="50"><a href="https://github.com/Lukey3332">Lukey3332</a> commented at <a href="https://github.com/rear/rear/pull/1662#issuecomment-363528209">2018-02-06 18:59</a>:<a class="headerlink" href="#lukey3332_commented_at_2018-02-06_1859" title="Permanent link">&para;</a></h4>
<p>From a quick look, the separate Kernel-Selection Scripts seem to have
their purpose. I think cleaning them up should be done by someone who
can test it on all Architectures.</p>
<h4 id="gdha_commented_at_2018-02-09_0742"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/pull/1662#issuecomment-364359066">2018-02-09 07:42</a>:<a class="headerlink" href="#gdha_commented_at_2018-02-09_0742" title="Permanent link">&para;</a></h4>
<p>@schlomo @jsmeix @schabrolles If you could have a peek at the code and
approve or give comments for improvements that would be fine.</p>
<h4 id="jsmeix_commented_at_2018-02-09_0914"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1662#issuecomment-364377877">2018-02-09 09:14</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-02-09_0914" title="Permanent link">&para;</a></h4>
<p>@gdha<br />
I know - I know ... it is on my todo list,<br />
but I know nothing about ARM architecture<br />
so that I could at most have a basically<br />
blind look (oxymoron intended ;-)<br />
at the plain code...</p>
<h4 id="jsmeix_commented_at_2018-02-09_0958"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1662#issuecomment-364388623">2018-02-09 09:58</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-02-09_0958" title="Permanent link">&para;</a></h4>
<p>@Lukey3332<br />
FYI in general regarding Schlomo's finding</p>
<pre>
LogPrint "Warning: BOOTLOADER = ARM is just an Dummy!"
</pre>

<p>see<br />
<a href="http://blog.schlomo.schapiro.org/2015/04/warning-is-waste-of-my-time.html">http://blog.schlomo.schapiro.org/2015/04/warning-is-waste-of-my-time.html</a></p>
<p>I fully agree with Schlomo and furthermore I even recommend to never
shout<br />
at the (poor) user i.e. neither use ALL-CAPS nor exclamation marks.</p>
<p>As far as I understand your description about BOOTLOADER="ARM" in
default.conf<br />
it is perfectly valid when the user specifies BOOTLOADER="ARM" in his
local.conf<br />
and the user must manually explicity specify BOOTLOADER for ARM<br />
which means the user knows about what BOOTLOADER="ARM" means<br />
so that there is no need to warn the user about his setting.</p>
<p>Strictly speaking there is no need to tell the user anything about
settings<br />
that he must do manually and explicitly so that at most there could be<br />
a plain information message, e.g. something like</p>
<pre>
LogPrint "Skipping bootloader setup (BOOTLOADER=ARM)"
</pre>

<h4 id="jsmeix_commented_at_2018-02-09_1348"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1662#issuecomment-364438142">2018-02-09 13:48</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-02-09_1348" title="Permanent link">&para;</a></h4>
<p>@Lukey3332<br />
in your initial<br />
<a href="https://github.com/rear/rear/pull/1662#issue-160052060">https://github.com/rear/rear/pull/1662#issue-160052060</a><br />
you wrote that "Currently only OUTPUT=PXE is supported"<br />
but I fail to find "PXE" in your code - perhaps I overlooked
something?<br />
I wonder if there should be a test somewhere<br />
that lets "rear mkrescue/mkbackup" error out<br />
when not OUTPUT=PXE is used?<br />
For my general reasoning behind such tests have a look at<br />
<a href="https://github.com/rear/rear/issues/1718#issuecomment-361871332">https://github.com/rear/rear/issues/1718#issuecomment-361871332</a></p>
<h4 id="jsmeix_commented_at_2018-02-12_1047"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1662#issuecomment-364887136">2018-02-12 10:47</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-02-12_1047" title="Permanent link">&para;</a></h4>
<p>@Lukey3332<br />
many thanks for your latest adaptions.</p>
<p>If there are no further objections I would like to merge it today
afternoon.</p>
<h4 id="jsmeix_commented_at_2018-02-13_0843"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1662#issuecomment-365189256">2018-02-13 08:43</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-02-13_0843" title="Permanent link">&para;</a></h4>
<p>@Lukey3332<br />
many thanks for your valuable contribution to ReaR!</p>
<p>Now since you implemented the basics for ARM support<br />
it should be relatively easy for other ARM users to<br />
enhance and adapt that to support more ARM devices.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2023 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2017-12-25.1662.pr.merged.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
