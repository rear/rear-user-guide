<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#731 Issue closed: Use os-release instead of lsb_release - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#731 Issue closed: Use os-release instead of lsb_release";
        var mkdocs_page_input_path = "issues/2015-12-04.731.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../development/squash-git-log-commments.html">How to squash git log comments into one line</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#731 Issue closed: Use os-release instead of lsb_release</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="731_issue_closed_use_os-release_instead_of_lsb_release"><a href="https://github.com/rear/rear/issues/731">#731 Issue</a> <code>closed</code>: Use os-release instead of lsb_release<a class="headerlink" href="#731_issue_closed_use_os-release_instead_of_lsb_release" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>fixed / solved / done</code>, <code>minor bug</code></p>
<h4 id="schlomo_opened_issue_at_2015-12-04_0950"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> opened issue at <a href="https://github.com/rear/rear/issues/731">2015-12-04 09:50</a>:<a class="headerlink" href="#schlomo_opened_issue_at_2015-12-04_0950" title="Permanent link">&para;</a></h4>
<p>I think that
<a href="http://www.freedesktop.org/software/systemd/man/os-release.html">os-release</a>
is a good thing. All systemd based distros will ship that file and the
content is well defined. We can pull all or at least most of our info
from there as well.</p>
<p>I would therefore propose a completely different approach:</p>
<ul>
<li>Write code to parse
    <a href="http://www.freedesktop.org/software/systemd/man/os-release.html">os-release</a>
    properly, following all the hints from the man page.</li>
<li>On distros that ship <code>os-release</code> remove <code>lsb*</code> from the package
    dependencies.</li>
<li>Use <code>os-release</code> if <code>lsb_release</code> is not available.</li>
</ul>
<p>The result will be a smooth migration with minimal impact. And it is
upgrade safe as we don't run any code on package installation. And it
also works when you run ReaR from source code :-)</p>
<p>See 613ba6f379e0ad93e47f707f1ae351d781008732 for full discussion</p>
<h4 id="gdha_commented_at_2016-01-21_0906"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/731#issuecomment-173506157">2016-01-21 09:06</a>:<a class="headerlink" href="#gdha_commented_at_2016-01-21_0906" title="Permanent link">&para;</a></h4>
<p>Milestone (1.18) removed. No idea when this one will be fixed.</p>
<h4 id="gdha_commented_at_2016-02-22_1011"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/731#issuecomment-187106767">2016-02-22 10:11</a>:<a class="headerlink" href="#gdha_commented_at_2016-02-22_1011" title="Permanent link">&para;</a></h4>
<p>Issue #778 is a related issue.</p>
<h4 id="gdha_commented_at_2016-02-22_1055"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/731#issuecomment-187122001">2016-02-22 10:55</a>:<a class="headerlink" href="#gdha_commented_at_2016-02-22_1055" title="Permanent link">&para;</a></h4>
<p>referenced to the wrong issue - should have been #778. This issue has
not been resolved yet!</p>
<h4 id="schlomo_commented_at_2017-06-20_0954"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/731#issuecomment-309704395">2017-06-20 09:54</a>:<a class="headerlink" href="#schlomo_commented_at_2017-06-20_0954" title="Permanent link">&para;</a></h4>
<p>Just had a look again, with <code>ID</code> and <code>ID_LIKE</code> and <code>VERSION_ID</code> it
contains IMHO all that we need to know.</p>
<p>@jsmeix would this be a way for more recent SUSE systems to avoid
creating this <code>os.conf</code> during the RPM build process? The big big
downside of build-time configuration is that a simple <code>make install</code>
does not yield the same result as installing the package (hit me today
on SLES10).</p>
<h4 id="jsmeix_commented_at_2017-06-20_1249"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/731#issuecomment-309742737">2017-06-20 12:49</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-06-20_1249" title="Permanent link">&para;</a></h4>
<p>That build-time created os.conf file should definitely be dropped<br />
for newer ReaR versions at least for SUSE because<br />
since
<a href="https://github.com/rear/rear/pull/1241">https://github.com/rear/rear/pull/1241</a><br />
the SetOSVendorAndVersion function results "the right stuff"<br />
at least for SUSE (regardless whether or not my current<br />
implementation is really the best way to do it).</p>
<p>@schlomo<br />
I fully agree that basically all build-time settings<br />
have the problem that they may be wrong during run-time.</p>
<p>FYI:<br />
I was hit by a missing os.conf when I used a git clone via</p>
<pre>
# git clone https://github.com/rear/rear.git

# cd rear
</pre>

<h4 id="gdha_commented_at_2017-07-11_1024"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/731#issuecomment-314401893">2017-07-11 10:24</a>:<a class="headerlink" href="#gdha_commented_at_2017-07-11_1024" title="Permanent link">&para;</a></h4>
<p>@schlomo on SLES10 I only find <code>/etc/lsb-release</code> and/or
<code>/etc/SuSE-release</code> files, so that we still need to differentiate I
guess</p>
<h4 id="gdha_commented_at_2017-07-19_1509"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/731#issuecomment-316418231">2017-07-19 15:09</a>:<a class="headerlink" href="#gdha_commented_at_2017-07-19_1509" title="Permanent link">&para;</a></h4>
<p>post-pone to release 2.3</p>
<h4 id="gdha_commented_at_2017-11-28_1548"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/731#issuecomment-347566442">2017-11-28 15:48</a>:<a class="headerlink" href="#gdha_commented_at_2017-11-28_1548" title="Permanent link">&para;</a></h4>
<p>@jsmeix Could you paste from a few SLES versions the output of
<code>grep "ID" /etc/os-release</code> please?</p>
<h4 id="jsmeix_commented_at_2017-11-29_0908"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/731#issuecomment-347796875">2017-11-29 09:08</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-11-29_0908" title="Permanent link">&para;</a></h4>
<p>SLE10:</p>
<pre>
# cat /etc/issue | grep -v '^$'
Welcome to SUSE Linux Enterprise Server 10 SP4 (x86_64) ...

# grep "ID" /etc/os-release
grep: /etc/os-release: No such file or directory
</pre>

<p>SLE11</p>
<pre>
# cat /etc/issue | grep -v '^$'
Welcome to SUSE Linux Enterprise Desktop 11 SP3 (i586) ...

# grep "ID" /etc/os-release
grep: /etc/os-release: No such file or directory
</pre>

<p>SLE12:</p>
<pre>
# cat /etc/issue | grep -v '^$'
Welcome to SUSE Linux Enterprise Server 12 SP2 (x86_64) ...

# grep "ID" /etc/os-release
VERSION_ID="12.2"
ID="sles"
</pre>

<p>openSUSE Leap (is based on SLE12):</p>
<pre>
# cat /etc/issue | grep -v '^$'
Welcome to openSUSE Leap 42.1 ...

# grep "ID" /etc/os-release
VERSION_ID="42.1"
ID=opensuse
ID_LIKE="suse"
</pre>

<p>openSUSE Tumbleweed (continuously changing rolling release):</p>
<pre>
# cat /etc/issue | grep -v '^$'
Welcome to openSUSE Tumbleweed 20170620 ...

# grep "ID" /etc/os-release
ID=opensuse
ID_LIKE="suse"
VERSION_ID="20170620"
</pre>

<h4 id="gdha_commented_at_2017-11-29_1710"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/731#issuecomment-347929173">2017-11-29 17:10</a>:<a class="headerlink" href="#gdha_commented_at_2017-11-29_1710" title="Permanent link">&para;</a></h4>
<p>@schlomo @jsmeix @gozora If we would remove <code>os.conf</code> spec generation
from the <em>spec</em> file would it be an option to generate one on the
<strong>prep</strong> work-flow? The file would be re-generated each time then, but
that would fix capturing OS upgrades (VERSION_ID that would change)?</p>
<h4 id="gdha_commented_at_2017-12-11_0813"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/731#issuecomment-350651095">2017-12-11 08:13</a>:<a class="headerlink" href="#gdha_commented_at_2017-12-11_0813" title="Permanent link">&para;</a></h4>
<p>Issue #1639 will pick up where we left this issue. This one can be
closed.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2025 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2015-12-04.731.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
