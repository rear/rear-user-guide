<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#785 Issue closed: USB Not Booting - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#785 Issue closed: USB Not Booting";
        var mkdocs_page_input_path = "issues/2016-02-25.785.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
      <li class="breadcrumb-item active">#785 Issue closed: USB Not Booting</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="785_issue_closed_usb_not_booting"><a href="https://github.com/rear/rear/issues/785">#785 Issue</a> <code>closed</code>: USB Not Booting<a class="headerlink" href="#785_issue_closed_usb_not_booting" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>support / question</code></p>
<h4 id="bfsworks_opened_issue_at_2016-02-25_0855"><img src="https://avatars.githubusercontent.com/u/17188098?v=4" width="50"><a href="https://github.com/bfsworks">bfsworks</a> opened issue at <a href="https://github.com/rear/rear/issues/785">2016-02-25 08:55</a>:<a class="headerlink" href="#bfsworks_opened_issue_at_2016-02-25_0855" title="Permanent link">&para;</a></h4>
<ul>
<li>rear version (/usr/sbin/rear -V): 1.17.2</li>
<li>OS version (cat /etc/rear/os.conf or lsb_release -a): CentOS 5.8
    x86_64</li>
<li>rear configuration files (cat /etc/rear/site.conf or cat
    /etc/rear/local.conf):<br />
    BACKUP=NETFS<br />
    OUTPUT=USB<br />
    BACKUP_PROG=rsync<br />
    BACKUP_URL=usb:///dev/disk/by-label/REAR-000<br />
    CLONE_ALL_USERS_GROUPS=y</li>
<li>Brief description of the issue: USB failing to boot</li>
<li>Work-around, if any: Replacing variable SYSLINUX_PREFIX from
    /boot/syslinux to empty.</li>
</ul>
<p>After trying all sorts of different versions of syslinux and extlinux we
found that even though our CentOS repo installed syslinux and extlinux
version 4.02 our USB would not boot from the files inside the
/boot/sysconfig directory. Looking into the bootloader-functions.sh I
found the logic that is syslinux_version is greater than 3.35 then to
set the SYSLINUX_PREFIX to /boot/syslinux. Unfortunately this broke the
ability for the USB to boot properly. It may not be a pretty with the
files outside of the boot directory but atleast it works.</p>
<p>Not sure on this logic and may need to be re-reviewed.</p>
<h4 id="bfsworks_commented_at_2016-02-25_1000"><img src="https://avatars.githubusercontent.com/u/17188098?v=4" width="50"><a href="https://github.com/bfsworks">bfsworks</a> commented at <a href="https://github.com/rear/rear/issues/785#issuecomment-188700476">2016-02-25 10:00</a>:<a class="headerlink" href="#bfsworks_commented_at_2016-02-25_1000" title="Permanent link">&para;</a></h4>
<p>Just also realized that the backup images are not showing up in the main
menu. I see the "include /rear/syslinux.cfg" in extlinux.conf (which is
now in the top level of the drive) and the /rear/syslinux.cfg file
exists and looks ok. Is there something strange going on where files in
directories on USB are not accessible during boot? I can mount the drive
and see all the files exist. It is just strange that once I moved all
the syslinux/extlinux files out of /boot/syslinux and into the base
drive the USB boots and now it appears the include to another file in a
directory is not working.</p>
<p>Thoughts?</p>
<h4 id="gdha_commented_at_2016-02-25_1326"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/785#issuecomment-188784090">2016-02-25 13:26</a>:<a class="headerlink" href="#gdha_commented_at_2016-02-25_1326" title="Permanent link">&para;</a></h4>
<p>It might be that our syslinux/extlinux logic is not compatible with RHEL
5 anymore?</p>
<h4 id="bfsworks_commented_at_2016-02-25_1338"><img src="https://avatars.githubusercontent.com/u/17188098?v=4" width="50"><a href="https://github.com/bfsworks">bfsworks</a> commented at <a href="https://github.com/rear/rear/issues/785#issuecomment-188788146">2016-02-25 13:38</a>:<a class="headerlink" href="#bfsworks_commented_at_2016-02-25_1338" title="Permanent link">&para;</a></h4>
<p>Since we are working with 4.02 of syslinux/extlinux and a newer version
of rear is it possible to trick rear by editing the os.conf to use newer
logic?</p>
<h4 id="bfsworks_commented_at_2016-02-25_1414"><img src="https://avatars.githubusercontent.com/u/17188098?v=4" width="50"><a href="https://github.com/bfsworks">bfsworks</a> commented at <a href="https://github.com/rear/rear/issues/785#issuecomment-188800160">2016-02-25 14:14</a>:<a class="headerlink" href="#bfsworks_commented_at_2016-02-25_1414" title="Permanent link">&para;</a></h4>
<p>Ill be back at it again tonight for Round 3. Let me know if there is
anything that I can provide that can help get rear working again for
CentOS 5. Trial and error is getting me closer but it takes awhile to
follow the code trail. We are in process of migrating but still have
older systems that will go until not supported by CentOS.</p>
<h4 id="gdha_commented_at_2016-02-25_1443"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/785#issuecomment-188815132">2016-02-25 14:43</a>:<a class="headerlink" href="#gdha_commented_at_2016-02-25_1443" title="Permanent link">&para;</a></h4>
<p>@bfsworks Perhaps run a <code>rear -vD mkrescue</code> and provide the logging so
we can see what happens in the background with syslinux/extlinux</p>
<h4 id="bfsworks_commented_at_2016-02-26_0528"><img src="https://avatars.githubusercontent.com/u/17188098?v=4" width="50"><a href="https://github.com/bfsworks">bfsworks</a> commented at <a href="https://github.com/rear/rear/issues/785#issuecomment-189119058">2016-02-26 05:28</a>:<a class="headerlink" href="#bfsworks_commented_at_2016-02-26_0528" title="Permanent link">&para;</a></h4>
<p>Well I removed the syslinux and extlinux packages installed via CentOS
repo and installed syslinux version 5
<a href="http://www.syslinux.org/wiki/index.php?title=Download">here</a> and ran
make install. I also removed the rear package as installed by CentOS
repo and installed the RPM
<a href="http://download.opensuse.org/repositories/Archiving:/Backup:/Rear/CentOS_CentOS-5/x86_64/">here</a>.
Going to try a fresh format and backup workflows and report back. This
could be a case of packages issues.</p>
<h4 id="bfsworks_commented_at_2016-02-26_0929"><img src="https://avatars.githubusercontent.com/u/17188098?v=4" width="50"><a href="https://github.com/bfsworks">bfsworks</a> commented at <a href="https://github.com/rear/rear/issues/785#issuecomment-189187694">2016-02-26 09:29</a>:<a class="headerlink" href="#bfsworks_commented_at_2016-02-26_0929" title="Permanent link">&para;</a></h4>
<p>I think I am going nuts! All of these issues that I thought were heading
towards the right direction might just come down to the USB drive we
have. I just tried a personal USB thumb drive and it worked on first try
without any manual modifications. Going to do some further testing to
make sure. The USB drive we are having problems with is a 1TB USB Drive.
I am not sure if there are any partition size issues with extlinux?
Going around in circles for 3 days. Time to take a break and circle back
around with I have some other USB devices to test.</p>
<h4 id="gdha_commented_at_2016-02-26_0946"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/785#issuecomment-189193981">2016-02-26 09:46</a>:<a class="headerlink" href="#gdha_commented_at_2016-02-26_0946" title="Permanent link">&para;</a></h4>
<p>@bfsworks I have just a centos5 running ans was planning to do a test
myself</p>
<h4 id="bfsworks_commented_at_2016-02-26_0949"><img src="https://avatars.githubusercontent.com/u/17188098?v=4" width="50"><a href="https://github.com/bfsworks">bfsworks</a> commented at <a href="https://github.com/rear/rear/issues/785#issuecomment-189195997">2016-02-26 09:49</a>:<a class="headerlink" href="#bfsworks_commented_at_2016-02-26_0949" title="Permanent link">&para;</a></h4>
<p>That would be much appreciated and a needed sanity check. Look forward
to hearing what you find.</p>
<h4 id="gdha_commented_at_2016-02-26_1434"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/785#issuecomment-189305655">2016-02-26 14:34</a>:<a class="headerlink" href="#gdha_commented_at_2016-02-26_1434" title="Permanent link">&para;</a></h4>
<p>Just tested a complete cycle (mkbackup/restore) with success
(rear-1.17.2):</p>
<pre><code>2016-02-26 13:59:19 Including output/USB/Linux-i386/30_create_extlinux.sh
2016-02-26 13:59:19 USB syslinux version:
2016-02-26 13:59:19 System syslinux version: 4.02
2016-02-26 13:59:19 Features based on syslinux version: 4.02
2016-02-26 13:59:19 Using syslinux prefix: boot/syslinux
mkdir: created directory `/tmp/rear.eXTmqcuYIWF3577/outputfs/rear'
mkdir: created directory `/tmp/rear.eXTmqcuYIWF3577/outputfs/rear/centos5'
mkdir: created directory `/tmp/rear.eXTmqcuYIWF3577/outputfs/rear/centos5/20160226.1359'
2016-02-26 13:59:19 Creating rear/centos5/20160226.1359/syslinux.cfg
2016-02-26 13:59:19 Creating /rear/syslinux.cfg
2016-02-26 13:59:19 Processing rear/centos5/20160226.1359/syslinux.cfg
mkdir: created directory `/tmp/rear.eXTmqcuYIWF3577/outputfs/boot'
mkdir: created directory `/tmp/rear.eXTmqcuYIWF3577/outputfs/boot/syslinux'
2016-02-26 13:59:19 Creating boot/syslinux/extlinux.conf
</code></pre>
<p>Therefore, most likely it was the USB device doing difficult.</p>
<h4 id="bfsworks_commented_at_2016-02-29_1921"><img src="https://avatars.githubusercontent.com/u/17188098?v=4" width="50"><a href="https://github.com/bfsworks">bfsworks</a> commented at <a href="https://github.com/rear/rear/issues/785#issuecomment-190343202">2016-02-29 19:21</a>:<a class="headerlink" href="#bfsworks_commented_at_2016-02-29_1921" title="Permanent link">&para;</a></h4>
<p>Will have some new USB drives to test tomorrow and I will be sure to
report back.</p>
<h4 id="bfsworks_commented_at_2016-03-08_1013"><img src="https://avatars.githubusercontent.com/u/17188098?v=4" width="50"><a href="https://github.com/bfsworks">bfsworks</a> commented at <a href="https://github.com/rear/rear/issues/785#issuecomment-193704202">2016-03-08 10:13</a>:<a class="headerlink" href="#bfsworks_commented_at_2016-03-08_1013" title="Permanent link">&para;</a></h4>
<p>I have tested three new and different USB drives, Western Digital,
Seagate, and Transcend. mkrescue goes fine, but boot up does now. Tried
booting on multiple machines as well so I know it is not a bios issue.
Bios is properly booting the drives but keep getting a "Boot error".
Playing around with bootloader.functions.sh I changed the boot directory
from /boot/syslinux to /boot/extlinux and that allows the boot to take a
step further and display the main menu. Unfortunately once I do this the
includes for the rescue menu's are not displayed.</p>
<p>Going to go back to system default everything and post the debug log and
start from scratch.</p>
<h4 id="bfsworks_commented_at_2016-03-09_0502"><img src="https://avatars.githubusercontent.com/u/17188098?v=4" width="50"><a href="https://github.com/bfsworks">bfsworks</a> commented at <a href="https://github.com/rear/rear/issues/785#issuecomment-194114280">2016-03-09 05:02</a>:<a class="headerlink" href="#bfsworks_commented_at_2016-03-09_0502" title="Permanent link">&para;</a></h4>
<p>Well I have updated syslinux/extlinux to 6.03 and I can boot the USB
every time with no "Boot error" or any modifications to the rear code.
Possibly some of the newer 2TB USB SCSI/SATA drives will only work with
newer versions of the syslinux project. Now the problem I have is that
the Include directive for /rear/syslinux.cfg does not load. The Include
directive works as if I move the syslinux.cfg file into /boot/syslinux/
folder and change the include to "include syslinux.cfg" it works.</p>
<p>So I can now consistently boot several USB drives but with updating to
syslinux 6.03 there seems to be some sort of working directory issue
where files in /rear/* cannot be included :(. If you could retest with
syslinux 6.03 and see if anything stands out of why the INCLUDE
directive does not pull in files from the /rear/ folder that would be
great.</p>
<p>I am almost there I hope....</p>
<h4 id="gdha_commented_at_2016-03-09_0908"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/785#issuecomment-194194877">2016-03-09 09:08</a>:<a class="headerlink" href="#gdha_commented_at_2016-03-09_0908" title="Permanent link">&para;</a></h4>
<p>@bfsworks Good news for you at last. Concerning the include directive:
is a bit weird as it seems to work for most users. Could you give an
example of your configuration?</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2023 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2016-02-25.785.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
