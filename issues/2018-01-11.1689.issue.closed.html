<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#1689 Issue closed: ReaR recovery system in /tmp/rear.random/rootfs is broken: 'ldd /bin/bash' failed - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#1689 Issue closed: ReaR recovery system in /tmp/rear.random/rootfs is broken: \u0027ldd /bin/bash\u0027 failed";
        var mkdocs_page_input_path = "issues/2018-01-11.1689.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#1689 Issue closed: ReaR recovery system in /tmp/rear.random/rootfs is broken: 'ldd /bin/bash' failed</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="1689_issue_closed_rear_recovery_system_in_tmprearrandomrootfs_is_broken_ldd_binbash_failed"><a href="https://github.com/rear/rear/issues/1689">#1689 Issue</a> <code>closed</code>: ReaR recovery system in /tmp/rear.random/rootfs is broken: 'ldd /bin/bash' failed<a class="headerlink" href="#1689_issue_closed_rear_recovery_system_in_tmprearrandomrootfs_is_broken_ldd_binbash_failed" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>support / question</code>, <code>fixed / solved / done</code></p>
<h4 id="start3_opened_issue_at_2018-01-11_0805"><img src="https://avatars.githubusercontent.com/u/7348757?v=4" width="50"><a href="https://github.com/StarT3">StarT3</a> opened issue at <a href="https://github.com/rear/rear/issues/1689">2018-01-11 08:05</a>:<a class="headerlink" href="#start3_opened_issue_at_2018-01-11_0805" title="Permanent link">&para;</a></h4>
<p>Hello</p>
<p>Relax-and-Recover 2.3 / 2017-12-20<br />
Got it from<br />
sh -c "echo 'deb
<a href="http://download.opensuse.org/repositories/Archiving:/Backup:/Rear/xUbuntu_14.04/">http://download.opensuse.org/repositories/Archiving:/Backup:/Rear/xUbuntu_14.04/</a>
/' &gt; /etc/apt/sources.list.d/rear.list" &amp; apt-get install rear<br />
Ubuntu 14.04.4 LTS<br />
config part mostly default except:</p>
<pre><code>OS_VENDOR=Ubuntu
OS_VERSION=14.04
BACKUP=BAREOS
OUTPUT=ISO
BAREOS_CLIENT="vm544617-fd"
OUTPUT_URL=nfs://"some ip here"/bareos
</code></pre>
<p><em>* Are you using legacy BIOS or UEFI boot?</em> Not sure, vm on hyper-v,
should be BIOS as Ubuntu 14 does not support Gen2 VM under Hyper-v.</p>
<p><em>* Brief description of the issue:</em><br />
While creating mkrescue, i've got error 'ReaR recovery system in
'/tmp/rear.Vg2RenPJRWcnylR/rootfs' is broken: 'ldd /bin/bash' failed'
There is no real bug, just misconfiguration of my server. I'm not so
familiar with linux.</p>
<pre><code>root@vm544617:~# rear -d -D -v mkrescue
Relax-and-Recover 2.3 / 2017-12-20
Using log file: /var/log/rear/rear-vm544617.log
Creating disk layout
Using guessed bootloader 'GRUB'
Creating root filesystem layout
Copying logfile /var/log/rear/rear-vm544617.log into initramfs as '/tmp/rear-vm544617-partial-2018-01-11T10:36:23+0300.log'
Copying files and directories
Copying binaries and libraries
Copying kernel modules
Copying all files in /lib*/firmware/
ERROR: 
====================
BUG in /usr/share/rear/build/default/980_verify_rootfs.sh line 29:
'ReaR recovery system in '/tmp/rear.Vg2RenPJRWcnylR/rootfs' is broken: 'ldd /bin/bash' failed'
--------------------
Please report this issue at https://github.com/rear/rear/issues
and include the relevant parts from /var/log/rear/rear-vm544617.log
preferably with full debug information via 'rear -d -D mkrescue'
====================
Aborting due to an error, check /var/log/rear/rear-vm544617.log for details
You should also rm -Rf /tmp/rear.Vg2RenPJRWcnylR
Terminated
</code></pre>
<p>And here is the part of log file</p>
<pre><code>2018-01-11 10:36:31.589289699 Including build/default/980_verify_rootfs.sh
2018-01-11 10:36:31.591107999 Entering debugscripts mode via 'set -x'.
+ source /usr/share/rear/build/default/980_verify_rootfs.sh
+++ filesystem_name /tmp/rear.Vg2RenPJRWcnylR/rootfs
+++ local path=/tmp/rear.Vg2RenPJRWcnylR/rootfs
++++ awk 'END { print $6 }'
++++ df -Pl /tmp/rear.Vg2RenPJRWcnylR/rootfs
+++ local fs=/tmp
+++ [[ -z /tmp ]]
+++ echo /tmp
++ local rootfs_dir_fs_mountpoint=/tmp
++ grep -qE '^\S+ /tmp \S+ \S*\bnoexec\b\S* ' /proc/mounts
++ Log 'Testing that /tmp/rear.Vg2RenPJRWcnylR/rootfs contains a usable system'
+++ date '+%Y-%m-%d %H:%M:%S.%N '
++ local 'timestamp=2018-01-11 10:36:31.607589799 '
++ test 1 -gt 0
++ echo '2018-01-11 10:36:31.607589799 Testing that /tmp/rear.Vg2RenPJRWcnylR/rootfs contains a usable system'
2018-01-11 10:36:31.607589799 Testing that /tmp/rear.Vg2RenPJRWcnylR/rootfs contains a usable system
++ chroot /tmp/rear.Vg2RenPJRWcnylR/rootfs /bin/bash -c true
++ Log 'Testing '\''ldd /bin/bash'\'' to ensure '\''ldd'\'' works for the subsequent '\''ldd'\'' tests'
+++ date '+%Y-%m-%d %H:%M:%S.%N '
++ local 'timestamp=2018-01-11 10:36:31.612424799 '
++ test 1 -gt 0
++ echo '2018-01-11 10:36:31.612424799 Testing '\''ldd /bin/bash'\'' to ensure '\''ldd'\'' works for the subsequent '\''ldd'\'' tests'
2018-01-11 10:36:31.612424799 Testing 'ldd /bin/bash' to ensure 'ldd' works for the subsequent 'ldd' tests
++ chroot /tmp/rear.Vg2RenPJRWcnylR/rootfs /bin/ldd /bin/bash
chroot: failed to run command '/bin/ldd': No such file or directory
++ KEEP_BUILD_DIR=1
++ BugError 'ReaR recovery system in '\''/tmp/rear.Vg2RenPJRWcnylR/rootfs'\'' is broken: '\''ldd /bin/bash'\'' failed'
+++ CallerSource
</code></pre>
<p>When i manually run</p>
<pre><code>root@vm544617:/var/log/rear# chroot /tmp/rear.Vg2RenPJRWcnylR/rootfs
bash: tty: command not found
RESCUE vm544617:/ #
</code></pre>
<p>No other bash commands running - command not found for everyone. ldd
/bin/bash - command not found.<br />
Googling does not help. I believe there should be simple solution,
however i could not find it yet.</p>
<h4 id="jsmeix_commented_at_2018-01-11_1127"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1689#issuecomment-356907302">2018-01-11 11:27</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-01-11_1127" title="Permanent link">&para;</a></h4>
<p>Only a guess:<br />
Try without</p>
<pre>
OS_VENDOR=Ubuntu
OS_VERSION=14.04
</pre>

<p>see OS_VENDOR and OS_VERSION in<br />
usr/share/rear/conf/default.conf</p>
<h4 id="gozora_commented_at_2018-01-11_1156"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/1689#issuecomment-356913321">2018-01-11 11:56</a>:<a class="headerlink" href="#gozora_commented_at_2018-01-11_1156" title="Permanent link">&para;</a></h4>
<p>@StarT3 if
<a href="https://github.com/rear/rear/issues/1689#issuecomment-356907302">https://github.com/rear/rear/issues/1689#issuecomment-356907302</a>
does not work for you, please run <code>rear -d -D mkbackup</code> and attach here
newly created log (from <em>/var/log/rear/</em>).</p>
<p>V.</p>
<h4 id="start3_commented_at_2018-01-11_1332"><img src="https://avatars.githubusercontent.com/u/7348757?v=4" width="50"><a href="https://github.com/StarT3">StarT3</a> commented at <a href="https://github.com/rear/rear/issues/1689#issuecomment-356934725">2018-01-11 13:32</a>:<a class="headerlink" href="#start3_commented_at_2018-01-11_1332" title="Permanent link">&para;</a></h4>
<p><a href="https://github.com/rear/rear/files/1622749/rear-vm544617.log">rear-vm544617.log</a><br />
@jsmeix unfortunately default config didn't help.<br />
Attached log files.</p>
<h4 id="jsmeix_commented_at_2018-01-11_1355"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1689#issuecomment-356940530">2018-01-11 13:55</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-01-11_1355" title="Permanent link">&para;</a></h4>
<p>Yes, right now I tried "rear mkrescue" with</p>
<pre>
OS_VENDOR=Ubuntu
OS_VERSION=14.04
</pre>

<p>and it "just worked" for me on my SLES12 test system.</p>
<h4 id="jsmeix_commented_at_2018-01-11_1411"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1689#issuecomment-356945018">2018-01-11 14:11</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-01-11_1411" title="Permanent link">&para;</a></h4>
<p>@StarT3<br />
your manual</p>
<pre>
root@vm544617:/var/log/rear# chroot /tmp/rear.Vg2RenPJRWcnylR/rootfs
bash: tty: command not found
</pre>

<p>might indicate that perhaps something in etc/profile<br />
(and etc/bash.bashrc is a link to etc/profile)<br />
does not work in your recovery system?</p>
<p>The etc/profile in the recovery system is a copy<br />
of usr/share/rear/skel/default/etc/profile</p>
<p>E.g. there is a 'tty' call in etc/profile but I also have<br />
a matching bin/tty program in my recovery system.</p>
<p>Somehow your recovery system seems to be messed up<br />
but currently I cannot see what it is and I cannot reproduce it<br />
on my test systems.</p>
<h4 id="jsmeix_commented_at_2018-01-11_1429"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1689#issuecomment-356949870">2018-01-11 14:29</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-01-11_1429" title="Permanent link">&para;</a></h4>
<p>@StarT3<br />
in your rear-vm544617.log there is</p>
<pre>
+ source /etc/rear/local.conf
++ KERNEL_FILE=
++ KERNEL_VERSION=3.13.0-139-generic
++ KERNEL_CMDLINE=
++ COPY_KERNEL_PARAMETERS=('net.ifnames' 'biosdevname')
.
.
.
++ DRLM_ID=vm544617
</pre>

<p>i.e. your local.conf is like a whole default.conf<br />
and I am sure something therein is not right.</p>
<p>Use a usual (small) local.conf where you only set<br />
what you specifically need, see<br />
usr/share/rear/conf/examples</p>
<h4 id="jsmeix_commented_at_2018-01-11_1433"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/1689#issuecomment-356950974">2018-01-11 14:33</a>:<a class="headerlink" href="#jsmeix_commented_at_2018-01-11_1433" title="Permanent link">&para;</a></h4>
<p>@StarT3<br />
in general how to set up ReaR you may also have a look at<br />
<a href="http://relax-and-recover.org/documentation/">http://relax-and-recover.org/documentation/</a><br />
and the section "First steps with Relax-and-Recover" in<br />
<a href="https://en.opensuse.org/SDB:Disaster_Recovery">https://en.opensuse.org/SDB:Disaster_Recovery</a></p>
<h4 id="start3_commented_at_2018-01-11_1812"><img src="https://avatars.githubusercontent.com/u/7348757?v=4" width="50"><a href="https://github.com/StarT3">StarT3</a> commented at <a href="https://github.com/rear/rear/issues/1689#issuecomment-357013559">2018-01-11 18:12</a>:<a class="headerlink" href="#start3_commented_at_2018-01-11_1812" title="Permanent link">&para;</a></h4>
<p>Thank you @jsmeix , you were right about minimal config.</p>
<pre><code>OS_VENDOR=Ubuntu
OS_VERSION=14.04
BACKUP=BAREOS
OUTPUT=ISO
BAREOS_CLIENT='name'
OUTPUT_URL=nfs://someip/bareos
USE_STATIC_NETWORKING=n
</code></pre>
<p>did the trick.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2025 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2018-01-11.1689.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
