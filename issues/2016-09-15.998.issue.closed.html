<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#998 Issue closed: NFS support missing... - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#998 Issue closed: NFS support missing...";
        var mkdocs_page_input_path = "issues/2016-09-15.998.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#998 Issue closed: NFS support missing...</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="998_issue_closed_nfs_support_missing"><a href="https://github.com/rear/rear/issues/998">#998 Issue</a> <code>closed</code>: NFS support missing...<a class="headerlink" href="#998_issue_closed_nfs_support_missing" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>support / question</code>, <code>fixed / solved / done</code></p>
<h4 id="toomaskiisk_opened_issue_at_2016-09-15_1904"><img src="https://avatars.githubusercontent.com/u/7091168?v=4" width="50"><a href="https://github.com/toomaskiisk">toomaskiisk</a> opened issue at <a href="https://github.com/rear/rear/issues/998">2016-09-15 19:04</a>:<a class="headerlink" href="#toomaskiisk_opened_issue_at_2016-09-15_1904" title="Permanent link">&para;</a></h4>
<p>Relax-and-Recover 1.17.2 / Git<br />
OS_VENDOR=OracleServer<br />
OS_VERSION=6<br />
AUTOEXCLUDE_MULTIPATH=<br />
KERNEL_CMDLINE="<code>cat /proc/cmdline | sed -e 's/\(.*\)\(root=UUID=[a-z0-9-]*\)\(.*\)/\1\3/'</code>"<br />
OUTPUT=ISO<br />
BACKUP=NETFS<br />
BACKUP_URL=file:///backup/OS<br />
BACKUP_PROG_COMPRESS_OPTIONS=""<br />
BACKUP_PROG_COMPRESS_SUFFIX=""<br />
BACKUP_PROG_EXCLUDE=( '/u01/app/oraadm/diag/<em>' '/tmp/</em>' '/dev/shm/<em>'
'/u01/app/oraadm/admin' '/u01/data/</em>'
'/u01/app/oraadm/product/11.2.0/*/rdbms/audit' )</p>
<p>I need to recover system over NFS. ISO boots fine, but "rear recover"
gives error. Logs indicate there is no NFS support built in. What
options do I have now. Can I copy NFS support binaries from elsewhere or
something like that? I cannot add hardware to server.</p>
<h4 id="toomaskiisk_commented_at_2016-09-15_1908"><img src="https://avatars.githubusercontent.com/u/7091168?v=4" width="50"><a href="https://github.com/toomaskiisk">toomaskiisk</a> commented at <a href="https://github.com/rear/rear/issues/998#issuecomment-247422456">2016-09-15 19:08</a>:<a class="headerlink" href="#toomaskiisk_commented_at_2016-09-15_1908" title="Permanent link">&para;</a></h4>
<p>Can I use some other net prtocol for restore like FTP or SCP?</p>
<h4 id="gozora_commented_at_2016-09-15_1923"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/998#issuecomment-247426196">2016-09-15 19:23</a>:<a class="headerlink" href="#gozora_commented_at_2016-09-15_1923" title="Permanent link">&para;</a></h4>
<p>Hi,</p>
<blockquote>
<p>Logs indicate there is no NFS support built in</p>
</blockquote>
<p>Can you post these logs (or relevant parts at least)?</p>
<h4 id="toomaskiisk_commented_at_2016-09-15_1931"><img src="https://avatars.githubusercontent.com/u/7091168?v=4" width="50"><a href="https://github.com/toomaskiisk">toomaskiisk</a> commented at <a href="https://github.com/rear/rear/issues/998#issuecomment-247428117">2016-09-15 19:31</a>:<a class="headerlink" href="#toomaskiisk_commented_at_2016-09-15_1931" title="Permanent link">&para;</a></h4>
<p>Cant copy logs form there since it is on console. Error happens on step
06_mount_NETFS_path.sh and command mount -v -t nfs -o rw,noatime
<nfs path> <local path> complains about wrong options. Error is acutally
few lines long, and in the end there is hint that some filesystem types
may require /sbin/mount.<fstype> helpers. When checking, I see no mount
helpers under /sbin indeed.</p>
<h4 id="gozora_commented_at_2016-09-15_1931"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/998#issuecomment-247428189">2016-09-15 19:31</a>:<a class="headerlink" href="#gozora_commented_at_2016-09-15_1931" title="Permanent link">&para;</a></h4>
<p>hmm, now I realized ...<br />
<code>BACKUP_URL=file:///backup/OS</code><br />
can be the problem.<br />
Just a guess, but didn't you manually mounted NFS share to /backup/OS
?<br />
If so, try to scp rear tarball from NFS server to /backup/OS on your
clent and start <code>rear recover</code></p>
<p>This is just guess, so no guarantees.</p>
<h4 id="toomaskiisk_commented_at_2016-09-15_1940"><img src="https://avatars.githubusercontent.com/u/7091168?v=4" width="50"><a href="https://github.com/toomaskiisk">toomaskiisk</a> commented at <a href="https://github.com/rear/rear/issues/998#issuecomment-247430301">2016-09-15 19:40</a>:<a class="headerlink" href="#toomaskiisk_commented_at_2016-09-15_1940" title="Permanent link">&para;</a></h4>
<p>Yes, I made backup on local filesystem assuming I can recover them later
over NFS. This used to work before, when I tested recovery palns, but
not today when I actually need it. This is bad, I believe it should be
fixed.<br />
But I got idea, since I have access to storage array, I create+mount new
filesstem there, scp my tarball (all 33GB of it) and then try to
restore.</p>
<h4 id="gozora_commented_at_2016-09-15_1951"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/998#issuecomment-247433762">2016-09-15 19:51</a>:<a class="headerlink" href="#gozora_commented_at_2016-09-15_1951" title="Permanent link">&para;</a></h4>
<p>This part of ReaR code is really not my domain, so maybe I'm wrong ...<br />
In <em>05_check_NETFS_requirements.sh</em> I've found some code that looks
to decide what binaries to copy depending on url_scheme (file:// in
your case), so this might be reason why you are missing nfs binaries.</p>
<p>In any case, if you use NFS server for backups you should change your
config to:<br />
<code>BACKUP_URL=nfs://&lt;nfs_server&gt;/&lt;path&gt;</code></p>
<p>Good luck with your restore!</p>
<h4 id="toomaskiisk_commented_at_2016-09-15_2131"><img src="https://avatars.githubusercontent.com/u/7091168?v=4" width="50"><a href="https://github.com/toomaskiisk">toomaskiisk</a> commented at <a href="https://github.com/rear/rear/issues/998#issuecomment-247461450">2016-09-15 21:31</a>:<a class="headerlink" href="#toomaskiisk_commented_at_2016-09-15_2131" title="Permanent link">&para;</a></h4>
<p>Thanks, I got my problem solved and our main database server is fully
functional again. I can even sleep few hours tonight, really didnt hope
so. Please consider making more restore methods available by default.
This is because when things go wrong ,they often go multiple things at
once, and you never know in advance what parts of infrastructure will be
available.</p>
<h4 id="jsmeix_commented_at_2016-09-16_0737"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/998#issuecomment-247537654">2016-09-16 07:37</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-09-16_0737" title="Permanent link">&para;</a></h4>
<p>@gozora<br />
many thanks for your help!</p>
<p>@toomaskiisk<br />
you may have a look at the usr/share/rear/conf/examples/ files<br />
that are included in current rear versions (perhaps not yet<br />
in your 1.17.2 - I didn't check that) the current ones are at<br />
<a href="https://github.com/rear/rear/tree/master/usr/share/rear/conf/examples">https://github.com/rear/rear/tree/master/usr/share/rear/conf/examples</a><br />
FYI:<br />
I always do backup and restore via NFS and I always use</p>
<pre>
OUTPUT=ISO
BACKUP=NETFS
BACKUP_OPTIONS="nfsvers=3,nolock"
BACKUP_URL=nfs://your.NFS.server.IP/path/to/your/rear/backup
</pre>

<p>which always worked and works for me.</p>
<p>Regarding "rear recover gives error" see the section<br />
"Debugging issues with Relax-and-Recover (rear)" in<br />
<a href="https://en.opensuse.org/SDB:Disaster_Recovery">https://en.opensuse.org/SDB:Disaster_Recovery</a></p>
<p>According to
<a href="https://github.com/rear/rear/issues/998#issuecomment-247461450">https://github.com/rear/rear/issues/998#issuecomment-247461450</a>
"problem solved" I close this issue.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2024 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2016-09-15.998.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
