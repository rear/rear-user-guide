<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#2439 Issue closed: Boot from rescue ISO freezes at "pid_max: default: 32768 minimum: 301" on "ESXi 6.7 Update 2 and later" virtual machine - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#2439 Issue closed: Boot from rescue ISO freezes at \"pid_max: default: 32768 minimum: 301\" on \"ESXi 6.7 Update 2 and later\" virtual machine";
        var mkdocs_page_input_path = "issues/2020-06-25.2439.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/netfs_nas.html">Internal Backup with tar to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../scenarios/netfs_rsync.md">Internal Backup with rsync to NFS server</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/rbme.html">External Backup using RBME</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/restic.html">External Backup using restic</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../development/squash-git-log-commments.html">How to squash git log comments into one line</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#2439 Issue closed: Boot from rescue ISO freezes at "pid_max: default: 32768 minimum: 301" on "ESXi 6.7 Update 2 and later" virtual machine</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="2439_issue_closed_boot_from_rescue_iso_freezes_at_pid_max_default_32768_minimum_301_on_esxi_67_update_2_and_later_virtual_machine"><a href="https://github.com/rear/rear/issues/2439">#2439 Issue</a> <code>closed</code>: Boot from rescue ISO freezes at "pid_max: default: 32768 minimum: 301" on "ESXi 6.7 Update 2 and later" virtual machine<a class="headerlink" href="#2439_issue_closed_boot_from_rescue_iso_freezes_at_pid_max_default_32768_minimum_301_on_esxi_67_update_2_and_later_virtual_machine" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>support / question</code>, <code>fixed / solved / done</code>,
<code>external tool</code>, <code>not ReaR / invalid</code>, <code>special hardware or VM</code></p>
<h4 id="will-code-for-pizza_opened_issue_at_2020-06-25_1332"><img src="https://avatars.githubusercontent.com/u/19435718?u=ed79ce4705081dc23542358b2bc50f403c729924&v=4" width="50"><a href="https://github.com/will-code-for-pizza">will-code-for-pizza</a> opened issue at <a href="https://github.com/rear/rear/issues/2439">2020-06-25 13:32</a>:<a class="headerlink" href="#will-code-for-pizza_opened_issue_at_2020-06-25_1332" title="Permanent link">&para;</a></h4>
<h4 id="relax-and-recover_rear_issue_template">Relax-and-Recover (ReaR) Issue Template<a class="headerlink" href="#relax-and-recover_rear_issue_template" title="Permanent link">&para;</a></h4>
<p>Fill in the following items before submitting a new issue<br />
(quick response is not guaranteed with free support):</p>
<ul>
<li>
<p>ReaR version ("/usr/sbin/rear -V"):<br />
    2.4 to 2.6</p>
</li>
<li>
<p>OS version ("cat /etc/os-release" or "lsb_release -a" or "cat
    /etc/rear/os.conf"):<br />
    SuSE SLES 11.3</p>
</li>
<li>
<p>ReaR configuration files ("cat /etc/rear/site.conf" and/or "cat
    /etc/rear/local.conf"):</p>
</li>
</ul>
<p>site.conf</p>
<pre><code>BACKUP=NETFS
OUTPUT=ISO
RETENTION_TIME="Week"
USE_CFG2HTML=y
BACKUP_PROG=tar
BACKUP_PROG_COMPRESS_OPTIONS="--gzip"
LOGFILE="/var/log/rear/$HOSTNAME.log"
BACKUP_PROG_EXCLUDE=( '/mnt/*' '/cache/*' '/tmp/*' '/dev/shm/*' $VAR_DIR/output/\* )
BACKUP_PROG_INCLUDE=( '/*' '/boot/' '/home/*' '/opt/*' '/usr/*' '/var/*' '/oracleoem/*' )
</code></pre>
<p>local.conf</p>
<pre><code>NETFS_KEEP_OLD_BACKUP_COPY=yes
BACKUP_URL=nfs://139.1.xxx.xxx/srv/IMAGES/rear/
MIGRATION_MODE='true'
BOOTLOADER="GRUB"
USE_STATIC_NETWORKING="yes"
NETWORKING_PREPARATION_COMMANDS=( 'ip addr add 139.1.xx.xx/25 dev eth0' 'ip link set dev eth0 up' 'ip route add default via 139.1.xx.1' 'return' )
KERNEL_CMDLINE="cgroup_disable=memory" # otherwise it throws some cgroup errors while booting
</code></pre>
<ul>
<li>Hardware (PC or PowerNV BareMetal or ARM) or virtual machine (KVM
    guest or PoverVM LPAR):</li>
</ul>
<p>ESX virtual guest</p>
<ul>
<li>System architecture (x86 compatible or PPC64/PPC64LE or what exact
    ARM device):</li>
</ul>
<p>amd64</p>
<ul>
<li>Firmware (BIOS or UEFI or Open Firmware) and bootloader (GRUB or
    ELILO or Petitboot):</li>
</ul>
<p>BIOS / Grub</p>
<ul>
<li>Storage (local disk or SSD) and/or SAN (FC or iSCSI or FCoE) and/or
    multipath (DM or NVMe):</li>
</ul>
<p>vmdk-virtual disks on SAN Storage Backend</p>
<ul>
<li>Storage layout ("lsblk -ipo
    NAME,KNAME,PKNAME,TRAN,TYPE,FSTYPE,SIZE,MOUNTPOINT" or "lsblk" as
    makeshift):</li>
</ul>
<p>Could not be determined cause of hanging boot</p>
<ul>
<li>Description of the issue (ideally so that others can reproduce it):</li>
</ul>
<p>We want to P2V migrate a physical server to ESX virtual machine.<br />
While booting the rescue ISO into virtual machine,<br />
the boot from rescue ISO freezes at</p>
<pre><code>pid_max: default: 32768 minimum: 301
</code></pre>
<p>on ESX virtual machine</p>
<ul>
<li>Workaround, if any:</li>
</ul>
<p>NONE</p>
<h4 id="jsmeix_commented_at_2020-06-25_1403"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2439#issuecomment-649562573">2020-06-25 14:03</a>:<a class="headerlink" href="#jsmeix_commented_at_2020-06-25_1403" title="Permanent link">&para;</a></h4>
<p>@will-code-for-pizza<br />
on my current openSUSE Leap 15.1 x86_64 home-office laptop I get</p>
<pre><code># dmesg | grep -3 pid_max

[    0.000000] tsc: Fast TSC calibration using PIT
[    0.004000] tsc: Detected 2394.502 MHz processor
[    0.004000] Calibrating delay loop (skipped), value calculated using timer frequency.. 4789.00 BogoMIPS (lpj=9578008)
[    0.004000] pid_max: default: 32768 minimum: 301
[    0.004000] ACPI: Core revision 20170303
[    0.004000] Security Framework initialized
[    0.004000] AppArmor: AppArmor initialized
ault: 32768 minimum: 301
</code></pre>
<p>so the <code>pid_max: default: 32768 minimum: 301</code> kernel message<br />
sems to be a normal info message that does not indicate an error.</p>
<p>I assume it freezes at something that happens after the<br />
<code>pid_max: default: 32768 minimum: 301</code> kernel message<br />
but I have not idea what that "something" is in your case<br />
(I am not at all a kernel expert).</p>
<p>In particular I cannot help with "VMware ESXi (formerly ESX)" issues<br />
because I neither have that nor did I ever use it.<br />
<a href="https://en.wikipedia.org/wiki/VMware_ESXi">https://en.wikipedia.org/wiki/VMware_ESXi</a><br />
is all I know about it.<br />
I use only QEMU/KVM virtual machines<br />
(but I am also not at all a QEMU/KVM expert).</p>
<h4 id="gdha_commented_at_2020-06-25_1416"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/2439#issuecomment-649572550">2020-06-25 14:16</a>:<a class="headerlink" href="#gdha_commented_at_2020-06-25_1416" title="Permanent link">&para;</a></h4>
<p>@will-code-for-pizza Try to add <code>MODULES=( 'all_modules' )</code> in your
local.conf file</p>
<h4 id="gozora_commented_at_2020-06-25_1424"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/2439#issuecomment-649580405">2020-06-25 14:24</a>:<a class="headerlink" href="#gozora_commented_at_2020-06-25_1424" title="Permanent link">&para;</a></h4>
<p>@will-code-for-pizza can you please execute following command on your
ORIGINAL system <code>find /usr/share/rear -type l | wc -l</code> and report back
the output (should be single number) ?</p>
<p>Happened to me some time ago that copying ReaR over winscp discarded
symbolic links which made ReaR recovery system un-bootable ...</p>
<p>V.</p>
<h4 id="jsmeix_commented_at_2020-06-25_1426"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2439#issuecomment-649581709">2020-06-25 14:26</a>:<a class="headerlink" href="#jsmeix_commented_at_2020-06-25_1426" title="Permanent link">&para;</a></h4>
<p>Since ReaR 2.5 <code>MODULES=( 'all_modules' )</code> is the default, cf.<br />
<a href="https://github.com/rear/rear/blob/master/doc/rear-release-notes.txt#L924">https://github.com/rear/rear/blob/master/doc/rear-release-notes.txt#L924</a></p>
<p>@will-code-for-pizza<br />
an offtopic question:<br />
What is <code>RETENTION_TIME="Week"</code> intended to do?<br />
I can only find <code>NSR_RETENTION_TIME</code> in the ReaR scripts<br />
but that only applies if you use <code>BACKUP=NSR</code>.</p>
<h4 id="will-code-for-pizza_commented_at_2020-06-25_1431"><img src="https://avatars.githubusercontent.com/u/19435718?u=ed79ce4705081dc23542358b2bc50f403c729924&v=4" width="50"><a href="https://github.com/will-code-for-pizza">will-code-for-pizza</a> commented at <a href="https://github.com/rear/rear/issues/2439#issuecomment-649585326">2020-06-25 14:31</a>:<a class="headerlink" href="#will-code-for-pizza_commented_at_2020-06-25_1431" title="Permanent link">&para;</a></h4>
<blockquote>
<p>What is RETENTION_TIME="Week" intended to do?</p>
</blockquote>
<p>You are right @jsmeix</p>
<p>I can only remember, this was an option in an older version of ReaR ( ~
1.7 )<br />
So I will remove this option.<br />
Thanks.</p>
<h4 id="jsmeix_commented_at_2020-06-25_1443"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2439#issuecomment-649593911">2020-06-25 14:43</a>:<a class="headerlink" href="#jsmeix_commented_at_2020-06-25_1443" title="Permanent link">&para;</a></h4>
<p>@gozora<br />
but how could something missing below usr/share/rear<br />
let booting freeze apparently while the kernel is in its startup phase<br />
(as far as I imagine what
<code>freezes at "pid_max: default: 32768 minimum: 301"</code> means)<br />
i.e. while only the kernel seems to be running?</p>
<p>Or actually it freezes during ReaR recovery system startup scripts?<br />
I have those symlinks of the ReaR recovery system startup scripts:</p>
<pre><code># find usr/share/rear -type l | grep skel
usr/share/rear/skel/default/etc/bash.bashrc
usr/share/rear/skel/default/usr/lib/systemd/system/multi-user.target.wants/sysinit.service
usr/share/rear/skel/default/usr/lib/systemd/system/multi-user.target.wants/getty.target
usr/share/rear/skel/default/usr/lib/systemd/system/multi-user.target.wants/systemd-journald.service
usr/share/rear/skel/default/usr/lib/systemd/system/multi-user.target.wants/sshd.service
usr/share/rear/skel/default/usr/lib/systemd/system/multi-user.target.wants/systemd-udev-trigger.service
usr/share/rear/skel/default/usr/lib/systemd/system/multi-user.target.wants/rear-boot-helper.service
usr/share/rear/skel/default/usr/lib/systemd/system/dbus.target.wants/dbus.service
usr/share/rear/skel/default/usr/lib/systemd/system/ctrl-alt-del.target
usr/share/rear/skel/default/usr/lib/systemd/system/sockets.target.wants/dbus.socket
usr/share/rear/skel/default/usr/lib/systemd/system/sockets.target.wants/systemd-logger.socket
usr/share/rear/skel/default/usr/lib/systemd/system/sockets.target.wants/systemd-shutdownd.socket
usr/share/rear/skel/default/usr/lib/systemd/system/sockets.target.wants/systemd-journald.socket
usr/share/rear/skel/default/usr/lib/systemd/system/sockets.target.wants/systemd-udevd-kernel.socket
usr/share/rear/skel/default/usr/lib/systemd/system/sockets.target.wants/syslog.socket
usr/share/rear/skel/default/usr/lib/systemd/system/sockets.target.wants/udev-kernel.socket
usr/share/rear/skel/default/usr/lib/systemd/system/sockets.target.wants/udev-control.socket
usr/share/rear/skel/default/usr/lib/systemd/system/sockets.target.wants/systemd-udevd-control.socket
usr/share/rear/skel/default/usr/lib/systemd/system/getty.target.wants/getty@tty0.service
usr/share/rear/skel/default/usr/lib/systemd/system/getty.target.wants/serial-getty@ttyS0.service
usr/share/rear/skel/default/usr/lib/systemd/system/default.target
</code></pre>
<p>Perhaps what actually freezes is PID1 a.k.a. systemd?</p>
<h4 id="gozora_commented_at_2020-06-25_1449"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/2439#issuecomment-649597539">2020-06-25 14:49</a>:<a class="headerlink" href="#gozora_commented_at_2020-06-25_1449" title="Permanent link">&para;</a></h4>
<p>@jsmeix discarded isn't the right word. The links were not missing. What
happened in my particular case was that symbolic links were present but
they were regular files with symbolic link target as their content.</p>
<p>Something like original symbolic link <code>/bin/ls -&gt; /usr/bin/ls</code> after
copied over winscp become:</p>
<pre><code># cat /bin/ls
/usr/bin/ls
</code></pre>
<h4 id="gozora_commented_at_2020-06-25_1451"><img src="https://avatars.githubusercontent.com/u/12116358?u=1c5ba9dcee5ca3082f03029a7fbe647efd30eb49&v=4" width="50"><a href="https://github.com/gozora">gozora</a> commented at <a href="https://github.com/rear/rear/issues/2439#issuecomment-649598943">2020-06-25 14:51</a>:<a class="headerlink" href="#gozora_commented_at_2020-06-25_1451" title="Permanent link">&para;</a></h4>
<p>Guess our Systemd setup didn't like one of
<code>/usr/share/rear/skel/default/usr/lib/systemd/system/</code> symbolic links
modified this way.</p>
<p>V.</p>
<h4 id="will-code-for-pizza_commented_at_2020-06-25_1454"><img src="https://avatars.githubusercontent.com/u/19435718?u=ed79ce4705081dc23542358b2bc50f403c729924&v=4" width="50"><a href="https://github.com/will-code-for-pizza">will-code-for-pizza</a> commented at <a href="https://github.com/rear/rear/issues/2439#issuecomment-649600321">2020-06-25 14:54</a>:<a class="headerlink" href="#will-code-for-pizza_commented_at_2020-06-25_1454" title="Permanent link">&para;</a></h4>
<p>Thanks a lot for all your support.</p>
<p>I use ReaR as an extracted TAR archive in /root/bin/rear-2.6/, so I
guess, @gozora 's issue is not my case today.<br />
The creation of the rescue ISO and the backup archive on the NFS target
runs fine.</p>
<p>Starting a libvirt/kvm virtual machine or another physical server with
this rescue ISO went fine.</p>
<p>Only this ESX vm freezes. :-(</p>
<p>Regards</p>
<h4 id="will-code-for-pizza_commented_at_2020-06-25_1455"><img src="https://avatars.githubusercontent.com/u/19435718?u=ed79ce4705081dc23542358b2bc50f403c729924&v=4" width="50"><a href="https://github.com/will-code-for-pizza">will-code-for-pizza</a> commented at <a href="https://github.com/rear/rear/issues/2439#issuecomment-649600942">2020-06-25 14:55</a>:<a class="headerlink" href="#will-code-for-pizza_commented_at_2020-06-25_1455" title="Permanent link">&para;</a></h4>
<blockquote>
<p>@will-code-for-pizza Try to add <code>MODULES=( 'all_modules' )</code> in your
local.conf file</p>
</blockquote>
<p>Unfortunatelly, this was NOT the solution.</p>
<h4 id="will-code-for-pizza_commented_at_2020-06-25_1456"><img src="https://avatars.githubusercontent.com/u/19435718?u=ed79ce4705081dc23542358b2bc50f403c729924&v=4" width="50"><a href="https://github.com/will-code-for-pizza">will-code-for-pizza</a> commented at <a href="https://github.com/rear/rear/issues/2439#issuecomment-649601749">2020-06-25 14:56</a>:<a class="headerlink" href="#will-code-for-pizza_commented_at_2020-06-25_1456" title="Permanent link">&para;</a></h4>
<blockquote>
<p>@will-code-for-pizza can you please execute following command on your
ORIGINAL system <code>find /usr/share/rear -type l | wc -l</code> and report back
the output (should be single number) ?</p>
<p>Happened to me some time ago that copying ReaR over winscp discarded
symbolic links which made ReaR recovery system un-bootable ...</p>
<p>V.</p>
</blockquote>
<p>149</p>
<h4 id="will-code-for-pizza_commented_at_2020-06-25_1458"><img src="https://avatars.githubusercontent.com/u/19435718?u=ed79ce4705081dc23542358b2bc50f403c729924&v=4" width="50"><a href="https://github.com/will-code-for-pizza">will-code-for-pizza</a> commented at <a href="https://github.com/rear/rear/issues/2439#issuecomment-649602693">2020-06-25 14:58</a>:<a class="headerlink" href="#will-code-for-pizza_commented_at_2020-06-25_1458" title="Permanent link">&para;</a></h4>
<blockquote>
<p>Thanks a lot for all your support.</p>
<p>I use ReaR as an extracted TAR archive in /root/bin/rear-2.6/, so I
guess, @gozora 's issue is not my case today.<br />
The creation of the rescue ISO and the backup archive on the NFS
target runs fine.</p>
<p>Starting a libvirt/kvm virtual machine or another physical server with
this rescue ISO went fine.</p>
<p>Only this ESX vm freezes. :-(</p>
<p>Regards</p>
</blockquote>
<p>By the way... The ESX vm has 16 GB RAM and 8 vCPUs.</p>
<h4 id="jsmeix_commented_at_2020-06-25_1500"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2439#issuecomment-649603848">2020-06-25 15:00</a>:<a class="headerlink" href="#jsmeix_commented_at_2020-06-25_1500" title="Permanent link">&para;</a></h4>
<p>For comparison:</p>
<pre><code># find usr/share/rear -type l | wc -l

149
</code></pre>
<p>I use latest ReaR upstream code.</p>
<p>By the way:<br />
My QEMU/KVM test systems have 2 GiB RAM and one virtual CPU.<br />
With <code>FIRMWARE_FILES=( 'no' )</code> it also works with only 1 GiB RAM.</p>
<h4 id="will-code-for-pizza_commented_at_2020-06-25_1513"><img src="https://avatars.githubusercontent.com/u/19435718?u=ed79ce4705081dc23542358b2bc50f403c729924&v=4" width="50"><a href="https://github.com/will-code-for-pizza">will-code-for-pizza</a> commented at <a href="https://github.com/rear/rear/issues/2439#issuecomment-649613605">2020-06-25 15:13</a>:<a class="headerlink" href="#will-code-for-pizza_commented_at_2020-06-25_1513" title="Permanent link">&para;</a></h4>
<blockquote>
<p>By the way:<br />
My QEMU/KVM test systems have 2 GiB RAM and one virtual CPU.<br />
With <code>FIRMWARE_FILES=( 'no' )</code> it also works with only 1 GiB RAM.</p>
</blockquote>
<p>Well, but this is not the problem solver :-(</p>
<h4 id="jsmeix_commented_at_2020-06-25_1520"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2439#issuecomment-649617558">2020-06-25 15:20</a>:<a class="headerlink" href="#jsmeix_commented_at_2020-06-25_1520" title="Permanent link">&para;</a></h4>
<p>@will-code-for-pizza<br />
I did not mean <code>FIRMWARE_FILES=( 'no' )</code> would help here<br />
I only meant that the ReaR recovery system does not need much RAM<br />
i.e. that 16 GB RAM should be more than enough.</p>
<p>By the way - also not meant as a problem solver:<br />
On my SLES11 SP4 system I have those kernel messages</p>
<pre><code># dmesg | grep -3 pid_max

[    0.000000] please try 'cgroup_disable=memory' option if you don't want memory cgroups
[    0.000000] Detected 2394.456 MHz processor.
[    0.008000] Calibrating delay loop (skipped) preset value.. 4788.91 BogoMIPS (lpj=9577824)
[    0.008000] pid_max: default: 32768 minimum: 301
[    0.008000] kdb version 4.4 by Keith Owens, Scott Lurndal. Copyright SGI, All Rights Reserved
[    0.008000] Security Framework initialized
[    0.008000] AppArmor: AppArmor initialized
</code></pre>
<p>so directly after <code>pid_max: default: 32768 minimum: 301</code><br />
it seems there is something keyboard related happening.<br />
Is there perhaps something special with the keyboard on your ESX VM?<br />
I.e. is there perhaps not a "normal" (virtual) keyboard?<br />
This is plain blind guesswork from me.</p>
<h4 id="will-code-for-pizza_commented_at_2020-06-25_1548"><img src="https://avatars.githubusercontent.com/u/19435718?u=ed79ce4705081dc23542358b2bc50f403c729924&v=4" width="50"><a href="https://github.com/will-code-for-pizza">will-code-for-pizza</a> commented at <a href="https://github.com/rear/rear/issues/2439#issuecomment-649637425">2020-06-25 15:48</a>:<a class="headerlink" href="#will-code-for-pizza_commented_at_2020-06-25_1548" title="Permanent link">&para;</a></h4>
<p>Short info: I have booted another VM on the ESX cluster successfully.<br />
The settings for the VM differs in</p>
<p>WORKING:<br />
Guest OS: Ubuntu Linux (64 Bit)<br />
Compatibility: ESX/ESXi 4.0 and later</p>
<p>vs.</p>
<p>NOT WORKING<br />
Guest OS: SuSE Linux Enterprise 11 (64-Bit)<br />
Compatibility: ESXi 6.7 Update 2 and later</p>
<p>I will now re-create a new virtual machine template and try again.</p>
<h4 id="will-code-for-pizza_commented_at_2020-06-25_1552"><img src="https://avatars.githubusercontent.com/u/19435718?u=ed79ce4705081dc23542358b2bc50f403c729924&v=4" width="50"><a href="https://github.com/will-code-for-pizza">will-code-for-pizza</a> commented at <a href="https://github.com/rear/rear/issues/2439#issuecomment-649639387">2020-06-25 15:52</a>:<a class="headerlink" href="#will-code-for-pizza_commented_at_2020-06-25_1552" title="Permanent link">&para;</a></h4>
<p>SOLVED.</p>
<p>VM Option --&gt; Compatibility: ESXi 6.7 Update 2 and later --&gt; BAD
SETTING</p>
<h4 id="jsmeix_commented_at_2020-06-26_0839"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2439#issuecomment-650061144">2020-06-26 08:39</a>:<a class="headerlink" href="#jsmeix_commented_at_2020-06-26_0839" title="Permanent link">&para;</a></h4>
<p>@will-code-for-pizza<br />
thank you for your feedback what the reason was and what the solution
is.</p>
<h4 id="jsmeix_commented_at_2020-06-26_1002"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/2439#issuecomment-650098241">2020-06-26 10:02</a>:<a class="headerlink" href="#jsmeix_commented_at_2020-06-26_1002" title="Permanent link">&para;</a></h4>
<p>@will-code-for-pizza<br />
I have a question out of curiosity:</p>
<p>I do not understand why the SLES11 Linux kernel freezes<br />
when it runs on a particular newer version of a virtual machine<br />
but works on an older version of that kind of virtual machine.</p>
<p>I could understand when some latest version of a guest program<br />
that requires some latest newest hardware stuff fails when it is<br />
run in an older version of a virtual machine because the older<br />
virtual machine does not provide virtualization of the required<br />
newest hardware.</p>
<p>But I do not understand the opposite because I would expect<br />
that an old-style guest program would work on latest versions<br />
of a virtual machine (i.e. I would expect newer virtual machine<br />
versions to behave backward compatible).</p>
<p>Could you perhaps explain what the reason behind is why<br />
it seems an "ESXi 6.7 Update 2" virtual machine does not behave<br />
backward compatible with an "ESX/ESXi 4.0" virtual machine?</p>
<p>I found<br />
<a href="https://docs.vmware.com/en/VMware-vSphere/7.0/com.vmware.vsphere.vm_admin.doc/GUID-64D4B1C9-CD5D-4C68-8B50-585F6A87EBA0.html">https://docs.vmware.com/en/VMware-vSphere/7.0/com.vmware.vsphere.vm_admin.doc/GUID-64D4B1C9-CD5D-4C68-8B50-585F6A87EBA0.html</a><br />
but that does not answer my question (or I fail to see the answer).</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2025 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2020-06-25.2439.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
