<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#3308 PR merged: In 990_verify_rootfs.sh show relative paths in user messages for files in ROOTFS_DIR - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#3308 PR merged: In 990_verify_rootfs.sh show relative paths in user messages for files in ROOTFS_DIR";
        var mkdocs_page_input_path = "issues/2024-09-03.3308.pr.merged.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/backup_netfs.html">Example of BACKUP=NETFS</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear29.html">Release Notes ReaR 2.9</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear28.html">Release Notes ReaR 2.8</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#3308 PR merged: In 990_verify_rootfs.sh show relative paths in user messages for files in ROOTFS_DIR</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="3308_pr_merged_in_990_verify_rootfssh_show_relative_paths_in_user_messages_for_files_in_rootfs_dir"><a href="https://github.com/rear/rear/pull/3308">#3308 PR</a> <code>merged</code>: In 990_verify_rootfs.sh show relative paths in user messages for files in ROOTFS_DIR<a class="headerlink" href="#3308_pr_merged_in_990_verify_rootfssh_show_relative_paths_in_user_messages_for_files_in_rootfs_dir" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>fixed / solved / done</code></p>
<h4 id="jsmeix_opened_issue_at_2024-09-03_1500"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> opened issue at <a href="https://github.com/rear/rear/pull/3308">2024-09-03 15:00</a>:<a class="headerlink" href="#jsmeix_opened_issue_at_2024-09-03_1500" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>Type: <strong>Enhancement</strong></p>
</li>
<li>
<p>Impact: <strong>High</strong></p>
</li>
</ul>
<p>From some SUSE customer support issues I learned<br />
that there is confusion what those messages mean,<br />
both for the user (i.e. for SUSE's customer) and<br />
also for our (i.e. SUSE's) customer support pepole,<br />
in particular when someone is not sufficiently<br />
experienced with ReaR to imagine what actually<br />
goes on behind the surface regardless of the<br />
misleading file names in those messages.</p>
<ul>
<li>Reference to related issue (URL):</li>
</ul>
<p><a href="https://github.com/rear/rear/pull/3250">https://github.com/rear/rear/pull/3250</a><br />
therein in particular<br />
<a href="https://github.com/rear/rear/pull/3250#discussion_r1676149339">https://github.com/rear/rear/pull/3250#discussion_r1676149339</a><br />
<a href="https://github.com/rear/rear/pull/3250#discussion_r1741535372">https://github.com/rear/rear/pull/3250#discussion_r1741535372</a><br />
<a href="https://github.com/rear/rear/pull/3250#discussion_r1741563610">https://github.com/rear/rear/pull/3250#discussion_r1741563610</a><br />
<a href="https://github.com/rear/rear/pull/3250#discussion_r1741631492">https://github.com/rear/rear/pull/3250#discussion_r1741631492</a><br />
<a href="https://github.com/rear/rear/pull/3250#discussion_r1741650136">https://github.com/rear/rear/pull/3250#discussion_r1741650136</a></p>
<p><a href="https://github.com/rear/rear/issues/3283">https://github.com/rear/rear/issues/3283</a><br />
therein only the first item</p>
<pre><code>strip the ReaR build including .../rootfs from the found library
</code></pre>
<ul>
<li>How was this pull request tested?</li>
</ul>
<p>See below.</p>
<ul>
<li>Description of the changes in this pull request:</li>
</ul>
<p>In build/default/990_verify_rootfs.sh enhanced<br />
how files from within the ReaR recovery system<br />
(i.e. files from within ROOTFS_DIR)<br />
are shown to the user:<br />
In user messages it is misleading to show<br />
the full path from within the recovery system<br />
without leading ROOTFS_DIR e.g. show<br />
/bin/parted for what actually is<br />
/var/tmp/rear.XXX/rootfs/bin/parted<br />
because for the user /bin/parted means<br />
the full path on his original system<br />
but there is no /bin/parted on the original<br />
system because there it is /usr/sbin/parted<br />
so to show files inside the recovery system to<br />
the user even without (the long) leading ROOTFS_DIR<br />
we can show them to the user as relative path<br />
i.e. without leading slashes e.g. as bin/parted<br />
when from the context it should be clear enough<br />
that a file inside the recovery system is meant.</p>
<h4 id="jsmeix_commented_at_2024-09-03_1501"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/3308#issuecomment-2326757481">2024-09-03 15:01</a>:<a class="headerlink" href="#jsmeix_commented_at_2024-09-03_1501" title="Permanent link">&para;</a></h4>
<p>On my SLES15-SP6 test VM:</p>
<pre><code>localhost:~/rear.github.master # usr/sbin/rear -D mkrescue
.
.
.
Running 'build' stage ======================
...
Testing that the ReaR recovery system in '/var/tmp/rear.xSgQ1crMhNqnBMq/rootfs' contains a usable system
Testing each binary with 'ldd' for 'not found' libraries within the ReaR recovery system
usr/lib64/systemd/libsystemd-core-254.so requires libraries where 'ldd' shows 'not found'
usr/lib64/systemd/libsystemd-core-254.so requires libsystemd-shared-254.so which exists as usr/lib64/systemd/libsystemd-shared-254.so
Testing that the existing programs in the PROGS array can be found as executable command within the ReaR recovery system
Testing that each program in the REQUIRED_PROGS array can be found as executable command within the ReaR recovery system
Running 'pack' stage ======================
</code></pre>
<h4 id="jsmeix_commented_at_2024-09-03_1507"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/3308#issuecomment-2326770720">2024-09-03 15:07</a>:<a class="headerlink" href="#jsmeix_commented_at_2024-09-03_1507" title="Permanent link">&para;</a></h4>
<p>On my SLES15-SP6 test VM<br />
with an (artificial) test by added</p>
<pre><code>rm $ROOTFS_DIR/usr/lib64/libparted.*
</code></pre>
<p>at the beginning of<br />
usr/share/rear/build/default/990_verify_rootfs.sh<br />
I get:</p>
<pre><code>localhost:~/rear.github.master # usr/sbin/rear -D mkrescue
.
.
.
Running 'build' stage ======================
...
Testing that the ReaR recovery system in '/var/tmp/rear.qpxM6Od0v6ySLjq/rootfs' contains a usable system
Testing each binary with 'ldd' for 'not found' libraries within the ReaR recovery system
bin/parted requires libraries where 'ldd' shows 'not found' (fatal by default)
bin/parted requires libparted.so.2 which could not be found in the ReaR recovery system
bin/partprobe requires libraries where 'ldd' shows 'not found' (fatal by default)
bin/partprobe requires libparted.so.2 which could not be found in the ReaR recovery system
usr/lib64/systemd/libsystemd-core-254.so requires libraries where 'ldd' shows 'not found'
usr/lib64/systemd/libsystemd-core-254.so requires libsystemd-shared-254.so which exists as usr/lib64/systemd/libsystemd-shared-254.so
ReaR recovery system in '/var/tmp/rear.qpxM6Od0v6ySLjq/rootfs' needs additional libraries, check /root/rear.github.master/var/log/rear/rear-localhost.log for details
Build area kept for investigation in '/var/tmp/rear.qpxM6Od0v6ySLjq', remove it when not needed
Testing that the existing programs in the PROGS array can be found as executable command within the ReaR recovery system
Testing that each program in the REQUIRED_PROGS array can be found as executable command within the ReaR recovery system
ERROR: ReaR recovery system in '/var/tmp/rear.qpxM6Od0v6ySLjq/rootfs' not usable (required libraries are missing)
Some latest log messages since the last called script 990_verify_rootfs.sh:
  chattr is /sbin/chattr
  mkfs is /sbin/mkfs
  mkfs.btrfs is /sbin/mkfs.btrfs
  btrfs is /sbin/btrfs
  mkswap is /sbin/mkswap
  cryptsetup is /sbin/cryptsetup
  dmsetup is /sbin/dmsetup
  ldconfig is /sbin/ldconfig
Aborting due to an error, check /root/rear.github.master/var/log/rear/rear-localhost.log for details
Exiting rear mkrescue (PID 24261) and its descendant processes ...
Running exit tasks
To remove the build area you may use (with caution): rm -Rf --one-file-system /var/tmp/rear.qpxM6Od0v6ySLjq
Terminated
</code></pre>
<h4 id="jsmeix_commented_at_2024-09-04_0739"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/3308#issuecomment-2328139914">2024-09-04 07:39</a>:<a class="headerlink" href="#jsmeix_commented_at_2024-09-04_0739" title="Permanent link">&para;</a></h4>
<p>Interesting output for another (artificial) test<br />
when I have</p>
<pre><code>rm $ROOTFS_DIR/usr/lib64/libparted.so.2.0.1
</code></pre>
<p>at the beginning of<br />
usr/share/rear/build/default/990_verify_rootfs.sh<br />
on my SLES15-SP6 test VM:</p>
<pre><code>localhost:~/rear.github.master # usr/sbin/rear -D mkrescue
.
.
.
Running 'build' stage ======================
...
Testing that the ReaR recovery system in '/var/tmp/rear.MvxJ9aZDT3VElGE/rootfs' contains a usable system
Testing each binary with 'ldd' for 'not found' libraries within the ReaR recovery system
bin/parted requires libraries where 'ldd' shows 'not found' (fatal by default)
bin/parted requires libparted.so.2 which exists as usr/lib64/libparted.so.2
bin/partprobe requires libraries where 'ldd' shows 'not found' (fatal by default)
bin/partprobe requires libparted.so.2 which exists as usr/lib64/libparted.so.2
usr/lib64/systemd/libsystemd-core-254.so requires libraries where 'ldd' shows 'not found'
usr/lib64/systemd/libsystemd-core-254.so requires libsystemd-shared-254.so which exists as usr/lib64/systemd/libsystemd-shared-254.so
Build area kept for investigation in '/var/tmp/rear.MvxJ9aZDT3VElGE', remove it when not needed
Testing that the existing programs in the PROGS array can be found as executable command within the ReaR recovery system
Testing that each program in the REQUIRED_PROGS array can be found as executable command within the ReaR recovery system
ERROR: ReaR recovery system in '/var/tmp/rear.MvxJ9aZDT3VElGE/rootfs' not usable (required libraries are missing)
Some latest log messages since the last called script 990_verify_rootfs.sh:
  chattr is /sbin/chattr
  mkfs is /sbin/mkfs
  mkfs.btrfs is /sbin/mkfs.btrfs
  btrfs is /sbin/btrfs
  mkswap is /sbin/mkswap
  cryptsetup is /sbin/cryptsetup
  dmsetup is /sbin/dmsetup
  ldconfig is /sbin/ldconfig
Aborting due to an error, check /root/rear.github.master/var/log/rear/rear-localhost.log for details
Exiting rear mkrescue (PID 5391) and its descendant processes ...
Running exit tasks
To remove the build area you may use (with caution): rm -Rf --one-file-system /var/tmp/rear.MvxJ9aZDT3VElGE
Terminated
</code></pre>
<p>Therein in particular this (and same for bin/partprobe)</p>
<pre><code>bin/parted requires libraries where 'ldd' shows 'not found' (fatal by default)
bin/parted requires libparted.so.2 which exists as usr/lib64/libparted.so.2
</code></pre>
<p>shows that it is not sufficient when something<br />
that is reported as 'not found' by 'ldd'<br />
actually exists within the recovery system<br />
to assume that then the associated program(s)<br />
will actually work within the recovery system.</p>
<p>In this case only the symlink<br />
/usr/lib64/libparted.so.2 exists<br />
but its link target (i.e. the actual library)<br />
does not exist so parted (and partprobe)<br />
cannot run within the recovery system.</p>
<p>See also<br />
<a href="https://github.com/rear/rear/issues/3283#issuecomment-2326795885">https://github.com/rear/rear/issues/3283#issuecomment-2326795885</a></p>
<h4 id="jsmeix_commented_at_2024-09-04_1236"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/3308#issuecomment-2328876718">2024-09-04 12:36</a>:<a class="headerlink" href="#jsmeix_commented_at_2024-09-04_1236" title="Permanent link">&para;</a></h4>
<p>How things look on my SLES15-SP6 test VM<br />
without any artificial test stuff:</p>
<p>In debug mode:</p>
<pre><code>localhost:~/rear.github.master # usr/sbin/rear -d mkrescue
...
Testing that the ReaR recovery system in '/var/tmp/rear.JdqkcGSuu13c4ZH/rootfs' contains a usable system
Testing each binary with 'ldd' for 'not found' libraries within the ReaR recovery system
usr/lib64/systemd/libsystemd-core-254.so requires libraries where 'ldd' shows 'not found'
usr/lib64/systemd/libsystemd-core-254.so requires libsystemd-shared-254.so which exists as usr/lib64/systemd/libsystemd-shared-254.so
</code></pre>
<p>In verbose mode:</p>
<pre><code>localhost:~/rear.github.master # usr/sbin/rear -v mkrescue
...
Testing that the ReaR recovery system in '/var/tmp/rear.idsaHMnfLWuWElp/rootfs' contains a usable system
usr/lib64/systemd/libsystemd-core-254.so requires libraries where 'ldd' shows 'not found'
usr/lib64/systemd/libsystemd-core-254.so requires libsystemd-shared-254.so which exists as usr/lib64/systemd/libsystemd-shared-254.so
</code></pre>
<p>In normal mode (i.e. non-verbose mode):</p>
<pre><code>localhost:~/rear.github.master # usr/sbin/rear mkrescue
localhost:~/rear.github.master #
</code></pre>
<p>i.e. in non-verbose mode there is no output.</p>
<h4 id="jsmeix_commented_at_2024-09-04_1252"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/3308#issuecomment-2328937465">2024-09-04 12:52</a>:<a class="headerlink" href="#jsmeix_commented_at_2024-09-04_1252" title="Permanent link">&para;</a></h4>
<p>@rear/contributors<br />
from my point of view things look OK to me.<br />
Please review this pull request as time permits.</p>
<p>A note against false expectations what I can do:<br />
This pull request is neither meant to<br />
(nor will I do via this pull request)<br />
implement additional separated things,<br />
e.g. things like what @schlomo proposed in<br />
<a href="https://github.com/rear/rear/pull/3250#discussion_r1741724854">https://github.com/rear/rear/pull/3250#discussion_r1741724854</a><br />
and<br />
<a href="https://github.com/rear/rear/issues/3283#issuecomment-2328276184">https://github.com/rear/rear/issues/3283#issuecomment-2328276184</a><br />
Separated issues should be done via separated pull requests.</p>
<h4 id="jsmeix_commented_at_2024-09-04_1336"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/3308#issuecomment-2329083068">2024-09-04 13:36</a>:<a class="headerlink" href="#jsmeix_commented_at_2024-09-04_1336" title="Permanent link">&para;</a></h4>
<p>@pcahyna @lzaoral<br />
regarding the above "1 failing checks" which is</p>
<pre><code>testing-farm:fedora-39-x86_64 — Tests failed ...
</code></pre>
<p>When I follow its "Details" link to<br />
<a href="https://github.com/rear/rear/pull/3308/checks?check_run_id=29654121837">https://github.com/rear/rear/pull/3308/checks?check_run_id=29654121837</a><br />
and therein follow the "Testing Farm" related link to<br />
<a href="https://artifacts.dev.testing-farm.io/7876f414-87eb-46f5-ad0b-d868b7e3f744/">https://artifacts.dev.testing-farm.io/7876f414-87eb-46f5-ad0b-d868b7e3f744/</a><br />
then this one shows (excerpts):</p>
<pre><code>/make-backup-and-restore-iso
...
testout.log
...
Run rear mkbackup
...
Running rear mkbackup (PID 4713 date 2024-09-04 07:39:41)
Command line options: /usr/sbin/rear -d mkbackup
...
Testing that the ReaR recovery system in '/var/tmp/rear.lJbPdFS9aflRgKC/rootfs' contains a usable system
Testing each binary with 'ldd' for 'not found' libraries within the ReaR recovery system
usr/lib64/systemd/libsystemd-core-254.16-1.fc39.so requires libraries where 'ldd' shows 'not found'
usr/lib64/systemd/libsystemd-core-254.16-1.fc39.so requires libsystemd-shared-254.16-1.fc39.so which exists as usr/lib64/systemd/libsystemd-shared-254.16-1.fc39.so
...
Running 'output' stage ======================
Let GRUB2 load kernel /isolinux/kernel
Let GRUB2 load initrd /isolinux/initrd.cgz
Set GRUB2 default root device via 'set root=cd0'
Let GRUB2 search root device via 'search --no-floppy --set=root --file /boot/efiboot.img'
grub2-mkstandalone may fail to make a bootable EFI image of GRUB2 (no /usr/*/grub*/x86_64-efi/moddep.lst file)
GRUB2 modules to load: ext2 fat part_gpt part_msdos
ERROR: Failed to make bootable EFI image of GRUB2 (error during grub2-mkstandalone of /var/tmp/rear.lJbPdFS9aflRgKC/tmp/mnt/EFI/BOOT/BOOTX64.efi)
Some latest log messages since the last called script 250_populate_efibootimg.sh:
  2024-09-04 07:41:09.368662434 Let GRUB2 load initrd /isolinux/initrd.cgz
  2024-09-04 07:41:09.375270792 Set GRUB2 default root device via 'set root=cd0'
  2024-09-04 07:41:09.378628607 Let GRUB2 search root device via 'search --no-floppy --set=root --file /boot/efiboot.img'
  /usr/share/rear/lib/_input-output-functions.sh: line 581: type: grub-mkstandalone: not found
  /usr/share/rear/lib/_input-output-functions.sh: line 581: type: grub-probe: not found
  2024-09-04 07:41:10.092032475 grub2-mkstandalone may fail to make a bootable EFI image of GRUB2 (no /usr/*/grub*/x86_64-efi/moddep.lst file)
  2024-09-04 07:41:10.095741686 GRUB2 modules to load: ext2 fat part_gpt part_msdos
  grub2-mkstandalone: error: /usr/lib/grub/x86_64-efi/modinfo.sh doesn't exist. Please specify --target or --directory.
You may use debugscript mode '-D' for full debug messages with 'set -x' output
Aborting due to an error, check /var/log/rear/rear-ip-172-31-27-236.log for details
</code></pre>
<p>where "testout.log" is a link to<br />
<a href="https://artifacts.dev.testing-farm.io/7876f414-87eb-46f5-ad0b-d868b7e3f744/work-backup-and-restorew7s7ztm_/tests/plans/backup-and-restore/execute/data/guest/default-0/make-backup-and-restore-iso-1/output.txt">https://artifacts.dev.testing-farm.io/7876f414-87eb-46f5-ad0b-d868b7e3f744/work-backup-and-restorew7s7ztm_/tests/plans/backup-and-restore/execute/data/guest/default-0/make-backup-and-restore-iso-1/output.txt</a></p>
<p>So - as far as I see - the reason why it fails<br />
has nothing to do with the changes in this pull request,<br />
actually the changes in this pull request seem to work well.</p>
<p>So - as far as I see - we can safely ignore that</p>
<pre><code>testing-farm:fedora-39-x86_64 — Tests failed ...
</code></pre>
<p>for this pull request here.</p>
<h4 id="jsmeix_commented_at_2024-09-04_1439"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/3308#issuecomment-2329253801">2024-09-04 14:39</a>:<a class="headerlink" href="#jsmeix_commented_at_2024-09-04_1439" title="Permanent link">&para;</a></h4>
<p>Regarding using $PRODUCT for the ReaR name (in long),<br />
i.e. via</p>
<pre><code>... PRODUCT="Relax-and-Recover"
</code></pre>
<p>in usr/sbin/rear e.g. for ReaR 2.7 online at<br />
<a href="https://github.com/rear/rear/blob/rear-2.7/usr/sbin/rear#L56">https://github.com/rear/rear/blob/rear-2.7/usr/sbin/rear#L56</a></p>
<p>Because one point of this pull request is<br />
to get the user messages shorter<br />
I don't think it is actually helpful for readability<br />
for the user to use <code>Relax-and-Recover</code><br />
instead of <code>ReaR</code> in user messages.</p>
<p>I think using everywhere the long form <code>Relax-and-Recover</code><br />
could even make our user messages look a bit<br />
like "marketing bullshit" - in particular because<br />
our users are often rather experienced (e.g. admins)<br />
who may feel rather annoyed to read in user messages<br />
again and again the long form <code>Relax-and-Recover</code><br />
instead of the established and well known<br />
abbreviation <code>ReaR</code>.</p>
<p>According to</p>
<pre><code># find usr/sbin/rear usr/share/rear/ -type f \
 | xargs grep -w 'ReaR' | grep -v ': *#' | wc -l

82

# find usr/sbin/rear usr/share/rear/ -type f \
 | xargs grep -w 'ReaR' | grep -v ': *#' \
 | cut -s -d ':' -f1 | sort -u | wc -l

39
</code></pre>
<p>we have currently about 82 code places<br />
in about 39 code files where we use <code>ReaR</code><br />
(probably some of them are "false positives").</p>
<p>In contrast according to</p>
<pre><code># find usr/sbin/rear usr/share/rear/ -type f \
 | xargs grep '$PRODUCT' | grep -v ': *#' | wc -l

39

# find usr/sbin/rear usr/share/rear/ -type f \
 | xargs grep '$PRODUCT' | grep -v ': *#' \
 | cut -s -d ':' -f1 | sort -u | wc -l

11
</code></pre>
<p>we have currently about 39 code places in about 11 files<br />
where <code>$PRODUCT</code> is used.</p>
<p>So currently it is common practice to use <code>ReaR</code>.</p>
<p>I think a proper solution could be<br />
to add another variable to usr/sbin/rear like</p>
<pre><code>... PRODUCT_ABBR="ReaR"
</code></pre>
<p>for the cases where the abbreviated form <code>ReaR</code><br />
should be used and then fix all the code places<br />
where currently <code>ReaR</code> is used literally.</p>
<h4 id="schlomo_commented_at_2024-09-04_1442"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/pull/3308#issuecomment-2329260236">2024-09-04 14:42</a>:<a class="headerlink" href="#schlomo_commented_at_2024-09-04_1442" title="Permanent link">&para;</a></h4>
<p>I don't want to delay this PR, so feel free to ignore.</p>
<p>About the product name variables, I guess we could also change
<code>PRODUCT=ReaR</code> and introduce <code>PRODUCT_LONG=Relax-and-Recover</code> as I
assume that we want to use more often the short name than the long name.</p>
<h4 id="jsmeix_commented_at_2024-09-05_1032"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/3308#issuecomment-2331177792">2024-09-05 10:32</a>:<a class="headerlink" href="#jsmeix_commented_at_2024-09-05_1032" title="Permanent link">&para;</a></h4>
<p>@rear/contributors<br />
unless there are objections<br />
I would like to merge it soon today...</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2025 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2024-09-03.3308.pr.merged.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
