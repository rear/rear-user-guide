<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>2017 04 17.1311.pr.merged - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "2017 04 17.1311.pr.merged";
        var mkdocs_page_input_path = "issues/2017-04-17.1311.pr.merged.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/rust.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', '366986045', 'auto');
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
      <li>2017 04 17.1311.pr.merged</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="1311_pr_merged_use_dracut_to_rebuild_initrd_for_rhel_on_power"><a href="https://github.com/rear/rear/pull/1311">#1311 PR</a> <code>merged</code>: Use dracut to rebuild initrd for RHEL on POWER<a class="headerlink" href="#1311_pr_merged_use_dracut_to_rebuild_initrd_for_rhel_on_power" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>fixed / solved / done</code></p>
<h4 id="schabrolles_opened_issue_at_2017-04-17_1343"><img src="https://avatars.githubusercontent.com/u/19491077?u=0021b16ab426902cbe676f6831f41607bbe4d441&v=4" width="50"><a href="https://github.com/schabrolles">schabrolles</a> opened issue at <a href="https://github.com/rear/rear/pull/1311">2017-04-17 13:43</a>:<a class="headerlink" href="#schabrolles_opened_issue_at_2017-04-17_1343" title="Permanent link">&para;</a></h4>
<p>Here is a first proposal of a <code>500_rebuild_initramfs.sh</code> script for RHEL
(based on dracut).</p>
<p>To avoid any side effect, I put it in
<code>finalize/RedHatEntrepriseServer/ppc64le</code>.<br />
But we will have a lot of duplicates soon as we may need the same kind
of file for ppc64, x86_64 and other...<br />
I think the way to manage the rebuilding of initramfs could be the same
per distro... what do you think ?</p>
<h4 id="jsmeix_commented_at_2017-04-19_1315"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1311#issuecomment-295266258">2017-04-19 13:15</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-04-19_1315" title="Permanent link">&para;</a></h4>
<p>@schabrolles<br />
in general use symbolic links for duplicated files<br />
e.g. like what we currently already have</p>
<pre>
usr/share/rear/finalize/SUSE_LINUX/ppc64/500_rebuild_initramfs.sh -> ../i386/170_rebuild_initramfs.sh
</pre>

<p>There is a general problem with how the SourceStage function<br />
in lib/framework-functions.sh sources files<br />
cf.
<a href="https://github.com/rear/rear/pull/1241#issue-214078298">https://github.com/rear/rear/pull/1241#issue-214078298</a></p>
<p>The SourceStage function basically sources all scripts<br />
that match below a directory so that one cannot have<br />
a generic default script like<br />
usr/share/rear/finalize/default/500_rebuild_initramfs.sh<br />
plus distribution/architecture specific scripts like<br />
usr/share/rear/finalize/SUSE_LINUX/ppc64/500_rebuild_initramfs.sh<br />
or<br />
usr/share/rear/finalize/RedHatEnterpriseServer/ppc64/500_rebuild_initramfs.sh<br />
that are run instead of the generic default script:</p>
<pre>
# echo hello >usr/share/rear/finalize/default/170_rebuild_initramfs.sh
# usr/sbin/rear -s recover | grep rebuild_initramfs
Source finalize/SUSE_LINUX/i386/170_rebuild_initramfs.sh
Source finalize/default/170_rebuild_initramfs.sh
</pre>

<p>Therefore we cannot have generic default scripts<br />
but must use specific scripts for all Linux distributions<br />
and architectures even if most of them would be identical.</p>
<h4 id="jsmeix_commented_at_2017-04-19_1320"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1311#issuecomment-295267499">2017-04-19 13:20</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-04-19_1320" title="Permanent link">&para;</a></h4>
<p>@schabrolles<br />
perhaps for RHEL and similar distributions (e.g Fedora and Centos)<br />
it helps to also clean up the SetOSVendorAndVersion function<br />
as I did in
<a href="https://github.com/rear/rear/pull/1241">https://github.com/rear/rear/pull/1241</a>
for SUSE<br />
to get common OS_VENDOR string?</p>
<h4 id="jsmeix_commented_at_2017-04-19_1326"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1311#issuecomment-295269572">2017-04-19 13:26</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-04-19_1326" title="Permanent link">&para;</a></h4>
<p>FWIW:<br />
The root cause why I did the SetOSVendorAndVersion<br />
cleanup for SUSE was that<br />
usr/share/rear/finalize/SUSE_LINUX/i386/170_rebuild_initramfs.sh<br />
was not run "out of the box" by ReaR - i.e. when plain ReaR was<br />
installed without an appropriate /etc/rear/os.conf file that contains</p>
<pre>
OS_VENDOR=SUSE_LINUX
</pre>

<h4 id="schlomo_commented_at_2017-04-19_1347"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/pull/1311#issuecomment-295276076">2017-04-19 13:47</a>:<a class="headerlink" href="#schlomo_commented_at_2017-04-19_1347" title="Permanent link">&para;</a></h4>
<p>@schabrolles even though probably only RHEL is used on PPC, maybe better
put your additions in /Fedora/ subdirectories to be together with the
other generic RHEL/Fedora scripts. That will also enable CentOS users to
benefit from your improvement.</p>
<p>@jsmeix let's keep the OS_MASTER_VENDOR discussion in #1241</p>
<p>The current concept is based on additive thinking, we go from very
generic (default) to distro &amp; version OR distro &amp; arch specific
(RedHatEnterpriseServer/7 OR RedHatEnterpriseServer/i386) with several
steps inbetween. The idea is to put each script in a "as generic as
possible" place.</p>
<h4 id="schabrolles_commented_at_2017-04-20_0950"><img src="https://avatars.githubusercontent.com/u/19491077?u=0021b16ab426902cbe676f6831f41607bbe4d441&v=4" width="50"><a href="https://github.com/schabrolles">schabrolles</a> commented at <a href="https://github.com/rear/rear/pull/1311#issuecomment-295657734">2017-04-20 09:50</a>:<a class="headerlink" href="#schabrolles_commented_at_2017-04-20_0950" title="Permanent link">&para;</a></h4>
<p>@schlomo As you've suggested, I've moved the build_initrd files for
POWER to Fedora directory and it works.</p>
<p>Right now, initrd is rebuilded only on storage driver changes:</p>
<pre><code># Skip if there is nothing to do.
# During "rear recover" 260_recovery_storage_drivers.sh creates $TMP_DIR/storage_drivers
if ! test -s $TMP_DIR/storage_drivers ; then
    Log "Skip recreating initrd: No needed storage drivers ('$TMP_DIR/storage_drivers' is empty)"
    return 0
fi
# During "rear mkbackup/mkrescue" 260_storage_drivers.sh creates $VAR_DIR/recovery/storage_drivers
if cmp -s $TMP_DIR/storage_drivers $VAR_DIR/recovery/storage_drivers ; then
    Log "Skip recreating initrd: '$TMP_DIR/storage_drivers' and '$VAR_DIR/recovery/storage_drivers' are the same"
    return 0
fi
</code></pre>
<p>But in the case we migrate from systemA to systemB (booth
BOOT_OVER_SAN), driver will be the same, but wwids will have changed.
=&gt; Need to update initramfs to update <code>/etc/multipath/wwids</code> file.</p>
<p>Can we use <code>is_true $MIGRATION_MODE || return 0</code> instead ?</p>
<h4 id="jsmeix_commented_at_2017-04-20_0951"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1311#issuecomment-295658228">2017-04-20 09:51</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-04-20_0951" title="Permanent link">&para;</a></h4>
<p>Regarding<br />
<a href="https://github.com/rear/rear/pull/1311#issuecomment-295276076">https://github.com/rear/rear/pull/1311#issuecomment-295276076</a><br />
"The current concept is based on additive thinking"<br />
that causes<br />
<a href="https://github.com/rear/rear/pull/1311#issuecomment-295266258">https://github.com/rear/rear/pull/1311#issuecomment-295266258</a><br />
"we cannot have generic default scripts"<br />
I created<br />
<a href="https://github.com/rear/rear/issues/1320">https://github.com/rear/rear/issues/1320</a></p>
<h4 id="jsmeix_commented_at_2017-04-20_1008"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1311#issuecomment-295664412">2017-04-20 10:08</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-04-20_1008" title="Permanent link">&para;</a></h4>
<p>I think recreating initrd only if some drivers changed it
insufficient.<br />
It basically calls for errors later when booting the recreated system.</p>
<p>I think by default initrd should always be recreated to be on the safe
side.<br />
ReaR can never verify all possible reasons why initrd must be
recreated.<br />
Only in special known cases recreating initrd could be skipped<br />
automatically by ReaR.</p>
<p>On the other hand when recreating initrd fails during "rear recover"<br />
this should not be a hard error abort because often the recreated<br />
system boots with the initrd that was restored form the backup, cf.<br />
the LogPrint "WARNING ..." messages in the rebuild_initramfs scripts.</p>
<p>Probably best is to add a new boolean config variable<br />
REBUILD_INITRAMFS=""<br />
which defaults to "yes" if not specified be the user<br />
so that by default it works fail safe but still the user has the<br />
final power to decide whether or not ReaR recreates the initrd.</p>
<h4 id="jsmeix_commented_at_2017-04-20_1357"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1311#issuecomment-295747302">2017-04-20 13:57</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-04-20_1357" title="Permanent link">&para;</a></h4>
<p>Regarding when ReaR should recreate initrd/initramfs I made<br />
<a href="https://github.com/rear/rear/issues/1321">https://github.com/rear/rear/issues/1321</a><br />
to get that issue separated from this issue here<br />
so that this issue here can be merged soon.</p>
<h4 id="jsmeix_commented_at_2017-04-20_1424"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1311#issuecomment-295756604">2017-04-20 14:24</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-04-20_1424" title="Permanent link">&para;</a></h4>
<p>@schabrolles<br />
for now ignore the issue in<br />
<a href="https://github.com/rear/rear/pull/1311#issuecomment-295657734">https://github.com/rear/rear/pull/1311#issuecomment-295657734</a><br />
so that this pull request can be merged soon.<br />
When it is merged (i.e. when all current pull requests that<br />
change rebuild_initramfs scripts are merged) I will implement<br />
<a href="https://github.com/rear/rear/issues/1321">https://github.com/rear/rear/issues/1321</a><br />
(which also needs changes in all rebuild_initramfs scripts).</p>
<h4 id="schabrolles_commented_at_2017-04-20_1428"><img src="https://avatars.githubusercontent.com/u/19491077?u=0021b16ab426902cbe676f6831f41607bbe4d441&v=4" width="50"><a href="https://github.com/schabrolles">schabrolles</a> commented at <a href="https://github.com/rear/rear/pull/1311#issuecomment-295758114">2017-04-20 14:28</a>:<a class="headerlink" href="#schabrolles_commented_at_2017-04-20_1428" title="Permanent link">&para;</a></h4>
<p>@jsmeix I don't know if I can use a link to
<code>finalize/Fedora/i386/170_rebuild_initramfs.sh</code> as the 2 script doesn't
look the same here.</p>
<p><code>finalize/Fedora/i386/500_rebuild_initramfs.sh</code> use dracut, but not
<code>finalize/Fedora/i386/170_rebuild_initramfs.sh</code>.</p>
<p>dracut seems to be the prefered way to regenerate initrd in rhel... but
I don't know the reason why
<code>finalize/Fedora/i386/170_rebuild_initramfs.sh</code> is not using it.... (may
be there is a good one ...)</p>
<h4 id="jsmeix_commented_at_2017-04-20_1435"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1311#issuecomment-295760445">2017-04-20 14:35</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-04-20_1435" title="Permanent link">&para;</a></h4>
<p>I think mkinitrd is the traditional executable to recreate the initrd<br />
which still works also when dracut is used so that mkinitrd is the<br />
generically working way to recreate the initrd also on old systems<br />
where no dracut is used.</p>
<h4 id="schabrolles_commented_at_2017-04-20_1441"><img src="https://avatars.githubusercontent.com/u/19491077?u=0021b16ab426902cbe676f6831f41607bbe4d441&v=4" width="50"><a href="https://github.com/schabrolles">schabrolles</a> commented at <a href="https://github.com/rear/rear/pull/1311#issuecomment-295762176">2017-04-20 14:41</a>:<a class="headerlink" href="#schabrolles_commented_at_2017-04-20_1441" title="Permanent link">&para;</a></h4>
<p>Ok, So let me try to use <code>i386/170_rebuild_initramfs</code> based on mkinitrd,
I will add my multipath addition and test it on POWER.<br />
If it work, we can use only one script for all.</p>
<h4 id="schabrolles_commented_at_2017-04-21_1204"><img src="https://avatars.githubusercontent.com/u/19491077?u=0021b16ab426902cbe676f6831f41607bbe4d441&v=4" width="50"><a href="https://github.com/schabrolles">schabrolles</a> commented at <a href="https://github.com/rear/rear/pull/1311#issuecomment-296173101">2017-04-21 12:04</a>:<a class="headerlink" href="#schabrolles_commented_at_2017-04-21_1204" title="Permanent link">&para;</a></h4>
<p>@jsmeix it seems to work well by using link :<br />
<code>finalize/SUSE_LINUX/ppc64/500_rebuild_initramfs.sh -&gt; ../i386/500_rebuild_initramfs.sh</code>
and
<code>finalize/SUSE_LINUX/ppc64le/500_rebuild_initramfs.sh -&gt; ../i386/500_rebuild_initramfs.sh</code></p>
<p><code>finalize/Fedora/ppc64/500_rebuild_initramfs.sh -&gt; ../i386/500_rebuild_initramfs.sh</code>
and
<code>finalize/Fedora/ppc64le/500_rebuild_initramfs.sh -&gt; ../i386/500_rebuild_initramfs.sh</code><br />
tested with RHEL6 (ppc64) and RHEL7.2 (ppc64le).</p>
<h4 id="schabrolles_commented_at_2017-04-24_1114"><img src="https://avatars.githubusercontent.com/u/19491077?u=0021b16ab426902cbe676f6831f41607bbe4d441&v=4" width="50"><a href="https://github.com/schabrolles">schabrolles</a> commented at <a href="https://github.com/rear/rear/pull/1311#issuecomment-296622726">2017-04-24 11:14</a>:<a class="headerlink" href="#schabrolles_commented_at_2017-04-24_1114" title="Permanent link">&para;</a></h4>
<p>@jsmeix I would like to move the multipath configuration (before
creating ramdisk) to a separated script usable by other distro/arch
<code>finalize/GNU/Linux/430_create_multipath.sh</code>.</p>
<p>This should simplify the <code>500_rebuild_initramfs.sh</code> and let it focus on
rebuilding initramfs.</p>
<h4 id="jsmeix_commented_at_2017-04-24_1213"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1311#issuecomment-296642310">2017-04-24 12:13</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-04-24_1213" title="Permanent link">&para;</a></h4>
<p>@schabrolles<br />
I fully agree to use separated scripts for separated tasks<br />
and I do very much appreciate all your cleanup and<br />
improvements here.</p>
<h4 id="schabrolles_commented_at_2017-04-25_1001"><img src="https://avatars.githubusercontent.com/u/19491077?u=0021b16ab426902cbe676f6831f41607bbe4d441&v=4" width="50"><a href="https://github.com/schabrolles">schabrolles</a> commented at <a href="https://github.com/rear/rear/pull/1311#issuecomment-296982177">2017-04-25 10:01</a>:<a class="headerlink" href="#schabrolles_commented_at_2017-04-25_1001" title="Permanent link">&para;</a></h4>
<p>@jsmeix I like it !!! Let me test it and if it works I'll push the
change.</p>
<h4 id="jsmeix_commented_at_2017-04-25_1048"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1311#issuecomment-296992683">2017-04-25 10:48</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-04-25_1048" title="Permanent link">&para;</a></h4>
<p>@schabrolles<br />
and see my above comment<br />
<a href="https://github.com/rear/rear/pull/1311#pullrequestreview-33787588">https://github.com/rear/rear/pull/1311#pullrequestreview-33787588</a><br />
"LogPrint messages missing when programs in chroot fail".</p>
<p>Ultimately it is your decision whether or not to show<br />
LogPrint messages when something failed<br />
or error out in such cases<br />
or ignore when something failed (as it is now).</p>
<p>From plain looking at 430_create_multipath_config.sh<br />
it seems the code therein works somehow like</p>
<pre>
if MULTIPATH_SETUP_NEEDED ; then
    do_stuff_to_setup_multipath
fi
</pre>

<p>which looks as if on the one hand it is required<br />
that do_stuff_to_setup_multipath runs successfully<br />
but on the other hand it is silently ignored when it fails.</p>
<h4 id="schabrolles_commented_at_2017-04-25_1341"><img src="https://avatars.githubusercontent.com/u/19491077?u=0021b16ab426902cbe676f6831f41607bbe4d441&v=4" width="50"><a href="https://github.com/schabrolles">schabrolles</a> commented at <a href="https://github.com/rear/rear/pull/1311#issuecomment-297033402">2017-04-25 13:41</a>:<a class="headerlink" href="#schabrolles_commented_at_2017-04-25_1341" title="Permanent link">&para;</a></h4>
<p>@jsmeix thanks for your comments, I've updated the code (and correct a
bug by the way ... /proc was missing !!).</p>
<p>Please have a look to this updated version, tested against SLES11 SLE12,
RHEL 6 &amp; RHEL7</p>
<h4 id="jsmeix_commented_at_2017-04-25_1354"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/pull/1311#issuecomment-297037483">2017-04-25 13:54</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-04-25_1354" title="Permanent link">&para;</a></h4>
<p>When there are no objections<br />
I will merge it soon...</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2022 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2017-04-17.1311.pr.merged.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
