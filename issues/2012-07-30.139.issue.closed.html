<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>#139 Issue closed: ISO image on VMware guest (with VMware-Tools installed) is 140MB - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "#139 Issue closed: ISO image on VMware guest (with VMware-Tools installed) is 140MB";
        var mkdocs_page_input_path = "issues/2012-07-30.139.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', "366986045", "auto");
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">#139 Issue closed: ISO image on VMware guest (with VMware-Tools installed) is 140MB</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="139_issue_closed_iso_image_on_vmware_guest_with_vmware-tools_installed_is_140mb"><a href="https://github.com/rear/rear/issues/139">#139 Issue</a> <code>closed</code>: ISO image on VMware guest (with VMware-Tools installed) is 140MB<a class="headerlink" href="#139_issue_closed_iso_image_on_vmware_guest_with_vmware-tools_installed_is_140mb" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>cleanup</code>, <code>discuss / RFC</code></p>
<h4 id="dagwieers_opened_issue_at_2012-07-30_1035"><img src="https://avatars.githubusercontent.com/u/388198?u=0732dee3fe5002278cfbf40359ec431bdcf5f06c&v=4" width="50"><a href="https://github.com/dagwieers">dagwieers</a> opened issue at <a href="https://github.com/rear/rear/issues/139">2012-07-30 10:35</a>:<a class="headerlink" href="#dagwieers_opened_issue_at_2012-07-30_1035" title="Permanent link">&para;</a></h4>
<p>An image created on a VMware guest with VMware-Tools installed, creates
a 140MB ISO image. The breakdown of the big diskspace consumers are:</p>
<pre><code>15M     /bin/
66M     /lib/
11M     /lib64/
292M    /usr/
</code></pre>
<p>breaking this further down to the most detailed/relevant view:</p>
<pre><code>28M     /lib/firmware/
37M     /lib/modules/
23M     /usr/lib/vmware-tools/lib32/
27M     /usr/lib/vmware-tools/lib64/
215M    /usr/lib/vmware-tools/modules/
</code></pre>
<p>So I guess instead of including the complete /usr/lib/vmware-tools/, we
need to look at being a bit more smart about it. I think we can exclude
/usr/Lib/vmware-tools/modules/ completely. An RPM based installation of
VMware-Tools might also be better than the example manual installation
:-/</p>
<h4 id="dagwieers_commented_at_2012-07-30_1048"><img src="https://avatars.githubusercontent.com/u/388198?u=0732dee3fe5002278cfbf40359ec431bdcf5f06c&v=4" width="50"><a href="https://github.com/dagwieers">dagwieers</a> commented at <a href="https://github.com/rear/rear/issues/139#issuecomment-7365247">2012-07-30 10:48</a>:<a class="headerlink" href="#dagwieers_commented_at_2012-07-30_1048" title="Permanent link">&para;</a></h4>
<p>The inclusion of the complete /usr/lib/vmware-tools/ directory inflates
the rescue image greatly. I want to understand the goals of including
this complete directory:</p>
<p>prep/GNU/Linux/28_include_vmware_tools.sh:</p>
<pre><code>#  $Id$
# 
#  recent vmware tools (or maybe it is just open-vm-tools on SUSE) keep their modules
#  outside the /lib/modules path. To cope with that we add the vmware-tools if vmxnet
#  is loaded but modinfo cannot find it.

if lsmod | grep -q vmxnet ; then
        if ! modinfo vmxnet &gt;&amp;8 2&gt;&amp;1; then
                COPY_AS_IS=( "${COPY_AS_IS[@]}" /usr/lib*/vmware-tools )
                Log "Including '/usr/lib*/vmware-tools'"
        fi
fi
</code></pre>
<p>As I don't see a good reason to include the complete VMware-Tools, but
also don't want to add the complete VMware-Tools modules directory
(containing modules for all sorts of kernels for all sorts of
distributions) is there not a better solution for this situation ?</p>
<p>Either move the modules (and dependencies) directly into
/lib/modules/... or something even better ?</p>
<p>PS On RHEL6 the VMware modules are part of the kernel shipped by Red
Hat. So I doubt we even need this directory at all.</p>
<h4 id="gdha_commented_at_2012-07-30_1134"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/139#issuecomment-7366026">2012-07-30 11:34</a>:<a class="headerlink" href="#gdha_commented_at_2012-07-30_1134" title="Permanent link">&para;</a></h4>
<p>I think this was added by Schlomo? We better wait until he is back...to
understand the background of it.</p>
<h4 id="dagwieers_commented_at_2012-07-30_1152"><img src="https://avatars.githubusercontent.com/u/388198?u=0732dee3fe5002278cfbf40359ec431bdcf5f06c&v=4" width="50"><a href="https://github.com/dagwieers">dagwieers</a> commented at <a href="https://github.com/rear/rear/issues/139#issuecomment-7366329">2012-07-30 11:52</a>:<a class="headerlink" href="#dagwieers_commented_at_2012-07-30_1152" title="Permanent link">&para;</a></h4>
<p>The reason why it fails on RHEL6 is because the VMware network module is
called vmxnet3, and so the first match works, but the second fails (as
if the module is not in the normal modules directory). But even if I
correct this for RHEL6, the reported problem still exists for those
distributions using vmxnet as part of VMwareTools.</p>
<h4 id="gdha_commented_at_2012-10-12_1213"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/139#issuecomment-9374562">2012-10-12 12:13</a>:<a class="headerlink" href="#gdha_commented_at_2012-10-12_1213" title="Permanent link">&para;</a></h4>
<p>@dagwieers can this issue be closed? Or are we still waiting on
feedback?</p>
<h4 id="dagwieers_commented_at_2012-10-12_1231"><img src="https://avatars.githubusercontent.com/u/388198?u=0732dee3fe5002278cfbf40359ec431bdcf5f06c&v=4" width="50"><a href="https://github.com/dagwieers">dagwieers</a> commented at <a href="https://github.com/rear/rear/issues/139#issuecomment-9374957">2012-10-12 12:31</a>:<a class="headerlink" href="#dagwieers_commented_at_2012-10-12_1231" title="Permanent link">&para;</a></h4>
<p>This is something we should improve IMO. It makes no sense to include
everything under the sun, if we only need to have the modules for our
specific kernel. So I would keep this issue open until this improvement
is implemented.</p>
<p>I moved it to the "Rear future" milestone since it's not blocking us,
but if someone interested in fixing this he can find the cause and
understands the what and the why. I could implement what I think is
required, but have no means to test it myself, so I prefer to not do it
myself.</p>
<h4 id="reiner030_commented_at_2014-10-16_2342"><img src="https://avatars.githubusercontent.com/u/29528?v=4" width="50"><a href="https://github.com/Reiner030">Reiner030</a> commented at <a href="https://github.com/rear/rear/issues/139#issuecomment-59447755">2014-10-16 23:42</a>:<a class="headerlink" href="#reiner030_commented_at_2014-10-16_2342" title="Permanent link">&para;</a></h4>
<p>On my testsystem it looks good - so the task can "finally" closed ? ;)</p>
<pre><code>root@rear-test ~ # uname -a
Linux rear-test 3.2.0-4-amd64 #1 SMP Debian 3.2.60-1+deb7u3 x86_64 GNU/Linux
root@rear-test ~ # vmware-checkvm
VMware software version 6 (good)
root@rear-test ~ # rear -V
Relax-and-Recover 1.16.1 / Git
root@rear-test ~ # ls -lh /var/lib/rear/output/
total 70M
-rw------- 1 root root 70M Oct 15 01:06 rear-rear-test.iso
</code></pre>
<h4 id="gdha_commented_at_2014-10-17_0819"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/139#issuecomment-59481386">2014-10-17 08:19</a>:<a class="headerlink" href="#gdha_commented_at_2014-10-17_0819" title="Permanent link">&para;</a></h4>
<p>+1: we also have no impact of the vmware-tools</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2024 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2012-07-30.139.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rear/rear-user-guide" class="fa fa-code-fork" style="color: #fcfcfc"> rear/rear-user-guide</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
