<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <meta property="og:title" content="Relax-and-Recover (ReaR) User Guide Documentation"/>
    <meta property="og:description" content="This is an umbrella documentation project for all Relax-and-Recover (ReaR) kind of documentation ans starting with a good User Guide."/>
    <meta property="og:locale" content="en_US"/>
    <meta property="og:url" content="https://relax-and-recover.org/rear-user-guide/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://relax-and-recover.org/rear-user-guide/img/rear_logo_50.png"/>
    <meta property="og:image:width" content="50"/>
    <meta property="og:image:height" content="50"/>
    
    <title>2016 02 12.769.issue.closed - Relax-and-Recover (ReaR) User Guide Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../css/rear.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "2016 02 12.769.issue.closed";
        var mkdocs_page_input_path = "issues/2016-02-12.769.issue.closed.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/rust.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', '366986045', 'auto');
        ga('send', 'pageview');
      </script>
    
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../index.html" class="icon icon-home"> Relax-and-Recover (ReaR) User Guide Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">WELCOME</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../welcome/index.html">Get started!</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">BASICS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/introduction.html">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/history.html">Bit of History</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/getting-started.html">Getting started with ReaR</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basics/configuration.html">Basic configuration</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">SCENARIOS</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../scenarios/index.html">Scenarios Overview</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">DEVELOPMENT</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../development/github-pr.html">Make a pull request with GitHub</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RELEASE NOTES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/index.html">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear27.html">Release Notes ReaR 2.7</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/rear26.html">Release Notes ReaR 2.6</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releasenotes/knownproblems.html">Known Problems and Workarounds</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">ISSUES</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="index.html">Issues History</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LEGAL</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/contributing/index.html">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../legal/license/index.html">License</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Relax-and-Recover (ReaR) User Guide Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html" class="icon icon-home" aria-label="Docs"></a> &raquo;</li>
      <li>2016 02 12.769.issue.closed</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="769_issue_closed_fundamental_enhancements_for_the_backup"><a href="https://github.com/rear/rear/issues/769">#769 Issue</a> <code>closed</code>: Fundamental enhancements for the backup<a class="headerlink" href="#769_issue_closed_fundamental_enhancements_for_the_backup" title="Permanent link">&para;</a></h1>
<p><strong>Labels</strong>: <code>enhancement</code>, <code>fixed / solved / done</code></p>
<h4 id="jsmeix_opened_issue_at_2016-02-12_1024"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> opened issue at <a href="https://github.com/rear/rear/issues/769">2016-02-12 10:24</a>:<a class="headerlink" href="#jsmeix_opened_issue_at_2016-02-12_1024" title="Permanent link">&para;</a></h4>
<p>This issue is meant as some kind of generic container<br />
or parent issue of various specific issues to collect the<br />
basic ideas about fundamental enhancements regarding<br />
how the backup and restore of the files is done in rear.</p>
<p>For an explanation about the basic design ideas behind<br />
how curently the backup of the files is done in rear see<br />
<a href="https://github.com/rear/rear/issues/733#issuecomment-183205395">https://github.com/rear/rear/issues/733#issuecomment-183205395</a><br />
(excerpts):</p>
<pre>
By design ReaR operates on the filesystem level.
That means that anything not mounted
is out of scope for ReaR.

The design goal of ReaR was to take a
backup / layout snapshot of a running system
</pre>

<p>From "anything not mounted is out of scope for ReaR" results<br />
one idea for a fundamental enhancements for the backup:</p>
<pre>
Add support to also backup files
from non-mounted volumes.
</pre>

<p>Another basic design how curently the backup of the files<br />
is done in rear is:</p>
<pre>
Only one single backup method can be used
at runtime.
Rear supports many different backup methods
but one must select a single one that is
actually used.
One cannot backup (and restore) some files
with backup method "A" and other files with
another backup method "B".
</pre>

<p>From "one single backup method at runtime" results<br />
another idea for a fundamental enhancements for the backup:</p>
<pre>
Add support to use multiple backup methods.
</pre>

<h4 id="schlomo_commented_at_2016-02-12_1118"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/769#issuecomment-183282736">2016-02-12 11:18</a>:<a class="headerlink" href="#schlomo_commented_at_2016-02-12_1118" title="Permanent link">&para;</a></h4>
<p>@jsmeix thanks for opening up this issue.</p>
<h2 id="improving_the_netfs_backup">Improving the NETFS Backup<a class="headerlink" href="#improving_the_netfs_backup" title="Permanent link">&para;</a></h2>
<p>IMHO we would be better off to extract the backup functionality from
ReaR into a separate Open Source project which deals only with backup
and restore.</p>
<p>That way we can stay true to ReaRs goal of doing the "bare metal" part
while also delivering value with a new backup solution that can focus
only on that part.</p>
<h2 id="unmounted_volumes">Unmounted Volumes<a class="headerlink" href="#unmounted_volumes" title="Permanent link">&para;</a></h2>
<p>This is a real challange because there is usually a very good reason why
they are not mounted. Most likely because other systems use those
volumes and the filesystem on the volume is not multi-host capable (e.g.
a cluster FS).</p>
<p>I don't think that a truly generic solution will come easily. Maybe a
long chain of special solutions for well-defined use cases.</p>
<p>Another thought: ReaR operates on block devices, block device layers
(partitions, LVM ...) and filesystems. If you can "wrap" other stuff
into this format then it would be probably easy to support in ReaR.</p>
<h2 id="multiple_backup_methods">Multiple Backup Methods<a class="headerlink" href="#multiple_backup_methods" title="Permanent link">&para;</a></h2>
<p>The wish to support more than one backup method is also very
interesting. I think the solution for that would be to create a new
backup method called "META" which would then in turn use a mapping
between files and dirs and backup methods to do the actual work.</p>
<p>If there is a specific user request then I think that this is a good
start for somebody who wants to code for ReaR.</p>
<h4 id="jsmeix_commented_at_2016-02-12_1249"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/769#issuecomment-183310560">2016-02-12 12:49</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-02-12_1249" title="Permanent link">&para;</a></h4>
<p>A possible use case for "Multiple Backup Methods":</p>
<p>Assume a 100GB btrfs with snapshot subvolumes is used for the basic
system and a huge 10TB xfs is used for a database application.</p>
<p>Then one may like to backup the btrfs subvolume that contains the
currently used basic system with one method (e.g. plain "tar") and the
btrfs snapshot subvolumes with another method (e.g. "btrfs send" or
whatever is "in vogue" for btrfs snapshot subvolumes) and for the
database application a special third-party backup solution is used.</p>
<p>During "rear recover" first the basic system would be restored from the
backup.tar.gz, then the restore of btrfs snapshot subvolumes may be just
skipped by the admin (because they would be restored only during runtime
if actually needed), and finally the third-party backup solution
restores the database.</p>
<p>For the third-party backup restore it might be even posible to "chroot"
into "/mnt/local" and run the third-party backup solution in the already
restored basic system. The advantage would be that the third-party
backup restore software does no longer need to be included in the rear
recovery system so that using a simple generic rear recovery system also
for third-party backup solutions might be possible.</p>
<h4 id="jsmeix_commented_at_2016-02-12_1259"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/769#issuecomment-183315533">2016-02-12 12:59</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-02-12_1259" title="Permanent link">&para;</a></h4>
<p>@schlomo regarding "extract the backup functionality from ReaR into a
separate Open Source project":</p>
<p>I fully agree with that future goal.</p>
<p>I prefer so much to Keep Separated Issues Separated ( KSIS ;-)</p>
<p>@schlomo regarding "specific user request":</p>
<p>Yes. My intent here is only brainstorming and discussion without
obligation - in particular no "proactive implementation without actual
user/customer request".</p>
<h4 id="didacog_commented_at_2016-02-12_1314"><img src="https://avatars.githubusercontent.com/u/5380209?u=163f1571e6b9c9c7df94e2c6ca152b0a7406b52d&v=4" width="50"><a href="https://github.com/didacog">didacog</a> commented at <a href="https://github.com/rear/rear/issues/769#issuecomment-183323143">2016-02-12 13:14</a>:<a class="headerlink" href="#didacog_commented_at_2016-02-12_1314" title="Permanent link">&para;</a></h4>
<p>@schlomo @jsmeix</p>
<p>Hi, regarding this: "extract the backup functionality from ReaR into a
separate Open Source project"</p>
<p>We rely on these features to manage ReaR deployments, we take care of
Rescue images and required services and provide store for DR backups
also. This could break integration with DRLM if those big changes are
not well planned.</p>
<h4 id="schlomo_commented_at_2016-02-12_1317"><img src="https://avatars.githubusercontent.com/u/101384?v=4" width="50"><a href="https://github.com/schlomo">schlomo</a> commented at <a href="https://github.com/rear/rear/issues/769#issuecomment-183325140">2016-02-12 13:17</a>:<a class="headerlink" href="#schlomo_commented_at_2016-02-12_1317" title="Permanent link">&para;</a></h4>
<p>With regard to the 10TB data volume with the 3rd party backup beeing
called via chroot after restoring the base system: I don't see anything
in ReaR that prevents you from doing that with a few lines placed either
in <code>POST_RECOVERY_SCRIPT</code> or dropped into the relevant script directory
within ReaR.</p>
<p>If you have the need, why not simply create a <code>rear-foobar</code> tool that
provides the glue code between the <code>foobar</code> 3rd party backup tool and
ReaR. That package will add some files in <code>/usr/share/rear</code> and
integrate itself into ReaR.</p>
<p>It seems to me that many people don't see the modularized design of ReaR
as an asset. It was written like that specifically to make this kind of
deeply integrated extensions simple.</p>
<p>@didacog good that you are here and participate in the discssion. Rest
assured that we value your opinions highly.</p>
<h4 id="jsmeix_commented_at_2016-02-12_1334"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/769#issuecomment-183331359">2016-02-12 13:34</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-02-12_1334" title="Permanent link">&para;</a></h4>
<p>@schlomo I was not talking about how to implement something and/or how
complicated that could be. Of course because rear is bash scripts each
user can always implement his own adaptions and enhancements as he
needs. The question here is more what rear might provide ready-made "out
of the box" in the future - provided a user really needs it ( and when
he also likes to pay for it, I or anybody else could even implement it
for him ;-)</p>
<p>@didacog if the backup functionality would be split from ReaR into a
separate Open Source project I would expect that all what is needed by
the user is to install one more software package (e.g. a RPM package)
that provides the backup functionality. Just as it is now: Rear does not
provide any actual backup software (e.g "tar").</p>
<h4 id="didacog_commented_at_2016-02-12_1343"><img src="https://avatars.githubusercontent.com/u/5380209?u=163f1571e6b9c9c7df94e2c6ca152b0a7406b52d&v=4" width="50"><a href="https://github.com/didacog">didacog</a> commented at <a href="https://github.com/rear/rear/issues/769#issuecomment-183334868">2016-02-12 13:43</a>:<a class="headerlink" href="#didacog_commented_at_2016-02-12_1343" title="Permanent link">&para;</a></h4>
<p>@jsmeix</p>
<p>True, ReaR does not provide the backup software (tar, bareOS,
Netbackup,...), but provides the required methods to backup and recover
the OS properly with these tools.<br />
Maybe putting this methods outside from ReaR will be more probelmatic
than keep them inside</p>
<h4 id="jsmeix_commented_at_2016-02-12_1520"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/769#issuecomment-183370695">2016-02-12 15:20</a>:<a class="headerlink" href="#jsmeix_commented_at_2016-02-12_1520" title="Permanent link">&para;</a></h4>
<p>@didacog regarding "probelmatic":<br />
For example I wonder how to get third-party backup restore software
included in the rear recovery system if the backup functionality would
be split from ReaR. Certainly doable but probably "problematic". With
third-party backup software I mean basically all the real backup
solutions that are currently supported by rear (i.e. basically all
except "tar").</p>
<p>On the other hand if the backup functionality would be split from rear
it requires a clear and stable interface between rear and the backup
software. Such an interface could make it easier for the user to
integrate any backup software. Currently that is a bit complicated, see
doc/user-guide/10-integrating-external-backup.adoc and perhaps even more
important: Currently integrating a backup software means code hacking in
rear.</p>
<h4 id="didacog_commented_at_2016-02-12_1539"><img src="https://avatars.githubusercontent.com/u/5380209?u=163f1571e6b9c9c7df94e2c6ca152b0a7406b52d&v=4" width="50"><a href="https://github.com/didacog">didacog</a> commented at <a href="https://github.com/rear/rear/issues/769#issuecomment-183377672">2016-02-12 15:39</a>:<a class="headerlink" href="#didacog_commented_at_2016-02-12_1539" title="Permanent link">&para;</a></h4>
<p>@jsmeix<br />
Ok, your point is keep standard OS backup tools (tar, rsync,..), methods
in rear but extract to external tool the third-party backup solutions?<br />
In this case I understand better your point. I understood to exclude all
methots, including standard linux os backups tools, this was my concern.</p>
<h4 id="didacog_commented_at_2016-02-12_2201"><img src="https://avatars.githubusercontent.com/u/5380209?u=163f1571e6b9c9c7df94e2c6ca152b0a7406b52d&v=4" width="50"><a href="https://github.com/didacog">didacog</a> commented at <a href="https://github.com/rear/rear/issues/769#issuecomment-183504651">2016-02-12 22:01</a>:<a class="headerlink" href="#didacog_commented_at_2016-02-12_2201" title="Permanent link">&para;</a></h4>
<p>@schlomo @jsmeix</p>
<p>Please correct me if i'm wrong regarding to split backup methods to
separate project.</p>
<p>The objective will be to keep only the BACKUP=NETFS (tar, rsync) in ReaR
and move all other methods to a separate project? this way focusing only
in the OS backup/recovery (bare metal) using just the standard OS tools?</p>
<p>If this is the goal I'm totally agree and also think this will reduce
complexity.</p>
<p>Sorry for my previous misunderstanding.</p>
<h4 id="gdha_commented_at_2016-02-13_1115"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/769#issuecomment-183644607">2016-02-13 11:15</a>:<a class="headerlink" href="#gdha_commented_at_2016-02-13_1115" title="Permanent link">&para;</a></h4>
<p>@didacog <em>Small Note</em> Nothing will change for the moment, and maybe for
a long time if no-one contributes to this or sponsor the new way of
integration. I prefer getting a stable rear package for the moment.</p>
<h4 id="didacog_commented_at_2016-02-13_2124"><img src="https://avatars.githubusercontent.com/u/5380209?u=163f1571e6b9c9c7df94e2c6ca152b0a7406b52d&v=4" width="50"><a href="https://github.com/didacog">didacog</a> commented at <a href="https://github.com/rear/rear/issues/769#issuecomment-183756277">2016-02-13 21:24</a>:<a class="headerlink" href="#didacog_commented_at_2016-02-13_2124" title="Permanent link">&para;</a></h4>
<p>@gdha<br />
Of course, I was talking in the context of "ReaR future", i understand
this is not an inmediate goal. I just wanted to give my point of view
about those proposed changes for future.<br />
On the other hand, can take us into account (DRLM Team) for helping to
contribute in those goals in future.</p>
<h4 id="gdha_commented_at_2017-01-17_1247"><img src="https://avatars.githubusercontent.com/u/888633?u=cdaeb31efcc0048d3619651aa18dd4b76e636b21&v=4" width="50"><a href="https://github.com/gdha">gdha</a> commented at <a href="https://github.com/rear/rear/issues/769#issuecomment-273136461">2017-01-17 12:47</a>:<a class="headerlink" href="#gdha_commented_at_2017-01-17_1247" title="Permanent link">&para;</a></h4>
<p>@jsmeix something to discuss at Fosdem</p>
<h4 id="jsmeix_commented_at_2017-01-17_1312"><img src="https://avatars.githubusercontent.com/u/1788608?u=925fc54e2ce01551392622446ece427f51e2f0ce&v=4" width="50"><a href="https://github.com/jsmeix">jsmeix</a> commented at <a href="https://github.com/rear/rear/issues/769#issuecomment-273150748">2017-01-17 13:12</a>:<a class="headerlink" href="#jsmeix_commented_at_2017-01-17_1312" title="Permanent link">&para;</a></h4>
<p>Yes!</p>
<p>But I think we can even close it as "fixed" right now<br />
because multiple backup methods is already implemented<br />
and for unmounted volumes there will be the new kind of<br />
"backup" method: BACKUP=BLOCKCLONE from @gozora<br />
<a href="https://github.com/rear/rear/issues/1162">https://github.com/rear/rear/issues/1162</a><br />
which will be in ReaR 2.1 (with probability one ;-)</p>
<p>If something new appears on FOSDEM we could better<br />
open a new separated issue for that.</p>
<hr />
<p>[Export of Github issue for
<a href="https://github.com/rear/rear">rear/rear</a>.]</p>
              
            </div>
          </div>

<footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
    <p>Copyright 2022 - CC0 1.0 Universal<br />Give <a href="https://github.com/rear/rear-user-guide/issues/new?title=issues/2016-02-12.769.issue.closed.html">feedback</a> on this page.</p>
    
  </div>
</footer>

        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
